<div class="container">

<table style="width: 100%;"><tr>
<td>grad_share</td>
<td style="text-align: right;">R Documentation</td>
</tr></table>
<h2>Split function and gradient calculation</h2>

<h3>Description</h3>

<p>Calculate function and gradient together but access separately.
Reduces computation since they share data in calculation.
Doesn't have to be function and gradient, can be any two
values calculated together but accessed separately.
Useful in optimization when function evaluation is expensive
since the chain rule means many parts of function and gradient
are the same.
</p>


<h3>Usage</h3>

<pre><code class="language-R">grad_share(fn_gr)
</code></pre>


<h3>Arguments</h3>

<table><tr style="vertical-align: top;">
<td><code>fn_gr</code></td>
<td>
<p>A function that returns a list of two values.
Both are calculated when fn is called, but only the first
is returned. The second is returned when gr is called
but nothing is recalculated.</p>
</td>
</tr></table>
<h3>Value</h3>

<p>An environment with two functions, fn and gr.
</p>


<h3>Examples</h3>

<pre><code class="language-R">quad_share &lt;- function(x){list(sum(x^4), 4*x^3)}
share &lt;- grad_share(quad_share)
share$fn(1)
share$gr(1)
share$gr(2)
share$fn(2)
share$gr(2)
</code></pre>


</div>