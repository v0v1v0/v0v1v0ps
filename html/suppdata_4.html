<div class="container">

<table style="width: 100%;"><tr>
<td>suppdata</td>
<td style="text-align: right;">R Documentation</td>
</tr></table>
<h2>Download supplementary materials from journals</h2>

<h3>Description</h3>

<p>Put a call to this function where you would put a file-path - everything 
is cached by default, so you don't have to worry about multiple downloads 
in the same session.
</p>


<h3>Usage</h3>

<pre><code class="language-R">suppdata(
  x,
  si,
  from = c("auto", "plos", "wiley", "science", "proceedings", "figshare",
    "esa_data_archives", "esa_archives", "biorxiv", "epmc", "peerj", "copernicus",
    "jstatsoft"),
  save.name = NA,
  dir = NA,
  cache = TRUE,
  vol = NA,
  issue = NA,
  list = FALSE,
  timeout = 10,
  zip = FALSE
)

## S3 method for class 'character'
suppdata(
  x,
  si,
  from = c("auto", "plos", "wiley", "science", "proceedings", "figshare",
    "esa_data_archives", "esa_archives", "biorxiv", "epmc", "peerj", "copernicus",
    "jstatsoft"),
  save.name = NA,
  dir = NA,
  cache = TRUE,
  vol = NA,
  issue = NA,
  list = FALSE,
  timeout = 10,
  zip = FALSE
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr style="vertical-align: top;">
<td><code>x</code></td>
<td>
<p>One of: vector of DOI(s) of article(s) (a
<code>character</code>) or ESA-specific article code.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>si</code></td>
<td>
<p>number of the supplementary information (SI) to be
downloaded (1, 2, 3, etc.), or (for ESA, Science, and
Copernicus journals) the name of the supplement (e.g.,
"S1_data.csv"). Can be a <code>character</code> or <code>numeric</code>.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>from</code></td>
<td>
<p>Publisher of article (<code>character</code>). The default
(<code>auto</code>) uses crossref (<code>cr_works</code>)
to detect the journal's publisher. Specifying the journal can
somewhat speed up your download, or be used to force a download
from EPMC (see details). You *must* specify if downloading from
an ESA journal (<code>esa_data_archives</code>,
<code>esa_archives</code>). You can only use this argument if
<code>x</code> is a vector of DOI(s). Must be one of: <code>auto</code>
(i.e., auto-detect journal; default), <code>plos</code>,
<code>wiley</code>, <code>science</code>, <code>proceedings</code>,
<code>figshare</code>, <code>esa_data_archives</code>, <code>esa_archives</code>,
<code>biorxiv</code>, <code>epmc</code>, <code>peerj</code>, <code>copernicus</code>,
(Data)<code>dryad</code>), <code>mdpi</code>, or <code>jstatsoft</code>.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>save.name</code></td>
<td>
<p>a name for the file to download
(<code>character</code>). If <code>NA</code> (default) this will be a
combination of the DOI and SI number</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>dir</code></td>
<td>
<p>directory to save file to (<code>character</code>). If
<code>NA</code> (default) this will be a temporary directory created
for your files</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>cache</code></td>
<td>
<p>if <code>TRUE</code> (default), the file won't be downloaded
again if it already exists (in a temporary directory creates,
or your chosen <code>dir</code>)</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>vol</code></td>
<td>
<p>Article volume (Proceedings journals only;
<code>numeric</code>)</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>issue</code></td>
<td>
<p>Article issue (Proceedings journals only;
<code>numeric</code>)</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>list</code></td>
<td>
<p>if <code>TRUE</code>, print all files within a zip-file
downloaded from EPMC (default: FALSE). This is *very* useful if
using EPMC (see details)</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>timeout</code></td>
<td>
<p>how long to wait for successful download (default 10
seconds)</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>zip</code></td>
<td>
<p>if <code>TRUE</code>, force download in binary format in order
to ensure that zipped files will work on Windows (default
FALSE).</p>
</td>
</tr>
</table>
<h3>Details</h3>

<p>The examples probably give the best indication of how to
use this function. In general, just specify the DOI of the article
you want to download data from, and the number of the supplement
you want to download (1, 5, etc.). Proceedings, and Science journals
need you to give the filename of the supplement to
download. The file extensions (suffixes) of files are returned as
<code>suffix</code> attributes (see first example), which may be useful
if you don't know the format of the file you're downloading.
</p>
<p>For any DOIs not recognised (and if asked) the European PubMed
Central API is used to look up articles. What this database calls a
supplementary file varies by publisher; often they will simply be
figures within articles, but we (obviously) have no way to check
this at run-time. I strongly recommend you run any EPMC calls with
<code>list=TRUE</code> the first time, to see the filenames that EPMC
gives supplements, as these also often vary from what the authors
gave them. This may actually be a 'feature', not a 'bug', if you're
trying to automate some sort of meta-analysis.
</p>
<p>Below is a list of all the publishers this supports, and examples
of journals from them.
</p>

<dl>
<dt>auto</dt>
<dd>
<p>Default. Use a cross-ref search
(<code>cr_works</code>) on the DOI to
determine the publisher.</p>
</dd>
<dt>plos</dt>
<dd>
<p>Public Library of Science journals (e.g., PLoS One;)</p>
</dd>
<dt>wiley</dt>
<dd>
<p>Wiley journals (e.g., Ecology Letters)</p>
</dd>
<dt>science</dt>
<dd>
<p>Science magazine (e.g., Science Advances)</p>
</dd>
<dt>proceedings</dt>
<dd>
<p>Royal Society of London journals (e.g.,
Proceedings of the Royal Society of London B). Requires
<code>vol</code> and <code>issue</code> of the article.</p>
</dd>
<dt>figshare</dt>
<dd>
<p>Figshare</p>
</dd>
<dt>biorxiv</dt>
<dd>
<p>Load from bioRxiv</p>
</dd> 
<dt>epmc</dt>
<dd>
<p>Look up an article on the Europe PubMed Central, and
then download the file using their supplementary materials API.
See comments above in 'notes' about EPMC.</p>
</dd>
<dt>peerj</dt>
<dd>
<p>PeerJ journals (e.g., PeerJ Preprints).</p>
</dd>
<dt>copernicus</dt>
<dd>
<p>Copernicus Publications journals (e.g., Biogeosciences).
Only one supplemental is supported, which can be a zip archive or a PDF file. 
A numeric <code>si</code> parameter must be <code>1</code> to download the 
whole archive, which is saved using Copernicus naming scheme
(&lt;journalname&gt;-&lt;volume&gt;-&lt;firstpage&gt;-&lt;year&gt;-supplement.zip)
and <code>save.name</code> is ignored, or to download the PDF.
If <code>si</code> matches the name of the supplemental archive (i.e. uses the
Copernicus naming scheme), then the suppdata archive is not unzipped.
<code>si</code> may be the name of a file in that 
archive, so only that file is extracted and saved to <code>save.name</code>.</p>
</dd>
</dl>
<h3>Note</h3>

<p>Make sure that the article from which you're attempting to
download supplementary materials *has* supplementary
materials. 404 errors and 'file not found' errors can result
from such cases.
</p>


<h3>Author(s)</h3>

<p>Will Pearse (<a href="mailto:will.pearse@usu.edu">will.pearse@usu.edu</a>) and Scott
Chamberlain (<a href="mailto:myrmecocystus@gmail.com">myrmecocystus@gmail.com</a>)
</p>


<h3>Examples</h3>

<pre><code class="language-R"># NOTE: The examples below are flagged as 'dontrun' to avoid
# running downloads repeatedly on CRAN servers
## Not run: 
#Put the function wherever you would put a file path
crabs &lt;- read.csv(suppdata("10.6084/m9.figshare.979288", 2))

epmc.fig &lt;- suppdata("10.1371/journal.pone.0126524",
                       "pone.0126524.s002.jpg", "epmc")
#...note this 'SI' is not actually an SI, but rather an image from the paper.

#View the suffix (file extension) of downloaded files
# - note that not all files are uploaded/stored with useful file extensions!
attr(epmc.fig, "suffix")

copernicus.csv &lt;- suppdata("10.5194/bg-14-1739-2017",
                           "Table S1 v2 UFK FOR_PUBLICATION.csv",
                           save.name = "data.csv")
#...note this 'SI' is not an SI but the name of a file in the supplementary information archive.

## End(Not run)
# (examples not run on CRAN to avoid downloading files repeatedly)
</code></pre>


</div>