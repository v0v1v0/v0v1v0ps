<div class="container">

<table style="width: 100%;"><tr>
<td>speech_build</td>
<td style="text-align: right;">R Documentation</td>
</tr></table>
<h2>Transform speeches in pdf to data.frame</h2>

<h3>Description</h3>

<p>It allows to extract the individual speeches of each legislator
in a document and obtain a data.frame.
</p>


<h3>Usage</h3>

<pre><code class="language-R">speech_build(
  file,
  add.error.sir = NULL,
  rm.error.leg = NULL,
  compiler = FALSE,
  quality = FALSE,
  param = list(char = 6500, drop.page = 2)
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr style="vertical-align: top;">
<td><code>file</code></td>
<td>
<p>list or character vector specifying the path or URL to a PDF file.
It can be one or more files.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>add.error.sir</code></td>
<td>
<p>character vector. It allows to specify different ways in which
the term that orders the speeches could be miswritten: sir. By default it is <code>NULL</code>.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>rm.error.leg</code></td>
<td>
<p>character vector. It allows to add legislator's names
to be eliminated. By default it is <code>NULL</code>.
By default, "PRESIDENTE", "SECRETARIO", "SUBSECRETARIO", and "MINISTRO" are eliminated.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>compiler</code></td>
<td>
<p>logical. When the checking of the process of conversion from pdf to data frame
is completed, it is necessary to compile the data frame. To compile implies to unite all the
speeches of each of the legislators for each document. As it is an operation
that must be carried out after making corrections, it is necessary to opt for it.
By default it is <code>FALSE</code>.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>quality</code></td>
<td>
<p>logical. If <code>TRUE</code>, two quality indicators are added about
the process, according to the quality of the document.
</p>

<ul>
<li>
<p>index_1: Proportion of the text recovered according to the original document
(<code>param = list(char = 6500, drop.page = 2)</code>) that must have the document.
</p>
</li>
<li>
<p>index_2: Proportion of the final text as a function of the
recovered text. It is the proportion of the document in which there are
only interventions by legislators.
</p>
</li>
</ul>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>param</code></td>
<td>
<p>list of length 2 with magnitudes for arguments "character for page" and "drop page
non evaluate" respectively. The default values are the median characters of
8500 documents that make up the speech datasets.</p>
</td>
</tr>
</table>
<h3>Details</h3>

<p>This function converts PDF documents to data.frame. The conversion is
made by seeking interventions of legislators from the word "SENOR". As the
quality of PDF files is not always the best it is recommended to verify that
no legislator is omitted in the data.frame construction process. To make
corrections of the word "SENOR" is that the argument <code>add.error.sir</code>
should be used. The function has a long list of different ways in which
the word "SENOR" may be written in a document, but not all possible future
problems are covered. When the PDF document is a scan that was treated with
an OCR, it should be checked with greater caution to ensure that the operation
was performed correctly.
</p>


<h3>Value</h3>

<p>data.frame class <code>puy</code> with the following variables:
</p>

<ul>
<li>
<p><code>legislator</code>: name of the legislators
</p>
</li>
<li>
<p><code>speech</code>: speeches by legislators
</p>
</li>
<li>
<p><code>date</code>: session date
</p>
</li>
<li>
<p><code>id</code>: name <code>file</code>
</p>
</li>
<li>
<p><code>legislature</code>: legislature id (period of government)
</p>
</li>
<li>
<p><code>sex</code>: sex
</p>
</li>
<li>
<p><code>chamber</code>: chamber to which the document belongs.
It can be: Chamber of Representatives, Senate, General Assembly or Permanent Commission.
</p>
</li>
</ul>
<p>If quality is TRUE, the following are added:
</p>

<ul>
<li>
<p><code>index_1</code>: index_1
</p>
</li>
<li>
<p><code>index_2</code>: index_2
</p>
</li>
</ul>
<h3>Examples</h3>

<pre><code class="language-R">
# url &lt;- speech::speech_url(chamber = "C", from = "17-09-2019", to = "17-09-2019")
# out &lt;- speech_build(file = url)

# out &lt;- speech_build(file = url, compiler = FALSE,
#                     quality = TRUE,
#                     add.error.sir = c("SEf'IOR"),
#                     rm.error.leg = c("PRtSIDENTE", "SUB", "PRfSlENTE"),
#                     param = list(char = 6000, drop.page = 3))

# out &lt;- list.files(pattern = "*.pdf") %&gt;% speech_build()

# out &lt;- list.files(pattern = "*.pdf") %&gt;%
#     speech_build(., compiler = TRUE, param = list(char = 4500, drop.page = 3))

</code></pre>


</div>