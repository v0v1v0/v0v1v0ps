<div class="container">

<table style="width: 100%;"><tr>
<td>crossValidation</td>
<td style="text-align: right;">R Documentation</td>
</tr></table>
<h2>Simulate variables of population data by cross validation</h2>

<h3>Description</h3>

<p>Simulate variables of population data. The household structure
of the population data needs to be simulated beforehand.
</p>


<h3>Usage</h3>

<pre><code class="language-R">crossValidation(
  simPopObj,
  additionals,
  hyper_param_grid,
  fold = 3,
  method = c("xgboost"),
  type = c("categorical"),
  by = "strata",
  regModel = "available",
  nr_cpus = 1,
  verbose = FALSE
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr style="vertical-align: top;">
<td><code>simPopObj</code></td>
<td>
<p>a <code>simPopObj</code> containing population and household
survey data as well as optionally margins in standardized format.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>additionals</code></td>
<td>
<p>a character vector specifying additional categorical
variables available in the sample object of <code>simPopObj</code> that should be
simulated for the population data.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>hyper_param_grid</code></td>
<td>
<p>a grid which can contain model specific parameters which will be passed onto the function call for the respective model.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>fold</code></td>
<td>
<p>the number of k in k-fold crossvalidation</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>method</code></td>
<td>
<p>a character string specifying the method to be used for
simulating the additional categorical variables. Accepted value at the moment
only 
<code>"xgboost"</code>  for using xgboost (implementation in package xgboost)</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>type</code></td>
<td>
<p>currently only "categorical" is implemented</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>by</code></td>
<td>
<p>defining which variable to use as split up variable of the estimation. Defaults to the strata variable.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>regModel</code></td>
<td>
<p>allows to specify the variables or model that is used when
simulating additional categorical variables. The following choices are
available if different from NULL.  </p>
 <ul>
<li>
<p>'basic'only the basic
household variables (generated with <code>simStructure</code>) are used.
</p>
</li>
<li>
<p>'available'all available variables (that are common in the sample and
the synthetic population such as previously generated varaibles) excluding
id-variables, strata variables and household sizes are used for the
modelling. This parameter should be used with care because all factors are
automatically used as factors internally.  </p>
</li>
<li>
<p> formula-objectUsers may also
specify a specifiy formula (class 'formula') that will be used. Checks are
performed that all required variables are available.  </p>
</li>
</ul>
<p> If method
'distribution' is used, it is only possible to specify a vector of length
one containing one of the choices described above.  If parameter 'regModel'
is NULL, only basic household variables are used in any case.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>nr_cpus</code></td>
<td>
<p>if specified, an integer number defining the number of cpus
that should be used for parallel processing.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>verbose</code></td>
<td>
<p>set to TRUE if additional print output should be shown.</p>
</td>
</tr>
</table>
<h3>Details</h3>

<p>The number of cpus are selected automatically in the following manner. The
number of cpus is equal the number of strata. However, if the number of cpus
is less than the number of strata, the number of cpus - 1 is used by
default. This should be the best strategy, but the user can also overwrite
this decision.
</p>


<h3>Value</h3>

<p>An object of class <code>simPopObj</code> containing survey
data as well as the simulated population data including the categorical
variables specified by argument <code>additional</code>.
</p>


<h3>Note</h3>

<p>The basic household structure needs to be simulated beforehand with
the function <code>simStructure</code>.
</p>


<h3>Author(s)</h3>

<p>Bernhard Meindl, Andreas Alfons, Stefan Kraft, Alexander Kowarik, Matthias Templ, Siro Fritzmann
</p>


<h3>See Also</h3>

<p><code>simStructure</code>, <code>simRelation</code>,
<code>simContinuous</code>, <code>simComponents</code>, <code>simCategorical</code>
</p>


<h3>Examples</h3>

<pre><code class="language-R">data(eusilcS) # load sample data
## Not run: 
## approx. 20 seconds computation time
inp &lt;- specifyInput(data=eusilcS, hhid="db030", hhsize="hsize", strata="db040", weight="db090")
## in the following, nr_cpus are selected automatically
simPop &lt;- simStructure(data=inp, method="direct", basicHHvars=c("age", "rb090"))
grid &lt;- expand.grid(nrounds = c(5, 10),
                    max_depth = 10,
                    eta = c(0.2, 0.3, 0.5),
                    eval_metric = "mlogloss",
                    stringsAsFactors = FALSE)

simPop &lt;- crossValidation(simPop, additionals=c("pl030", "pb220a"),
nr_cpus=1, hyper_param_grid = grid)
simPop

## End(Not run)
</code></pre>


</div>