<div class="container">

<table style="width: 100%;"><tr>
<td>sample_calcomp</td>
<td style="text-align: right;">R Documentation</td>
</tr></table>
<h2>Sample conditional age-at-length (CAL) data and write to file for use by
the EM.</h2>

<h3>Description</h3>

<p>Sample conditional age-at-length (CAL) data and write to file for use by
the EM.
</p>


<h3>Usage</h3>

<pre><code class="language-R">sample_calcomp(dat_list, outfile = NULL, fleets = c(1, 2), years,
  Nsamp)
</code></pre>


<h3>Arguments</h3>

<table>
<tr style="vertical-align: top;">
<td><code>dat_list</code></td>
<td>
<p>An SS data list object as read in from
<code>SS_readdat</code> in the <span class="pkg">r4ss</span> package. Make sure
you select option <code>section=2</code>.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>outfile</code></td>
<td>
<p>A character string specifying the file name to use
when writing the information to the disk. The string must include
the proper file extension. No file is written using the default value
of <code>NULL</code>, which leads to increased speed because writing the 
file takes time and computing resources.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>fleets</code></td>
<td>
<p>*A vector of integers specifying which fleets to include.
The order of the fleets pertains to the input order of other arguments.
An entry of <code>fleets=NULL</code> leads to zero samples for any fleet.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>years</code></td>
<td>
<p>*A list the same length as <code>fleets</code> giving the years as
numeric vectors. If no fleet collected samples, keep the value to
<code>years=NULL</code>.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>Nsamp</code></td>
<td>
<p>*A numeric list of the same length as <code>fleets</code>.
Either single values or vectors of the same length as the number of
years can be passed through. Single values are repeated for all
years. If no fleet collected samples, keep the value to
<code>Nsamp=NULL</code>.</p>
</td>
</tr>
</table>
<h3>Details</h3>

<p>Take a <code>data.SS_new</code> file containing expected values and
sample from true lengths, using length comp sample sizes, to get
realistic sample sizes for age bins given a length. Only the multinomial
distribution is currently implemented. xIf no fish are sampled then that
row is discarded. A value of NULL for fleets indicates to delete the
data so the EM If used with <code>run_ss3sim</code> the case file
should be named <code>calcomp</code>.
</p>


<h3>Value</h3>

<p>A modified <code>.dat</code> file if <code>!is.null(outfile)</code>. A list object
containing the modified <code>.dat</code> file is returned invisibly.
</p>


<h3>Which arguments to specifiy in case files</h3>

<p>All function argument descriptions that start with an asterisk (*) will be passed
through the case files to <code>run_ss3sim</code>. If one of these arguments
is not specified in a case file, then a value of <code>NULL</code> will be passed,
which may or may not be an appropriate value. Other arguments will be ignored
if specified.
</p>


<h3>Note</h3>

<p>This function is only reliable when using multinomial length
compositions for the matching fleet. The real-valued length compositions
resulting from the Dirichlet distribution cause difficulties in the
sampling code. See the vignette for more.
</p>


<h3>Author(s)</h3>

<p>Cole Monnahan, Kotaro Ono
</p>


<h3>See Also</h3>

<p>Other sampling functions: <code>clean_data</code>,
<code>sample_agecomp</code>, <code>sample_index</code>,
<code>sample_lcomp</code>, <code>sample_mlacomp</code>,
<code>sample_wtatage</code>
</p>


</div>