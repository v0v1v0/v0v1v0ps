<div class="container">

<table style="width: 100%;"><tr>
<td>jsCallOncePerFlush</td>
<td style="text-align: right;">R Documentation</td>
</tr></table>
<h2>Run JS when condition is met</h2>

<h3>Description</h3>

<p>'conditionalJS' is an extended version of conditionalPanel.
The function allows to run selected or custom JS action when the provided
condition is true or false.
</p>
<p>To see the possible JS actions check jsCalls.
</p>
<p>Optionally call 'jsCallOncePerFlush' in server to assure the call is run once
per application flush cycle (see. https://github.com/rstudio/shiny/issues/3668).
This prevents i.e. running animation multiple times when
'runAnimation(once = FALSE)' is used.
</p>


<h3>Usage</h3>

<pre><code class="language-R">jsCallOncePerFlush(session)

conditionalJS(ui, condition, jsCall, once = TRUE, ns = shiny::NS(NULL))
</code></pre>


<h3>Arguments</h3>

<table>
<tr style="vertical-align: top;">
<td><code>session</code></td>
<td>
<p>Shiny session object.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>ui</code></td>
<td>
<p>A 'shiny.tag' element to which the JS callback should be attached.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>condition</code></td>
<td>
<p>A JavaScript expression that will be evaluated repeatedly.
When the evaluated ‘condition' is true, 'jsCall'’s true ('jsCall$true') callback is run,
when false -  'jsCall$false' is executed in application browser.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>jsCall</code></td>
<td>
<p>A list of two ‘htmltools::JS' elements named ’true' and 'false'
storing JS expressions.
The 'true' object is evaluated when ‘condition' is true, ’false' otherwise.
In order to skip true/false callback assign it to NULL (or skip).
Use 'this' object in the expressions to refer to the 'ui' object.
See jsCalls for possible actions.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>once</code></td>
<td>
<p>Should the JS action be called only when condition state changes?</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>ns</code></td>
<td>
<p>The NS object of the current module, if any.</p>
</td>
</tr>
</table>
<h3>Examples</h3>

<pre><code class="language-R">if (interactive()) {
  library(shiny)

  ui &lt;- fluidPage(
    tags$style(".boldme {font-weight: bold;}"),
    sliderInput("value", "Value", min = 1, max = 10, value = 1),
    textOutput("slid_val"),
    conditionalJS(
      tags$button("Show me when slider value at least 3"),
      "input.value &gt;= 3",
      jsCalls$show()
    ),
    hr(),
    conditionalJS(
      tags$button("Show me when value less than 3"),
      "input.value &gt;= 3",
      jsCalls$show(when = FALSE)
    ),
    hr(),
    conditionalJS(
      tags$button("I'm disabled when value at least 4"),
      "input.value &gt;= 4",
      jsCalls$disable()
    ),
    hr(),
    conditionalJS(
      tags$button("I'm disabled when value less than 4"),
      "input.value &gt;= 4",
      jsCalls$disable(when = FALSE)
    ),
    hr(),
    conditionalJS(
      tags$button("I have class 'boldme' when value at least 5"),
      "input.value &gt;= 5",
      jsCalls$attachClass("boldme")
    ),
    hr(),
    conditionalJS(
      tags$button("I change color when value at least 6"),
      "input.value &gt;= 6",
      jsCalls$custom(
        true = "$(this).css('background-color', 'red');",
        false = "$(this).css('background-color', 'green');"
      )
    ),
    hr(),
    conditionalJS(
      tags$button("I change border when value at least 7"),
      "input.value &gt;= 7",
      jsCalls$css(
        border = "dashed"
      )
    ),
    hr(),
    conditionalJS(
      tags$button("I'm disabled permanently when value at least 8"),
      "input.value &gt;= 8",
      jsCalls$disable()["true"] # remove false condition
    ),
    hr(),
    conditionalJS(
      tags$button("I bounce when value at least 9"),
      "input.value &gt;= 9",
      jsCalls$custom(true = runAnimation()),
      once = FALSE
    )
  )

  server &lt;- function(input, output, session) {
    output$slid_val &lt;- renderText({
      input$value
    })
    jsCallOncePerFlush(session)
  }

  shinyApp(ui, server)
}

if (interactive()) {
  library(shiny)
  library(shinyGizmo)

  ui &lt;- fluidPage(
    textInput("name", "Name"),
    conditionalJS(
      actionButton("value", "Type name to enable the button"),
      "input.name != ''",
      jsCalls$disable(when = FALSE)
    )
  )

  server &lt;- function(input, output, session) {}

  shinyApp(ui, server)
}

</code></pre>


</div>