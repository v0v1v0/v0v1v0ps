<div class="container">

<table style="width: 100%;"><tr>
<td>summarize_ema_half_life</td>
<td style="text-align: right;">R Documentation</td>
</tr></table>
<h2>EMA half-life summarizer</h2>

<h3>Description</h3>

<p>Calculate the exponential moving average of a time series using the half-
life specified and store the result in a new column named '&lt;column&gt;_ema'
See https://github.com/twosigma/flint/blob/master/doc/ema.md for details on
different EMA implementations.
</p>


<h3>Usage</h3>

<pre><code class="language-R">summarize_ema_half_life(
  ts_rdd,
  column,
  half_life_duration,
  window = NULL,
  time_column = "time",
  interpolation = c("previous", "linear", "current"),
  convention = c("legacy", "convolution", "core"),
  key_columns = list()
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr style="vertical-align: top;">
<td><code>ts_rdd</code></td>
<td>
<p>Timeseries RDD being summarized</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>column</code></td>
<td>
<p>Column to be summarized</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>half_life_duration</code></td>
<td>
<p>A time duration specified in string form (e.g.,
"1d", "1h", "15m", etc) representing the half-life duration</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>window</code></td>
<td>
<p>Either an R expression specifying time windows to be summarized
(e.g., 'in_past("1h")' to summarize the EMA of 'column' within the time
interval of [t - 1h, t] for each timestamp 't', 'in_future("5s")' to
summarize EMA of 'column' within the time interval of [t, t + 5s] for each
timestamp 't'), or 'NULL' to summarize EMA of 'column' within the time
interval of (-inf, t] for each timestamp 't'</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>time_column</code></td>
<td>
<p>Name of the column containing timestamps (default: "time")</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>interpolation</code></td>
<td>
<p>Method used for interpolating values between two
consecutive data points, must be one of "previous", "linear", and
"current" (default: "previous"). See
https://github.com/twosigma/flint/blob/master/doc/ema.md for details on
different interpolation methods.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>convention</code></td>
<td>
<p>Convolution convention, must be one of "convolution",
"core", and "legacy" (default: "legacy"). See
https://github.com/twosigma/flint/blob/master/doc/ema.md for details.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>key_columns</code></td>
<td>
<p>Optional list of columns that will form an equivalence
relation associating each record with the time series it belongs to (i.e.,
any 2 records having equal values in those columns will be associated with
the same time series, and any 2 records having differing values in those
columns are considered to be from 2 separate time series and will therefore
be summarized separately)
By default, 'key_colums' is empty and all records are considered to be part
of a single time series.</p>
</td>
</tr>
</table>
<h3>See Also</h3>

<p>Other summarizers: 
<code>ols_regression()</code>,
<code>summarize_avg()</code>,
<code>summarize_corr2()</code>,
<code>summarize_corr()</code>,
<code>summarize_count()</code>,
<code>summarize_covar()</code>,
<code>summarize_dot_product()</code>,
<code>summarize_ewma()</code>,
<code>summarize_geometric_mean()</code>,
<code>summarize_kurtosis()</code>,
<code>summarize_max()</code>,
<code>summarize_min()</code>,
<code>summarize_nth_central_moment()</code>,
<code>summarize_nth_moment()</code>,
<code>summarize_product()</code>,
<code>summarize_quantile()</code>,
<code>summarize_skewness()</code>,
<code>summarize_stddev()</code>,
<code>summarize_sum()</code>,
<code>summarize_var()</code>,
<code>summarize_weighted_avg()</code>,
<code>summarize_weighted_corr()</code>,
<code>summarize_weighted_covar()</code>,
<code>summarize_z_score()</code>
</p>


<h3>Examples</h3>

<pre><code class="language-R">
library(sparklyr)
library(sparklyr.flint)

sc &lt;- try_spark_connect(master = "local")

if (!is.null(sc)) {
  price_sdf &lt;- copy_to(
    sc,
    data.frame(time = seq(1000), price = rnorm(1000))
  )
  ts &lt;- fromSDF(price_sdf, is_sorted = TRUE, time_unit = "SECONDS")
  ts_ema &lt;- summarize_ema_half_life(
    ts,
    column = "price",
    half_life_duration = "100s"
  )
} else {
  message("Unable to establish a Spark connection!")
}

</code></pre>


</div>