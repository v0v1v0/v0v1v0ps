<div class="container">

<table style="width: 100%;"><tr>
<td>sv_dependence2D</td>
<td style="text-align: right;">R Documentation</td>
</tr></table>
<h2>2D SHAP Dependence Plot</h2>

<h3>Description</h3>

<p>Scatterplot of two features, showing the sum of their SHAP values on the color scale.
This allows to visualize the combined effect of two features, including interactions.
A typical application are models with latitude and longitude as features (plus
maybe other regional features that can be passed via <code>add_vars</code>).
</p>
<p>If SHAP interaction values are available, setting <code>interactions = TRUE</code> allows
to focus on pure interaction effects (multiplied by two). In this case, <code>add_vars</code>
has no effect.
</p>


<h3>Usage</h3>

<pre><code class="language-R">sv_dependence2D(object, ...)

## Default S3 method:
sv_dependence2D(object, ...)

## S3 method for class 'shapviz'
sv_dependence2D(
  object,
  x,
  y,
  viridis_args = getOption("shapviz.viridis_args"),
  jitter_width = NULL,
  jitter_height = NULL,
  interactions = FALSE,
  add_vars = NULL,
  ...
)

## S3 method for class 'mshapviz'
sv_dependence2D(
  object,
  x,
  y,
  viridis_args = getOption("shapviz.viridis_args"),
  jitter_width = NULL,
  jitter_height = NULL,
  interactions = FALSE,
  add_vars = NULL,
  ...
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr style="vertical-align: top;">
<td><code>object</code></td>
<td>
<p>An object of class "(m)shapviz".</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>...</code></td>
<td>
<p>Arguments passed to <code>ggplot2::geom_jitter()</code>.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>x</code></td>
<td>
<p>Feature name for x axis. Can be a vector/list if <code>object</code> is
of class "shapviz".</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>y</code></td>
<td>
<p>Feature name for y axis. Can be a vector/list if <code>object</code> is
of class "shapviz".</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>viridis_args</code></td>
<td>
<p>List of viridis color scale arguments, see
<code>?ggplot2::scale_color_viridis_c</code>. The default points to the global option
<code>shapviz.viridis_args</code>, which corresponds to
<code>list(begin = 0.25, end = 0.85, option = "inferno")</code>.
These values are passed to <code style="white-space: pre;">⁠ggplot2::scale_color_viridis_*()⁠</code>.
For example, to switch to a standard viridis scale, you can either change the
default via <code>options(shapviz.viridis_args = list())</code>, or set
<code>viridis_args = list()</code>. Only relevant if <code>color_var</code> is not <code>NULL</code>.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>jitter_width</code></td>
<td>
<p>The amount of horizontal jitter. The default (<code>NULL</code>) will
use a value of 0.2 in case <code>v</code> is discrete, and no jitter otherwise.
(Numeric variables are considered discrete if they have at most 7 unique values.)
Can be a vector/list if <code>v</code> is a vector.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>jitter_height</code></td>
<td>
<p>Similar to <code>jitter_width</code> for vertical scatter.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>interactions</code></td>
<td>
<p>Should SHAP interaction values be plotted? The default (<code>FALSE</code>)
will show the rowwise sum of the SHAP values of <code>x</code> and <code>y</code>. If <code>TRUE</code>, will
use twice the SHAP interaction value (requires SHAP interactions).</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>add_vars</code></td>
<td>
<p>Optional vector of feature names, whose SHAP values should be added
to the sum of the SHAP values of <code>x</code> and <code>y</code> (only if <code>interactions = FALSE</code>).
A use case would be a model with geographic x and y coordinates, along with some
additional locational features like distance to the next train station.</p>
</td>
</tr>
</table>
<h3>Value</h3>

<p>An object of class "ggplot" (or "patchwork") representing a dependence plot.
</p>


<h3>Methods (by class)</h3>


<ul>
<li> <p><code>sv_dependence2D(default)</code>: Default method.
</p>
</li>
<li> <p><code>sv_dependence2D(shapviz)</code>: 2D SHAP dependence plot for "shapviz" object.
</p>
</li>
<li> <p><code>sv_dependence2D(mshapviz)</code>: 2D SHAP dependence plot for "mshapviz" object.
</p>
</li>
</ul>
<h3>See Also</h3>

<p><code>sv_dependence()</code>
</p>


<h3>Examples</h3>

<pre><code class="language-R">dtrain &lt;- xgboost::xgb.DMatrix(
  data.matrix(iris[, -1]), label = iris[, 1], nthread = 1
)
fit &lt;- xgboost::xgb.train(data = dtrain, nrounds = 10, nthread = 1)
sv &lt;- shapviz(fit, X_pred = dtrain, X = iris)
sv_dependence2D(sv, x = "Petal.Length", y = "Species")
sv_dependence2D(sv, x = c("Petal.Length", "Species"), y = "Sepal.Width")

# SHAP interaction values
sv2 &lt;- shapviz(fit, X_pred = dtrain, X = iris, interactions = TRUE)
sv_dependence2D(sv2, x = "Petal.Length", y = "Species", interactions = TRUE)
sv_dependence2D(
  sv2, x = "Petal.Length", y = c("Species", "Petal.Width"), interactions = TRUE
)

# mshapviz object
mx &lt;- split(sv, f = iris$Species)
sv_dependence2D(mx, x = "Petal.Length", y = "Sepal.Width")
</code></pre>


</div>