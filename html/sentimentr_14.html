<div class="container">

<table style="width: 100%;"><tr>
<td>extract_emotion_terms</td>
<td style="text-align: right;">R Documentation</td>
</tr></table>
<h2>Extract Emotion Words</h2>

<h3>Description</h3>

<p>Extract the emotion words from a text.
</p>


<h3>Usage</h3>

<pre><code class="language-R">extract_emotion_terms(
  text.var,
  emotion_dt = lexicon::hash_nrc_emotions,
  un.as.negation = TRUE,
  retention_regex = "[^[:alpha:];:,']",
  ...
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr style="vertical-align: top;">
<td><code>text.var</code></td>
<td>
<p>The text variable.  Can be a <code>get_sentences</code> object or
a raw character vector though <code>get_sentences</code> is preferred as it avoids
the repeated cost of doing sentence boundary disambiguation every time
<code>emotion</code> is run.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>emotion_dt</code></td>
<td>
<p>A <span class="pkg">data.table</span> with a <code>token</code> and <code>emotion</code>
column (<code>tokens</code> are nested within the <code>emotion</code>s.  The table
cannot contain any duplicate rows and must have the <code>token</code> column set
as the key column (see <code>?data.table::setkey</code>).  The default emotion
table is <code>lexicon::hash_nrc_emotions</code>.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>un.as.negation</code></td>
<td>
<p>logical.  If <code>TRUE</code> then emotion words prefixed
with an 'un-' are treated as a negation.  For example,<code>"unhappy"</code> would 
be treated as <code>"not happy"</code>.  If an emotion word has an un- version in the
<code>emotion_dt</code> then no substitution is performed and an optional warning
will be given.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>retention_regex</code></td>
<td>
<p>A regex of what characters to keep.  All other 
characters will be removed.  Note that when this is used all text is lower 
case format.  Only adjust this parameter if you really understand how it is 
used.  Note that swapping the <code>\\{p}</code> for <code>[^[:alpha:];:,\']</code> may 
retain more alpha letters but will likely decrease speed.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>...</code></td>
<td>
<p>Ignored.</p>
</td>
</tr>
</table>
<h3>Value</h3>

<p>Returns a <span class="pkg">data.table</span> with a columns of emotion terms.
</p>


<h3>Examples</h3>

<pre><code class="language-R">## Not run: 
mytext &lt;- c(
    "I am not afraid of you",
    NA,
    "",
    "I love it [not really]", 
    "I'm not angry with you", 
    "I hate it when you lie to me.  It's so humiliating",
    "I'm not happpy anymore.  It's time to end it",
    "She's a darn good friend to me",
    "I went to the terrible store",
    "There is hate and love in each of us",
    "I'm no longer angry!  I'm really experiencing peace but not true joy.",
    
    paste("Out of the night that covers me, Black as the Pit from pole to", 
      "pole, I thank whatever gods may be For my unconquerable soul.",
      "In the fell clutch of circumstance I have not winced nor cried",
      "aloud. Under the bludgeonings of chance My head is bloody, but unbowed.",
      "Beyond this place of wrath and tears Looms but the Horror of the", 
      "shade, And yet the menace of the years Finds, and shall find, me unafraid.",
      "It matters not how strait the gate, How charged with punishments", 
      "the scroll, I am the master of my fate: I am the captain of my soul."
    )    
    
)

mytext2 &lt;- get_sentences(mytext)
emotion(mytext2)

emo_words &lt;- extract_emotion_terms(mytext2)
emo_words
emo_words$sentence
emo_words[, c('anger', 'anticipation', 'disgust', 'fear', 'joy', 'sadness', 'surprise', 'trust')]

attributes(emo_words)$counts
attributes(emo_words)$elements

## directly ona  character string (not recommended: use `get_sentences` first)
extract_emotion_terms(mytext)

brady &lt;- get_sentences(crowdflower_deflategate)
brady_emo &lt;- extract_emotion_terms(brady)

brady_emo
attributes(brady_emo)$counts
attributes(brady_emo)$elements

## End(Not run)
</code></pre>


</div>