<div class="container">

<table style="width: 100%;"><tr>
<td>ssm</td>
<td style="text-align: right;">R Documentation</td>
</tr></table>
<h2>Self-similarity matrix</h2>

<h3>Description</h3>

<p>Calculates the self-similarity matrix and novelty vector of a sound.
</p>


<h3>Usage</h3>

<pre><code class="language-R">ssm(
  x,
  samplingRate = NULL,
  from = NULL,
  to = NULL,
  windowLength = 25,
  step = 5,
  overlap = NULL,
  ssmWin = NULL,
  sparse = FALSE,
  maxFreq = NULL,
  nBands = NULL,
  MFCC = 2:13,
  input = c("mfcc", "melspec", "spectrum")[2],
  norm = FALSE,
  simil = c("cosine", "cor")[1],
  kernelLen = 100,
  kernelSD = 0.5,
  padWith = 0,
  summaryFun = c("mean", "sd"),
  reportEvery = NULL,
  cores = 1,
  plot = TRUE,
  savePlots = NULL,
  main = NULL,
  heights = c(2, 1),
  width = 900,
  height = 500,
  units = "px",
  res = NA,
  specPars = list(levels = seq(0, 1, length = 30), colorTheme = c("bw", "seewave",
    "heat.colors", "...")[2], xlab = "Time, s", ylab = "kHz"),
  ssmPars = list(levels = seq(0, 1, length = 30), colorTheme = c("bw", "seewave",
    "heat.colors", "...")[2], xlab = "Time, s", ylab = "Time, s"),
  noveltyPars = list(type = "b", pch = 16, col = "black", lwd = 3)
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr style="vertical-align: top;">
<td><code>x</code></td>
<td>
<p>path to a folder, one or more wav or mp3 files c('file1.wav',
'file2.mp3'), Wave object, numeric vector, or a list of Wave objects or
numeric vectors</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>samplingRate</code></td>
<td>
<p>sampling rate of <code>x</code> (only needed if <code>x</code> is a
numeric vector)</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>from, to</code></td>
<td>
<p>if NULL (default), analyzes the whole sound, otherwise
from...to (s)</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>windowLength</code></td>
<td>
<p>length of FFT window, ms</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>step</code></td>
<td>
<p>you can override <code>overlap</code> by specifying FFT step, ms (NB:
because digital audio is sampled at discrete time intervals of
1/samplingRate, the actual step and thus the time stamps of STFT frames
may be slightly different, eg 24.98866 instead of 25.0 ms)</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>overlap</code></td>
<td>
<p>overlap between successive FFT frames, %</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>ssmWin</code></td>
<td>
<p>window for averaging SSM, ms (has a smoothing effect and speeds
up the processing)</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>sparse</code></td>
<td>
<p>if TRUE, the entire SSM is not calculated, but only the central
region needed to extract the novelty contour (speeds up the processing)</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>maxFreq</code></td>
<td>
<p>highest band edge of mel filters, Hz. Defaults to
<code>samplingRate / 2</code>. See <code>melfcc</code></p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>nBands</code></td>
<td>
<p>number of warped spectral bands to use. Defaults to <code>100 *
windowLength / 20</code>. See <code>melfcc</code></p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>MFCC</code></td>
<td>
<p>which mel-frequency cepstral coefficients to use; defaults to
<code>2:13</code></p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>input</code></td>
<td>
<p>the spectral representation used to calculate the SSM</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>norm</code></td>
<td>
<p>if TRUE, the spectrum of each STFT frame is normalized</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>simil</code></td>
<td>
<p>method for comparing frames: "cosine" = cosine similarity, "cor"
= Pearson's correlation</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>kernelLen</code></td>
<td>
<p>length of checkerboard kernel for calculating novelty, ms
(larger values favor global, slow vs. local, fast novelty)</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>kernelSD</code></td>
<td>
<p>SD of checkerboard kernel for calculating novelty</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>padWith</code></td>
<td>
<p>how to treat edges when calculating novelty: NA = treat sound
before and after the recording as unknown, 0 = treat it as silence</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>summaryFun</code></td>
<td>
<p>functions used to summarize each acoustic characteristic,
eg "c('mean', 'sd')"; user-defined functions are fine (see examples); NAs
are omitted automatically for mean/median/sd/min/max/range/sum, otherwise
take care of NAs yourself</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>reportEvery</code></td>
<td>
<p>when processing multiple inputs, report estimated time
left every ... iterations (NULL = default, NA = don't report)</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>cores</code></td>
<td>
<p>number of cores for parallel processing</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>plot</code></td>
<td>
<p>if TRUE, plots the SSM</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>savePlots</code></td>
<td>
<p>full path to the folder in which to save the plots (NULL =
don't save, ‚Äù = same folder as audio)</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>main</code></td>
<td>
<p>plot title</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>heights</code></td>
<td>
<p>relative sizes of the SSM and spectrogram/novelty plot</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>width, height, units, res</code></td>
<td>
<p>graphical parameters for saving plots passed to
<code>png</code></p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>specPars</code></td>
<td>
<p>graphical parameters passed to <code>filled.contour.mod</code> and
affecting the <code>spectrogram</code></p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>ssmPars</code></td>
<td>
<p>graphical parameters passed to <code>filled.contour.mod</code> and
affecting the plot of SSM</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>noveltyPars</code></td>
<td>
<p>graphical parameters passed to
<code>lines</code> and affecting the novelty contour</p>
</td>
</tr>
</table>
<h3>Value</h3>

<p>Returns a list of two components: $ssm contains the self-similarity
matrix, and $novelty contains the novelty vector.
</p>


<h3>References</h3>


<ul>
<li>
<p> El Badawy, D., Marmaroli, P., &amp; Lissek, H. (2013). Audio
Novelty-Based Segmentation of Music Concerts. In Acoustics 2013 (No.
EPFL-CONF-190844)
</p>
</li>
<li>
<p> Foote, J. (1999, October). Visualizing music and
audio using self-similarity. In Proceedings of the seventh ACM
international conference on Multimedia (Part 1) (pp. 77-80). ACM.
</p>
</li>
<li>
<p>Foote, J. (2000). Automatic audio segmentation using a measure of audio
novelty. In Multimedia and Expo, 2000. ICME 2000. 2000 IEEE International
Conference on (Vol. 1, pp. 452-455). IEEE.
</p>
</li>
</ul>
<h3>See Also</h3>

<p><code>spectrogram</code> <code>modulationSpectrum</code>
<code>segment</code>
</p>


<h3>Examples</h3>

<pre><code class="language-R">sound = c(soundgen(),
          soundgen(nSyl = 4, sylLen = 50, pauseLen = 70,
          formants = NA, pitch = c(500, 330)))
# playme(sound)
# detailed, local features (captures each syllable)
s1 = ssm(sound, samplingRate = 16000, kernelLen = 100,
         sparse = TRUE)  # much faster with 'sparse'
# more global features (captures the transition b/w the two sounds)
s2 = ssm(sound, samplingRate = 16000, kernelLen = 400, sparse = TRUE)

s2$summary
s2$novelty  # novelty contour
## Not run: 
ssm(sound, samplingRate = 16000,
    input = 'mfcc', simil = 'cor', norm = TRUE,
    ssmWin = 25,  # speed up the processing
    kernelLen = 300,  # global features
    specPars = list(colorTheme = 'seewave'),
    ssmPars = list(col = rainbow(100)),
    noveltyPars = list(type = 'l', lty = 3, lwd = 2))

## End(Not run)
</code></pre>


</div>