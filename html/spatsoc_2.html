<div class="container">

<table style="width: 100%;"><tr>
<td>build_lines</td>
<td style="text-align: right;">R Documentation</td>
</tr></table>
<h2>Build Lines</h2>

<h3>Description</h3>

<p><code>build_lines</code> generates a simple feature collection with LINESTRINGs from a
<code>data.table</code>. The function accepts a <code>data.table</code> with relocation data,
individual identifiers, a sorting column and a <code>projection</code>. The relocation
data is transformed into LINESTRINGs for each individual and, optionally,
combination of columns listed in <code>splitBy</code>. Relocation data should be in two
columns representing the X and Y coordinates.
</p>


<h3>Usage</h3>

<pre><code class="language-R">build_lines(
  DT = NULL,
  projection = NULL,
  id = NULL,
  coords = NULL,
  sortBy = NULL,
  splitBy = NULL
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr style="vertical-align: top;">
<td><code>DT</code></td>
<td>
<p>input data.table</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>projection</code></td>
<td>
<p>numeric or character defining the coordinate reference
system to be passed to sf::st_crs. For example, either
<code>projection = "EPSG:32736"</code> or <code>projection = 32736</code>.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>id</code></td>
<td>
<p>Character string of ID column name</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>coords</code></td>
<td>
<p>Character vector of X coordinate and Y coordinate column names</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>sortBy</code></td>
<td>
<p>Character string of date time column(s) to sort rows by. Must
be a POSIXct.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>splitBy</code></td>
<td>
<p>(optional) character string or vector of grouping column
name(s) upon which the grouping will be calculated</p>
</td>
</tr>
</table>
<h3>Details</h3>



<h4>R-spatial evolution</h4>

<p>Please note, spatsoc has followed updates from R spatial, GDAL and PROJ
for handling projections, see more at
<a href="https://r-spatial.org/r/2020/03/17/wkt.html">https://r-spatial.org/r/2020/03/17/wkt.html</a>.
</p>
<p>In addition, <code>build_lines</code> previously used sp::SpatialLines but has been
updated to use sf::st_as_sf and sf::st_linestring according to the
R-spatial evolution, see more at
<a href="https://r-spatial.org/r/2022/04/12/evolution.html">https://r-spatial.org/r/2022/04/12/evolution.html</a>.
</p>



<h4>Notes on arguments</h4>

<p>The <code>projection</code> argument expects a numeric or character defining the
coordinate reference system.
For example, for UTM zone 36N (EPSG 32736), the projection argument is either
<code>projection = 'EPSG:32736'</code> or <code>projection = 32736</code>.
See details in <code>sf::st_crs()</code> and <a href="https://spatialreference.org">https://spatialreference.org</a>
for a list of EPSG codes.
</p>
<p>The <code>sortBy</code> argument is used to order the input <code>DT</code> when creating
sf LINESTRINGs. It must a column in the input <code>DT</code> of type
POSIXct to ensure the rows are sorted by date time.
</p>
<p>The <code>splitBy</code> argument offers further control building LINESTRINGs.
If in your input <code>DT</code>, you have multiple temporal groups (e.g.: years) for
example, you can provide the name of the column which identifies them and
build LINESTRINGs for each individual in each year.
</p>
<p><code>build_lines</code> is used by <code>group_lines</code> for grouping overlapping
lines generated from relocations.
</p>



<h3>Value</h3>

<p><code>build_lines</code> returns an sf LINESTRING object with a line
for each individual (and optionally <code>splitBy</code> combination).
</p>
<p>Individuals (or combinations of individuals and <code>splitBy</code>) with less than two
relocations are dropped since it requires at least two relocations to
build a line.
</p>


<h3>See Also</h3>

<p><code>group_lines</code>
</p>
<p>Other Build functions: 
<code>build_polys()</code>
</p>


<h3>Examples</h3>

<pre><code class="language-R"># Load data.table
library(data.table)


# Read example data
DT &lt;- fread(system.file("extdata", "DT.csv", package = "spatsoc"))

# Cast the character column to POSIXct
DT[, datetime := as.POSIXct(datetime, tz = 'UTC')]

# EPSG code for example data
utm &lt;- 32736

# Build lines for each individual
lines &lt;- build_lines(DT, projection = utm, id = 'ID', coords = c('X', 'Y'),
            sortBy = 'datetime')

# Build lines for each individual by year
DT[, yr := year(datetime)]
lines &lt;- build_lines(DT, projection = utm, id = 'ID', coords = c('X', 'Y'),
            sortBy = 'datetime', splitBy = 'yr')
</code></pre>


</div>