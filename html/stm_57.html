<div class="container">

<table style="width: 100%;"><tr>
<td>searchK</td>
<td style="text-align: right;">R Documentation</td>
</tr></table>
<h2>Computes diagnostic values for models with different values of K (number of
topics).</h2>

<h3>Description</h3>

<p>With user-specified initialization, this function runs selectModel for
different user-specified topic numbers and computes diagnostic properties
for the returned model. These include exclusivity, semantic coherence,
heldout likelihood, bound, lbound, and residual dispersion.
</p>


<h3>Usage</h3>

<pre><code class="language-R">searchK(
  documents,
  vocab,
  K,
  init.type = "Spectral",
  N = floor(0.1 * length(documents)),
  proportion = 0.5,
  heldout.seed = NULL,
  M = 10,
  cores = 1,
  ...
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr style="vertical-align: top;">
<td><code>documents</code></td>
<td>
<p>The documents to be used for the stm model</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>vocab</code></td>
<td>
<p>The vocabulary to be used for the stmmodel</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>K</code></td>
<td>
<p>A vector of different topic numbers</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>init.type</code></td>
<td>
<p>The method of initialization. See <code>stm</code> for
options.  Note that the default option here is different from the main
function.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>N</code></td>
<td>
<p>Number of docs to be partially held out</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>proportion</code></td>
<td>
<p>Proportion of docs to be held out.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>heldout.seed</code></td>
<td>
<p>If desired, a seed to use when holding out documents for
later heldout likelihood computation</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>M</code></td>
<td>
<p>M value for exclusivity computation</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>cores</code></td>
<td>
<p>Number of CPUs to use for parallel computation</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>...</code></td>
<td>
<p>Other diagnostics parameters.</p>
</td>
</tr>
</table>
<h3>Details</h3>

<p>See the vignette for interpretation of each of these measures.  Each of
these measures is also available in exported functions:
</p>

<dl>
<dt>exclusivity</dt>
<dd>
<p><code>exclusivity</code></p>
</dd>
<dt>semantic coherence</dt>
<dd>
<p><code>semanticCoherence</code></p>
</dd>
<dt>heldout likelihood</dt>
<dd>
<p><code>make.heldout</code> and <code>eval.heldout</code></p>
</dd>
<dt>bound</dt>
<dd>
<p>calculated by <code>stm</code> accessible by <code>max(model$convergence$bound)</code></p>
</dd>
<dt>lbound</dt>
<dd>
<p>a correction to the bound that makes the bounds directly comparable <code>max(model$convergence$bound) + lfactorial(model$settings$dim$K)</code></p>
</dd>
<dt>residual dispersion</dt>
<dd>
<p><code>checkResiduals</code></p>
</dd>
</dl>
<p>Due to the need to calculate the heldout-likelihood <code>N</code> documents have
<code>proportion</code> of the documents heldout at random.  This means that even
with the default spectral initialization the results can change from run to run.
When the number of heldout documents is low or documents are very short, this also
means that the results can be quite unstable.  For example: the <code>gadarian</code> code
demonstration below has heldout results based on only 34 documents and approximately
150 tokens total.  Clearly this can lead to quite disparate results across runs.  By 
contrast default settings for the <code>poliblog5k</code> dataset would yield a heldout sample
of 500 documents with approximately 50000 tokens for the heldout sample.  We should expect
this to be substantially more stable.
</p>


<h3>Value</h3>

<table>
<tr style="vertical-align: top;">
<td><code>exclus</code></td>
<td>
<p>Exclusivity of each model.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>semcoh</code></td>
<td>
<p>Semantic
coherence of each model.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>heldout</code></td>
<td>
<p>Heldout likelihood for each model.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>residual</code></td>
<td>
<p>Residual for each model.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>bound</code></td>
<td>
<p>Bound for each
model.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>lbound</code></td>
<td>
<p>lbound for each model.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>em.its</code></td>
<td>
<p>Total number of
EM iterations used in fiting the model.</p>
</td>
</tr>
</table>
<h3>See Also</h3>

<p><code>plot.searchK</code> <code>make.heldout</code>
</p>


<h3>Examples</h3>

<pre><code class="language-R">


K&lt;-c(5,10,15) 
temp&lt;-textProcessor(documents=gadarian$open.ended.response,metadata=gadarian)
out &lt;- prepDocuments(temp$documents, temp$vocab, temp$meta)
documents &lt;- out$documents
vocab &lt;- out$vocab
meta &lt;- out$meta
set.seed(02138)
K&lt;-c(5,10,15) 
kresult &lt;- searchK(documents, vocab, K, prevalence=~treatment + s(pid_rep), data=meta)
plot(kresult)


 
</code></pre>


</div>