<div class="container">

<table style="width: 100%;"><tr>
<td>weighted_estimators</td>
<td style="text-align: right;">R Documentation</td>
</tr></table>
<h2>Weighted mean, variance, covariance matrix and correlation matrix</h2>

<h3>Description</h3>

<p>Compute mean, variance, covariance matrix and correlation matrix, taking
into account sample weights.
</p>

<ul>
<li> <p><code>meanWt</code>: a simple wrapper that calls <code>mean(x, na.rm=na.rm)</code> if
<code>weights</code> is missing and <code>weighted.mean(x, w=weights,
na.rm=na.rm)</code> otherwise. Implemented methods for this generic are:
</p>

<ul>
<li> <p><code>meanWt.default(x, weights, na.rm=TRUE, ...)</code>
</p>
</li>
<li> <p><code>meanWt.dataObj(x, vars, na.rm=TRUE, ...)</code>
</p>
</li>
</ul>
</li>
<li> <p><code>varWt</code>: calls <code>var(x, na.rm=na.rm)</code> if <code>weights</code> is missing.
Implemented methods for this generic are:
</p>

<ul>
<li> <p><code>varWt.default(x, weights, na.rm=TRUE, ...)</code>
</p>
</li>
<li> <p><code>varWt.dataObj(x, vars, na.rm=TRUE, ...)</code>
</p>
</li>
</ul>
</li>
<li> <p><code>covWt</code> and <code>covWt</code>: always remove missing values pairwise and call
<code>cov</code> and <code>cor</code>, respectively, if <code>weights</code> is missing.
Implemented methods for these generics are:
</p>

<ul>
<li> <p><code>covWt.default(x, y, weights, ...)</code>
</p>
</li>
<li> <p><code>covWt.matrix(x, weights, ...)</code>
</p>
</li>
<li> <p><code>covWt.data.frame(x, weights, ...) </code>
</p>
</li>
<li> <p><code>covWt.dataObj(x, vars, ...)</code>
</p>
</li>
<li> <p><code>corWt.default(x, y, weights, ...)</code>
</p>
</li>
<li> <p><code>corWt.matrix(x, weights, ...)</code>
</p>
</li>
<li> <p><code>corWt.data.frame(x, weights, ...)</code>
</p>
</li>
<li> <p><code>corWt.dataObj(x, vars, ...)</code>
</p>
</li>
</ul>
</li>
</ul>
<p>The additional parameters are now described:
</p>

<ul>
<li>
<p> y: a numeric vector.  If missing, this defaults to <code>x</code>.
</p>
</li>
<li>
<p> vars: a character vector of variable names that should be used for the
calculation.
</p>
</li>
<li>
<p> na.rm: a logical indicating whether any <code>NA</code> or <code>NaN</code> values
should be removed from <code>x</code> before computation.  Note that the default
is <code>TRUE</code>.
</p>
</li>
<li>
<p> weights: an optional numeric vector containing sample weights.
</p>
</li>
</ul>
<h3>Usage</h3>

<pre><code class="language-R">meanWt(x, ...)

varWt(x, ...)

covWt(x, ...)

corWt(x, ...)
</code></pre>


<h3>Arguments</h3>

<table>
<tr style="vertical-align: top;">
<td><code>x</code></td>
<td>
<p>for <code>meanWt</code> and <code>varWt</code>, a numeric vector or an object
of class <code>dataObj</code>. For <code>covWt</code> and <code>corWt</code>, a
numeric vector, matrix, <code>data.frame</code> or <code>dataObj</code>.
In case of a <code>dataObj</code>, weights are automatically used
from the S4-object itself.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>...</code></td>
<td>
<p>for the generic functions <code>covWt</code> and <code>corWt</code>,
additional arguments to be passed to methods.  Additional arguments not
included in the definition of the methods are ignored.</p>
</td>
</tr>
</table>
<h3>Value</h3>

<p>For <code>meanWt</code>, the (weighted) mean.
</p>
<p>For <code>varWt</code>, the (weighted) variance.
</p>
<p>For <code>covWt</code>, the (weighted) covariance matrix or, for the default
method, the (weighted) covariance.
</p>
<p>For <code>corWt</code>, the (weighted) correlation matrix or, for the default
method, the (weighted) correlation coefficient.
</p>


<h3>Note</h3>

<p><code>meanWt</code>, <code>varWt</code>, <code>covWt</code> and <code>corWt</code> all make use of
slot <code>weights</code> of the input object if the <code>dataObj</code>-method is
used.
</p>


<h3>Author(s)</h3>

<p>Stefan Kraft and Andreas Alfons
</p>


<h3>See Also</h3>

<p><code>mean</code>, <code>weighted.mean</code>,
<code>var</code>, <code>cov</code>,
<code>cor</code>
</p>


<h3>Examples</h3>

<pre><code class="language-R">data(eusilcS)
meanWt(eusilcS$netIncome, weights=eusilcS$rb050)
sqrt(varWt(eusilcS$netIncome, weights=eusilcS$rb050))

# dataObj-methods
inp &lt;- specifyInput(data=eusilcS, hhid="db030", hhsize="hsize", strata="db040", weight="db090")
meanWt(inp, vars="netIncome")
sqrt(varWt(inp, vars="netIncome"))
corWt(inp, vars=c("age", "netIncome"))
covWt(inp, vars=c("age", "netIncome"))
</code></pre>


</div>