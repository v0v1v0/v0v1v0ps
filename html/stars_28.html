<div class="container">

<table style="width: 100%;"><tr>
<td>plot</td>
<td style="text-align: right;">R Documentation</td>
</tr></table>
<h2>plot stars object, with subplots for each level of first non-spatial dimension</h2>

<h3>Description</h3>

<p>plot stars object, with subplots for each level of first non-spatial dimension, and customization of legend key
</p>


<h3>Usage</h3>

<pre><code class="language-R">## S3 method for class 'nc_proxy'
plot(x, y, ..., downsample = get_downsample(dim(x)), max_times = 16)

## S3 method for class 'stars'
plot(
  x,
  y,
  ...,
  join_zlim = TRUE,
  main = make_label(x, 1),
  axes = FALSE,
  downsample = TRUE,
  nbreaks = 11,
  breaks = "quantile",
  col = grey(1:(nbreaks - 1)/nbreaks),
  key.pos = get_key_pos(x, ...),
  key.width = kw_dflt(x, key.pos),
  key.length = 0.618,
  key.lab = main,
  reset = TRUE,
  box_col = NA,
  center_time = FALSE,
  hook = NULL,
  mfrow = NULL,
  compact = TRUE
)

## S3 method for class 'stars'
image(
  x,
  ...,
  band = 1,
  attr = 1,
  asp = NULL,
  rgb = NULL,
  maxColorValue = ifelse(inherits(rgb, "data.frame"), 255, max(x[[attr]], na.rm = TRUE)),
  xlab = if (!axes) "" else names(d)[1],
  ylab = if (!axes) "" else names(d)[2],
  xlim = st_bbox(extent)$xlim,
  ylim = st_bbox(extent)$ylim,
  text_values = FALSE,
  text_color = "black",
  axes = FALSE,
  interpolate = FALSE,
  as_points = FALSE,
  key.pos = NULL,
  logz = FALSE,
  key.width = kw_dflt(x, key.pos),
  key.length = 0.618,
  add.geom = NULL,
  border = NA,
  useRaster = isTRUE(dev.capabilities()$rasterImage == "yes"),
  extent = x
)

## S3 method for class 'stars_proxy'
plot(x, y, ..., downsample = get_downsample(dim(x)))
</code></pre>


<h3>Arguments</h3>

<table>
<tr style="vertical-align: top;">
<td><code>x</code></td>
<td>
<p>object of class <code>stars</code></p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>y</code></td>
<td>
<p>ignored</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>...</code></td>
<td>
<p>further arguments: for <code>plot</code>, passed on to <code>image.stars</code>; for <code>image</code>, passed on to <code>image.default</code> or <code>rasterImage</code>.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>downsample</code></td>
<td>
<p>logical or numeric; if <code>TRUE</code> will try to plot not many more pixels than actually are visible, if <code>FALSE</code>, no downsampling takes place, if numeric, the number of pixels/lines/bands etc that will be skipped; see Details.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>max_times</code></td>
<td>
<p>integer; maximum number of time steps to attempt to plot.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>join_zlim</code></td>
<td>
<p>logical; if <code>TRUE</code>, compute a single, joint zlim (color scale) for all subplots from <code>x</code></p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>main</code></td>
<td>
<p>character; subplot title prefix; use <code>""</code> to get only time, use <code>NULL</code> to suppress subplot titles</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>axes</code></td>
<td>
<p>logical; should axes and box be added to the plot?</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>nbreaks</code></td>
<td>
<p>number of color breaks; should be one more than number of colors. If missing and <code>col</code> is specified, it is derived from that.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>breaks</code></td>
<td>
<p>numeric vector with actual color breaks, or a <code>style</code> name used in classIntervals.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>col</code></td>
<td>
<p>colors to use for grid cells, or color palette function</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>key.pos</code></td>
<td>
<p>numeric; side to plot a color key: 1 bottom, 2 left, 3 top, 4 right; set to <code>NULL</code> to omit key. Ignored if multiple columns are plotted in a single function call. Default depends on plot size, map aspect, and, if set, parameter <code>asp</code>. If it has length 2, the second value, ranging from 0 to 1, determines where the key is placed in the available space (default: 0.5, center).</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>key.width</code></td>
<td>
<p>amount of space reserved for width of the key (labels); relative or absolute (using lcm)</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>key.length</code></td>
<td>
<p>amount of space reserved for length of the key (labels); relative or absolute (using lcm)</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>key.lab</code></td>
<td>
<p>character; label for color key in case of multiple subplots, use <code>""</code> to suppress</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>reset</code></td>
<td>
<p>logical; if <code>FALSE</code>, keep the plot in a mode that allows adding further map elements; if <code>TRUE</code> restore original mode after plotting</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>box_col</code></td>
<td>
<p>color for box around sub-plots; use <code>NA</code> to suppress plotting of boxes around sub-plots.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>center_time</code></td>
<td>
<p>logical; if <code>TRUE</code>, sub-plot titles will show the center of time intervals, otherwise their start</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>hook</code></td>
<td>
<p>NULL or function; hook function that will be called on every sub-plot; see examples.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>mfrow</code></td>
<td>
<p>length-2 integer vector with nrows, ncolumns of a composite plot, to override the default layout</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>compact</code></td>
<td>
<p>logical; place facets compactly (TRUE), or spread over the plotting device area?</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>band</code></td>
<td>
<p>integer; which band (dimension) to plot</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>attr</code></td>
<td>
<p>integer; which attribute to plot</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>asp</code></td>
<td>
<p>numeric; aspect ratio of image</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>rgb</code></td>
<td>
<p>integer; specify three bands to form an rgb composite. Experimental: rgb color table; see Details.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>maxColorValue</code></td>
<td>
<p>numeric; passed on to rgb</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>xlab</code></td>
<td>
<p>character; x axis label</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>ylab</code></td>
<td>
<p>character; y axis label</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>xlim</code></td>
<td>
<p>x axis limits</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>ylim</code></td>
<td>
<p>y axis limits</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>text_values</code></td>
<td>
<p>logical; print values as text on image?</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>text_color</code></td>
<td>
<p>character; color for printed text values</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>interpolate</code></td>
<td>
<p>logical; when using rasterImage (rgb), should pixels be interpolated?</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>as_points</code></td>
<td>
<p>logical; for curvilinear or sheared grids: parameter passed on to st_as_sf, determining whether raster cells will be plotted as symbols (fast, approximate) or small polygons (slow, exact)</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>logz</code></td>
<td>
<p>logical; if <code>TRUE</code>, use log10-scale for the attribute variable. In that case, <code>breaks</code> and <code>at</code> need to be given as log10-values; see examples.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>add.geom</code></td>
<td>
<p>object of class <code>sfc</code>, or list with arguments to <code>plot</code>, that will be added to an image or sub-image</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>border</code></td>
<td>
<p>color used for cell borders (only in case <code>x</code> is a curvilinear or rotated/sheared grid)</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>useRaster</code></td>
<td>
<p>logical; use the rasterImage capabilities of the graphics device?</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>extent</code></td>
<td>
<p>object which has a <code>st_bbox</code> method; sets the plotting extent</p>
</td>
</tr>
</table>
<h3>Details</h3>

<p>when plotting a subsetted <code>stars_proxy</code> object, the default value for argument <code>downsample</code> will not be computed correctly, and has to be set manually.
</p>
<p>Downsampling: a value for <code>downsample</code> of 0: no downsampling, 1: after every dimension value (pixel/line/band), one value is skipped (half of the original resolution), 2: after every dimension value, 2 values are skipped (one third of the original resolution), etc. If <code>downsample</code> is <code>TRUE</code> or a length 1 numeric vector, downsampling is only applied to the raster [x] and [y] dimensions.
</p>
<p>To remove unused classes in a categorical raster, use the droplevels function.
</p>
<p>When bitmaps show visual artefacts (Moir√© effects), make sure that device png is used rather than <code>ragg::agg_png</code> as the latter uses antialiasing for filled polygons which causes this; see also https://github.com/r-spatial/stars/issues/573 .
</p>
<p>use of an rgb color table is experimental; see https://github.com/r-spatial/mapview/issues/208
</p>
<p>when plotting a subsetted <code>stars_proxy</code> object, the default value for argument <code>downsample</code> will not be computed correctly, and has to be set manually.
</p>


<h3>Examples</h3>

<pre><code class="language-R">st_bbox(L7_ETMs) |&gt; st_as_sfc() |&gt; st_centroid() |&gt; st_coordinates() -&gt; pt
hook1 = function() {
    text(pt[,"X"], pt[,"Y"], "foo", col = 'orange', cex = 2)
}
plot(L7_ETMs, hook = hook1)
x = st_set_dimensions(L7_ETMs, 3, paste0("B_", 1:6))
hook2 = function(..., row, col, nr, nrow, ncol, value, bbox) {
   str = paste0("row ", row, "/", nrow, ", col ", col, "/", ncol, "\nnr: ", nr, " value: ", value)
   bbox |&gt; st_as_sfc() |&gt; st_centroid() |&gt; st_coordinates() -&gt; pt
   text(pt[,"X"], pt[,"Y"], str, col = 'red', cex = 2)
}
plot(x, hook = hook2, col = grey(c(.2,.25,.3,.35)))
if (isTRUE(dev.capabilities()$rasterImage == "yes")) {
  lc = read_stars(system.file("tif/lc.tif", package = "stars"))
  levels(lc[[1]]) = abbreviate(levels(lc[[1]]), 6) # so it's not only legend
  plot(lc, key.pos=4)
}
tif = system.file("tif/L7_ETMs.tif", package = "stars")
x = read_stars(tif)
image(x, col = grey((3:9)/10))
if (isTRUE(dev.capabilities()$rasterImage == "yes")) {
  image(x, rgb = c(1,3,5)) # false color composite
}
</code></pre>


</div>