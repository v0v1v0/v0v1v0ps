<div class="container">

<table style="width: 100%;"><tr>
<td>inserer_SMILES.moodle</td>
<td style="text-align: right;">R Documentation</td>
</tr></table>
<h2>
Insérer une formule chimique, comme image, grâce à openbabel
</h2>

<h3>Description</h3>

<p>Cette fonction permet de convertir une formule chimique définie par un
code SMILES en une image prête à insérer dans un texte.
</p>


<h3>Usage</h3>

<pre><code class="language-R">inserer_SMILES.moodle( code.SMILES, nom.molecule = code.SMILES,
                       largeur = 300, hauteur = 300,
                       couleur.atomes = TRUE,
                       couleur.fond = NA,
                       couleur.liaisons = NA,
                       double.liaisons.asymetrique = FALSE,
                       masquer.terminaux = TRUE,
                       dessiner.CH = FALSE,
                       marges = FALSE,
                       cmd.obabel = "obabel " )

</code></pre>


<h3>Arguments</h3>

<table>
<tr style="vertical-align: top;">
<td><code>code.SMILES</code></td>
<td>
<p>Une chaîne de caractères contenant le code SMILES à
convertir.  </p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>nom.molecule</code></td>
<td>
<p>Une chaîne de caractère qui sera utilisée comme
description de l'image, dans le code HTML produit pour Moodle.  </p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>largeur, hauteur</code></td>
<td>
<p>Les dimensions de l'image, en pixels</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>couleur.atomes</code></td>
<td>
<p>Faut-il utiliser le code couleur habituel pour
indiquer les atomes? (Option “-xu” d'open babel.)</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>couleur.fond</code></td>
<td>
<p>Couleur à utiliser pour le fond de l'image
(Option “-xb” d'open babel; <code>NA</code>: fond par défaut.)</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>couleur.liaisons</code></td>
<td>
<p>Couleur à utiliser pour les liaisons chimiques
(<code>NA</code>: fond par défaut d'open babel)</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>double.liaisons.asymetrique</code></td>
<td>
<p>Option “-xs” d'open babel.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>masquer.terminaux</code></td>
<td>
<p>Faut-il afficher en toutes lettres les
méthyles terminaux? (Option “-xC” d'open babel.)</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>dessiner.CH</code></td>
<td>
<p>Faut-il afficher en toutes lettres les
atomes de carbone? (Option “-xa” d'open babel.)</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>marges</code></td>
<td>
<p>Si <code>FALSE</code>, les marges autour de la formule sont
éliminées (option “-xm” d'open babel).  Comme les marges
dépendent aussi des dimensions d'image demandées et de la formule
créée, open babel peut laisser des marges assez grandes malgré tout,
aussi l'image est rognée grâce à l'utilitaire “convert”
(option “-trim”), qui doit donc aussi être installé et
exécutable par R.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>cmd.obabel</code></td>
<td>
<p>Une chaîne de caractères indiquant la commande à
utiliser pour lancer open babel</p>
</td>
</tr>
</table>
<h3>Details</h3>

<p> Cette fonction permet de créer une image d'une formule
chimique semi-développée, à partir du code SMILES correspondant.
</p>
<p>La conversion est faite avec open babel, qui doit être installé et
exécutable par R pour que la conversion puisse avoir lieu. Par défaut,
pour ne pas avoir de marges, l'utilitaire convert est aussi utilisé.
</p>


<h3>Value</h3>

<p>Une chaîne de caractère contenant le code XML nécessaire pour inclure
une image (contenant la formule créée), et qu'elle soit incluse au
fichier XML au moment de la création de la question.
</p>


<h3>Author(s)</h3>

<p>Emmanuel Curis <a href="mailto:emmanuel.curis@parisdescartes.fr">emmanuel.curis@parisdescartes.fr</a>
</p>


<h3>See Also</h3>

<p><code>inserer_formule.moodle</code> pour convertir un code latex en
une formule mathématique et l'insérer dans une question Moodle.
</p>
<p><code>lier_image.moodle</code> pour insérer une image quelconque.
</p>


<h3>Examples</h3>

<pre><code class="language-R">  # Création d'une question demandant quelle est la formule du benzène.
  #  (Non exécuté car open babel et convert non nécessairement installés)
## Not run: 
  # Commencer un nouveau questionnaire
  q &lt;- debuter_xml.moodle( "benzene" )

  # Catégorie : exemples
  categorie.moodle( "Exemples SARP/SMILES" )

  # Le format par défaut, avec deux bonnes réponses et trois mauvaises,
  qcm.moodle( "Quelle est la formule du benzène&amp;thinsp;?",
              inserer_SMILES.moodle( "c1ccccc1" ),
              inserer_SMILES.moodle( "C1CCCCC1" ) )

  # On termine le questionnaire
  finir_xml.moodle( )

  # Importez le fichier benzene.xml dans Moodle pour voir le résultat...
  print( "Importez le fichier benzene.xml dans Moodle pour voir le résultat..." )

## End(Not run)
</code></pre>


</div>