<div class="container">

<table style="width: 100%;"><tr>
<td>solr_stats</td>
<td style="text-align: right;">R Documentation</td>
</tr></table>
<h2>Solr stats</h2>

<h3>Description</h3>

<p>Returns only stat items
</p>


<h3>Usage</h3>

<pre><code class="language-R">solr_stats(
  conn,
  name = NULL,
  params = list(q = "*:*", stats.field = NULL, stats.facet = NULL),
  body = NULL,
  callopts = list(),
  raw = FALSE,
  parsetype = "df",
  progress = NULL,
  ...
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr style="vertical-align: top;">
<td><code>conn</code></td>
<td>
<p>A solrium connection object, see SolrClient</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>name</code></td>
<td>
<p>Name of a collection or core. Or leave as <code>NULL</code> if
not needed.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>params</code></td>
<td>
<p>(list) a named list of parameters, results in a GET request
as long as no body parameters given</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>body</code></td>
<td>
<p>(list) a named list of parameters, if given a POST request
will be performed</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>callopts</code></td>
<td>
<p>Call options passed on to crul::HttpClient</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>raw</code></td>
<td>
<p>(logical) If TRUE, returns raw data in format specified by
wt param</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>parsetype</code></td>
<td>
<p>(character) One of 'list' or 'df'</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>progress</code></td>
<td>
<p>a function with logic for printing a progress
bar for an HTTP request, ultimately passed down to <span class="pkg">curl</span>. only supports
<code>httr::progress</code> for now. See the README for an example.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>...</code></td>
<td>
<p>Further args to be combined into query</p>
</td>
</tr>
</table>
<h3>Value</h3>

<p>XML, JSON, a list, or data.frame
</p>


<h3>Stats parameters</h3>


<ul>
<li>
<p> q Query terms, defaults to '<em>:</em>', or everything.
</p>
</li>
<li>
<p> stats.field The number of similar documents to return for each result.
</p>
</li>
<li>
<p> stats.facet You can not facet on multi-valued fields.
</p>
</li>
<li>
<p> wt (character) Data type returned, defaults to 'json'. One of json
or xml. If json, uses <code>fromJSON</code> to parse. If xml,
uses <code>xmlParse</code> to parse. csv is only supported in
<code>solr_search</code> and <code>solr_all</code>.
</p>
</li>
<li>
<p> start Record to start at, default to beginning.
</p>
</li>
<li>
<p> rows Number of records to return. Defaults to 10.
</p>
</li>
<li>
<p> key API key, if needed.
</p>
</li>
</ul>
<h3>References</h3>

<p>See
https://lucene.apache.org/solr/guide/8_2/the-stats-component.html for
more information on Solr stats.
</p>


<h3>See Also</h3>

<p><code>solr_highlight()</code>, <code>solr_facet()</code>, <code>solr_search()</code>, <code>solr_mlt()</code>
</p>


<h3>Examples</h3>

<pre><code class="language-R">## Not run: 
# connect
(cli &lt;- SolrClient$new(host = "api.plos.org", path = "search", port = NULL))

# get stats
solr_stats(cli, params = list(q='science', stats.field='counter_total_all'),
  raw=TRUE)
solr_stats(cli, params = list(q='title:"ecology" AND body:"cell"',
   stats.field=c('counter_total_all','alm_twitterCount')))
solr_stats(cli, params = list(q='ecology',
  stats.field=c('counter_total_all','alm_twitterCount'),
  stats.facet='journal'))
solr_stats(cli, params = list(q='ecology',
  stats.field=c('counter_total_all','alm_twitterCount'),
  stats.facet=c('journal','volume')))

# Get raw data, then parse later if you feel like it
## json
out &lt;- solr_stats(cli, params = list(q='ecology',
  stats.field=c('counter_total_all','alm_twitterCount'),
  stats.facet=c('journal','volume')), raw=TRUE)
library("jsonlite")
jsonlite::fromJSON(out)
solr_parse(out) # list
solr_parse(out, 'df') # data.frame

## xml
out &lt;- solr_stats(cli, params = list(q='ecology',
  stats.field=c('counter_total_all','alm_twitterCount'),
  stats.facet=c('journal','volume'), wt="xml"), raw=TRUE)
library("xml2")
xml2::read_xml(unclass(out))
solr_parse(out) # list
solr_parse(out, 'df') # data.frame

# Get verbose http call information
solr_stats(cli, params = list(q='ecology', stats.field='alm_twitterCount'),
   callopts=list(verbose=TRUE))

## End(Not run)
</code></pre>


</div>