<div class="container">

<table style="width: 100%;"><tr>
<td>survcompare</td>
<td style="text-align: right;">R Documentation</td>
</tr></table>
<h2>Cross-validates and compares Cox Proportionate Hazards and Survival Random Forest models</h2>

<h3>Description</h3>

<p>The function performs a repeated nested cross-validation for
</p>

<ol>
<li>
<p> Cox-PH (survival package, survival::coxph) or Cox-Lasso (glmnet package, glmnet::cox.fit)
</p>
</li>
<li>
<p> Survival Random Forest (randomForestSRC::rfsrc), or its ensemble with the Cox model (if use_ensemble =TRUE)
</p>
</li>
</ol>
<p>The same random seed for the train/test splits are used for all models to aid fair comparison;
and the performance metrics are computed for the tree models including Harrel's c-index,
time-dependent AUC-ROC, time-dependent Brier Score, and calibration slope.
The statistical significance of the performance differences between Cox-PH and Cox-SRF Ensemble is tested and reported.
</p>
<p>The function is designed to help with the model selection by quantifying the loss of predictive
performance (if any) if Cox-PH is used instead of a more complex model such as SRF
which can capture non-linear and interaction terms, as well as non-proportionate hazards.
The difference in performance of the Ensembled Cox and SRF and the baseline Cox-PH
can be viewed as quantification of the non-linear and cross-terms contribution to
the predictive power of the supplied predictors.
</p>
<p>The function is a wrapper for survcompare2(), for comparison of the CoxPH and SRF models, and
an alternative way to do the same analysis is to run survcox_cv() and survsrf_cv(), then using survcompare2()
</p>
<p>Cross-validates and compares Cox Proportionate Hazards and Survival Random Forest models
</p>


<h3>Usage</h3>

<pre><code class="language-R">survcompare(
  df_train,
  predict_factors,
  fixed_time = NaN,
  randomseed = NaN,
  useCoxLasso = FALSE,
  outer_cv = 3,
  inner_cv = 3,
  tuningparams = list(),
  return_models = FALSE,
  repeat_cv = 2,
  ml = "SRF",
  use_ensemble = FALSE,
  max_grid_size = 10,
  suppresswarn = TRUE
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr style="vertical-align: top;">
<td><code>df_train</code></td>
<td>
<p>training data, a data frame with "time" and "event" columns to define the survival outcome</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>predict_factors</code></td>
<td>
<p>list of column names to be used as predictors</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>fixed_time</code></td>
<td>
<p>prediction time of interest. If NULL, 0.90th quantile of event times is used</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>randomseed</code></td>
<td>
<p>random seed for replication</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>useCoxLasso</code></td>
<td>
<p>TRUE / FALSE, for whether to use regularized version of the Cox model, FALSE is default</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>outer_cv</code></td>
<td>
<p>k in k-fold CV</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>inner_cv</code></td>
<td>
<p>k in k-fold CV for internal CV to tune survival random forest hyper-parameters</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>tuningparams</code></td>
<td>
<p>list of tuning parameters for random forest: 1) NULL for using a default tuning grid, or 2) a list("mtry"=c(...), "nodedepth" = c(...), "nodesize" = c(...))</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>return_models</code></td>
<td>
<p>TRUE/FALSE to return the trained models; default is FALSE, only performance is returned</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>repeat_cv</code></td>
<td>
<p>if NULL, runs once, otherwise repeats several times with different random split for CV, reports average of all</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>ml</code></td>
<td>
<p>this is currently for Survival Random Forest only ("SRF")</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>use_ensemble</code></td>
<td>
<p>TRUE/FALSE for whether to train SRF on its own, apart from the CoxPH-&gt;SRF ensemble. Default is FALSE as there is not much information in SRF itself compared to the ensembled version.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>max_grid_size</code></td>
<td>
<p>number of random grid searches for model tuning</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>suppresswarn</code></td>
<td>
<p>TRUE/FALSE, TRUE by default</p>
</td>
</tr>
</table>
<h3>Value</h3>

<p>outcome - cross-validation results for CoxPH, SRF, and an object containing the comparison results
</p>


<h3>Author(s)</h3>

<p>Diana Shamsutdinova <a href="mailto:diana.shamsutdinova.github@gmail.com">diana.shamsutdinova.github@gmail.com</a>
</p>


<h3>Examples</h3>

<pre><code class="language-R">
df &lt;-simulate_nonlinear(100)
predictors &lt;- names(df)[1:4]
srf_params &lt;- list("mtry" = c(2), "nodedepth"=c(25), "nodesize" =c(15))
mysurvcomp &lt;- survcompare(df, predictors, tuningparams = srf_params, max_grid_size = 1)
summary(mysurvcomp)

</code></pre>


</div>