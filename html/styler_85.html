<div class="container">

<table style="width: 100%;"><tr>
<td>find_pos_id_to_keep</td>
<td style="text-align: right;">R Documentation</td>
</tr></table>
<h2>Find the pos ids to keep</h2>

<h3>Description</h3>

<p>To make a parse table shallow, we must know which ids to keep.
<code>split(cumsum(pd_parent_first$parent == 0L))</code> above puts comments with
negative parents in the same block as proceeding expressions (but also with
positive).
<code>find_pos_id_to_keep()</code> must hence always keep negative comments. We did not
use <code>split(cumsum(pd_parent_first$parent &lt; 1L))</code> because then every top-level
comment is an expression on its own and processing takes much longer for
typical roxygen annotated code.
</p>


<h3>Usage</h3>

<pre><code class="language-R">find_pos_id_to_keep(pd)
</code></pre>


<h3>Arguments</h3>

<table><tr style="vertical-align: top;">
<td><code>pd</code></td>
<td>
<p>A temporary top-level nest where the first expression is always a
top-level expression, potentially cached.</p>
</td>
</tr></table>
<h3>Details</h3>

<p>Note that top-level comments <strong>above</strong> code have negative parents
(the negative value of the parent of the code expression that follows after,
another comment might be in the way though), all comments that are not top
level have positive ids. All comments for which no code follows afterwards
have parent 0.
</p>


<h3>Examples</h3>

<pre><code class="language-R">styler:::get_parse_data(c("#", "1"))
styler:::get_parse_data(c("c(#", "1)"))
styler:::get_parse_data(c("", "c(#", "1)", "#"))
</code></pre>


</div>