<div class="container">

<table style="width: 100%;"><tr>
<td>SubgrpID</td>
<td style="text-align: right;">R Documentation</td>
</tr></table>
<h2>SubgrpID</h2>

<h3>Description</h3>

<p>Exploratory Subgroup Identification main function
</p>


<h3>Usage</h3>

<pre><code class="language-R">SubgrpID(
  data.train,
  data.test = NULL,
  yvar,
  censorvar = NULL,
  trtvar = NULL,
  trtref = NULL,
  xvars,
  type = "c",
  n.boot = 25,
  des.res = "larger",
  min.sigp.prcnt = 0.2,
  pre.filter = NULL,
  filter.method = NULL,
  k.fold = 5,
  cv.iter = 20,
  max.iter = 500,
  mc.iter = 20,
  method = c("Seq.BT"),
  do.cv = FALSE,
  out.file = NULL,
  file.path = "",
  plots = FALSE
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr style="vertical-align: top;">
<td><code>data.train</code></td>
<td>
<p>data frame for training dataset</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>data.test</code></td>
<td>
<p>data frame for testing dataset, default = NULL</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>yvar</code></td>
<td>
<p>variable (column) name for response variable</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>censorvar</code></td>
<td>
<p>variable name for censoring (1: event; 0: censor), default = NULL</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>trtvar</code></td>
<td>
<p>variable name for treatment variable, default = NULL (prognostic signature)</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>trtref</code></td>
<td>
<p>coding (in the column of trtvar) for treatment arm</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>xvars</code></td>
<td>
<p>vector of variable names for predictors (covariates)</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>type</code></td>
<td>
<p>type of response variable: "c" continuous; "s" survival; "b" binary</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>n.boot</code></td>
<td>
<p>number of bootstrap for batting procedure, or the variable selection procedure for PRIM; for PRIM, when n.boot=0, bootstrapping for variable selection is not conducted</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>des.res</code></td>
<td>
<p>the desired response. "larger": prefer larger response. "smaller": prefer smaller response</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>min.sigp.prcnt</code></td>
<td>
<p>desired proportion of signature positive group size for a given cutoff</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>pre.filter</code></td>
<td>
<p>NULL (default), no prefiltering conducted;"opt", optimized number of predictors selected; An integer: min(opt, integer) of predictors selected</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>filter.method</code></td>
<td>
<p>NULL (default), no prefiltering; "univariate", univaraite filtering; "glmnet", glmnet filtering; "unicart", univariate rpart filtering for prognostic case</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>k.fold</code></td>
<td>
<p>cross-validation folds</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>cv.iter</code></td>
<td>
<p>Algotithm terminates after cv.iter successful iterations of cross-validation, or after max.iter total iterations, whichever occurs first</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>max.iter</code></td>
<td>
<p>total iterations, whichever occurs first</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>mc.iter</code></td>
<td>
<p>number of iterations for the Monte Carlo procedure to get a stable "best number of predictors"</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>method</code></td>
<td>
<p>current version only supports sequential-BATTing ("Seq.BT") for subgroup identification</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>do.cv</code></td>
<td>
<p>whether to perform cross validation for performance evaluation. TRUE or FALSE (Default)</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>out.file</code></td>
<td>
<p>Name of output result files excluding method name. If NULL no output file would be saved</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>file.path</code></td>
<td>
<p>default: current working directory. When specifying a dir, use "/" at the end. e.g. "TEMP/"</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>plots</code></td>
<td>
<p>default: FALSE. whether to save plots</p>
</td>
</tr>
</table>
<h3>Details</h3>

<p>Function for SubgrpID
</p>


<h3>Value</h3>

<p>A list with SubgrpID output
</p>

<dl>
<dt>res</dt>
<dd>
<p>list of all results from the algorithm</p>
</dd>
<dt>train.stat</dt>
<dd>
<p>list of subgroup statistics on training dataset</p>
</dd>
<dt>test.stat</dt>
<dd>
<p>list of subgroup statistics on testing dataset</p>
</dd>
<dt>cv.res</dt>
<dd>
<p>list of all results from cross-validation on training dataset</p>
</dd>
<dt>train.plot</dt>
<dd>
<p>interaction plot for training dataset</p>
</dd>
<dt>test.plot</dt>
<dd>
<p>interaction plot for testing dataset</p>
</dd>
</dl>
<h3>Examples</h3>

<pre><code class="language-R"># no run
n &lt;- 40
k &lt;- 5
prevalence &lt;- sqrt(0.5)
rho&lt;-0.2
sig2 &lt;- 2
rhos.bt.real &lt;- c(0, rep(0.1, (k-3)))*sig2
y.sig2 &lt;- 1
yvar="y.binary"
xvars=paste("x", c(1:k), sep="")
trtvar="treatment"
prog.eff &lt;- 0.5
effect.size &lt;- 1
a.constent &lt;- effect.size/(2*(1-prevalence))
set.seed(888)
ObsData &lt;- data.gen(n=n, k=k, prevalence=prevalence, prog.eff=prog.eff,
                    sig2=sig2, y.sig2=y.sig2, rho=rho,
                    rhos.bt.real=rhos.bt.real, a.constent=a.constent)
TestData &lt;- data.gen(n=n, k=k, prevalence=prevalence, prog.eff=prog.eff,
                     sig2=sig2, y.sig2=y.sig2, rho=rho,
                     rhos.bt.real=rhos.bt.real, a.constent=a.constent)
subgrp &lt;- SubgrpID(data.train=ObsData$data,
                   data.test=TestData$data,
                   yvar=yvar,
                   trtvar=trtvar,
                   trtref="1",
                   xvars=xvars,
                   type="b",
                   n.boot=5, # suggest n.boot &gt; 25, depends on sample size
                   des.res = "larger",
 #                 do.cv = TRUE,
 #                 cv.iter = 2, # uncomment to run CV
                   method="Seq.BT")
subgrp$res
subgrp$train.stat
subgrp$test.stat
subgrp$train.plot
subgrp$test.plot
#subgrp$cv.res$stats.summary #CV estimates of all results
</code></pre>


</div>