<div class="container">

<table style="width: 100%;"><tr>
<td>contango_hedged</td>
<td style="text-align: right;">R Documentation</td>
</tr></table>
<h2>Backtest a Hedged Contango-Based Volatility Trading Strategy</h2>

<h3>Description</h3>

<p>Implements the following strategy: Each day, hold XIV/SPXU (weighted for zero 
beta) if contango &gt; <code>xiv.spxu.cutpoint</code>, hold VXX/UPRO (weighted for 
zero beta) if contango &lt; <code>vxx.upro.cutpoint</code>, and hold cash otherwise. 
Perhaps not very useful since XIV closed on Feb. 20, 2018.
</p>


<h3>Usage</h3>

<pre><code class="language-R">contango_hedged(contango, xiv.spxu.gains = NULL, vxx.upro.gains = NULL,
  xiv.spxu.cutpoint = 6.36, vxx.upro.cutpoint = 5.45,
  xiv.allocation = 0.46, vxx.allocation = 0.46, xiv.beta = NULL,
  vxx.beta = NULL, initial = 10000)
</code></pre>


<h3>Arguments</h3>

<table>
<tr style="vertical-align: top;">
<td><code>contango</code></td>
<td>
<p>Numeric vector of contango values at the end of each trading 
day.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>xiv.spxu.gains</code></td>
<td>
<p>2-column numeric matrix with gains for XIV and SPXU. 
Should have the same number of rows as <code>contango</code> and be date-shifted 
one value to the right. For example, the first row should have the XIV and 
SPXU gains for the day AFTER the first contango value.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>vxx.upro.gains</code></td>
<td>
<p>2-column numeric matrix with gains for VXX and UPRO. 
Should have the same number of rows as <code>contango</code> and be date-shifted 
one value to the right. For example, the first row should have the VXX and 
UPRO gains for the day AFTER the first contango value.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>xiv.spxu.cutpoint</code></td>
<td>
<p>Numeric value giving the contango cutpoint for
XIV/SPXU position. For example, if <code>xiv.spxu.cutpoint = 5</code>, XIV/SPXU 
will be held whenever contango is greater than 5%.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>vxx.upro.cutpoint</code></td>
<td>
<p>Numeric value giving the contango cutpoint for 
VXX/UPRO position. For example, if <code>vxx.upro.cutpoint = -5</code>, VXX/UPRO 
will be held whenever contango is less than -5%.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>xiv.allocation</code></td>
<td>
<p>Numeric value specifying XIV allocation for XIV/SPXU 
position. For example, if set to 0.46, 46% is allocated to XIV and 54% to 
SPXU when contango &gt; <code>xiv.spxu.cutpoint</code>.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>vxx.allocation</code></td>
<td>
<p>Numeric value specifying VXX allocation for VXX/UPRO 
position. For example, if set to 0.46, 46% is allocated to VXX and 54% to 
UPRO when contango &lt; <code>vxx.upro.cutpoint</code>.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>xiv.beta</code></td>
<td>
<p>Numeric value specifying XIV's beta. If specified, the 
function figures out what <code>xiv.allocation</code> needs to be for zero-beta 
XIV/SPXU positions. For example, if set to 3.5, then 46.2% XIV/53.8% SPXU 
achieves zero beta.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>vxx.beta</code></td>
<td>
<p>Numeric value indicating VXX's beta. If specified, the 
function figures out what <code>vxx.allocation</code> needs to be for zero-beta 
VXX/UPRO positions. For example, if set to -3.5, then 46.2% VXX/53.8% UPRO 
achieves zero beta.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>initial</code></td>
<td>
<p>Numeric value giving the initial value of the portfolio.</p>
</td>
</tr>
</table>
<h3>Details</h3>

<p>You can find historical contango values from The Intelligent Investor Blog. 
You can click the first link at 
<a href="http://investing.kuchita.com/2012/06/28/xiv-data-and-pricing-model-since-vix-futures-available-2004/">http://investing.kuchita.com/2012/06/28/xiv-data-and-pricing-model-since-vix-futures-available-2004/</a> 
to download a zip file containing an Excel spreadsheet. Then, you will need 
to calculate whatever version of "contango" you prefer. I typically define 
contango as what percent higher the second-month VIX futures are acompared to 
the first-month futures, i.e. dividing the "2nd mth" column by the "1st mth" 
column, subtracting 1, and then multiplying by 100.
</p>
<p>To load daily gains for XIV, SPXU, VXX, and UPRO, you can use 
<code>load_gains</code>, which uses the <span class="pkg">quantmod</span> package to load 
data from Yahoo! Finance. You will have to specify the <code>from</code> and 
<code>to</code> inputs to match the date range for your contango values.
</p>


<h3>Value</h3>

<p>List containing:
</p>

<ol>
<li>
<p> Character vector named <code>holdings</code> indicating what fund was held 
each day (XIV/SPXU, VXX/UPRO, or cash). 
</p>
</li>
<li>
<p> Numeric vector named <code>port.gains</code> giving the portfolio gain for 
each day, which will be 0 for days that cash was held and the weighted 
XIV/SPXU or VXX/UPRO gain for days that one of those positions was held. 
</p>
</li>
<li>
<p> Numeric vector named <code>port.balances</code> giving the portfolio balance 
each day. 
</p>
</li>
<li>
<p> Numeric value named <code>trades</code> giving the total number of trades 
executed.
</p>
</li>
</ol>
<h3>References</h3>

<p>Ryan, J.A. and Ulrich, J.M. (2017) quantmod: Quantitative Financial Modelling 
Framework. R package version 0.4-12, 
<a href="https://CRAN.R-project.org/package=quantmod">https://CRAN.R-project.org/package=quantmod</a>.
</p>


</div>