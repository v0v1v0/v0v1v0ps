<div class="container">

<table style="width: 100%;"><tr>
<td>potential_interactions</td>
<td style="text-align: right;">R Documentation</td>
</tr></table>
<h2>Interaction Strength</h2>

<h3>Description</h3>

<p>Returns a vector of interaction strengths between variable <code>v</code> and all other
variables, see Details.
</p>


<h3>Usage</h3>

<pre><code class="language-R">potential_interactions(
  obj,
  v,
  nbins = NULL,
  color_num = TRUE,
  scale = FALSE,
  adjusted = FALSE
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr style="vertical-align: top;">
<td><code>obj</code></td>
<td>
<p>An object of class "shapviz".</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>v</code></td>
<td>
<p>Variable name to calculate potential SHAP interactions for.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>nbins</code></td>
<td>
<p>Into how many quantile bins should a numeric <code>v</code> be binned?
The default <code>NULL</code> equals the smaller of <code class="reqn">n/20</code> and <code class="reqn">\sqrt n</code> (rounded up),
where <code class="reqn">n</code> is the sample size. Ignored if <code>obj</code> contains SHAP interactions.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>color_num</code></td>
<td>
<p>Should other ("color") features <code style="white-space: pre;">⁠v'⁠</code> be converted to numeric,
even if they are factors/characters? Default is <code>TRUE</code>.
Ignored if <code>obj</code> contains SHAP interactions.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>scale</code></td>
<td>
<p>Should adjusted R-squared be multiplied with the sample variance of
within-bin SHAP values? If <code>TRUE</code>, bins with stronger vertical scatter will get
higher weight. The default is <code>FALSE</code>. Ignored if <code>obj</code> contains SHAP interactions.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>adjusted</code></td>
<td>
<p>Should <em>adjusted</em> R-squared be used? Default is <code>FALSE</code>.</p>
</td>
</tr>
</table>
<h3>Details</h3>

<p>If SHAP interaction values are available, the interaction strength
between feature <code>v</code> and another feature <code style="white-space: pre;">⁠v'⁠</code> is measured by twice their
mean absolute SHAP interaction values.
</p>
<p>Otherwise, we use a heuristic calculated as follows:
</p>

<ol>
<li>
<p> If <code>v</code> is numeric, it is binned into <code>nbins</code> bins.
</p>
</li>
<li>
<p> Per bin, the SHAP values of <code>v</code> are regressed onto <code>v</code>, and the R-squared
is calculated. Rows with missing <code style="white-space: pre;">⁠v'⁠</code> are discarded.
</p>
</li>
<li>
<p> The R-squared are averaged over bins, weighted by the number of
non-missing <code style="white-space: pre;">⁠v'⁠</code> values.
</p>
</li>
</ol>
<p>This measures how much variability in the SHAP values of <code>v</code> is explained by <code style="white-space: pre;">⁠v'⁠</code>,
after accounting for <code>v</code>.
</p>
<p>Set <code>scale = TRUE</code> to multiply the R-squared by the within-bin variance
of the SHAP values. This will put higher weight to bins with larger scatter.
</p>
<p>Set <code>color_num = FALSE</code> to <em>not</em> turn the values of the "color" feature <code style="white-space: pre;">⁠v'⁠</code>
to numeric.
</p>
<p>Finally, set <code>adjusted = TRUE</code> to use <em>adjusted</em> R-squared.
</p>
<p>The algorithm does not consider observations with missing <code style="white-space: pre;">⁠v'⁠</code> values.
</p>


<h3>Value</h3>

<p>A named vector of decreasing interaction strengths.
</p>


<h3>See Also</h3>

<p><code>sv_dependence()</code>
</p>


</div>