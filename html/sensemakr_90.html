<div class="container">

<table style="width: 100%;"><tr>
<td>sensemakr</td>
<td style="text-align: right;">R Documentation</td>
</tr></table>
<h2>Sensitivity analysis to unobserved confounders</h2>

<h3>Description</h3>

<p>This function performs sensitivity analysis to omitted variables as discussed in Cinelli and Hazlett (2020). It returns an object of
class <code>sensemakr</code> with several pre-computed sensitivity statistics for reporting.
After running <code>sensemakr</code> you may directly use the <code>plot</code>, <code>print</code> and <code>summary</code> methods in the returned object.
</p>


<h3>Usage</h3>

<pre><code class="language-R">sensemakr(...)

## S3 method for class 'lm'
sensemakr(
  model,
  treatment,
  benchmark_covariates = NULL,
  kd = 1,
  ky = kd,
  q = 1,
  alpha = 0.05,
  r2dz.x = NULL,
  r2yz.dx = r2dz.x,
  bound_label = "Manual Bound",
  reduce = TRUE,
  ...
)

## S3 method for class 'fixest'
sensemakr(
  model,
  treatment,
  benchmark_covariates = NULL,
  kd = 1,
  ky = kd,
  q = 1,
  alpha = 0.05,
  r2dz.x = NULL,
  r2yz.dx = r2dz.x,
  bound_label = "Manual Bound",
  reduce = TRUE,
  ...
)

## S3 method for class 'formula'
sensemakr(
  formula,
  method = c("lm", "feols"),
  vcov = "iid",
  data,
  treatment,
  benchmark_covariates = NULL,
  kd = 1,
  ky = kd,
  q = 1,
  alpha = 0.05,
  r2dz.x = NULL,
  r2yz.dx = r2dz.x,
  bound_label = "",
  reduce = TRUE,
  ...
)

## S3 method for class 'numeric'
sensemakr(
  estimate,
  se,
  dof,
  treatment = "D",
  q = 1,
  alpha = 0.05,
  r2dz.x = NULL,
  r2yz.dx = r2dz.x,
  bound_label = "manual_bound",
  r2dxj.x = NULL,
  r2yxj.dx = r2dxj.x,
  benchmark_covariates = "manual_benchmark",
  kd = 1,
  ky = kd,
  reduce = TRUE,
  ...
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr style="vertical-align: top;">
<td><code>...</code></td>
<td>
<p>arguments passed to other methods.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>model</code></td>
<td>
<p>An <code>lm</code> or <code>fixest</code> object with the outcome regression.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>treatment</code></td>
<td>
<p>A character vector with the name of the treatment variable
of the model.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>benchmark_covariates</code></td>
<td>
<p>The user has two options: (i)  character vector of the names of covariates that will be used to bound the plausible strength of the unobserved confounders. Each variable will be considered separately; (ii) a named list with character vector names of covariates that will be used, <em>as a group</em>, to bound the plausible strength of the unobserved confounders. The names of the list will be used for the benchmark labels. Note: for factor variables with more than two levels, you need to provide the name of each level as encoded in the <code>fixest</code> model (the columns of <code>model.matrix</code>).</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>kd</code></td>
<td>
<p>numeric vector. Parameterizes how many times stronger the confounder is related to the treatment in comparison to the observed benchmark covariate.
Default value is <code>1</code> (confounder is as strong as benchmark covariate).</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>ky</code></td>
<td>
<p>numeric vector. Parameterizes how many times stronger the confounder is related to the outcome in comparison to the observed benchmark covariate.
Default value is the same as <code>kd</code>.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>q</code></td>
<td>
<p>percent change of the effect estimate that would be deemed problematic.  Default is <code>1</code>,
which means a reduction of 100% of the current effect estimate (bring estimate to zero). It has to be greater than zero.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>alpha</code></td>
<td>
<p>significance level.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>r2dz.x</code></td>
<td>
<p>hypothetical partial R2 of unobserved confounder
Z with treatment D, given covariates X.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>r2yz.dx</code></td>
<td>
<p>hypothetical partial R2 of unobserved confounder Z
with outcome Y, given covariates X and treatment D.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>bound_label</code></td>
<td>
<p>label to bounds provided manually in <code>r2dz.x</code> and <code>r2yz.dx</code>.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>reduce</code></td>
<td>
<p>should the bias adjustment reduce or increase the
absolute value of the estimated coefficient? Default is <code>TRUE</code>.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>formula</code></td>
<td>
<p>an object of the class <code>formula</code>: a symbolic description of the model to be fitted.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>method</code></td>
<td>
<p>the default is <code>lm</code>. This argument can be changed to estimate the model using <code>feols</code>. In this case the formula needs to be written so it can be estimated with <code>feols</code> and the package needs to be installed.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>vcov</code></td>
<td>
<p>the variance/covariance used in the estimation when using <code>feols</code>. See <code>vcov.fixest</code> for more details. Defaults to "iid".</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>data</code></td>
<td>
<p>data needed only when you pass a formula as first parameter. An object of the class <code>data.frame</code> containing the variables used in the analysis.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>estimate</code></td>
<td>
<p>Coefficient estimate.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>se</code></td>
<td>
<p>standard error of the coefficient estimate.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>dof</code></td>
<td>
<p>residual degrees of freedom of the regression.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>r2dxj.x</code></td>
<td>
<p>partial R2 of covariate Xj with the treatment D (after partialling out the effect of the remaining covariates X, excluding Xj).</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>r2yxj.dx</code></td>
<td>
<p>partial R2 of covariate Xj with the outcome Y (after partialling out the effect of the remaining covariates X, excluding Xj).</p>
</td>
</tr>
</table>
<h3>Value</h3>

<p>An object of class <code>sensemakr</code>, containing:
</p>

<dl>
<dt> <code>info</code> </dt>
<dd>
<p>A <code>data.frame</code> with the general information of the analysis, including the formula used, the name of the treatment variable, parameter values such as <code>q</code>, <code>alpha</code>, and whether the bias is assumed to reduce the current estimate. </p>
</dd>
<dt> <code>sensitivity_stats</code> </dt>
<dd>
<p>A <code>data.frame</code> with the sensitivity statistics for the treatment variable, as computed by the function <code>sensitivity_stats</code>.</p>
</dd>
<dt> <code>bounds</code> </dt>
<dd>
<p>A <code>data.frame</code> with bounds on the strength of confounding according to some benchmark covariates, as computed by the function <code>ovb_bounds</code>.</p>
</dd>
</dl>
<h3>References</h3>

<p>Cinelli, C. and Hazlett, C. (2020), "Making Sense of Sensitivity: Extending Omitted Variable Bias." Journal of the Royal Statistical Society, Series B (Statistical Methodology).
</p>


<h3>See Also</h3>

<p>The function <code>sensemakr</code> is a convenience function. You may use the other sensitivity functions of the package directly, such as the functions for sensitivity plots
(<code>ovb_contour_plot</code>, <code>ovb_extreme_plot</code>) the functions for computing bias-adjusted estimates and t-values (<code>adjusted_estimate</code>, <code>adjusted_t</code>),
the functions for computing the robustness value and partial R2 (<code>robustness_value</code>, <code>partial_r2</code>),  or the functions for bounding the strength
of unobserved confounders (<code>ovb_bounds</code>), among others.
</p>


<h3>Examples</h3>

<pre><code class="language-R"># loads dataset
data("darfur")

# runs regression model
model &lt;- lm(peacefactor ~ directlyharmed + age + farmer_dar + herder_dar +
                         pastvoted + hhsize_darfur + female + village, data = darfur)

# runs sensemakr for sensitivity analysis
sensitivity &lt;- sensemakr(model, treatment = "directlyharmed",
                               benchmark_covariates = "female",
                               kd = 1:3)
# short description of results
sensitivity

# long description of results
summary(sensitivity)

# plot bias contour of point estimate
plot(sensitivity)

# plot bias contour of t-value
plot(sensitivity, sensitivity.of = "t-value")

# plot bias contour of lower limit of CI
plot(sensitivity, sensitivity.of = "lwr")

# plot bias contour of upper limit of CI
plot(sensitivity, sensitivity.of = "upr")

# plot extreme scenario
plot(sensitivity, type = "extreme")

# latex code for sensitivity table
ovb_minimal_reporting(sensitivity)

</code></pre>


</div>