<div class="container">

<table style="width: 100%;"><tr>
<td>as.surveydata</td>
<td style="text-align: right;">R Documentation</td>
</tr></table>
<h2>Coercion from and to surveydata.</h2>

<h3>Description</h3>

<p>Methods for creating <code>surveydata</code> objects, testing for class, and coercion from other objects.
</p>


<h3>Usage</h3>

<pre><code class="language-R">as.surveydata(
  x,
  sep = "_",
  exclude = "other",
  ptn = pattern(x),
  defaultPtn = list(sep = sep, exclude = exclude),
  renameVarlabels = FALSE
)

un_surveydata(x)
</code></pre>


<h3>Arguments</h3>

<table>
<tr style="vertical-align: top;">
<td><code>x</code></td>
<td>
<p>Object to coerce to surveydata</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>sep</code></td>
<td>
<p>Separator between question and sub-question names</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>exclude</code></td>
<td>
<p>Excludes from pattern search</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>ptn</code></td>
<td>
<p>A list with two elements, <code>sep</code> and <code>exclude</code>.  See <code>pattern()</code> and <code>which.q()</code> for more detail.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>defaultPtn</code></td>
<td>
<p>The default for <code>ptn</code>, if it doesn't exist in the object that is being coerced.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>renameVarlabels</code></td>
<td>
<p>If TRUE, turns variable.labels attribute into a named vector, using <code>names(x)</code> as names.</p>
</td>
</tr>
</table>
<h3>Details</h3>

<p>The function<code>un_surveydata()</code> removes the <code>surveydata</code> class from the object, leaving intact the other classes, e.g. <code>data.frame</code> or <code>tibble</code>
</p>


<h3>See Also</h3>

<p>surveydata-package, <code>is.surveydata()</code>
</p>


<h3>Examples</h3>

<pre><code class="language-R">library(surveydata)

# Create surveydata object

sdat &lt;- data.frame(
    id   = 1:4,
    Q1   = c("Yes", "No", "Yes", "Yes"),
    Q4_1 = c(1, 2, 1, 2), 
    Q4_2 = c(3, 4, 4, 3), 
    Q4_3 = c(5, 5, 6, 6), 
    Q10 = factor(c("Male", "Female", "Female", "Male")),
    crossbreak  = c("A", "A", "B", "B"), 
    weight      = c(0.9, 1.1, 0.8, 1.2)
)

varlabels(sdat) &lt;- c(
    "RespID",
    "Question 1", 
    "Question 4: red", "Question 4: green", "Question 4: blue", 
    "Question 10",
    "crossbreak",
    "weight"
  )

sv &lt;- as.surveydata(sdat, renameVarlabels = TRUE)

# Extract specific questions
sv[, "Q1"]
sv[, "Q4"]

# Query attributes
varlabels(sv)
pattern(sv)

# Find unique questions

questions(sv)
which.q(sv, "Q1")
which.q(sv, "Q4")

# Find question text
question_text(sv, "Q1")
question_text(sv, "Q4")

question_text_common(sv, "Q4")
question_text_unique(sv, "Q4")


# Basic operations on a surveydata object, illustrated with the example dataset membersurvey

class(membersurvey)

questions(membersurvey)

which.q(membersurvey, "Q1")
which.q(membersurvey, "Q3")
which.q(membersurvey, c("Q1", "Q3"))

question_text(membersurvey, "Q3")
question_text_unique(membersurvey, "Q3")
question_text_common(membersurvey, "Q3")

# Extracting columns from a surveydata object

head(membersurvey[, "Q1"])
head(membersurvey["Q1"])
head(membersurvey[, "Q3"])
head(membersurvey[, c("Q1", "Q3")])

# Note that the result is always a surveydata object, even if only one column is extracted

head(membersurvey[, "id"])
str(membersurvey[, "id"])

</code></pre>


</div>