<div class="container">

<table style="width: 100%;"><tr>
<td>airdas_effort</td>
<td style="text-align: right;">R Documentation</td>
</tr></table>
<h2>Summarize AirDAS effort</h2>

<h3>Description</h3>

<p>Chop AirDAS data into effort segments
</p>


<h3>Usage</h3>

<pre><code class="language-R">airdas_effort(x, ...)

## S3 method for class 'data.frame'
airdas_effort(x, ...)

## S3 method for class 'airdas_df'
airdas_effort(
  x,
  method = c("condition", "equallength", "section"),
  conditions = NULL,
  distance.method = c("greatcircle", "lawofcosines", "haversine", "vincenty"),
  num.cores = NULL,
  angle.min = 12,
  bft.max = 5,
  ...
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr style="vertical-align: top;">
<td><code>x</code></td>
<td>
<p><code>airdas_df</code> object; output from <code>airdas_process</code>, 
or a data frame that can be coerced to a <code>airdas_df</code> object</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>...</code></td>
<td>
<p>arguments passed to the chopping function specified using <code>method</code>,
such as <code>seg.km</code> or <code>seg.min.km</code></p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>method</code></td>
<td>
<p>character; method to use to chop AirDAS data into effort segments
Can be "condition", "equallength", "section", 
or any partial match thereof (case sensitive)</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>conditions</code></td>
<td>
<p>character vector of names of conditions 
to include in segdata output.
These values must be column names from the output of <code>airdas_process</code>,
e.g. 'Bft', 'CCover', etc. The default is <code>NULL</code>, 
in which case all relevant conditions will be included.
If <code>method == "condition"</code>, then these also are the conditions which
trigger segment chopping when they change.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>distance.method</code></td>
<td>
<p>character;
method to use to calculate distance between lat/lon coordinates.
Can be "greatcircle", "lawofcosines", "haversine", "vincenty",
or any partial match thereof (case sensitive). Default is "greatcircle"</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>num.cores</code></td>
<td>
<p>Number of CPUs to over which to distribute computations.
Defaults to <code>NULL</code>, which uses one fewer than the number of cores
reported by <code>detectCores</code>
Using 1 core likely will be faster for smaller datasets</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>angle.min</code></td>
<td>
<p>passed to <code>airdas_sight</code></p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>bft.max</code></td>
<td>
<p>numeric; the maximum Beaufort (column 'Bft') for which to 
mark a sighting as <code>TRUE</code> in 'included' (see Details). 
Default is 5.</p>
</td>
</tr>
</table>
<h3>Details</h3>

<p>This is the top-level function for chopping processed AirDAS data 
into modeling segments (henceforth 'segments'), and assigning sightings 
and related information (e.g., weather conditions) to each segment. 
This function returns data frames with all relevant information for the 
effort segments and associated sightings ('segdata' and 'sightinfo', respectively). 
Before chopping, the AirDAS data is filtered for events (rows) where either
the 'OnEffort' column is <code>TRUE</code> or the 'Event' column is "E" or "O". 
In other words, the data is filtered for continuous effort sections (henceforth 'effort sections'), 
where effort sections run from "T"/"R" to "E"/"O" events (inclusive), 
and then passed to the chopping function specified using <code>method</code>. 
All on effort events must not have <code>NA</code> Lat or Lon values; 
note Lat/Lon values for 1 events were 'filled in' in <code>airdas_process</code>.
</p>
<p>The following chopping methods are currently available: 
"condition", "equallength", and "section". 
When using the "condition" method, effort sections are chopped 
into segments every time a condition specified in <code>conditions</code> changes, 
thereby ensuring that the conditions are consistent across the entire segment.
See <code>airdas_chop_condition</code> for more details about this method, 
including arguments that must be passed to it via <code>...</code>.
</p>
<p>The "equallength" method consists of
chopping effort sections into equal-length segments of length <code>seg.km</code>, 
and doing a weighted average of the conditions for the length of that segment. 
See <code>airdas_chop_equallength</code> for more details about this method, 
including arguments that must be passed to it via <code>...</code>.
</p>
<p>The "section" method involves 'chopping' the effort into continuous effort sections,
i.e. each continuous effort section is a single effort segment.
See <code>airdas_chop_section</code> for more details about this method.
</p>
<p>The distance between the lat/lon points of subsequent events
is calculated using the method specified in <code>distance.method</code>.
If "greatcircle", <code>distance_greatcircle</code> is used,
while <code>distance</code> is used otherwise.
See <code>airdas_sight</code> for how the sightings are processed.
</p>
<p>The sightinfo data frame includes the column 'included',
which is used in <code>airdas_effort_sight</code> when summarizing
the number of sightings and animals for selected species.
<code>airdas_effort_sight</code> is a separate function to allow users to
personalize the 'included' values as desired for their specific analysis.
By default, i.e. in the output of this function, 'included' is <code>TRUE</code> if:
the sighting was a standard sighting (see <code>airdas_sight</code>) 
and in a Beaufort sea state less than or equal to 'btf.max'.
</p>


<h3>Value</h3>

<p>List of three data frames: 
</p>

<ul>
<li>
<p> segdata: one row for every segment, and columns for information including
unique segment number, event code that started the associated continuous effort section, 
the starting and ending line of the segment in the DAS file (stlin, endlin),
start/end/midpoint coordinates(lat1/lon1, lat2/lon2, and mlat/mlon, respectively),
the start/end/midpoint date/time of the segment (DateTime1, DateTime2, and mDateTime, respectively;
mDateTime is the average of DateTime1 and DateTime2), segment length (dist),
and conditions (e.g. Beaufort)
</p>
</li>
<li>
<p> sightinfo: details for all sightings in <code>x</code>, including: 
the unique segment number it is associated with, segment mid points (lat/lon), 
the 'included' column described in the Details section,
and the output information described in <code>airdas_sight</code>
</p>
</li>
<li>
<p> randpicks: see <code>airdas_chop_equallength</code>. 
<code>NULL</code> if using "condition" method.
</p>
</li>
</ul>
<h3>Examples</h3>

<pre><code class="language-R">y &lt;- system.file("airdas_sample.das", package = "swfscAirDAS")
y.proc &lt;- airdas_process(y)

airdas_effort(
  y.proc, method = "condition", conditions = "Bft", seg.min.km = 0.05, 
  num.cores = 1
)

y.rand &lt;- system.file("airdas_sample_randpicks.csv", package = "swfscAirDAS")
airdas_effort(
  y.proc, method = "equallength", conditions = c("Bft", "CCover"), 
  seg.km = 3, randpicks.load = y.rand, num.cores = 1
)

airdas_effort(y.proc, method = "section", num.cores = 1)

</code></pre>


</div>