<div class="container">

<table style="width: 100%;"><tr>
<td>getAveraging</td>
<td style="text-align: right;">R Documentation</td>
</tr></table>
<h2>
Convert design into averaging matrices.
</h2>

<h3>Description</h3>

<p>getAveraging(des) converts a design (either a vector or a matrix) 
into averaging matrix notation (from the paper).  
For a response vector Y, (B Y)[t] is the mean of all responses corresponding to the treatment at time t, 
and (B-G)Y [t] is the averaged-removed treatment mean. 
</p>


<h3>Usage</h3>

<pre><code class="language-R">getAveraging(des)
</code></pre>


<h3>Arguments</h3>

<table><tr style="vertical-align: top;">
<td><code>des</code></td>
<td>

<p>Either a vector or a matrix representation of design (see designVec2Mat and designMat2Vec). 
</p>
</td>
</tr></table>
<h3>Value</h3>

<p>A list with components
</p>
<table>
<tr style="vertical-align: top;">
<td><code>m</code></td>
<td>
<p>The number of treatments</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>ns</code></td>
<td>
<p>An m-length vector with the number of repeats for each treatment. For balanced designs with n repeats, ns=rep(n,m)</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>B</code></td>
<td>
<p>The averaging matrix according to the design</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>G</code></td>
<td>
<p>1/T for T the number of measurements</p>
</td>
</tr>
</table>
<h3>Author(s)</h3>

<p>Yuval Benjamini
</p>


<h3>References</h3>

<p>Benjamini and Yu (2013).
</p>


<h3>Examples</h3>

<pre><code class="language-R">data(design_vec)

design_avg = getAveraging(design_vec)
rand_resp = rnorm(length(design_vec))

global_mean = mean(rand_resp[design_vec != 0 ])
first_treatment_mean=  mean(rand_resp[design_vec == design_vec[1]])
cat((design_avg$B %*% rand_resp)[1], first_treatment_mean )

cat(((design_avg$B-design_avg$G) %*% rand_resp)[1], first_treatment_mean- global_mean)
</code></pre>


</div>