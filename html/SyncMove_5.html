<div class="container">

<table style="width: 100%;"><tr>
<td>syncSubsample</td>
<td style="text-align: right;">R Documentation</td>
</tr></table>
<h2>
Subsamples Temporal Data to Synchronal Events    
</h2>

<h3>Description</h3>

<p>Subsamples temporal records of different entities to a data set
which only includes records that occur at predefined and equally
spaced synchronization events.  A subsample is created for each
possible combination of entities (unless restricted by argument
<em>minEntities</em>, <em>maxEntities</em> or <em>mustEntities</em>).
</p>


<h3>Usage</h3>

<pre><code class="language-R">    syncSubsample(
        x,
        startSearch = min(as.character(x$study.local.timestamp)),
        endSearch = max(as.character(x$study.local.timestamp)),
        syncIntervalSecs = 3600,
        syncAccuracySecs = 60,
        minEntities = 2,
        maxEntities = length(unique(x$individual.local.identifier)),
        mustEntities = NULL,
        completeSyncsOnly = TRUE,
        fast = TRUE
    )
</code></pre>


<h3>Arguments</h3>

<table>
<tr style="vertical-align: top;">
<td><code>x</code></td>
<td>

<p>a data frame with the following columns (further columns are
allowed, but will be ignored):
</p>
<p><em>individual.local.identifier</em>: character, entity ID
</p>
<p><em>study.local.timestamp</em>: character, time of format
"YYYY-MM-DD HH:MM:SS"
</p>
<p>Such a data frame can be created by importing data from
www.movebank.org.
</p>
<p>If the output is to be processed with function <code>mci</code> the
data frame must also contain the following columns:
</p>
<p><em>utm.easting</em>: numeric, planar x coordinate.  Although the
name indicates UTM coordinates other planar coordinate systems
are also allowed.
</p>
<p><em>utm.northing</em>: analogue to <em>utm.easting</em>
</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>startSearch</code></td>
<td>

<p>character, time of format "YYYY-MM-DD HH:MM:SS" as the start
time for the creation of synchronization events.  Default is
the minimum timestamp in the data.	
</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>endSearch</code></td>
<td>

<p>analogue to <em>startSearch</em>.
</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>syncIntervalSecs</code></td>
<td>

<p>numeric, interval between synchronization events in seconds.
(e.g., <em>60*60*24*3</em> defines a three day interval)	
</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>syncAccuracySecs</code></td>
<td>

<p>numeric, accuracy for synchronization events in seconds.
(e.g., <em>60*60*2</em> defines a two hour accuracy)	
</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>minEntities</code></td>
<td>

<p>numeric, minimum number of entities to be included in the
synchronization events.	
</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>maxEntities</code></td>
<td>

<p>analogue to <em>minEntities</em>
</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>mustEntities</code></td>
<td>

<p>character, vector of IDs of entities which have to be included in
the synchronization events.	
</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>completeSyncsOnly</code></td>
<td>

<p>boolean, if TRUE (default) only events will appear in the output
where each entity of a given combination of entities has a
record.  If FALSE also events with no records for some entities
will appear in the output.	
</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>fast</code></td>
<td>

<p>boolean, if TRUE (default) synchronized subsamples are created
only for those combinations of entities that seem to be the most
prominent in the input data.  If FALSE synchronized subsamples
are created for all combinations of entities in the input data.
See details.	
</p>
</td>
</tr>
</table>
<h3>Details</h3>

<p>The synchronization events are created with a start time as the first
synchronization event (argument <em>startSearch</em>) and an interval
between following synchronization events.  Each synchronization
event has an accuracy.  All records of a given combination of
entities which fall into <em>synchronization events + - accuracy</em>
are selected for the subsample.  If there is more than one record
for an entity in a <em>synchronization event + - accuracy</em> the
record that is closest to the synchronization event is selected. The
arguments <em>startSearch</em>, <em>syncIntervalSecs</em> and
<em>syncAccuracySecs</em> must be chosen with respect to the input
data in order to get good synchronization results.
</p>
<p>Running the function with <em>fast = FALSE</em> one can find the
combination of entities with the maximum number of synchronization
events.  However, an input data set with more then 8 to 10 entities
should be processed with <em>fast = TRUE</em>.  Otherwise the
calculations can take a long time.  (For input data with 10 entities
there are more than 1000 possible combinations of entities.)    
</p>
<p>The synchronization events are numbered from 1 to n.  These numbers
are referred to as sync IDs.  If no records are present at a given
synchronization event the ID for this event will not appear in the
output subsample. Thus the sync IDs in the subsample show if
subsequent pairs of synchronized events exist (e.g., sync ID
1 and 2, sync ID 2 and 3, ...).  Such pairs can be used to calculate
the Movement Coordination Index, see function <code>mci</code>.
</p>


<h3>Value</h3>

<p>List, returns a list with 3 elements named <em>overview</em>,
<em>data</em>, and <em>entities</em>.    
</p>
<table>
<tr style="vertical-align: top;">
<td><code>overview</code></td>
<td>

<p>An overview of the synchronized subsamples for all possible
combinations of entities.  Each row refers to the respective
element in the <em>data</em> and <em>entities</em> lists (see
below).  E.g., for the data described in row 1 see
&lt;output&gt;$data[[1]] and &lt;output&gt;$entities[[1]].  The overview
table contains the following columns:
</p>
<p><em>numberOfEntities</em>: the number of entities used for
creating the subsample
</p>
<p><em>numberOfSyncs</em>: number of synchronized events in the
subsample
</p>
<p><em>numberOfSubsequentSyncs</em>: number subsequent synchronized
events (see details)
</p>
<p><em>firstEvent</em>: time of first synchronization event
</p>
<p><em>lastEvent</em>: analogue to <em>lastEvent</em>
</p>
<p><em>syncIntervalSecs</em>: interval used for creating the
synchronization events
</p>
<p><em>syncAccuracySecs</em>: accuracy of the synchronization events
</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>data</code></td>
<td>

<p>A list containing the subsampled data described in the overview.
The subsamples have the same columns as the input data set plus
the additional columns <em>syncTime</em> and <em>syncID</em> for the
time and ID of the synchronization events respectively.	
</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>entities</code></td>
<td>

<p>A list containing the entity combinations used for creating the
synchronized subsamples.	
</p>
</td>
</tr>
</table>
<h3>Author(s)</h3>

<p>Martin Rimmler (maintainer, martin.rimmler[AT]gmail.com),
Thomas Mueller
</p>


<h3>Examples</h3>

<pre><code class="language-R">    # load example data
    data(gazelleRelocations)

    # subsample sychronal events
    syncRelocs &lt;- syncSubsample(x = gazelleRelocations,
                                startSearch = "2007-09-05 00:00:00",
                                syncIntervalSecs = 3600*24*16,
                                syncAccuracySecs = 3600*24)

    # show results overview
    syncRelocs$overview

    # show first subsample
    syncRelocs$data[[1]]

    # show entities of first subsample
    syncRelocs$entities[[1]]
</code></pre>


</div>