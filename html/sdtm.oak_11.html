<div class="container">

<table style="width: 100%;"><tr>
<td>assign_no_ct</td>
<td style="text-align: right;">R Documentation</td>
</tr></table>
<h2>Derive an SDTM variable</h2>

<h3>Description</h3>


<ul>
<li> <p><code>assign_no_ct()</code> maps a variable in a raw dataset to a target SDTM
variable that has no terminology restrictions.
</p>
</li>
<li> <p><code>assign_ct()</code> maps a variable in a raw dataset to a target SDTM variable
following controlled terminology recoding.
</p>
</li>
</ul>
<h3>Usage</h3>

<pre><code class="language-R">assign_no_ct(
  tgt_dat = NULL,
  tgt_var,
  raw_dat,
  raw_var,
  id_vars = oak_id_vars()
)

assign_ct(
  tgt_dat = NULL,
  tgt_var,
  raw_dat,
  raw_var,
  ct_spec,
  ct_clst,
  id_vars = oak_id_vars()
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr style="vertical-align: top;">
<td><code>tgt_dat</code></td>
<td>
<p>Target dataset: a data frame to be merged against <code>raw_dat</code> by
the variables indicated in <code>id_vars</code>. This parameter is optional, see
section Value for how the output changes depending on this argument value.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>tgt_var</code></td>
<td>
<p>The target SDTM variable: a single string indicating the name
of variable to be derived.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>raw_dat</code></td>
<td>
<p>The raw dataset (dataframe); must include the
variables passed in <code>id_vars</code> and <code>raw_var</code>.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>raw_var</code></td>
<td>
<p>The raw variable: a single string indicating the name of the
raw variable in <code>raw_dat</code>.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>id_vars</code></td>
<td>
<p>Key variables to be used in the join between the raw dataset
(<code>raw_dat</code>) and the target data set (<code>raw_dat</code>).</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>ct_spec</code></td>
<td>
<p>Study controlled terminology specification: a dataframe with a
minimal set of columns, see <code>ct_spec_vars()</code> for details.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>ct_clst</code></td>
<td>
<p>A codelist code indicating which subset of the controlled
terminology to apply in the derivation.</p>
</td>
</tr>
</table>
<h3>Value</h3>

<p>The returned data set depends on the value of <code>tgt_dat</code>:
</p>

<ul>
<li>
<p> If no target dataset is supplied, meaning that <code>tgt_dat</code> defaults to
<code>NULL</code>, then the returned data set is <code>raw_dat</code>, selected for the variables
indicated in <code>id_vars</code>, and a new extra column: the derived variable, as
indicated in <code>tgt_var</code>.
</p>
</li>
<li>
<p> If the target dataset is provided, then it is merged with the raw data set
<code>raw_dat</code> by the variables indicated in <code>id_vars</code>, with a new column: the
derived variable, as indicated in <code>tgt_var</code>.
</p>
</li>
</ul>
<h3>Examples</h3>

<pre><code class="language-R">
md1 &lt;-
  tibble::tibble(
    oak_id = 1:14,
    raw_source = "MD1",
    patient_number = 101:114,
    MDIND = c(
      "NAUSEA", "NAUSEA", "ANEMIA", "NAUSEA", "PYREXIA",
      "VOMITINGS", "DIARHHEA", "COLD",
      "FEVER", "LEG PAIN", "FEVER", "COLD", "COLD", "PAIN"
    )
  )

assign_no_ct(
  tgt_var = "CMINDC",
  raw_dat = md1,
  raw_var = "MDIND"
)

cm_inter &lt;-
  tibble::tibble(
    oak_id = 1:14,
    raw_source = "MD1",
    patient_number = 101:114,
    CMTRT = c(
      "BABY ASPIRIN",
      "CORTISPORIN",
      "ASPIRIN",
      "DIPHENHYDRAMINE HCL",
      "PARCETEMOL",
      "VOMIKIND",
      "ZENFLOX OZ",
      "AMITRYPTYLINE",
      "BENADRYL",
      "DIPHENHYDRAMINE HYDROCHLORIDE",
      "TETRACYCLINE",
      "BENADRYL",
      "SOMINEX",
      "ZQUILL"
    ),
    CMROUTE = c(
      "ORAL",
      "ORAL",
      NA,
      "ORAL",
      "ORAL",
      "ORAL",
      "INTRAMUSCULAR",
      "INTRA-ARTERIAL",
      NA,
      "NON-STANDARD",
      "RANDOM_VALUE",
      "INTRA-ARTICULAR",
      "TRANSDERMAL",
      "OPHTHALMIC"
    )
  )

# Controlled terminology specification
(ct_spec &lt;- read_ct_spec_example("ct-01-cm"))

assign_ct(
  tgt_dat = cm_inter,
  tgt_var = "CMINDC",
  raw_dat = md1,
  raw_var = "MDIND",
  ct_spec = ct_spec,
  ct_clst = "C66729"
)

</code></pre>


</div>