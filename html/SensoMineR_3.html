<div class="container">

<table style="width: 100%;"><tr>
<td>averagetable</td>
<td style="text-align: right;">R Documentation</td>
</tr></table>
<h2>Computes a (products,descriptors) matrix</h2>

<h3>Description</h3>

<p>Returns the (products,descriptors) matrix with entries the means over panelists and sessions. <br>
Computes analyses of variance automatically for a given model and a set of quantitative variables.
Returns a data matrix where each row is associated with each
category of a given categorical variable (in most cases, the categorical variable is the 
<em>product</em> variable), each column is associated with a quantitative variable, and each cell is
the corresponding adjusted mean or mean.<br>
Computes the average data table with respect to a categorical variable and a set 
of quantitative variables.
</p>


<h3>Usage</h3>

<pre><code class="language-R">averagetable(donnee, formul, subset = NULL, method = "coeff", 
    firstvar, lastvar = ncol(donnee), file = NULL)
</code></pre>


<h3>Arguments</h3>

<table>
<tr style="vertical-align: top;">
<td><code>donnee</code></td>
<td>
<p>a data frame made up of at least two qualitative variables 
(<em>product</em>, <em>panelist</em>) and a set of quantitative variables (sensory descriptors)</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>formul</code></td>
<td>
<p>the model with respect to which the factor levels of the categorical variable of interest are calculated</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>subset</code></td>
<td>
<p>an optional vector specifying a subset of observations to be used in the fitting process</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>method</code></td>
<td>
<p>two possibilities, "coeff" (by default) or "mean"</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>firstvar</code></td>
<td>
<p>the position of the first endogenous variable</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>lastvar</code></td>
<td>
<p>the position of the last endogenous variable (by default the last column of <code>donnee</code>)</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>file</code></td>
<td>
<p>the name of the output file (by default, NULL and results are not in a file)</p>
</td>
</tr>
</table>
<h3>Details</h3>

<p>The <code>formul</code> parameter can be filled in for a given analysis of variance model.
The <code>formul</code> parameter must begin with the categorical variable of interest (generally the <em>product</em> variable)
followed by the different other factors (and eventually their interactions) of interest. Classicially, one can used 
<code>formul = "~Product+Panelist+Product:Panelist"</code>.
In practise and in our type of applications, this function is very useful to obtain a data matrix 
in which rows represent products and columns represent sensory descriptors. <br>
If "mean" is assigned to the <code>method</code> parameter, then the <code>formul</code> parameter
can be restricted to the sole variable of interest (generally the <em>product</em> variable). <br>
If data are balanced, the two options "mean" and "coeff" give the same results.
</p>


<h3>Value</h3>

<p>Return a matrix of dimension (<em>p,q</em>), where <em>p</em> is the number of categories of the qualitative variable 
of interest (in most cases, <em>p</em> is the number of products)
and <em>q</em> is the number of (sensory) descriptors. If "coeff" is assigned to the 
<code>method</code> parameter then the function <em>averagetable</em> returns the matrix
of the adjusted means; if "mean" is assigned to the <code>method</code> parameter 
then the function averagetable returns the matrix of the means per category.
</p>


<h3>Author(s)</h3>

<p>Francois Husson <a href="mailto:francois.husson@institut-agro.fr">francois.husson@institut-agro.fr</a></p>


<h3>References</h3>

<p>P. Lea, T. Naes, M. Rodbotten. <em>Analysis of variance for sensory data</em>. <br>
H. Sahai, M. I. Ageel. <em>The analysis of variance</em>.
</p>


<h3>See Also</h3>

 <p><code>aov</code></p>


<h3>Examples</h3>

<pre><code class="language-R">data(chocolates)
resaverage&lt;-averagetable(sensochoc, formul = "~Product+Panelist",
    firstvar = 5)
coltable(magicsort(resaverage), level.upper = 6,level.lower = 4,
    main.title = "Average by chocolate")

res.pca = PCA(resaverage, scale.unit = TRUE)
</code></pre>


</div>