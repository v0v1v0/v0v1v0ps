<div class="container">

<table style="width: 100%;"><tr>
<td>renege</td>
<td style="text-align: right;">R Documentation</td>
</tr></table>
<h2>Renege on some Condition</h2>

<h3>Description</h3>

<p>Activities for leaving with some probability, or for setting or unsetting a
timer or a signal after which the arrival will abandon.
</p>


<h3>Usage</h3>

<pre><code class="language-R">leave(.trj, prob, out = NULL, keep_seized = TRUE, ..., tag)

renege_in(.trj, t, out = NULL, keep_seized = FALSE, ..., tag)

renege_if(.trj, signal, out = NULL, keep_seized = FALSE, ..., tag)

renege_abort(.trj, ..., tag)
</code></pre>


<h3>Arguments</h3>

<table>
<tr style="vertical-align: top;">
<td><code>.trj</code></td>
<td>
<p>the trajectory object.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>prob</code></td>
<td>
<p>a probability or a function returning a probability.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>out</code></td>
<td>
<p>optional sub-trajectory in case of reneging.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>keep_seized</code></td>
<td>
<p>whether to keep already seized resources. By default, all
resources are released.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>...</code></td>
<td>
<p>unused.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>tag</code></td>
<td>
<p>activity tag name to perform named rollbacks (see
<code>rollback</code>) or just to better identify your activities.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>t</code></td>
<td>
<p>timeout to trigger reneging, accepts either a numeric or a callable
object (a function) which must return a numeric.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>signal</code></td>
<td>
<p>signal to trigger reneging, accepts either a string or a
callable object (a function) which must return a string.</p>
</td>
</tr>
</table>
<h3>Details</h3>

<p>Arrivals that leave the trajectory will set the <code>finished</code> flag
to <code>FALSE</code> in the output of <code>get_mon_arrivals</code>. Unfinished
arrivals can be handled with a drop-out trajectory that can be set using the
optional argument <code>out</code> or the <code>handle_unfinished</code> activity.
</p>
<p>Note that, for historical reasons, <code>leave</code> has <code>keep_seized=TRUE</code>
by default, while <code>renege_*</code> does not.
</p>
<p>Note that <code>renege_if</code> works similarly to <code>trap</code>,
but in contrast to that, reneging is triggered even if the arrival is waiting
in a queue or is part of a non-permanent <code>batch</code>.
</p>


<h3>Value</h3>

<p>Returns the trajectory object.
</p>


<h3>See Also</h3>

<p><code>handle_unfinished</code>
</p>
<p><code>send</code>
</p>


<h3>Examples</h3>

<pre><code class="language-R">## leave with some probability
set.seed(1234)

traj &lt;- trajectory() %&gt;%
  log_("leave with some probability") %&gt;%
  leave(function() runif(1) &lt; 0.5) %&gt;%
  log_("didn't leave")

simmer() %&gt;%
  add_generator("dummy", traj, at(0, 1)) %&gt;%
  run() %&gt;% invisible

## reneging after some time
bank &lt;- trajectory() %&gt;%
  log_("here I am") %&gt;%
  # renege in 5 minutes
  renege_in(
    5,
    out = trajectory() %&gt;%
      log_("lost my patience. Reneging...")) %&gt;%
  seize("clerk") %&gt;%
  # stay if I'm being attended within 5 minutes
  renege_abort() %&gt;%
  log_("I'm being attended") %&gt;%
  timeout(10) %&gt;%
  release("clerk") %&gt;%
  log_("finished")

simmer() %&gt;%
  add_resource("clerk", 1) %&gt;%
  add_generator("customer", bank, at(0, 1)) %&gt;%
  run() %&gt;% invisible

</code></pre>


</div>