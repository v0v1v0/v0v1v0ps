<div class="container">

<table style="width: 100%;"><tr>
<td>simplifyColorData</td>
<td style="text-align: right;">R Documentation</td>
</tr></table>
<h2>Simplify Color Data by ID</h2>

<h3>Description</h3>

<p>Simplify multiple Munsell color observations associated with each horizon.
</p>
<p>This function is mainly intended for the processing of NASIS pedon/horizon
data which may or may not contain multiple colors per horizon/moisture
status combination. <code>simplifyColorData</code> will "mix" multiple colors
associated with horizons in <code>d</code>, according to IDs specified by
<code>id.var</code>, using "weights" (area percentages) specified by the <code>wt</code>
argument to <code>mix_and_clean_colors</code>.
</p>
<p>Note that this function doesn't actually simulate the mixture of pigments on
a surface, rather, "mixing" is approximated via weighted average in the
CIELAB colorspace.
</p>
<p>The <code>simplifyColorData</code> function can be applied to data sources other
than NASIS by careful use of the <code>id.var</code> and <code>wt</code> arguments.
However, <code>d</code> must contain Munsell colors split into columns named
"colorhue", "colorvalue", and "colorchroma". In addition, the moisture state
("Dry" or "Moist") must be specified in a column named "colormoistst".
</p>
<p>The <code>mix_and_clean_colors</code> function can be applied to arbitrary data
sources as long as <code>x</code> contains sRGB coordinates in columns named "r",
"g", and "b". This function should be applied to chunks of rows within which
color mixtures make sense.
</p>
<p>Examples:
</p>

<ul>
<li> <p><a href="http://ncss-tech.github.io/AQP/soilDB/KSSL-demo.html">KSSL data</a>
</p>
</li>
<li> <p><a href="http://ncss-tech.github.io/AQP/soilDB/mixing-soil-color-data.html">soil color mixing tutorial</a>
</p>
</li>
</ul>
<h3>Usage</h3>

<pre><code class="language-R">simplifyColorData(d, id.var = "phiid", wt = "colorpct", bt = FALSE)
</code></pre>


<h3>Arguments</h3>

<table>
<tr style="vertical-align: top;">
<td><code>d</code></td>
<td>
<p>a <code>data.frame</code> object, typically returned from NASIS, see
details</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>id.var</code></td>
<td>
<p>character vector with the name of the column containing an ID
that is unique among all horizons in <code>d</code></p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>wt</code></td>
<td>
<p>a character vector with the name of the column containing color
weights for mixing</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>bt</code></td>
<td>
<p>logical, should the mixed sRGB representation of soil color be
transformed to closest Munsell chips? This is performed by <code>aqp::col2Munsell()</code></p>
</td>
</tr>
</table>
<h3>Author(s)</h3>

<p>D.E. Beaudette
</p>


</div>