<div class="container">

<table style="width: 100%;"><tr>
<td>reSummarise</td>
<td style="text-align: right;">R Documentation</td>
</tr></table>
<h2>Run a summarise step for results that have been saved to the hard drive</h2>

<h3>Description</h3>

<p>When <code>runSimulation()</code> uses the option <code>save_results = TRUE</code>
the R replication results from the Generate-Analyse functions are
stored to the hard drive. As such, additional summarise components
may be required at a later time, whereby the respective <code>.rds</code> files
must be read back into R to be summarised. This function performs
the reading of these files, application of a provided summarise function,
and final collection of the respective results.
</p>


<h3>Usage</h3>

<pre><code class="language-R">reSummarise(
  summarise,
  dir = NULL,
  files = NULL,
  results = NULL,
  Design = NULL,
  fixed_objects = NULL,
  boot_method = "none",
  boot_draws = 1000L,
  CI = 0.95,
  prefix = "results-row"
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr style="vertical-align: top;">
<td><code>summarise</code></td>
<td>
<p>a summarise function to apply to the read-in files.
See <code>runSimulation</code> for details</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>dir</code></td>
<td>
<p>directory pointing to the .rds files to be
read-in that were saved from <code>runSimulation(..., save_results=TRUE)</code>.
If <code>NULL</code>, it is assumed the current working directory contains
the .rds files</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>files</code></td>
<td>
<p>(optional) names of files to read-in. If <code>NULL</code> all files
located within <code>dir</code> will be used</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>results</code></td>
<td>
<p>(optional) the results of <code>runSimulation</code> when no
<code>summarise</code> function was provided. Can be either a <code>tibble</code> or
<code>matrix</code> (indicating that exactly one design condition was evaluated),
or a <code>list</code> of <code>matrix</code>/<code>tibble</code>
objects indicating that multiple conditions were performed with no summarise evaluation.
</p>
<p>Alternatively, if <code>store_results = TRUE</code> in the <code>runSimulation()</code> execution then
the final SimDesign object may be passed, where the generate-analyse information will be
extracted from the object instead</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>Design</code></td>
<td>
<p>(optional) if <code>results</code> input used, and design condition information
important in the summarise step, then the original <code>design</code> object from
<code>runSimulation</code> should be included</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>fixed_objects</code></td>
<td>
<p>(optional) see <code>runSimulation</code> for details</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>boot_method</code></td>
<td>
<p>method for performing non-parametric bootstrap confidence intervals
for the respective meta-statistics computed by the <code>Summarise</code> function.
See <code>runSimulation</code> for details</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>boot_draws</code></td>
<td>
<p>number of non-parametric bootstrap draws to sample for the <code>summarise</code>
function after the generate-analyse replications are collected. Default is 1000</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>CI</code></td>
<td>
<p>bootstrap confidence interval level (default is 95%)</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>prefix</code></td>
<td>
<p>character indicating prefix used for stored files</p>
</td>
</tr>
</table>
<h3>Author(s)</h3>

<p>Phil Chalmers <a href="mailto:rphilip.chalmers@gmail.com">rphilip.chalmers@gmail.com</a>
</p>


<h3>References</h3>

<p>Chalmers, R. P., &amp; Adkins, M. C.  (2020). Writing Effective and Reliable Monte Carlo Simulations
with the SimDesign Package. <code>The Quantitative Methods for Psychology, 16</code>(4), 248-280.
<a href="https://doi.org/10.20982/tqmp.16.4.p248">doi:10.20982/tqmp.16.4.p248</a>
</p>
<p>Sigal, M. J., &amp; Chalmers, R. P. (2016). Play it again: Teaching statistics with Monte
Carlo simulation. <code>Journal of Statistics Education, 24</code>(3), 136-156.
<a href="https://doi.org/10.1080/10691898.2016.1246953">doi:10.1080/10691898.2016.1246953</a>
</p>


<h3>Examples</h3>

<pre><code class="language-R">
Design &lt;- createDesign(N = c(10, 20, 30))

Generate &lt;- function(condition, fixed_objects) {
    dat &lt;- with(condition, rnorm(N, 10, 5)) # distributed N(10, 5)
    dat
}

Analyse &lt;- function(condition, dat, fixed_objects) {
    ret &lt;- c(mean=mean(dat), median=median(dat)) # mean/median of sample data
    ret
}

Summarise &lt;- function(condition, results, fixed_objects){
    colMeans(results)
}

## Not run: 
# run the simulation
runSimulation(design=Design, replications=50,
              generate=Generate, analyse=Analyse,
              summarise=Summarise, save_results=TRUE,
              save_details = list(save_results_dirname='simresults'))


res &lt;- reSummarise(Summarise, dir = 'simresults/')
res

Summarise2 &lt;- function(condition, results, fixed_objects){
    ret &lt;- c(mean_ests=colMeans(results), SE=colSDs(results))
    ret
}

res2 &lt;- reSummarise(Summarise2, dir = 'simresults/')
res2

SimClean(dir='simresults/')


## End(Not run)

###
# Similar, but with results stored within the final object

res &lt;- runSimulation(design=Design, replications=50, store_results = TRUE,
                     generate=Generate, analyse=Analyse, summarise=Summarise)
res

# same summarise but with bootstrapping
res2 &lt;- reSummarise(Summarise, results = res, boot_method = 'basic')
res2

</code></pre>


</div>