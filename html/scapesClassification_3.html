<div class="container">

<table style="width: 100%;"><tr>
<td>anchor.svo</td>
<td style="text-align: right;">R Documentation</td>
</tr></table>
<h2>Anchor cells from spatial vector objects</h2>

<h3>Description</h3>

<p>Returns a vector of raster cell numbers extracted at the locations of a
spatial object.
</p>


<h3>Usage</h3>

<pre><code class="language-R">anchor.svo(
  r,
  dsn,
  only_NAs = FALSE,
  fill_NAs = FALSE,
  plot = FALSE,
  saveRDS = NULL,
  writeRaster = NULL,
  overWrite = FALSE
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr style="vertical-align: top;">
<td><code>r</code></td>
<td>
<p>single or multi-layer raster of the class <code>SpatRaster</code> (see
<code>help("rast", terra)</code>).</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>dsn</code></td>
<td>
<p>data source name (filename) or an <code>sf</code>, a <code>Spatial</code> or a
<code>SpatVector</code> object.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>only_NAs</code></td>
<td>
<p>logic, cell numbers extracted only for incomplete cases at
the locations of a spatial object. Incomplete cases are cells having an
NA-value in one or more layers of the raster object.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>fill_NAs</code></td>
<td>
<p>logic, cell numbers extracted at the locations of a spatial
object <em>and</em> at contiguous locations that are incomplete cases.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>plot</code></td>
<td>
<p>logic, plot anchor cells.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>saveRDS</code></td>
<td>
<p>filename, if a file name is provided save the anchor cell
vector as an RDS file.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>writeRaster</code></td>
<td>
<p>filename, if a raster name is provided save the anchor
cell vector as a raster file.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>overWrite</code></td>
<td>
<p>logic, if RDS and raster names already exist, existing files
are overwritten.</p>
</td>
</tr>
</table>
<h3>Details</h3>

<p>When the arguments <code>only_NA</code> and <code>fill_NAs</code> are FALSE the
numeric output is equivalent to the output of the function
<code>terra::extract(r, dsn, cells = TRUE)[["cell"]]</code>.
</p>


<h3>Value</h3>

<p>Numeric vector of raster cell numbers.
</p>


<h3>Examples</h3>

<pre><code class="language-R"># DUMMY DATA
################################################################################
# LOAD LIBRARIES AND DATA
library(scapesClassification)
library(terra)

# CELL NUMBERS OF A DUMMY RASTER (7X7)
r_cn &lt;- terra::rast(matrix(1:49, nrow = 7, byrow = TRUE), extent=c(0,1,0,1))

# SET SOME NA-VALUE
r_cn[c(9, 10, 11, 17, 18)] &lt;- NA

# BULD A DUMMY POLYGON
pol &lt;- rbind(c(0,0.95), c(0.28,1), c(0.24, 0.72), c(0.05,0.72), c(0,0.95))
pol &lt;- terra::vect(pol, type="polygons")
################################################################################

################################################################################
# ANCHOR.SVO
################################################################################
ac1 &lt;- anchor.svo(r_cn, pol, only_NAs = FALSE, fill_NAs = FALSE)
ac2 &lt;- anchor.svo(r_cn, pol, only_NAs = TRUE,  fill_NAs = FALSE)
ac3 &lt;- anchor.svo(r_cn, pol, only_NAs = FALSE, fill_NAs = TRUE)
ac4 &lt;- anchor.svo(r_cn, pol, only_NAs = TRUE,  fill_NAs = TRUE)

# RASTER CELL NUMBERS 2 RASTER
r1 &lt;- r_cn; r1[] &lt;- NA; r1[ac1] &lt;- 1
r2 &lt;- r_cn; r2[] &lt;- NA; r2[ac2] &lt;- 1
r3 &lt;- r_cn; r3[] &lt;- NA; r3[ac3] &lt;- 1
r4 &lt;- r_cn; r4[] &lt;- NA; r4[ac4] &lt;- 1
################################################################################

################################################################################
# PLOTS
################################################################################
oldpar &lt;- par(mfrow = c(2,2))
m = c(1, 3.5, 2.5, 3.5)

# 1)
plot(r1, type="classes", col="#78b2c4", colNA="grey", axes=FALSE, legend=FALSE, asp=NA, mar=m)
plot(pol, add = TRUE, lwd = 2.5, border = "red")
text(r_cn)
mtext(side=3, line=1, cex=0.9, adj=0, "only_NAs = FALSE")
mtext(side=3, line=0, cex=0.9, adj=0, "fill_NAs = FALSE")
ac1 &lt;- paste("ac =", paste0(sort(ac1), collapse = ","))
mtext(side=1, line=0, cex=0.9, adj=0, ac1)
legend("bottomleft", ncol = 1, bg = "white",
       legend = c("Anchor cell (ac)", "Polygon"), fill = c("#78b2c4", "red"))

# 2)
plot(r2, type="classes", col="#78b2c4", colNA="grey", axes=FALSE,legend=FALSE, asp=NA, mar=m)
plot(pol, add = TRUE, lwd = 2.5, border = "red")
text(r_cn)
mtext(side=3, line=1, cex=0.9, adj=0, "only_NAs = TRUE")
mtext(side=3, line=0, cex=0.9, adj=0, "fill_NAs = FALSE")
ac2 &lt;- paste("ac =", paste0(sort(ac2), collapse = ","))
mtext(side=1, line=0, cex=0.9, adj=0, ac2)
legend("bottomleft", ncol = 1, bg = "white",
       legend = c("Anchor cell (ac)", "Polygon"), fill = c("#78b2c4", "red"))

# 3)
plot(r3, type="classes", col="#78b2c4", colNA="grey", axes=FALSE, legend=FALSE, asp=NA, mar=m)
plot(pol, add = TRUE, lwd = 2.5, border = "red")
text(r_cn)
mtext(side=3, line=1, cex=0.9, adj=0, "only_NAs = FALSE")
mtext(side=3, line=0, cex=0.9, adj=0, "fill_NAs = TRUE")
ac3 &lt;- paste("ac =", paste0(sort(ac3), collapse = ","))
mtext(side=1, line=0, cex=0.9, adj=0, ac3)
legend("bottomleft", ncol = 1, bg = "white",
       legend = c("Anchor cell (ac)", "Polygon"), fill = c("#78b2c4", "red"))

# 4)
plot(r4, type="classes", col="#78b2c4", colNA="grey", axes=FALSE, legend=FALSE, asp=NA, mar=m)
plot(pol, add = TRUE, lwd = 2.5, border = "red")
text(r_cn)
mtext(side=3, line=1, cex=0.9, adj=0, "only_NAs = TRUE")
mtext(side=3, line=0, cex=0.9, adj=0, "fill_NAs = TRUE")
ac4 &lt;- paste("ac =", paste0(sort(ac4), collapse = ","))
mtext(side=1, line=0, cex=0.9, adj=0, ac4)
legend("bottomleft", ncol = 1, bg = "white",
       legend = c("Anchor cell (ac)", "Polygon"), fill = c("#78b2c4", "red"))
par(oldpar)
</code></pre>


</div>