<div class="container">

<table style="width: 100%;"><tr>
<td>IdMapConsumer</td>
<td style="text-align: right;">R Documentation</td>
</tr></table>
<h2>Ideal Mapping by categories (IdMapConsumer)</h2>

<h3>Description</h3>

<p>Create the ideal map and plot the ideal areas of the categories of qualitative variables. 
And perform 2 tests: a global test in order to highlight the significance of the difference between ideals of all the categories of the same variable; 
a pair comparison test to highlight the significance between 2 categories of the same variable.</p>


<h3>Usage</h3>

<pre><code class="language-R">IdMapConsumer(dataset.id, dataset.signa, col.p, col.j, col.lik, 
	num.col.var.signa, conf.level=0.95, id.recogn, nbchoix = NULL,
    nbsimul = 500, alpha = 0.05, coord = c(1, 2), precision = 0.1,
    levels.contour = NULL, color = FALSE, simusigni = 500) 
	</code></pre>


<h3>Arguments</h3>

<table>
<tr style="vertical-align: top;">
<td><code>dataset.id</code></td>
<td>
<p>A matrix with at least two qualitative variables (<em>consumer</em> and <em>products</em>)
and a set of quantitative variables containing at least 2*A variables (for both <em>perceived</em> and <em>ideal</em> intensities)</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>dataset.signa</code></td>
<td>
<p>a data frame with n rows (individuals) and p columns (categorical variables)</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>col.p</code></td>
<td>
<p>The position of the <em>product</em> variable in the dataframe <em>dataset.id</em></p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>col.j</code></td>
<td>
<p>The position of the <em>consumer</em> variable  in the dataframe <em>dataset.id</em></p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>col.lik</code></td>
<td>
<p>The position of the <em>liking</em> variable  in the dataframe <em>dataset.id</em></p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>id.recogn</code></td>
<td>
<p>The sequence in the variable names which distinguish the ideal
variables from the sensory variables. This sequence should be fixed and unique. <br>
Each ideal variable should be preceeded by the corresponding perceived intensity variable.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>num.col.var.signa</code></td>
<td>
<p>The position of the categorical variables in the dataframe <em>dataset.signa</em> you want to plot the ideal area 
of the different modalities/you want to know if the ideal product of the different modalities is significantly different</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>conf.level</code></td>
<td>
<p>Threshold used for the tests</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>nbchoix</code></td>
<td>
<p>The number of consumers forming a virtual panel, by default the number of panelists in the original panel</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>nbsimul</code></td>
<td>
<p>The number of simulations (corresponding to the number of virtual panels) used to compute the ellipses</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>alpha</code></td>
<td>
<p>The confidence level of the ellipses</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>coord</code></td>
<td>
<p>A length 2 vector specifying the components to plot</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>precision</code></td>
<td>
<p>The value defining the step when gridding the space</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>levels.contour</code></td>
<td>
<p>The levels (between 0 and 1) to consider for the colors on the surface plot.
By default, they are set automatically based on the results</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>color</code></td>
<td>
<p>Boolean, define whether the map is in color or in black and white</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>simusigni</code></td>
<td>
<p>The number of simulations used to perform the global and the pair comparison test</p>
</td>
</tr>
</table>
<h3>Details</h3>

<p>The IdMapConsumer, step by step:
Step 1: the classical IdMap is plotted with the method "ellipses"<br>
Step 2: for each modality of the categorical variable, the optimum of the ideal area is calculated with the method "density"<br>
Step 3: for each categorical variable given in <em>num.col.var.signa</em>, simulations are performed giving the p-value 
for the global ant the pair comparison test. <br>
Step 4: if the global test is significant for a variable, the ideal areas of its modalities are plotted on the IdMap
</p>
<p>This function needs the KernSmooth package.</p>


<h3>Value</h3>

<p>A list containing the following components:
</p>
<table>
<tr style="vertical-align: top;">
<td><code>PCA</code></td>
<td>
<p>the results from the PCA used to create the sensory space</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>idmap</code></td>
<td>
<p>a list containing the results of the IdMap (<em>data</em>), the weight for each consumer (<em>j.weight</em>)
and the precision used.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>ideal</code></td>
<td>
<p>a list containing the estimated profile of the ideal of reference (not available for the wIdMap) 
as well as the percentage of consumers concerned</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>coordobs</code></td>
<td>
<p>The coordinates of all the ideals of all the categories on the sensory space</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>test.global</code></td>
<td>
<p>The results for the global test for each variables (observed inertia, critical inertia, P-value)</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>test.paires</code></td>
<td>
<p>The results for the pair comparison test  for each variables, between its ideal's categories(observed distance between two categories, critical distance, P-value)</p>
</td>
</tr>
</table>
<p>The three last components are provided only if the user choose "color = FALSE", else no test and no ideal map with categories' ideal are performed.
</p>


<h3>Author(s)</h3>

<p>Melodie Sanchez, Sarah Sanchez, francois.husson@institut-agro.fr</p>


<h3>References</h3>

<p>Worch, T., Le, S., Punter, P., &amp; Pages, J. (2012).
Construction of an Ideal Map (IdMap) based on the ideal profiles obtained directly from consumers.
<em>Food Quality and Preference</em>, 26, 93-104.
</p>


<h3>See Also</h3>

 <p><code>IdMap</code></p>


<h3>Examples</h3>

<pre><code class="language-R">## Not run: 
###Load the two datasets
data(cream_id)
data(cream_signa)

###Run the analysis and test the ideals of the variables from 1 to 12 
## for example with a confidence level of 90
res.idmap &lt;- IdMapConsumer(cream_id, cream_signa, col.p=2, col.j=1, col.lik=29, 
   num.col.var.signa=c(1:12),conf.level=0.90,id.recogn="id_") 

## End(Not run)
</code></pre>


</div>