<div class="container">

<table style="width: 100%;"><tr>
<td>est_change_raw_approx</td>
<td style="text-align: right;">R Documentation</td>
</tr></table>
<h2>Case Influence on Parameter Estimates (Approximate)</h2>

<h3>Description</h3>

<p>Gets a <code>lavaan::lavaan()</code> output and computes the
approximate changes in selected parameters for each case
if included.
</p>


<h3>Usage</h3>

<pre><code class="language-R">est_change_raw_approx(
  fit,
  parameters = NULL,
  case_id = NULL,
  allow_inadmissible = FALSE,
  skip_all_checks = FALSE
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr style="vertical-align: top;">
<td><code>fit</code></td>
<td>
<p>The output from <code>lavaan::lavaan()</code> or its wrappers (e.g.,
<code>lavaan::cfa()</code> and <code>lavaan::sem()</code>).</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>parameters</code></td>
<td>
<p>A character vector to specify the selected
parameters. Each parameter is named as in <code>lavaan</code> syntax, e.g.,
<code>x ~ y</code> or <code>x ~~ y</code>, as appeared in the columns <code>lhs</code>, <code>op</code>, and <code>rhs</code>
in the output of <code>lavaan::parameterEstimates()</code>.
Supports specifying an operator to select all parameters with these
operators: <code>~</code>, <code style="white-space: pre;">⁠~~⁠</code>, <code style="white-space: pre;">⁠=~⁠</code>, and <code>~1</code>. This vector can contain
both parameter names and operators. More details can be found
in the help of <code>pars_id()</code>.
If omitted or <code>NULL</code>, the
default, changes on all free parameters will be computed.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>case_id</code></td>
<td>
<p>If it is a character vector of length equals to the
number of cases (the number of rows in the data in <code>fit</code>), then it
is the vector of case identification values. If it is <code>NULL</code>, the
default, then <code>case.idx</code> used by <code>lavaan</code> functions will be used
as case identification values.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>allow_inadmissible</code></td>
<td>
<p>If <code>TRUE</code>, accepts a fit object with
inadmissible results (i.e., <code>post.check</code> from
<code>lavaan::lavInspect()</code> is <code>FALSE</code>). Default is <code>FALSE</code>.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>skip_all_checks</code></td>
<td>
<p>If <code>TRUE</code>, skips all checks and allows
users to run this function on any object of <code>lavaan</code> class.
For users to experiment this and other functions on models
not officially supported. Default is <code>FALSE</code>.</p>
</td>
</tr>
</table>
<h3>Details</h3>

<p>For each case, <code>est_change_raw_approx()</code> computes the
approximate differences
in the estimates of selected parameters with and without this
case:
</p>
<p>(Estimate with all case) - (Estimate without this case).
</p>
<p>The change is the approximate raw change. The change is <em>not</em> divided by
the standard error of an estimate (hence "raw" in the function name).
This is a measure of the influence of a case on the parameter
estimates if it is included.
</p>
<p>If the value of a case is positive, including the case increases an estimate.
</p>
<p>If the value of a case is negative, including the case decreases an estimate.
</p>
<p>The model is not refitted. Therefore, the result is only an
approximation of that of <code>est_change_raw()</code>. However, this
approximation is useful for identifying potentially influential
cases when the sample size is very large or the model takes a long
time to fit. This function can be used to identify potentially
influential cases quickly and then select them to conduct the
leave-one-out sensitivity analysis using <code>lavaan_rerun()</code> and
<code>est_change_raw()</code>.
</p>
<p>Unlike <code>est_change_raw()</code>, it does not yet support computing the
changes for the standardized solution.
</p>
<p>For the technical details, please refer to the vignette
on this approach: <code>vignette("casewise_scores", package = "semfindr")</code>
</p>
<p>The approximate approach supports a model with
equality constraints (available in 0.1.4.8 and later version).
</p>
<p>Supports both single-group and multiple-group models.
(Support for multiple-group models available in 0.1.4.8 and later version).
</p>


<h3>Value</h3>

<p>An <code>est_change</code>-class object, which is
matrix with the number of columns equals to the number of
requested parameters, and the number of rows equals to the number
of cases. The row names are case identification values. The
elements are the raw differences.
A print method is available for user-friendly output.
</p>


<h3>Author(s)</h3>

<p>Idea by Mark Hok Chio Lai <a href="https://orcid.org/0000-0002-9196-7406">https://orcid.org/0000-0002-9196-7406</a>,
implemented by Shu Fai Cheung <a href="https://orcid.org/0000-0002-9871-9448">https://orcid.org/0000-0002-9871-9448</a>.
</p>


<h3>Examples</h3>

<pre><code class="language-R">library(lavaan)

# A path model

dat &lt;- pa_dat
mod &lt;-
"
m1 ~ a1 * iv1 + a2 * iv2
dv ~ b * m1
a1b := a1 * b
a2b := a2 * b
"
# Fit the model
fit &lt;- lavaan::sem(mod, dat)
summary(fit)
# Compute the approximate changes in parameter estimates if a case is included
# vs. if this case is excluded.
# That is, the approximate case influence on parameter estimates.
out_approx &lt;- est_change_raw_approx(fit)
head(out_approx)
# Fit the model several times. Each time with one case removed.
# For illustration, do this only for 10 selected cases
fit_rerun &lt;- lavaan_rerun(fit, parallel = FALSE,
                          to_rerun = 1:10)
# Compute the changes in parameter estimates if a case is included
# vs. if this case is excluded.
# That is, the case influence on the parameter estimates.
out &lt;- est_change_raw(fit_rerun)
out
# Compare the results
plot(out_approx[1:10, 1], out[, 1])
abline(a = 0, b = 1)
plot(out_approx[1:10, 5], out[, 5])
abline(a = 0, b = 1)

# A CFA model
dat &lt;- cfa_dat
mod &lt;-
"
f1 =~  x1 + x2 + x3
f2 =~  x4 + x5 + x6
f1 ~~ f2
"
# Fit the model
fit &lt;- lavaan::cfa(mod, dat)
summary(fit)
# Compute the approximate changes in parameter estimates if a case is included
# vs. if this case is excluded.
# That is, approximate case influence on parameter estimates.
# Compute changes for free loadings only.
out_approx &lt;- est_change_raw_approx(fit,
                                    parameters = "=~")
head(out_approx)

# A latent variable model
dat &lt;- sem_dat
mod &lt;-
"
f1 =~  x1 + x2 + x3
f2 =~  x4 + x5 + x6
f3 =~  x7 + x8 + x9
f2 ~   a * f1
f3 ~   b * f2
ab := a * b
"
# Fit the model
fit &lt;- lavaan::sem(mod, dat)
summary(fit)
# Compute the approximate changes in parameter estimates if a case is included
# vs. if this case is excluded.
# That is, the approximate case influence on parameter estimates.
# Compute changes for structural paths only
out_approx &lt;- est_change_raw_approx(fit,
                                    parameters = c("~"))
head(out_approx)


</code></pre>


</div>