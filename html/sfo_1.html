<div class="container">

<table style="width: 100%;"><tr>
<td>sankey_ly</td>
<td style="text-align: right;">R Documentation</td>
</tr></table>
<h2>Sankey Plot with Plotly</h2>

<h3>Description</h3>

<p>Sankey Plot with Plotly
</p>


<h3>Usage</h3>

<pre><code class="language-R">sankey_ly(x, cat_cols, num_col, title = NULL)
</code></pre>


<h3>Arguments</h3>

<table>
<tr style="vertical-align: top;">
<td><code>x</code></td>
<td>
<p>A data.frame input, must have at least two categorical columns and one numeric column</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>cat_cols</code></td>
<td>
<p>A  vector of at least two categorical columns names</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>num_col</code></td>
<td>
<p>A single numeric column name</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>title</code></td>
<td>
<p>Optional, string to pass to plotly layout title function</p>
</td>
</tr>
</table>
<h3>Details</h3>

<p>A customized function for data transformation and plotting sankey plot with Plotly
</p>


<h3>Examples</h3>

<pre><code class="language-R">data("sfo_passengers")

library(dplyr)

d &lt;- sfo_passengers %&gt;%
  filter(activity_period &gt;= 202201 &amp; activity_period &lt; 202301)

head(d)

d %&gt;%
  filter(operating_airline == "United Airlines") %&gt;%
  mutate(terminal = ifelse(terminal == "International", "international", terminal)) %&gt;%
  group_by(operating_airline,activity_type_code, geo_summary, geo_region,  terminal) %&gt;%
  summarise(total = sum(passenger_count), .groups = "drop") %&gt;%
  sankey_ly(cat_cols = c("operating_airline", "terminal","geo_summary",
                         "geo_region", "activity_type_code"),
            num_col = "total",
            title = "Distribution of United Airlines Passengers at SFO During 2022")
</code></pre>


</div>