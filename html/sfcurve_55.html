<div class="container">

<table style="width: 100%;"><tr>
<td>sfc_apply,sfc_nxn-method</td>
<td style="text-align: right;">R Documentation</td>
</tr></table>
<h2>Apply to every unit in the sfc_nxn curve</h2>

<h3>Description</h3>

<p>Apply to every unit in the sfc_nxn curve
</p>


<h3>Usage</h3>

<pre><code class="language-R">## S4 method for signature 'sfc_nxn'
sfc_apply(p, depth = 1, fun = function(x) x)
</code></pre>


<h3>Arguments</h3>

<table>
<tr style="vertical-align: top;">
<td><code>p</code></td>
<td>
<p>An <code>sfc_nxn</code> object.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>depth</code></td>
<td>
<p>An integer between 0 and <code>level-1</code> of the curve.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>fun</code></td>
<td>
<p>A function of which the argument <code>x</code> is a subunit in the curve. The subunit is an <code>sfc_nxn</code> object but only contains the current sub-sequence.
The function should return an <code>sfc_seuqence</code> object with the same length as of <code>x</code>. The function can take an optional second argument which
the index of the current subunit in the curve.</p>
</td>
</tr>
</table>
<h3>Details</h3>

<p>This function is mainly used to flip subunits on various levels on the curve, thus mainly on the Peano curve and the Meander curve.
A depth of 0 corresponds to the complete curve. A depth of 1 corresponds to the nine first-level units, et al.
</p>
<p>Currently, <code>sfc_apply()</code> only works on curves with a single base pattern as the seed.
</p>


<h3>Value</h3>

<p>An <code>sfc_nxn</code> object.
</p>


<h3>Examples</h3>

<pre><code class="language-R">p = sfc_3x3_peano("I", level = 3)
# flip the global curve
draw_multiple_curves(
    p, 
    sfc_apply(p, 0, sfc_flip_unit),
    nrow = 1
)

# flip all the subunits on depth = 1
draw_multiple_curves(
    p, 
    sfc_apply(p, 1, sfc_flip_unit),
    nrow = 1
)

# flip all the subunits on depth = 2
draw_multiple_curves(
    p, 
    sfc_apply(p, 2, sfc_flip_unit),
    nrow = 1
)

# flip all level-1 patterns on the Peano curve to horizontal
# only works on the lowest subunit, 
p2 = sfc_apply(p, 2, function(x) {
    if(level1_unit_orientation(x) == "vertical") {
        sfc_flip_unit(x)
    } else {
        x
    }
})
# then on depth=1, only flip the unit with odd index
p3 = sfc_apply(p2, 1, function(x, i) {
    if(i %% 2 == 1) {
        sfc_flip_unit(x)
    } else {
        x
    }
})
draw_multiple_curves(p2, p3, nrow = 1)

# flip all level-1 patterns to vertical
p3 = sfc_apply(p, 2, function(x) {
    if(level1_unit_orientation(x) == "horizontal") {
        sfc_flip_unit(x)
    } else {
        x
    }
})
draw_multiple_curves(p, p3, nrow = 1)
</code></pre>


</div>