<div class="container">

<table style="width: 100%;"><tr>
<td>Map_School_Buildings</td>
<td style="text-align: right;">R Documentation</td>
</tr></table>
<h2>Display data fom the school buildings database</h2>

<h3>Description</h3>

<p>This function displays a map of the data downloaded trough the <code>Get_DB_MIUR</code> function.
It supports two kinds of map:
</p>

<ul>
<li>
<p> Interactive map (default option), which allows the user to visualize all the data in scope through the interactive popup, and
</p>
</li>
<li>
<p> Static map (ggplot), which can be easily exported in <code>.pdf</code> objects.
</p>
</li>
</ul>
<h3>Usage</h3>

<pre><code class="language-R">Map_School_Buildings(
  data = NULL,
  field,
  order = NULL,
  level = "LAU",
  region_code = c(1:20),
  plot = "mapview",
  pal = "Blues",
  col_rev = FALSE,
  popup_height = 200,
  main_pos = "top",
  main = "",
  verbose = TRUE,
  input_shp = NULL,
  autoAbort = FALSE,
  ...
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr style="vertical-align: top;">
<td><code>data</code></td>
<td>
<p>Object of class <code>list</code> or <code>tbl_df</code>, <code>tbl</code> and <code>data.frame</code>. Input data obtained as output of the function <code>Group_DB_MIUR</code>
If NULL, it will be downloaded automatically but not saved in the global environment. <code>NULL</code> by default.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>field</code></td>
<td>
<p>Character. The variable to display in the map.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>order</code></td>
<td>
<p>Character. The school order. Either <code>"Primary"</code>, <code>"Middle"</code>, or <code>"High"</code> (high school).
If <code>NULL</code>, an average of the three school orders will be displayed for the target variable. <code>NULL</code> by default.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>level</code></td>
<td>
<p>Character. The administrative level of detailed at which the target variable must be displayed.
Either <code>"LAU"</code>/<code>"Municipality"</code> or <code>"NUTS-3"</code>/<code>"Province"</code>. <code>"LAU"</code> by default.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>region_code</code></td>
<td>
<p>Numeric. The NUTS-2 codes of the units that must be displayed.
If the level is set to <code>"LAU"</code>, choosing a limited number of regions is recommended.
By default, <code>c(1:20)</code>, i.e. all Italian regions.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>plot</code></td>
<td>
<p>Character. The type of map to display; either <code>"mapview"</code> for interactive maps, or <code>"ggplot"</code> for static maps. <code>"mapview"</code> by default.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>pal</code></td>
<td>
<p>Character. The palette to use if the <code>"mapview"</code> mode is chose. <code>"Blues"</code> by default.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>col_rev</code></td>
<td>
<p>Logical. Whether the scale of the colour palette should be reverted or not, if the <code>"mapview"</code> mode is chosen. <code>FALSE</code> by default</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>popup_height</code></td>
<td>
<p>Numeric. The height of the popup table in terms of pixels if the <code>"mapview"</code> mode is chosen. <code>200</code> by default.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>main_pos</code></td>
<td>
<p>Character. Where the header should be placed if the <code>ggplot</code> mode is chosen.
The header is located on the top if <code>"top"</code> is given as input, and above the legend scale otherwise. <code>"top"</code> by default.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>main</code></td>
<td>
<p>Character. The customary title to display in the <code>"ggplot"</code> rendering options</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>verbose</code></td>
<td>
<p>Logical. If <code>TRUE</code>, the user keeps track of the main underlying operations. <code>TRUE</code> by default.s</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>input_shp</code></td>
<td>
<p>Object of class <code>sf</code>, <code>tbl_df</code>, <code>tbl</code>, <code>data.frame</code>. The relevant shapefiles of Italian administrative boudaries,
at the selected level of detail (LAU or NUTS-3). If <code>NULL</code> it is downloaded automatically but not saved in the global environment. <code>NULL</code> by default.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>autoAbort</code></td>
<td>
<p>Logical. In case any data must be retrieved, whether to automatically abort the operation and return NULL in case of missing internet connection or server response errors. <code>FALSE</code> by default.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>...</code></td>
<td>
<p>If <code>data</code> is not provided, the arguments to <code>Group_DB_MIUR</code>.</p>
</td>
</tr>
</table>
<h3>Value</h3>

<p>If <code>plot == "mapview"</code>, an object of class <code>mapview</code>. Otherwise, if <code>plot == "ggplot"</code>, an object of class <code>gg</code> and <code>ggplot</code>.
</p>


<h3>Examples</h3>

<pre><code class="language-R">




  library(magrittr)

  DB23_MIUR &lt;- example_input_DB23_MIUR %&gt;%
    Util_DB_MIUR_num(track.deleted = FALSE) %&gt;%
    Group_DB_MIUR(InnerAreas = FALSE, count_missing = FALSE)

  DB23_MIUR %&gt;% Map_School_Buildings(field = "School_bus",
     order = "Primary",level = "NUTS-3",  plot = "ggplot",
     input_shp = example_Prov22_shp)

  DB23_MIUR %&gt;% Map_School_Buildings(field = "Railway_transport",
     order = "High",level = "NUTS-3", plot = "ggplot",
     input_shp = example_Prov22_shp)

  DB23_MIUR %&gt;% Map_School_Buildings(field = "Context_without_disturbances",
     order = "Middle",level = "NUTS-3", plot = "ggplot",
     input_shp = example_Prov22_shp, col_rev = TRUE)





</code></pre>


</div>