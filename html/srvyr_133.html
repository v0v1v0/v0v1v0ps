<div class="container">

<table style="width: 100%;"><tr>
<td>survey_quantile</td>
<td style="text-align: right;">R Documentation</td>
</tr></table>
<h2>Calculate the quantile and its variation using survey methods</h2>

<h3>Description</h3>

<p>Calculate quantiles from complex survey data. A wrapper
around <code>svyquantile</code>. <code>survey_quantile</code> and
<code>survey_median</code> should always be called from <code>summarise</code>.
</p>


<h3>Usage</h3>

<pre><code class="language-R">survey_quantile(
  x,
  quantiles,
  na.rm = FALSE,
  vartype = c("se", "ci", "var", "cv"),
  level = 0.95,
  interval_type = c("mean", "beta", "xlogit", "asin", "score", "quantile"),
  qrule = c("math", "school", "shahvaish", "hf1", "hf2", "hf3", "hf4", "hf5", "hf6",
    "hf7", "hf8", "hf9"),
  df = NULL,
  ...
)

survey_median(
  x,
  na.rm = FALSE,
  vartype = c("se", "ci", "var", "cv"),
  level = 0.95,
  interval_type = c("mean", "beta", "xlogit", "asin", "score", "quantile"),
  qrule = c("math", "school", "shahvaish", "hf1", "hf2", "hf3", "hf4", "hf5", "hf6",
    "hf7", "hf8", "hf9"),
  df = NULL,
  ...
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr style="vertical-align: top;">
<td><code>x</code></td>
<td>
<p>A variable or expression</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>quantiles</code></td>
<td>
<p>A vector of quantiles to calculate</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>na.rm</code></td>
<td>
<p>A logical value to indicate whether missing values should be dropped</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>vartype</code></td>
<td>
<p>NULL to report no variability. Otherwise one or more of: standard error ("se", the default),
confidence interval ("ci"), variance ("var") or coefficient of variation
("cv").</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>level</code></td>
<td>
<p>A single number indicating the confidence level (only one level allowed). Note that this may effect estimated standard errors (see <code>svyquantile</code> details on <code>alpha</code>, which equals <code>1-level</code>).</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>interval_type</code></td>
<td>
<p>See <code>svyquantile</code>. Note that <code>interval_type = "quantile"</code> is only available for replicate designs, and <code>interval_type = "score"</code> is unavailable for replicate designs.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>qrule</code></td>
<td>
<p>See <code>svyquantile</code></p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>df</code></td>
<td>
<p>A number indicating the degrees of freedom for t-distribution. The
default, NULL, uses the design degrees of freedom (matches the survey package).</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>...</code></td>
<td>
<p>Ignored</p>
</td>
</tr>
</table>
<h3>Details</h3>

<p>Note that the behavior of these functions has changed in srvyr version 1.1,
but the old functions are still (currently) supported as
<code>survey_old_quantile</code> and <code>survey_old_median</code> if you need
to replicate the old results. For more details about what has changed, see
Thomas Lumley's blog post on the changes, available here:
&lt;https://notstatschat.rbind.io/2021/07/20/what-s-new-in-the-survey-package/&gt;
</p>


<h3>Examples</h3>

<pre><code class="language-R">library(survey)
data(api)

dstrata &lt;- apistrat %&gt;%
  as_survey_design(strata = stype, weights = pw)

dstrata %&gt;%
  summarise(api99 = survey_quantile(api99, c(0.25, 0.5, 0.75)),
            api00 = survey_median(api00, vartype = c("ci")))

dstrata %&gt;%
  group_by(awards) %&gt;%
  summarise(api00 = survey_median(api00))

</code></pre>


</div>