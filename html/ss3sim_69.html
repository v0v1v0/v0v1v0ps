<div class="container">

<table style="width: 100%;"><tr>
<td>sample_lcomp</td>
<td style="text-align: right;">R Documentation</td>
</tr></table>
<h2>Sample length compositions from a Stock Synthesis data file</h2>

<h3>Description</h3>

<p>Extract length-composition data from a <code>.ss_new</code> data file and sample
the data. It is assumed that the composition data will be expected values
as written by Stock Synthesis in the second section of the data file, but 
one can also sample input data. The resulting length-composition
data are assumed to represent observed length composition and will overwrite
the length data in <code>dat_list</code>, which is returned invisibly. 
The data file can also be written to the disk, if a file path is provided to
<code>outfile</code>, and used as simulated data by an estimation model.
If used with <code>run_ss3sim</code>, the case file should be named
<code>agecomp</code>. A suggested (default) case letter is <code>D</code> for data.
</p>


<h3>Usage</h3>

<pre><code class="language-R">sample_lcomp(dat_list, outfile, fleets, Nsamp, years, cpar = 1,
  ESS = NULL)
</code></pre>


<h3>Arguments</h3>

<table>
<tr style="vertical-align: top;">
<td><code>dat_list</code></td>
<td>
<p>An SS data list object as read in from
<code>SS_readdat</code> in the <span class="pkg">r4ss</span> package. Make sure
you select option <code>section=2</code>.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>outfile</code></td>
<td>
<p>A character string specifying the file name to use
when writing the information to the disk. The string must include
the proper file extension. No file is written using the default value
of <code>NULL</code>, which leads to increased speed because writing the 
file takes time and computing resources.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>fleets</code></td>
<td>
<p>*A vector of integers specifying which fleets to include.
The order of the fleets pertains to the input order of other arguments.
An entry of <code>fleets=NULL</code> leads to zero samples for any fleet.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>Nsamp</code></td>
<td>
<p>*A numeric list of the same length as <code>fleets</code>.
Either single values or vectors of the same length as the number of
years can be passed through. Single values are repeated for all
years. If no fleet collected samples, keep the value to
<code>Nsamp=NULL</code>.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>years</code></td>
<td>
<p>*A list the same length as <code>fleets</code> giving the years as
numeric vectors. If no fleet collected samples, keep the value to
<code>years=NULL</code>.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>cpar</code></td>
<td>
<p>A numeric value or vector the same length as
<code>fleets</code> controlling the variance of the Dirichlet
distribution used for sampling. A value of <code>1</code> leads to the
same standard deviation as a multinomial of the given <code>Nsamp</code>,
<code>2</code> indicates twice, etc. Values greater than one indicate
overdispersion, and less underdispersion. <code>NULL</code> or <code>NA</code>
for a given fleet will lead to no dispersion.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>ESS</code></td>
<td>
<p>The final effective sample size (ESS) associated with the
simulated data. The ESS is not used to generate the simulated data
but can be used as an input sample size in subsequent models that estimate
population parameters or status.
The default, <code>NULL</code>, leads to the true (internally calculated)
#' ESS being used, which is <code>Nsamp</code> for the multinomial case or given
by the formula under <code>cpar</code> for the Dirichlet case.
At least one value must be provided for each fleet or a vector of
year-specific values can be used for any given fleet.
The argument accepts a list with entries,
either a single integer or a vector of integers, for each fleet.</p>
</td>
</tr>
</table>
<h3>Value</h3>

<p>A modified <code>.dat</code> file if <code>!is.null(outfile)</code>. A list object
containing the modified <code>.dat</code> file is returned invisibly.
</p>


<h3>Which arguments to specifiy in case files</h3>

<p>All function argument descriptions that start with an asterisk (*) will be passed
through the case files to <code>run_ss3sim</code>. If one of these arguments
is not specified in a case file, then a value of <code>NULL</code> will be passed,
which may or may not be an appropriate value. Other arguments will be ignored
if specified.
</p>


<h3>Author(s)</h3>

<p>Cole Monnahan and Kotaro Ono
</p>


<h3>See Also</h3>

<p><code>sample_agecomp</code> for more examples
</p>
<p>Other sampling functions: <code>clean_data</code>,
<code>sample_agecomp</code>,
<code>sample_calcomp</code>, <code>sample_index</code>,
<code>sample_mlacomp</code>,
<code>sample_wtatage</code>
</p>


<h3>Examples</h3>

<pre><code class="language-R">dat_list &lt;- r4ss::SS_readdat(verbose = FALSE,
  file = system.file(file.path("extdata", "models", "cod-om", "codOM.dat"), 
  package="ss3sim"))
## Generate with constant sample size across years
ex1 &lt;- sample_lcomp(dat_list=dat_list, outfile = NULL, 
  fleets = 1:2, Nsamp = list(100, 50), 
  years=list(seq(26, 100, by = 2), 80:100))

</code></pre>


</div>