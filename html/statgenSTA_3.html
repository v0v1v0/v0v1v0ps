<div class="container">

<table style="width: 100%;"><tr>
<td>TD</td>
<td style="text-align: right;">R Documentation</td>
</tr></table>
<h2>S3 class TD</h2>

<h3>Description</h3>

<p><code>createTD</code><br>
Function for creating objects of S3 class TD (Trial Data). The function
converts a data.frame to an object of class TD in the following steps:
</p>

<ul>
<li>
<p>Check input data
</p>
</li>
<li>
<p>Rename columns to default column names - default column names:
genotype, trial, loc, year, repId, subBlock, rowCoord, colCoord, rowId,
colId, checkId
</p>
</li>
<li>
<p>Convert column types to default column types - rowCoord and colCoord
are converted to numeric columns, all other renamed columns to factor
columns. Columns other than the default columns, e.g. traits or other
covariates will be included in the output unchanged.
</p>
</li>
<li>
<p>Split input data by trial - each trial in the input data will become
a list item in the output.
</p>
</li>
<li>
<p>Add meta data - the trial meta data are added as attributes to the
different output items. The function parameters starting with "tr" provide
the meta data. Their values will be recycled if needed, so by setting a
single "trDesign", all trials will get the same design. For trLat, trLong,
trDesign and trDate a column in <code>data</code> that contains the information
can be specified as well. The meta data can be changed later on using
<code>getMeta</code> and <code>setMeta</code>
</p>
</li>
</ul>
<p><code>addTD</code><br>
Function for adding extra trial data to an existing object of class TD. The
data for the new trials will be added after the data for existing trials. It
is possible to add data for an already existing trial, but this will cause
multiple items in the output with identical names, which might cause problems
later on in the analysis. Therefore a warning will be issued in this
case.<br><br><code>dropTD</code><br>
Function for removing data for selected trials from an existing object of
class TD.<br><br><code>summary.TD</code> and <code>plot.TD</code> methods are available.
</p>


<h3>Usage</h3>

<pre><code class="language-R">createTD(
  data,
  genotype = NULL,
  trial = NULL,
  loc = NULL,
  year = NULL,
  repId = NULL,
  subBlock = NULL,
  plotId = NULL,
  rowCoord = NULL,
  colCoord = NULL,
  rowId = rowCoord,
  colId = colCoord,
  checkId = NULL,
  trLocation = NULL,
  trDate = NULL,
  trDesign = NULL,
  trLat = NULL,
  trLong = NULL,
  trPlWidth = NULL,
  trPlLength = NULL
)

addTD(
  TD,
  data,
  genotype = NULL,
  trial = NULL,
  loc = NULL,
  year = NULL,
  repId = NULL,
  subBlock = NULL,
  plotId = NULL,
  rowCoord = NULL,
  colCoord = NULL,
  rowId = rowCoord,
  colId = colCoord,
  checkId = NULL,
  trLocation = NULL,
  trDate = NULL,
  trDesign = NULL,
  trLat = NULL,
  trLong = NULL,
  trPlWidth = NULL,
  trPlLength = NULL
)

dropTD(TD, rmTrials)
</code></pre>


<h3>Arguments</h3>

<table>
<tr style="vertical-align: top;">
<td><code>data</code></td>
<td>
<p>A data.frame containing trial data with at least a column for
genotype. The data.frame should be in a wide format, i.e. all available
phenotypic data should be in a separate column within the data.frame.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>genotype</code></td>
<td>
<p>An optional character string indicating the column in
<code>data</code> that contains genotypes.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>trial</code></td>
<td>
<p>An optional character string indicating the column in
<code>data</code> that contains trials.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>loc</code></td>
<td>
<p>An optional character string indicating the column in
<code>data</code> that contains trial locations.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>year</code></td>
<td>
<p>An optional character string indicating the column in <code>data</code>
that contains years.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>repId</code></td>
<td>
<p>An optional character string indicating the column in
<code>data</code> that contains replicates.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>subBlock</code></td>
<td>
<p>An optional character string indicating the column in
<code>data</code> that contains sub blocks.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>plotId</code></td>
<td>
<p>An optional character string indicating the column in
<code>data</code> that contains plots. This column will be combined with trial
to a single output factor.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>rowCoord</code></td>
<td>
<p>An optional character string indicating the column in
<code>data</code> that contains the row coordinates.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>colCoord</code></td>
<td>
<p>An optional character string indicating the column in
<code>data</code> that contains the column coordinates.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>rowId</code></td>
<td>
<p>An optional character string indicating the column in
<code>data</code> that contains field rows. If not supplied, this is assumed to
be the same as rowCoord.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>colId</code></td>
<td>
<p>An optional character string indicating the column in
<code>data</code> that contains field columns. If not supplied, this is assumed to
be the same as colCoord.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>checkId</code></td>
<td>
<p>An optional character string indicating the column in
<code>data</code> that contains the check IDs.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>trLocation</code></td>
<td>
<p>An optional character vector indicating the locations of
the trials. This will be used as default names when creating plots and
summaries. If no locations are provided, first the column loc is considered.
If this contains one unique value for a trial this is used as trLocation.
Otherwise the trial name is used.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>trDate</code></td>
<td>
<p>An optional character string indicating the column in
<code>data</code> that contains the date of the trial or a date vector indicating
the dates of the trials.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>trDesign</code></td>
<td>
<p>An optional character string indicating the column in
<code>data</code> that contains the design of the trial or a character vector
indicating the designs of the trials. Either "none" (no (known) design), "
ibd" (incomplete-block design), "res.ibd" (resolvable incomplete-block
design), "rcbd" (randomized complete block design), "rowcol" (row-column
design) or "res.rowcol" (resolvable row-column design).</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>trLat</code></td>
<td>
<p>An optional character string indicating the column in <code>data</code>
that contains the latitude of the trial or a numerical vector indicating the
latitudes of the trials on a scale of -90 to 90.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>trLong</code></td>
<td>
<p>An optional character string indicating the column in
<code>data</code> that contains the latitude of the trial or a numerical vector
indicating the longitudes of the trials on a scale of -180 to 180.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>trPlWidth</code></td>
<td>
<p>An optional positive numerical vector indicating the
widths of the plots.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>trPlLength</code></td>
<td>
<p>An optional positive numerical vector indicating the
lengths of the plots.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>TD</code></td>
<td>
<p>An object of class TD which should be modified.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>rmTrials</code></td>
<td>
<p>A character vector of trials that should be removed.</p>
</td>
</tr>
</table>
<h3>Value</h3>

<p>An object of class TD, a list of data.frames with renamed columns
and an attribute <code>renamedCols</code> containing an overview of renamed
columns. For each unique value of trial, the output has a data.frame in
the list with the same name as the trial. These data.frames have attributes
containing the metadata for the corresponding trial. If there is no column
for trial, the list will contain one item named after the input data.
</p>


<h3>See Also</h3>

<p>Other functions for TD objects: 
<code>getMeta()</code>,
<code>plot.TD()</code>,
<code>summary.TD()</code>
</p>


<h3>Examples</h3>

<pre><code class="language-R">## Create a data.frame to be converted to TD object.
## The data consists of genotype, trial, row and column information and
## two traits, yield and flowering time.
datT1 &lt;- data.frame(geno = paste0("G", 1:10),
                    tr = "T1",
                    row = rep(1:5, each = 2),
                    col = rep(1:2, times = 5),
                    yield = 1:10,
                    flowering = 3:12)

## Convert data.frame to TD object.
TDT1 &lt;- createTD(data = datT1,
                 genotype = "geno",
                 trial = "tr",
                 rowCoord = "row",
                 colCoord = "col")

## Create a second data.frame similar to the first with data for a second trial.
datT2 &lt;- data.frame(geno = paste0("G", 1:10),
                    tr = "T2",
                    row = rep(1:2, each = 5),
                    col = rep(1:5, times = 2),
                    yield = 10:1,
                    flowering = 12:3)

## Add this data to the TD object created above.
TDTot &lt;- addTD(TD = TDT1,
               data = datT2,
               genotype = "geno",
               trial = "tr",
               rowCoord = "row",
               colCoord = "col")

## Drop the data for the first trial from the object.
TDT2 &lt;- dropTD(TD = TDTot,
               rmTrials = "T1")

</code></pre>


</div>