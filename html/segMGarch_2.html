<div class="container">

<table style="width: 100%;"><tr>
<td>DQtest</td>
<td style="text-align: right;">R Documentation</td>
</tr></table>
<h2>A regression-based test to backtest VaR models proposed by Engle and Manganelli (2004)</h2>

<h3>Description</h3>

<p>Typical VaR tests cannot control for the dependence of violations, i.e., violations may cluster while the overall (unconditional) average of violations is not significantly different from <code class="reqn">\alpha = 1-VaR</code>. The conditional expectation should also be zero meaning that <code class="reqn">Hit_t(\alpha)</code> is uncorrelated with its own past and other lagged variables (such as <code class="reqn">r_t</code>,
<code class="reqn">r_t^2</code> or the one-step ahead forecast VaR). To test this assumption, the dynamic conditional quantile (DQ) test is used which involves the following statistic
<code class="reqn">DQ = Hit^T X(X^T X)^{-1} X^T Hit/ \alpha(1-\alpha)</code>
where <code class="reqn">X</code> is the matrix of explanatory variables (e.g., raw and squared past returns) and <code class="reqn">Hit</code> the vector collecting <code class="reqn">Hit_t(\alpha)</code>. Under the null hypothesis, Engle and Manganelli (2004) show that the proposed
statistic <code class="reqn">DQ</code> follows a <code class="reqn">\chi^2_q</code> where <code class="reqn">q = rank(X)</code>.
</p>


<h3>Usage</h3>

<pre><code class="language-R">DQtest(y, VaR, VaR_level, lag = 1, lag_hit = 1, lag_var = 1)

## S4 method for signature 'ANY'
DQtest(y, VaR, VaR_level, lag = 1, lag_hit = 1,
  lag_var = 1)
</code></pre>


<h3>Arguments</h3>

<table>
<tr style="vertical-align: top;">
<td><code>y</code></td>
<td>
<p>The time series to apply a VaR model (a single asset rerurn or portfolio return).</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>VaR</code></td>
<td>
<p>The forecast VaR.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>VaR_level</code></td>
<td>
<p>The VaR level, typically 95% or 99%.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>lag</code></td>
<td>
<p>The chosen lag for y.Default is 1.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>lag_hit</code></td>
<td>
<p>The chosen lag for hit. Default is 1.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>lag_var</code></td>
<td>
<p>The chosen lag for VaR forecasts. Default is 1.</p>
</td>
</tr>
</table>
<h3>References</h3>

<p>Engle, Robert F., and Simone Manganelli. "CAViaR: Conditional autoregressive value at risk by regression quantiles." Journal of Business &amp; Economic Statistics 22, no. 4 (2004): 367-381.
</p>


<h3>Examples</h3>

<pre><code class="language-R">#VaR_level=0.95
#y=rnorm(1000,0,4)
#VaR=rep(quantile(y,1-VaR_level),length(y))
#y[c(17,18,19,20,100,101,102,103,104)]=-8
#lag=5
#DQtest(y,VaR,VaR_level,lag)
</code></pre>


</div>