<div class="container">

<table style="width: 100%;"><tr>
<td>stsplot_spacetime</td>
<td style="text-align: right;">R Documentation</td>
</tr></table>
<h2>
Animated Map of Disease Incidence (DEPRECATED)
</h2>

<h3>Description</h3>

<p>For each period (row) or for the overall period of the
<code>observed</code> matrix of the <code>"sts"</code> object, a map
showing the counts by region is produced.
It is possible to redirect the output into files, e.g., to generate an
animated GIF.
</p>


<h3>Usage</h3>

<pre><code class="language-R">stsplot_spacetime(x, type, legend = NULL, opts.col = NULL, labels = TRUE,
                  wait.ms = 250, cex.lab = 0.7, verbose = FALSE,
                  dev.printer = NULL, ...)
</code></pre>


<h3>Arguments</h3>

<table>
<tr style="vertical-align: top;">
<td><code>x</code></td>
<td>

<p>an object of class <code>"sts"</code>.
</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>type</code></td>
<td>

<p>a formula (see <code>stsplot</code>). For a map aggregated over
time (no animation), use <code>observed ~ 1 | unit</code>, otherwise
<code>observed ~ 1 | unit * time</code>.
</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>legend</code></td>
<td>

<p>a <code>list</code> containing the following items used
for coloring
</p>

<dl>
<dt><code>dx</code></dt>
<dd>
<p>position increments in x direction</p>
</dd>
<dt><code>dy</code></dt>
<dd>
<p>position increments in y direction</p>
</dd>
<dt><code>x</code></dt>
<dd>
<p>position in x</p>
</dd>
<dt><code>y</code></dt>
<dd>
<p>position in y</p>
</dd>
<dt><code>once</code></dt>
<dd>
<p>a Boolean; if <code>TRUE</code> then only shown once</p>
</dd>
</dl>
<p>If <code>NULL</code> then a default legend is used.
</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>opts.col</code></td>
<td>

<p>a <code>list</code> containing the two elements
</p>

<dl>
<dt><code>ncolors</code></dt>
<dd>
<p>number of colors to use for plotting</p>
</dd>
<dt><code>use.color</code></dt>
<dd>
<p>a Boolean; if <code>TRUE</code> then colors
will be used in the palette, otherwise grayscale</p>
</dd>
</dl>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>labels</code></td>
<td>
<p>Boolean whether to add labels
</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>wait.ms</code></td>
<td>
<p>Number of milliseconds to wait between each plot
</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>cex.lab</code></td>
<td>
<p><code>cex</code> of the labels
</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>verbose</code></td>
<td>
<p>Boolean whether to write out extra information
</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>dev.printer</code></td>
<td>
<p>Either <code>NULL</code> (default), which means that plotting is
only to the screen, or a list with elements <code>device</code>,
<code>extension</code>, <code>width</code>, <code>height</code>, and <code>name</code>
(with defaults <code>png</code>, <code>".png"</code>, <code>640</code>, <code>480</code>,
and <code>"Rplot"</code>, respectively) to <code>dev.print</code> the
plots to files (only works in interactive sessions).
This option is more or less obsolete since the <span class="pkg">animation</span>
package provides better features for output to files.
</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>...</code></td>
<td>
<p>Extra arguments sent to the plot function.
</p>
</td>
</tr>
</table>
<h3>Note</h3>

<p>The <code>animate.sts</code> method provides a
re-implementation and supersedes this function!
</p>


<h3>Author(s)</h3>

<p>Michael HÃ¶hle
</p>


<h3>See Also</h3>

<p>Other <code>stsplot</code> types, and <code>animate.sts</code> for
the new implementation.
</p>


<h3>Examples</h3>

<pre><code class="language-R">data("ha.sts")
print(ha.sts)

## Not run: 
# map of total counts by district (compare old vs. new implementation)
plot(ha.sts, type = observed ~ 1 | unit) # deprecated
plot(ha.sts, type = observed ~ unit, labels = TRUE)

# space-time animation
plot(aggregate(ha.sts,nfreq=13), type = observed ~ 1 | unit * time)

#print the frames to a png device
#and do the animation without extra sleeping between frames
imgname &lt;- file.path(tempdir(), "berlin")
plot(aggregate(ha.sts,nfreq=13), type = observed ~ 1 | unit * time,
     wait.ms=0, dev.printer=list(name=imgname))

#Use ImageMagick (you might have to adjust the path to 'convert')
system(paste0("convert -delay 50 ", imgname,
              "*.png ", imgname, "-animated.gif"))

## End(Not run)
</code></pre>


</div>