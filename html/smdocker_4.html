<div class="container">

<table style="width: 100%;"><tr>
<td>sm_build</td>
<td style="text-align: right;">R Documentation</td>
</tr></table>
<h2>Use <code style="white-space: pre;">⁠AWS CodeBuild⁠</code> to build docker images and push them to Amazon <code>ECR</code>
</h2>

<h3>Description</h3>

<p>This function takes a directory containing a
<a href="https://docs.docker.com/engine/reference/builder/">dockerfile</a>, and builds it on
<a href="https://aws.amazon.com/codebuild/"><code style="white-space: pre;">⁠AWS CodeBuild⁠</code></a>. The resulting image is
then stored in <a href="https://aws.amazon.com/ecr/"><code style="white-space: pre;">⁠AWS ECR⁠</code></a> for later use.
</p>


<h3>Usage</h3>

<pre><code class="language-R">sm_build(
  repository = NULL,
  compute_type = c("BUILD_GENERAL1_SMALL", "BUILD_GENERAL1_MEDIUM",
    "BUILD_GENERAL1_LARGE", "BUILD_GENERAL1_2XLARGE"),
  role = NULL,
  dir = ".",
  bucket = NULL,
  vpc_id = NULL,
  subnet_ids = list(),
  security_group_ids = list(),
  log = TRUE,
  ...
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr style="vertical-align: top;">
<td><code>repository</code></td>
<td>
<p>(character): The <code>ECR</code> repository:tag for the image
(default: <code style="white-space: pre;">⁠sagemaker-studio-${domain_id}:latest⁠</code>)</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>compute_type</code></td>
<td>
<p>(character): The <a href="https://aws.amazon.com/codebuild/"><code>CodeBuild</code></a> compute type (default: <code>BUILD_GENERAL1_SMALL</code>)</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>role</code></td>
<td>
<p>(character): The <code>IAM</code> role name for <code>CodeBuild</code> to use (default: the Studio execution role).</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>dir</code></td>
<td>
<p>(character): Directory to build</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>bucket</code></td>
<td>
<p>(character): The S3 bucket to use for sending data to <code>CodeBuild</code> (if None,
use the <code style="white-space: pre;">⁠SageMaker SDK⁠</code> default bucket).</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>vpc_id</code></td>
<td>
<p>(character): The Id of the <code>VPC</code> that will host the <code>CodeBuild</code> Project
(such as <code style="white-space: pre;">⁠vpc-05c09f91d48831c8c⁠</code>).</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>subnet_ids</code></td>
<td>
<p>(list): List of <code>subnet</code> ids for the <code>CodeBuild</code> Project
(such as <code style="white-space: pre;">⁠subnet-0b31f1863e9d31a67⁠</code>)</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>security_group_ids</code></td>
<td>
<p>(list): List of security group ids for
the <code>CodeBuild</code> Project (such as <code style="white-space: pre;">⁠sg-0ce4ec0d0414d2ddc⁠</code>).</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>log</code></td>
<td>
<p>(logical): Show the logs of the running <code>CodeBuild</code> build</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>...</code></td>
<td>
<p>docker build parameters
<a href="https://docs.docker.com/engine/reference/commandline/build/#options">https://docs.docker.com/engine/reference/commandline/build/#options</a>
(NOTE: use "_" instead of "-" for example: docker optional parameter
<code>build-arg</code> becomes <code>build_arg</code>)</p>
</td>
</tr>
</table>
<h3>Value</h3>

<p>invisible character vector of <code style="white-space: pre;">⁠AWS ECR⁠</code> image <code>uri</code>.
</p>


<h3>Examples</h3>

<pre><code class="language-R">## Not run: 
# Execute on current directory.
sm_build()

# Execute on different directory.
sm_build(dir = "my-project")

# Add extra docker arguments
sm_build(
  file = "/path/to/Dockerfile",
  build_arg = "foo=bar"
)

## End(Not run)
</code></pre>


</div>