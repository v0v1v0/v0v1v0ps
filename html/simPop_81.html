<div class="container">

<table style="width: 100%;"><tr>
<td>simEUSILC</td>
<td style="text-align: right;">R Documentation</td>
</tr></table>
<h2>Simulate EU-SILC population data</h2>

<h3>Description</h3>

<p>Simulate population data for the European Statistics on Income and Living
Conditions (EU-SILC).
</p>


<h3>Usage</h3>

<pre><code class="language-R">simEUSILC(
  dataS,
  hid = "db030",
  wh = "db090",
  wp = "rb050",
  hsize = NULL,
  strata = "db040",
  pid = NULL,
  age = "age",
  gender = "rb090",
  categorizeAge = TRUE,
  breaksAge = NULL,
  categorical = c("pl030", "pb220a"),
  income = "netIncome",
  method = c("multinom", "twostep"),
  breaks = NULL,
  lower = NULL,
  upper = NULL,
  equidist = TRUE,
  probs = NULL,
  gpd = TRUE,
  threshold = NULL,
  est = "moments",
  const = NULL,
  alpha = 0.01,
  residuals = TRUE,
  components = c("py010n", "py050n", "py090n", "py100n", "py110n", "py120n", "py130n",
    "py140n"),
  conditional = c(getCatName(income), "pl030"),
  keep = TRUE,
  maxit = 500,
  MaxNWts = 1500,
  tol = .Machine$double.eps^0.5,
  nr_cpus = NULL,
  seed
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr style="vertical-align: top;">
<td><code>dataS</code></td>
<td>
<p>a <code>data.frame</code> containing EU-SILC survey data.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>hid</code></td>
<td>
<p>a character string specifying the column of <code>dataS</code> that
contains the household ID.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>wh</code></td>
<td>
<p>a character string specifying the column of <code>dataS</code> that
contains the household sample weights.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>wp</code></td>
<td>
<p>a character string specifying the column of <code>dataS</code> that
contains the personal sample weights.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>hsize</code></td>
<td>
<p>an optional character string specifying a column of
<code>dataS</code> that contains the household size. If <code>NULL</code>, the household
sizes are computed.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>strata</code></td>
<td>
<p>a character string specifying the column of <code>dataS</code> that
define strata. Note that this is currently a required argument and only one
stratification variable is supported.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>pid</code></td>
<td>
<p>an optional character string specifying a column of <code>dataS</code>
that contains the personal ID.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>age</code></td>
<td>
<p>a character string specifying the column of <code>dataS</code> that
contains the age of the persons (to be used for setting up the household
structure).</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>gender</code></td>
<td>
<p>a character string specifying the column of <code>dataS</code> that
contains the gender of the persons (to be used for setting up the household
structure).</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>categorizeAge</code></td>
<td>
<p>a logical indicating whether age categories should be
used for simulating additional categorical and continuous variables to
decrease computation time.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>breaksAge</code></td>
<td>
<p>numeric; if <code>categorizeAge</code> is <code>TRUE</code>, an
optional vector of two or more break points for constructing age categories,
otherwise ignored.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>categorical</code></td>
<td>
<p>a character vector specifying additional categorical
variables of <code>dataS</code> that should be simulated for the population data.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>income</code></td>
<td>
<p>a character string specifying the variable of <code>dataS</code>
that contains the personal income (to be simulated for the population data).</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>method</code></td>
<td>
<p>a character string specifying the method to be used for
simulating personal income. Accepted values are <code>"multinom"</code> (for using
multinomial log-linear models combined with random draws from the resulting
ategories) and <code>"twostep"</code> (for using two-step regression models
combined with random error terms).</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>breaks</code></td>
<td>
<p>if <code>method</code> is <code>"multinom"</code>, an optional numeric
vector of two or more break points for categorizing the personal income. If
missing, break points are computed using weighted quantiles.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>lower, upper</code></td>
<td>
<p>numeric values; if <code>method</code> is <code>"multinom"</code> and
<code>breaks</code> is <code>NULL</code>, these can be used to specify lower and upper
bounds other than minimum and maximum, respectively. Note that if <code>gpd</code>
is <code>TRUE</code> (see below), <code>upper</code> defaults to <code>Inf</code>.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>equidist</code></td>
<td>
<p>logical; if <code>method</code> is <code>"multinom"</code> and
<code>breaks</code> is <code>NULL</code>, this indicates whether the (positive) default
break points should be equidistant or whether there should be refinements in
the lower and upper tail (see <code>getBreaks</code>).</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>probs</code></td>
<td>
<p>numeric vector with values in <code class="reqn">[0, 1]</code>; if <code>method</code> is
<code>"multinom"</code> and <code>breaks</code> is <code>NULL</code>, this gives probabilities
for quantiles to be used as (positive) break points. If supplied, this is
preferred over <code>equidist</code>.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>gpd</code></td>
<td>
<p>logical; if <code>method</code> is <code>"multinom"</code>, this indicates
whether the upper tail of the personal income should be simulated by random
draws from a (truncated) generalized Pareto distribution rather than a
uniform distribution.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>threshold</code></td>
<td>
<p>a numeric value; if <code>method</code> is <code>"multinom"</code>,
values for categories above <code>threshold</code> are drawn from a (truncated)
generalized Pareto distribution.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>est</code></td>
<td>
<p>a character string; if <code>method</code> is <code>"multinom"</code>, the
estimator to be used to fit the generalized Pareto distribution.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>const</code></td>
<td>
<p>numeric; if <code>method</code> is <code>"twostep"</code>, this gives a
constant to be added before log transformation.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>alpha</code></td>
<td>
<p>numeric; if <code>method</code> is <code>"twostep"</code>, this gives
trimming parameters for the sample data. Trimming is thereby done with
respect to the variable specified by <code>additional</code>. If a numeric vector
of length two is supplied, the first element gives the trimming proportion
for the lower part and the second element the trimming proportion for the
upper part. If a single numeric is supplied, it is used for both. With
<code>NULL</code>, trimming is suppressed.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>residuals</code></td>
<td>
<p>logical; if <code>method</code> is <code>"twostep"</code>, this
indicates whether the random error terms should be obtained by draws from
the residuals. If <code>FALSE</code>, they are drawn from a normal distribution
(median and MAD of the residuals are used as parameters).</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>components</code></td>
<td>
<p>a character vector specifying the income components in
<code>dataS</code> (to be simulated for the population data).</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>conditional</code></td>
<td>
<p>an optional character vector specifying categorical
contitioning variables for resampling of the income components. The
fractions occurring in <code>dataS</code> are then drawn from the respective
subsets defined by these variables.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>keep</code></td>
<td>
<p>a logical indicating whether variables computed internally in
the procedure (such as the original IDs of the corresponding households in
the underlying sample, age categories or income categories) should be stored
in the resulting population data.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>maxit, MaxNWts</code></td>
<td>
<p>control parameters to be passed to
<code>multinom</code> and <code>nnet</code>. See the help file
for <code>nnet</code>.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>tol</code></td>
<td>
<p>if <code>method</code> is <code>"twostep"</code>, a small positive numeric
value or <code>NULL</code> (see <code>simContinuous</code>).</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>nr_cpus</code></td>
<td>
<p>if specified, an integer number defining the number of cpus
that should be used for parallel processing.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>seed</code></td>
<td>
<p>optional; an integer value to be used as the seed of the random
number generator, or an integer vector containing the state of the random
number generator to be restored.</p>
</td>
</tr>
</table>
<h3>Value</h3>

<p>An object of class <code>simPopObj</code> containing the
simulated EU-SILC population data as well as the underlying sample.
</p>


<h3>Note</h3>

<p>This is a wrapper calling <code>simStructure</code>,
<code>simCategorical</code>, <code>simContinuous</code> and
<code>simComponents</code>.
</p>


<h3>Author(s)</h3>

<p>Andreas Alfons and Stefan Kraft and Bernhard Meindl
</p>


<h3>See Also</h3>

<p><code>simStructure</code>, <code>simCategorical</code>,
<code>simContinuous</code>, <code>simComponents</code>
</p>


<h3>Examples</h3>

<pre><code class="language-R">
data(eusilcS) # load sample data

## Not run: 
## long computation time
# multinomial model with random draws
eusilcM &lt;- simEUSILC(eusilcS, upper = 200000, equidist = FALSE
, nr_cpus = 1)
summary(eusilcM)

# two-step regression
eusilcT &lt;- simEUSILC(eusilcS, method = "twostep", nr_cpus = 1)
summary(eusilcT)

## End(Not run)

</code></pre>


</div>