<div class="container">

<table style="width: 100%;"><tr>
<td>spark_write_bigquery</td>
<td style="text-align: right;">R Documentation</td>
</tr></table>
<h2>Writing data to Google BigQuery</h2>

<h3>Description</h3>

<p>This function writes data to a Google BigQuery table.
</p>


<h3>Usage</h3>

<pre><code class="language-R">spark_write_bigquery(data,
  billingProjectId = default_billing_project_id(),
  projectId = billingProjectId, datasetId, tableId,
  type = default_bigquery_type(), gcsBucket = default_gcs_bucket(),
  datasetLocation = default_dataset_location(),
  serviceAccountKeyFile = default_service_account_key_file(),
  additionalParameters = NULL, mode = "error", ...)
</code></pre>


<h3>Arguments</h3>

<table>
<tr style="vertical-align: top;">
<td><code>data</code></td>
<td>
<p>Spark DataFrame to write to Google BigQuery.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>billingProjectId</code></td>
<td>
<p>Google Cloud Platform project ID for billing purposes.
This is the project on whose behalf to perform BigQuery operations.
Defaults to <code>default_billing_project_id()</code>.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>projectId</code></td>
<td>
<p>Google Cloud Platform project ID of BigQuery dataset.
Defaults to <code>billingProjectId</code>.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>datasetId</code></td>
<td>
<p>Google BigQuery dataset ID (may contain letters, numbers and underscores).</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>tableId</code></td>
<td>
<p>Google BigQuery table ID (may contain letters, numbers and underscores).</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>type</code></td>
<td>
<p>BigQuery export type to use. Options include "direct", "parquet",
"avro", "orc". Defaults to <code>default_bigquery_type()</code>.
See bigquery_defaults for more details about the supported types.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>gcsBucket</code></td>
<td>
<p>Google Cloud Storage (GCS) bucket to use for storing temporary files.
Temporary files are used when importing through BigQuery load jobs and exporting through
BigQuery extraction jobs (i.e. when using data extracts such as Parquet, Avro, ORC, ...).
The service account specified in <code>serviceAccountKeyFile</code> needs to be given appropriate
rights. This should be the name of an existing storage bucket.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>datasetLocation</code></td>
<td>
<p>Geographic location where newly created datasets should reside.
"EU" or "US". Defaults to "US". Only needs to be specified if the dataset does not yet exist.
It is ignored if it is specified and the dataset already exists.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>serviceAccountKeyFile</code></td>
<td>
<p>Google Cloud service account key file to use for authentication
with Google Cloud services. The use of service accounts is highly recommended. Specifically,
the service account will be used to interact with BigQuery and Google Cloud Storage (GCS).</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>additionalParameters</code></td>
<td>
<p>Additional spark-bigquery options. See
<a href="https://github.com/miraisolutions/spark-bigquery">https://github.com/miraisolutions/spark-bigquery</a> for more information.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>mode</code></td>
<td>
<p>Specifies the behavior when data or table already exist. One of "overwrite",
"append", "ignore" or "error" (default).</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>...</code></td>
<td>
<p>Additional arguments passed to <code>spark_write_source</code>.</p>
</td>
</tr>
</table>
<h3>Value</h3>

<p><code>NULL</code>. This is a side-effecting function.
</p>


<h3>References</h3>

<p><a href="https://github.com/miraisolutions/spark-bigquery">https://github.com/miraisolutions/spark-bigquery</a>
<a href="https://cloud.google.com/bigquery/docs/datasets">https://cloud.google.com/bigquery/docs/datasets</a>
<a href="https://cloud.google.com/bigquery/docs/tables">https://cloud.google.com/bigquery/docs/tables</a>
<a href="https://cloud.google.com/bigquery/docs/reference/standard-sql/">https://cloud.google.com/bigquery/docs/reference/standard-sql/</a>
<a href="https://cloud.google.com/bigquery/docs/loading-data-cloud-storage-parquet">https://cloud.google.com/bigquery/docs/loading-data-cloud-storage-parquet</a>
<a href="https://cloud.google.com/bigquery/docs/loading-data-cloud-storage-avro">https://cloud.google.com/bigquery/docs/loading-data-cloud-storage-avro</a>
<a href="https://cloud.google.com/bigquery/docs/loading-data-cloud-storage-orc">https://cloud.google.com/bigquery/docs/loading-data-cloud-storage-orc</a>
<a href="https://cloud.google.com/bigquery/pricing">https://cloud.google.com/bigquery/pricing</a>
<a href="https://cloud.google.com/bigquery/docs/dataset-locations">https://cloud.google.com/bigquery/docs/dataset-locations</a>
<a href="https://cloud.google.com/docs/authentication/">https://cloud.google.com/docs/authentication/</a>
<a href="https://cloud.google.com/bigquery/docs/authentication/">https://cloud.google.com/bigquery/docs/authentication/</a>
</p>


<h3>See Also</h3>

<p><code>spark_write_source</code>, <code>spark_read_bigquery</code>,
<code>bigquery_defaults</code>
</p>
<p>Other Spark serialization routines: <code>spark_read_bigquery</code>
</p>


<h3>Examples</h3>

<pre><code class="language-R">## Not run: 
config &lt;- spark_config()

sc &lt;- spark_connect(master = "local", config = config)

bigquery_defaults(
  billingProjectId = "&lt;your_billing_project_id&gt;",
  gcsBucket = "&lt;your_gcs_bucket&gt;",
  datasetLocation = "US",
  serviceAccountKeyFile = "&lt;your_service_account_key_file&gt;",
  type = "direct")

# Copy mtcars to Spark
spark_mtcars &lt;- dplyr::copy_to(sc, mtcars, "spark_mtcars", overwrite = TRUE)

spark_write_bigquery(
  data = spark_mtcars,
  datasetId = "&lt;your_dataset_id&gt;",
  tableId = "mtcars",
  mode = "overwrite")

## End(Not run)
</code></pre>


</div>