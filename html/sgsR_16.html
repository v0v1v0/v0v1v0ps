<div class="container">

<table style="width: 100%;"><tr>
<td>calculate_allocation_existing</td>
<td style="text-align: right;">R Documentation</td>
</tr></table>
<h2>Sample allocation type and count</h2>

<h3>Description</h3>

<p>Determine how many samples to allocate within strata.
</p>


<h3>Usage</h3>

<pre><code class="language-R">calculate_allocation_existing(
  existing,
  nSamp,
  allocation = "prop",
  weights = NULL,
  metric = NULL,
  force = FALSE
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr style="vertical-align: top;">
<td><code>existing</code></td>
<td>
<p>sf 'POINT' or data.frame.  Existing plot network.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>nSamp</code></td>
<td>
<p>Numeric. Number of desired samples.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>allocation</code></td>
<td>
<p>Character. Allocation algorithm to be used. Either <code>prop</code> (default) for proportional allocation,
<code>optim</code> for optimal allocation (equal sampling cost), <code>equal</code> for equal number of samples (defined by <code>nSamp</code>)
for each strata, or <code>"manual"</code> for user defined strata weights defined using <code>weights</code>.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>weights</code></td>
<td>
<p>Numeric. Only applicable when <code>allocation = "manual"</code>. Vector of weights where <code>sum(weights) == 1</code>. Vector length
must be equal to the number of unique strata where the first numeric value corresponds to stratum 1, second stratum 2 etc.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>force</code></td>
<td>
<p>Logical. <code>Default = FALSE</code> - force <code>nSamp</code> to be exactly the user defined value
in cases where <code>nSamp</code> and <code>sraster</code> strata count are not equally divisible. Additional samples often need to be allocated or removed
based on rounding differences resulting from proportional differences between <code>nSamp</code> and strata coverages in <code>sraster</code>.
In these instances samples are either added to strata with the lowest number of samples or are removed from strata with the highest number of samples.
Has no effect when <code>existing</code> is provided.</p>
</td>
</tr>
</table>
<h3>Value</h3>

<p>Returns a data.frame of:
</p>

<ul>
<li>
<p>strata - Strata ID.
</p>
</li>
<li>
<p>total - Number of samples to be allocated. Values correspond to under representation (samples needed; positive value) or over representation
(too many samples; negative value) based on the <code>nSamp</code> provided.
</p>
</li>
<li>
<p>need - Required samples per strata based on allocation method. Rounded.
</p>
</li>
</ul>
<h3>Author(s)</h3>

<p>Tristan R.H. Goodbody
</p>


<h3>References</h3>

<p>Gregoire, T.G., &amp; Valentine, H.T. (2007). Sampling Strategies for Natural Resources and the Environment (1st ed.).
Chapman and Hall/CRC. https://doi.org/10.1201/9780203498880
</p>


<h3>See Also</h3>

<p>Other calculate functions: 
<code>calculate_allocation()</code>,
<code>calculate_coobs()</code>,
<code>calculate_distance()</code>,
<code>calculate_pcomp()</code>,
<code>calculate_pop()</code>,
<code>calculate_representation()</code>,
<code>calculate_sampsize()</code>
</p>


</div>