<div class="container">

<table style="width: 100%;"><tr>
<td>DSAggregate_Sample</td>
<td style="text-align: right;">R Documentation</td>
</tr></table>
<h2>Sampling from a Data Stream (Data Stream Operator)</h2>

<h3>Description</h3>

<p>Extracts a sample form a data stream using Reservoir Sampling.
</p>


<h3>Usage</h3>

<pre><code class="language-R">DSAggregate_Sample(k = 100, biased = FALSE)
</code></pre>


<h3>Arguments</h3>

<table>
<tr style="vertical-align: top;">
<td><code>k</code></td>
<td>
<p>the number of points to be sampled from the stream.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>biased</code></td>
<td>
<p>if <code>FALSE</code> then a regular (unbiased) reservoir sampling
is used. If true then the sample is biased towards keeping more recent data
points (see Details section).</p>
</td>
</tr>
</table>
<h3>Details</h3>

<p>If <code>biased = FALSE</code> then the reservoir sampling algorithm by McLeod and
Bellhouse (1983) is used. This sampling makes sure that each data point has
the same chance to be sampled. All sampled points will have a weight of 1.
Note that this might not be ideal for an evolving stream since very old data
points have the same chance to be in the sample as newer points.
</p>
<p>If <code>bias = TRUE</code> then sampling prefers newer points using the modified
reservoir sampling algorithm 2.1 by Aggarwal (2006). New points are always
added. They replace a random point in thre reservoir with a probability of
reservoir size over <code>k</code>. This an exponential bias function of
<code class="reqn">2^{-lambda}</code> with <code class="reqn">lambda = 1 / k</code>.
</p>


<h3>Value</h3>

<p>An object of class <code>DSAggregate_Sample</code> (subclass of <code>DSAggregate</code>).
</p>


<h3>Author(s)</h3>

<p>Michael Hahsler
</p>


<h3>References</h3>

<p>Vitter, J. S. (1985): Random sampling with a reservoir. ACM
Transactions on Mathematical Software, 11(1), 37-57.
</p>
<p>McLeod, A.I., Bellhouse, D.R. (1983): A Convenient Algorithm for Drawing a
Simple Random Sample. Applied Statistics, 32(2), 182-184.
</p>
<p>Aggarwal C. (2006) On Biased Reservoir Sampling in the Presence of Stream
Evolution. International Conference on Very Large Databases (VLDB'06).
607-618.
</p>


<h3>See Also</h3>

<p>Other DSAggregate: 
<code>DSAggregate()</code>,
<code>DSAggregate_Window()</code>
</p>


<h3>Examples</h3>

<pre><code class="language-R">set.seed(1500)

stream &lt;- DSD_Gaussians(k = 3, noise = 0.05)

sample &lt;- DSAggregate_Sample(k = 50)
update(sample, stream, 500)
sample

head(get_points(sample))

# apply k-means clustering to the sample (data without info columns)
km &lt;- kmeans(get_points(sample, info = FALSE), centers = 3)
plot(get_points(sample, info = FALSE))
points(km$centers, col = "red", pch = 3, cex = 2)
</code></pre>


</div>