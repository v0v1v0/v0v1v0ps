<div class="container">

<table style="width: 100%;"><tr>
<td>define</td>
<td style="text-align: right;">R Documentation</td>
</tr></table>
<h2>Define metaparameters to vary in simulation</h2>

<h3>Description</h3>

<p>Takes the output of
<code>specify</code> (a
<code>simpr_spec</code> object) and defines the
metaparameters (i.e. simulation factors).
</p>


<h3>Usage</h3>

<pre><code class="language-R">define(.x = NULL, ..., .list = NULL, .suffix = "_index")
</code></pre>


<h3>Arguments</h3>

<table>
<tr style="vertical-align: top;">
<td><code>.x</code></td>
<td>
<p>a <code>simpr_spec</code> object (the
output of
<code>specify</code>)</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>...</code></td>
<td>
<p>metaparameters: named arguments
containing vectors or lists of objects to be
used in the simulation.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>.list</code></td>
<td>
<p>additional parameters passed to
define() as a list.  Useful if you already
have desired metaparameters already in list
format or created by other functions.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>.suffix</code></td>
<td>
<p>name of suffix to append onto
index column for list metaparameters,
<code>"_index"</code> by default.  See
<em>Details</em>.</p>
</td>
</tr>
</table>
<h3>Details</h3>

<p>This is the second step in the simulation
process, after specifying the simulated data
using <code>specify</code>.
The output of <code>define</code> is then
passed to
<code>generate</code> to
actually generate the simulation.
</p>
<p>Metaparameters are named arguments, passed to
<code>...</code>, that are used in the simulation.
A metaparameter is some kind of vector or list,
representing something that is to be
systematically varied as a part of the
simulation design. Any metaparameter should
also appear in the formulas of
<code>specify</code>, and
thus the simulation changes depending on the
value of the metaparameter.
</p>
<p>When creating the simulation, simulations for
all possible combinations of metaparameters are
generated, resulting in a fully crossed
simulation design.  If only a subset of the
fully crossed design is needed, use the
filtering options available in
<code>generate</code>.
</p>
<p>When one of <code>...</code> is a list, a new
column is generated in the output to
<code>generate</code> to
serve as the index of the list.  This new
column will be the name of the list argument,
with the <code>suffix</code> argument appended onto
the end.  So if <code>Y = list(a = 1:2, b =
letters[2:3])</code>, and <code>suffix = "_index"</code>,
the default, a column named <code>Y_index</code>
would be added to the output of
<code>generate</code>
with values <code>"a"</code> and <code>"b"</code>.
</p>


<h3>Value</h3>

<p>a <code>simpr_spec</code> object to pass onto
<code>generate</code>
for the simulation.
</p>


<h3>Examples</h3>

<pre><code class="language-R"># Simple example of setting a metaparameter
simple_meta = specify(a = ~ 1 + rnorm(n)) %&gt;%
  define(n = c(5, 10)) %&gt;%
  generate(1)

simple_meta # $sim has a 5-row tibble and a 10-row tibble

multi_meta = specify(a = ~ mu + rnorm(n)) %&gt;%
  define(n = c(5, 10),
       mu = seq(-1, 1, length.out = 3)) %&gt;%
  generate(1)

multi_meta # generates simulations for all combos of n and mu


# define can handle lists which can contain multiple matrices, etc.
meta_list_out = specify(a = ~ MASS::mvrnorm(n, rep(0, 2), Sigma = S)) %&gt;%
  define(n = c(10, 20, 30),
       S = list(independent = diag(2), correlated = diag(2) + 2)) %&gt;%
  generate(1)

meta_list_out # generates S_index column

# define can also take arguments as a list using the .list argument
meta_list_out_2 = specify(a = ~ MASS::mvrnorm(n, rep(0, 2), Sigma = S)) %&gt;%
  define(.list = list(n = c(10, 20, 30),
       S = list(independent = diag(2), correlated = diag(2) + 2))) %&gt;%
  generate(1)


</code></pre>


</div>