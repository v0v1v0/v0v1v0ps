<div class="container">

<table style="width: 100%;"><tr>
<td>execute</td>
<td style="text-align: right;">R Documentation</td>
</tr></table>
<h2>Executes a script and returns the output.
The stdout and stderr are captured and returned.
In case of errors, the exit code will return in the status field.</h2>

<h3>Description</h3>

<p>Executes a script and returns the output.
The stdout and stderr are captured and returned.
In case of errors, the exit code will return in the status field.
</p>


<h3>Usage</h3>

<pre><code class="language-R">execute(script = "", args = c(), env = character(), wait = TRUE,
  runner = NULL, print_commands = FALSE, get_runtime_script = FALSE)
</code></pre>


<h3>Arguments</h3>

<table>
<tr style="vertical-align: top;">
<td><code>script</code></td>
<td>
<p>The script text</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>args</code></td>
<td>
<p>Optional script command line arguments (arguments are added as variables in the script named ARG1, ARG2, ...)</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>env</code></td>
<td>
<p>Optional character vector of name=value strings to set environment variables</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>wait</code></td>
<td>
<p>A TRUE/FALSE parameter, indicating whether the function should wait for the command to finish, or run it asynchronously (output status will be -1)</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>runner</code></td>
<td>
<p>The executable used to invoke the script (by default cmd.exe for windows, sh for other platforms)</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>print_commands</code></td>
<td>
<p>True if to print each command before invocation (not available for windows)</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>get_runtime_script</code></td>
<td>
<p>True to return the actual invoked script in a script output parameter</p>
</td>
</tr>
</table>
<h3>Value</h3>

<p>The process output, status code (in case wait=TRUE), error message (in case of any errors) and invoked script in the form of list(status = status, output = output_text, error = error_message, script = script)
</p>


<h3>Examples</h3>

<pre><code class="language-R">library('scriptexec')
library('testthat')

# execute script text
output &lt;- scriptexec::execute('echo command1\necho command2')
expect_equal(output$status, 0)
expect_equal(grepl('command1', output$output), TRUE)
expect_equal(grepl('command2', output$output), TRUE)

if (.Platform$OS.type == 'windows') {
    ls_command &lt;- 'dir'
} else {
    ls_command &lt;- 'ls'
}
output &lt;- scriptexec::execute(c('echo user home:', ls_command))
expect_equal(output$status, 0)

# execute multiple commands as a script
output &lt;- scriptexec::execute(c('cd', 'echo test'))
expect_equal(output$status, 0)

# pass arguments (later defined as ARG1, ARG2, ...) and env vars
if (.Platform$OS.type == 'windows') {
    command &lt;- 'echo %ARG1% %ARG2% %MYENV%'
} else {
    command &lt;- 'echo $ARG1 $ARG2 $MYENV'
}
output &lt;- scriptexec::execute(command, args = c('TEST1', 'TEST2'), env = c('MYENV=TEST3'))
expect_equal(output$status, 0)
expect_equal(grepl('TEST1 TEST2 TEST3', output$output), TRUE)

# non zero status code is returned in case of errors
expect_warning(output &lt;- scriptexec::execute('exit 1'))
expect_equal(output$status, 1)

# do not wait for command to finish
output &lt;- scriptexec::execute('echo my really long task', wait = FALSE)
expect_equal(output$status, -1)
</code></pre>


</div>