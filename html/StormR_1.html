<div class="container">

<table style="width: 100%;"><tr>
<td>defStormsDataset</td>
<td style="text-align: right;">R Documentation</td>
</tr></table>
<h2>Creating a <code>stormsDataset</code> object</h2>

<h3>Description</h3>

<p>The <code>defStormsDataset()</code> function creates a <code>stormsDataset</code> object from either a NetCDF or a CSV file.
This is an essential first step before other <code>stormR</code> functions can be used.
</p>


<h3>Usage</h3>

<pre><code class="language-R">defStormsDataset(
  filename = system.file("extdata", "test_dataset.nc", package = "StormR"),
  sep = NULL,
  fields = c(names = "name", seasons = "season", isoTime = "iso_time", lon = "usa_lon",
    lat = "usa_lat", msw = "usa_wind", basin = "basin", rmw = "usa_rmw", pressure =
    "usa_pres", poci = "usa_poci"),
  basin = NULL,
  seasons = c(1980, as.numeric(format(Sys.time(), "%Y"))),
  unitConversion = c(msw = "knt2ms", rmw = "nm2km", pressure = "mb2pa", poci = "mb2pa"),
  notNamed = "NOT_NAMED",
  verbose = 1
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr style="vertical-align: top;">
<td><code>filename</code></td>
<td>
<p>character. Name of the NetCDF (.nc)/CSV (.csv) file. Default is the <code>test_dataset.nc</code>
file located in the <code>inst/extdata</code> repository of the directory (accessible by
<code>system.file("extdata", "test_dataset.nc", package = "StormR")</code>). This test dataset is extracted
from the IBTrACS.SP.v04r00.nc file and provides all the tropical cyclones that occurred around Vanuatu
from 2015 to 2016 and around New Caledonia from 2020 to 2021.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>sep</code></td>
<td>
<p>character. The field separator character if <code>filename</code> is a CSV file. Default value is set to <code>NULL</code>
which will set the separator to <code>","</code>.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>fields</code></td>
<td>
<p>named character vector. This argument allows to specify the corresponding variable names (NetCDF) or
headers (CSV) in the input file for each field in the output <code>stormsDataset</code>. By default, the corresponding
variable names are set up to import data from a NetCDF file from the IBTrACS database (Knapp et al., 2010).
Corresponding variable names for following fields have to (mandatory fields) or can be
(recommended or optional fields) provided:
</p>

<ul>
<li> <p><code>"names"</code>, names of the storms (mandatory),
</p>
</li>
<li> <p><code>"seasons"</code>, years of observations (mandatory),
</p>
</li>
<li> <p><code>"isoTime"</code>, date and time of observations (mandatory),
</p>
</li>
<li> <p><code>"lon"</code>, longitude of the observations (mandatory),
</p>
</li>
<li> <p><code>"lat"</code>, latitude of the observations (mandatory),
</p>
</li>
<li> <p><code>"msw"</code>, maximum sustained wind speed (mandatory),
</p>
</li>
<li> <p><code>"basin"</code>, name of the area where the storm originated (recommended),
</p>
</li>
<li> <p><code>"rmw"</code>, radius of maximum winds: distance between the centre of the storm and
its band of strongest winds (recommended),
</p>
</li>
<li> <p><code>"pressure"</code>, central pressure (recommended),
</p>
</li>
<li> <p><code>"poci"</code>, pressure of the last closed isobar (recommended)
</p>
</li>
</ul>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>basin</code></td>
<td>
<p>character. If the basin field is provided, then storm track data will
only be extracted for the named basin. By default <code>basin=NULL</code>, meaning that all storms
irrespective of the basin they originated in are extracted.
Seven basins can be used to filter the data set:
</p>

<ul>
<li> <p><code>"NA"</code>, for North Atlantic basin,
</p>
</li>
<li> <p><code>"SA"</code>, for South Atlantic basin,
</p>
</li>
<li> <p><code>"EP"</code>, for Eastern North Pacific basin,
</p>
</li>
<li> <p><code>"WP"</code>, for Western North Pacific basin,
</p>
</li>
<li> <p><code>"SP"</code>, for South Pacific basin,
</p>
</li>
<li> <p><code>"SI"</code>, for South India basin, or
</p>
</li>
<li> <p><code>"NI"</code>, for North India basin.
</p>
</li>
</ul>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>seasons</code></td>
<td>
<p>numeric vector. Seasons of occurrence of the storms (e.g., c(2020,2022)). In the Southern Hemisphere,
the cyclone season extends across two consecutive years. Therefore, to capture the 2021 to 2022 cyclone season both
years should be specified, with cyclones assigned for the year that originated in.
By default all storms occurring since 1980 are extracted.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>unitConversion</code></td>
<td>
<p>named character vector. <code>StormR</code> functions use the metric system (international
system of units), therefore <code>msw</code> has to be provided in <code class="reqn">m.s^{-1}</code>, <code>rmw</code> in <code class="reqn">km</code>, <code>pressure</code>
and <code>poci</code> in <code class="reqn">Pa</code>. By default <code>unitConversion=c(msw = "knt2ms", rmw = "nm2km", pressure = "mb2pa", poci = "mb2pa")</code> to meet the requirements when importing a NetCDF file from the IBTrACS database.
This argument is mandatory even if no conversion is needed. If no conversion is needed then
use <code>"None"</code> in the corresponding fields. The following unit conversions are implemented:
</p>
<p>For <code>msw</code>,
</p>

<ul>
<li> <p><code>"knt2ms"</code>, to convert knot to meter per second (default setting),
</p>
</li>
<li> <p><code>"kmh2ms"</code>, to convert kilometre per hour to meter per second,
</p>
</li>
<li>
<p> "<code style="white-space: pre;">⁠mph2ms"⁠</code>, to convert miles per hour to meter per second, or
</p>
</li>
<li> <p><code>"None"</code>, if no conversion is needed.
</p>
</li>
</ul>
<p>For <code>rmw</code>,
</p>

<ul>
<li> <p><code>"nm_to_ms"</code>to convert nautical miles to kilometre (default setting), or
</p>
</li>
<li> <p><code>"None"</code>if no conversion is needed.
</p>
</li>
</ul>
<p>For <code>pressure</code> and <code>poci</code>,
</p>

<ul>
<li>
<p> "<code style="white-space: pre;">⁠mb2pa"⁠</code>, to convert  millibar to Pascal  (default setting),
</p>
</li>
<li> <p><code>"b2pa"</code>, to convert bar to Pascal,
</p>
</li>
<li> <p><code>"atm2pa"</code>, to convert  atmosphere to Pascal,
</p>
</li>
<li> <p><code>"psi2pa"</code>, to convert  psi to Pascal, or
</p>
</li>
<li> <p><code>"None"</code>, if no conversion is needed.
</p>
</li>
</ul>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>notNamed</code></td>
<td>
<p>character. Constant name for not named storms to remove in the database.
Default value is "NOT_NAMED" (IBTrACS database)</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>verbose</code></td>
<td>
<p>numeric. Whether the function should display (<code style="white-space: pre;">⁠= 1⁠</code>)
or not (<code style="white-space: pre;">⁠= 0⁠</code>) information about the processes.</p>
</td>
</tr>
</table>
<h3>Value</h3>

<p>The <code>defStormsDataset()</code> function returns a <code>stormsDataset</code> object.
</p>


<h3>References</h3>

<p>Knapp, K. R., Kruk, M. C., Levinson, D. H., Diamond, H. J., &amp; Neumann, C. J. (2010).
The International Best Track Archive for Climate Stewardship (IBTrACS).
Bulletin of the American Meteorological Society, 91(3), Article 3. https://doi.org/10.1175/2009bams2755.1
</p>


<h3>Examples</h3>

<pre><code class="language-R"># Creating a `stormsDataset` object with storms between 2010 and 2015
# in the South Pacific using the NetCDF provided with the package
SP_2015_2020_nc &lt;- defStormsDataset(seasons = c(2010, 2015))
str(SP_2015_2020_nc)

# Creating a `stormsDataset` object with storms between 2010 and 2015
# in the South Pacific using the CSV provided with the package
fileName &lt;- system.file("extdata", "test_dataset.csv", package = "StormR")
SP_2015_2020_csv &lt;- defStormsDataset(seasons = c(2010, 2021))
str(SP_2015_2020_csv)
</code></pre>


</div>