<div class="container">

<table style="width: 100%;"><tr>
<td>get_story_clusters</td>
<td style="text-align: right;">R Documentation</td>
</tr></table>
<h2>Find clusters of similar stories</h2>

<h3>Description</h3>

<p><a href="https://lifecycle.r-lib.org/articles/stages.html#maturing"><img src="../help/figures/lifecycle-maturing.svg" alt="[Maturing]"></a>
</p>
<p><code>get_story_clusters</code> classifies the stories in a collection according to
thematic similarity.
</p>


<h3>Usage</h3>

<pre><code class="language-R">get_story_clusters(
  collection = NULL,
  weights = list(choice = 3, major = 2, minor = 1),
  explicit = TRUE,
  min_freq = 1,
  min_size = 3,
  blacklist = NULL
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr style="vertical-align: top;">
<td><code>collection</code></td>
<td>
<p>A <code>Collection()</code> class object.
</p>
<p>If <code>NULL</code>, the collection of all stories in the actively loaded
<abbr><span class="acronym">LTO</span></abbr> version is used.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>weights</code></td>
<td>
<p>A list assigning nonnegative weights to choice, major, and
minor theme levels. The default weighting
<code>list(choice = 3, major = 2, minor = 1)</code> counts each <em>choice</em> usage
three times, each <em>major</em> theme usage twice, and each <em>minor</em>
theme usage once. Use the uniform weighting
<code>list(choice = 1, major = 1, minor = 1)</code> weights theme usages equally
regardless of level. At least one weight must be positive.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>explicit</code></td>
<td>
<p>Set to <code>FALSE</code> to include ancestor themes of the explicit
thematic annotations.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>min_freq</code></td>
<td>
<p>Drop themes occurring less than this number of times from
the analysis. The default <code>min_freq=1</code> results in no themes are discarded.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>min_size</code></td>
<td>
<p>Minimum cluster size. The default is <code>min_size=3</code>.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>blacklist</code></td>
<td>
<p>A <code>Themeset()</code> class object. A themeset containing themes
to be dropped from the analysis.
</p>
<p>If <code>NULL</code>, no themes are filtered.</p>
</td>
</tr>
</table>
<h3>Details</h3>

<p>The input collection of <code>n</code> stories, <code class="reqn">S[1], \ldots, S[n]</code>, is
represented as a weighted bag-of-words, where each <em>choice</em> theme in
story <code class="reqn">S[j] (j=1, \ldots, n)</code> is counted <code>weights$choice</code> times,
each <em>major</em> theme <code>weights$major</code> times, and each <em>minor</em>
theme <code>weights$choice</code> times.
</p>
<p>The function classifies the stories according to thematic similarity
using the Iterative Signature Algorithm (ISA) biclustering algorithm as
implemented in the <code>isa2</code> R package. The clusters are "soft" meaning
that a story can appear in multiple clusters.
</p>
<p>Install <code>isa2</code> package by running the command
<code>install.packages(\"isa2\")</code> before calling this function.
</p>


<h3>Value</h3>

<p>Returns a <code>tibble</code> with <code>r</code> rows (story
clusters) and 4 columns:
</p>

<table>
<tr>
<td style="text-align: left;">
<code>cluster_id</code>: </td>
<td style="text-align: left;"> Story cluster integer ID</td>
</tr>
<tr>
<td style="text-align: left;">
<code>stories</code>: </td>
<td style="text-align: left;"> A tibble of stories comprising the cluster</td>
</tr>
<tr>
<td style="text-align: left;">
<code>themes</code>: </td>
<td style="text-align: left;"> A tibble of themes common to the clustered stories</td>
</tr>
<tr>
<td style="text-align: left;">
<code>size</code>: </td>
<td style="text-align: left;"> Number of stories in the cluster</td>
</tr>
<tr>
<td style="text-align: left;">
</td>
</tr>
</table>
<h3>References</h3>

<p>Gábor Csárdi, Zoltán Kutalik, Sven Bergmann (2010). Modular analysis of
gene expression data with R. <em>Bioinformatics</em>, 26, 1376-7.
</p>
<p>Sven Bergmann, Jan Ihmels, Naama Barkai (2003). Iterative signature
algorithm for the analysis of large-scale gene expression data.
<em>Physical Review E</em>, 67, 031902.
</p>
<p>Gábor Csárdi (2017). isa2: The Iterative Signature Algorithm. R package
version 0.3.5. <a href="https://cran.r-project.org/package=isa2">https://cran.r-project.org/package=isa2</a>
</p>


<h3>Examples</h3>

<pre><code class="language-R">## Not run: 
# Cluster "The Twilight Zone" franchise stories according to thematic
# similarity:
library(dplyr)
set_lto("demo")
set.seed(123)
result_tbl &lt;- get_story_clusters()
result_tbl

# Explore a cluster of stories related to traveling back in time:
cluster_id &lt;- 3
pull(result_tbl, stories)[[cluster_id]]
pull(result_tbl, themes)[[cluster_id]]

# Explore a cluster of stories related to mass panics:
cluster_id &lt;- 5
pull(result_tbl, stories)[[cluster_id]]
pull(result_tbl, themes)[[cluster_id]]

# Explore a cluster of stories related to executions:
cluster_id &lt;- 7
pull(result_tbl, stories)[[cluster_id]]
pull(result_tbl, themes)[[cluster_id]]

# Explore a cluster of stories related to space aliens:
cluster_id &lt;- 10
pull(result_tbl, stories)[[cluster_id]]
pull(result_tbl, themes)[[cluster_id]]

# Explore a cluster of stories related to old people wanting to be young:
cluster_id &lt;- 11
pull(result_tbl, stories)[[cluster_id]]
pull(result_tbl, themes)[[cluster_id]]

# Explore a cluster of stories related to wish making:
cluster_id &lt;- 13
pull(result_tbl, stories)[[cluster_id]]
pull(result_tbl, themes)[[cluster_id]]

## End(Not run)
</code></pre>


</div>