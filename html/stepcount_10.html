<div class="container">

<table style="width: 100%;"><tr>
<td>sc_model_params</td>
<td style="text-align: right;">R Documentation</td>
</tr></table>
<h2>Run Stepcount Model on Data</h2>

<h3>Description</h3>

<p>Run Stepcount Model on Data
</p>


<h3>Usage</h3>

<pre><code class="language-R">sc_model_params(model_type, pytorch_device)

stepcount(
  file,
  sample_rate = NULL,
  model_type = c("ssl", "rf"),
  model_path = NULL,
  pytorch_device = c("cpu", "cuda:0"),
  verbose = TRUE,
  keep_data = FALSE
)

stepcount_with_model(
  file,
  model_type = c("ssl", "rf"),
  model,
  sample_rate = NULL,
  pytorch_device = c("cpu", "cuda:0"),
  verbose = TRUE,
  keep_data = FALSE
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr style="vertical-align: top;">
<td><code>model_type</code></td>
<td>
<p>type of the model: either random forest (rf) or
Self-Supervised Learning model (ssl)</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>pytorch_device</code></td>
<td>
<p>device to use for prediction for PyTorch.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>file</code></td>
<td>
<p>accelerometry file to process, including CSV,
CWA, GT3X, and <code>GENEActiv</code> bin files</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>sample_rate</code></td>
<td>
<p>the sample rate of the data.  Set to <code>NULL</code>
for <code>stepcount</code> to try to guess this</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>model_path</code></td>
<td>
<p>the file path to the model.  If on disk, this can be
re-used and not re-downloaded.  If <code>NULL</code>, will download to the
temporary directory</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>verbose</code></td>
<td>
<p>print diagnostic messages</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>keep_data</code></td>
<td>
<p>should the data used in the prediction be in the output?</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>model</code></td>
<td>
<p>A model object loaded from <code>sc_load_model</code>, but
<code>as_python</code> must be <code>TRUE</code></p>
</td>
</tr>
</table>
<h3>Value</h3>

<p>A list of the results (<code>data.frame</code>),
summary of the results, adjusted summary of the results, and
information about the data.
</p>


<h3>Examples</h3>

<pre><code class="language-R">file = system.file("extdata/P30_wrist100.csv.gz", package = "stepcount")
if (stepcount_check()) {
  out = stepcount(file = file)
  st = out$step_times
}
## Not run: 
  file = system.file("extdata/P30_wrist100.csv.gz", package = "stepcount")
  df = readr::read_csv(file)
  if (stepcount_check()) {
    out = stepcount(file = df)
    st = out$step_times
  }
  if (requireNamespace("ggplot2", quietly = TRUE) &amp;&amp;
      requireNamespace("tidyr", quietly = TRUE) &amp;&amp;
      requireNamespace("dplyr", quietly = TRUE)) {
    dat = df[10000:12000,] %&gt;%
      dplyr::select(-annotation) %&gt;%
      tidyr::gather(axis, value, -time)
    st = st %&gt;%
      dplyr::mutate(time = lubridate::as_datetime(time)) %&gt;%
      dplyr::as_tibble()
    st = st %&gt;%
      dplyr::filter(time &gt;= min(dat$time) &amp; time &lt;= max(dat$time))
    dat %&gt;%
      ggplot2::ggplot(ggplot2::aes(x = time, y = value, colour = axis)) +
      ggplot2::geom_line() +
      ggplot2::geom_vline(data = st, ggplot2::aes(xintercept = time))
  }


## End(Not run)
</code></pre>


</div>