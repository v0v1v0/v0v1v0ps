<div class="container">

<table style="width: 100%;"><tr>
<td>sento_corpus</td>
<td style="text-align: right;">R Documentation</td>
</tr></table>
<h2>Create a sento_corpus object</h2>

<h3>Description</h3>

<p>Formalizes a collection of texts into a <code>sento_corpus</code> object derived from the <span class="pkg">quanteda</span>
<code>corpus</code> object. The <span class="pkg">quanteda</span> package provides a robust text mining infrastructure
(see their <a href="http://quanteda.io/index.html">website</a>), including a handy corpus manipulation toolset. This function
performs a set of checks on the input data and prepares the corpus for further analysis by structurally
integrating a date dimension and numeric metadata features.
</p>


<h3>Usage</h3>

<pre><code class="language-R">sento_corpus(corpusdf, do.clean = FALSE)
</code></pre>


<h3>Arguments</h3>

<table>
<tr style="vertical-align: top;">
<td><code>corpusdf</code></td>
<td>
<p>a <code>data.frame</code> (or a <code>data.table</code>, or a <code>tbl</code>) with as named columns: a document <code>"id"</code>
column (coercible to <code>character</code> mode), a <code>"date"</code> column (as <code>"yyyy-mm-dd"</code>), a <code>"texts"</code> column
(in <code>character</code> mode), an optional <code>"language"</code> column (in <code>character</code> mode), and a series of
feature columns of type <code>numeric</code>, with values between 0 and 1 to specify the degree of connectedness of
a feature to a document. Features could be for instance topics (e.g., legal or economic) or article sources (e.g., online or
print). When no feature column is provided, a feature named <code>"dummyFeature"</code>
is added. All spaces in the names of the features are replaced by <code>'_'</code>. Feature columns with values not
between 0 and 1 are rescaled column-wise.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>do.clean</code></td>
<td>
<p>a <code>logical</code>, if <code>TRUE</code> all texts undergo a cleaning routine to eliminate common textual garbage.
This includes a brute force replacement of HTML tags and non-alphanumeric characters by an empty string. To use with care
if the text is meant to have non-alphanumeric characters! Preferably, cleaning is done outside of this function call.</p>
</td>
</tr>
</table>
<h3>Details</h3>

<p>A <code>sento_corpus</code> object is a specialized instance of a <span class="pkg">quanteda</span> <code>corpus</code>. Any
<span class="pkg">quanteda</span> function applicable to its <code>corpus</code> object can also be applied to a <code>sento_corpus</code>
object. However, changing a given <code>sento_corpus</code> object too drastically using some of <span class="pkg">quanteda</span>'s functions might
alter the very structure the corpus is meant to have (as defined in the <code>corpusdf</code> argument) to be able to be used as
an input in other functions of the <span class="pkg">sentometrics</span> package. There are functions, including
<code>corpus_sample</code> or <code>corpus_subset</code>, that do not change the actual corpus
structure and may come in handy.
</p>
<p>To add additional features, use <code>add_features</code>. Binary features are useful as
a mechanism to select the texts which have to be integrated in the respective feature-based sentiment measure(s), but
applies only when <code>do.ignoreZeros = TRUE</code>. Because of this (implicit) selection that can be performed, having
complementary features (e.g., <code>"economy"</code> and <code>"noneconomy"</code>) makes sense.
</p>
<p>It is also possible to add one non-numerical feature, that is, <code>"language"</code>, to designate the language
of the corpus texts. When this feature is provided, a <code>list</code> of lexicons for different
languages is expected in the <code>compute_sentiment</code> function.
</p>


<h3>Value</h3>

<p>A <code>sento_corpus</code> object, derived from a <span class="pkg">quanteda</span> <code>corpus</code>
object. The corpus is ordered by date.
</p>


<h3>Author(s)</h3>

<p>Samuel Borms
</p>


<h3>See Also</h3>

<p><code>corpus</code>, <code>add_features</code>
</p>


<h3>Examples</h3>

<pre><code class="language-R">data("usnews", package = "sentometrics")

# corpus construction
corp &lt;- sento_corpus(corpusdf = usnews)

# take a random subset making use of quanteda
corpusSmall &lt;- quanteda::corpus_sample(corp, size = 500)

# deleting a feature
quanteda::docvars(corp, field = "wapo") &lt;- NULL

# deleting all features results in the addition of a dummy feature
quanteda::docvars(corp, field = c("economy", "noneconomy", "wsj")) &lt;- NULL

## Not run: 
# to add or replace features, use the add_features() function...
quanteda::docvars(corp, field = c("wsj", "new")) &lt;- 1
## End(Not run)

# corpus creation when no features are present
corpusDummy &lt;- sento_corpus(corpusdf = usnews[, 1:3])

# corpus creation with a qualitative language feature
usnews[["language"]] &lt;- "en"
usnews[["language"]][c(200:400)] &lt;- "nl"
corpusLang &lt;- sento_corpus(corpusdf = usnews)

</code></pre>


</div>