<div class="container">

<table style="width: 100%;"><tr>
<td>R.BMAonly</td>
<td style="text-align: right;">R Documentation</td>
</tr></table>
<h2>
Calculates the proportion of treatment effect explained
</h2>

<h3>Description</h3>

<p>Calculates the proportion of treatment effect on the primary outcome explained by the treatment effect on the surrogate marker using Bayesian Model Averaging. This function is intended to be used for a fully observed continuous outcome and one single continuous surrogate marker. The user can also request to calculate a 95% credible interval, evaluated by Bayesian bootstrapping. The MSE of predicting the primary outcome in the treatment can be calculated when test data is given.
</p>


<h3>Usage</h3>

<pre><code class="language-R">R.BMAonly(Y, S, A, nmc = 500, nBB = 100, conf.int = TRUE, alpha = 0.05, 
prior.para = NULL, testdata = FALSE, Ytest = NULL, Stest = NULL, Atest = NULL)
</code></pre>


<h3>Arguments</h3>

<table>
<tr style="vertical-align: top;">
<td><code>Y</code></td>
<td>

<p>numeric vector; primary outcome, assumed to be continuous.
</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>S</code></td>
<td>

<p>numeric vector; surrogate marker, assumed to be continuous.
</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>A</code></td>
<td>

<p>numeric vector; treatment arm, assumed to be binary. The treatment arm = 1 when the patient is enrolled in the treatment group, treatment arm = 0 when in the control group.
</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>nmc</code></td>
<td>

<p>number of MCMC samples in posterior inference, default is 500.
</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>nBB</code></td>
<td>

<p>number of replicates in Bayesian bootstrap, default is 100. Igored if conf.int = FALSE.
</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>conf.int</code></td>
<td>

<p>TRUE or FALSE; indicates whether a 95% credible interval for the proportion explained is requested, default is TRUE.
</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>alpha</code></td>
<td>

<p>the confidence level for the credible interval, the 100(1 - <code class="reqn">\alpha</code>)% credible interval is calculated. Default is 0.05, ignored if conf.int = FALSE.
</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>prior.para</code></td>
<td>

<p>a list of hyper-parameters in the inverse-Gamma-Normal prior for the variance and coefficients, including a0_list, b0_list, mu0_list, Gamma0_list, Gamma0_inv_list , each being a list of 5 with 5 parameters under the 5 different candidate models. An Inv-Gamma(a0, b0) - Normal(mu0, <code class="reqn">\sigma^2</code> Gamma0) prior is assumed.
</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>testdata</code></td>
<td>

<p>TRUE or FALSE; indicates whether test data is available, default is FALSE. The MSE of predicting the primary outcome is evaluated if TRUE. 
</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>Ytest</code></td>
<td>

<p>numeric vector; primary outcome in test data, assumed to be continuous. Default is NULL, ignored if testdata = FALSE.
</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>Stest</code></td>
<td>

<p>numeric vector; surrogate marker in test data, assumed to be continuous. Default is NULL, ignored if testdata = FALSE.
</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>Atest</code></td>
<td>

<p>numeric vector; treatment arm in test data, assumed to be binary. The treatment arm = 1 when the patient is enrolled in the treatment group, treatment arm = 0 when in the control group. Default is NULL, ignored if testdata = FALSE.
</p>
</td>
</tr>
</table>
<h3>Value</h3>

<table>
<tr style="vertical-align: top;">
<td><code>R.BMA</code></td>
<td>
<p>the estimate of the proportion explained by the surrogate marker.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>p.model</code></td>
<td>
<p>the posterior probability of the candidate models being true.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>ci</code></td>
<td>
<p>the credible interval for the proportion explained by the surrogate marker.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>MSE</code></td>
<td>
<p>the MSE of predicting the primary outcome for test data.</p>
</td>
</tr>
</table>
<h3>Author(s)</h3>

<p>Yunshan Duan
</p>


<h3>References</h3>

<p>Duan, Y. and Parast, L., 2023. Flexible evaluation of surrogate markers with Bayesian model averaging. Statistics in Medicine.
</p>


<h3>Examples</h3>

<pre><code class="language-R">
data(exampleData)
R.BMAonly(Y = exampleData$Y, S = exampleData$S, A = exampleData$A)

</code></pre>


</div>