<div class="container">

<table style="width: 100%;"><tr>
<td>node_cox</td>
<td style="text-align: right;">R Documentation</td>
</tr></table>
<h2>
Simulate a Node Using Cox-Regression
</h2>

<h3>Description</h3>

<p>Data from the parents is used to generate the node using cox-regression using the method of Bender et al. (2005).
</p>


<h3>Usage</h3>

<pre><code class="language-R">node_cox(data, parents, formula=NULL, betas, surv_dist, lambda, gamma,
         cens_dist, cens_args, name)
</code></pre>


<h3>Arguments</h3>

<table>
<tr style="vertical-align: top;">
<td><code>data</code></td>
<td>

<p>A <code>data.table</code> (or something that can be coerced to a <code>data.table</code>) containing all columns specified by <code>parents</code>.
</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>parents</code></td>
<td>

<p>A character vector specifying the names of the parents that this particular child node has. If non-linear combinations or interaction effects should be included, the user may specify the <code>formula</code> argument instead.
</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>formula</code></td>
<td>

<p>An optional <code>formula</code> object to describe how the node should be generated or <code>NULL</code> (default). If supplied it should start with <code>~</code>, having nothing else on the left hand side. The right hand side may contain any valid formula syntax, such as <code>A + B</code> or <code>A + B + I(A^2)</code>, allowing non-linear effects. If this argument is defined, there is no need to define the <code>parents</code> argument. For example, using <code>parents=c("A", "B")</code> is equal to using <code>formula= ~ A + B</code>.
</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>betas</code></td>
<td>

<p>A numeric vector with length equal to <code>parents</code>, specifying the causal beta coefficients used to generate the node.
</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>surv_dist</code></td>
<td>

<p>A single character specifying the distribution that should be used when generating the survival times. Can be either <code>"weibull"</code> or <code>"exponential"</code>.
</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>lambda</code></td>
<td>

<p>A single number used as parameter defined by <code>surv_dist</code>.
</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>gamma</code></td>
<td>

<p>A single number used as parameter defined by <code>surv_dist</code>.
</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>cens_dist</code></td>
<td>

<p>A single character naming the distribution function that should be used to generate the censoring times. For example, <code>"runif"</code> could be used to generate uniformly distributed censoring times. Set to <code>NULL</code> to get no censoring.
</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>cens_args</code></td>
<td>

<p>A list of named arguments which will be passed to the function specified by the <code>cens_dist</code> argument.
</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>name</code></td>
<td>

<p>A single character string specifying the name of the node.
</p>
</td>
</tr>
</table>
<h3>Details</h3>

<p>The survival times are generated according to the cox proportional-hazards regression model as defined by the user. How exactly the data-generation works is described in detail in Bender et al. (2005). To also include censoring, this function allows the user to supply a function that generates random censoring times. If the censoring time is smaller than the generated survival time, the individual is considered censored.
</p>
<p>Unlike the other <code>node</code> type functions, this function adds <strong>two</strong> columns to the resulting dataset instead of one. The first column is called <code>paste0(name, "_event")</code> and is a logical variable, where <code>TRUE</code> indicates that the event has happened and <code>FALSE</code> indicates right-censoring. The second column is named <code>paste0(name, "_time")</code> and includes the survival or censoring time corresponding to the previously mentioned event indicator. This is the standard format for right-censored time-to-event data without time-varying covariates.
</p>
<p>To simulate more complex time-to-event data, the user may need to use the <code>sim_discrete_time</code> function instead.
</p>


<h3>Value</h3>

<p>Returns a <code>data.table</code> of length <code>nrow(data)</code> containing two columns. Both starting with the nodes <code>name</code> and ending with <code>_event</code> and <code>_time</code>. The first is a logical vector, the second a numeric one.
</p>


<h3>Author(s)</h3>

<p>Robin Denz
</p>


<h3>References</h3>

<p>Bender R, Augustin T, Blettner M. Generating survival times to simulate Cox proportional hazards models. Statistics in Medicine. 2005; 24 (11): 1713-1723.
</p>


<h3>Examples</h3>

<pre><code class="language-R">library(simDAG)

set.seed(3454)

# define DAG
dag &lt;- empty_dag() +
  node("age", type="rnorm", mean=50, sd=4) +
  node("sex", type="rbernoulli", p=0.5) +
  node("death", type="cox", parents=c("sex", "age"), betas=c(1.1, 0.4),
       surv_dist="weibull", lambda=1.1, gamma=0.7, cens_dist="runif",
       cens_args=list(min=0, max=1))

sim_dat &lt;- sim_from_dag(dag=dag, n_sim=1000)
</code></pre>


</div>