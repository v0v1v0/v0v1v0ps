<div class="container">

<table style="width: 100%;"><tr>
<td>measure_risk</td>
<td style="text-align: right;">R Documentation</td>
</tr></table>
<h2>Disclosure Risk for Categorical Variables</h2>

<h3>Description</h3>

<p>The function measures the disclosure risk for weighted or unweighted data.
It computes the individual risk (and household risk if reasonable) and the
global risk. It also computes a risk threshold based on a global risk value.
</p>
<p>Prints a 'measure_risk'-object
</p>
<p>Prints a 'ldiversity'-object
</p>


<h3>Usage</h3>

<pre><code class="language-R">measure_risk(obj, ...)

ldiversity(obj, ldiv_index = NULL, l_recurs_c = 2, missing = -999, ...)

## S3 method for class 'measure_risk'
print(x, ...)

## S3 method for class 'ldiversity'
print(x, ...)
</code></pre>


<h3>Arguments</h3>

<table>
<tr style="vertical-align: top;">
<td><code>obj</code></td>
<td>
<p>Object of class <code>sdcMicroObj-class</code></p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>...</code></td>
<td>
<p>see arguments below
</p>

<dl>
<dt>data: </dt>
<dd>
<p>Input data, a data.frame.</p>
</dd>
<dt>keyVars: </dt>
<dd>
<p>names (or indices) of categorical key variables (for data-frame method)</p>
</dd>
<dt>w: </dt>
<dd>
<p>name of variable containing sample weights</p>
</dd>
<dt>hid: </dt>
<dd>
<p>name of the clustering variable, e.g. the household ID</p>
</dd>
<dt>max_global_risk: </dt>
<dd>
<p>Maximal global risk for threshold computation</p>
</dd>
<dt>fast_hier: </dt>
<dd>
<p>If TRUE a fast approximation is computed if household data are provided.</p>
</dd>
</dl>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>ldiv_index</code></td>
<td>
<p>indices (or names) of the variables used for l-diversity</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>l_recurs_c</code></td>
<td>
<p>l-Diversity Constant</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>missing</code></td>
<td>
<p>a integer value to be used as missing value in the C++ routine</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>x</code></td>
<td>
<p>Output of measure_risk() or ldiversity()</p>
</td>
</tr>
</table>
<h3>Details</h3>

<p>To be used when risk of disclosure for individuals within a family is
considered to be statistical independent.
</p>
<p>Internally, function <em>freqCalc()</em> and <em>indivRisk</em> are used for
estimation.
</p>
<p>Measuring individual risk: The individual risk approach based on so-called
super-population models. In such models population frequency counts are
modeled given a certain distribution.  The estimation procedure of sample
frequency counts given the population frequency counts is modeled by
assuming a negative binomial distribution. This is used for the estimation
of the individual risk. The extensive theory can be found in Skinner (1998),
the approximation formulas for the individual risk used is described in
Franconi and Polettini (2004).
</p>
<p>Measuring hierarchical risk: If “hid” - the index of variable holding
information on the hierarchical cluster structures (e.g., individuals that
are clustered in households) - is provided, the hierarchical risk is
additional estimated.  Note that the risk of re-identifying an individual
within a household may also affect the probability of disclosure of other
members in the same household. Thus, the household or cluster-structure of
the data must be taken into account when estimating disclosure risks. It is
commonly assumed that the risk of re-identification of a household is the
risk that at least one member of the household can be disclosed. Thus this
probability can be simply estimated from individual risks as 1 minus the
probability that no member of the household can be identified.
</p>
<p>Global risk: The sum of the individual risks in the dataset gives the
expected number of re-identifications that serves as measure of the global
risk.
</p>
<p>l-Diversity: If “ldiv_index” is unequal to NULL, i.e. if the indices
of sensible variables are specified, various measures for l-diversity are
calculated. l-diverstiy is an extension of the well-known k-anonymity
approach where also the uniqueness in sensible variables for each pattern
spanned by the key variables are evaluated.
</p>


<h3>Value</h3>

<p>A modified <code>sdcMicroObj-class</code> object or a list with the following elements:
</p>

<dl>
<dt>global_risk_ER: </dt>
<dd>
<p>expected number of re-identification.</p>
</dd>
<dt>global_risk: </dt>
<dd>
<p>global risk (sum of indivdual risks).</p>
</dd>
<dt>global_risk_pct: </dt>
<dd>
<p>global risk in percent.</p>
</dd>
<dt>Res: </dt>
<dd>
<p>matrix with the risk, frequency in the sample and grossed-up frequency in the population (and the hierachical risk) for each observation.</p>
</dd>
<dt>global_threshold: </dt>
<dd>
<p>for a given max_global_risk the threshold for the risk of observations.</p>
</dd>
<dt>max_global_risk: </dt>
<dd>
<p>the input max_global_risk of the function.</p>
</dd>
<dt>hier_risk_ER: </dt>
<dd>
<p>expected number of re-identification with household structure.</p>
</dd>
<dt>hier_risk: </dt>
<dd>
<p>global risk with household structure (sum of indivdual risks).</p>
</dd>
<dt>hier_risk_pct: </dt>
<dd>
<p>global risk with household structure in percent.</p>
</dd>
<dt>ldiverstiy: </dt>
<dd>
<p>Matrix with Distinct_Ldiversity,
Entropy_Ldiversity and Recursive_Ldiversity for each sensitivity variable.</p>
</dd>
</dl>
<p>Prints risk-information into the console
</p>
<p>Information on L-Diversity Measures in the console
</p>


<h3>Author(s)</h3>

<p>Alexander Kowarik, Bernhard Meindl, Matthias Templ, Bernd Prantner, minor parts of IHSN C++ source
</p>


<h3>References</h3>

<p>Franconi, L. and Polettini, S. (2004) <em>Individual risk
estimation in mu-Argus: a review</em>. Privacy in Statistical Databases, Lecture
Notes in Computer Science, 262–272. Springer
</p>
<p>Machanavajjhala, A. and Kifer, D. and Gehrke, J. and Venkitasubramaniam, M.
(2007) <em>l-Diversity: Privacy Beyond k-Anonymity</em>.  ACM Trans. Knowl.
Discov. Data, 1(1)
</p>
<p>Templ, M. Statistical Disclosure Control for Microdata: Methods and Applications in R.
<em>Springer International Publishing</em>, 287 pages, 2017. ISBN 978-3-319-50272-4.
<a href="https://doi.org/10.1007/978-3-319-50272-4">doi:10.1007/978-3-319-50272-4</a>.
</p>
<p>#' Templ, M. and Kowarik, A. and Meindl, B.
Statistical Disclosure Control for Micro-Data Using the R Package sdcMicro.
<em>Journal of Statistical Software</em>, <strong>67</strong> (4), 1–36, 2015. <a href="https://doi.org/10.18637/jss.v067.i04">doi:10.18637/jss.v067.i04</a>
</p>


<h3>See Also</h3>

<p><code>freqCalc</code>, <code>indivRisk</code>
</p>
<p><code>measure_risk</code>
</p>


<h3>Examples</h3>

<pre><code class="language-R">## measure_risk with sdcMicro objects:
data(testdata)

sdc &lt;- createSdcObj(testdata,
  keyVars=c('urbrur','roof','walls','water','electcon'),
numVars=c('expend','income','savings'), w='sampling_weight')

## risk is already estimated and available in...
names(sdc@risk)

## measure risk on data frames or matrices:
res &lt;- measure_risk(testdata,
  keyVars=c("urbrur","roof","walls","water","sex"))
print(res)
head(res$Res)
resw &lt;- measure_risk(testdata,
  keyVars=c("urbrur","roof","walls","water","sex"),w="sampling_weight")
print(resw)
head(resw$Res)
res1 &lt;- ldiversity(testdata,
  keyVars=c("urbrur","roof","walls","water","sex"),ldiv_index="electcon")
print(res1)
head(res1)
res2 &lt;- ldiversity(testdata,
  keyVars=c("urbrur","roof","walls","water","sex"),ldiv_index=c("electcon","relat"))
print(res2)
head(res2)

# measure risk with household risk
resh &lt;- measure_risk(testdata,
  keyVars=c("urbrur","roof","walls","water","sex"),w="sampling_weight",hid="ori_hid")
print(resh)

# change max_global_risk
rest &lt;- measure_risk(testdata,
  keyVars=c("urbrur","roof","walls","water","sex"),
  w="sampling_weight",max_global_risk=0.0001)
print(rest)

## for objects of class sdcMicro:
data(testdata2)
sdc &lt;- createSdcObj(testdata2,
  keyVars=c('urbrur','roof','walls','water','electcon','relat','sex'),
  numVars=c('expend','income','savings'), w='sampling_weight')
## -&gt; when using `createSdcObj()`, the risks are already internally computed
## and it is not required to explicitely run `sdc &lt;- measure_risk(sdc)`

</code></pre>


</div>