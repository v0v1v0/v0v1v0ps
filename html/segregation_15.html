<div class="container">

<table style="width: 100%;"><tr>
<td>mutual_total</td>
<td style="text-align: right;">R Documentation</td>
</tr></table>
<h2>Calculates the Mutual Information Index M and Theil's Entropy Index H</h2>

<h3>Description</h3>

<p>Returns the total segregation between <code>group</code> and <code>unit</code>.
If <code>within</code> is given, calculates segregation within each
<code>within</code> category separately, and takes the weighted average.
Also see <code>mutual_within</code> for detailed within calculations.
</p>


<h3>Usage</h3>

<pre><code class="language-R">mutual_total(
  data,
  group,
  unit,
  within = NULL,
  weight = NULL,
  se = FALSE,
  CI = 0.95,
  n_bootstrap = 100,
  base = exp(1)
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr style="vertical-align: top;">
<td><code>data</code></td>
<td>
<p>A data frame.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>group</code></td>
<td>
<p>A categorical variable or a vector of variables
contained in <code>data</code>. Defines the first dimension
over which segregation is computed.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>unit</code></td>
<td>
<p>A categorical variable or a vector of variables
contained in <code>data</code>. Defines the second dimension
over which segregation is computed.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>within</code></td>
<td>
<p>A categorical variable or a vector of variables
contained in <code>data</code>. The variable(s) should be a superset of either
the <code>unit</code> or the <code>group</code> for the calculation to be meaningful.
If provided, segregation is
computed within the groups defined by the variable, and then averaged.
(Default <code>NULL</code>)</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>weight</code></td>
<td>
<p>Numeric. (Default <code>NULL</code>)</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>se</code></td>
<td>
<p>If <code>TRUE</code>, the segregation estimates are bootstrapped to provide
standard errors and to apply bias correction. The bias that is reported
has already been applied to the estimates (i.e. the reported estimates are "debiased")
(Default <code>FALSE</code>)</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>CI</code></td>
<td>
<p>If <code>se = TRUE</code>, compute the confidence (CI*100)
in addition to the bootstrap standard error.
This is based on percentiles of the bootstrap distribution, and a valid interpretation
relies on a larger number of bootstrap iterations. (Default <code>0.95</code>)</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>n_bootstrap</code></td>
<td>
<p>Number of bootstrap iterations. (Default <code>100</code>)</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>base</code></td>
<td>
<p>Base of the logarithm that is used in the calculation.
Defaults to the natural logarithm.</p>
</td>
</tr>
</table>
<h3>Value</h3>

<p>Returns a data.table with two rows. The column <code>est</code> contains
the Mutual Information Index, M, and Theil's Entropy Index, H. The H is the
the M divided by the <code>group</code> entropy. If <code>within</code> was given,
M and H are weighted averages of the within-category segregation scores.
If <code>se</code> is set to <code>TRUE</code>, an additional column <code>se</code> contains
the associated bootstrapped standard errors, an additional column <code>CI</code> contains
the estimate confidence interval as a list column, an additional column <code>bias</code> contains
the estimated bias, and the column <code>est</code> contains the bias-corrected estimates.
</p>


<h3>References</h3>

<p>Henri Theil. 1971. Principles of Econometrics. New York: Wiley.
</p>
<p>Ricardo Mora and Javier Ruiz-Castillo. 2011.
"Entropy-based Segregation Indices". Sociological Methodology 41(1): 159â€“194.
</p>


<h3>Examples</h3>

<pre><code class="language-R"># calculate school racial segregation
mutual_total(schools00, "school", "race", weight = "n") # M =&gt; .425

# note that the definition of groups and units is arbitrary
mutual_total(schools00, "race", "school", weight = "n") # M =&gt; .425

# if groups or units are defined by a combination of variables,
# vectors of variable names can be provided -
# here there is no difference, because schools
# are nested within districts
mutual_total(schools00, "race", c("district", "school"),
    weight = "n"
) # M =&gt; .424

# estimate standard errors and 95% CI for M and H
## Not run: 
mutual_total(schools00, "race", "school",
    weight = "n",
    se = TRUE, n_bootstrap = 1000
)

# estimate segregation within school districts
mutual_total(schools00, "race", "school",
    within = "district", weight = "n"
) # M =&gt; .087

# estimate between-district racial segregation
mutual_total(schools00, "race", "district", weight = "n") # M =&gt; .338
# note that the sum of within-district and between-district
# segregation equals total school-race segregation;
# here, most segregation is between school districts

## End(Not run)
</code></pre>


</div>