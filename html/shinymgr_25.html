<div class="container">

<table style="width: 100%;"><tr>
<td>restore_analysis</td>
<td style="text-align: right;">R Documentation</td>
</tr></table>
<h2>Re-store a previously executed shinymgr analysis by regenerating an R 
project from an renv lockfile</h2>

<h3>Description</h3>

<p>Re-run an previously executed shinymgr analysis given an RDS file
input from a previously saved analysis.
</p>


<h3>Usage</h3>

<pre><code class="language-R">restore_analysis(analysis_path)
</code></pre>


<h3>Arguments</h3>

<table><tr style="vertical-align: top;">
<td><code>analysis_path</code></td>
<td>
<p>File path to the RDS file that stores a previously
executed analysis.</p>
</td>
</tr></table>
<h3>Details</h3>

<p>The function accepts a single argument that defines the file path to 
a saved shinymgr analysis (RDS file). This function will find the lockfile
and use it to create a new renv-enabled R project (a folder), that includes 
the full R library used by the developer when creating the app.  The function 
creates this new project, copies the original RDS file to it, and copies a 
script that the user can run in an attempt to restore an old shinymgr 
analysis utilizing the R version and all package versions that the developer 
used when creating the app.
</p>


<h3>Value</h3>

<p>No return value, restores an R environment from a saved analysis
</p>


<h3>More Info</h3>

<p>The restore_analysis() function is described in the "analyses" tutorial.
</p>


<h3>Tutorials</h3>

<p>The shinymgr learnr tutorials include, in order.
</p>

<ol>
<li> <p><code>learnr::run_tutorial(name = "intro", package = "shinymgr")</code> 
</p>
</li>
<li> <p><code>learnr::run_tutorial(name = "shiny", package = "shinymgr")</code>
</p>
</li>
<li> <p><code>learnr::run_tutorial(name = "modules", package = "shinymgr")</code> 
</p>
</li>
<li> <p><code>learnr::run_tutorial(name = "app_modules", package = "shinymgr")</code>
</p>
</li>
<li> <p><code>learnr::run_tutorial(name = "tests", package = "shinymgr")</code>
</p>
</li>
<li> <p><code>learnr::run_tutorial(name = "shinymgr", package = "shinymgr")</code>
</p>
</li>
<li> <p><code>learnr::run_tutorial(name = "database", package = "shinymgr")</code>
</p>
</li>
<li> <p><code>learnr::run_tutorial(name = "shinymgr_modules", package = "shinymgr")</code> 
</p>
</li>
<li> <p><code>learnr::run_tutorial(name = "apps", package = "shinymgr")</code> 
</p>
</li>
<li> <p><code>learnr::run_tutorial(name = "analyses", package = "shinymgr")</code>
</p>
</li>
<li> <p><code>learnr::run_tutorial(name = "reports", package = "shinymgr")</code>
</p>
</li>
<li> <p><code>learnr::run_tutorial(name = "deployment", package = "shinymgr")</code>
</p>
</li>
</ol>
<h3>References</h3>

<p><a href="https://code.usgs.gov/vtcfwru/shinymgr">https://code.usgs.gov/vtcfwru/shinymgr</a>
</p>


<h3>See Also</h3>

<p>Other analysis: 
<code>rerun_analysis()</code>
</p>


<h3>Examples</h3>

<pre><code class="language-R">## Only run this example in interactive R sessions
if (interactive()) {

# -----------------------------------------------------------------
# Load the sample analysis from the shinymgr package and restore it. 
# -----------------------------------------------------------------

  # Get the path for the sample analysis from shinymgr
  analysis_path &lt;- paste0(
    find.package('shinymgr'), 
    '/shinymgr/analyses/iris_explorer_Gandalf_2023_06_05_16_30.RDS'
  )
  
  # confirm file exists
  file.exists(analysis_path)

  dir_current &lt;- getwd()

  # Re-run the sample analysis
  restore_analysis(analysis_path)
  
  # A new project will created in the temporary directory that
  # includes a script to run within the new renv project
  # Rerun the saved analysis from the restored environment:
  rerun_analysis('renv_iris_explorer_Gandalf_2023_06_05_16_30.RDS')
  
  # Reset directory and clean-up
  setwd(dir_current)
  unlink(
    file.path(tempdir(), paste0('renv_', basename(analysis_path))), 
    recursive = TRUE
  )
}
</code></pre>


</div>