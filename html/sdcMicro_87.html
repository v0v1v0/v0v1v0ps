<div class="container">

<table style="width: 100%;"><tr>
<td>shuffle</td>
<td style="text-align: right;">R Documentation</td>
</tr></table>
<h2>Shuffling and EGADP</h2>

<h3>Description</h3>

<p>Data shuffling and General Additive Data Perturbation.
</p>


<h3>Usage</h3>

<pre><code class="language-R">shuffle(
  obj,
  form,
  method = "ds",
  weights = NULL,
  covmethod = "spearman",
  regmethod = "lm",
  gadp = TRUE
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr style="vertical-align: top;">
<td><code>obj</code></td>
<td>
<p>An object of class sdcMicroObj or a data.frame including the
data.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>form</code></td>
<td>
<p>An object of class “formula” (or one that can be coerced
to that class): a symbolic description of the model to be fitted.  The
responses have to consists of at least two variables of any class and the
response variables have to be of class numeric.  The response variables
belongs to numeric key variables (quasi-identifiers of numeric scale). The
predictors are can be distributed in any way (numeric, factor, ordered
factor).</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>method</code></td>
<td>
<p>currently either the original form of data shuffling
(“ds” - default), “mvn” or “mlm”, see the details
section. The last method is in experimental mode and almost untested.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>weights</code></td>
<td>
<p>Survey sampling weights. Automatically chosen when obj is of
class <code>sdcMicroObj-class</code>.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>covmethod</code></td>
<td>
<p>Method for covariance estimation. “spearman”,
“pearson” and \ dQuotemcd are possible. For the latter one, the
implementation in package robustbase is used.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>regmethod</code></td>
<td>
<p>Method for multivariate regression. “lm” and
“MM” are possible.  For method “MM”, the function “rlm”
from package MASS is applied.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>gadp</code></td>
<td>
<p>TRUE, if the egadp results from a fit on the original data is
returned.</p>
</td>
</tr>
</table>
<h3>Details</h3>

<p>Perturbed values for the sensitive variables are generated.  The sensitive
variables have to be stored as responses in the argument ‘form’,
which is the usual formula interface for regression models in R.
</p>
<p>For method “ds” the EGADP method is applied on the norm inverse
percentiles. Shuffling then ranks the original values according to the GADP
output. For further details, please see the references.
</p>
<p>Method “mvn” uses a simplification and draws from the normal Copulas
directly before these draws are shuffled.
</p>
<p>Method “mlm” is also a simplification. A linear model is applied, the
expected values are used as perturbed values before shuffling is
applied.
</p>


<h3>Value</h3>

<p>If ‘obj’ is of class <code>sdcMicroObj-class</code> the corresponding
slots are filled, like manipNumVars, risk and utility.  If ‘obj’ is
of class “data.frame” an object of class “micro” with
following entities is returned: </p>
<table>
<tr style="vertical-align: top;">
<td><code>shConf </code></td>
<td>
<p>the shuffled numeric key
variables</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>egadp </code></td>
<td>
<p>the perturbed (using gadp method) numeric key
variables</p>
</td>
</tr>
</table>
<h3>Note</h3>

<p>In this version, the covariance method chosen is used for any
covariance and correlation estimations in the whole gadp and shuffling
function.
</p>


<h3>Author(s)</h3>

<p>Matthias Templ, Alexander Kowarik, Bernhard Meindl
</p>


<h3>References</h3>

<p>K. Muralidhar, R. Parsa, R. Saranthy (1999). A general additive
data perturbation method for database security. <em>Management Science</em>,
45, 1399-1415.
</p>
<p>K. Muralidhar, R. Sarathy (2006). Data shuffling - a new masking approach
for numerical data. <em>Management Science</em>, 52(5), 658-670, 2006.
</p>
<p>M. Templ, B. Meindl. (2008).  Robustification of Microdata Masking Methods
and the Comparison with Existing Methods, in: <em>Lecture Notes on
Computer Science</em>, J. Domingo-Ferrer, Y. Saygin (editors.); Springer,
Berlin/Heidelberg, 2008, ISBN: 978-3-540-87470-6, pp. 14-25.
</p>


<h3>See Also</h3>

<p><code>rankSwap, lm</code>
</p>


<h3>Examples</h3>

<pre><code class="language-R">data(Prestige,package="carData")
form &lt;- formula(income + education ~ women + prestige + type, data=Prestige)
sh &lt;- shuffle(obj=Prestige,form)
plot(Prestige[,c("income", "education")])
plot(sh$sh)
colMeans(Prestige[,c("income", "education")])
colMeans(sh$sh)
cor(Prestige[,c("income", "education")], method="spearman")
cor(sh$sh, method="spearman")

## for objects of class sdcMicro:
data(testdata2)
sdc &lt;- createSdcObj(testdata2,
  keyVars=c('urbrur','roof','walls','water','electcon','relat','sex'),
  numVars=c('expend','income','savings'), w='sampling_weight')
sdc &lt;- shuffle(sdc, method=c('ds'),regmethod= c('lm'), covmethod=c('spearman'),
		form=savings+expend ~ urbrur+walls)
</code></pre>


</div>