<div class="container">

<table style="width: 100%;"><tr>
<td>long2start_stop</td>
<td style="text-align: right;">R Documentation</td>
</tr></table>
<h2>
Transform a <code>data.table</code> in the long-format to a <code>data.table</code> in the start-stop format
</h2>

<h3>Description</h3>

<p>This function transforms a <code>data.table</code> in the long-format (one row per person per time point) to a <code>data.table</code> in the start-stop format (one row per person-specific period in which no variables changed).
</p>


<h3>Usage</h3>

<pre><code class="language-R">long2start_stop(data, id, time, varying, overlap=FALSE,
                check_inputs=TRUE)
</code></pre>


<h3>Arguments</h3>

<table>
<tr style="vertical-align: top;">
<td><code>data</code></td>
<td>

<p>A <code>data.table</code> or an object that can be coerced to a <code>data.table</code> (such as a <code>data.frame</code>) including data in the long-format.
</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>id</code></td>
<td>

<p>A single character string specifying a unique person identifier included in in <code>data</code>.
</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>time</code></td>
<td>

<p>A single character string specifying a time variable included in in <code>data</code> coded as integers starting from 1.
</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>varying</code></td>
<td>

<p>A character vector specifying names of variables included in in <code>data</code> that may change over time.
</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>overlap</code></td>
<td>

<p>Specifies whether the intervals should overlap or not. If <code>TRUE</code>, the <code>"stop"</code> column is simply increased by one, as compared to the output when <code>overlap=FALSE</code>. This means that changes for a given <code class="reqn">t</code> are recorded at the start of the next interval, but the previous interval ends on that same day.
</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>check_inputs</code></td>
<td>

<p>Whether to check if the user input is correct or not. Can be turned off by setting it to <code>FALSE</code> to save computation time.
</p>
</td>
</tr>
</table>
<h3>Details</h3>

<p>This function relies on <code>data.table</code> syntax to make the data transformation as RAM efficient and fast as possible.
</p>


<h3>Value</h3>

<p>Returns a <code>data.table</code> containing the columns <code>.id</code> (the unique person identifier), <code>.time</code> (an integer variable encoding the time) and all other variables included in the input <code>data</code> in the long format.
</p>


<h3>Author(s)</h3>

<p>Robin Denz
</p>


<h3>Examples</h3>

<pre><code class="language-R">library(simDAG)
library(data.table)

# generate example data in long format
long &lt;- data.table(.id=rep(seq_len(10), each=5),
                   .time=rep(seq_len(5), 10),
                   A=c(rep(FALSE, 43), TRUE, TRUE, rep(FALSE, 3), TRUE,
                           TRUE),
                   B=FALSE)
setkey(long, .id, .time)

# transform to start-stop format
long2start_stop(data=long, id=".id", time=".time", varying=c("A", "B"))
</code></pre>


</div>