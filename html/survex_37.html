<div class="container">

<table style="width: 100%;"><tr>
<td>plot.predict_profile_survival</td>
<td style="text-align: right;">R Documentation</td>
</tr></table>
<h2>Plot Predict Profile for Survival Models</h2>

<h3>Description</h3>

<p>This function plots objects of class <code>"predict_profile_survival"</code> created using
the <code>predict_profile()</code> function.
</p>


<h3>Usage</h3>

<pre><code class="language-R">## S3 method for class 'predict_profile_survival'
plot(
  x,
  ...,
  geom = "time",
  variables = NULL,
  variable_type = NULL,
  facet_ncol = NULL,
  numerical_plot_type = "lines",
  times = NULL,
  marginalize_over_time = FALSE,
  title = "default",
  subtitle = "default",
  colors = NULL,
  rug = "all",
  rug_colors = c("#dd0000", "#222222")
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr style="vertical-align: top;">
<td><code>x</code></td>
<td>
<p>an object of class <code>predict_profile_survival</code> to be plotted</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>...</code></td>
<td>
<p>additional objects of class <code>"predict_profile_survival"</code> to be plotted together. Only available for <code>geom = "time"</code>.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>geom</code></td>
<td>
<p>character, either <code>"time"</code> or <code>"variable"</code>. Selects the type of plot to be prepared. If <code>"time"</code> then the x-axis represents survival times, and variable is denoted by colors, if <code>"variable"</code> then the x-axis represents the variable values, and y-axis represents the predictions at selected time points.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>variables</code></td>
<td>
<p>character, names of the variables to be plotted. When <code>geom = "variable"</code> it needs to be a name of a single variable, when <code>geom = "time"</code> it can be a vector of variable names. If <code>NULL</code> (default) then first variable (for <code>geom = "variable"</code>) or all variables (for <code>geom = "time"</code>) are plotted.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>variable_type</code></td>
<td>
<p>character, either <code>"numerical"</code>, <code>"categorical"</code> or <code>NULL</code> (default), select only one type of variable for plotting, or leave <code>NULL</code> for all.  Only used when <code>geom = "time"</code>.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>facet_ncol</code></td>
<td>
<p>number of columns for arranging subplots.  Only used when <code>geom = "time"</code>.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>numerical_plot_type</code></td>
<td>
<p>character, either <code>"lines"</code>, or <code>"contours"</code> selects the type of numerical variable plots.  Only used when <code>geom = "time"</code>.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>times</code></td>
<td>
<p>numeric vector, times for which the profile should be plotted, the times must be present in the 'times' field of the explainer. If <code>NULL</code> (default) then the median survival time (if available) or the median time from the explainer object is used. Only used when <code>geom = "variable"</code> and <code>marginalize_over_time = FALSE</code>.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>marginalize_over_time</code></td>
<td>
<p>logical, if <code>TRUE</code> then the profile is calculated for all times and then averaged over time, if <code>FALSE</code> (default) then the profile is calculated for each time separately. Only used when <code>geom = "variable"</code>.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>title</code></td>
<td>
<p>character, title of the plot</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>subtitle</code></td>
<td>
<p>character, subtitle of the plot, <code>'default'</code> automatically generates "created for XXX, YYY models", where XXX and YYY are the explainer labels</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>colors</code></td>
<td>
<p>character vector containing the colors to be used for plotting variables (containing either hex codes "#FF69B4", or names "blue")</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>rug</code></td>
<td>
<p>character, one of <code>"all"</code>, <code>"events"</code>, <code>"censors"</code>, <code>"none"</code> or <code>NULL</code>. Which times to mark on the x axis in <code>geom_rug()</code>.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>rug_colors</code></td>
<td>
<p>character vector containing two colors (containing either hex codes <code>"#FF69B4"</code>, or names <code>"blue"</code>). The first color (red by default) will be used to mark event times, whereas the second (grey by default) will be used to mark censor times.</p>
</td>
</tr>
</table>
<h3>Value</h3>

<p>A collection of <code>ggplot</code> objects arranged with the <code>patchwork</code> package.
</p>


<h3>Examples</h3>

<pre><code class="language-R">
library(survival)
library(survex)

model &lt;- randomForestSRC::rfsrc(Surv(time, status) ~ ., data = veteran)
exp &lt;- explain(model)

p_profile &lt;- predict_profile(exp, veteran[1, -c(3, 4)])

plot(p_profile)

p_profile_with_cat &lt;- predict_profile(
    exp,
    veteran[1, -c(3, 4)],
    categorical_variables = c("trt", "prior")
)

plot(p_profile_with_cat)


</code></pre>


</div>