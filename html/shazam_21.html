<div class="container">

<table style="width: 100%;"><tr>
<td>createTargetingModel</td>
<td style="text-align: right;">R Documentation</td>
</tr></table>
<h2>Creates a TargetingModel</h2>

<h3>Description</h3>

<p><code>createTargetingModel</code> creates a 5-mer <code>TargetingModel</code>.
</p>


<h3>Usage</h3>

<pre><code class="language-R">createTargetingModel(
  db,
  model = c("s", "rs"),
  sequenceColumn = "sequence_alignment",
  germlineColumn = "germline_alignment_d_mask",
  vCallColumn = "v_call",
  multipleMutation = c("independent", "ignore"),
  minNumMutations = 50,
  minNumSeqMutations = 500,
  modelName = "",
  modelDescription = "",
  modelSpecies = "",
  modelCitation = "",
  modelDate = NULL
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr style="vertical-align: top;">
<td><code>db</code></td>
<td>
<p>data.frame containing sequence data.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>model</code></td>
<td>
<p>type of model to create. The default model, "s", 
builds a model by counting only silent mutations. <code>model="s"</code>
should be used for data that includes functional sequences.
Setting <code>model="rs"</code> creates a model by counting both 
replacement and silent mutations and may be used on fully 
non-functional sequence data sets.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>sequenceColumn</code></td>
<td>
<p>name of the column containing IMGT-gapped sample sequences.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>germlineColumn</code></td>
<td>
<p>name of the column containing IMGT-gapped germline sequences.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>vCallColumn</code></td>
<td>
<p>name of the column containing the V-segment allele calls.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>multipleMutation</code></td>
<td>
<p>string specifying how to handle multiple mutations occuring 
within the same 5-mer. If <code>"independent"</code> then multiple 
mutations within the same 5-mer are counted indepedently. 
If <code>"ignore"</code> then 5-mers with multiple mutations are 
excluded from the otal mutation tally.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>minNumMutations</code></td>
<td>
<p>minimum number of mutations required to compute the 5-mer 
substitution rates. If the number of mutations for a 5-mer
is below this threshold, its substitution rates will be 
estimated from neighboring 5-mers. Default is 50.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>minNumSeqMutations</code></td>
<td>
<p>minimum number of mutations in sequences containing each 5-mer
to compute the mutability rates. If the number is smaller 
than this threshold, the mutability for the 5-mer will be 
inferred. Default is 500.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>modelName</code></td>
<td>
<p>name of the model.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>modelDescription</code></td>
<td>
<p>description of the model and its source data.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>modelSpecies</code></td>
<td>
<p>genus and species of the source sequencing data.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>modelCitation</code></td>
<td>
<p>publication source.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>modelDate</code></td>
<td>
<p>date the model was built. If <code>NULL</code> the current date
will be used.</p>
</td>
</tr>
</table>
<h3>Details</h3>

<p><strong>Caution: The targeting model functions do NOT support ambiguous 
characters in their inputs. You MUST make sure that your input and germline
sequences do NOT contain ambiguous characters (especially if they are
clonal consensuses returned from <code>collapseClones</code>).</strong>
</p>


<h3>Value</h3>

<p>A TargetingModel object.
</p>


<h3>References</h3>


<ol><li>
<p>  Yaari G, et al. Models of somatic hypermutation targeting and substitution based
on synonymous mutations from high-throughput immunoglobulin sequencing data.
Front Immunol. 2013 4(November):358.
</p>
</li></ol>
<h3>See Also</h3>

<p>See TargetingModel for the return object. 
See plotMutability plotting a mutability model.
See createSubstitutionMatrix, extendSubstitutionMatrix, 
createMutabilityMatrix, extendMutabilityMatrix and 
createTargetingMatrix for component steps in building a model.
</p>


<h3>Examples</h3>

<pre><code class="language-R">
# Subset example data to one isotype and sample as a demo
data(ExampleDb, package="alakazam")
db &lt;- subset(ExampleDb, c_call == "IGHA" &amp; sample_id == "-1h")[1:80,]

# Create model using only silent mutations and ignore multiple mutations
model &lt;- createTargetingModel(db, model="s", sequenceColumn="sequence_alignment",
                              germlineColumn="germline_alignment_d_mask",
                              vCallColumn="v_call", multipleMutation="ignore")

# View top 5 mutability estimates
head(sort(model@mutability, decreasing=TRUE), 5)

# View number of silent mutations used for estimating mutability
model@numMutS


</code></pre>


</div>