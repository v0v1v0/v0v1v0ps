<div class="container">

<table style="width: 100%;"><tr>
<td>refine_chapter_overview</td>
<td style="text-align: right;">R Documentation</td>
</tr></table>
<h2>Processes A 'chapter_overview' Data Frame</h2>

<h3>Description</h3>

<p>Processes A 'chapter_overview' Data Frame
</p>


<h3>Usage</h3>

<pre><code class="language-R">refine_chapter_overview(
  chapter_overview = NULL,
  data = NULL,
  chunk_templates = NULL,
  label_separator = " - ",
  name_separator = NULL,
  single_y_bivariates_if_indep_cats_above = 3,
  single_y_bivariates_if_deps_above = 20,
  always_show_bi_for_indep = NULL,
  hide_bi_entry_if_sig_above = 1,
  hide_chunk_if_n_below = 10,
  hide_variable_if_all_na = TRUE,
  organize_by = c("chapter", ".variable_label_prefix_dep", ".variable_name_indep",
    ".template_name"),
  arrange_section_by = c(chapter = FALSE, .variable_name_dep = FALSE,
    .variable_name_indep = FALSE, .template_name = FALSE),
  na_first_in_section = TRUE,
  max_width_obj = 128,
  max_width_chunk = 128,
  max_width_file = 64,
  max_width_folder_name = 12,
  sep_obj = "_",
  sep_chunk = "-",
  sep_file = "-",
  ...,
  progress = TRUE,
  variable_group_dep = ".variable_group_dep",
  variable_group_prefix = NULL,
  n_range_glue_template_1 = "{n}",
  n_range_glue_template_2 = "[{n[1]}-{n[2]}]",
  log_file = NULL
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr style="vertical-align: top;">
<td><code>chapter_overview</code></td>
<td>
<p><em>What goes into each chapter and sub-chapter</em>
</p>
<p><code style="white-space: pre;">⁠obj:&lt;data.frame&gt;|obj:&lt;tbl_df&gt;⁠</code> // Required
</p>
<p>Data frame (or tibble, possibly grouped). One row per chapter. Should
contain the columns 'chapter' and 'dep', Optionally 'indep' (independent
variables) and other informative columns as needed.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>data</code></td>
<td>
<p><em>Survey data</em>
</p>
<p><code style="white-space: pre;">⁠obj:&lt;data.frame&gt;|obj:&lt;tbl_df&gt;|obj:&lt;srvyr&gt;⁠</code> // Required
</p>
<p>A data frame (or a srvyr-object) with the columns specified in the
chapter_structure 'dep', etc columns.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>chunk_templates</code></td>
<td>
<p><em>Chunk templates</em>
</p>
<p><code style="white-space: pre;">⁠obj:&lt;data.frame&gt;|obj:&lt;tbl_df&gt;|NULL⁠</code> // <em>default:</em> <code>NULL</code> (<code>optional</code>)
</p>
<p>Must contain columns <code>name</code> (user-specified unique name for the template),
<code>template</code> (the chunk template as <code>{glue}</code>-specification, <code>variable_type_dep</code>
and optionally <code>variable_type_indep</code>. The latter two are list-columns of
prototype vectors specifying which data the template will be applied to.
Can optionally contain columns whose names match the default options for
the function. These will then override the default function-wide options
for the specific template.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>label_separator</code></td>
<td>
<p><em>Variable label separator</em>
</p>
<p><code style="white-space: pre;">⁠scalar&lt;character&gt;⁠</code> // <em>default:</em> <code>NULL</code> (<code>optional</code>)
</p>
<p>String to split labels on main question and sub-items.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>name_separator</code></td>
<td>
<p><em>Variable name separator</em>
</p>
<p><code style="white-space: pre;">⁠scalar&lt;character&gt;⁠</code> // <em>default:</em> <code>NULL</code> (<code>optional</code>)
</p>
<p>String to split column names in data between main question and sub-items</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>single_y_bivariates_if_indep_cats_above</code></td>
<td>
<p><em>Single y bivariates if indep-cats above ...</em>
</p>
<p><code style="white-space: pre;">⁠scalar&lt;integer&gt;⁠</code> // <em>default:</em> <code>3</code> (<code>optional</code>)
</p>
<p>Figures and tables for bivariates can become very long if the independent
variable has many categories. This argument specifies the number of indep categories
above which only single y bivariates should be shown.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>single_y_bivariates_if_deps_above</code></td>
<td>
<p><em>Single y bivariates if dep-vars above ...</em>
</p>
<p><code style="white-space: pre;">⁠scalar&lt;integer&gt;⁠</code> // <em>default:</em> <code>20</code> (<code>optional</code>)
</p>
<p>Figures and tables for bivariates can become very long if there are many dependent
variables in a battery/question matrix. This argument specifies the number of dep variables
above which only single y bivariates should be shown. Set to 0 to always show single y bivariates.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>always_show_bi_for_indep</code></td>
<td>
<p><em>Always show bivariate for indep-variable</em>
</p>
<p><code style="white-space: pre;">⁠vector&lt;character&gt;⁠</code> // <em>default:</em> <code>NULL</code> (<code>optional</code>)
</p>
<p>Specific combinations with a by-variable where bivariates should always be shown.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>hide_bi_entry_if_sig_above</code></td>
<td>
<p><em>p-value threshold for hiding bivariate entry</em>
</p>
<p><code style="white-space: pre;">⁠scalar&lt;double&gt;⁠</code> // <em>default:</em> <code>1</code> (<code>optional</code>)
</p>
<p>Whether to hide bivariate entry if significance is above this value.
Defaults to showing all.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>hide_chunk_if_n_below</code></td>
<td>
<p><em>Hide result if N below</em>
</p>
<p><code style="white-space: pre;">⁠scalar&lt;integer&gt;⁠</code> // <em>default:</em> <code>10</code> (<code>optional</code>)
</p>
<p>Whether to hide result if N for a given dataset is below
this value. NOTE: Exceptions will be made to chr_table and chr_plot as these are
typically exempted in the first place. This might change in the future with
a separate argument.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>hide_variable_if_all_na</code></td>
<td>
<p><em>Hide variable from outputs if containing all NA</em>
</p>
<p><code style="white-space: pre;">⁠scalar&lt;boolean&gt;⁠</code> // <em>default:</em> <code>TRUE</code> (<code>optional</code>)
</p>
<p>Whether to remove variables if all values are NA.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>organize_by</code></td>
<td>
<p><em>Grouping columns</em>
</p>
<p><code style="white-space: pre;">⁠vector&lt;character&gt;⁠</code> // <em>default:</em> <code>NULL</code> (<code>optional</code>)
</p>
<p>Column names used for identifying chapters and sections.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>arrange_section_by</code></td>
<td>
<p><em>Grouping columns</em>
</p>
<p><code style="white-space: pre;">⁠vector&lt;character&gt;⁠</code> or <code style="white-space: pre;">⁠named vector&lt;logical&gt;⁠</code> // <em>default:</em> <code>NULL</code> (<code>optional</code>)
</p>
<p>Column names used for sorting section within each organize_by group. If
character vector, will assume all are to be arranged in ascending order.
If a named logical vector, FALSE will indicate ascending, TRUE descending.
Defaults to sorting in ascending order (alphabetical) for commonly needed
variable name/label info, and in descending order for chunk_templates as one
typically wants <em>u</em>nivariates before <em>b</em>ivariates.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>na_first_in_section</code></td>
<td>
<p><em>Whether to place NAs first when sorting</em>
</p>
<p><code style="white-space: pre;">⁠scalar&lt;logical&gt;⁠</code> // <em>default:</em> <code>TRUE</code> (<code>optional</code>)
</p>
<p>Default ascending and descending sorting with <code>dplyr::arrange()</code> is to place
NAs at the end. This would have placed univariates at the end, etc. Thus,
saros places NAs first in the section. Set this to FALSE to override.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>max_width_obj, max_width_chunk, max_width_file</code></td>
<td>
<p><em>Maximum object width</em>
</p>
<p><code style="white-space: pre;">⁠scalar&lt;integer&gt;⁠</code> // <em>default:</em> <code>NULL</code> (<code>optional</code>)
</p>
<p>Maximum width for names of objects (in R/Python environment),
chunks (#| label: ) and optional files. Note, will always replace variable
labels with variable names, to avoid very long file names.
Note for filenames: Due to OneDrive having a max path of about
400 characters, this can quickly be exceeded with a long path base path,
long file names if using labels as part of structure, and hashing with
Quarto's <code>cache: true</code> feature. Thus consider restricting max_width_file
to lower than what you optimally would have wished for.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>max_width_folder_name</code></td>
<td>
<p><em>Maximum clean folder name length</em>
</p>
<p><code style="white-space: pre;">⁠scalar&lt;integer&gt;⁠</code> // <em>default:</em> <code>NULL</code> (<code>optional</code>)
</p>
<p>Whereas <code>max_width_file</code> truncates the file name, this argument truncates
the folder name. It will not impact the report or chapter names in website,
only the folders.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>sep_obj, sep_chunk, sep_file</code></td>
<td>
<p><em>Separator string</em>
</p>
<p><code style="white-space: pre;">⁠scalar&lt;character&gt;⁠</code> // <em>default:</em> <code>"_"</code> (<code>optional</code>)
</p>
<p>Separator to use between grouping variables. Defaults to underscore for
object names and hyphen for chunk labels and file names.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>...</code></td>
<td>
<p><em>Dynamic dots</em>
</p>
<p>&lt;<a href="https://rlang.r-lib.org/reference/dyn-dots.html"><code>dynamic-dots</code></a>&gt;
</p>
<p>Arguments forwarded to the corresponding functions that create the elements.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>progress</code></td>
<td>
<p><em>Whether to display progress message</em>
</p>
<p><code style="white-space: pre;">⁠scalar&lt;logical&gt;⁠</code> // <em>default:</em> <code>TRUE</code>
</p>
<p>Mostly useful when hide_bi_entry_if_sig_above &lt; 1</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>variable_group_dep</code></td>
<td>
<p><em>Name for the variable_group_dep column</em>
</p>
<p><code style="white-space: pre;">⁠scalar&lt;string&gt;⁠</code> // <em>default:</em> <code>".variable_group_dep"</code>
</p>
<p>This column is used to group variables that are part of the same bivariate analysis.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>variable_group_prefix</code></td>
<td>
<p><em>Set a prefix to more easily find it in your labels</em>
</p>
<p><code style="white-space: pre;">⁠scalar&lt;string&gt;⁠</code> // <em>default:</em> <code>NULL</code>
</p>
<p>By default, the .variable_group column is just integers. If you wish to
use this as part of your object/label/filename numbering scheme, a number
by itself will not be very informative. Hence you could set a prefix such
as "Group" to distinguish this column from other columns in the chapter_structure.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>n_range_glue_template_1, n_range_glue_template_2</code></td>
<td>
<p><code style="white-space: pre;">⁠scalar&lt;string&gt;⁠</code> // <em>default:</em> <code style="white-space: pre;">⁠"{n}" and "[{n[1]}, {n[2]}]⁠</code> (<code>optional</code>)
</p>
<p>Glue templates for the n_range columns to be created.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>log_file</code></td>
<td>
<p><em>Path to log file</em>
</p>
<p><code style="white-space: pre;">⁠scalar&lt;string&gt;⁠</code> // <em>default:</em> <code>"_log.txt"</code> (<code>optional</code>)
</p>
<p>Path to log file. Set to NULL to disable logging.</p>
</td>
</tr>
</table>
<h3>Value</h3>

<p>Grouped tibble.
</p>


<h3>Examples</h3>

<pre><code class="language-R">ref_df &lt;- refine_chapter_overview(chapter_overview = ex_survey_ch_overview)

ref_df2 &lt;- refine_chapter_overview(chapter_overview = ex_survey_ch_overview,
                     data = ex_survey, hide_bi_entry_if_sig_above=.05)

</code></pre>


</div>