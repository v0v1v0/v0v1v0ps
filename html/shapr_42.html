<div class="container">

<table style="width: 100%;"><tr>
<td>prediction</td>
<td style="text-align: right;">R Documentation</td>
</tr></table>
<h2>Calculate Shapley weights for test data</h2>

<h3>Description</h3>

<p>This function should only be called internally, and not be used as
a stand-alone function.
</p>


<h3>Usage</h3>

<pre><code class="language-R">prediction(dt, prediction_zero, explainer)
</code></pre>


<h3>Arguments</h3>

<table>
<tr style="vertical-align: top;">
<td><code>dt</code></td>
<td>
<p>data.table</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>prediction_zero</code></td>
<td>
<p>Numeric. The value to use for <code>phi_0</code>.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>explainer</code></td>
<td>
<p>An object of class <code>explainer</code>. See <code>shapr</code>.</p>
</td>
</tr>
</table>
<h3>Details</h3>

<p>If <code>dt</code> does not contain three columns called <code>id</code>, <code>id_combination</code> and <code>w</code>
the function will fail. <code>id</code> represents a unique key for a given test observation,
and <code>id_combination</code> is a unique key for which feature combination the row represents. <code>w</code>
represents the Shapley value of feature combination given by <code>id_combination</code>. In addition
to these three columns, <code>dt</code> should also have columns which matches the variables used
when training the model.
</p>
<p>I.e. you have fitted a linear model using the features <code>x1</code>,
<code>x2</code> and <code>x3</code>, and you want to explain 5 test observations using the exact method, i.e.
setting <code>exact = TRUE</code> in <code>shapr</code>, the following properties should be satisfied
</p>

<ol>
<li> <p><code>colnames(dt)</code> equals <code>c("x1", "x2", "x3", "id", "id_combination", ""w)</code>
</p>
</li>
<li> <p><code>dt[, max(id)]</code> equals the number of test observations
</p>
</li>
<li> <p><code>dt[, min(id)]</code> equals 1L.
</p>
</li>
<li> <p><code>dt[, max(id_combination)]</code> equals <code>2^m</code> where m equals the number of features.
</p>
</li>
<li> <p><code>dt[, min(id_combination)]</code> equals 1L.
</p>
</li>
<li> <p><code>dt[, type(w)]</code> equals <code>double</code>.
</p>
</li>
</ol>
<h3>Value</h3>

<p>An object of class <code>c("shapr", "list")</code>. For more details see <code>explain</code>.
</p>


<h3>Author(s)</h3>

<p>Nikolai Sellereite
</p>


</div>