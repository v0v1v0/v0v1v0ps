<div class="container">

<table style="width: 100%;"><tr>
<td>prop_dom_optimal_allocation</td>
<td style="text-align: right;">R Documentation</td>
</tr></table>
<h2>Optimal sample size allocation for proportion</h2>

<h3>Description</h3>

<p>The function computes optimal sample size allocation over strata and domain for proportion.
</p>


<h3>Usage</h3>

<pre><code class="language-R">prop_dom_optimal_allocation(
  H,
  Dom,
  pop = NULL,
  R = NULL,
  deff = NULL,
  se_max = 0.5,
  prop = 0.5,
  min_size = 3,
  step = 1,
  unit_level = TRUE,
  dataset = NULL
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr style="vertical-align: top;">
<td><code>H</code></td>
<td>
<p>The stratum variable. One dimensional object convertible to one-column <code>data.table</code> or variable name as character, column number.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>Dom</code></td>
<td>
<p>Variables</p>
</td>
</tr>
</table>
<p>used to define population domains. An object convertible to <code>data.table</code> or variable names as character vector, column numbers.
</p>
<table><tr style="vertical-align: top;">
<td><code>pop</code></td>
<td>
<p>The</p>
</td>
</tr></table>
<p>population size in each stratum.
</p>
<table><tr style="vertical-align: top;">
<td><code>R</code></td>
<td>
<p>The</p>
</td>
</tr></table>
<p>expected response rate in each stratum (optional). If not defined, it is assumed to be 1 in each stratum (full-response). Object convertible to one-column <code>data.table</code>, variable name as character, or column number.
</p>
<table><tr style="vertical-align: top;">
<td><code>deff</code></td>
<td>
<p>The</p>
</td>
</tr></table>
<p>expected design effect for the estimate of variable (optional). If not defined, it is assumed to be 1 for each variable in each stratum. If is defined, then variables is defined the same arrangement as <code>Yh</code>. Object convertible to <code>data.table</code>, variable name as character vector, or column numbers.
</p>
<table><tr style="vertical-align: top;">
<td><code>se_max</code></td>
<td>
<p>Variable</p>
</td>
</tr></table>
<p>for maximum standarterror (se) in domain.
</p>
<table><tr style="vertical-align: top;">
<td><code>prop</code></td>
<td>
<p>The</p>
</td>
</tr></table>
<p>excepted ratio proportion.
</p>
<table><tr style="vertical-align: top;">
<td><code>min_size</code></td>
<td>
<p>A</p>
</td>
</tr></table>
<p>numeric value for minimal sample size.
</p>
<table><tr style="vertical-align: top;">
<td><code>step</code></td>
<td>
<p>A</p>
</td>
</tr></table>
<p>value for pace.
</p>
<table><tr style="vertical-align: top;">
<td><code>unit_level</code></td>
<td>
<p>A</p>
</td>
</tr></table>
<p>logical value, if dataset is prepared for unit level then value TRUE, othercase FALSE.
</p>
<table><tr style="vertical-align: top;">
<td><code>dataset</code></td>
<td>
<p>Optional</p>
</td>
</tr></table>
<p>agrregated survey data object convertible to <code>data.table</code> with one row for each stratum.
</p>


<h3>Value</h3>

<p>A list with two data objects:
</p>
<table>
<tr style="vertical-align: top;">
<td><code>datah</code></td>
<td>
<p>An object as <code>data.table</code>, with variables: <br><code>H</code> - the unit stratum variable, <br><code>Dom</code> - variables used to define population domains, <br><code>poph</code> - the population size in each stratum, <br><code>Rh</code> - the expected response rate in each stratum, <br><code>deffh</code> - the expected design effect, <br><code>s2h</code> - variance in domain of stratum, <br><code>sup_cv</code> - Variable for maximum coeficient of variation, <br><code>poph</code> - population size, <br><code>nh</code> - sample size .</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>aggr_Dom</code></td>
<td>
<p>An object as <code>data.table</code>, with variables: <br><code>Dom</code> - optional variables used to define population domains, <br><code>pop_Dom</code> - population size, <br><code>sample_size_Dom</code> - optional variables used to define population domains, <br><code>sample_size</code> - optional variables used to define population domains, <br><code>pop</code> - sample size</p>
</td>
</tr>
</table>
<h3>See Also</h3>

<p><code>expsize</code>, <code>optsize</code>, <code>dom_optimal_allocation</code>
</p>


<h3>Examples</h3>

<pre><code class="language-R">library("data.table")
library("laeken")
data("eusilc")
eusilc &lt;- data.table(eusilc)
dataset &lt;- eusilc[, .(poph = sum(db090)), by = c("db040")]
dataset[, dom := "1"]
res &lt;- prop_dom_optimal_allocation(H = "db040", Dom = "dom",
                                   pop = "poph", R = NULL,
                                   deff = NULL, se_max = 0.5,
                                   prop = 0.5, min_size = 3,
                                   step = 1, unit_level = FALSE,
                                   dataset = dataset)

</code></pre>


</div>