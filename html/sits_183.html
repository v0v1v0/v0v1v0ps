<div class="container">

<table style="width: 100%;"><tr>
<td>sits_segment</td>
<td style="text-align: right;">R Documentation</td>
</tr></table>
<h2>Segment an image</h2>

<h3>Description</h3>

<p>Apply a spatial-temporal segmentation on a data cube based on a user defined
segmentation function. The function applies the segmentation algorithm
"seg_fn" to each tile.
</p>
<p>Segmentation uses the following steps:
</p>

<ol>
<li>
<p> Create a regular data cube with <code>sits_cube</code> and
<code>sits_regularize</code>;
</p>
</li>
<li>
<p> Run <code>sits_segment</code> to obtain a vector data cube
with polygons that define the boundary of the segments;
</p>
</li>
<li>
<p> Classify the time series associated to the segments
with <code>sits_classify</code>, to get obtain
a vector probability cube;
</p>
</li>
<li>
<p> Use <code>sits_label_classification</code> to label the
vector probability cube;
</p>
</li>
<li>
<p> Display the results with <code>plot</code> or
<code>sits_view</code>.
</p>
</li>
</ol>
<h3>Usage</h3>

<pre><code class="language-R">sits_segment(
  cube,
  seg_fn = sits_slic(),
  roi = NULL,
  impute_fn = impute_linear(),
  start_date = NULL,
  end_date = NULL,
  memsize = 8,
  multicores = 2,
  output_dir,
  version = "v1",
  progress = TRUE
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr style="vertical-align: top;">
<td><code>cube</code></td>
<td>
<p>Regular data cube</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>seg_fn</code></td>
<td>
<p>Function to apply the segmentation</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>roi</code></td>
<td>
<p>Region of interest (see below)</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>impute_fn</code></td>
<td>
<p>Imputation function to remove NA values.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>start_date</code></td>
<td>
<p>Start date for the segmentation</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>end_date</code></td>
<td>
<p>End date for the segmentation.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>memsize</code></td>
<td>
<p>Memory available for classification (in GB).</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>multicores</code></td>
<td>
<p>Number of cores to be used for classification.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>output_dir</code></td>
<td>
<p>Directory for output file.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>version</code></td>
<td>
<p>Version of the output (for multiple
segmentations).</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>progress</code></td>
<td>
<p>Show progress bar?</p>
</td>
</tr>
</table>
<h3>Value</h3>

<p>A tibble of class 'segs_cube' representing the
segmentation.
</p>


<h3>Note</h3>

<p>The "roi" parameter defines a region of interest. It can be
an sf_object, a shapefile, or a bounding box vector with
named XY values ("xmin", "xmax", "ymin", "ymax") or
named lat/long values ("lon_min", "lat_min", "lon_max", "lat_max")
</p>


<h3>Author(s)</h3>

<p>Gilberto Camara, <a href="mailto:gilberto.camara@inpe.br">gilberto.camara@inpe.br</a>
</p>
<p>Rolf Simoes, <a href="mailto:rolf.simoes@inpe.br">rolf.simoes@inpe.br</a>
</p>
<p>Felipe Carvalho, <a href="mailto:felipe.carvalho@inpe.br">felipe.carvalho@inpe.br</a>
</p>


<h3>Examples</h3>

<pre><code class="language-R">if (sits_run_examples()) {
    data_dir &lt;- system.file("extdata/raster/mod13q1", package = "sits")
    # create a data cube
    cube &lt;- sits_cube(
        source = "BDC",
        collection = "MOD13Q1-6.1",
        data_dir = data_dir
    )
    # segment the vector cube
    segments &lt;- sits_segment(
        cube = cube,
        output_dir = tempdir()
    )
    # create a classification model
    rfor_model &lt;- sits_train(samples_modis_ndvi, sits_rfor())
    # classify the segments
    seg_probs &lt;- sits_classify(
        data = segments,
        ml_model = rfor_model,
        output_dir = tempdir()
    )
    # label the probability segments
    seg_label &lt;- sits_label_classification(
        cube = seg_probs,
        output_dir = tempdir()
    )
}
</code></pre>


</div>