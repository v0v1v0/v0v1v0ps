<div class="container">

<table style="width: 100%;"><tr>
<td>register_onexit</td>
<td style="text-align: right;">R Documentation</td>
</tr></table>
<h2>Append slackr_msg as on.exit to functions.</h2>

<h3>Description</h3>

<p>Appends to the body of a function an on.exit call to run at the end of the call.
</p>


<h3>Usage</h3>

<pre><code class="language-R">register_onexit(
  f,
  ...,
  header_msg = NULL,
  use_device = FALSE,
  env = parent.frame(2),
  channel = Sys.getenv("SLACK_CHANNEL"),
  username = Sys.getenv("SLACK_USERNAME"),
  icon_emoji = Sys.getenv("SLACK_ICON_EMOJI"),
  token = Sys.getenv("SLACK_TOKEN")
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr style="vertical-align: top;">
<td><code>f</code></td>
<td>
<p>function or character.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>...</code></td>
<td>
<p>expressions to be sent to Slack.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>header_msg</code></td>
<td>
<p>boolean, message to append to start of Slack output, Default: NULL.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>use_device</code></td>
<td>
<p>boolean, passes current image in the graphics device to Slack as part of f,
Default: FALSE.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>env</code></td>
<td>
<p>environment to assign appended function to with relation to the function environment,
Default: parent.frame(2) (global environment).</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>channel</code></td>
<td>
<p>Channel, private group, or IM channel to send message to. Can be an encoded ID, or a name. See the <a href="https://api.slack.com/methods/chat.postMessage#channels">chat.postMessage endpoint documentation</a> for details.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>username</code></td>
<td>
<p>what user should the bot be named as (chr).</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>icon_emoji</code></td>
<td>
<p>what emoji to use (chr) <code>""</code> will mean use the default.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>token</code></td>
<td>
<p>Authentication token bearing required scopes.</p>
</td>
</tr>
</table>
<h3>Details</h3>

<p>If a character is passed to f then it will evaluate internally to a function.
</p>


<h3>Value</h3>

<p>function
</p>


<h3>Author(s)</h3>

<p>Jonathan Sidi (aut)
</p>


<h3>See Also</h3>

<p><code>slackr_msg()</code>
</p>


<h3>Examples</h3>

<pre><code class="language-R">## Not run: 
ctl &lt;- c(4.17, 5.58, 5.18, 6.11, 4.50, 4.61, 5.17, 4.53, 5.33, 5.14)
trt &lt;- c(4.81, 4.17, 4.41, 3.59, 5.87, 3.83, 6.03, 4.89, 4.32, 4.69)
group &lt;- gl(2, 10, 20, labels = c("Ctl", "Trt"))
weight &lt;- c(ctl, trt)

# pass a message to Slack channel 'general'
register_onexit(lm, "bazinga!", channel = "#general")

lm.D9 &lt;- slack_lm(weight ~ group)

# test that output keeps inheritance
summary(lm.D9)

# pass a message to Slack channel 'general' with a header message to begin output
register_onexit(
  lm,
  "bazinga!",
  channel = "#general",
  header_msg = "This is a message to begin"
)

lm.D9 &lt;- slack_lm(weight ~ group)

# onexit with an expression that calls lm.plot
register_onexit(
  lm,
  {
    par(mfrow = c(2, 2), oma = c(0, 0, 2, 0))
    plot(z)
  },
  channel = "#general",
  header_msg = "This is a plot just for this output",
  use_device = TRUE
)

lm.D9 &lt;- slack_lm(weight ~ group)

# clean up slack channel from examples
slackr_delete(count = 6, channel = "#general")

## End(Not run)

</code></pre>


</div>