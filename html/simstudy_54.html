<div class="container">

<table style="width: 100%;"><tr>
<td>genOrdCat</td>
<td style="text-align: right;">R Documentation</td>
</tr></table>
<h2>Generate ordinal categorical data</h2>

<h3>Description</h3>

<p>Ordinal categorical data is added to an existing data set.
Correlations can be added via correlation matrix or <code>rho</code> and <code>corstr</code>.
</p>


<h3>Usage</h3>

<pre><code class="language-R">genOrdCat(
  dtName,
  adjVar = NULL,
  baseprobs,
  catVar = "cat",
  asFactor = TRUE,
  idname = "id",
  prefix = "grp",
  rho = 0,
  corstr = "ind",
  corMatrix = NULL,
  npVar = NULL,
  npAdj = NULL
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr style="vertical-align: top;">
<td><code>dtName</code></td>
<td>
<p>Name of complete data set</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>adjVar</code></td>
<td>
<p>Adjustment variable  name in dtName - determines
logistic shift. This is specified assuming a cumulative logit
link.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>baseprobs</code></td>
<td>
<p>Baseline probability expressed as a vector or matrix of
probabilities. The values (per row) must sum to &lt;= 1. If <code>rowSums(baseprobs) &lt; 1</code>, an additional category is added with probability <code>1 - rowSums(baseprobs)</code>. The number of rows represents the number of new
categorical variables. The number of columns represents the number of
possible responses - if an particular category has fewer possible responses,
assign zero probability to non-relevant columns.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>catVar</code></td>
<td>
<p>Name of the new categorical field. Defaults to "cat". Can be a
character vector with a name for each new variable defined via <code>baseprobs</code>.
Will be overridden by <code>prefix</code> if more than one variable is defined and
<code>length(catVar) == 1</code>.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>asFactor</code></td>
<td>
<p>If <code>asFactor == TRUE</code> (default), new field is returned
as a factor. If <code>asFactor == FALSE</code>, new field is returned as an integer.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>idname</code></td>
<td>
<p>Name of the id column in <code>dtName</code>.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>prefix</code></td>
<td>
<p>A string. The names of the new variables will be a
concatenation of the prefix and a sequence of integers indicating the
variable number.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>rho</code></td>
<td>
<p>Correlation coefficient, -1 &lt; rho &lt; 1. Use if corMatrix is not
provided.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>corstr</code></td>
<td>
<p>Correlation structure of the variance-covariance matrix defined
by sigma and rho. Options include "ind" for an independence structure, "cs"
for a compound symmetry structure, and "ar1" for an autoregressive structure.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>corMatrix</code></td>
<td>
<p>Correlation matrix can be entered directly. It must be
symmetrical and positive definite. It is not a required field; if a matrix is
not provided, then a structure and correlation coefficient rho must be
specified. (The matrix created via <code>rho</code> and <code>corstr</code> must also be positive
definite.)</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>npVar</code></td>
<td>
<p>Vector of variable names that indicate which variables are to
violate the proportionality assumption.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>npAdj</code></td>
<td>
<p>Matrix with a row for each npVar and a column for each category.
Each value represents the deviation from the proportional odds assumption on
the logistic scale.</p>
</td>
</tr>
</table>
<h3>Value</h3>

<p>Original data.table with added categorical field.
</p>


<h3>Examples</h3>

<pre><code class="language-R"># Ordinal Categorical Data ----

def1 &lt;- defData(
  varname = "male",
  formula = 0.45, dist = "binary", id = "idG"
)
def1 &lt;- defData(def1,
  varname = "z",
  formula = "1.2*male", dist = "nonrandom"
)
def1

## Generate data

set.seed(20)

dx &lt;- genData(1000, def1)

probs &lt;- c(0.40, 0.25, 0.15)

dx &lt;- genOrdCat(dx,
  adjVar = "z", idname = "idG", baseprobs = probs,
  catVar = "grp"
)
dx

# Correlated Ordinal Categorical Data ----

baseprobs &lt;- matrix(c(
  0.2, 0.1, 0.1, 0.6,
  0.7, 0.2, 0.1, 0,
  0.5, 0.2, 0.3, 0,
  0.4, 0.2, 0.4, 0,
  0.6, 0.2, 0.2, 0
),
nrow = 5, byrow = TRUE
)

set.seed(333)
dT &lt;- genData(1000)

dX &lt;- genOrdCat(dT,
  adjVar = NULL, baseprobs = baseprobs,
  prefix = "q", rho = .125, corstr = "cs", asFactor = FALSE
)
dX

dM &lt;- data.table::melt(dX, id.vars = "id")
dProp &lt;- dM[, prop.table(table(value)), by = variable]
dProp[, response := c(1:4, 1:3, 1:3, 1:3, 1:3)]

data.table::dcast(dProp, variable ~ response,
  value.var = "V1", fill = 0
)

# proportional odds assumption violated

d1 &lt;- defData(varname = "rx", formula = "1;1", dist = "trtAssign")
d1 &lt;- defData(d1, varname = "z", formula = "0 - 1.2*rx", dist = "nonrandom")

dd &lt;- genData(1000, d1)

baseprobs &lt;- c(.4, .3, .2, .1)
npAdj &lt;- c(0, 1, 0, 0)

dn &lt;- genOrdCat(
  dtName = dd, adjVar = "z",
  baseprobs = baseprobs,
  npVar = "rx", npAdj = npAdj
)

</code></pre>


</div>