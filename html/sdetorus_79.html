<div class="container">

<table style="width: 100%;"><tr>
<td>safeSoftMax</td>
<td style="text-align: right;">R Documentation</td>
</tr></table>
<h2>Safe softmax function for computing weights</h2>

<h3>Description</h3>

<p>Computes the weights <code class="reqn">w_i = \frac{e^{p_i}}{\sum_{j=1}^k e^{p_j}}</code> from <code class="reqn">p_i</code>, <code class="reqn">i=1,\ldots,k</code>
in a safe way to avoid overflows and to truncate automatically to zero low values of <code class="reqn">w_i</code>.
</p>


<h3>Usage</h3>

<pre><code class="language-R">safeSoftMax(logs, expTrc = 30)
</code></pre>


<h3>Arguments</h3>

<table>
<tr style="vertical-align: top;">
<td><code>logs</code></td>
<td>
<p>matrix of logarithms where each row contains a set of <code class="reqn">p_1,\ldots,p_k</code> to compute the weights from.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>expTrc</code></td>
<td>
<p>truncation for exponential: <code>exp(x)</code> with <code>x &lt;= -expTrc</code> is set to zero. Defaults to <code>30</code>.</p>
</td>
</tr>
</table>
<h3>Details</h3>

<p>The <code>logs</code> argument must be always a matrix.
</p>


<h3>Value</h3>

<p>A matrix of the size as <code>logs</code> containing the weights for each row.
</p>


<h3>Examples</h3>

<pre><code class="language-R"># A matrix
safeSoftMax(rbind(1:10, 20:11))
rbind(exp(1:10) / sum(exp(1:10)), exp(20:11) / sum(exp(20:11)))

# A row-matrix
safeSoftMax(rbind(-100:100), expTrc = 30)
exp(-100:100) / sum(exp(-100:100))
</code></pre>


</div>