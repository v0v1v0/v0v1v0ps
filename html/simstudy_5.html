<div class="container">

<table style="width: 100%;"><tr>
<td>addCorData</td>
<td style="text-align: right;">R Documentation</td>
</tr></table>
<h2>Add correlated data to existing data.table</h2>

<h3>Description</h3>

<p>Add correlated data to existing data.table
</p>


<h3>Usage</h3>

<pre><code class="language-R">addCorData(
  dtOld,
  idname,
  mu,
  sigma,
  corMatrix = NULL,
  rho,
  corstr = "ind",
  cnames = NULL
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr style="vertical-align: top;">
<td><code>dtOld</code></td>
<td>
<p>Data table that is the new columns will be appended to.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>idname</code></td>
<td>
<p>Character name of id field, defaults to "id".</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>mu</code></td>
<td>
<p>A vector of means. The length of mu must be nvars.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>sigma</code></td>
<td>
<p>Standard deviation of variables. If standard deviation differs
for each variable, enter as a vector with the same length as the mean vector
mu. If the standard deviation is constant across variables, as single value
can be entered.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>corMatrix</code></td>
<td>
<p>Correlation matrix can be entered directly. It must be
symmetrical and positive semi-definite. It is not a required field; if a
matrix is not provided, then a structure and correlation coefficient rho must
be specified.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>rho</code></td>
<td>
<p>Correlation coefficient, -1 &lt;= rho &lt;= 1. Use if corMatrix is not
provided.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>corstr</code></td>
<td>
<p>Correlation structure of the variance-covariance matrix
defined by sigma and rho. Options include "ind" for an independence
structure, "cs" for a compound symmetry structure, and "ar1" for an
autoregressive structure.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>cnames</code></td>
<td>
<p>Explicit column names. A single string with names separated
by commas. If no string is provided, the default names will be V#, where #
represents the column.</p>
</td>
</tr>
</table>
<h3>Value</h3>

<p>The original data table with the additional correlated columns
</p>


<h3>Examples</h3>

<pre><code class="language-R">def &lt;- defData(varname = "xUni", dist = "uniform", formula = "10;20", id = "myID")
def &lt;- defData(def,
  varname = "xNorm", formula = "xUni * 2", dist = "normal",
  variance = 8
)

dt &lt;- genData(250, def)

mu &lt;- c(3, 8, 15)
sigma &lt;- c(1, 2, 3)

dtAdd &lt;- addCorData(dt, "myID",
  mu = mu, sigma = sigma,
  rho = .7, corstr = "cs"
)
dtAdd

round(var(dtAdd[, .(V1, V2, V3)]), 3)
round(cor(dtAdd[, .(V1, V2, V3)]), 2)

dtAdd &lt;- addCorData(dt, "myID",
  mu = mu, sigma = sigma,
  rho = .7, corstr = "ar1"
)
round(cor(dtAdd[, .(V1, V2, V3)]), 2)

corMat &lt;- matrix(c(1, .2, .8, .2, 1, .6, .8, .6, 1), nrow = 3)

dtAdd &lt;- addCorData(dt, "myID",
  mu = mu, sigma = sigma,
  corMatrix = corMat
)
round(cor(dtAdd[, .(V1, V2, V3)]), 2)
</code></pre>


</div>