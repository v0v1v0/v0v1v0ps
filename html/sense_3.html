<div class="container">

<table style="width: 100%;"><tr>
<td>sense</td>
<td style="text-align: right;">R Documentation</td>
</tr></table>
<h2>sense</h2>

<h3>Description</h3>

<p>Stacked ensamble for regression tasks based on 'mlr3' framework.
</p>


<h3>Usage</h3>

<pre><code class="language-R">sense(
  df,
  target_feat,
  benchmarking = "all",
  super = "avg",
  algos = c("glmnet", "ranger", "xgboost", "rpart", "kknn", "svm"),
  sampling_rate = 1,
  metric = "mae",
  collapse_char_to = 10,
  num_preproc = "scale",
  fct_preproc = "one-hot",
  impute_num = "sample",
  missing_fusion = FALSE,
  inner = "holdout",
  outer = "holdout",
  folds = 3,
  repeats = 3,
  ratio = 0.5,
  selected_filter = "information_gain",
  selected_n_feats = NULL,
  tuning = "random_search",
  budget = 30,
  resolution = 5,
  n_evals = 30,
  minute_time = 10,
  patience = 0.3,
  min_improve = 0.01,
  java_mem = 64,
  decimals = 2,
  seed = 42
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr style="vertical-align: top;">
<td><code>df</code></td>
<td>
<p>A data frame with features and target.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>target_feat</code></td>
<td>
<p>String. Name of the numeric feature for the regression task.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>benchmarking</code></td>
<td>
<p>Positive integer. Number of base learners to stack. Default: "all".</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>super</code></td>
<td>
<p>String. Super learner of choice among the available learners. Default: "avg".</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>algos</code></td>
<td>
<p>String vector. Available learners are: "glmnet", "ranger", "xgboost", "rpart", "kknn", "svm".</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>sampling_rate</code></td>
<td>
<p>Positive numeric. Sampling rate before applying the stacked ensemble. Default: 1.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>metric</code></td>
<td>
<p>String. Evaluation metric for outer and inner cross-validation. Default: "mae".</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>collapse_char_to</code></td>
<td>
<p>Positive integer. Conversion of characters to  factors with predefined maximum number of levels. Default: 10.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>num_preproc</code></td>
<td>
<p>String. Options for scalar pre-processing: "scale" or "range". Default: "scale".</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>fct_preproc</code></td>
<td>
<p>String. Options for factor pre-processing: "encodeimpact", "encodelmer", "one-hot", "treatment", "poly", "sum", "helmert". Default: "one-hot".</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>impute_num</code></td>
<td>
<p>String. Options for missing imputation in case of numeric: "sample" or "hist". Default: "sample". For factor the default mode is Out-Of-Range.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>missing_fusion</code></td>
<td>
<p>String. Adding missing indicator features. Default: "FALSE".</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>inner</code></td>
<td>
<p>String. Cross-validation inner cycle: "holdout", "cv", "repeated_cv", "subsampling". Default: "holdout".</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>outer</code></td>
<td>
<p>String. Cross-validation outer cycle: "holdout", "cv", "repeated_cv", "subsampling". Default: "holdout".</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>folds</code></td>
<td>
<p>Positive integer. Number of repetitions used in "cv" and "repeated_cv". Default: 3.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>repeats</code></td>
<td>
<p>Positive integer. Number of repetitions used in "subsampling" and "repeated_cv". Default: 3.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>ratio</code></td>
<td>
<p>Positive numeric. Percentage value for "holdout" and "subsampling". Default: 0.5.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>selected_filter</code></td>
<td>
<p>String. Filters available for regression tasks: "carscore", "cmim", "correlation", "find_correlation", "information_gain", "relief", "variance". Default: "information_gain".</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>selected_n_feats</code></td>
<td>
<p>Positive integer. Number of features to select through the chosen filter. Default: NULL.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>tuning</code></td>
<td>
<p>String. Available options are "random_search" and "grid_search". Default: "random_search".</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>budget</code></td>
<td>
<p>Positive integer. Maximum number of trials during random search. Default: 30.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>resolution</code></td>
<td>
<p>Positive integer. Grid resolution for each hyper-parameter. Default: 5.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>n_evals</code></td>
<td>
<p>Positive integer. Number of evaluation for termination. Default: 30.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>minute_time</code></td>
<td>
<p>Positive integer. Maximum run time before termination. Default: 10.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>patience</code></td>
<td>
<p>Positive numeric. Percentage of stagnating evaluations before termination. Default: 0.3.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>min_improve</code></td>
<td>
<p>Positive numeric. Minimum error improvement required before termination. Default: 0.01.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>java_mem</code></td>
<td>
<p>Positive integer. Memory allocated to Java. Default: 64.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>decimals</code></td>
<td>
<p>Positive integer. Decimal format of prediction. Default: 2.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>seed</code></td>
<td>
<p>Positive integer. Default: 42.</p>
</td>
</tr>
</table>
<h3>Value</h3>

<p>This function returns a list including:
</p>

<ul>
<li>
<p> benchmark_error: comparison between the base learners
</p>
</li>
<li>
<p> resampled_model: mlr3 standard description of the analytic pipeline.
</p>
</li>
<li>
<p> plot: mlr3 standard graph of the analytic pipeline.
</p>
</li>
<li>
<p> selected_n_feats: selected features and score according to the filtering method used.
</p>
</li>
<li>
<p> model_error: error measure for outer cycle of cross-validation.
</p>
</li>
<li>
<p> testing_frame: data set used for calculating the test metrics.
</p>
</li>
<li>
<p> test_metrics: metrics reported are mse, rmse, mae, mape, mdae, rae, rse, rrse, smape.
</p>
</li>
<li>
<p> model_predict: prediction function to apply to new data on the same scheme.
</p>
</li>
<li>
<p> time_log: computation time.
</p>
</li>
</ul>
<h3>Author(s)</h3>

<p>Giancarlo Vercellino <a href="mailto:giancarlo.vercellino@gmail.com">giancarlo.vercellino@gmail.com</a>
</p>


<h3>See Also</h3>

<p>Useful links:
</p>

<ul><li> <p><a href="https://mlr3.mlr-org.com/">https://mlr3.mlr-org.com/</a>
</p>
</li></ul>
<h3>Examples</h3>

<pre><code class="language-R">## Not run: 
sense(benchmark, "y", algos = c("glmnet", "rpart"))


## End(Not run)

</code></pre>


</div>