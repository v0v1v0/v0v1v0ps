<div class="container">

<table style="width: 100%;"><tr>
<td>setartree</td>
<td style="text-align: right;">R Documentation</td>
</tr></table>
<h2>Fitting SETAR-Tree models</h2>

<h3>Description</h3>

<p>Fits a SETAR-Tree model either using a list of time series or an embedded input matrix and labels.
</p>


<h3>Usage</h3>

<pre><code class="language-R">setartree(
  data,
  label = NULL,
  lag = 10,
  depth = 1000,
  significance = 0.05,
  significance_divider = 2,
  error_threshold = 0.03,
  stopping_criteria = "both",
  mean_normalisation = FALSE,
  window_normalisation = FALSE,
  verbose = 2,
  categorical_covariates = NULL
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr style="vertical-align: top;">
<td><code>data</code></td>
<td>
<p>A list of time series (each list element is a separate time series) or a dataframe/matrix containing model inputs (the columns can contain past time series lags and/or external numerical/categorical covariates).</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>label</code></td>
<td>
<p>A vector of true outputs. This parameter is only required when <code>data</code> is a dataframe/matrix containing the model inputs.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>lag</code></td>
<td>
<p>The number of past time series lags that should be used when fitting the SETAR-Tree. This parameter is only required when <code>data</code> is a list of time series. Default value is 10.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>depth</code></td>
<td>
<p>Maximum tree depth. Default value is 1000. Thus, unless specify a lower value, the depth is actually controlled by the stopping criterion.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>significance</code></td>
<td>
<p>Initial significance used by the linearity test (alpha_0). Default value is 0.05.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>significance_divider</code></td>
<td>
<p>The corresponding significance in each tree level is divided by this value. Default value is 2.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>error_threshold</code></td>
<td>
<p>The minimum error reduction percentage between parent and child nodes to make a split. Default value is 0.03.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>stopping_criteria</code></td>
<td>
<p>The required stopping criteria: linearity test (lin_test), error reduction percentage (error_imp) or linearity test and error reduction percentage (both). Default value is <code>"both"</code>.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>mean_normalisation</code></td>
<td>
<p>Whether each series should be normalised by deducting its mean value before building the tree. This parameter is only required when <code>data</code> is a list of time series. Default value is FALSE.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>window_normalisation</code></td>
<td>
<p>Whether the window-wise normalisation should be applied before building the tree. This parameter is only required when <code>data</code> is a list of time series. When this is TRUE, each row of the training embedded matrix is normalised by deducting its mean value before building the tree. Default value is FALSE.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>verbose</code></td>
<td>
<p>Controls the level of the verbosity of SETAR-Tree: 0 (errors/warnings), 1 (limited amount of information including the current tree depth), 2 (full training information including the current tree depth and stopping criterion results in each tree node). Default value is 2.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>categorical_covariates</code></td>
<td>
<p>Names of the categorical covariates in the input data. This parameter is only required when <code>data</code> is a dataframe/matrix and it contains categorical variables.</p>
</td>
</tr>
</table>
<h3>Value</h3>

<p>An object of class <code>setartree</code> which contains the following properties.
</p>
<table>
<tr style="vertical-align: top;">
<td><code>leaf_models</code></td>
<td>
<p>Trained global pooled regression models in each leaf node.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>opt_lags</code></td>
<td>
<p>Optimal features used to split each node.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>opt_thresholds</code></td>
<td>
<p>Optimal threshold values used to split each node.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>lag</code></td>
<td>
<p>The number of features used to train the SETAR-Tree.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>feature_names</code></td>
<td>
<p>Names of the input features.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>coefficients</code></td>
<td>
<p>Names of the coefficients of leaf node regresion models.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>num_leaves</code></td>
<td>
<p>Number of leaf nodes in the SETAR-Tree.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>depth</code></td>
<td>
<p>Depth of the SETAR-Tree which was determined based on the specified stopping criterion.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>leaf_instance_dis</code></td>
<td>
<p>Number of instances used to train the regression models at each leaf node.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>stds</code></td>
<td>
<p>The standard deviations of the residuals of each leaf node.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>categorical_covariate_values</code></td>
<td>
<p>Information about the categorical covarites used during training (only if applicable).</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>mean_normalisation</code></td>
<td>
<p>Whether mean normalisation was applied for the training data.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>window_normalisation</code></td>
<td>
<p>Whether window normalisation was applied for the training data.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>input_type</code></td>
<td>
<p>Type of input data used to train the SETAR-Tree. This is <code>list</code> if <code>data</code> is a list of time series, and <code>df</code> if <code>data</code> is a dataframe/matrix containing model inputs.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>execution_time</code></td>
<td>
<p>Execution time of SETAR-Tree.</p>
</td>
</tr>
</table>
<h3>Examples</h3>

<pre><code class="language-R">
# Training SETAR-Tree with a list of time series
setartree(chaotic_logistic_series)

# Training SETAR-Tree with a dataframe containing model inputs where the model inputs may contain
# past time series lags and numerical/categorical covariates
setartree(data = web_traffic_train[,-1],
          label = web_traffic_train[,1],
          stopping_criteria = "both",
          categorical_covariates = "Project")


</code></pre>


</div>