<div class="container">

<table style="width: 100%;"><tr>
<td>geom_scatterpie</td>
<td style="text-align: right;">R Documentation</td>
</tr></table>
<h2>geom_scatterpie</h2>

<h3>Description</h3>

<p>scatter pie plot
</p>


<h3>Usage</h3>

<pre><code class="language-R">geom_scatterpie(
  mapping = NULL,
  data = NULL,
  cols,
  pie_scale = 1,
  sorted_by_radius = FALSE,
  legend_name = "type",
  long_format = FALSE,
  label_radius = NULL,
  label_show_ratio = TRUE,
  label_threshold = 0,
  donut_radius = NULL,
  bg_circle_radius = NULL,
  ...
)

geom_scatterpie2(
  mapping = NULL,
  data,
  cols,
  pie_scale = 1,
  sorted_by_radius = FALSE,
  legend_name = "type",
  long_format = FALSE,
  label_radius = NULL,
  label_show_ratio = TRUE,
  label_threshold = 0,
  donut_radius = NULL,
  bg_circle_radius = NULL,
  ...
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr style="vertical-align: top;">
<td><code>mapping</code></td>
<td>
<p>aes mapping</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>data</code></td>
<td>
<p>data</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>cols</code></td>
<td>
<p>cols the pie data</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>pie_scale</code></td>
<td>
<p>amount to scale the pie size if there is no radius mapping exists</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>sorted_by_radius</code></td>
<td>
<p>whether plotting large pie first</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>legend_name</code></td>
<td>
<p>name of fill legend</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>long_format</code></td>
<td>
<p>logical whether use long format of input data</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>label_radius</code></td>
<td>
<p>numeric the radius of label position (relative the radius of pie),
default is NULL, when it is provided, the ratio or value label will be displayed.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>label_show_ratio</code></td>
<td>
<p>logical only work when <code>label_radius</code> is not NULL,
default is TRUE, meaning the ratio of label will be displayed.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>label_threshold</code></td>
<td>
<p>numeric the threshold is to control display the label, the ratio of 
slice pie smaller than the threshold will not be displayed. default is 0.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>donut_radius</code></td>
<td>
<p>numeric the radius of donut chart (relative the radius of circle), default is NULL.
it should be between 0 and 1, if it is provided, the donut chart will be displayed instead of pie chart.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>bg_circle_radius</code></td>
<td>
<p>numeric the radius of background circle, default is FALSE, we suggest setting it 
to between 1 and 1.5 .</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>...</code></td>
<td>
<p>additional parameters</p>
</td>
</tr>
</table>
<h3>Value</h3>

<p>layer
</p>


<h3>Author(s)</h3>

<p>Guangchuang Yu
</p>


<h3>Examples</h3>

<pre><code class="language-R">library(ggplot2)
d &lt;- data.frame(x=rnorm(5), y=rnorm(5))
d$A &lt;- abs(rnorm(5, sd=1))
d$B &lt;- abs(rnorm(5, sd=2))
d$C &lt;- abs(rnorm(5, sd=3))

ggplot() + 
geom_scatterpie(
  aes(x=x, y=y), data=d, cols=c("A", "B", "C")
) + 
coord_fixed()

ggplot() + 
geom_scatterpie(
  aes(x=x, y=y), data = d, cols=c("A", "B", "C"), 
  label_radius=1.05
) + 
coord_fixed()

d &lt;- tidyr::gather(d, key="letters", value="value", -x:-y)
ggplot() + geom_scatterpie(aes(x=x, y=y), data=d, cols="letters", long_format=TRUE) + coord_fixed()
p1 &lt;- ggplot() + 
      geom_scatterpie(
        mapping = aes(x=x, y=y), data=d, cols="letters", 
        long_format=TRUE, 
        donut_radius=.5
      ) + 
      coord_fixed()
p1
p2 &lt;- ggplot() + 
      geom_scatterpie(
        mapping = aes(x=x, y=y), data=d, cols="letters", 
        long_format=TRUE, 
        donut_radius = .5, 
        bg_circle_radius = 1.2
      ) + 
      coord_fixed()
p2
d |&gt; dplyr::select(c(x, y)) |&gt; dplyr::distinct() |&gt; dplyr::mutate(Cell=c('A','A','B','C','B')) -&gt; d2
d |&gt; dplyr::left_join(d2) -&gt; d3
d3$r_size &lt;- c(2, 3, 4, 5, 6) * .01

head(d3)
p3 &lt;- ggplot() +
     geom_scatterpie(data = d3, mapping = aes(x=x, y=y, r = r_size, color=Cell), cols="letters",
                     long_format=TRUE, donut_radius=.5, color = NA, linewidth=2,
                      bg_circle_radius=1.2) + coord_fixed()
p3

p4 &lt;- ggplot() +
      geom_scatterpie(data = d3,
                      mapping = aes(x, y = y, r = r_size),
                      cols = 'letters',
                      long_format = TRUE,
                      label_radius = 1.1,
                      label_show_ratio = FALSE,
                      label_threshold = 0.06,
                      fontsize = 3
      ) +
      coord_fixed()
p4
</code></pre>


</div>