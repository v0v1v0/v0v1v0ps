<div class="container">

<table style="width: 100%;"><tr>
<td>decomp_cj</td>
<td style="text-align: right;">R Documentation</td>
</tr></table>
<h2>Simple trend decomposition of monthly swmpr data</h2>

<h3>Description</h3>

<p>Decompose monthly SWMP time series into grandmean, annual, seasonal, and event series as described in Cloern and Jassby 2010.
</p>


<h3>Usage</h3>

<pre><code class="language-R">decomp_cj(dat_in, ...)

## S3 method for class 'swmpr'
decomp_cj(
  dat_in,
  param,
  vals_out = FALSE,
  event = TRUE,
  type = c("add", "mult"),
  center = c("mean", "median"),
  ...
)

## Default S3 method:
decomp_cj(
  dat_in,
  param,
  date_col,
  vals_out = FALSE,
  event = TRUE,
  type = c("add", "mult"),
  center = c("mean", "median"),
  ...
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr style="vertical-align: top;">
<td><code>dat_in</code></td>
<td>
<p>input data object</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>...</code></td>
<td>
<p>additional arguments passed to or from other methods</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>param</code></td>
<td>
<p>chr string of variable to decompose</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>vals_out</code></td>
<td>
<p>logical indicating of numeric output is returned, default is <code>FALSE</code> to return a plot.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>event</code></td>
<td>
<p>logical indicating if an 'events' component should be determined</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>type</code></td>
<td>
<p>chr string indicating the type of decomposition, either additive (<code>'add'</code>) or multiplicative (<code>'mult'</code>)</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>center</code></td>
<td>
<p>chr string indicating the method of centering, either <code>'mean'</code> or <code>'median'</code></p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>date_col</code></td>
<td>
<p>chr string indicating the name of the date column which should be a date or POSIX object.</p>
</td>
</tr>
</table>
<h3>Details</h3>

<p>This function is a simple wrapper to the <code>decompTs</code> function in the archived wq package, also described in Cloern and Jassby (2010).  The function is similar to <code>decomp.swmpr</code> (which is a wrapper to <code>decompose</code>) with a few key differences.  The <code>decomp.swmpr</code> function decomposes the time series into a trend, seasonal, and random components, whereas the current function decomposes into the grandmean, annual, seasonal, and events components.  For both functions, the random or events components, respectively, can be considered anomalies that don't follow the trends in the remaining categories.  
</p>
<p>The <code>decomp_cj</code> function provides only a monthly decomposition, which is appropriate for characterizing relatively long-term trends.  This approach is meant for nutrient data that are obtained on a monthly cycle.  The function will also work with continuous water quality or weather data but note that the data are first aggregated on the monthly scale before decomposition.  Use the <code>decomp.swmpr</code> function to decompose daily variation.
</p>


<h3>Value</h3>

<p>A <code>ggplot</code> object if <code>vals_out = FALSE</code> (default), otherwise a monthly time series matrix of class <code>ts</code>.
</p>


<h3>References</h3>

<p>Cloern, J.E., Jassby, A.D. 2010. Patterns and scales of phytoplankton variability in estuarine-coastal ecosystems. Estuaries and Coasts. 33:230-241.
</p>


<h3>See Also</h3>

<p><code>ts</code>
</p>


<h3>Examples</h3>

<pre><code class="language-R">## get data
data(apacpnut)
dat &lt;- apacpnut
dat &lt;- qaqc(dat, qaqc_keep = NULL)

## decomposition of chl, values as data.frame
decomp_cj(dat, param = 'chla_n', vals_out = TRUE)

## decomposition of chl, ggplot
decomp_cj(dat, param = 'chla_n')

## decomposition changing arguments passed to decompTs
decomp_cj(dat, param = 'chla_n', type = 'mult')

## Not run: 
## monthly decomposition of continuous data
data(apacpwq)
dat2 &lt;- qaqc(apacpwq)

decomp_cj(dat2, param = 'do_mgl')

## using the default method with a data frame
dat &lt;- data.frame(dat)
decomp_cj(dat, param = 'chla_n', date_col = 'datetimestamp')

## End(Not run)
</code></pre>


</div>