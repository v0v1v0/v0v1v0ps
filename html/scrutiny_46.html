<div class="container">

<table style="width: 100%;"><tr>
<td>grim_map</td>
<td style="text-align: right;">R Documentation</td>
</tr></table>
<h2>GRIM-test many cases at once</h2>

<h3>Description</h3>

<p>Call <code>grim_map()</code> to GRIM-test any number of combinations of
mean/proportion, sample size, and number of items. Mapping function for
GRIM-testing.
</p>
<p>Set <code>percent</code> to <code>TRUE</code> if the <code>x</code> values are percentages. This will
convert <code>x</code> values to decimals and adjust the decimal count accordingly.
</p>
<p>Display intermediary numbers from GRIM-testing in columns by setting
<code>show_rec</code> to <code>TRUE</code>.
</p>
<p>For summary statistics, call <code>audit()</code> on the results.
</p>


<h3>Usage</h3>

<pre><code class="language-R">grim_map(
  data,
  items = 1,
  merge_items = TRUE,
  percent = FALSE,
  x = NULL,
  n = NULL,
  show_rec = FALSE,
  show_prob = deprecated(),
  rounding = "up_or_down",
  threshold = 5,
  symmetric = FALSE,
  tolerance = .Machine$double.eps^0.5,
  testables_only = FALSE,
  extra = Inf
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr style="vertical-align: top;">
<td><code>data</code></td>
<td>
<p>Data frame with columns <code>x</code>, <code>n</code>, and optionally <code>items</code> (see
documentation for <code>grim()</code>. By default, any other columns in <code>data</code> will
be returned alongside GRIM test results (see <code>extra</code> below).</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>items</code></td>
<td>
<p>Integer. If there is no <code>items</code> column in <code>data</code>, this specifies
the number of items composing the <code>x</code> values. Default is 1, the most common
case.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>merge_items</code></td>
<td>
<p>Logical. If <code>TRUE</code> (the default), there will be no <code>items</code>
column in the output. Instead, values from an <code>items</code> column or argument
will be multiplied with values in the <code>n</code> column. This is only for
presentation and does not affect test results.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>percent</code></td>
<td>
<p>Logical. Set <code>percent</code> to <code>TRUE</code> if the <code>x</code> values are
percentages. This will convert them to decimal numbers and adjust the
decimal count (i.e., increase it by 2). It also affects the <code>ratio</code> column.
Default is <code>FALSE</code>.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>x, n</code></td>
<td>
<p>Optionally, specify these arguments as column names in <code>data</code>.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>show_rec</code></td>
<td>
<p>Logical. If set to <code>TRUE</code>, the reconstructed numbers from
GRIM-testing are shown as columns. See section <em>Reconstructed numbers</em>
below. Default is <code>FALSE</code>.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>show_prob</code></td>
<td>
<p><a href="https://lifecycle.r-lib.org/articles/stages.html#deprecated"><img src="../help/figures/lifecycle-deprecated.svg" alt="[Deprecated]"></a> Logical. No longer
supported: now, there is always a <code>probability</code> column. (It replaces the
earlier <code>ratio</code> column.)</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>rounding, threshold, symmetric, tolerance</code></td>
<td>
<p>Further parameters of
GRIM-testing; see documentation for <code>grim()</code>.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>testables_only</code></td>
<td>
<p>Logical. If <code>testables_only</code> is set to <code>TRUE</code>, only
GRIM-testable cases (i.e., those with a positive GRIM ratio) are included.
Default is <code>FALSE</code>.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>extra</code></td>
<td>
<p>String or integer. The other column(s) from <code>data</code> to be
returned in the output tibble alongside test results, referenced by their
name(s) or number(s). Default is <code>Inf</code>, which returns all columns. To
return none of them, set <code>extra</code> to 0.</p>
</td>
</tr>
</table>
<h3>Value</h3>

<p>A tibble with these columns –
</p>

<ul>
<li> <p><code>x</code>, <code>n</code>: the inputs.
</p>
</li>
<li> <p><code>consistency</code>: GRIM consistency of <code>x</code>, <code>n</code>, and <code>items</code>.
</p>
</li>
<li> <p><code>probability</code>: the probability of GRIM inconsistency; see
<code>grim_probability()</code>.
</p>
</li>
<li> <p><code style="white-space: pre;">⁠&lt;extra&gt;⁠</code>: any columns from <code>data</code> other than <code>x</code>, <code>n</code>, and <code>items</code>.
</p>
<p>The tibble has the <code>scr_grim_map</code> class, which is recognized by the
<code>audit()</code> generic.
</p>
</li>
</ul>
<h3>Reconstructed numbers</h3>

<p>If <code>show_rec</code> is set to <code>TRUE</code>, the output
includes the following additional columns:
</p>

<ul>
<li> <p><code>rec_sum</code>: the sum total from which the mean or proportion was ostensibly
derived.
</p>
</li>
<li> <p><code>rec_x_upper</code>: the upper reconstructed <code>x</code> value.
</p>
</li>
<li> <p><code>rec_x_lower</code>: the lower reconstructed <code>x</code> value.
</p>
</li>
<li> <p><code>rec_x_upper_rounded</code>: the rounded <code>rec_x_upper</code> value.
</p>
</li>
<li> <p><code>rec_x_lower_rounded</code>: the rounded <code>rec_x_lower</code> value.
</p>
</li>
</ul>
<p>With the default for <code>rounding</code>, <code>"up_or_down"</code>, each of the last two columns
is replaced by two columns that specify the rounding procedures (i.e.,
<code>"_up"</code> and <code>"_down"</code>).
</p>


<h3>Summaries with <code>audit()</code>
</h3>

<p>There is an S3 method for <code>audit()</code>,
so you can call <code>audit()</code> following <code>grim_map()</code> to get a summary of
<code>grim_map()</code>'s results. It is a tibble with one row and these columns –
</p>

<ol>
<li> <p><code>incons_cases</code>: number of GRIM-inconsistent value sets.
</p>
</li>
<li> <p><code>all_cases</code>: total number of value sets.
</p>
</li>
<li> <p><code>incons_rate</code>: proportion of GRIM-inconsistent value sets.
</p>
</li>
<li> <p><code>mean_grim_prob</code>: average probability of GRIM inconsistency.
</p>
</li>
<li> <p><code>incons_to_prob</code>: ratio of <code>incons_rate</code> to <code>mean_grim_prob</code>.
</p>
</li>
<li> <p><code>testable_cases</code>: number of GRIM-testable value sets (i.e., those with a
positive <code>probability</code>).
</p>
</li>
<li> <p><code>testable_rate</code>: proportion of GRIM-testable value sets.
</p>
</li>
</ol>
<h3>References</h3>

<p>Brown, N. J. L., &amp; Heathers, J. A. J. (2017). The GRIM Test: A
Simple Technique Detects Numerous Anomalies in the Reporting of Results in
Psychology. <em>Social Psychological and Personality Science</em>, 8(4), 363–369.
https://journals.sagepub.com/doi/10.1177/1948550616673876
</p>


<h3>Examples</h3>

<pre><code class="language-R"># Use `grim_map()` on data like these:
pigs1

# The `consistency` column shows
# whether the values to its left
# are GRIM-consistent:
pigs1 %&gt;%
  grim_map()

# Display intermediary numbers from
# GRIM-testing with `show_rec = TRUE`:
pigs1 %&gt;%
  grim_map(show_rec = TRUE)

# Get summaries with `audit()`:
pigs1 %&gt;%
  grim_map() %&gt;%
  audit()
</code></pre>


</div>