<div class="container">

<table style="width: 100%;"><tr>
<td>strat_map</td>
<td style="text-align: right;">R Documentation</td>
</tr></table>
<h2>Map a raster stack of a list of rasters</h2>

<h3>Description</h3>

<p>Map stratified rasters to a combined stratification.
</p>


<h3>Usage</h3>

<pre><code class="language-R">strat_map(
  sraster,
  stack = FALSE,
  filename = NULL,
  overwrite = FALSE,
  plot = FALSE,
  details = FALSE
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr style="vertical-align: top;">
<td><code>sraster</code></td>
<td>
<p>spatRaster or list. Stratification raster stack or list of rasters. If <code>sraster</code>
is of class <code>list</code>, then it is internally converted into a raster stack.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>stack</code></td>
<td>
<p>Logical. Default = <code>FALSE</code>. If <code>TRUE</code>, inputs and output will be stacked:
<code>strata_1, strata_2, ..., strata</code>.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>filename</code></td>
<td>
<p>Character. Path to write stratified raster to disc.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>overwrite</code></td>
<td>
<p>Logical. Specify whether <code>filename</code> should be overwritten on disc.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>plot</code></td>
<td>
<p>Logical. Plots output strata raster and visualized
strata with boundary dividers.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>details</code></td>
<td>
<p>Logical. If <code>FALSE</code> (default) output is a mapped stratified spatRaster object.
If <code>TRUE</code> return a list where <code>$outRaster</code> is the mapped stratified raster, and
<code>$lookUp</code> is the lookup table for the stratification.</p>
</td>
</tr>
</table>
<h3>Value</h3>

<p>A spatRaster object.
</p>


<h3>Mapping</h3>

<p>The mapping algorithm will take the stratification from <code>sraster</code> and combine it with
overlying strata values across all layers. This will result in a <code>strata</code> attribute
where the values from all inputs are combined.
</p>
<p>i.e.
</p>
<p>If <code>strata_1 = 1</code> and <code>strata_2 = 1</code> then <code>strata = 11</code>.
</p>
<p>If <code>strata_1 = 2</code> and <code>strata_2 = 14</code> then <code>strata = 214</code>.
</p>
<p>If <code>strata_1 = "A"</code> and <code>strata_2 = 14</code> then <code>strata = "A14"</code>.
</p>


<h3>Author(s)</h3>

<p>Tristan R.H. Goodbody, Tommaso Trotto, Robert Hijmans
</p>


<h3>See Also</h3>

<p>Other stratify functions: 
<code>strat_breaks()</code>,
<code>strat_kmeans()</code>,
<code>strat_poly()</code>,
<code>strat_quantiles()</code>
</p>


<h3>Examples</h3>

<pre><code class="language-R">#--- load input metrics rasters ---#
raster &lt;- system.file("extdata", "sraster.tif", package = "sgsR")
sraster &lt;- terra::rast(raster)

#--- read polygon coverage ---#
poly &lt;- system.file("extdata", "inventory_polygons.shp", package = "sgsR")
fri &lt;- sf::st_read(poly)

#--- stratify polygon coverage ---#
#--- specify polygon attribute to stratify ---#

attribute &lt;- "NUTRIENTS"

#--- specify features within attribute &amp; how they should be grouped ---#
#--- as a single vector ---#

features &lt;- c("poor", "rich", "medium")

srasterfri &lt;- strat_poly(
  poly = fri,
  attribute = attribute,
  features = features,
  raster = sraster
)

#--- map srasters with raster stack ---#
stack &lt;- c(srasterfri, sraster)
strat_map(
  sraster = stack
)

#--- map sraster with list of rasters ---#
rast_list &lt;- list(srasterfri, sraster)
strat_map(
  sraster = rast_list,
  stack = TRUE,
  details = TRUE
)
</code></pre>


</div>