<div class="container">

<table style="width: 100%;"><tr>
<td>fbands</td>
<td style="text-align: right;">R Documentation</td>
</tr></table>
<h2>Frequency bands plot</h2>

<h3>Description</h3>

<p>This graphical function returns a frequency spectrum as a
bar plot.</p>


<h3>Usage</h3>

<pre><code class="language-R">fbands(spec, f = NULL, bands = 10, width = FALSE, mel = FALSE, plot = TRUE,
xlab = NULL, ylab = "Relative amplitude", ...)</code></pre>


<h3>Arguments</h3>

<table>
<tr style="vertical-align: top;">
<td><code>spec</code></td>
<td>
<p>a data set resulting of a spectral analysis obtained
with <code>spec</code> or <code>meanspec</code>. Can be in dB.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>f</code></td>
<td>
<p>sampling frequency of <code>spec</code> (in Hz). Not requested if
the first column of <code>spec</code> contains the frequency axis.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>bands</code></td>
<td>
<p>a numeric vector. If vector of length 1, then sets the
number of bands dividing in equal parts the spectrum. If of length &gt; 1,
then takes the values as kHz limits of the bands dividing the spectrum. These
bands can be of different size. See details and examples.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>width</code></td>
<td>
<p>logical, if <code>TRUE</code> and that <code>bands</code> is an
irregular series of values, then the width of the bands will be
proportional to the frequency  limits defined in <code>bands</code>.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>mel</code></td>
<td>
<p>a logical, if <code>TRUE</code> the (htk-)mel scale is used.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>plot</code></td>
<td>
<p>logical, if <code>TRUE</code>, a plot showing the peaks is
returned.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>xlab</code></td>
<td>
<p>label of the x-axis.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>ylab</code></td>
<td>
<p>label of the y-axis.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>...</code></td>
<td>
<p>other <code>plot</code> graphical parameters.</p>
</td>
</tr>
</table>
<h3>Details</h3>

<p>The function proceeds as follows
</p>

<ul>
<li>
<p> divides the spectrum in bands. The limits of the bands are set
with the argument <code>bands</code>. There are two options:
</p>

<ul>
<li>
<p> you set a number of bands with equal size by giving a single
value to <code>bands</code>. For instance, setting <code>bands</code> to a value
of 10 will slice the spectrum in 10 equal parts and return 10 local
peaks.
</p>
</li>
<li>
<p> you set the limits of the bands. This is achieve by giving a
numeric vector to <code>bands</code>. The limits can follow a regular or
irregular series. For instance attributing the vector c(0,2,4,8) will
generate the following bands [0,2[, [2,4[, [4,8] kHz. Be aware that
the last value should not exceed half the sampling frequency used to
obtain the spectrum <code>spec</code>.
</p>
</li>
</ul>
</li>
<li>
<p> uses the function <code>barplot</code>.
</p>
</li>
</ul>
<h3>Value</h3>

<p>A two-column matrix, the first column corresponding to the
frequency values (x-axis, mean of the bars limits) and
the second column corresponding to height values (y-axis) of the bars.</p>


<h3>Note</h3>

<p>The value below bars is the mean between the corresponding frequency limits.</p>


<h3>Author(s)</h3>

<p>Jerome Sueur, improved by Laurent Lellouch</p>


<h3>See Also</h3>

<p><code>meanspec</code>, <code>spec</code>, <code>barplot</code>.</p>


<h3>Examples</h3>

<pre><code class="language-R">data(sheep)
spec &lt;- meanspec(sheep, f=8000, plot=FALSE)
# default plot
fbands(spec)
# setting a specific number of bands
fbands(spec, bands=6)
#setting specific regular bands limits
fbands(spec, bands=seq(0,4,by=0.25))
# some plot tuning
op &lt;- par(las=1)
fbands(spec, bands=seq(0,4,by=0.1),
       horiz=TRUE, col=heat.colors(41),
       xlab="", ylab="",
       cex.axis=0.75, cex.names = 0.75,
       axes=FALSE)
par(op)
# showing or not the width of the bands
oct &lt;- octaves(440,3)/1000
op &lt;- par(mfrow=c(2,1))
fbands(spec, bands=oct, col="blue")
fbands(spec, bands=oct, width = TRUE, col="red")
par(op)
# kind of horizontal zoom
op &lt;- par(mfrow=c(2,1))
fbands(spec, bands=seq(0,4,by=0.2), col=c(rep(1,10),
   rep("orange",5),rep(1,5)), main="all frequency range")
fbands(spec, bands=seq(2,3,by=0.2),
   col="orange", main="a subset or zoom in")
par(op)
# kind of dynamic frequency bands
specs &lt;- dynspec(sheep, f=8000, plot= FALSE)$amp
out &lt;- apply(specs, f=8000, MARGIN=2,
     FUN = fbands, bands = seq(0,4,by=0.2),
     col = 1, ylim=c(0,max(specs)))
# mel scale
require(tuneR)
mel &lt;- melfcc(sheep, nbands = 256, dcttype = "t3", fbtype = "htkmel", spec_out=TRUE)
melspec.mean &lt;- apply(mel$aspectrum, MARGIN=2, FUN=mean)
melspec.mean &lt;- melspec.mean/max(melspec.mean) # [0,1] scaling 
fbands(melspec.mean, f=8000, bands=8)
</code></pre>


</div>