<div class="container">

<table style="width: 100%;"><tr>
<td>compare.fit.synds</td>
<td style="text-align: right;">R Documentation</td>
</tr></table>
<h2>
Compare model estimates based on synthesised and observed data
</h2>

<h3>Description</h3>

<p>The same model that was used for the synthesised data set is fitted to the 
observed data set. The coefficients with confidence intervals for the 
observed data is plotted together with their estimates from synthetic data. 
When more than one synthetic data set has been generated (<code>object$m&gt;1</code>) 
combining rules are applied. Analysis-specific utility measures are used to
evaluate differences between synthetic and observed data.
</p>


<h3>Usage</h3>

<pre><code class="language-R">## S3 method for class 'fit.synds'
compare(object, data, plot = "Z", 
  print.coef = FALSE, return.plot = TRUE, plot.intercept = FALSE, 
  lwd = 1, lty = 1, lcol = c("#1A3C5A","#4187BF"), 
  dodge.height = .5, point.size = 2.5,
  population.inference = FALSE, ci.level = 0.95, ...)

## S3 method for class 'compare.fit.synds'
print(x, print.coef = x$print.coef, ...)
</code></pre>


<h3>Arguments</h3>

<table>
<tr style="vertical-align: top;">
<td><code>object</code></td>
<td>
<p>an object of type <code>fit.synds</code> created by fitting a model 
to synthesised data set using function <code>glm.synds</code> or
<code>lm.synds</code>.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>data</code></td>
<td>
<p>an original observed data set.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>plot</code></td>
<td>
<p>values to be plotted: <code>"Z"</code> (Z scores) or <code>"coef"</code>
(coefficients).</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>print.coef</code></td>
<td>
<p>a logical value determining whether tables of 
estimates for the original and synthetic data should be printed.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>return.plot</code></td>
<td>
<p>a logical value indicating whether a confidence interval
plot should be returned.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>plot.intercept</code></td>
<td>
<p>a logical value indicating whether estimates for 
intercept should be plotted.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>lwd</code></td>
<td>
<p>the line type.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>lty</code></td>
<td>
<p>the line width.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>lcol</code></td>
<td>
<p>line colours.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>dodge.height</code></td>
<td>
<p>size of vertical shifts for confidence intervals to 
prevent overlaping.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>point.size</code></td>
<td>
<p>size of plotting symbols used to plot point estimates of 
coefficients.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>population.inference</code></td>
<td>
<p>a logical value indicating whether intervals for 
inference to population quantities, as decribed by Karr et al. (2006), 
should be calculated and plotted. This option suppresses the lack-of-fit test 
and the standardised differences since these are based on differences 
standardised by the original interval widths.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>ci.level</code></td>
<td>
<p>Confidence interval coverage as a proportion.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>...</code></td>
<td>
<p>additional parameters passed to <code>ggplot</code>.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>x</code></td>
<td>
<p>an object of class <code>compare.fit.synds</code>.</p>
</td>
</tr>
</table>
<h3>Details</h3>

<p>This function can be used to evaluate whether the method used for 
synthesis is appropriate for the fitted model. If this is the case the 
estimates from the  synthetic dataof what would be expected from the original 
data <code>xpct(Beta)</code> <code>xpct(Z)</code> should not differ from the estimates from 
the observed data (<code>Beta</code> and <code>Z</code>) by more than would be expected from 
the standard errors (<code>se(Beta)</code> and <code>se(Z)</code>). For more details see the 
vignette on inference.
</p>


<h3>Value</h3>

<p>An object of class <code>compare.fit.synds</code> which is a list with the 
following components:
</p>
<table>
<tr style="vertical-align: top;">
<td><code>call</code></td>
<td>
<p>the original call to fit the model to the synthesised data set.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>coef.obs</code></td>
<td>
<p>a data frame including estimates based on the observed
data: coefficients (<code>Beta</code>), their standard errors (<code>se(Beta)</code>)
and Z scores (<code>Z</code>).</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>coef.syn</code></td>
<td>
<p>a data frame including (combined) estimates based on 
the synthesised data: point estimates of observed data coefficients 
(<code>B.syn</code>), standard errors of those estimates (<code>se(B.syn)</code>), 
estimates of the observed standard errors (<code>se(Beta).syn</code>), Z scores 
estimates (<code>Z.syn</code>) and their standard errors (<code>se(Z.syn)</code>). 
Note that <code>se(B.syn)</code> and <code>se(Z.syn)</code> give the standard errors 
of the mean of the <code>m</code> syntheses and can be made very small by 
increasing <code>m</code> (see the vignette on inference for more details).</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>coef.diff</code></td>
<td>
<p>a data frame containing standardized differences between 
the coefficients estimated from the original data and those calculated 
from the combined synthetic data. The difference is standardized by dividing 
by the estimated standard error of the fit from the original. The corresponding 
p-values are calculated from a standard Normal distribution and represent the 
probability of achieving differences as large as those found if the model use 
for synthesis is compatible with the model that generated the original data.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>mean.abs.std.diff</code></td>
<td>
<p>Mean absolute standardized difference (over all 
coefficients).</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>ci.overlap</code></td>
<td>
<p>a data frame containing the percentage of overlap between 
the estimated synthetic confidence intervals and the original sample 
confidence intervals for each parameter. When <code>population.inference = TRUE</code> 
overlaps are calculated as suggested by Karr et al. (2006). Otherwise 
a simpler overlap measure with intervals of equal length is calculated.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>mean.ci.overlap</code></td>
<td>
<p>Mean confidence interval overlap (over all 
coefficients).</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>lack.of.fit</code></td>
<td>
<p>lack-of-fit measure from all <code>m</code> synthetic data 
sets combined, calculated as follows, when <code>object$incomplete = FALSE</code>. 
The vector of mean differences (<code>diff</code>) between the coefficients 
calculated from the synthetic and original data provides 
a standardised <code>lack-of-fit = t(diff) %*% V^(-1) t(diff)</code>, where 
<code>%*%</code> represents the matrix product and <code>V^(-1)</code> is the 
inverse of the variance-covariance matrix for the mean coefficients 
from the original data. If the model used to synthesize the data is 
correct this quantity, which is a Mahalanobis distance measure, will 
follow a chi-squared distribution with degrees of freedom, and thus 
expectation, equal to the number of parameters (<code>p</code>) in the fitted 
model. When <code>object$incomplete = TRUE</code> the variance-covariance matrix
of the coefficients is estimated from the differences between the m 
estimates and the lack-of-fit statistic follows  a Hotelling's <code>T*2</code> 
distribution and the lack-of-fit statistic is referred to an <code>F(p, m - p)</code>.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>lof.pvalue</code></td>
<td>
<p>p-value for the combined lack-of-fit test of the NULL 
hypothesis that the method used for synthesis retains all relationships 
between variables that influence the parameters of the fit.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>ci.plot</code></td>
<td>
<p><code>ggplot</code> of the the coefficients with confidence 
intervals for models based on observed and synthetic data. 
If <code>return.plot</code> was set to <code>FALSE</code> then <code>ci.plot</code> 
is <code>NULL</code>.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>print.coef</code></td>
<td>
<p>a logical value determining whether tables of 
estimates for the original and synthetic data should be printed.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>m</code></td>
<td>
<p>the number of synthetic versions of the original (observed) data.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>ncoef</code></td>
<td>
<p>the number of coefficients in the fitted model (including an 
intercept).</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>incomplete</code></td>
<td>
<p>whether methods for incomplete synthesis due to Reiter 
(2003) have been used in calculations.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>population.inference</code></td>
<td>
<p>whether intervals as decribed by Karr et al. 
(2016) have been calculated.</p>
</td>
</tr>
</table>
<h3>References</h3>

<p>Karr, A., Kohnen, C.N., Oganian, A., Reiter, J.P. and Sanil, A.P. (2006). 
A framework for evaluating the utility of data altered to protect 
confidentiality. <em>The American Statistician</em>, <b>60</b>(3), 224-232.
</p>
<p>Nowok, B., Raab, G.M and Dibben, C. (2016). synthpop: Bespoke
creation of synthetic data in R. <em>Journal of Statistical Software</em>,
<b>74</b>(11), 1-26. <a href="https://doi.org/10.18637/jss.v074.i11">doi:10.18637/jss.v074.i11</a>.
</p>
<p>Reiter, J.P. (2003) Inference for partially synthetic, public use microdata 
sets. <em>Survey Methodology</em>, <b>29</b>, 181-188.
</p>


<h3>See Also</h3>

<p><code>summary.fit.synds</code>
</p>


<h3>Examples</h3>

<pre><code class="language-R">ods &lt;- SD2011[,c("sex","age","edu","smoke")]
s1 &lt;- syn(ods, m = 3)
f1 &lt;- glm.synds(smoke ~ sex + age + edu, data = s1, family = "binomial")
compare(f1, ods) 
compare(f1, ods, print.coef = TRUE, plot = "coef")
</code></pre>


</div>