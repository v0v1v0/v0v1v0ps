<div class="container">

<table style="width: 100%;"><tr>
<td>spacetime</td>
<td style="text-align: right;">R Documentation</td>
</tr></table>
<h2>Construct a <code>spacetime</code> object</h2>

<h3>Description</h3>

<p>A spacetime object is a collection of a linked data frame and an sf objects.
It can be thought of as geography linked to a table that represents those
geographies over one or more time periods.
</p>


<h3>Usage</h3>

<pre><code class="language-R">spacetime(.data, .geometry, .loc_col, .time_col, active = "data")

new_spacetime(.data, .geometry, .loc_col, .time_col, active = "data")

validate_spacetime(.data, .geometry, .loc_col, .time_col)

is_spacetime(x, ...)

is.spacetime(x, ...)
</code></pre>


<h3>Arguments</h3>

<table>
<tr style="vertical-align: top;">
<td><code>.data</code></td>
<td>
<p>an object with base class <code>data.frame</code> containing location and time
identifiers <code>.loc_col</code> and <code>.time_col</code> respectively.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>.geometry</code></td>
<td>
<p>an <code>sf</code> object with columns <code>.loc_col</code> and <code>.time_col</code></p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>.loc_col</code></td>
<td>
<p>the quoted name of the column containing unique location identifiers. Must be present in both <code>.data</code> and <code>.geometry</code>.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>.time_col</code></td>
<td>
<p>the quoted name of the column containing time periods must be present <code>.data</code>. See details for more</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>active</code></td>
<td>
<p>default <code>"data"</code>. The object to make active. See <code>activate()</code> for more.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>x</code></td>
<td>
<p>an object to test</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>...</code></td>
<td>
<p>unused</p>
</td>
</tr>
</table>
<h3>Details</h3>

<p>Create a spacetime representation of vector data from a <code>data.frame</code> and an
<code>sf</code> object with <code>spacetime()</code>
</p>
<p><code>.time_col</code> must be able to be sorted. As such, <code>.time_col</code>
cannot be a character vector. It must have a base type of (<code>typeof()</code>) either
<code>double</code> or <code>integer</code>â€”the case in dates or factors respectively. An edge case
exists with <code>POSIXlt</code> class objects as these can be sorted appropriately but
have a base type of <code>list</code>.
</p>
<p><code>spacetime()</code> is a wrapper around <code>new_spacetime()</code>. Spacetimes are
validated before creation with <code>validate_spacetime()</code>.
</p>
<p>Check if an object is a spacetime object with <code>is_spacetime()</code> or
<code>is.spacetime()</code>.
</p>


<h3>Value</h3>


<ul>
<li> <p><code>spacetime()</code> and <code>new_spacetime()</code> construct spacetime clss objects
</p>
</li>
<li> <p><code>validate_spacetime()</code> returns nothing but will elicit a warning or error if the spacetime object is not validly constructed
</p>
</li>
<li> <p><code>is_spacetime()</code> and <code>is.spacetime()</code> return a logical scalar indicating if an object inherits the spacetime class
</p>
</li>
</ul>
<h3>Validation</h3>

<p><code>validate_spacetime()</code> checks both <code>.data</code> and <code>.geometry</code> to ensure that
the constructed spacetime object meets minimum requirements.:
</p>

<ul>
<li> <p><code>.data</code> inherits the <code>data.frame</code> class
</p>
</li>
<li> <p><code>.geometry</code> is an <code>sf</code> object
</p>
</li>
<li>
<p> ensures that <code>.time_col</code> is of the proper class
</p>
</li>
<li>
<p> ensures there are no missing geometries in <code>.geometry</code>
</p>
</li>
<li>
<p> checks for duplicate geometries
</p>
</li>
<li>
<p> ensures <code>.loc_col</code> are the same type in <code>.data</code> and <code>.geometry</code>
</p>
</li>
<li>
<p> lastly informs of missing values in additional columns in <code>.data</code>
</p>
</li>
</ul>
<h3>Examples</h3>

<pre><code class="language-R">
df_fp &lt;- system.file("extdata", "bos-ecometric.csv", package = "sfdep")
geo_fp &lt;- system.file("extdata", "bos-ecometric.geojson", package = "sfdep")

# read in data
df &lt;- read.csv(
  df_fp, colClasses = c("character", "character", "integer", "double", "Date")
)

geo &lt;- sf::st_read(geo_fp)

bos &lt;- spacetime(df, geo, ".region_id", "year")
is_spacetime(bos)
bos


</code></pre>


</div>