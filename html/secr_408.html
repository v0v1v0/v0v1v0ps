<div class="container">

<table style="width: 100%;"><tr>
<td>timevaryingcov</td>
<td style="text-align: right;">R Documentation</td>
</tr></table>
<h2> Time-varying Covariates </h2>

<h3>Description</h3>

<p>Extract or replace time varying covariates
</p>


<h3>Usage</h3>

<pre><code class="language-R">timevaryingcov(object, ...)
timevaryingcov(object) &lt;- value
</code></pre>


<h3>Arguments</h3>

<table>
<tr style="vertical-align: top;">
<td><code>object</code></td>
<td>
<p> an object of class <code>traps</code> or <code>capthist</code></p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>value</code></td>
<td>
<p> a list of named vectors </p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>...</code></td>
<td>
<p> other arguments (not used) </p>
</td>
</tr>
</table>
<h3>Details</h3>

<p>The timevaryingcov attribute is a list of one or more named vectors. 
Each vector identifies a subset of columns of covariates(object), one for each occasion. If character values are used they should correspond to covariate names.
</p>
<p>In <span class="pkg">secr</span> models, time-varying covariates are restricted to traps objects.  
Time-varying (session-specific) individual covariates may be used in <span class="pkg">openCR</span>. 
The following remarks apply to time-varying traps covariates.
</p>
<p>The name of the vector may be used in a model formula; when the model
is fitted, the value of the trap covariate on a particular occasion is
retrieved from the column indexed by the vector.
</p>
<p>For replacement, if <code>object</code> already has a <code>usage</code>
attribute, the length of each vector in <code>value</code> must match exactly
the number of columns in <code>usage(object)</code>.
</p>
<p>When converting a multi-session capthist object into a robust-design “single-session” object with function <code>join</code> the argument ‘timevaryingcov’ is used to collate 
covariate values across sessions in a form suitable for inclusion in 
<span class="pkg">openCR</span> models (see <code>join</code>).
</p>


<h3>Value</h3>

<p><code>timevaryingcov(object)</code> returns the timevaryingcov attribute of
<code>object</code> (may be NULL).
</p>


<h3>Note</h3>

<p>It is usually better to model varying effort directly, via the usage
attribute (see <a href="https://www.otago.ac.nz/density/pdfs/secr-varyingeffort.pdf">secr-varyingeffort.pdf</a>).
</p>
<p>Models for data from detectors of type ‘multi’, ‘polygonX’ or ‘transectX’ take much
longer to fit when detector covariates of any sort are used.
</p>
<p>Time-varying covariates are not available with the (default) 'fastproximity' option.
</p>
<p>See <a href="https://www.otago.ac.nz/density/pdfs/secr-varyingeffort.pdf">secr-varyingeffort.pdf</a> for input of detector covariates from a file.
</p>


<h3>See Also</h3>

<p><code>join</code>
</p>


<h3>Examples</h3>

<pre><code class="language-R">
# make a trapping grid with simple covariates
temptrap &lt;- make.grid(nx = 6, ny = 8, detector = "multi") 
covariates (temptrap) &lt;- data.frame(matrix(
    c(rep(1,48*3),rep(2,48*2)), ncol = 5))
head(covariates (temptrap))

# identify columns 1-5 as daily covariates
timevaryingcov(temptrap) &lt;- list(blockt = 1:5)
timevaryingcov(temptrap)

## Not run: 

# default density = 5/ha, noccasions = 5
CH &lt;- sim.capthist(temptrap, detectpar = list(g0 = c(0.15, 0.15,
    0.15, 0.3, 0.3), sigma = 25))

fit.1 &lt;- secr.fit(CH, trace = FALSE) 
fit.tvc2 &lt;- secr.fit(CH, model = g0 ~ blockt, trace = FALSE) 

# because variation aligns with occasions, we get the same with:
fit.t2 &lt;- secr.fit(CH, model = g0 ~ tcov, timecov = c(1,1,1,2,2),
    trace = FALSE) 

predict(fit.t2, newdata = data.frame(tcov = 1:2))
predict(fit.tvc2, newdata = data.frame(blockt = 1:2))

# now model some more messy variation
covariates (traps(CH))[1:10,] &lt;- 3
fit.tvc3 &lt;- secr.fit(CH, model = g0 ~ blockt, trace = FALSE) 

AIC(fit.tvc2, fit.t2, fit.tvc3)
# fit.tvc3 is the 'wrong' model


## End(Not run)

</code></pre>


</div>