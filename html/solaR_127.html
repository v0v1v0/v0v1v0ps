<div class="container">

<table style="width: 100%;"><tr>
<td>C_local2Solar</td>
<td style="text-align: right;">R Documentation</td>
</tr></table>
<h2>
Local time, mean solar time and UTC time zone.
</h2>

<h3>Description</h3>

<p>The function <code>local2Solar</code> converts the time zone of a <code>POSIXct</code> object to
the mean solar time and set its time zone to UTC as a synonym of mean
solar time. It includes two corrections:
the difference of longitudes between the location and the time zone, and
the daylight saving time.
</p>
<p>The function <code>CBIND</code> combines several objects (<code>zoo</code>,
<code>data.frame</code> or <code>matrix</code>) preserving
the <code>index</code> of the first of them or asigning a new one with the
<code>index</code> argument.
</p>
<p>The function <code>lonHH</code> calculates the longitude (radians) of a time zone.
</p>


<h3>Usage</h3>

<pre><code class="language-R">local2Solar(x, lon = NULL)
CBIND(..., index = NULL)
lonHH(tz)
</code></pre>


<h3>Arguments</h3>

<table>
<tr style="vertical-align: top;">
<td><code>x</code></td>
<td>
<p>a <code>POSIXct</code> object</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>lon</code></td>
<td>
<p>A numeric value of the longitude (degrees) of the
location. If <code>lon = NULL</code> (default), this value is assumed to
be equal to the longitude of the time zone of <code>x</code>, so only the
daylight saving time correction (if needed) is included.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>...</code></td>
<td>
<p>A set of <code>zoo</code> objects.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>index</code></td>
<td>
<p>A <code>POSIXct</code> object, the index of <code>zoo</code> object
constructed with <code>CBIND</code>.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>tz</code></td>
<td>
<p>A character, a time zone as documented in <a href="https://en.wikipedia.org/wiki/List_of_tz_database_time_zones">https://en.wikipedia.org/wiki/List_of_tz_database_time_zones</a>.</p>
</td>
</tr>
</table>
<h3>Details</h3>

<p>Since the result of <code>local2Solar</code> is the mean solar time, the
Equation of Time correction is not calculated with this function. The
<code>fSolI</code> function includes this correction if desired.
</p>
<p>If the <code>index</code> argument of <code>CBIND</code> is <code>NULL</code> (default)
the first object of <code>...</code> must be a <code>zoo</code> object.
</p>


<h3>Value</h3>

<p>The function <code>local2Solar</code> produces a <code>POSIXct</code> object
with its time zone set to UTC.
</p>
<p>The function <code>CBIND</code> produces a <code>zoo</code> object.
</p>
<p>The function <code>lonHH</code> gives a numeric value.</p>


<h3>Note</h3>

<p>It is important to note that the <code>solaR</code> package sets the system
time zone to <code>UTC</code> with <code>Sys.setenv(TZ = 'UTC')</code>.
Every <code>zoo</code> object created by the package will have an index with this
time zone and will be supposed to be mean solar time.
</p>


<h3>Author(s)</h3>

<p>Oscar Perpiñán Lamigueiro.</p>


<h3>References</h3>


<ul>
<li>
<p> Perpiñán, O, Energía Solar Fotovoltaica, 2015.
(<a href="https://oscarperpinan.github.io/esf/">https://oscarperpinan.github.io/esf/</a>)
</p>
</li>
<li>
<p> Perpiñán, O. (2012), "solaR: Solar Radiation and Photovoltaic
Systems with R", Journal of Statistical Software, 50(9), 1-32,
doi: <a href="https://doi.org/10.18637/jss.v050.i09">10.18637/jss.v050.i09</a>
</p>
</li>
</ul>
<h3>Examples</h3>

<pre><code class="language-R">t.local &lt;- as.POSIXct("2006-01-08 10:07:52", tz = 'Europe/Madrid')

##The local time zone and the location have the same longitude (15 degrees)
local2Solar(t.local)
##But Madrid is at lon = -3
local2Solar(t.local, lon = -3)

##Daylight saving time
t.local.dst &lt;- as.POSIXct("2006-07-08 10:07:52", tz = 'Europe/Madrid')

local2Solar(t.local.dst)
local2Solar(t.local.dst, lon = -3)

## Not run: 
##Extracted from an example of calcG0
##NREL-MIDC
##La Ola, Lanai
##Latitude: 20.76685o North
##Longitude: 156.92291o West
##Time Zone: -10.0

NRELurl &lt;- 'http://goo.gl/fFEBN'

dat &lt;- read.table(NRELurl, header = TRUE, sep = ',')
names(dat) &lt;- c('date', 'hour', 'G0', 'B', 'D0', 'Ta')

##B is direct normal. We need direct horizontal.
dat$B0 &lt;- dat$G0-dat$D0

##http://www.nrel.gov/midc/la_ola_lanai/instruments.html:
##The datalogger program runs using Greenwich Mean Time (GMT),
##data is converted to Hawaiin Standard Time (HST) after data collection
idxLocal &lt;- with(dat, as.POSIXct(paste(date, hour), format = '%m/%d/%Y %H:%M', tz = 'HST'))
head(idxLocal)
idx &lt;- local2Solar(idxLocal, lon = -156.9339)
head(idx)

## End(Not run)
</code></pre>


</div>