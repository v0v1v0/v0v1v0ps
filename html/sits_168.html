<div class="container">

<table style="width: 100%;"><tr>
<td>sits_reduce</td>
<td style="text-align: right;">R Documentation</td>
</tr></table>
<h2>Reduces a cube or samples from a summarization function</h2>

<h3>Description</h3>

<p>Apply a temporal reduction from a named expression in cube or sits tibble.
In the case of cubes, it materializes a new band in <code>output_dir</code>.
The result will be a cube with only one date with the raster reduced
from the function.
</p>


<h3>Usage</h3>

<pre><code class="language-R">sits_reduce(data, ...)

## S3 method for class 'sits'
sits_reduce(data, ...)

## S3 method for class 'raster_cube'
sits_reduce(
  data,
  ...,
  impute_fn = impute_linear(),
  memsize = 4L,
  multicores = 2L,
  output_dir,
  progress = FALSE
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr style="vertical-align: top;">
<td><code>data</code></td>
<td>
<p>Valid sits tibble or cube</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>...</code></td>
<td>
<p>Named expressions to be evaluated (see details).</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>impute_fn</code></td>
<td>
<p>Imputation function to remove NA values.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>memsize</code></td>
<td>
<p>Memory available for classification (in GB).</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>multicores</code></td>
<td>
<p>Number of cores to be used for classification.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>output_dir</code></td>
<td>
<p>Directory where files will be saved.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>progress</code></td>
<td>
<p>Show progress bar?</p>
</td>
</tr>
</table>
<h3>Details</h3>

<p><code>sits_reduce()</code> allows valid R expression to compute new bands.
Use R syntax to pass an expression to this function.
Besides arithmetic operators, you can use virtually any R function
that can be applied to elements of a matrix.
The provided functions must operate at line level in order to perform
temporal reduction on a pixel.
</p>
<p><code>sits_reduce()</code> Applies a function to each row of a matrix.
In this matrix, each row represents a pixel and each column
represents a single date. We provide some operations already
implemented in the package to perform the reduce operation.
See the list of available functions below:
</p>


<h3>Value</h3>

<p>A sits tibble or a sits cube with new bands, produced
according to the requested expression.
</p>


<h3>Summarizing temporal functions</h3>


<ul>
<li>
<p><code>t_max()</code>: Returns the maximum value of the series.
</p>
</li>
<li>
<p><code>t_min()</code>: Returns the minimum value of the series
</p>
</li>
<li>
<p><code>t_mean()</code>: Returns the mean of the series.
</p>
</li>
<li>
<p><code>t_median()</code>: Returns the median of the series.
</p>
</li>
<li>
<p><code>t_sum()</code>: Returns the sum of all the points in the series.
</p>
</li>
<li>
<p><code>t_std()</code>: Returns the standard deviation of the series.
</p>
</li>
<li>
<p><code>t_skewness()</code>: Returns the skewness of the series.
</p>
</li>
<li>
<p><code>t_kurtosis()</code>: Returns the kurtosis of the series.
</p>
</li>
<li>
<p><code>t_amplitude()</code>: Returns the difference between the maximum and
minimum values of the cycle. A small amplitude means a stable cycle.
</p>
</li>
<li>
<p><code>t_fslope()</code>: Returns the maximum value of the first slope of
the cycle. Indicates when the cycle presents an abrupt change in the
curve. The slope between two values relates the speed of the growth or
senescence phases
</p>
</li>
<li>
<p><code>t_mse()</code>: Returns the average spectral energy density.
The energy of the time series is distributed by frequency.
</p>
</li>
<li>
<p><code>t_fqr()</code>: Returns the value of the first quartile of the
series (0.25).
</p>
</li>
<li>
<p><code>t_tqr()</code>: Returns the value of the third quartile of the
series (0.75).
</p>
</li>
<li>
<p><code>t_iqr()</code>: Returns the interquartile range
(difference between the third and first quartiles).
</p>
</li>
</ul>
<h3>Note</h3>

<p>The <code>t_sum()</code>, <code>t_std()</code>, <code>t_skewness()</code>,
<code>t_kurtosis</code>, <code>t_mse</code> indexes generate values greater than
the limit of a two-byte integer. Therefore, we save the images
generated by these as Float-32 with no scale.
</p>


<h3>Author(s)</h3>

<p>Felipe Carvalho, <a href="mailto:felipe.carvalho@inpe.br">felipe.carvalho@inpe.br</a>
</p>
<p>Rolf Simoes, <a href="mailto:rolf.simoes@inpe.br">rolf.simoes@inpe.br</a>
</p>
<p>Gilberto Camara, <a href="mailto:gilberto.camara@inpe.br">gilberto.camara@inpe.br</a>
</p>


<h3>Examples</h3>

<pre><code class="language-R">if (sits_run_examples()) {
    # Reduce summarization function

    point2 &lt;-
        sits_select(point_mt_6bands, "NDVI") |&gt;
        sits_reduce(NDVI_MEDIAN = t_median(NDVI))

    # Example of generation mean summarization from a cube
    # Create a data cube from local files
    data_dir &lt;- system.file("extdata/raster/mod13q1", package = "sits")
    cube &lt;- sits_cube(
        source = "BDC",
        collection = "MOD13Q1-6.1",
        data_dir = data_dir
    )

    # Reduce NDVI band with mean function
    cube_mean &lt;- sits_reduce(
        data = cube,
        NDVIMEAN = t_mean(NDVI),
        output_dir = tempdir()
    )
}

</code></pre>


</div>