<div class="container">

<table style="width: 100%;"><tr>
<td>visreg_delta</td>
<td style="text-align: right;">R Documentation</td>
</tr></table>
<h2>Plot sdmTMB models with the <span class="pkg">visreg</span> package</h2>

<h3>Description</h3>

<p>sdmTMB models fit with regular (non-delta) families can be passed to
<code>visreg::visreg()</code> or <code>visreg::visreg2d()</code> directly. Examples are shown
below. Delta models can use the helper functions <code>visreg_delta()</code> or
<code>visreg2d_delta()</code> described here.
</p>


<h3>Usage</h3>

<pre><code class="language-R">visreg_delta(object, ..., model = c(1, 2))

visreg2d_delta(object, ..., model = c(1, 2))
</code></pre>


<h3>Arguments</h3>

<table>
<tr style="vertical-align: top;">
<td><code>object</code></td>
<td>
<p>Fit from <code>sdmTMB()</code></p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>...</code></td>
<td>
<p>Any arguments passed to <code>visreg::visreg()</code> or
<code>visreg::visreg2d()</code></p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>model</code></td>
<td>
<p>1st or 2nd delta model</p>
</td>
</tr>
</table>
<h3>Details</h3>

<p>Note the residuals are currently randomized quantile residuals,
<em>not</em> deviance residuals as is usual for GLMs with <span class="pkg">visreg</span>.
</p>


<h3>Value</h3>

<p>A plot from the visreg package. Optionally, the data plotted invisibly if
<code>plot = FALSE</code>. This is useful if you want to make your own plot after.
</p>


<h3>Examples</h3>

<pre><code class="language-R">if (require("ggplot2", quietly = TRUE) &amp;&amp;
  require("visreg", quietly = TRUE)) {


  fit &lt;- sdmTMB(
    density ~ s(depth_scaled),
    data = pcod_2011,
    spatial = "off",
    family = tweedie()
  )
  visreg::visreg(fit, xvar = "depth_scaled")

  visreg::visreg(fit, xvar = "depth_scaled", scale = "response")
  v &lt;- visreg::visreg(fit, xvar = "depth_scaled")
  head(v$fit)
  # now use ggplot2 etc. if desired

  # Delta model example:
  fit_dg &lt;- sdmTMB(
    density ~ s(depth_scaled, year, k = 8),
    data = pcod_2011, mesh = pcod_mesh_2011,
    spatial = "off",
    family = delta_gamma()
  )
  visreg_delta(fit_dg, xvar = "depth_scaled", model = 1, gg = TRUE)
  visreg_delta(fit_dg, xvar = "depth_scaled", model = 2, gg = TRUE)
  visreg_delta(fit_dg,
    xvar = "depth_scaled", model = 1,
    scale = "response", gg = TRUE
  )
  visreg_delta(fit_dg,
    xvar = "depth_scaled", model = 2,
    scale = "response"
  )
  visreg_delta(fit_dg,
    xvar = "depth_scaled", model = 2,
    scale = "response", gg = TRUE, rug = FALSE
  )
  visreg2d_delta(fit_dg,
    xvar = "depth_scaled", yvar = "year",
    model = 2, scale = "response"
  )
  visreg2d_delta(fit_dg,
    xvar = "depth_scaled", yvar = "year",
    model = 1, scale = "response", plot.type = "persp"
  )
  visreg2d_delta(fit_dg,
    xvar = "depth_scaled", yvar = "year",
    model = 2, scale = "response", plot.type = "gg"
  )
  
}
</code></pre>


</div>