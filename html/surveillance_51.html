<div class="container">

<table style="width: 100%;"><tr>
<td>epidataCS_animate</td>
<td style="text-align: right;">R Documentation</td>
</tr></table>
<h2>
Spatio-Temporal Animation of a Continuous-Time Continuous-Space Epidemic
</h2>

<h3>Description</h3>

<p>Function for the animation of continuous-time continuous-space
epidemic data, i.e. objects inheriting from class <code>"epidataCS"</code>.
There are three types of animation, see argument <code>time.spacing</code>.
Besides the on-screen plotting in the interactive <span style="font-family: Courier New, Courier; color: #666666;"><b>R</b></span> session, it is possible
and recommended to redirect the animation to an off-screen graphics
device using the contributed <span style="font-family: Courier New, Courier; color: #666666;"><b>R</b></span> package <span class="pkg">animation</span>. For instance,
the animation can be watched and navigated in a web browser via
<code>saveHTML</code> (see Examples).
</p>


<h3>Usage</h3>

<pre><code class="language-R">## S3 method for class 'epidataCS'
animate(object, interval = c(0,Inf), time.spacing = NULL,
        nmax = NULL, sleep = NULL, legend.opts = list(), timer.opts = list(),
        pch = 15:18, col.current = "red", col.I = "#C16E41",
        col.R = "#B3B3B3", col.influence = NULL,
        main = NULL, verbose = interactive(), ...)
</code></pre>


<h3>Arguments</h3>

<table>
<tr style="vertical-align: top;">
<td><code>object</code></td>
<td>

<p>an object inheriting from class <code>"epidataCS"</code>.
</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>interval</code></td>
<td>
<p>time range of the animation.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>time.spacing</code></td>
<td>

<p>time interval for the animation steps.<br>
If <code>NULL</code> (the default), the events are plotted sequentially by
producing a snapshot at every time point where an event occurred.
Thus, it is just the <em>ordering</em> of the events, which is shown.<br>
To plot the appearance of events proportionally to the exact time line,
<code>time.spacing</code> can be set to a numeric value indicating the period of
time between consecutive snapshots.  Then, for each time point in
<code>seq(0, end, by = time.spacing)</code> the current state of the epidemic can
be seen and an additional timer indicates the current time
(see <code>timer.opts</code> below).<br>
If <code>time.spacing = NA</code>, then the time spacing is automatically
determined in such a way that <code>nmax</code> snapshots result. In this
case, <code>nmax</code> must be given a finite value.
</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>nmax</code></td>
<td>

<p>maximum number of snapshots to generate. The default <code>NULL</code>
means to take the value from <code>ani.options("nmax")</code> if the
<span class="pkg">animation</span> package is available, and no limitation (<code>Inf</code>)
otherwise.
</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>sleep</code></td>
<td>

<p>numeric scalar specifying the artificial pause in seconds between two
time points (using <code>Sys.sleep</code>), or <code>NULL</code>
(default), when this is taken from <code>ani.options("interval")</code> if
the <span class="pkg">animation</span> package is available, and set to 0.1 otherwise.
Note that <code>sleep</code> is ignored on non-interactive devices
(see <code>dev.interactive</code>), e.g., if generating an
animation inside <span class="pkg">animation</span>'s <code>saveHTML</code>.
</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>pch, col</code></td>
<td>

<p>vectors of length equal to the number of event types specifying the
point symbols and colors for events to plot (in this order).
The vectors are recycled if necessary.
</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>legend.opts</code></td>
<td>

<p>either a list of arguments passed to the <code>legend</code> function or
<code>NULL</code> (or <code>NA</code>), in which case no legend will be plotted.  All 
necessary arguments have sensible defaults and need not be
specified.
</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>timer.opts</code></td>
<td>

<p>either a list of arguments passed to the <code>legend</code> function or
<code>NULL</code> (or <code>NA</code>), in which case no timer will be plotted.  All 
necessary arguments have sensible defaults and need not be specified, i.e.
</p>

<dl>
<dt>
<code>x</code>:</dt>
<dd>
<p><code>"bottomright"</code></p>
</dd>
<dt>
<code>title</code>:</dt>
<dd>
<p><code>"time"</code></p>
</dd>
<dt>
<code>box.lty</code>:</dt>
<dd>
<p><code>0</code></p>
</dd>
<dt>
<code>adj</code>:</dt>
<dd>
<p><code>c(0.5,0.5)</code></p>
</dd>
<dt>
<code>inset</code>:</dt>
<dd>
<p><code>0.01</code></p>
</dd>
<dt>
<code>bg</code>:</dt>
<dd>
<p><code>"white"</code></p>
</dd>
</dl>
<p>Note that the argument <code>legend</code>, which is the current time of the
animation, can not be modified.
</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>col.current</code></td>
<td>
<p>color of events when occurring (new).</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>col.I</code></td>
<td>
<p>color once infectious.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>col.R</code></td>
<td>
<p>color event has once “recovered”. If <code>NA</code>,
then recovered events will not be shown.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>col.influence</code></td>
<td>
<p>color with which the influence region is drawn. Use
<code>NULL</code> (default) if no influence regions should be drawn.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>main</code></td>
<td>
<p>optional main title placed above the map.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>verbose</code></td>
<td>
<p>logical specifying if a (textual) progress bar should
be shown during snapshot generation. This is especially useful if
the animation is produced within <code>saveHTML</code>
or similar.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>...</code></td>
<td>

<p>further graphical parameters passed to the <code>plot</code> method for
<code>"SpatialPolygons"</code>.
</p>
</td>
</tr>
</table>
<h3>Author(s)</h3>

<p>Sebastian Meyer with documentation contributions by Michael Höhle
</p>


<h3>See Also</h3>

<p><code>plot.epidataCS</code> for plotting the numbers of events by time
(aggregated over space) or the locations of the events in the
observation region <code>W</code> (aggregated over time).
</p>
<p>The contributed <span style="font-family: Courier New, Courier; color: #666666;"><b>R</b></span> package <span class="pkg">animation</span>.
</p>


<h3>Examples</h3>

<pre><code class="language-R">data("imdepi")
imdepiB &lt;- subset(imdepi, type == "B")

## Not run: 
# Animate the first year of type B with a step size of 7 days
animate(imdepiB, interval=c(0,365), time.spacing=7, nmax=Inf, sleep=0.1)

# Sequential animation of type B events during the first year
animate(imdepiB, interval=c(0,365), time.spacing=NULL, sleep=0.1)

# Animate the whole time range but with nmax=20 snapshots only
animate(imdepiB, time.spacing=NA, nmax=20, sleep=0.1)

## End(Not run)

# Such an animation can be saved in various ways using the tools of
# the animation package, e.g., saveHTML()
if (interactive() &amp;&amp; require("animation")) {
  oldwd &lt;- setwd(tempdir())  # to not clutter up the current working dir
  saveHTML(animate(imdepiB, interval = c(0,365), time.spacing = 7),
           nmax = Inf, interval = 0.2, loop = FALSE,
           title = "Animation of the first year of type B events")
  setwd(oldwd)
}
</code></pre>


</div>