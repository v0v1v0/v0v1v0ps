<div class="container">

<table style="width: 100%;"><tr>
<td>roll_hampel</td>
<td style="text-align: right;">R Documentation</td>
</tr></table>
<h2>Rolling Hampel Filter for Outlier Detection</h2>

<h3>Description</h3>

<p>Fast, center-aligned hampel filter using C++/Rcpp.
The Hampel filter is a robust outlier detector using Median Absolute Deviation (MAD).
Additional performance gains can be achieved by skipping <code>increment</code> values between calculations.
</p>


<h3>Usage</h3>

<pre><code class="language-R">roll_hampel(x, n, increment = 1)
</code></pre>


<h3>Arguments</h3>

<table>
<tr style="vertical-align: top;">
<td><code>x</code></td>
<td>
<p>an <span style="font-family: Courier New, Courier; color: #666666;"><b>R</b></span> numeric vector</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>n</code></td>
<td>
<p>integer window size</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>increment</code></td>
<td>
<p>integer shift to use when sliding the window to the next location</p>
</td>
</tr>
</table>
<h3>Details</h3>

<p><em>Unlike</em> the version in the <span class="pkg">pracma</span> package, this version does not return the
corrected timeseries. Instead, it returns a vector of values that can be tested against
different threshold values. Higher values in the return are associated with a higher likelihood
that the associated point is an outlier when compared with its neighbors. Outliers can
be picked out by comparing the return values against some threshold as seen in the example.
</p>
<p>Also <em>unlike</em> the <span class="pkg">pracma</span> version, <code>n</code> is interpreted as the full window length
and will be increased by one if necessary to have a window representing an odd number of indices.
</p>


<h3>Value</h3>

<p>A vector of values of the same length as <code>x</code>.
</p>


<h3>Note</h3>

<p>A pure <span style="font-family: Courier New, Courier; color: #666666;"><b>R</b></span> version of the filter is found in the <span class="pkg">pracma</span> package.
</p>


<h3>See Also</h3>

<p><code>roll_median</code>
</p>


<h3>Examples</h3>

<pre><code class="language-R">a &lt;- sin(0.1*seq(100))
a[20] &lt;- 50

b &lt;- roll_hampel(a,10)
threshold &lt;- 6
which(b &gt; threshold)

## Not run: 
  require(microbenchmark)
  require(pracma)
  
  microbenchmark(hampel(a,10), roll_hampel(a,10), times=10)
  
  #  Unit: microseconds
  #                 expr      min       lq    median       uq       max neval
  #        hampel(a, 10) 7610.688 7784.374 8037.4035 9453.928 16176.535    10
  #   roll_hampel(a, 10)   36.530   37.443   58.7165   65.418    90.403    10

## End(Not run)
</code></pre>


</div>