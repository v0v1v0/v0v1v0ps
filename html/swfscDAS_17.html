<div class="container">

<table style="width: 100%;"><tr>
<td>das_check</td>
<td style="text-align: right;">R Documentation</td>
</tr></table>
<h2>Check DAS file</h2>

<h3>Description</h3>

<p>Check that DAS file has accepted formatting and values
</p>


<h3>Usage</h3>

<pre><code class="language-R">das_check(
  file,
  skip = 0,
  file.out = NULL,
  sp.codes = NULL,
  print.cruise.nums = TRUE
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr style="vertical-align: top;">
<td><code>file</code></td>
<td>
<p>filename(s) of one or more DAS files</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>skip</code></td>
<td>
<p>integer: see <code>read_fwf</code>. Default is 0</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>file.out</code></td>
<td>
<p>filename to which to write the error log;
default is <code>NULL</code></p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>sp.codes</code></td>
<td>
<p>character; filename of .dat file from which to read
accepted species codes. If <code>NULL</code>, species codes will not be checked.
Default is <code>NULL</code></p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>print.cruise.nums</code></td>
<td>
<p>logical; indicates if a table with all the
cruise numbers in the <code>x</code> should be printed using
<code>table</code>. Default is <code>TRUE</code></p>
</td>
</tr>
</table>
<h3>Details</h3>

<p>Precursor to a more comprehensive DASCHECK program.
This function checks that the following is true:
</p>

<ul>
<li>
<p> Event codes are one of the following: #, *, ?, 1, 2, 3, 4, 5, 6, 7, 8,
A, B, C, E, F, k, K, N, P, Q, r, R, s, S, t, V, W, g, G, p, X, Y, Z
</p>
</li>
<li>
<p> Latitude values are between -90 and 90 (inclusive; NA values are ignored)
</p>
</li>
<li>
<p> Longitude values are between -180 and 180 (inclusive; NA values are ignored)
</p>
</li>
<li>
<p> The effort dot matches effort determined using B, R, and E events
</p>
</li>
<li>
<p> There are an equal number of R and E events, and they alternate occurrences
</p>
</li>
<li>
<p> A BR event series or R event does not occur while already on effort
</p>
</li>
<li>
<p> An E event does not occur while already off effort
</p>
</li>
<li>
<p> All Data# columns for non-C events are right-justified
</p>
</li>
<li>
<p> Only C events have data past the 99th column in the DAS file
</p>
</li>
<li>
<p> The following events have NA (blank) Data# columns: *
</p>
</li>
<li>
<p> All of  *, B, R, E, V, W, N, P, and Q events have NA Data# columns
where specified (see format pdf for more details)
</p>
</li>
<li>
<p> Event/column pairs meet the following requirements:
</p>
</li>
</ul>
<table>
<tr>
<td style="text-align: left;">
  <em>Item</em>              </td>
<td style="text-align: left;"> <em>Event</em>  </td>
<td style="text-align: left;"> <em>Column</em>  </td>
<td style="text-align: left;"> <em>Requirement</em>                                                        </td>
</tr>
<tr>
<td style="text-align: left;">
  Cruise number            </td>
<td style="text-align: left;"> B             </td>
<td style="text-align: left;"> Data1          </td>
<td style="text-align: left;"> Can be converted to a numeric value                                       </td>
</tr>
<tr>
<td style="text-align: left;">
  Mode                     </td>
<td style="text-align: left;"> B             </td>
<td style="text-align: left;"> Data2          </td>
<td style="text-align: left;"> Must be one of C, P, c, p, or NA (blank)                                  </td>
</tr>
<tr>
<td style="text-align: left;">
  Echo sounder             </td>
<td style="text-align: left;"> B             </td>
<td style="text-align: left;"> Data4          </td>
<td style="text-align: left;"> Must be one of Y, N, y, n, or NA (blank)                                  </td>
</tr>
<tr>
<td style="text-align: left;">
  Effort type              </td>
<td style="text-align: left;"> R             </td>
<td style="text-align: left;"> Data1          </td>
<td style="text-align: left;"> Must be one of F, N, S, or NA (blank)                                     </td>
</tr>
<tr>
<td style="text-align: left;">
  ESW sides                </td>
<td style="text-align: left;"> R             </td>
<td style="text-align: left;"> Data2          </td>
<td style="text-align: left;"> Effective strip width; must be one of F, H, or NA (blank)                 </td>
</tr>
<tr>
<td style="text-align: left;">
  Course                   </td>
<td style="text-align: left;"> N             </td>
<td style="text-align: left;"> Data1          </td>
<td style="text-align: left;"> Can be converted to a numeric value                                       </td>
</tr>
<tr>
<td style="text-align: left;">
  Speed                    </td>
<td style="text-align: left;"> N             </td>
<td style="text-align: left;"> Data2          </td>
<td style="text-align: left;"> Can be converted to a numeric value                                       </td>
</tr>
<tr>
<td style="text-align: left;">
  Beaufort                 </td>
<td style="text-align: left;"> V             </td>
<td style="text-align: left;"> Data1          </td>
<td style="text-align: left;"> Must be a whole number between 0 and 9                                    </td>
</tr>
<tr>
<td style="text-align: left;">
  Swell height             </td>
<td style="text-align: left;"> V             </td>
<td style="text-align: left;"> Data2          </td>
<td style="text-align: left;"> Can be converted to a numeric value                                       </td>
</tr>
<tr>
<td style="text-align: left;">
  Wind speed               </td>
<td style="text-align: left;"> V             </td>
<td style="text-align: left;"> Data5          </td>
<td style="text-align: left;"> Can be converted to a numeric value                                       </td>
</tr>
<tr>
<td style="text-align: left;">
  Rain or fog              </td>
<td style="text-align: left;"> W             </td>
<td style="text-align: left;"> Data1          </td>
<td style="text-align: left;"> Must be between 0 and 5 and either a whole number or have decimal value .5</td>
</tr>
<tr>
<td style="text-align: left;">
  Horizontal sun           </td>
<td style="text-align: left;"> W             </td>
<td style="text-align: left;"> Data2          </td>
<td style="text-align: left;"> Must be a whole number between 0 and 12                                   </td>
</tr>
<tr>
<td style="text-align: left;">
  Vertical sun             </td>
<td style="text-align: left;"> W             </td>
<td style="text-align: left;"> Data3          </td>
<td style="text-align: left;"> Must be a whole number between 0 and 12                                   </td>
</tr>
<tr>
<td style="text-align: left;">
  Visibility               </td>
<td style="text-align: left;"> W             </td>
<td style="text-align: left;"> Data5          </td>
<td style="text-align: left;"> Can be converted to a numeric value                                       </td>
</tr>
<tr>
<td style="text-align: left;">
  Sighting (mammal)        </td>
<td style="text-align: left;"> S, K, M       </td>
<td style="text-align: left;"> Data3-7        </td>
<td style="text-align: left;"> Can be converted to a numeric value                                       </td>
</tr>
<tr>
<td style="text-align: left;">
  Sighting (mammal)        </td>
<td style="text-align: left;"> G             </td>
<td style="text-align: left;"> Data5-7        </td>
<td style="text-align: left;"> Can be converted to a numeric value                                       </td>
</tr>
<tr>
<td style="text-align: left;">
  Sighting cue (mammal)    </td>
<td style="text-align: left;"> S, K, M       </td>
<td style="text-align: left;"> Data3          </td>
<td style="text-align: left;"> Must be a whole number between 1 and 6                                    </td>
</tr>
<tr>
<td style="text-align: left;">
  Sighting method (mammal) </td>
<td style="text-align: left;"> S, K, M, G    </td>
<td style="text-align: left;"> Data4          </td>
<td style="text-align: left;"> Must be a whole number between 1 and 7                                    </td>
</tr>
<tr>
<td style="text-align: left;">
  Bearing (mammal)         </td>
<td style="text-align: left;"> S, K, M, G    </td>
<td style="text-align: left;"> Data5          </td>
<td style="text-align: left;"> Must be a whole number between 0 and 360                                  </td>
</tr>
<tr>
<td style="text-align: left;">
  Photos                   </td>
<td style="text-align: left;"> A             </td>
<td style="text-align: left;"> Data3          </td>
<td style="text-align: left;"> Must be one of N, Y, n, y, or NA (blank)                                  </td>
</tr>
<tr>
<td style="text-align: left;">
  Birds                    </td>
<td style="text-align: left;"> A             </td>
<td style="text-align: left;"> Data4          </td>
<td style="text-align: left;"> Must be one of N, Y, n, y, or NA (blank)                                  </td>
</tr>
<tr>
<td style="text-align: left;">
  Calibration school       </td>
<td style="text-align: left;"> S, K, M       </td>
<td style="text-align: left;"> Data10         </td>
<td style="text-align: left;"> Must be one of N, Y, n, y, or NA (blank)                                  </td>
</tr>
<tr>
<td style="text-align: left;">
  Aerial photos taken      </td>
<td style="text-align: left;"> S, K, M       </td>
<td style="text-align: left;"> Data11         </td>
<td style="text-align: left;"> Must be one of N, Y, n, y, or NA (blank)                                  </td>
</tr>
<tr>
<td style="text-align: left;">
  Biopsy taken             </td>
<td style="text-align: left;"> S, K, M       </td>
<td style="text-align: left;"> Data12         </td>
<td style="text-align: left;"> Must be one of N, Y, n, y, or NA (blank)                                  </td>
</tr>
<tr>
<td style="text-align: left;">
  Species codes            </td>
<td style="text-align: left;"> A             </td>
<td style="text-align: left;"> Data5-8        </td>
<td style="text-align: left;"> If a species codes file is provided, must be one of the provided codes    </td>
</tr>
<tr>
<td style="text-align: left;">
  Resight                  </td>
<td style="text-align: left;"> s, k          </td>
<td style="text-align: left;"> Data2-5        </td>
<td style="text-align: left;"> Can be converted to a numeric value                                       </td>
</tr>
<tr>
<td style="text-align: left;">
  Turtle species           </td>
<td style="text-align: left;"> t             </td>
<td style="text-align: left;"> Data2          </td>
<td style="text-align: left;"> If a species codes file is provided, must be one of the provided codes    </td>
</tr>
<tr>
<td style="text-align: left;">
  Turtle sighting          </td>
<td style="text-align: left;"> t             </td>
<td style="text-align: left;"> Data3-5, 7     </td>
<td style="text-align: left;"> Can be converted to a numeric value                                       </td>
</tr>
<tr>
<td style="text-align: left;">
  Turtle JFR               </td>
<td style="text-align: left;"> t             </td>
<td style="text-align: left;"> Data6          </td>
<td style="text-align: left;"> Must be one of F, J, N, R, or NA (blank)                                  </td>
</tr>
<tr>
<td style="text-align: left;">
  Fishing vessel           </td>
<td style="text-align: left;"> F             </td>
<td style="text-align: left;"> Data2-4        </td>
<td style="text-align: left;"> Can be converted to a numeric value                                       </td>
</tr>
<tr>
<td style="text-align: left;">
  Sighting info            </td>
<td style="text-align: left;"> 1-8           </td>
<td style="text-align: left;"> Data2-8        </td>
<td style="text-align: left;"> Can be converted to a numeric value                                       </td>
</tr>
<tr>
<td style="text-align: left;">
  Sighting info            </td>
<td style="text-align: left;"> 1-8           </td>
<td style="text-align: left;"> Data9          </td>
<td style="text-align: left;"> The Data9 column must be NA (blank) for events 1-8
</td>
</tr>
</table>
<p>In the table above, 'between' means inclusive.
</p>
<p>Long-term items, and checks that are not performed:
</p>

<ul>
<li>
<p> Check that datetimes are sequential, meaning they
1) are the same as or 2) come after the previous event
</p>
</li>
<li>
<p> Check that A events only come immediately after a G/S/K/M event,
and all G/S/K/M events have an A after them.
And that each has at least one group size estimate (1:8 event)
</p>
</li>
</ul>
<h3>Value</h3>

<p>A data frame with columns: the file name, line number, cruise number,
'ID' (columns 4-39 from the DAS file), and description of the issue
</p>
<p>If <code>file.out</code> is not <code>NULL</code>, then the error log data frame is also
written to <code>file.out</code> using <code>write.csv</code>
</p>
<p>A warning is printed if any events are r events; see <code>das_process</code> for details about r events
</p>


<h3>Examples</h3>

<pre><code class="language-R">y &lt;- system.file("das_sample.das", package = "swfscDAS")
if (interactive()) das_check(y)

</code></pre>


</div>