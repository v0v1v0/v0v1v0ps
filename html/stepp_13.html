<div class="container">

<table style="width: 100%;"><tr>
<td>gen.tailwin</td>
<td style="text-align: right;">R Documentation</td>
</tr></table>
<h2>
Utility function to generate tail-oriented window 
</h2>

<h3>Description</h3>

<p>Utility function to generate tail-oriented windows inputs given the approximate number of subpopulations
desired. 
</p>


<h3>Usage</h3>

<pre><code class="language-R">  gen.tailwin(covariate, nsub, dir="LE")
</code></pre>


<h3>Arguments</h3>

<table>
<tr style="vertical-align: top;">
<td><code>covariate</code></td>
<td>
<p>covariate values</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>nsub</code></td>
<td>
<p>number of tail-oriented subpopulations to be generated</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>dir</code></td>
<td>
<p>"LE" (default) or "GE" - subpopulations with covariate values less than or equal/greater than or equal 
to the generated values</p>
</td>
</tr>
</table>
<h3>Details</h3>

<p>Use this together with the constructor, stepp.win, to generate tail-oriented windows.
</p>


<h3>Value</h3>

<p>It returns a list with fields: $v - vector of covariate values to be used in the constructor stepp.win. 
$np - vector of subpopulation size associate with each tail-oriented window defined by $v.
</p>


<h3>Author(s)</h3>

<p>Wai-ki Yip
</p>


<h3>See Also</h3>

<p><code>stwin</code>,  <code>stepp.win</code> 
</p>


<h3>Examples</h3>

<pre><code class="language-R">data(bigKM)

rxgroup &lt;- bigKM$trt
time    &lt;- bigKM$time
evt     &lt;- bigKM$event
cov     &lt;- bigKM$ki67

# analyze using Kaplan-Meier method with tail-oriented window
#
nsubpop_tmp &lt;- 10
win_tmp &lt;- gen.tailwin(cov, nsub = nsubpop_tmp, dir = "LE")
nsubpop &lt;- length(win_tmp$v)
# create a tail-oriented window
swin &lt;- new("stwin", type = "tail-oriented", r1 = win_tmp$v, r2 = rep(min(cov), nsubpop))
subp &lt;- new("stsubpop")                             # create subpopulation object
subp &lt;- generate(subp, win = swin, covariate = cov) # generate the subpopulations
summary(subp)                             # summary of the subpopulations

# create a stepp model using Kaplan Meier Method to analyze the data
#
smodel  &lt;- new("stmodelKM", coltrt=rxgroup, trts=c(1,2), survTime=time, censor=evt, timePoint=4)

statKM  &lt;- new("steppes")     # create a test object based on subpopulation and window
statKM  &lt;- estimate(statKM, subp, smodel) # estimate the subpopulation results
# Warning: IT IS RECOMMEND TO USE AT LEAST 2500 PERMUTATIONS TO  PROVIDE STABLE RESULTS.
statKM &lt;- test(statKM, nperm = 10)       # permutation test with 10 iterations

print(statKM)         # print the estimates and test statistics
plot(statKM, ncex=0.65, legendy=30, pline=-15.5, color=c("blue","gold"),
     pointwise=FALSE, 
     xlabel="Median Ki-67 LI in Subpopulation (% immunoreactivity)",
     ylabel="4-year Disease Free Survival", 
     tlegend=c("Letrozole", "Tamoxifen"), nlas=3)
</code></pre>


</div>