<div class="container">

<table style="width: 100%;"><tr>
<td>surfacemodel</td>
<td style="text-align: right;">R Documentation</td>
</tr></table>
<h2>
Statistical reprentations of stochastic textured surfaces using supervised learning
</h2>

<h3>Description</h3>

<p>Provides a statistical represenation for a given stochastic textured surface image via a supervised learning model (a regression tree in this version).
</p>


<h3>Usage</h3>

<pre><code class="language-R">surfacemodel(img, nb, trim.vars = TRUE, cp = 1e-5,
             xval = 5, standardize = TRUE, subsample = 1,
             verbose = FALSE, keep.residuals = FALSE)
</code></pre>


<h3>Arguments</h3>

<table>
<tr style="vertical-align: top;">
<td><code>img</code></td>
<td>

<p>the given stochastic textured surface image in the matrix format.
</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>nb</code></td>
<td>

<p>the size of the neighborhood. It must be a 1-length or 3-length vector of positive integer(s). If the former, it is the same with a 3-length vector with the same elements.
</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>trim.vars</code></td>
<td>

<p>if <code>TRUE</code>, refit the model using only the variables that were used in the first fit.
</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>cp</code></td>
<td>

<p>the complexity parameter for rpart fits (see <code>rpart.control</code>).
</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>xval</code></td>
<td>

<p>the number of folds in cross-validation (see <code>rpart.control</code>). If <code>xval &lt;= 1</code>, cross-validation will not be used.
</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>standardize</code></td>
<td>

<p>if <code>TRUE</code>, standardize the given image <code>img &lt;- (img - mean(img))/sd(img)</code>. This reduces the effect of different lighting conditions when images are taken.
</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>subsample</code></td>
<td>

<p>the portion of pixels in the given image <code>img</code> to be used. It takes values in (0,1].  <code>subsample = .5</code> means that roughly a half number of pixels is used.
</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>verbose</code></td>
<td>

<p>if <code>TRUE</code>, output some model fitting information.
</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>keep.residuals</code></td>
<td>

<p>if <code>TRUE</code>, keep residuals of the fitted model in the output.
</p>
</td>
</tr>
</table>
<h3>Value</h3>

<p>A <code>surfacemodel</code> object containing the following components:
</p>
<table>
<tr style="vertical-align: top;">
<td><code>fit </code></td>
<td>
<p>the pruned <code>rpart</code> tree using cross-validation.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>trim.vars</code></td>
<td>
<p>the <code>trim.vars</code> argument.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>nb </code></td>
<td>
<p>the <code>nb</code> argument.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>Fr </code></td>
<td>
<p>the empirical cdf with exponential tail approximation of the model residuals.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>MSE </code></td>
<td>
<p>the mean squared residuals.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>standardize </code></td>
<td>
<p>the <code>standardize</code> argument.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>R2cv </code></td>
<td>
<p>the cross-validated R-squared of <code>fit</code>.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>complexity </code></td>
<td>
<p>the complexity value of the returned <code>fit</code>.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>vars </code></td>
<td>
<p>the variables used in the formula when fitting the model.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>residuals </code></td>
<td>
<p>the residuals of the fitted model.</p>
</td>
</tr>
</table>
<h3>Note</h3>

<p>The best value for the neighborhood size <code>nb</code> argument can be chosen by comparing the cross-validated R-squared values <code>R2cv</code> of models built with different values of <code>nb</code>. Users may use 'surfacemodel' with some initial large <code>nb</code>, and then use the <code>showNb()</code> function to visualize the importance of the predictors used in the fitted model to have some idea about the range of important predictors to reduce (or increase if necessary) <code>nb</code>.
</p>
<p>After finalizing the choice of <code>nb</code>, it is better to set <code>trim.vars = TRUE</code> to further remove some unused variables within that neighborhood.
</p>
<p>The raster scan order for constructing the neiborhood data in <code>dataPrep()</code> is left-to-right then top-to-bottom (see Bui and Apley 208a). Rotating the image by every 90 degrees could be used to quicly change to some other raster scan orders. Again, the cross-validated R-squared <code>R2cv</code> output can be used to select the best raster scan order. See the below examples.
</p>
<p><code>plot.surfacemodel()</code> is a generic function for <code>surfacemodel()</code> that produces two plots: a plot of the cross-validation R-squared against the complexity parameter and a histogram of the residuals (along with a normal density curve) of the fitted model.
</p>


<h3>Author(s)</h3>

<p>Anh Bui
</p>


<h3>References</h3>

<p>Bui, A.T. and Apley., D.W. (2018a) "A Monitoring and Diagnostic Approach for Stochastic Textured Surfaces", Technometrics, 60, 1-13.
</p>


<h3>See Also</h3>

<p><code>dataPrep, showNb, monitoringStat, rpart</code>
</p>


<h3>Examples</h3>

<pre><code class="language-R">## fit a model to characterize the surface of a simulated image:
img &lt;- sarGen(m = 50, n = 50, border = 50) # training image
model &lt;- surfacemodel(img, nb = 1, keep.residuals = TRUE) # see Note above for how to select nb
model
# plot cross-validation R-squared against complexity parameter and residual histogram
plot(model, type=1:2)

## change the raster scan order from left-to-right then top-to-bottom to
## left-to-right then bottom-to-top, and re-fit the model
## (see the Note section above)
img2  &lt;- as.matrix(t(apply(img , 2, rev)))
model2 &lt;- surfacemodel(img2, nb = 1)
model2$R2cv # cross-validation R-squared
</code></pre>


</div>