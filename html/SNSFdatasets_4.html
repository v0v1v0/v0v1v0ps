<div class="container">

<table style="width: 100%;"><tr>
<td>SNSFdatasets</td>
<td style="text-align: right;">R Documentation</td>
</tr></table>
<h2>
Download Datasets from the Swiss National Science Foundation
</h2>

<h3>Description</h3>


<p>Download datasets from the Swiss National Science Foundation
(<abbr><span class="acronym">SNF</span></abbr>, <abbr><span class="acronym">FNS</span></abbr>, <abbr><span class="acronym">SNSF</span></abbr>) in
<abbr><span class="acronym">CSV</span></abbr> format.
</p>


<h3>Usage</h3>

<pre><code class="language-R">fetch_datasets(dataset,
               dest.dir = NULL,
               detect.dates = TRUE, ...)

compare_datasets(filename.old, filename.new,
                 match.column = "GrantNumber", ...)

read_dataset(filename, detect.dates = TRUE, ...)
</code></pre>


<h3>Arguments</h3>

<table>
<tr style="vertical-align: top;">
<td><code>dataset</code></td>
<td>

<p>a character vector. When of length greater than one,
datasets are only downloaded, but not read.  Currently
supported are:
</p>

<ul>
<li>
<p><code>Grant</code>
</p>
</li>
<li>
<p><code>GrantWithAbstracts</code>
</p>
</li>
<li>
<p><code>Person</code>
</p>
</li>
<li>
<p><code>OutputdataScientificPublication</code>
</p>
</li>
<li>
<p><code>OutputdataUseInspired</code>
</p>
</li>
<li>
<p><code>OutputdataPublicCommunication</code>
</p>
</li>
<li>
<p><code>OutputdataCollaboration</code>
</p>
</li>
<li>
<p><code>OutputdataAcademicEvent</code>
</p>
</li>
<li>
<p><code>OutputdataAward</code>
</p>
</li>
<li>
<p><code>OutputdataDataSet</code>
</p>
</li>
<li>
<p><code>OutputdataKnowledgeTransferEvent</code>
</p>
</li>
</ul>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>dest.dir</code></td>
<td>

<p>a directory; if <code>NULL</code>, a <code>tempdir</code> is used
</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>detect.dates</code></td>
<td>

<p>logical: if <code>TRUE</code>, columns consisting of entries
such as <code>2000-10-31T00:00:00Z</code> are converted to
<code>Date</code>; empty rows in such columns are ignored
and become <code>NA</code>
</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>filename.old</code></td>
<td>

<p>string: the filename
</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>filename.new</code></td>
<td>

<p>string: the filename
</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>filename</code></td>
<td>

<p>string: the filename
</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>match.column</code></td>
<td>

<p>string: the name of the column to use for matching
entries in old and new file
</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>...</code></td>
<td>

<p>arguments to be passed to <code>download.file</code> (for
<code>fetch_datasets</code>)
</p>
</td>
</tr>
</table>
<h3>Details</h3>


<p><code>fetch_datasets</code> downloads datasets in <abbr><span class="acronym">CSV</span></abbr>
format from the <abbr><span class="acronym">SNSF</span></abbr>'s website and stores them,
with a date prefix, in directory <code>dest.dir</code>.  If the
latter is <code>NULL</code>, a temporary directory is used
(through <code>tempdir</code>); but much better is to use a
more-persistent storage location.  If a file with today's
date exists in <code>dest.dir</code>, that file is read, and
nothing is downloaded.  If more than one <code>dataset</code> is
specified, those files are downloaded (if not current in
<code>dest.dir</code>) but not read.
</p>
<p>For downloading, function <code>download.file</code> is
used.  If it fails, <code>fetch_datasets</code> returns
<code>NULL</code>.  Settings can be passed via ... .  See
<code>download.file</code> for options; in particular, see
the hints about <code>timeout</code>.
</p>
<p><code>compare_datasets</code> will match old and new
dataset via the specified <code>match.column</code> and report
</p>

<ul>
<li>
<p> added lines (in new, but not in old file),
</p>
</li>
<li>
<p> removed lines (in old, but not in new file), and
</p>
</li>
<li>
<p> changed lines (in both files, but with differing content).
</p>
</li>
</ul>
<p><code>read_dataset</code> is a simple wrapper of
<code>read.table</code> with appropriate settings.
</p>


<h3>Value</h3>


<p>A <code>data.frame</code> for <code>fetch_datasets</code> and
<code>read_dataset</code>. For <code>compare_datasets</code>, a
<code>list</code> of three components named <code>added</code>,
<code>removed</code> and <code>changed</code>.
</p>


<h3>Author(s)</h3>

<p>Silvia Martens and Enrico Schumann
</p>


<h3>References</h3>


<p><a href="https://data.snf.ch/datasets">https://data.snf.ch/datasets</a>
</p>


<h3>See Also</h3>


<p><code>download.file</code>; <code>options</code>
(<code>timeout</code>, in particular)
</p>


<h3>Examples</h3>

<pre><code class="language-R">

## requires internet connection, and file may be large
dataset &lt;- "OutputdataAward"

SNSF.dir  &lt;- tempdir()  ## This is just an example.
                        ## In practice it's much more useful to
                        ## store files in a persistant location,
                        ## such as '~/Downloads/SNSFdatasets'.

data &lt;- fetch_datasets(dataset = dataset, dest.dir = SNSF.dir)

## all award titles
table(data[["Award_Title"]])

</code></pre>


</div>