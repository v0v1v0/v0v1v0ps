<div class="container">

<table style="width: 100%;"><tr>
<td>emotion_by</td>
<td style="text-align: right;">R Documentation</td>
</tr></table>
<h2>Emotion Rate By Groups</h2>

<h3>Description</h3>

<p>Approximate the emotion of text by grouping variable(s).  For a
full description of the emotion detection algorithm see 
<code>emotion</code>.  See <code>emotion</code>
for more details about the algorithm, the emotion/valence shifter keys
that can be passed into the function, and other arguments that can be passed.
</p>


<h3>Usage</h3>

<pre><code class="language-R">emotion_by(text.var, by = NULL, group.names, ...)
</code></pre>


<h3>Arguments</h3>

<table>
<tr style="vertical-align: top;">
<td><code>text.var</code></td>
<td>
<p>The text variable.  Also takes a <code>emotionr</code> or
<code>emotion_by</code> object.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>by</code></td>
<td>
<p>The grouping variable(s).  Default <code>NULL</code> uses the original
row/element indices; if you used a column of 12 rows for <code>text.var</code>
these 12 rows will be used as the grouping variable.  Also takes a single
grouping variable or a list of 1 or more grouping variables.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>group.names</code></td>
<td>
<p>A vector of names that corresponds to group.  Generally
for internal use.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>...</code></td>
<td>
<p>Other arguments passed to <code>emotion</code>.</p>
</td>
</tr>
</table>
<h3>Value</h3>

<p>Returns a <span class="pkg">data.table</span> with grouping variables plus:
</p>

<ul>
<li>
<p>  element_id - The id number of the original vector passed to <code>emotion</code>
</p>
</li>
<li>
<p>  sentence_id - The id number of the sentences within each <code>element_id</code>
</p>
</li>
<li>
<p>  word_count - Word count <code>sum</code>med by grouping variable
</p>
</li>
<li>
<p> emotion_type - Type designation from the <code>emotion</code> column of the <code>emotion_dt</code> table
</p>
</li>
<li>
<p>  emotion_count - The number of profanities used by grouping variable
</p>
</li>
<li>
<p>  sd - Standard deviation (<code>sd</code>) of the sentence level emotion rate by grouping variable
</p>
</li>
<li>
<p>  ave_emotion - Emotion rate
</p>
</li>
</ul>
<h3>Chaining</h3>

<p>See the  <code>sentiment_by</code> for details about <span class="pkg">sentimentr</span> chaining.
</p>


<h3>See Also</h3>

<p>Other emotion functions: 
<code>emotion()</code>
</p>


<h3>Examples</h3>

<pre><code class="language-R">## Not run: 
mytext &lt;- c(
    "I am not afraid of you",
    NA,
    "",
    "I love it [not really]", 
    "I'm not angry with you", 
    "I hate it when you lie to me.  It's so humiliating",
    "I'm not happpy anymore.  It's time to end it",
    "She's a darn good friend to me",
    "I went to the terrible store",
    "There is hate and love in each of us",
    "I'm no longer angry!  I'm really experiencing peace but not true joy.",
    
    paste("Out of the night that covers me, Black as the Pit from pole to", 
      "pole, I thank whatever gods may be For my unconquerable soul.",
      "In the fell clutch of circumstance I have not winced nor cried",
      "aloud. Under the bludgeonings of chance My head is bloody, but unbowed.",
      "Beyond this place of wrath and tears Looms but the Horror of the", 
      "shade, And yet the menace of the years Finds, and shall find, me unafraid.",
      "It matters not how strait the gate, How charged with punishments", 
      "the scroll, I am the master of my fate: I am the captain of my soul."
    )    
    
)

## works on a character vector but not the preferred method avoiding the 
## repeated cost of doing sentence boundary disambiguation every time 
## `emotion` is run
emotion(mytext)
emotion_by(mytext)

## preferred method avoiding paying the cost 
mytext &lt;- get_sentences(mytext)

emotion_by(mytext)
get_sentences(emotion_by(mytext))

(myemotion &lt;- emotion_by(mytext))
stats::setNames(get_sentences(emotion_by(mytext)),
    round(myemotion[["ave_emotion"]], 3))

pres &lt;- get_sentences(presidential_debates_2012)
pres_emo_sent &lt;- emotion_by(pres)

## method 1
pres_emo_per_time &lt;- presidential_debates_2012 %&gt;%
    get_sentences() %&gt;%
    emotion_by(by = c('person', 'time'))
    
pres_emo_per_time

## method 2
library(magrittr)
presidential_debates_2012 %&gt;%
    get_sentences() %$%
    emotion_by(., by = c('person', 'time'))

## method 3
presidential_debates_2012 %&gt;%
    get_sentences() %$%
    emotion_by(dialogue, by = list(person, time))

## method 4
presidential_debates_2012 %&gt;%
    get_sentences() %&gt;%
    with(emotion_by(dialogue, by = list(person, time)))

plot(pres_emo_sent)
plot(pres_emo_per_time)

## End(Not run)
</code></pre>


</div>