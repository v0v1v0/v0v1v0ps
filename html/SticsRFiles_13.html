<div class="container">

<table style="width: 100%;"><tr>
<td>gen_usms_xml</td>
<td style="text-align: right;">R Documentation</td>
</tr></table>
<h2>Generate STICS usms xml file from a template or an input file</h2>

<h3>Description</h3>

<p>Generate STICS usms xml file from a template or an input file
</p>


<h3>Usage</h3>

<pre><code class="language-R">gen_usms_xml(
  file,
  param_df = NULL,
  template = NULL,
  stics_version = "latest",
  usms_out_file = lifecycle::deprecated(),
  usms_nb = lifecycle::deprecated(),
  usms_param = lifecycle::deprecated(),
  usms_in_file = lifecycle::deprecated()
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr style="vertical-align: top;">
<td><code>file</code></td>
<td>
<p>Path (including name) of the usms file to generate.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>param_df</code></td>
<td>
<p>A table (df, tibble) containing the values of the parameters
to use (see details)</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>template</code></td>
<td>
<p>Path of an USM xml file to be used as a template.
Optional, if not provided, the function will use a standard template
depending on the STICS version.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>stics_version</code></td>
<td>
<p>Name of the STICS version. Optional,
used if the <code>file</code> argument is not provided. In this case the function uses
a standard template associated to the STICS version.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>usms_out_file</code></td>
<td>
<p><a href="https://lifecycle.r-lib.org/articles/stages.html#deprecated"><img src="../help/figures/lifecycle-deprecated.svg" alt="[Deprecated]"></a> <code>usms_out_file</code> is no
longer supported, use <code>file</code> instead.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>usms_nb</code></td>
<td>
<p><a href="https://lifecycle.r-lib.org/articles/stages.html#deprecated"><img src="../help/figures/lifecycle-deprecated.svg" alt="[Deprecated]"></a> <code>usms_nb</code> is no
longer supported, use <code>NA</code> instead.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>usms_param</code></td>
<td>
<p><a href="https://lifecycle.r-lib.org/articles/stages.html#deprecated"><img src="../help/figures/lifecycle-deprecated.svg" alt="[Deprecated]"></a> <code>usms_param</code> is no
longer supported, use <code>param_df</code> instead.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>usms_in_file</code></td>
<td>
<p><a href="https://lifecycle.r-lib.org/articles/stages.html#deprecated"><img src="../help/figures/lifecycle-deprecated.svg" alt="[Deprecated]"></a> <code>usms_in_file</code> is no
longer supported, use <code>template</code> instead.</p>
</td>
</tr>
</table>
<h3>Details</h3>

<p>Please see <code>get_stics_versions_compat()</code> for the full list of
STICS versions that can be used for the argument <code>stics_version</code>.
</p>
<p><code>param_df</code> is a <code>data.frame</code> with the following format:</p>

<table>
<tr>
<td style="text-align: left;">
   usm_name </td>
<td style="text-align: right;"> datedebut </td>
<td style="text-align: right;"> datefin </td>
<td style="text-align: left;"> nomsol </td>
</tr>
<tr>
<td style="text-align: left;">
   USM_2017_T1_CI </td>
<td style="text-align: right;"> 199 </td>
<td style="text-align: right;"> 263 </td>
<td style="text-align: left;"> USM_T1 </td>
</tr>
<tr>
<td style="text-align: left;">
   USM_2018_T1 </td>
<td style="text-align: right;"> 264 </td>
<td style="text-align: right;"> 570 </td>
<td style="text-align: left;"> USM_T1 </td>
</tr>
<tr>
<td style="text-align: left;">
   BIN_CANPC_05_SEC_220-0-0_34K_CANPC05T3_Q </td>
<td style="text-align: right;"> 199 </td>
<td style="text-align: right;"> 263 </td>
<td style="text-align: left;"> LF1 </td>
</tr>
<tr>
<td style="text-align: left;">
   BIN_AGT_04_IRR_220-0-0_33K_AGT04T2_Q </td>
<td style="text-align: right;"> 264 </td>
<td style="text-align: right;"> 570 </td>
<td style="text-align: left;"> LF1 </td>
</tr>
<tr>
<td style="text-align: left;">
   AGA_ARB_13_IRR_220-0-0_37K_ARB13_C </td>
<td style="text-align: right;"> 199 </td>
<td style="text-align: right;"> 263 </td>
<td style="text-align: left;"> F1 </td>
</tr>
<tr>
<td style="text-align: left;">
   AGA_ARB_13_SEC_220-0-0_37K_ARB13_C </td>
<td style="text-align: right;"> 264 </td>
<td style="text-align: right;"> 570 </td>
<td style="text-align: left;"> LF1 </td>
</tr>
<tr>
<td style="text-align: left;">
   FRA_ARB_11_SEC_220-0-0_38K_E </td>
<td style="text-align: right;"> 199 </td>
<td style="text-align: right;"> 263 </td>
<td style="text-align: left;"> LF1 </td>
</tr>
<tr>
<td style="text-align: left;">
   MAG_ARB_09_SEC_220-0-0_38K_E </td>
<td style="text-align: right;"> 264 </td>
<td style="text-align: right;"> 570 </td>
<td style="text-align: left;"> LF1 </td>
</tr>
<tr>
<td style="text-align: left;">
   MAG_ARV_12_IRR_220-0-0_36K_ARV12_C </td>
<td style="text-align: right;"> 199 </td>
<td style="text-align: right;"> 263 </td>
<td style="text-align: left;"> LF1 </td>
</tr>
<tr>
<td style="text-align: left;">
   MAG_ARV_12_SEC_220-0-0_36K_ARV12_C </td>
<td style="text-align: right;"> 264 </td>
<td style="text-align: right;"> 570 </td>
<td style="text-align: left;"> LF1 </td>
</tr>
<tr>
<td style="text-align: left;">
   FRA_ARB_12_SEC_220-0-0_31K_ARB12_C </td>
<td style="text-align: right;"> 199 </td>
<td style="text-align: right;"> 263 </td>
<td style="text-align: left;"> LF1 </td>
</tr>
<tr>
<td style="text-align: left;">
   FRA_ARB_13_SEC_220-0-0_37K_ARB13_C </td>
<td style="text-align: right;"> 264 </td>
<td style="text-align: right;"> 570 </td>
<td style="text-align: left;"> LF1 </td>
</tr>
<tr>
<td style="text-align: left;">
</td>
</tr>
</table>
<p>The first column gives the usm name, all following columns give
the parameter values to put in the usms.xml file for each usm row.
</p>
<p>The first column name must contain the keyword Usm or usm or USM
as a prefix to be detected (as shown in the table extract above).
</p>
<p>If not given (the default, <code>NULL</code>), the function returns the template as is.
</p>


<h3>Value</h3>

<p>an invisible xml_document object
</p>


<h3>Examples</h3>

<pre><code class="language-R">xl_path &lt;- download_usm_xl(file = "inputs_stics_example.xlsx")
usms_param_df &lt;- read_params_table(file = xl_path, sheet_name = "USMs")
gen_usms_xml(file = file.path(tempdir(), "usms.xml"),
 param_df = usms_param_df)

</code></pre>


</div>