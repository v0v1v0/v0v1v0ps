<div class="container">

<table style="width: 100%;"><tr>
<td>doLTCF</td>
<td style="text-align: right;">R Documentation</td>
</tr></table>
<h2>Missing Variable Imputation with Last Time Point Value Carried Forward (LTCF)</h2>

<h3>Description</h3>

<p>Forward imputation for missing variable values in simulated data after a particular end of the follow-up event. The end of follow-up event is defined by the node of type <code>EOF=TRUE</code> being equal to 1.
</p>


<h3>Usage</h3>

<pre><code class="language-R">doLTCF(data, LTCF)
</code></pre>


<h3>Arguments</h3>

<table>
<tr style="vertical-align: top;">
<td><code>data</code></td>
<td>
<p>Simulated <code>data.frame</code> in wide format</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>LTCF</code></td>
<td>
<p>Character string specifying the outcome node that is the indicator of the end of follow-up (observations with value of the outcome variable being 1 indicate that the end of follow-up has been reached). The outcome variable must be a binary node that was declared with <code>EFU=TRUE</code>.</p>
</td>
</tr>
</table>
<h3>Value</h3>

<p>Modified <code>data.frame</code>, all time-varying missing variables after the <code>EFU</code> outcome specified in <code>LTCF</code> are forward imputed with their last available non-missing value.
</p>


<h3>Details</h3>

<p>The default behavior of the <code>sim</code> function consists in setting all nodes that temporally follow an <code>EFU</code> node whose simulated value is 1 to missing (i.e., <code>NA</code>).
The argument <code>LTCF</code> of the <code>sim</code> function can however be used to change this default behavior and impute some of these missing values with <em>last time point value carried forward</em> (LTCF).
More specifically, only the missing values of time-varying nodes (i.e., those with non-missing <code>t</code> argument) that follow the end of follow-up event encoded by the <code>EFU</code> node specified by the <code>LTCF</code> argument will be imputed.
One can use the function <code>doLTCF</code> to apply the <em>last time point value carried forward</em> (LTCF) imputation to an existing simulated dataset obtained from the function <code>sim</code> that was called with its default imputation setting (i.e., with no <code>LTCF</code> argument).
Illustration of the use of the LTCF imputation functionality are provided in the package vignette.
</p>
<p>The first example below shows the default data format of the <code>sim</code> function after an end of the follow-up event and how this behavior can be modified to generate data with LTCF imputation by either using the <code>LTCF</code> argument of the
<code>sim</code> function or by calling the <code>doLTCF</code> function. The second example demonstrates how to use the <code>doLTCF</code> function to perform LTCF imputation on already existing data simulated with the <code>sim</code> function based on its default non-imputation behavior.
</p>


<h3>See Also</h3>

<p><code>sim</code>, <code>simobs</code> and <code>simfull</code> for simulating data with and without carry forward imputation.
</p>
<p>Other data manipulation functions: 
<code>DF.to.longDT()</code>,
<code>DF.to.long()</code>
</p>


<h3>Examples</h3>

<pre><code class="language-R">t_end &lt;- 10
lDAG &lt;- DAG.empty()
lDAG &lt;- lDAG +
	node(name = "L2", t = 0, distr = "rconst", const = 0) +
	node(name = "A1", t = 0, distr = "rconst", const = 0) +
	node(name = "L2", t = 1:t_end, distr = "rbern",
 	prob = ifelse(A1[t - 1]  ==  1, 0.1,
 			ifelse(L2[t-1] == 1, 0.9,
        min(1,0.1 + t/t_end)))) +
	node(name = "A1", t = 1:t_end, distr = "rbern",
 	prob = ifelse(A1[t - 1]  ==  1, 1,
 			 ifelse(L2[0] == 0, 0.3,
			  ifelse(L2[0] == 0, 0.1,
			   ifelse(L2[0] == 1, 0.7, 0.5))))) +
	node(name = "Y", t = 1:t_end, distr = "rbern",
 	prob = plogis(-6.5 + 4 * L2[t] + 0.05 * sum(I(L2[0:t] == rep(0,(t + 1))))),
 	EFU = TRUE)
lDAG &lt;- set.DAG(lDAG)
#---------------------------------------------------------------------------------------
# EXAMPLE 1. No forward imputation.
#---------------------------------------------------------------------------------------
Odat.wide &lt;- sim(DAG = lDAG, n = 1000, rndseed = 123)
Odat.wide[c(21,47), 1:18]
Odat.wideLTCF &lt;- sim(DAG = lDAG, n = 1000, LTCF = "Y", rndseed = 123)
Odat.wideLTCF[c(21,47), 1:18]
#---------------------------------------------------------------------------------------
# EXAMPLE 2. With forward imputation.
#---------------------------------------------------------------------------------------
Odat.wideLTCF2 &lt;- doLTCF(data = Odat.wide, LTCF = "Y")
Odat.wideLTCF2[c(21,47), 1:18]
# all.equal(Odat.wideLTCF, Odat.wideLTCF2)
</code></pre>


</div>