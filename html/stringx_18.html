<div class="container">

<table style="width: 100%;"><tr>
<td>strptime</td>
<td style="text-align: right;">R Documentation</td>
</tr></table>
<h2>Parse and Format Date-time Objects</h2>

<h3>Description</h3>

<p>Note that the date-time processing functions in <span class="pkg">stringx</span> are a work
in progress. Feature requests/comments/remarks are welcome.
</p>
<p><code>strptime</code> parses strings representing date-time data
and converts it to a date-time object.
</p>
<p><code>strftime</code> formats a date-time object and outputs it as a
character vector.
</p>
<p>The functions are meant to be compatible with each other,
especially with regards to formatting/printing. This is why
they return/deal with objects of a new class, <code>POSIXxt</code>, which
expends upon the built-in <code>POSIXct</code>.
</p>


<h3>Usage</h3>

<pre><code class="language-R">strptime(x, format, tz = "", lenient = FALSE, locale = NULL)

strftime(
  x,
  format = "%Y-%m-%dT%H:%M:%S%z",
  tz = attr(x, "tzone")[1L],
  usetz = FALSE,
  ...,
  locale = NULL
)

## S3 method for class 'POSIXxt'
format(
  x,
  format = "%Y-%m-%dT%H:%M:%S%z",
  tz = attr(x, "tzone")[1L],
  usetz = FALSE,
  ...,
  locale = NULL
)

is.POSIXxt(x)

as.POSIXxt(x, tz = "", ...)

## S3 method for class 'POSIXt'
as.POSIXxt(x, tz = attr(x, "tzone")[1L], ...)

## S3 method for class 'POSIXxt'
as.POSIXlt(x, tz = attr(x, "tzone")[1L], ..., locale = NULL)

## Default S3 method:
as.POSIXxt(x, tz = "", ...)

## S3 method for class 'POSIXxt'
as.Date(x, ...)

## S3 method for class 'Date'
as.POSIXxt(x, ...)

## S3 method for class 'character'
as.POSIXxt(x, tz = "", format = NULL, ..., lenient = FALSE, locale = NULL)

## S3 method for class 'POSIXxt'
Ops(e1, e2)

## S3 method for class 'POSIXxt'
seq(from, to, by, length.out = NULL, along.with = NULL, ...)

## S3 method for class 'POSIXxt'
c(..., recursive = FALSE)

## S3 method for class 'POSIXxt'
rep(..., recursive = FALSE)
</code></pre>


<h3>Arguments</h3>

<table>
<tr style="vertical-align: top;">
<td><code>x</code></td>
<td>
<p>object to be converted: a character vector for <code>strptime</code>
and <code>as.POSIXxt.character</code>,
an object of class <code>POSIXxt</code> for <code>strftime</code>
an object of class <code>Date</code> for <code>as.POSIXxt.Date</code>,
or objects coercible to</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>format</code></td>
<td>
<p>character vector of date-time format specifiers,
see <code>stri_datetime_fstr</code>;
e.g., <code>"%Y-%m-%d"</code> or <code>"datetime_full"</code>;
the default conforms to the ISO 8601 guideline</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>tz</code></td>
<td>
<p><code>NULL</code> or <code>''</code> for the default time zone
(see <code>stri_timezone_get</code>)
or a single string with a timezone identifier,
see <code>stri_timezone_list</code>;
note that when <code>x</code> is equipped with <code>tzone</code> attribute,
this datum is used;
<code>as.POSIXxt.character</code> treats dates as being at midnight local time</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>lenient</code></td>
<td>
<p>single logical value; should date/time parsing be lenient?</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>locale</code></td>
<td>
<p><code>NULL</code> or <code>''</code> for the default locale
(see <code>stri_locale_get</code>)
or a single string with a locale identifier,
see <code>stri_locale_list</code></p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>usetz</code></td>
<td>
<p>not used (with a warning if attempting to do so) [DEPRECATED]</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>...</code></td>
<td>
<p>not used</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>e1, e2, from, to, by, length.out, along.with, recursive</code></td>
<td>
<p>arguments to <code>c</code>, <code>rep</code>, <code>seq</code>, etc.</p>
</td>
</tr>
</table>
<h3>Details</h3>

<p>Note that the ISO 8601 guideline suggests a year-month-day
date format and a 24-hour time format always indicating the effective
time zone, e.g., <code>2015-12-31T23:59:59+0100</code>. This is so as to avoid
ambiguity.
</p>
<p>When parsing strings, missing fields are filled based on today's midnight
data.
</p>


<h3>Value</h3>

<p><code>strftime</code> and <code>format</code> return a character vector (in UTF-8).
</p>
<p><code>strptime</code>, <code>as.POSIXxt.Date</code>,
and <code>asPOSIXxt.character</code> return an object
of class <code>POSIXxt</code>, which
extends upon <code>POSIXct</code>,
see also DateTimeClasses.
</p>
<p>Subtraction returns an object of the class <code>difftime</code>,
see <code>difftime</code>.
</p>
<p>If a string cannot be recognised as valid date/time specifier
(as per the given format string), the corresponding output will be <code>NA</code>.
</p>


<h3>Differences from Base R</h3>

<p>Replacements for base <code>strptime</code>
and <code>strftime</code> implemented with
<code>stri_datetime_parse</code> and
<code>stri_datetime_format</code>.
</p>
<p><code>format.POSIXxt</code> is a thin wrapper around <code>strftime</code>.
</p>

<ul>
<li>
<p> formatting/parsing date-time in different locales and calendars
is difficult and non-portable across platforms
<b>[fixed here â€“ using services provided by ICU]</b>
</p>
</li>
<li>
<p> default format not conforming to ISO 8601, in particular not
displaying the current time zone
<b>[fixed here]</b>
</p>
</li>
<li>
<p> only the names attribute in <code>x</code> is propagated
<b>[fixed here]</b>
</p>
</li>
<li>
<p> partial recycling with no warning
<b>[fixed here]</b>
</p>
</li>
<li> <p><code>strptime</code> returns an object of class <code>POSIXlt</code>,
which is not the most convenient to work with, e.g., when
including in data frames
<b>[fixed here]</b>
</p>
</li>
<li>
<p> Ideally, there should be only one class to represent dates
and one to represent date/time; <code>POSIXlt</code>
is no longer needed as we have
<code>stri_datetime_fields</code>;
our new <code>POSIXxt</code> class aims to solve the underlying problems
with <code>POSIXct</code>'s not being consistent with regards to
working in different time zones and dates
(see, e.g., <code>as.Date(as.POSIXct(strftime(Sys.Date())))</code>)
<b>[addressed here]</b>
</p>
</li>
<li>
<p> dates without times are not always treated as being at midnight
(despite that being stated in the help page for <code>as.POSIXct</code>)
<b>[fixed here]</b>
</p>
</li>
<li> <p><code>strftime</code> does not honour the <code>tzone</code> attribute,
which is used whilst displaying time (via <code>format</code>)
<b>[fixed here]</b>
</p>
</li>
</ul>
<h3>Author(s)</h3>

<p><a href="https://www.gagolewski.com/">Marek Gagolewski</a>
</p>


<h3>See Also</h3>

<p>The official online manual of <span class="pkg">stringx</span> at <a href="https://stringx.gagolewski.com/">https://stringx.gagolewski.com/</a>
</p>
<p>Related function(s): <code>sprintf</code>, <code>ISOdatetime</code>
</p>


<h3>Examples</h3>

<pre><code class="language-R">strftime(Sys.time())  # default format - ISO 8601
f &lt;- c("date_full", "%Y-%m-%d", "date_relative_short", "datetime_full")
strftime(Sys.time(), f)  # current default locale
strftime(Sys.time(), f, locale="de_DE")
strftime(Sys.time(), "date_short", locale="en_IL@calendar=hebrew")
strptime("1970-01-01 00:00:00", "%Y-%m-%d %H:%M:%S", tz="GMT")
strptime("14 Nisan 5703", "date_short", locale="en_IL@calendar=hebrew")
as.POSIXxt("1970-01-01")
as.POSIXxt("1970/01/01 12:00")


</code></pre>


</div>