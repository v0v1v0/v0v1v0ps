<div class="container">

<table style="width: 100%;"><tr>
<td>change_e</td>
<td style="text-align: right;">R Documentation</td>
</tr></table>
<h2>Methods to alter which parameters are estimated in a SS3 <code>.ctl</code> file.</h2>

<h3>Description</h3>

<p>Takes SS3 <code>.ctl</code> and <code>forecast.ss</code> files, along with
a list structure which houses the data file as read in by
<code>SS_readdat</code>
and changes which parameters are estimated, how natural mortality is
estimated, and if forecasts are performed. The function can be called by
itself or within <code>run_ss3sim</code> to alter an estimation model
<code>.ctl</code> file.
If used with <code>run_ss3sim</code> the case file should be named
<code>E</code>. A suggested (default) case letter is <code>E</code> for estimation.
</p>


<h3>Usage</h3>

<pre><code class="language-R">change_e(ctl_file_in = "em.ctl", ctl_file_out = "em.ctl",
  dat_list = NULL, for_file_in = "forecasts.ss", par_name = NULL,
  par_int = "NA", par_phase = "NA", forecast_num = 0,
  verbose = FALSE, natM_type = NULL, natM_n_breakpoints = NULL,
  natM_lorenzen = NULL, natM_val = NULL)
</code></pre>


<h3>Arguments</h3>

<table>
<tr style="vertical-align: top;">
<td><code>ctl_file_in</code></td>
<td>
<p>A string providing the path to the input SS <code>.ctl</code> file.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>ctl_file_out</code></td>
<td>
<p>A string providing the path to the output SS control file. If the value is <code>NULL</code>, the file will not be written to the disk.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>dat_list</code></td>
<td>
<p>An SS data list object as read in from
<code>SS_readdat</code> in the <span class="pkg">r4ss</span> package. Make sure
you select option <code>section=2</code>.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>for_file_in</code></td>
<td>
<p>A string providing the path to the input SS
<code>forecast.ss</code> file.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>par_name</code></td>
<td>
<p>*A vector of values, separated by commas.  Each value
corresponds to a parameter that you wish to turn on or off in the
<code>ctl_file_in</code>. The values will later be turned into character values
and used to search for specific lines for each parameter in the
<code>ctl_file_in</code>, therefore it is best to use full parameter names as
they are specified in <code>ctl_file_in</code>.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>par_int</code></td>
<td>
<p>*A vector of initial values, one for each parameter in
<code>par_name</code>.  Values can be <code>NA</code> if you do not wish to change the
initial value for a given parameter.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>par_phase</code></td>
<td>
<p>*A vector of phase values, one for each parameter in
<code>par_name</code>.  Values can be <code>NA</code> if you do not wish to change
the phase for a given parameter.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>forecast_num</code></td>
<td>
<p>*Number of years to perform forecasts. For those years,
the data will be removed from the <code>dat_list</code>, enabling SS3 to
generate forecasts rather than use the data to fit the model.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>verbose</code></td>
<td>
<p>When <code>TRUE</code> messages will be returned
from the function. Often useful for debugging. The default
is <code>FALSE</code>.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>natM_type</code></td>
<td>
<p>Deprecated. Should have value NULL.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>natM_n_breakpoints</code></td>
<td>
<p>Deprecated. Should have value NULL.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>natM_lorenzen</code></td>
<td>
<p>Deprecated. Should have value NULL.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>natM_val</code></td>
<td>
<p>Deprecated. Should have value NULL.</p>
</td>
</tr>
</table>
<h3>Details</h3>

<p>Turning parameters on and off is the main function of
<code>change_e</code>.  <code>change_e</code> was not created with the capability of
adding parameters to a <code>.ctl</code> file.  The function can only add
parameters for age specific natural mortality, and only for models with
one growth morph.  Furthermore, the function is designed to add complexity
to the natural mortality type and not remove complexity.  Therefore, the
function will fail if natural mortality in the <code>ctl_file_in</code> is not
specified as <code>"1Param"</code> and <code>natM_type</code> is anything other than
<code>NULL</code> or <code>"1Param"</code>.
</p>


<h3>Value</h3>

<p>Altered versions of SS3 <code>.ctl</code> and <code>forecast.ss</code> files are written
to the disk and the altered <code>dat_list</code> is returned invisibly.
</p>


<h3>Which arguments to specifiy in case files</h3>

<p>All function argument descriptions that start with an asterisk (*) will be passed
through the case files to <code>run_ss3sim</code>. If one of these arguments
is not specified in a case file, then a value of <code>NULL</code> will be passed,
which may or may not be an appropriate value. Other arguments will be ignored
if specified.
</p>


<h3>Author(s)</h3>

<p>Kelli Johnson
</p>


<h3>See Also</h3>

<p>Other change functions: <code>change_data</code>,
<code>change_em_binning</code>,
<code>change_f_par</code>, <code>change_f</code>,
<code>change_o</code>, <code>change_retro</code>,
<code>change_tv</code>
</p>


<h3>Examples</h3>

<pre><code class="language-R">## Not run: 

d &lt;- system.file("extdata", "models", "cod-om", package = "ss3sim")
data.old &lt;- r4ss::SS_readdat(
  system.file("extdata", "models", "cod-om", "codOM.dat",
    package = "ss3sim"),
  version = NULL, verbose = FALSE)
change_e(
  ctl_file_in = file.path(d, "codOM.ctl"),
  ctl_file_out = file.path(tempdir(), "change_e.ctl"),
  dat_list = data.old,
  for_file_in = file.path(d, "forecast.ss"),
         natM_type = NULL, natM_n_breakpoints = NULL,
         natM_lorenzen = NULL, natM_val = NULL,
         par_name = c("_steep", "SizeSel_P1_Fishery(1)"),
         par_int = c(0.3, 40), par_phase = c(3, 2),
         forecast_num = 0)
# clean up the temporary files
file.remove(file.path(tempdir(), "change_e.ctl"))

## End(Not run)
</code></pre>


</div>