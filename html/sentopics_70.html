<div class="container">

<table style="width: 100%;"><tr>
<td>sentopics_sentiment</td>
<td style="text-align: right;">R Documentation</td>
</tr></table>
<h2>Internal sentiment</h2>

<h3>Description</h3>

<p>Compute, extract or replace the internal sentiment of a
<code>sentopicmodel</code>. The internal sentiment is used to create time series using
the functions <code>sentiment_series()</code> or <code>sentiment_topics()</code>. If the input
model contains a sentiment layer, sentiment can be computed directly from
the output of the model. Otherwise, sentiment obtained externally should be
added for each document.
</p>


<h3>Usage</h3>

<pre><code class="language-R">sentopics_sentiment(
  x,
  method = c("proportional", "proportionalPol"),
  override = FALSE,
  quiet = FALSE,
  include_docvars = FALSE
)

sentopics_sentiment(x) &lt;- value
</code></pre>


<h3>Arguments</h3>

<table>
<tr style="vertical-align: top;">
<td><code>x</code></td>
<td>
<p>a <code>sentopicmodel</code> created from the <code>LDA()</code>, <code>JST()</code>, <code>rJST()</code> or
<code>sentopicmodel()</code> function</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>method</code></td>
<td>
<p>the method used to compute sentiment, see "Methods" below.
Ignored if an internal sentiment is already stored, unless <code>override</code> is
<code>TRUE</code>.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>override</code></td>
<td>
<p>by default, the function computes sentiment only if no
internal sentiment is already stored within the <code>sentopicmodel</code> object.
This avoid, for example, erasing externally provided sentiment. Set to
<code>TRUE</code> to force computation of new sentiment values. Only useful for models
with a sentiment layer.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>quiet</code></td>
<td>
<p>if <code>FALSE</code>, print a message when internal sentiment is found.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>include_docvars</code></td>
<td>
<p>if <code>TRUE</code> the function will return all docvars stored
in the internal <code>tokens</code> object of the model</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>value</code></td>
<td>
<p>a numeric vector of sentiment to input into the model.</p>
</td>
</tr>
</table>
<h3>Details</h3>

<p>The computed sentiment varies depending on the model. For LDA,
sentiment computation is not possible.
</p>
<p>For JST, the sentiment is computed on a per-document basis according to
the document-level sentiment mixtures.
</p>
<p>For a rJST model, a sentiment is computed for each topic, resulting in
<code>K</code> sentiment values per document. In that case, the <code>.sentiment</code> column is
an average of the <code>K</code> sentiment values, weighted by they respective topical
proportions.
</p>


<h3>Value</h3>

<p>A data.frame with the stored sentiment per document.
</p>


<h3>Methods</h3>

<p>The function accepts two methods of computing sentiment:
</p>

<ul>
<li> <p><strong>proportional</strong> computes the difference between the estimated positive
and negative proportions for each document (and possibly each topic).
</p>
<p style="text-align: center;"><code class="reqn">positive - negative</code>
</p>

</li>
<li> <p><strong>proportionalPol</strong> computes the difference between positive and negative
proportions, divided by the sum of positive and negative proportions. As a
result, the computed sentiment lies within the (-1;1) interval.
</p>
<p style="text-align: center;"><code class="reqn">\frac{positive - negative}{positive + negative}</code>
</p>

</li>
</ul>
<p>Both methods will lead to the same result for a JST model containing only
negative and positive sentiments.
</p>


<h3>Note</h3>

<p>The internal sentiment is stored internally in the <em>docvars</em> of the
topic model. This means that sentiment may also be accessed through the
<code>docvars()</code> function, although this is discouraged.
</p>


<h3>Author(s)</h3>

<p>Olivier Delmarcelle
</p>


<h3>See Also</h3>

<p>Other sentopics helpers: 
<code>sentopics_date()</code>,
<code>sentopics_labels()</code>
</p>


<h3>Examples</h3>

<pre><code class="language-R"># example dataset already contains ".sentiment" docvar
docvars(ECB_press_conferences_tokens)
# sentiment is automatically stored in the sentopicmodel object
lda &lt;- LDA(ECB_press_conferences_tokens)
sentopics_sentiment(lda)

# sentiment can be removed or modified by the assignment operator
sentopics_sentiment(lda) &lt;- NULL
sentopics_sentiment(lda) &lt;- docvars(ECB_press_conferences_tokens, ".sentiment")

# for JST models, sentiment can be computed from the output of the model
jst &lt;- JST(ECB_press_conferences_tokens, lexicon = LoughranMcDonald)
jst &lt;- fit(jst, 100)
sentopics_sentiment(jst, override = TRUE) # replace existing sentiment

## for rJST models one sentiment value is computed by topic
rjst &lt;- rJST(ECB_press_conferences_tokens, lexicon = LoughranMcDonald)
rjst &lt;- fit(rjst, 100)
sentopics_sentiment(rjst, override = TRUE)
</code></pre>


</div>