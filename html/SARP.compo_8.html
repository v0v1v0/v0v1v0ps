<div class="container">

<table style="width: 100%;"><tr>
<td>calc.rapports</td>
<td style="text-align: right;">R Documentation</td>
</tr></table>
<h2>
Compute all pairwise ratios of a set of variables
</h2>

<h3>Description</h3>

<p>This function computes all pairwise ratios or differences of a set of
variables in a given data frame
</p>


<h3>Usage</h3>

<pre><code class="language-R">calc.rapports( d, noms, log = FALSE, isoler = FALSE )
</code></pre>


<h3>Arguments</h3>

<table>
<tr style="vertical-align: top;">
<td><code>d</code></td>
<td>

<p>The data frame that contains the variables. Other objects will be
coerced as data frames using <code>as.data.frame</code>
</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>noms</code></td>
<td>

<p>A character vector containing the column names of the compositional
variables to be used for ratio computations. Names absent from the
data frame will be ignored with a warning.
</p>
<p>Optionnally, an integer vector containing the column numbers can be
given instead. They will be converted to column names before further
processing.
</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>log</code></td>
<td>

<p>If <code>TRUE</code>, values in the columns are assumed to be
log-transformed, and consequently ratios are computed as differences
of the columns. The result is in the log scale.
</p>
<p>If <code>FALSE</code>, values are assumed to be raw data and ratios are
computed directly.
</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>isoler</code></td>
<td>
<p> If <code>TRUE</code>, the result data frame will not include
the original values.
</p>
</td>
</tr>
</table>
<h3>Details</h3>

<p>Use this function to compute all pairwise ratio of a set of numerical
variables.  If non-numerical variables are given in the list of
variables, they will be ignores with a warning.
</p>
<p>Since the ratio of variables i and j is the inverse of the ratio of
variables j and i, only one of them is computed. The order is
determined by the order of the variables in <code>noms</code>. In matrix
notations, only the upper right matrix is computed, withour the diagonal.
</p>


<h3>Value</h3>

<p> These function returns the original data.frame with additional
columns corresponding to all pairwise ratios added as the last columns
of the data.frame.
</p>
<p>These variables have their name constructed as the concatenation of
the names of the two variables used, the first one being at the
numerator, separated with a dot and with the additional suffix .r (or
.r.log is working on difference of logarithms).
</p>
<p>Their order is determined by the order given in noms: the first
variable of the list, V1, is used to compute ratios with all others
(V1/V2, V1/V3 and so on). Then the second one is used for ratios
further ones (V2/V3 and so on), and so on until the last one.
</p>


<h3>Note</h3>

<p>This function is mainly for designing a step-by-step analysis or
control purposes. To avoid waste of memory, most of the functions in
the package actually compute “on fly” the ratios when
constructing the matrix or the data frame of p-values.
</p>


<h3>Author(s)</h3>

<p>Emmanuel Curis (<a href="mailto:emmanuel.curis@parisdescartes.fr">emmanuel.curis@parisdescartes.fr</a>)
</p>


<h3>See Also</h3>

<p><code>creer.Mp</code> to create a matrix of p-values for all pairwise
tests of ratio changes.
</p>


<h3>Examples</h3>

<pre><code class="language-R">   # load the potery data set
   data( poteries )

   # Compute all ratios in the potery data set   
   d.r &lt;- calc.rapports( d = poteries, noms = c( 'Al', 'Fe', 'Mg', 'Ca',
   'Na' ) )
   names( d.r )
   head( d.r )

   identical( d.r$Al.Fe.r, d.r$Al / d.r$Fe )
</code></pre>


</div>