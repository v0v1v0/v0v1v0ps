<div class="container">

<table style="width: 100%;"><tr>
<td>subhToHarm</td>
<td style="text-align: right;">R Documentation</td>
</tr></table>
<h2>Subharmonics-to-harmonics ratio</h2>

<h3>Description</h3>

<p>Internal soundgen function
</p>


<h3>Usage</h3>

<pre><code class="language-R">subhToHarm(
  frame,
  bin,
  freqs,
  pitch,
  pitchCands = NULL,
  samplingRate,
  method = c("cep", "pitchCands", "harm")[1],
  nSubh = 5,
  tol = 0.05,
  nHarm = 5,
  harmThres = 12,
  harmTol = 0.25,
  amRange = c(10, 200)
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr style="vertical-align: top;">
<td><code>frame</code></td>
<td>
<p>the abs spectrum of a frame, as returned by
<code>fft</code></p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>bin</code></td>
<td>
<p>spectrogram bin width, Hz</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>freqs</code></td>
<td>
<p>frequency per bin of spectrogram</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>pitch</code></td>
<td>
<p>pitch per frame, Hz</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>pitchCands</code></td>
<td>
<p>a list of pitch candidates and certainties sent from
analyze()</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>samplingRate</code></td>
<td>
<p>sampling rate (Hz)</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>method</code></td>
<td>
<p>'cep' = cepstrum, 'pitchCands' = existing pitch candidates
below f0, 'harm' = look for harmonic peaks. Only 'cep' is really working at
the moment.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>nSubh</code></td>
<td>
<p>the maximum ratio of f0 / g0 to consider</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>tol</code></td>
<td>
<p>target frequency (eg f0 / 2) has to be within <code>tol * target</code>
(eg tol = .05 gives a tolerance of 5%)</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>nHarm</code></td>
<td>
<p>for method 'harm' only</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>harmThres</code></td>
<td>
<p>minimum height of spectral peak, dB</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>harmTol</code></td>
<td>
<p>maximum tolerated deviation of peak frequency from multiples
of f0, proportion of f0</p>
</td>
</tr>
</table>
<h3>Details</h3>

<p>Looks for pitch candidates (among the ones already found if method =
'pitchCands', or using some other pitch-tracking-like techniques such as
cepstrum) at integer ratios of f0. If such candidates are found, they are
treated as subharmonics. Note that this depends critically on accurate pitch
tracking.
</p>


<h3>Examples</h3>

<pre><code class="language-R">## Not run: 
s400 = soundgen(
  sylLen = 300, pitch = c(280, 370, 330),
  subDep = list(
    time = c(0, .5, .51, 1),
    value = c(0, 0, 10, 10)
  ), subRatio = 3,
  smoothing = list(interpol = 'approx'), formants = 'a',
  rolloff = -12, addSilence = 50, temperature = .001,
  plot = TRUE, ylim = c(0, 2)
)
s = analyze(s400, samplingRate = 16000,
            windowLength =  50, step = 10,
            pitchMethods = c('dom', 'autocor', 'hps'), priorMean = NA,
            plot = TRUE, ylim = c(0, 3),
            extraContour = list('subDep', type = 'b', col = 'brown'))
s$detailed[, c('subRatio', 'subDep')]

s2 = analyze(s400, samplingRate = 16000,
            windowLength =  50, step = 10,
            pitchMethods = c('dom', 'autocor', 'hps'), priorMean = NA,
            subh = list(method = 'harm'),
            plot = TRUE, ylim = c(0, 3),
            extraContour = list('subDep', type = 'b', col = 'brown'))
s$detailed[, c('subRatio', 'subDep')]

## End(Not run)
</code></pre>


</div>