<div class="container">

<table style="width: 100%;"><tr>
<td>stabletree</td>
<td style="text-align: right;">R Documentation</td>
</tr></table>
<h2>Stability Assessment for Tree Learners</h2>

<h3>Description</h3>

<p>Stability assessment of variable and cutpoint selection in
tree learners (i.e., recursive partitioning). By refitting
trees to resampled versions of the learning data, the stability
of the trees structure is assessed and can be summarized and
visualized.
</p>


<h3>Usage</h3>

<pre><code class="language-R">  stabletree(x, data = NULL, sampler = subsampling, weights = NULL,
    applyfun = NULL, cores = NULL, savetrees = FALSE, ...)
</code></pre>


<h3>Arguments</h3>

<table>
<tr style="vertical-align: top;">
<td><code>x</code></td>
<td>
<p>fitted model object. Any tree-based model object that can be coerced
by <code>as.party</code> can be used provided that suitable methods
are provided.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>data</code></td>
<td>
<p>an optional <code>data.frame</code>. By default the learning data from <code>x</code>
is used (if this can be inferred from the <code>getCall</code> of <code>x</code>.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>sampler</code></td>
<td>
<p>a resampling (generating) function. Either this should be a function
of <code>n</code> that returns a matrix or a sampler generator like
<code>subsampling</code>.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>weights</code></td>
<td>
<p>an optional matrix of dimension n * B that can be used to 
weight the observations from the original learning data when the trees 
are refitted. If <code>weight = NULL</code>, the <code>sampler</code> will be used.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>applyfun</code></td>
<td>
<p>a <code>lapply</code>-like function. The default is to use
<code>lapply</code> unless <code>cores</code> is specified in which case
<code>mclapply</code> is used (for multicore computations on platforms
that support these).</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>cores</code></td>
<td>
<p>integer. The number of cores to use in multicore computations
using <code>mclapply</code> (see above).</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>savetrees</code></td>
<td>
<p>logical. If <code>TRUE</code>, trees based on resampled data sets are returned.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>...</code></td>
<td>
<p>further arguments passed to <code>sampler</code>.</p>
</td>
</tr>
</table>
<h3>Details</h3>

<p>The function <code>stabletree</code> assesses the stability of tree learners (i.e.,
recursive partitioning methods) by refitting the tree to resampled versions
of the learning data. By default, if <code>data = NULL</code>, the fitting call is
extracted by <code>getCall</code> to infer the learning data.
Subsequently, the <code>sampler</code> generates <code>B</code> resampled versions
of the learning data, the tree is regrown with <code>update</code>,
and (if necessary) coerced by <code>as.party</code>. For each
of the resampled trees it is queried and stored which variables are selected
for splitting and what the selected cutpoints are.
</p>
<p>The resulting object of class <code>"stabletree"</code> comes with a set of 
standard methods to generic functions including <code>print</code>, <code>summary</code>
for numerical summaries and <code>plot</code>, <code>barplot</code>, and <code>image</code>
for graphical representations. See <code>plot.stabletree</code> for more
details. In most methods, the argument <code>original</code> can be set to
<code>TRUE</code> or <code>FALSE</code>, turning highlighting of the original tree 
information on and off.
</p>


<h3>Value</h3>

<p><code>stabletree</code> returns an object of class <code>"stabletree"</code> which is a list with
the following components:
</p>
<table>
<tr style="vertical-align: top;">
<td><code>call</code></td>
<td>
<p>the call from the model object <code>x</code>,</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>B</code></td>
<td>
<p>the number of resampled datasets,</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>sampler</code></td>
<td>
<p>the <code>sampler</code> function,</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>vs0</code></td>
<td>
<p>numeric vector of the variable selections of the original tree,</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>br0</code></td>
<td>
<p>list of the break points (list of <code>nodeids</code>, <code>levels</code>, and
<code>breaks</code>) for each variable of the original tree,</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>vs</code></td>
<td>
<p>numeric matrix of the variable selections for each resampled dataset,</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>br</code></td>
<td>
<p>list of the break points (only the <code>breaks</code> for each variable over all
resampled datasets,</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>classes</code></td>
<td>
<p>character vector indicating the classes of all partitioning variables,</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>trees</code></td>
<td>
<p>a list of tree objects of class <code>"party"</code>, or <code>NULL</code>.</p>
</td>
</tr>
</table>
<h3>References</h3>

<p>Hothorn T, Zeileis A (2015).
partykit: A Modular Toolkit for Recursive Partytioning in R.
<em>Journal of Machine Learning Research</em>, <b>16</b>(118), 3905–3909.
</p>
<p>Philipp M, Zeileis A, Strobl C (2016).
“A Toolkit for Stability Assessment of Tree-Based Learners”. 
In A. Colubi, A. Blanco, and C. Gatu (Eds.), Proceedings of COMPSTAT 2016 –
22nd International Conference on Computational Statistics (pp. 315–325). 
The International Statistical Institute/International Association for
Statistical Computing. Preprint available at
<a href="https://EconPapers.RePEc.org/RePEc:inn:wpaper:2016-11">https://EconPapers.RePEc.org/RePEc:inn:wpaper:2016-11</a>
</p>


<h3>See Also</h3>

<p><code>plot.stabletree</code>, <code>as.stabletree</code>, 
<code>as.party</code></p>


<h3>Examples</h3>

<pre><code class="language-R">

## build a simple tree
library("partykit")
m &lt;- ctree(Species ~ ., data = iris)
plot(m)

## investigate stability
set.seed(0)
s &lt;- stabletree(m, B = 500)
print(s)

## variable selection statistics
summary(s)

## show variable selection proportions
barplot(s)

## illustrate variable selections of replications
image(s)

## graphical cutpoint analysis
plot(s)


</code></pre>


</div>