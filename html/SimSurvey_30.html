<div class="container">

<table style="width: 100%;"><tr>
<td>sim_ays_covar_spde</td>
<td style="text-align: right;">R Documentation</td>
</tr></table>
<h2>Simulate age-year-space covariance using SPDE approach</h2>

<h3>Description</h3>

<p><a href="https://lifecycle.r-lib.org/articles/stages.html#experimental"><img src="../help/figures/lifecycle-experimental.svg" alt="[Experimental]"></a>
</p>
<p>Returns a function to use inside <code>sim_distribution</code> to
generate the error term.
</p>


<h3>Usage</h3>

<pre><code class="language-R">sim_ays_covar_spde(
  sd = 2.8,
  range = 300,
  model = "spde",
  phi_age = 0.5,
  phi_year = 0.9,
  group_ages = 5:20,
  group_years = NULL,
  mesh,
  barrier.triangles
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr style="vertical-align: top;">
<td><code>sd</code></td>
<td>
<p>Variance (can be age specific)</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>range</code></td>
<td>
<p>Decorrelation range</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>model</code></td>
<td>
<p>String indicating "barrier" or "spde" to generate Q with</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>phi_age</code></td>
<td>
<p>Defines autocorrelation through ages. Can be one value or
a vector of the same length as ages.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>phi_year</code></td>
<td>
<p>Defines autocorrelation through years. Can be one value
or a vector of the same length as years.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>group_ages</code></td>
<td>
<p>Make space-age-year variance equal across these ages</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>group_years</code></td>
<td>
<p>Make space-age-year variance equal across these years</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>mesh</code></td>
<td>
<p>The mesh used to generate the precision matrix</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>barrier.triangles</code></td>
<td>
<p>the set of triangles in the barrier of the mesh
for the barrier model</p>
</td>
</tr>
</table>
<h3>Value</h3>

<p>Returns a function for use in <code>sim_distribution</code>.
</p>


<h3>Examples</h3>

<pre><code class="language-R">


if (requireNamespace("INLA")) {

  ## Make a grid
  my_grid &lt;- make_grid(res = c(10,10))

  ## Make a mesh based off it

  my_mesh &lt;- make_mesh(my_grid)
  sim &lt;- sim_abundance(ages = 1:10, years = 1:10) %&gt;%
          sim_distribution(grid = my_grid,
                           ays_covar = sim_ays_covar_spde(phi_age = 0.8,
                                                          phi_year = 0.1,
                                                          model = "spde",
                                                          mesh = my_mesh),
                           depth_par = sim_parabola(mu = 200,
                                                    sigma = 50))
  plot_distribution(sim, ages = 1:5, years = 1:5, type = "heatmap")

}



</code></pre>


</div>