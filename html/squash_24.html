<div class="container">

<table style="width: 100%;"><tr>
<td>squashgram</td>
<td style="text-align: right;">R Documentation</td>
</tr></table>
<h2> Visualize a function of z coordinates, binned by x, y coordinates</h2>

<h3>Description</h3>

<p>This is a convenience function combining <code>matapply</code> and <code>colorgram</code>. 3-dimensional data is summarized in 2-dimensional bins and represented as a color matrix. Optionally, the number of observations in each bin is indicated by relative size of the matrix elements.
</p>


<h3>Usage</h3>

<pre><code class="language-R">squashgram(x, y = NULL, z = NULL, FUN, 
    nx = 50, ny = nx, xlim = NULL, ylim = NULL,
    xbreaks = NULL, ybreaks = NULL,
    xlab = NULL, ylab = NULL, zlab = NULL, 
    shrink = 0, ...) 
</code></pre>


<h3>Arguments</h3>

<table>
<tr style="vertical-align: top;">
<td><code>x, y, z</code></td>
<td>
<p> Numeric vectors; see Details. </p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>FUN</code></td>
<td>
<p> Function to summarize z values. </p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>nx, ny</code></td>
<td>
<p> Approximate number of bins along x and y axis. </p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>xlim, ylim</code></td>
<td>
<p> Limit the range of data points considered. </p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>xbreaks, ybreaks</code></td>
<td>
<p> Breakpoints between bins along x and y axes. </p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>xlab, ylab </code></td>
<td>
<p> Axis labels. </p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>zlab</code></td>
<td>
<p> Label for color key. </p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>shrink</code></td>
<td>
<p> Rectangle shrinkage cutoff. </p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>...</code></td>
<td>
<p> Further arguments passed to <code>colorgram</code>. </p>
</td>
</tr>
</table>
<h3>Details</h3>

<p>This function may be useful for visualizing the dependence of a variable (<code>z</code>) on two other variables (<code>x</code> and <code>y</code>).
</p>
<p><code>x</code>, <code>y</code> and <code>z</code> values can be passed to <code>squash</code> in any form recognized by <code>xyz.coords</code> (e.g. individual vectors, list, data frame, formula).
</p>
<p>This function calls <code>matapply</code> and plots the result along with a color key.
</p>
<p>If non-zero, the <code>shrink</code> parameter reduces the size of rectangles for 
the bins in which the number of samples is smaller than <code>shrink</code>. This may be useful to reduce the visual impact of less reliable observations.
</p>


<h3>Value</h3>

<p>None.
</p>


<h3>See Also</h3>

<p> The lower-level functions <code>matapply</code> and <code>colorgram</code>. </p>


<h3>Examples</h3>

<pre><code class="language-R">  ## earthquake depths in Fiji
  attach(quakes)
  squashgram(depth ~ long + lat, FUN = mean)

  ## iris measurements 
  attach(iris)
  squashgram(Sepal.Length, Sepal.Width, Petal.Length, 
    FUN = median, nx = 20, ny = 15)

  ## Here indicate sample size by size of rectangles
  squashgram(iris[,1:3], FUN = median, 
    nx = 20, ny = 15, shrink = 5)

  ## What is the trend in my noisy 3-dimensional data?
  set.seed(123)
  x &lt;- rnorm(10000)
  y &lt;- rnorm(10000)
  z &lt;- rnorm(10000) + cos(x) + abs(y / 4)
  squashgram(x, y, z, median, colFn = bluered, shrink = 5)

</code></pre>


</div>