<div class="container">

<table style="width: 100%;"><tr>
<td>makeme</td>
<td style="text-align: right;">R Documentation</td>
</tr></table>
<h2>Embed Interactive Plot of Various Kinds Using Tidyselect Syntax</h2>

<h3>Description</h3>

<p>This function allows embedding of interactive or static plots based on various types of data using tidyselect syntax for variable selection.
</p>


<h3>Usage</h3>

<pre><code class="language-R">makeme(
  data,
  dep = tidyselect::everything(),
  indep = NULL,
  type = c("cat_plot_html", "int_plot_html", "cat_table_html", "int_table_html",
    "sigtest_table_html", "cat_prop_plot_docx", "cat_freq_plot_docx", "int_plot_docx"),
  ...,
  require_common_categories = TRUE,
  crowd = c("all"),
  mesos_var = NULL,
  mesos_group = NULL,
  simplify_output = TRUE,
  hide_for_crowd_if_all_na = TRUE,
  hide_for_crowd_if_valid_n_below = 0,
  hide_for_crowd_if_category_k_below = 2,
  hide_for_crowd_if_category_n_below = 0,
  hide_for_crowd_if_cell_n_below = 0,
  hide_for_all_crowds_if_hidden_for_crowd = NULL,
  hide_indep_cat_for_all_crowds_if_hidden_for_crowd = FALSE,
  add_n_to_label = FALSE,
  add_n_to_category = FALSE,
  totals = FALSE,
  categories_treated_as_na = NULL,
  label_separator = " - ",
  showNA = c("ifany", "always", "never"),
  data_label = c("percentage_bare", "percentage", "proportion", "count"),
  html_interactive = TRUE,
  hide_axis_text_if_single_variable = TRUE,
  hide_label_if_prop_below = 0.01,
  inverse = FALSE,
  vertical = FALSE,
  digits = 0,
  data_label_decimal_symbol = ".",
  x_axis_label_width = 25,
  strip_width = 25,
  sort_by = ".upper",
  descend = TRUE,
  variables_always_at_top = NULL,
  variables_always_at_bottom = NULL,
  table_wide = TRUE,
  table_main_question_as_header = FALSE,
  translations = list(last_sep = " and ", table_heading_N = "Total (N)",
    add_n_to_label_prefix = " (N = ", add_n_to_label_suffix = ")",
    add_n_to_category_prefix = " (N = [", add_n_to_category_infix = ",",
    add_n_to_category_suffix = "])", by_total = "Everyone", sigtest_variable_header_1 =
    "Var 1", sigtest_variable_header_2 = "Var 2", crowd_all = "All", crowd_target =
    "Target", crowd_others = "Others"),
  plot_height = 15,
  colour_palette = NULL,
  colour_2nd_binary_cat = "#ffffff",
  colour_na = "grey",
  label_font_size = 6,
  main_font_size = 6,
  strip_font_size = 6,
  legend_font_size = 6,
  font_family = "sans",
  path = NULL,
  docx_template = NULL
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr style="vertical-align: top;">
<td><code>data</code></td>
<td>
<p><em>Your data.frame/tibble or srvyr-object (experimental)</em>
</p>
<p><code>data.frame</code> // <em>required</em>
</p>
<p>The data to be used for plotting.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>dep, indep</code></td>
<td>
<p><em>Variable selections</em>
</p>
<p>&lt;<code>tidyselect</code>&gt; // <em>Default:</em> <code>NULL</code>, meaning everything for dep, nothing for indep.
</p>
<p>Columns in <code>data</code>. <code>dep</code> is compulsory.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>type</code></td>
<td>
<p><em>Kind of output</em>
</p>
<p><code style="white-space: pre;">⁠scalar&lt;character&gt;⁠</code> // <em>default:</em> <code>"prop_plot"</code> (<code>optional</code>)
</p>
<p>For a list of registered types in your session, use <code>get_makeme_types()</code>.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>...</code></td>
<td>
<p><em>Dynamic dots</em>
</p>
<p>&lt;<a href="https://rlang.r-lib.org/reference/dyn-dots.html"><code>dynamic-dots</code></a>&gt;
</p>
<p>Arguments forwarded to the corresponding functions that create the elements.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>require_common_categories</code></td>
<td>
<p><em>Check common categories</em>
</p>
<p><code style="white-space: pre;">⁠scalar&lt;logical&gt;⁠</code> // <em>default:</em> <code>NULL</code> (<code>optional</code>)
</p>
<p>Whether to check if all items share common categories.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>crowd</code></td>
<td>
<p><em>Which group(s) to display results for</em>
</p>
<p><code style="white-space: pre;">⁠vector&lt;character&gt;⁠</code> // <em>default:</em> <code>c("target", "others", "all")</code> (<code>optional</code>)
</p>
<p>Choose whether to produce results for target (mesos) group, others, all, or
combinations of these.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>mesos_var</code></td>
<td>
<p><em>Variable in <code>data</code> indicating groups to tailor reports for</em>
</p>
<p><code style="white-space: pre;">⁠scalar&lt;character&gt;⁠</code> // <em>default:</em> <code>NULL</code> (<code>optional</code>)
</p>
<p>Column name in data indicating the groups for which mesos reports will be produced.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>mesos_group</code></td>
<td>
<p><code style="white-space: pre;">⁠scalar&lt;character&gt;⁠</code> // <em>default:</em> <code>NULL</code> (<code>optional</code>)
</p>
<p>String, target group.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>simplify_output</code></td>
<td>
<p><code style="white-space: pre;">⁠scalar&lt;logical&gt;⁠</code> // <em>default:</em> <code>TRUE</code>
</p>
<p>If TRUE, a list output with a single output element will return the element
itself, whereas list with multiple elements will return the list.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>hide_for_crowd_if_all_na</code></td>
<td>
<p><em>Hide variable from output if containing all NA</em>
</p>
<p><code style="white-space: pre;">⁠scalar&lt;boolean&gt;⁠</code> // <em>default:</em> <code>TRUE</code>
</p>
<p>Whether to remove all variables (in particular useful for mesos) if all values are NA</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>hide_for_crowd_if_valid_n_below</code></td>
<td>
<p><em>Hide variable if variable has &lt; n observations</em>
</p>
<p><code style="white-space: pre;">⁠scalar&lt;integer&gt;⁠</code> // <em>default:</em> <code>0</code>
</p>
<p>Whether to hide a variable for a crowd if variable contains fewer than n observations (always ignoring NA).</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>hide_for_crowd_if_category_k_below</code></td>
<td>
<p><em>Hide variable if &lt; k categories</em>
</p>
<p><code style="white-space: pre;">⁠scalar&lt;integer&gt;⁠</code> // <em>default:</em> <code>2</code>
</p>
<p>Whether to hide a variable for a crowd if variable contains fewer than k used categories (always ignoring NA).
Defaults to <code>2</code> because a unitary plot/table is rarely informative.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>hide_for_crowd_if_category_n_below</code></td>
<td>
<p><em>Hide variable if having a category with &lt; n observations</em>
</p>
<p><code style="white-space: pre;">⁠scalar&lt;integer&gt;⁠</code> // <em>default:</em> <code>0</code>
</p>
<p>Whether to hide a variable for a crowd if variable contains a category with less than n observations (ignoring NA)
Cells with a 0 count is not considered as these are usually not a problem for anonymity.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>hide_for_crowd_if_cell_n_below</code></td>
<td>
<p><em>Hide variable if having a cell with &lt; n</em>
</p>
<p><code style="white-space: pre;">⁠scalar&lt;integer&gt;⁠</code> // <em>default:</em> <code>0</code>
</p>
<p>Whether to hide a variable for a crowd if the combination of dep-indep results in a cell with less than n observations (ignoring NA).
Cells with a 0 count is not considered as these are usually not a problem for anonymity.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>hide_for_all_crowds_if_hidden_for_crowd</code></td>
<td>
<p><em>Conditional hiding</em>
</p>
<p><code style="white-space: pre;">⁠scalar&lt;character&gt;⁠</code> // <em>default:</em> <code>NULL</code> (<code>optional</code>)
</p>
<p>Select one of the <code>crowd</code> output groups. If selected, will hide a variable across
all <code>crowd</code>-outputs if it for some reason is not displayed for
<code>hide_for_all_if_hidden_for_crowd</code>. For instance, say:
</p>
<p><code style="white-space: pre;">⁠crowd = c("target", "others"), hide_variable_if_all_na = TRUE,⁠</code>
<code>hide_for_all_if_hidden_for_crowd = "target"</code>
</p>
<p>will hide variables from both target and others-outputs if all are NA in
the target-group.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>hide_indep_cat_for_all_crowds_if_hidden_for_crowd</code></td>
<td>
<p><em>Conditionally hide independent categories</em>
</p>
<p><code style="white-space: pre;">⁠scalar&lt;logical&gt;⁠</code> // <em>default:</em> <code>FALSE</code>
</p>
<p>If <code>hide_for_all_crowds_if_hidden_for_crowd</code> is specified, should categories of the
<code>indep</code> variable(s) be hidden for a crowd if it does not exist for the
crowds specified in <code>hide_for_all_crowds_if_hidden_for_crowd</code>? This is useful when e.g.
<code>indep</code> is academic disciplines, <code>mesos_var</code> is institutions, and a specific
institution is not interested in seeing academic disciplines they do not offer themselves.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>add_n_to_label</code></td>
<td>
<p><em>Add N= to the variable label</em>
</p>
<p><code style="white-space: pre;">⁠scalar&lt;logical&gt;⁠</code> // <em>default:</em> <code>FALSE</code> (<code>optional</code>)
</p>
<p>For some plots and tables it is useful to attach the <code>"N="</code> to the end of the label.
Whether it is <code>N</code> or <code>N_valid</code> depends on your <code>showNA</code>-setting. See also
<code>translations$add_n_to_label_prefix</code> and
<code>translations$add_n_to_label_suffix</code>.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>add_n_to_category</code></td>
<td>
<p><em>Add N= to the category</em>
</p>
<p><code style="white-space: pre;">⁠scalar&lt;logical&gt;⁠</code> // <em>default:</em> <code>FALSE</code> (<code>optional</code>)
</p>
<p>For some plots and tables it is useful to attach the <code>"N="</code> to the end of the category.
This will likely produce a range across the variables, hence an infix (comma)
between the minimum and maximum can be specified.
Whether it is <code>N</code> or <code>N_valid</code> depends on your <code>showNA</code>-setting. See also
<code>translations$add_n_to_category_prefix</code>,
<code>translations$add_n_to_category_infix</code>, and
<code>translations$add_n_to_category_suffix</code>.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>totals</code></td>
<td>
<p><em>Include totals</em>
</p>
<p><code style="white-space: pre;">⁠scalar&lt;logical&gt;⁠</code> // <em>default:</em> <code>FALSE</code> (<code>optional</code>)
</p>
<p>Whether to include totals in the output.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>categories_treated_as_na</code></td>
<td>
<p><em>NA categories</em>
</p>
<p><code style="white-space: pre;">⁠vector&lt;character&gt;⁠</code> // <em>default:</em> <code>NULL</code> (<code>optional</code>)
</p>
<p>Categories that should be treated as NA.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>label_separator</code></td>
<td>
<p><em>How to separate main question from sub-question</em>
</p>
<p><code style="white-space: pre;">⁠scalar&lt;character&gt;⁠</code> // <em>default:</em> <code>NULL</code> (<code>optional</code>)
</p>
<p>Separator for main question from sub-question.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>showNA</code></td>
<td>
<p><em>Show NA categories</em>
</p>
<p><code style="white-space: pre;">⁠vector&lt;character&gt;⁠</code> // <em>default:</em> <code>c("ifany", "always", "never")</code> (<code>optional</code>)
</p>
<p>Choose whether to show NA categories in the results.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>data_label</code></td>
<td>
<p><em>Data label</em>
</p>
<p><code style="white-space: pre;">⁠scalar&lt;character&gt;⁠</code> // <em>default:</em> <code>"proportion"</code> (<code>optional</code>)
</p>
<p>One of "proportion", "percentage", "percentage_bare", "count", "mean", or "median".</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>html_interactive</code></td>
<td>
<p><em>Toggle interactive plot</em>
</p>
<p><code style="white-space: pre;">⁠scalar&lt;logical&gt;⁠</code> // <em>default:</em> <code>TRUE</code> (<code>optional</code>)
</p>
<p>Whether the plot is to be interactive (ggiraph) or static (ggplot2).</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>hide_axis_text_if_single_variable</code></td>
<td>
<p><em>Hide y-axis text if just a single variable</em>
</p>
<p><code style="white-space: pre;">⁠scalar&lt;boolean&gt;⁠</code> // <em>default:</em> <code>FALSE</code> (<code>optional</code>)
</p>
<p>Whether to hide text on the y-axis label if just a single variable.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>hide_label_if_prop_below</code></td>
<td>
<p><em>Hide label threshold</em>
</p>
<p><code style="white-space: pre;">⁠scalar&lt;numeric&gt;⁠</code> // <em>default:</em> <code>NULL</code> (<code>optional</code>)
</p>
<p>Whether to hide label if below this value.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>inverse</code></td>
<td>
<p><em>Flag to swap x-axis and faceting</em>
</p>
<p><code style="white-space: pre;">⁠scalar&lt;logical&gt;⁠</code> // <em>default:</em> <code>FALSE</code> (<code>optional</code>)
</p>
<p>If TRUE, swaps x-axis and faceting.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>vertical</code></td>
<td>
<p><em>Display plot vertically</em>
</p>
<p><code style="white-space: pre;">⁠scalar&lt;logical&gt;⁠</code> // <em>default:</em> <code>FALSE</code> (<code>optional</code>)
</p>
<p>If TRUE, display plot vertically.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>digits</code></td>
<td>
<p><em>Decimal places</em>
</p>
<p><code style="white-space: pre;">⁠scalar&lt;integer&gt;⁠</code> // <em>default:</em> <code>0L</code> (<code>optional</code>)
</p>
<p>Number of decimal places.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>data_label_decimal_symbol</code></td>
<td>
<p><em>Decimal symbol</em>
</p>
<p><code style="white-space: pre;">⁠scalar&lt;character&gt;⁠</code> // <em>default:</em> <code>"."</code> (<code>optional</code>)
</p>
<p>Decimal marker, some might prefer a comma ',' or something else entirely.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>x_axis_label_width, strip_width</code></td>
<td>
<p><em>Label width of x-axis and strip texts in plots</em>
</p>
<p><code style="white-space: pre;">⁠scalar&lt;integer&gt;⁠</code> // <em>default:</em> <code>20</code> (<code>optional</code>)
</p>
<p>Width of the labels used for the categorical column names in x-axis texts and strip texts.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>sort_by</code></td>
<td>
<p><em>What to sort output by</em>
</p>
<p><code style="white-space: pre;">⁠vector&lt;character&gt;⁠</code> // <em>default:</em> <code>NULL</code> (<code>optional</code>)
</p>
<p>Sort output (and collapse if requested). When using <code>indep</code>-argument,
sorting differs between ordered factors and unordered factors: Ordering
of ordered factors is always respected in output. Unordered factors will be
reordered by <code>sort_by</code>. Currently, this works best for a single <code>dep</code>.
</p>

<dl>
<dt>".top"</dt>
<dd>
<p>The proportion for the highest category available in the variable.</p>
</dd>
<dt>".upper"</dt>
<dd>
<p>The sum of the proportions for the categories above the middle category.</p>
</dd>
<dt>".mid_upper"</dt>
<dd>
<p>The sum of the proportions for the categories including and above the middle category.</p>
</dd>
<dt>".mid_lower"</dt>
<dd>
<p>The sum of the proportions for the categories including and below the middle category.</p>
</dd>
<dt>".lower"</dt>
<dd>
<p>The sum of the proportions for the categories below the middle category.</p>
</dd>
<dt>".bottom"</dt>
<dd>
<p>The proportions for the lowest category available in the variable.</p>
</dd>
<dt>".variable_label"</dt>
<dd>
<p>Sort by the variable labels.</p>
</dd>
<dt>".id"</dt>
<dd>
<p>Sort by the variable names.</p>
</dd>
<dt>".by_group"</dt>
<dd>
<p>The groups of the by argument.</p>
</dd>
<dt>character()</dt>
<dd>
<p>Character vector of category labels to sum together.</p>
</dd>
</dl>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>descend</code></td>
<td>
<p><em>Sorting order</em>
</p>
<p><code style="white-space: pre;">⁠scalar&lt;logical&gt;⁠</code> // <em>default:</em> <code>FALSE</code> (<code>optional</code>)
</p>
<p>Reverse sorting of <code>sort_by</code> in figures and tables. See <code>arrange_section_by</code>
for sorting of report sections.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>variables_always_at_top, variables_always_at_bottom</code></td>
<td>
<p><em>Top/bottom variables</em>
</p>
<p><code style="white-space: pre;">⁠vector&lt;character&gt;⁠</code> // <em>default:</em> <code>NULL</code> (<code>optional</code>)
</p>
<p>Column names in <code>data</code> that should always be placed at the top or bottom of figures/tables.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>table_wide</code></td>
<td>
<p><em>Pivot table wider</em>
</p>
<p><code style="white-space: pre;">⁠scalar&lt;logical&gt;⁠</code> // <em>default:</em> <code>FALSE</code> (<code>optional</code>)
</p>
<p>Whether to pivot table wider.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>table_main_question_as_header</code></td>
<td>
<p><em>Table main question as header</em>
</p>
<p><code style="white-space: pre;">⁠scalar&lt;logical&gt;⁠</code> // <em>default:</em> <code>FALSE</code> (<code>optional</code>)
</p>
<p>Whether to include the main question as a header in the table.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>translations</code></td>
<td>
<p><em>Localize your output</em>
</p>
<p><code style="white-space: pre;">⁠list&lt;character&gt;⁠</code>
</p>
<p>A list of translations where the name is the code and the value is the translation. See the examples.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>plot_height</code></td>
<td>
<p><em>DOCX-setting</em>
</p>
<p><code style="white-space: pre;">⁠scalar&lt;numeric&gt;⁠</code> // <em>default:</em> <code>12</code> (<code>optional</code>)
</p>
<p>DOCX plots need a height, which currently cannot be set easily with a Quarto chunk option.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>colour_palette</code></td>
<td>
<p><em>Colour palette</em>
</p>
<p><code style="white-space: pre;">⁠vector&lt;character&gt;⁠</code> // <em>default:</em> <code>NULL</code> (<code>optional</code>)
</p>
<p>Must contain at least the number of unique values (including missing) in the data set.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>colour_2nd_binary_cat</code></td>
<td>
<p><em>Colour for second binary category</em>
</p>
<p><code style="white-space: pre;">⁠scalar&lt;character&gt;⁠</code> // <em>default:</em> <code>"#ffffff"</code> (<code>optional</code>)
</p>
<p>Colour for the second category in binary variables. Often useful to hide this.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>colour_na</code></td>
<td>
<p><em>Colour for NA category</em>
</p>
<p><code style="white-space: pre;">⁠scalar&lt;character&gt;⁠</code> // <em>default:</em> <code>NULL</code> (<code>optional</code>)
</p>
<p>Colour as a single string for NA values, if showNA is "ifany" or "always".</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>main_font_size, label_font_size, strip_font_size, legend_font_size</code></td>
<td>
<p><em>Font sizes</em>
</p>
<p><code style="white-space: pre;">⁠scalar&lt;integer&gt;⁠</code> // <em>default:</em> <code>6</code> (<code>optional</code>)
</p>
<p>ONLY FOR DOCX-OUTPUT. Other output is adjusted using e.g. ggplot2::theme() or set with a global theme (ggplot2::theme_set()).
Font sizes for general text (6), data label text (3), strip text (6) and legend text (6).</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>font_family</code></td>
<td>
<p><em>Font family</em>
</p>
<p><code style="white-space: pre;">⁠scalar&lt;character&gt;⁠</code> // <em>default:</em> <code>"sans"</code> (<code>optional</code>)
</p>
<p>Word font family. See officer::fp_text.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>path</code></td>
<td>
<p><em>Output path for DOCX</em>
</p>
<p><code style="white-space: pre;">⁠scalar&lt;character&gt;⁠</code> // <em>default:</em> <code>NULL</code> (<code>optional</code>)
</p>
<p>Path to save docx-output.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>docx_template</code></td>
<td>
<p><em>Filename or rdocx object</em>
</p>
<p><code style="white-space: pre;">⁠scalar&lt;character&gt;|&lt;rdocx&gt;-object⁠</code> // <em>default:</em> <code>NULL</code> (<code>optional</code>)
</p>
<p>Can be either a valid character path to a reference Word file, or an existing rdocx-object in memory.</p>
</td>
</tr>
</table>
<h3>Value</h3>

<p>ggplot-object, optionally an extended ggplot object with ggiraph features.
</p>


<h3>Examples</h3>

<pre><code class="language-R">makeme(data = ex_survey,
       dep = b_1:b_3)
makeme(data = ex_survey,
       dep = b_1, indep = x1_sex)
makeme(data = ex_survey,
       dep = b_1:b_3, indep = c(x1_sex, x2_human),
       type = "sigtest_table_html")
makeme(data = ex_survey,
       dep = b_1, indep = x1_sex,
       type = "cat_prop_plot_docx")
makeme(data = ex_survey,
       dep = p_1:p_4, indep = x2_human,
       type = "cat_table_html")
makeme(data = ex_survey,
       dep = b_1:b_3,
       crowd = c("target", "others", "all"),
       mesos_var = "f_uni",
       mesos_group = "Uni of A")
</code></pre>


</div>