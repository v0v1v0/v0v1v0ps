<div class="container">

<table style="width: 100%;"><tr>
<td>as_data_frame_with_weights</td>
<td style="text-align: right;">R Documentation</td>
</tr></table>
<h2>Convert a survey design object to a data frame with weights stored as columns</h2>

<h3>Description</h3>

<p>Convert a survey design object to a data frame with weights stored as columns
</p>


<h3>Usage</h3>

<pre><code class="language-R">as_data_frame_with_weights(
  design,
  full_wgt_name = "FULL_SAMPLE_WGT",
  rep_wgt_prefix = "REP_WGT_",
  vars_to_keep = NULL
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr style="vertical-align: top;">
<td><code>design</code></td>
<td>
<p>A survey design object, created with either the <code>survey</code> or <code>srvyr</code> packages.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>full_wgt_name</code></td>
<td>
<p>The column name to use for the full-sample weights</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>rep_wgt_prefix</code></td>
<td>
<p>For replicate design objects, a prefix to use for the column names
of the replicate weights. The column names will be created by appending
the replicate number after the prefix.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>vars_to_keep</code></td>
<td>
<p>By default, all variables in the data will be kept.
To select only a subset of the non-weight variables,
you can supply a character vector of variable names to keep.</p>
</td>
</tr>
</table>
<h3>Value</h3>

<p>A data frame, with new columns containing the weights from the survey design object
</p>


<h3>Examples</h3>

<pre><code class="language-R">
data("lou_vax_survey", package = 'svrep')

library(survey)
# Create a survey design object
survey_design &lt;- svydesign(data = lou_vax_survey,
                           weights = ~ SAMPLING_WEIGHT,
                           ids = ~ 1)

rep_survey_design &lt;- as.svrepdesign(survey_design,
                                    type = "boot",
                                    replicates = 10)

# Adjust the weights for nonresponse
nr_adjusted_design &lt;- redistribute_weights(
  design = rep_survey_design,
  reduce_if = RESPONSE_STATUS == "Nonrespondent",
  increase_if = RESPONSE_STATUS == "Respondent",
  by = c("RACE_ETHNICITY", "EDUC_ATTAINMENT")
)

# Save the survey design object as a data frame
nr_adjusted_data &lt;- as_data_frame_with_weights(
  nr_adjusted_design,
  full_wgt_name = "NR_ADJUSTED_WGT",
  rep_wgt_prefix = "NR_ADJUSTED_REP_WGT_"
)
head(nr_adjusted_data)

# Check the column names of the result
colnames(nr_adjusted_data)

</code></pre>


</div>