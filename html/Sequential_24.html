<div class="container">

<table style="width: 100%;"><tr>
<td>SampleSize.Binomial</td>
<td style="text-align: right;">R Documentation</td>
</tr></table>
<h2>Sample size calculation for continuous sequential analysis with binomial data.</h2>

<h3>Description</h3>

<p>The function <code>SampleSize.Binomial</code> obtains the sample size needed to guarantee a desired statistical power, for a fixed true relative risk, when doing continuous sequential analysis for binomial data with a Wald-type upper boundary, which is flat with respect to the log-likelihood ratio. It can also be used to approximate the sample size needed when doing group sequential analysis for binomial data.</p>


<h3>Usage</h3>

<pre><code class="language-R">SampleSize.Binomial(RR,alpha=0.05,power=0.9,M=1,z="n",p="n",Tailed="upper")
      </code></pre>


<h3>Arguments</h3>

<table>
<tr style="vertical-align: top;">
<td><code>RR</code></td>
<td>
<p>A target vector of relative risks to be detected with the requested statistical powers.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>alpha</code></td>
<td>
<p>The significance level. The default value is "alpha=0.05". Must be in the range (0, 0.5].</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>power</code></td>
<td>
<p>The target vector of overall statistical powers to detect an increased risk of the relative risk (RR). The default value is "power=0.90".</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>M</code></td>
<td>
<p>The minimum number of events needed before the null hypothesis can be rejected. It must be a positive integer. The default value is "M=1".</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>z</code></td>
<td>
<p>For a matched case-control analysis, z is the number of controls matched to each case under the null hypothesis. There is no default value.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>p</code></td>
<td>
<p>The probability of having a case under the null hypothesis. There is no default value.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>Tailed</code></td>
<td>
<p>Tailed="upper" (default) for H0:RR&lt;=1, and Tailed="lower" for H0:RR&gt;=1 or Tailed="two" for H0:RR=1.</p>
</td>
</tr>
</table>
<h3>Details</h3>

<p>The function <code>SampleSize.Binomial</code> calculates the sample size N, to be used for the continuous binomial MaxSPRT in order to provide the desired statistical power for a user-specified relative risk RR. The required sample size (Required_N) is expressed in terms of the total number of observations, and it is the number of observations by which the sequential analysis will end without rejected the null hypothesis. The solution is  exact using iterative numerical calculations. 
</p>
<p>The required sample size, N, increases for increasing values of power, while N decreases for increasing values of alpha, the relative risk RR and the minimum number of events needed to signal M. For increasing values of z, the required sample size N can either decrease or increase.
</p>
<p>While this function calculates the required sample size for continuous sequential analysis, it can also be used as an approximation for group sequential analyses. With the same Required_N, and all other parameters being the same, a group sequential analysis will always give higher statistical power than a continuous sequential analysis, so <code>SampleSize.Binomial</code> can be use to ensure the required statistical power for group sequential analyses. 
</p>
<p>The input z represents the number of controls matched to each case. For example, if there are 3 controls matched to each case, "z=3". 
In a self-control analysis, z is the ratio of the control interval to the risk interval.
For example, if the risk interval is 2 days long and the control interval is 7 days long, z=7/2.
In terms of p, the binomial probability under the null hypothesis, p=1/(1+z), or equivalently, z=1/p-1. The parameter z must be a positive number.
</p>
<p>Alternatively, instead of z the user can specify p directly.
Note that only one of these inputs, z or p, has to be specified, but if both are entered the code will only work if z and p are such that p=1/(1+z).
Otherwise, an error message will appear to remind that such condition must be complied.
</p>


<h3>Value</h3>

<table><tr style="vertical-align: top;">
<td><code>SampleSize_by_RR_Power</code></td>
<td>
<p>A table containing the main performance measures associated to the required samples sizes for each combination of RR and power. The sample size N is provided in terms of the total number of observations. In the case-control setting, this is equal to the total number of cases and controls. In the self-control setting, it is equal to the total number of events in either the risk or the control interval.</p>
</td>
</tr></table>
<h3>Acknowledgements</h3>

<p>Development of the SampleSize.Binomial function was funded by:<br>
-	National Institute of General Medical Sciences, NIH, USA, through grant number R01GM108999.
</p>


<h3>See also</h3>

<p><code>CV.Binomial</code>: for calculating critical values in continuous sequential analysis with binomial data.<br><code>Performance.Binomial</code>: for calculating the statistical power, expected time to signal and expected time of analysis for continuous sequential analysis with binomial data.<br><code>SampleSize.Poisson</code>: sample size calculation for continuous sequential analysis with Poisson data.  
</p>


<h3>Author(s)</h3>

<p> Ivair Ramos Silva, Martin Kulldorff.
</p>


<h3>References</h3>

<p>Kulldorff M, Silva IR. (2015). Continuous Post-market Sequential Safety Surveillance with Minimum Events to Signal. REVSTAT Statistical Journal, 15(3): 373â€“394.
</p>


<h3>Examples</h3>

<pre><code class="language-R">
result&lt;- SampleSize.Binomial(RR=5,alpha=0.01,power=0.88,M=1,z=2)
# if you type:
result
# then you will get the following output:
# $Required_N
# [1] 25

# $cv
# [1] 4.59581

# $Type_I_Error
# [1] 0.009755004

# $Actual_power
# [1] 0.8855869

</code></pre>


</div>