<div class="container">

<table style="width: 100%;"><tr>
<td>mongo_tables_create</td>
<td style="text-align: right;">R Documentation</td>
</tr></table>
<h2>Create RegLog-valid database collections for MongoDB</h2>

<h3>Description</h3>

<p><a href="https://lifecycle.r-lib.org/articles/stages.html#experimental"><img src="../help/figures/lifecycle-experimental.svg" alt="[Experimental]"></a>
</p>
<p>MongoDB database don't enforce a structure to the documents contained within.
Even though this is true, it's best to use this function explicitly,
as after creation of collections it also create appropriate indexes for quick
querying of the database by RegLogMongoConnector.
</p>


<h3>Usage</h3>

<pre><code class="language-R">mongo_tables_create(
  mongo_url,
  mongo_db,
  mongo_options = mongolite::ssl_options(),
  account_name = "account",
  reset_code_name = "reset_code",
  user_data = NULL,
  hash_passwords = FALSE,
  verbose = TRUE
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr style="vertical-align: top;">
<td><code>mongo_url</code></td>
<td>
<p>URI to the MongoDB cluster</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>mongo_db</code></td>
<td>
<p>name of the MongoDB database</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>mongo_options</code></td>
<td>
<p>additional connection options such as SSL keys/certs</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>account_name</code></td>
<td>
<p>Name of the collection for storing user accounts credentials.
Defaults to 'account'. Mandatory collection.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>reset_code_name</code></td>
<td>
<p>Name of the collector for storing generated password reset
codes. Defaults to 'reset_code'. Mandatory collection.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>user_data</code></td>
<td>
<p>If you wish to import existing user database, you can input
data.frame with that table in this argument. It should contain columns:
username, password, email (ond optionally: create_time). Defaults to NULL.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>hash_passwords</code></td>
<td>
<p>If you are importing table of users upon tables creation,
you can also specify if the password should be hashed using <code>scrypt::hashPassword</code>.
Defaults to <code>FALSE</code>. If you have unhashed passwords in imported table, set
this option to <code>TRUE</code>.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>verbose</code></td>
<td>
<p>Boolean specific if the actions made by function should be
printed back to the console.</p>
</td>
</tr>
</table>
<h3>Details</h3>

<p>Every document in created collections will have following structure:
</p>

<ul>
<li>
<p> account (default name)
</p>

<ul>
<li>
<p> username: character <strong>(index)</strong>
</p>
</li>
<li>
<p> password: character
</p>
</li>
<li>
<p> email: character <strong>(index)</strong>
</p>
</li>
<li>
<p> create_time: timestamp
</p>
</li>
<li>
<p> update_time: timestamp
</p>
</li>
</ul>
</li>
<li>
<p> reset_code (default name)
</p>

<ul>
<li>
<p> user_id: character <strong>(index)</strong>
</p>
</li>
<li>
<p> reset_code: character
</p>
</li>
<li>
<p> used: numeric
</p>
</li>
<li>
<p> create_time: timestamp
</p>
</li>
<li>
<p> update_time: timestamp
</p>
</li>
</ul>
</li>
<li>
<p> logs (default name, optional) - this collection isn't created with this
function, as there is no need for that - MongoDB collections don't have a
set structure, and no additional index is created there.
</p>

<ul>
<li>
<p> time: timestamp
</p>
</li>
<li>
<p> session: character
</p>
</li>
<li>
<p> direction: character
</p>
</li>
<li>
<p> type: character
</p>
</li>
<li>
<p> note: character
</p>
</li>
</ul>
</li>
</ul>
<h3>See Also</h3>

<p>Other RegLog databases: 
<code>DBI_tables_create()</code>,
<code>gsheet_tables_create()</code>
</p>


</div>