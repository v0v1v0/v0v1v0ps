<div class="container">

<table style="width: 100%;"><tr>
<td>group_pts</td>
<td style="text-align: right;">R Documentation</td>
</tr></table>
<h2>Group Points</h2>

<h3>Description</h3>

<p><code>group_pts</code> groups rows into spatial groups. The function accepts a
<code>data.table</code> with relocation data, individual identifiers and a
threshold argument. The threshold argument is used to specify the criteria
for distance between points which defines a group. Relocation data should be
in two columns representing the X and Y coordinates.
</p>


<h3>Usage</h3>

<pre><code class="language-R">group_pts(
  DT = NULL,
  threshold = NULL,
  id = NULL,
  coords = NULL,
  timegroup,
  splitBy = NULL
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr style="vertical-align: top;">
<td><code>DT</code></td>
<td>
<p>input data.table</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>threshold</code></td>
<td>
<p>distance for grouping points, in the units of the
coordinates</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>id</code></td>
<td>
<p>Character string of ID column name</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>coords</code></td>
<td>
<p>Character vector of X coordinate and Y coordinate column names</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>timegroup</code></td>
<td>
<p>timegroup field in the DT within which the grouping will be
calculated</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>splitBy</code></td>
<td>
<p>(optional) character string or vector of grouping column
name(s) upon which the grouping will be calculated</p>
</td>
</tr>
</table>
<h3>Details</h3>

<p>The <code>DT</code> must be a <code>data.table</code>. If your data is a
<code>data.frame</code>, you can convert it by reference using
<code>data.table::setDT</code>.
</p>
<p>The <code>id</code>, <code>coords</code>, <code>timegroup</code> (and optional <code>splitBy</code>)
arguments expect the names of a column in <code>DT</code> which correspond to the
individual identifier, X and Y coordinates, timegroup (typically generated by
<code>group_times</code>) and additional grouping columns.
</p>
<p>The <code>threshold</code> must be provided in the units of the coordinates. The
<code>threshold</code> must be larger than 0. The coordinates must be planar
coordinates (e.g.: UTM). In the case of UTM, a <code>threshold</code> = 50 would
indicate a 50m distance threshold.
</p>
<p>The <code>timegroup</code> argument is required to define the temporal groups
within which spatial groups are calculated. The intended framework is to
group rows temporally with <code>group_times</code> then spatially with
<code>group_pts</code> (or <code>group_lines</code>, <code>group_polys</code>).
If you have already calculated temporal groups without
<code>group_times</code>, you can pass this column to the <code>timegroup</code>
argument. Note that the expectation is that each individual will be observed
only once per timegroup. Caution that accidentally including huge numbers of
rows within timegroups can overload your machine since all pairwise distances
are calculated within each timegroup.
</p>
<p>The <code>splitBy</code> argument offers further control over grouping. If within
your <code>DT</code>, you have multiple populations, subgroups or other distinct
parts, you can provide the name of the column which identifies them to
<code>splitBy</code>. The grouping performed by <code>group_pts</code> will only consider
rows within each <code>splitBy</code> subgroup.
</p>


<h3>Value</h3>

<p><code>group_pts</code> returns the input <code>DT</code> appended with a
<code>group</code> column.
</p>
<p>This column represents the spatialtemporal group. As with the other
grouping functions,  the actual value of <code>group</code> is arbitrary and
represents the identity of a given group where 1 or more individuals are
assigned to a group. If the data was reordered, the <code>group</code> may
change, but the contents of each group would not.
</p>
<p>A message is returned when a column named <code>group</code> already exists in
the input <code>DT</code>, because it will be overwritten.
</p>


<h3>See Also</h3>

<p><code>group_times</code>
</p>
<p>Other Spatial grouping: 
<code>group_lines()</code>,
<code>group_polys()</code>
</p>


<h3>Examples</h3>

<pre><code class="language-R"># Load data.table
library(data.table)


# Read example data
DT &lt;- fread(system.file("extdata", "DT.csv", package = "spatsoc"))

# Select only individuals A, B, C for this example
DT &lt;- DT[ID %in% c('A', 'B', 'C')]

# Cast the character column to POSIXct
DT[, datetime := as.POSIXct(datetime, tz = 'UTC')]

# Temporal grouping
group_times(DT, datetime = 'datetime', threshold = '20 minutes')

# Spatial grouping with timegroup
group_pts(DT, threshold = 5, id = 'ID',
          coords = c('X', 'Y'), timegroup = 'timegroup')

# Spatial grouping with timegroup and splitBy on population
group_pts(DT, threshold = 5, id = 'ID', coords = c('X', 'Y'),
         timegroup = 'timegroup', splitBy = 'population')
</code></pre>


</div>