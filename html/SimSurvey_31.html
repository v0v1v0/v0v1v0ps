<div class="container">

<table style="width: 100%;"><tr>
<td>sim_distribution</td>
<td style="text-align: right;">R Documentation</td>
</tr></table>
<h2>Simulate spatial and temporal distribution</h2>

<h3>Description</h3>

<p>Provided an abundance at age matrix and a survey grid to populate, this function
applies correlated space, age and year error to simulate the distribution
of the population. The ability to simulate distributions by length is yet to be implemented.
</p>


<h3>Usage</h3>

<pre><code class="language-R">sim_distribution(
  sim,
  grid = make_grid(),
  ays_covar = sim_ays_covar(),
  depth_par = sim_parabola()
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr style="vertical-align: top;">
<td><code>sim</code></td>
<td>
<p>A list with ages, years and an abundance at age matrix like
produced by <code>sim_abundance</code>.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>grid</code></td>
<td>
<p>A stars object defining the survey grid, like <code>survey_grid</code>
or one produced by <code>make_grid</code></p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>ays_covar</code></td>
<td>
<p>Closure for simulating age-year-space covariance,
like <code>sim_ays_covar</code></p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>depth_par</code></td>
<td>
<p>Closure for defining relationship between abundance and depth,
like <code>sim_parabola</code></p>
</td>
</tr>
</table>
<h3>Details</h3>

<p>This function simulates the probability of simulated fish inhabiting
a cell as a function of a parabolic relationship with depth and space, age,
and year autocorrelated errors. WARNING: it make take a long time to simulate
abundance in a large grid across many ages and years - start small first.
</p>


<h3>Value</h3>

<p>Appends three objects to the <code>sim</code> list:
</p>

<ul>
<li>
<p><code>grid</code> - A stars object with the grid details
</p>
</li>
<li>
<p><code>grid_xy</code> - Grid details as a data.table in xyz format
</p>
</li>
<li>
<p><code>sp_N</code> - A data.table with abundance split by age, year and cell
</p>
</li>
</ul>
<h3>Examples</h3>

<pre><code class="language-R">

sim &lt;- sim_abundance(ages = 1:5, years = 1:5) %&gt;%
           sim_distribution(grid = make_grid(res = c(20, 20)),
                            ays_covar = sim_ays_covar(phi_age = 0.8,
                                                      phi_year = 0.1),
                            depth_par = sim_parabola(mu = 200,
                                                     sigma = 50))
head(sim$sp_N)
head(sim$grid_xy)


</code></pre>


</div>