<div class="container">

<table style="width: 100%;"><tr>
<td>rnet_merge</td>
<td style="text-align: right;">R Documentation</td>
</tr></table>
<h2>Merge route networks, keeping attributes with aggregating functions</h2>

<h3>Description</h3>

<p>This is a small wrapper around <code>rnet_join()</code>.
In most cases we recommend using <code>rnet_join()</code> directly,
as it gives more control over the results
</p>


<h3>Usage</h3>

<pre><code class="language-R">rnet_merge(
  rnet_x,
  rnet_y,
  dist = 5,
  funs = NULL,
  sum_flows = TRUE,
  crs = geo_select_aeq(rnet_x),
  ...
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr style="vertical-align: top;">
<td><code>rnet_x</code></td>
<td>
<p>Target route network, the output will have the same geometries
as features in this object.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>rnet_y</code></td>
<td>
<p>Source route network. Columns from this route network object will
be copied across to the new network.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>dist</code></td>
<td>
<p>The buffer width around rnet_y in meters. 1 m by default.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>funs</code></td>
<td>
<p>A named list of functions to apply to named columns, e.g.:
<code>list(flow = sum, length = mean)</code>. The default is to sum all numeric
columns.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>sum_flows</code></td>
<td>
<p>Should flows be summed? <code>TRUE</code> by default.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>crs</code></td>
<td>
<p>The CRS to use for the buffer operation. See <code>?geo_projected</code> for details.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>...</code></td>
<td>
<p>Additional arguments passed to <code>rnet_join</code>.</p>
</td>
</tr>
</table>
<h3>Value</h3>

<p>An sf object with the same geometry as <code>rnet_x</code>
</p>


<h3>Examples</h3>

<pre><code class="language-R"># The source object:
rnet_y &lt;- route_network_small["flow"]
# The target object
rnet_x &lt;- rnet_subset(osm_net_example[1], rnet_y)
plot(rnet_x$geometry, lwd = 5)
plot(rnet_y$geometry, add = TRUE, col = "red", lwd = 2)
rnet_y$quietness &lt;- rnorm(nrow(rnet_y))
funs &lt;- list(flow = sum, quietness = mean)
rnet_merged &lt;- rnet_merge(rnet_x[1], rnet_y[c("flow", "quietness")],
  dist = 9, segment_length = 20, funs = funs
)
plot(rnet_y$geometry, lwd = 5, col = "lightgrey")
plot(rnet_merged["flow"], add = TRUE, lwd = 2)

# # With a different CRS
rnet_xp &lt;- sf::st_transform(rnet_x, "EPSG:27700")
rnet_yp &lt;- sf::st_transform(rnet_y, "EPSG:27700")
rnet_merged &lt;- rnet_merge(rnet_xp[1], rnet_yp[c("flow", "quietness")],
  dist = 9, segment_length = 20, funs = funs
)
plot(rnet_merged["flow"])
# rnet_merged2 = rnet_merge(rnet_x[1], rnet_y[c("flow", "quietness")],
#                          dist = 9, segment_length = 20, funs = funs,
#                          crs = "EPSG:27700")
# waldo::compare(rnet_merged, rnet_merged2)
# plot(rnet_merged$flow, rnet_merged2$flow)
# # Larger example
# system("gh release list")
# system("gh release upload v1.0.2 rnet_*")
# List the files released in v1.0.2:
# system("gh release download v1.0.2")
# rnet_x = sf::read_sf("rnet_x_ed.geojson")
# rnet_y = sf::read_sf("rnet_y_ed.geojson")
# rnet_merged = rnet_merge(rnet_x, rnet_y, dist = 9, segment_length = 20, funs = funs)
</code></pre>


</div>