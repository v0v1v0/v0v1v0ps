<div class="container">

<table style="width: 100%;"><tr>
<td>module-authentication</td>
<td style="text-align: right;">R Documentation</td>
</tr></table>
<h2>Authentication module</h2>

<h3>Description</h3>

<p>Authentication module
</p>


<h3>Usage</h3>

<pre><code class="language-R">auth_ui(
  id,
  status = "primary",
  tags_top = NULL,
  tags_bottom = NULL,
  background = NULL,
  choose_language = NULL,
  lan = NULL,
  ...
)

auth_server(
  input,
  output,
  session,
  check_credentials,
  use_token = FALSE,
  lan = NULL
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr style="vertical-align: top;">
<td><code>id</code></td>
<td>
<p>Module's id.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>status</code></td>
<td>
<p>Bootstrap status to use for the panel and the button.
Valid status are: <code>"default"</code>, <code>"primary"</code>, <code>"success"</code>,
<code>"warning"</code>, <code>"danger"</code>.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>tags_top</code></td>
<td>
<p>A <code>tags (div, img, ...)</code> to be displayed on top of the authentication module.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>tags_bottom</code></td>
<td>
<p>A <code>tags (div, img, ...)</code> to be displayed on bottom of the authentication module.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>background</code></td>
<td>
<p>A optionnal <code>css</code> for authentication background. See example.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>choose_language</code></td>
<td>
<p><code>logical/character</code>. Add language selection on top ? TRUE for all supported languages
or a vector of possibilities like <code>c("en", "fr", "pt-BR", "es", "de", "pl")</code>. If enabled, <code>input$shinymanager_language</code> is created</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>lan</code></td>
<td>
<p>A language object. See  <code>use_language</code></p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>...</code></td>
<td>
<p>: Used for old version compatibility.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>input, output, session</code></td>
<td>
<p>Standard Shiny server arguments.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>check_credentials</code></td>
<td>
<p>Function with two arguments (<code>user</code>,
the username provided by the user and <code>password</code>, his/her password).
Must return a <code>list</code> with at least 2 (or 4 in case of sqlite) slots :
</p>

<ul>
<li> <p><strong>result</strong> : logical, result of authentication.
</p>
</li>
<li> <p><strong>user_info</strong> : <code>list</code>. What you want about user ! (sqlite : the line in <code>db</code> corresponding to the user).
</p>
</li>
<li> <p><strong>expired</strong> : logical, is user has expired ? Always <code>FALSE</code> if <code>db</code> doesn't have a <code>expire</code> column. Optional.
</p>
</li>
<li> <p><strong>authorized</strong> : logical, is user can access to his app ? Always <code>TRUE</code> if <code>db</code> doesn't have a <code>applications</code> column. Optional.
</p>
</li>
</ul>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>use_token</code></td>
<td>
<p>Add a token in the URL to check authentication. Should not be used directly.</p>
</td>
</tr>
</table>
<h3>Value</h3>

<p>A <code>reactiveValues</code> with 3 slots :
</p>

<ul>
<li> <p><strong>result</strong> : logical, result of authentication.
</p>
</li>
<li> <p><strong>user</strong> : character, name of connected user.
</p>
</li>
<li> <p><strong>user_info</strong> : information about the user.
</p>
</li>
</ul>
<h3>Examples</h3>

<pre><code class="language-R">if (interactive()) {
  
  library(shiny)
  library(shinymanager)
  
  # data.frame with credentials info
  # credentials &lt;- data.frame(
  #   user = c("fanny", "victor"),
  #   password = c("azerty", "12345"),
  #   comment = c("alsace", "auvergne"),
  #   stringsAsFactors = FALSE
  # )
  
  # you can hash the password using scrypt
  # and adding a column is_hashed_password
  # data.frame with credentials info
  credentials &lt;- data.frame(
    user = c("fanny", "victor"),
    password = c(scrypt::hashPassword("azerty"), scrypt::hashPassword("12345")),
    is_hashed_password = TRUE,
    comment = c("alsace", "auvergne"),
    stringsAsFactors = FALSE
  )
  
  # app
  ui &lt;- fluidPage(
    
    # authentication module
    auth_ui(
      id = "auth",
      # add image on top ?
      tags_top = 
        tags$div(
          tags$h4("Demo", style = "align:center"),
          tags$img(
            src = "https://www.r-project.org/logo/Rlogo.png", width = 100
        )
      ),
      # add information on bottom ?
      tags_bottom = tags$div(
        tags$p(
          "For any question, please  contact ",
          tags$a(
            href = "mailto:someone@example.com?Subject=Shiny%20aManager",
            target="_top", "administrator"
          )
        )
      ),
      # change auth ui background ?
      # https://developer.mozilla.org/fr/docs/Web/CSS/background
      background  = "linear-gradient(rgba(0, 0, 255, 0.5),
                       rgba(255, 255, 0, 0.5)),
                       url('https://www.r-project.org/logo/Rlogo.png');", 
      # set language ?
      lan = use_language("fr")
    ),
    
    # result of authentication
    verbatimTextOutput(outputId = "res_auth"),
    
    # classic app
    headerPanel('Iris k-means clustering'),
    sidebarPanel(
      selectInput('xcol', 'X Variable', names(iris)),
      selectInput('ycol', 'Y Variable', names(iris),
                  selected=names(iris)[[2]]),
      numericInput('clusters', 'Cluster count', 3,
                   min = 1, max = 9)
    ),
    mainPanel(
      plotOutput('plot1')
    )
  )
  
  server &lt;- function(input, output, session) {
    
    # authentication module
    auth &lt;- callModule(
      module = auth_server,
      id = "auth",
      check_credentials = check_credentials(credentials)
    )
    
    output$res_auth &lt;- renderPrint({
      reactiveValuesToList(auth)
    })
    
    # classic app
    selectedData &lt;- reactive({
      
      req(auth$result)  # &lt;---- dependency on authentication result
      
      iris[, c(input$xcol, input$ycol)]
    })
    
    clusters &lt;- reactive({
      kmeans(selectedData(), input$clusters)
    })
    
    output$plot1 &lt;- renderPlot({
      palette(c("#E41A1C", "#377EB8", "#4DAF4A", "#984EA3",
                "#FF7F00", "#FFFF33", "#A65628", "#F781BF", "#999999"))
      
      par(mar = c(5.1, 4.1, 0, 1))
      plot(selectedData(),
           col = clusters()$cluster,
           pch = 20, cex = 3)
      points(clusters()$centers, pch = 4, cex = 4, lwd = 4)
    })
  }
  
  shinyApp(ui, server)
  
}
</code></pre>


</div>