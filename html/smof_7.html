<div class="container">

<table style="width: 100%;"><tr>
<td>smof_refit</td>
<td style="text-align: right;">R Documentation</td>
</tr></table>
<h2>Re-fitting an existing <code>smof</code> model for improved optimization</h2>

<h3>Description</h3>

<p>Given a model fitted by <code>smof</code>, this function helps 
to improve the achieved fitting level by launching new numerical optimizations 
of the underlying target function.
The search process is initiated with parameters randomly chosen
in the vicinity of those of the <code>object</code> provided.</p>


<h3>Usage</h3>

<pre><code class="language-R">smof_refit(object, searches = 10, sd = 1, opt.control=list(), verbose = 1)
</code></pre>


<h3>Arguments</h3>

<table>
<tr style="vertical-align: top;">
<td><code>object</code></td>
<td>
<p>an object returned by a call to <code>smof</code>;
that call must include the argument <code>original=TRUE</code>. </p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>searches</code></td>
<td>
<p>a positive integer representing the number of attempted searches.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>sd</code></td>
<td>
<p>the standard deviation of the zero-mean normal variates used 
for earch search to generate the initial set of parameters from which 
to initiate a numerical optimization.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>opt.control</code></td>
<td>
<p>a list passed to <code>optim</code> as its <code>control</code>
argument. It must not be used to turn the minimization problem into a
maximization one.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>verbose</code></td>
<td>
<p>an integer regulating the amount of messages displayed;
it can be 0 (no messages), 1 (default value) or larger than 1 for 
a very verbose outcome.</p>
</td>
</tr>
</table>
<h3>Details</h3>

<p>The fitting step of a <code>smof</code> call, performed with the aid of <code>optim</code>, 
can run into problems with complex optimizations, typically when many parameters 
regulating the numeric
scores are involved. This situation may be flagged by the message
</p>
<pre>Notice. Non-zero error code returned by optim:...</pre>
<p>It is expected that the main usage of this function is to 
improve the fitting of models produced with <code>scoring$type="spline"</code>,
since this option generates model with more parameters 
than an equivalent  model with <code>scoring$type="distr"</code>.
</p>
<p>Since the initial values of each optimization step are randomly generated, 
one may want to make a preliminary call to <code>set.seed</code>.
if replicability of the results is required.
</p>


<h3>Value</h3>

<p>an object of class <code>smof</code></p>


<h3>See Also</h3>

<p><code>smof</code>, <code>optim</code>, 
<code>set.seed</code></p>


<h3>Examples</h3>

<pre><code class="language-R">library(datasets)
data(esoph)
fit &lt;- glm(cbind(ncases, ncontrols) ~ agegp + tobgp + alcgp, family=binomial(), data=esoph)
smof2 &lt;- smof(fit, esoph, c("agegp", "alcgp"), 
             scoring=list(type="spline", in.knots=c(2,1)), original=TRUE)
set.seed(101)             
smof2a &lt;- smof_refit(smof2, searches=4, opt.control=list(maxit=50))
# smof2b &lt;- smof_refit(smof2a)  # further improvement can be attempted
</code></pre>


</div>