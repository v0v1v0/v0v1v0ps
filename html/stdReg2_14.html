<div class="container">

<table style="width: 100%;"><tr>
<td>standardize_glm</td>
<td style="text-align: right;">R Documentation</td>
</tr></table>
<h2>Get regression standardized estimates from a glm</h2>

<h3>Description</h3>

<p>Get regression standardized estimates from a glm
</p>


<h3>Usage</h3>

<pre><code class="language-R">standardize_glm(
  formula,
  data,
  values,
  clusterid,
  matched_density_cases,
  matched_density_controls,
  matching_variable,
  p_population,
  case_control = FALSE,
  ci_level = 0.95,
  ci_type = "plain",
  contrasts = NULL,
  family = "gaussian",
  reference = NULL,
  transforms = NULL
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr style="vertical-align: top;">
<td><code>formula</code></td>
<td>
<p>The formula which is used to fit the model for the outcome.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>data</code></td>
<td>
<p>The data.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>values</code></td>
<td>
<p>A named list or data.frame specifying the variables and values
at which marginal means of the outcome will be estimated.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>clusterid</code></td>
<td>
<p>An optional string containing the name of a cluster identification variable
when data are clustered.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>matched_density_cases</code></td>
<td>
<p>A function of the matching variable.
The probability (or density) of the matched variable among the cases.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>matched_density_controls</code></td>
<td>
<p>A function of the matching variable.
The probability (or density) of the matched variable among the controls.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>matching_variable</code></td>
<td>
<p>The matching variable extracted from the data set.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>p_population</code></td>
<td>
<p>Specifies the incidence in the population when <code>case_control=TRUE</code>.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>case_control</code></td>
<td>
<p>Whether the data comes from a case-control study.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>ci_level</code></td>
<td>
<p>Coverage probability of confidence intervals.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>ci_type</code></td>
<td>
<p>A string, indicating the type of confidence intervals.
Either "plain", which gives untransformed intervals, or "log", which gives
log-transformed intervals.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>contrasts</code></td>
<td>
<p>A vector of contrasts in the following format:
If set to <code>"difference"</code> or <code>"ratio"</code>, then <code class="reqn">\psi(x)-\psi(x_0)</code>
or <code class="reqn">\psi(x) / \psi(x_0)</code> are constructed, where <code class="reqn">x_0</code> is a reference
level specified by the <code>reference</code> argument. Has to be <code>NULL</code>
if no references are specified.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>family</code></td>
<td>
<p>The family argument which is used to fit the glm model for the outcome.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>reference</code></td>
<td>
<p>A vector of reference levels in the following format:
If <code>contrasts</code> is not <code>NULL</code>, the desired reference level(s). This
must be a vector or list the same length as <code>contrasts</code>, and if not named,
it is assumed that the order is as specified in contrasts.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>transforms</code></td>
<td>
<p>A vector of transforms in the following format:
If set to <code>"log"</code>, <code>"logit"</code>, or <code>"odds"</code>, the standardized
mean <code class="reqn">\theta(x)</code> is transformed into <code class="reqn">\psi(x)=\log\{\theta(x)\}</code>,
<code class="reqn">\psi(x)=\log[\theta(x)/\{1-\theta(x)\}]</code>, or
<code class="reqn">\psi(x)=\theta(x)/\{1-\theta(x)\}</code>, respectively.
If the vector is <code>NULL</code>, then <code class="reqn">\psi(x)=\theta(x)</code>.</p>
</td>
</tr>
</table>
<h3>Details</h3>

<p><code>standardize_glm</code> performs regression standardization
in generalized linear models,
at specified values of the exposure, over the sample covariate distribution.
Let <code class="reqn">Y</code>, <code class="reqn">X</code>, and <code class="reqn">Z</code> be the outcome, the exposure, and a
vector of covariates, respectively.
<code>standardize_glm</code> uses a fitted generalized linear
model to estimate the standardized
mean <code class="reqn">\theta(x)=E\{E(Y|X=x,Z)\}</code>,
where <code class="reqn">x</code> is a specific value of <code class="reqn">X</code>,
and the outer expectation is over the marginal distribution of <code class="reqn">Z</code>.
</p>


<h3>Value</h3>

<p>An object of class <code>std_glm</code>.
This is basically a list with components estimates and covariance estimates in <code>res</code>.
Results for transformations, contrasts, references are stored in <code>res_contrasts</code>.
Obtain numeric results in a data frame with the tidy function.
</p>


<h3>References</h3>

<p>Rothman K.J., Greenland S., Lash T.L. (2008).
<em>Modern Epidemiology</em>, 3rd edition.
Lippincott, Williams &amp; Wilkins.
</p>
<p>Sjölander A. (2016).
Regression standardization with the R-package stdReg.
<em>European Journal of Epidemiology</em> <b>31</b>(6), 563-574.
</p>
<p>Sjölander A. (2016).
Estimation of causal effect measures with the R-package stdReg.
<em>European Journal of Epidemiology</em> <b>33</b>(9), 847-858.
</p>


<h3>Examples</h3>

<pre><code class="language-R">
# basic example
# needs to correctly specify the outcome model and no unmeasered confounders
# (+ standard causal assunmptions)
set.seed(6)
n &lt;- 100
Z &lt;- rnorm(n)
X &lt;- rnorm(n, mean = Z)
Y &lt;- rbinom(n, 1, prob = (1 + exp(X + Z))^(-1))
dd &lt;- data.frame(Z, X, Y)
x &lt;- standardize_glm(
  formula = Y ~ X * Z,
  family = "binomial",
  data = dd,
  values = list(X = 0:1),
  contrasts = c("difference", "ratio"),
  reference = 0
)
x
# different transformations of causal effects

# example from Sjölander (2016) with case-control data
# here the matching variable needs to be passed as an argument
singapore &lt;- AF::singapore
Mi &lt;- singapore$Age
m &lt;- mean(Mi)
s &lt;- sd(Mi)
d &lt;- 5
standardize_glm(
  formula = Oesophagealcancer ~ (Everhotbev + Age + Dial + Samsu + Cigs)^2,
  family = binomial, data = singapore,
  values = list(Everhotbev = 0:1), clusterid = "Set",
  case_control = TRUE,
  matched_density_cases = function(x) dnorm(x, m, s),
  matched_density_controls = function(x) dnorm(x, m - d, s),
  matching_variable = Mi,
  p_population = 19.3 / 100000
)

# multiple exposures
set.seed(7)
n &lt;- 100
Z &lt;- rnorm(n)
X1 &lt;- rnorm(n, mean = Z)
X2 &lt;- rnorm(n)
Y &lt;- rbinom(n, 1, prob = (1 + exp(X1 + X2 + Z))^(-1))
dd &lt;- data.frame(Z, X1, X2, Y)
x &lt;- standardize_glm(
  formula = Y ~ X1 + X2 + Z,
  family = "binomial",
  data = dd, values = list(X1 = 0:1, X2 = 0:1),
  contrasts = c("difference", "ratio"),
  reference = c(X1 = 0, X2 = 0)
)
x
tidy(x)

# continuous exposure
set.seed(2)
n &lt;- 100
Z &lt;- rnorm(n)
X &lt;- rnorm(n, mean = Z)
Y &lt;- rnorm(n, mean = X + Z + 0.1 * X^2)
dd &lt;- data.frame(Z, X, Y)
x &lt;- standardize_glm(
  formula = Y ~ X * Z,
  family = "gaussian",
  data = dd,
  values = list(X = seq(-1, 1, 0.1))
)

# plot standardized mean as a function of x
plot(x)
# plot standardized mean - standardized mean at x = 0 as a function of x
plot(x, contrast = "difference", reference = 0)

</code></pre>


</div>