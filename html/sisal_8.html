<div class="container">

<table style="width: 100%;"><tr>
<td>plotSelected.sisal</td>
<td style="text-align: right;">R Documentation</td>
</tr></table>
<h2>
Plotting Sets of Inputs Produced by Sequential Input Selection
</h2>

<h3>Description</h3>

<p>Draws a table depicting the inputs selected by a number of
<code>sisal</code> runs, one row for each run.
</p>


<h3>Usage</h3>

<pre><code class="language-R">## S3 method for class 'sisal'
plotSelected(x, useAllNames = TRUE,
             pickIntPart = FALSE, intTransform = function(x) x,
             formatCArgs = list(), xLabels = 1, yLabels = NULL,
             L.f.color = "black", L.v.color = "grey50",
             other.color = "white", naFill = other.color,
             naStripes = L.v.color, selectedLabels = TRUE,
             otherLabels = FALSE,
             labelPar = gpar(fontface = 1, fontsize = 20, cex = 0.35),
             nestedPar = gpar(fontface = 3),
             ranking = c("pairwise", "nested"), tableArgs = list(),
             ...)

## S3 method for class 'list'
plotSelected(x, ...)
</code></pre>


<h3>Arguments</h3>

<table>
<tr style="vertical-align: top;">
<td><code>x</code></td>
<td>
<p> an object of class <code>"sisal"</code> or a <code>list</code> of such
objects giving the results of input selection.  </p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>useAllNames</code></td>
<td>
<p> a <code>logical</code> flag.  If <code>TRUE</code>, collects
the names of input variables from all elements of a <code>list</code>
<code><var>x</var></code> or from the single <code>"sisal"</code> object.  Each
unique name is represented by one column in the table.  If
<code>FALSE</code>, all elements of <code><var>x</var></code> are assumed to have the
same set of input variables in the same order.  </p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>pickIntPart</code></td>
<td>
<p> a <code>logical</code> <code>vector</code>.  If
<code><var>pickIntPart</var>[<var>k</var>]</code> is <code>TRUE</code>, the input names
collected from <code><var>x</var>[[<var>k</var>]]</code> (<code><var>x</var></code> is a
<code>list</code>) or from <code><var>x</var></code> (<code><var>x</var></code> is a single
<code>"sisal"</code> object and <code><var>k</var> == 1</code>) are filtered so that
any name containing an integer part is converted to that integer
(the remaining part is dropped).  If the <code>length</code> of the
<code>vector</code> and the number of rows in the table differ, the values
of the <code>vector</code> are recycled.  </p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>intTransform</code></td>
<td>
<p> a <code>function</code> that transforms integral valued
input names to another integer.  Used if and only if the relevant
element of <code><var>pickIntPart</var></code> is <code>TRUE</code>.  The function
must accept a <code>numeric</code> <code>vector</code> argument and return a
<code>numeric</code> <code>vector</code>.  The default value is an identity
function. </p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>formatCArgs</code></td>
<td>
<p> a named <code>list</code> of arguments to
<code>formatC</code>.  If the relevant element of
<code><var>pickIntPart</var></code> is <code>TRUE</code>, the integral valued column
names are formatted with <code>formatC</code> using these arguments.  For
example, it is possible to add a sign with <code>list(flag =
    "+")</code>. </p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>xLabels</code></td>
<td>
<p> a <code>numeric</code> value, <code>character</code> <code>vector</code>
or <code>list</code> affecting the column labels in the table.  If
<code>useAllNames</code> is <code>TRUE</code>, a named <code>list</code> or
<code>character</code> <code>vector</code> can be used to rename inputs.  In
this case, the names in the <code>vector</code> must contain all the input
names gathered from <code>x</code>. The new names (display names) are
taken from the values in the <code>vector</code>, indexed with the names
from <code>x</code>.  If <code>useAllNames</code> is <code>TRUE</code>, a
<code>numeric</code> value has no effect.  If <code>useAllNames</code> is
<code>FALSE</code>, a <code>numeric</code> value is an index to <code>x</code>
indicating the object to be used when collecting input names.  An
unnamed <code>list</code> or <code>character</code> <code>vector</code> of column
names can also be used when <code>useAllNames</code> is <code>FALSE</code>.  </p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>yLabels</code></td>
<td>
<p> a <code>character</code> <code>vector</code> or <code>list</code> giving
the row labels in the table.  <code>NULL</code> (the default) means no
labels. </p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>L.f.color</code></td>
<td>
<p> fill color for table cells representing an input
variable in the <var>L.f</var> set. </p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>L.v.color</code></td>
<td>
<p> fill color for table cells representing an input
variable in the <var>L.v</var> set. </p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>other.color</code></td>
<td>
<p> fill color for table cells representing an input
variable outside both <var>L.f</var> and <var>L.v</var>. </p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>naFill</code></td>
<td>
<p> background color for table cells representing a missing
input variable. </p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>naStripes</code></td>
<td>
<p> stripe color for table cells representing a missing
input variable. </p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>selectedLabels</code></td>
<td>
<p> a <code>logical</code> flag.  If <code>TRUE</code> (the
default), draw labels on table cells representing input variables in
the <var>L.f</var> or <var>L.v</var> sets.  The label shows the importance
rank of the variable.  See ‘Details’.  </p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>otherLabels</code></td>
<td>
<p> a <code>logical</code> flag.  If <code>TRUE</code>, draw
labels on table cells representing input variables not included the
<var>L.f</var> or <var>L.v</var> sets.  The label shows the importance rank of
the variable.  The default value is <code>FALSE</code>.  See
‘Details’. </p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>labelPar</code></td>
<td>
<p> graphical parameters for labels of table cells. </p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>nestedPar</code></td>
<td>
<p> graphical parameters for labels on rows that
represent input selection runs where the best nodes of each size are
all nested.  See ‘Details’.  Only used if
<code><var>ranking</var></code> includes <code>"nested"</code>.  These take
precedence over values set in <code><var>labelPar</var></code>.  </p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>ranking</code></td>
<td>
<p> which input ranking method(s) to use.  A
<code>character</code> <code>vector</code> containing one or both of
<code>"pairwise"</code> and <code>"nested"</code>.  Abbreviated versions can be
used.  See ‘Details’ for a description of the ranking
methods.  If both rankings are requested by the user and exist, they
are both written on the label, but only where the ranks differ.  The
first element indicates the preferred primary ranking method, and
any differing ranks produced by a possible secondary ranking method
are presented in parentheses after the rank indicated by the primary
method.  The default is to use both methods when possible,
preferring the always available <code>"pairwise"</code> method.  </p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>tableArgs</code></td>
<td>
<p> a named <code>list</code> of arguments passed to
<code>sisalTable</code>.  This can also be used when arguments of
<code>sisalTable</code> and the <code>"sisal"</code> method of
<code>plotSelected</code> have the same name. </p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>...</code></td>
<td>
<p> In the <code>"sisal"</code> method, arguments passed to
<code>sisalTable</code>.  In the <code>"list"</code> method, arguments
passed to the next method, determined by the class of the first
element in the list. </p>
</td>
</tr>
</table>
<h3>Details</h3>

<p>Currently the <code>"sisal"</code> and <code>"list"</code> methods are the only
methods for the generic function <code>plotSelected</code> defined by the
sisal package.
</p>
<p>Mathematical annotation can be used in text.  See plotmath.  If
the same input is in both the <var>L.f</var> and the <var>L.v</var> sets,
<code><var>L.f.color</var></code> and <code><var>L.v.color</var></code> are mixed in
alternating stripes.  See <code>col2rgb</code> for a description of
possible color values.
</p>
<p>The importance rank of input variables is determined using one or both
of the following two methods (see <code><var>ranking</var></code>):
</p>

<dl>
<dt>"nested"</dt>
<dd>
<p>This method requires that all the nodes with the smallest
validation error among the nodes with the same number of input
variables are nested.  Let's imagine a path through the
incrementally smaller best nodes (not necessarily a path in the
search graph) where the edges are labeled with the <abbr><span class="acronym">ID</span></abbr> of
the input removed in order to create the smaller model.  In this
ranking method, the remaining input variable gets rank 1.
Traversing the path in the reverse direction and printing the edge
labels produces the rest of the input variables from smaller rank
to larger. If <code>hbranches = 1</code> in <code>sisal</code>, the models are
always nested and the method agrees with <code>"pairwise"</code>.
</p>
</dd>
<dt>"pairwise"</dt>
<dd>
<p>This is Copeland's pairwise aggregation method.  It can be used in
all cases, unlike <code>"nested"</code>.  The score of an input
variable is the number of pairwise victories minus the number of
pairwise defeats when compared with other inputs.  The inputs are
ranked by their score.  The method may result in ties.  Tied nodes
are ranked according to <code><var>ties.method</var> = "min"</code> in
<code>rank</code>.
</p>
<p>The pairwise comparisons are performed in the following way: In
<code>sisal</code>, at each stage of the search, input variables are
ordered and inputs are removed starting from one or more (when
<code><var>hbranches</var> &gt; 1</code>) of the worst ones according to that
order.  A record, let's say <code><var>C</var>[<var>A</var>, <var>B</var>]</code>, is
kept of each pair of inputs (<var>A</var>, <var>B</var>) in order to keep
track of how many times <var>A</var> was better than <var>B</var>.  Let
<var>L</var> be the set of inputs to remove at the current stage of the
search in one of the branches and <var>M</var> the set of remaining
inputs.  Then, <code><var>C</var>[<var>A</var>, <var>B</var>]</code> is incremented by
one for all <var>A</var> in <var>M</var> and <var>B</var> in <var>L</var>, but also
for all <var>A</var> in <var>L</var> and <var>B</var> in <var>L</var> such that
<var>A</var> is better than <var>B</var> according to the order used for
picking the inputs to remove. <var>A</var> gets a pairwise victory
over <var>B</var> if
<code><var>C</var>[<var>A</var>, <var>B</var>] &gt; <var>C</var>[<var>B</var>, <var>A</var>]</code>.
</p>
</dd>
</dl>
<p>For information on setting graphical parameters
(<code><var>labelPar</var></code>, <code><var>nestedPar</var></code>), see
<code>gpar</code>.
</p>


<h3>Value</h3>

<p>The function is usually called for the side effect (a plot is drawn),
but it also returns a <code>grob</code> representation of the plot.
</p>


<h3>Author(s)</h3>

<p>Mikko Korpela
</p>


<h3>References</h3>

<p>Pomerol, J.-C. and Barba-Romero, S. (2000) <em>Multicriterion
decision in management: principles and
practice</em>. Springer. p. 122. <abbr><span class="acronym">ISBN</span></abbr>: 0-7923-7756-7.
</p>


<h3>See Also</h3>

<p><code>sisal</code>, <code>sisalTable</code>,
plotmath, <code>gpar</code>
</p>


<h3>Examples</h3>

<pre><code class="language-R">library(grDevices)
library(grid)
toy1.2 &lt;- list(testSisal(Mtimes=10, stepsAhead=1, dataset="tsToy"),
               testSisal(Mtimes=10, stepsAhead=2, dataset="tsToy"))
## Resizing enabled:
## - mathematical expressions in titles
## - extracting the integer part of input variable names
grid.newpage()
plotSelected(toy1.2, yLabels = c("+1", "+2"),
             main = "Toy time series",
             xlab = expression(paste("input variables ",
                                     italic(y[t+l]))),
             ylab = expression(paste("output ", italic(y[t+k]))),
             pickIntPart = TRUE, intTransform = function(x) -x)
## Fixed size plot:
## - some graphical parameters adjusted
## - cex in labelPar adjusts the space around the text in table cells
## - new device the same size as the plot
grb &lt;- plotSelected(toy1.2, resizeText = FALSE, resizeTable = FALSE,
                    axesPar = gpar(fontsize = 11, col = "red"),
                    labelPar = gpar(fontsize = 14/0.25, cex = 0.25),
                    fg = "wheat", outerRect = FALSE,
                    linePar = gpar(lty = "dashed"),
                    xAxisRot = 45, just = c("left", "top"),
                    tableArgs = list(x = 0, y = 1), draw = FALSE)
devWidth &lt;- convertWidth(grobWidth(grb), unitTo = "inches",
                         valueOnly = TRUE)
devHeight &lt;- convertHeight(grobHeight(grb), unitTo = "inches",
                           valueOnly = TRUE)
dev.new(width = devWidth, height = devHeight, units = "in", res = 72)
grid.draw(grb)
if (interactive()) {
    dev.set(dev.prev())
} else {
    dev.off()
}
</code></pre>


</div>