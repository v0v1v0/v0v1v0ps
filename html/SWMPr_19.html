<div class="container">

<table style="width: 100%;"><tr>
<td>decomp</td>
<td style="text-align: right;">R Documentation</td>
</tr></table>
<h2>Simple trend decomposition</h2>

<h3>Description</h3>

<p>Decompose data into trend, cyclical (e.g., daily, annual), and random components using <code>decompose</code> and <code>ts</code>
</p>


<h3>Usage</h3>

<pre><code class="language-R">decomp(dat_in, ...)

## S3 method for class 'swmpr'
decomp(
  dat_in,
  param,
  type = "additive",
  frequency = "daily",
  start = NULL,
  ...
)

## Default S3 method:
decomp(
  dat_in,
  param,
  date_col,
  type = "additive",
  frequency = "daily",
  start = NULL,
  ...
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr style="vertical-align: top;">
<td><code>dat_in</code></td>
<td>
<p>input data object</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>...</code></td>
<td>
<p>arguments passed to <code>decompose</code>, <code>ts</code>, and other methods</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>param</code></td>
<td>
<p>chr string of swmpr parameter to decompose</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>type</code></td>
<td>
<p>chr string of <code>'additive'</code> or <code>'multiplicative'</code> indicating the type of decomposition, default <code>'additive'</code>.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>frequency</code></td>
<td>
<p>chr string or numeric vector indicating the periodic component of the input parameter.  Only <code>'daily'</code> or <code>'annual'</code> are accepted as chr strings.  Otherwise a numeric vector specifies the number of observations required for a full cycle of the input parameter.  Defaults to <code>'daily'</code> for a diurnal parameter.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>start</code></td>
<td>
<p>numeric vector indicating the starting value for the time series given the frequency.  Only required if <code>frequency</code> is numeric. See <code>ts</code>.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>date_col</code></td>
<td>
<p>chr string of the name of the date column</p>
</td>
</tr>
</table>
<h3>Details</h3>

<p>This function is a simple wrapper to the <code>decompose</code> function.  The <code>decompose</code> function separates a time series into additive or multiplicative components describing a trend, cyclical variation (e.g., daily or annual), and the remainder.  The additive decomposition assumes that the cyclical component of the time series is stationary (i.e., the variance is constant), whereas a multiplicative decomposition accounts for non-stationarity.  By default, a moving average with a symmetric window is used to filter the cyclical component.  Alternatively, a vector of filter coefficients in reverse time order can be supplied (see <code>decompose</code>).  
</p>
<p>The <code>decompose</code> function requires a ts object with a specified frequency.  The <code>decomp</code> function converts the input swmpr vector to a ts object prior to <code>decompose</code>.  This requires an explicit input defining the frequency in the time series required to complete a full period of the parameter.  For example, the frequency of a parameter with diurnal periodicity would be 96 if the time step is 15 minutes (24 hours * 60 minutes / 15 minutes).  The frequency of a parameter with annual periodicity at a 15 minute time step would be 35040 (365 days * 24 hours * 60 minutes / 15 minutes).  For simplicity, chr strings of <code>'daily'</code> or <code>'annual'</code> can be supplied in place of numeric values.  A starting value of the time series must be supplied in the latter case.  Use of the <code>setstep</code> function is required to standardize the time step prior to decomposition.  
</p>
<p>Note that the <code>decompose</code> function is a relatively simple approach and alternative methods should be investigated if a more sophisticated decomposition is desired.
</p>


<h3>Value</h3>

<p>Returns a decomposed.ts object
</p>


<h3>References</h3>

<p>M. Kendall and A. Stuart (1983) The Advanced Theory of Statistics, Vol. 3, Griffin. pp. 410-414.
</p>


<h3>See Also</h3>

<p><code>decompose</code>, <code>ts</code>, <code>stl</code>
</p>


<h3>Examples</h3>

<pre><code class="language-R">
## get data
data(apadbwq)
swmp1 &lt;- apadbwq

## subset for daily decomposition
dat &lt;- subset(swmp1, subset = c('2013-07-01 00:00', '2013-07-31 00:00'))

## decomposition and plot
test &lt;- decomp(dat, param = 'do_mgl', frequency = 'daily')
plot(test)

## dealing with missing values
dat &lt;- subset(swmp1, subset = c('2013-06-01 00:00', '2013-07-31 00:00'))

## this returns an error
## Not run: 
test &lt;- decomp(dat, param = 'do_mgl', frequency = 'daily')

## End(Not run)

## how many missing values?
sum(is.na(dat$do_mgl))

## use na.approx to interpolate missing data
dat &lt;- na.approx(dat, params = 'do_mgl', maxgap = 10)

## decomposition and plot
test &lt;- decomp(dat, param = 'do_mgl', frequency = 'daily')
plot(test)
</code></pre>


</div>