<div class="container">

<table style="width: 100%;"><tr>
<td>scalpelStep0</td>
<td style="text-align: right;">R Documentation</td>
</tr></table>
<h2>Perform Step 0 of SCALPEL.</h2>

<h3>Description</h3>

<p>This step involves data pre-processing. We read in the raw data version of Y and perform standard pre-processing
techniques in order to smooth the data both temporally and spatially, remove the bleaching effect,
and calculate a standardized fluorescence.
</p>


<h3>Usage</h3>

<pre><code class="language-R">scalpelStep0(
  outputFolder,
  rawDataFolder,
  videoHeight,
  fileType = "R",
  processSeparately = TRUE
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr style="vertical-align: top;">
<td><code>outputFolder</code></td>
<td>
<p>The existing directory where the results should be saved.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>rawDataFolder</code></td>
<td>
<p>The directory where the raw data version of Y is saved. The data should be a
PxT matrix, where P is the total number of pixels per image frame and T
the number of frames of the video, for which the (i,j)th element contains the
fluorescence of the ith pixel in the jth frame. To create Y, you should
vectorize each 2-dimensional image frame by concatenating the columns of the image frame.  If the data is
saved in a single file, it should be named "Y_1.mat", "Y_1.rds", "Y_1.txt", or "Y_1.txt.gz" (depending on <code>fileType</code>),
and if the data is split over multiple files, they should be split into chunks of the columns
and named consecutively ("Y_1.mat", "Y_2.mat", etc.; "Y_1.rds", "Y_2.rds", etc.; "Y_1.txt", "Y_2.txt", etc.; or "Y_1.txt.gz", "Y_2.txt.gz", etc.).</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>videoHeight</code></td>
<td>
<p>The height of the video (in pixels).</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>fileType</code></td>
<td>
<p>Indicates whether raw data is an .rds (default value; <code>fileType="R"</code>), .mat (<code>fileType="matlab"</code>), .txt (<code>fileType="text"</code>), or
.txt.gz (<code>fileType="zippedText"</code>) file. Any text files should not have row or column names.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>processSeparately</code></td>
<td>
<p>Logical scalar giving whether the multiple raw data files should be
processed individually, versus all at once. Processing the files separately may be preferable for larger videos.
The default value is <code>TRUE</code>; this argument is ignored if the raw data is saved in a single file.</p>
</td>
</tr>
</table>
<h3>Details</h3>

<p>Several files containing data from this step and a summary of the step are saved in "outputFolder".
</p>


<h3>Value</h3>

<p>An object of class <code>scalpelStep0</code>, which can be summarized using <code>summary</code>, used to run SCALPEL Step 1 using <code>scalpelStep1</code>,
or can be used with the plotting functions <code>plotFrame</code>, <code>plotThresholdedFrame</code>, and <code>plotVideoVariance</code>.
</p>

<ul>
<li>
<p><code>minRaw, maxRaw, minDeltaf, maxDeltaf</code>: Minimum and maximum values for the raw and processed videos.
</p>
</li>
<li>
<p><code>partsRaw, partsDeltaf</code>: Vectors indicating the indices of the raw and processed data files, respectively.
</p>
</li>
<li>
<p><code>nFramesRaw, nFramesDeltaf</code>: The number of frames in each part of the raw and processed data.
</p>
</li>
<li>
<p><code>lowThreshold, highThreshold</code>: The default lowest and highest threshold values for image segmentation that may be used in Step 1.
</p>
</li>
<li>
<p>Other elements: As specified by the user.
</p>
</li>
</ul>
<h3>See Also</h3>

<p>The entire SCALPEL pipeline can be implemented using the <code>scalpel</code> function. The
other steps in the pipeline can be run using the <code>scalpelStep1</code>, <code>scalpelStep2</code>, <code>scalpelStep3</code> functions.
Results from this step can be summarized using <code>summary</code>, loaded at a later time using <code>getScalpelStep0</code>, and plotted using
<code>plotFrame</code>, <code>plotThresholdedFrame</code>, and <code>plotVideoVariance</code>.
</p>


<h3>Examples</h3>

<pre><code class="language-R">## Not run: 
### many of the functions in this package are interconnected so the
### easiest way to learn to use the package is by working through the vignette,
### which is available at ajpete.com/software

#existing folder to save results (update this to an existing folder on your computer)
outputFolder = "scalpelResultsStepByStep"
#location on computer of raw data in R package to use
rawDataFolder = gsub("Y_1.rds", "", system.file("extdata", "Y_1.rds", package = "scalpel"))
#video height of raw data in R package
videoHeight = 30
#run Step 0 of SCALPEL
Step0Out = scalpelStep0(outputFolder = outputFolder,
                       rawDataFolder = rawDataFolder, videoHeight = videoHeight)
summary(Step0Out)

## End(Not run)
</code></pre>


</div>