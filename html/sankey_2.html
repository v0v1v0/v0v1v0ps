<div class="container">

<table style="width: 100%;"><tr>
<td>make_sankey</td>
<td style="text-align: right;">R Documentation</td>
</tr></table>
<h2>Create an object that describes a sankey plot</h2>

<h3>Description</h3>

<p>Create an object that describes a sankey plot
</p>


<h3>Usage</h3>

<pre><code class="language-R">make_sankey(nodes = NULL, edges, y = c("optimal", "simple"),
  break_edges = FALSE, gravity = c("center", "top", "bottom"))
</code></pre>


<h3>Arguments</h3>

<table>
<tr style="vertical-align: top;">
<td><code>nodes</code></td>
<td>
<p>A data frame of nodes on the plot, and possibly
their visual style. The first column must be the ids of the
nodes. If this argument is <code>NULL</code>, then the ids of the
nodes are determined from <code>edges</code>.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>edges</code></td>
<td>
<p>A data frame of the edges. The first two columns
must be node ids, and they define the edges. The rest of the columns
contain the visual style of the edges.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>y</code></td>
<td>
<p>How to calculate vertical coordinates of nodes, if they
are not given in the input. <code>optimal</code> tries to minimize edge
crossings, <code>simple</code> simply packs nodes in the order they are
given, from bottom to top.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>break_edges</code></td>
<td>
<p>Whether to plot each edge as two segments,
or a single one. Sometimes two segment plots look better.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>gravity</code></td>
<td>
<p>Whether to push the nodes to the top, to the bottom
or to the center, within a column.</p>
</td>
</tr>
</table>
<h3>Details</h3>

<p>The node and edges data frames may contain columns that specify
how the plot is created. All parameters have reasonable default
values.
</p>
<p>Current list of graphical parameters for nodes:
</p>

<ul>
<li> <p><code>col</code> Node color.
</p>
</li>
<li> <p><code>size</code> Node size.
</p>
</li>
<li> <p><code>x</code> Horizontal coordinates of the center of the node.
</p>
</li>
<li> <p><code>y</code> Vertical coordinates of the center of the node.
</p>
</li>
<li> <p><code>shape</code> Shape of the node. Possible values:
<code>rectangle</code>, <code>point</code>, <code>invisible</code>.
</p>
</li>
<li> <p><code>lty</code> Lite type, see <code>par</code>.
</p>
</li>
<li> <p><code>srt</code> How to rotate the label, see <code>par</code>.
</p>
</li>
<li> <p><code>textcol</code> Label color.
</p>
</li>
<li> <p><code>label</code> Label text. Defaults to node name.
</p>
</li>
<li> <p><code>adjx</code> Horizontal adjustment of the label. See
<code>adj</code> in the <code>par</code> manual.
</p>
</li>
<li> <p><code>adjy</code> Vertical adjustment of the label. See
<code>adj</code> in the <code>par</code> manual.
</p>
</li>
<li> <p><code>boxw</code> Width of the node boxes.
</p>
</li>
<li> <p><code>cex</code> Label size multiplication factor.
</p>
</li>
<li> <p><code>top</code> Vertical coordinate of the top of the node.
</p>
</li>
<li> <p><code>center</code> Vertical coordinate of the center of the node.
</p>
</li>
<li> <p><code>bottom</code> Vertical coordinate of the bottom of the node.
</p>
</li>
<li> <p><code>pos</code> Position of the text label, see <code>par</code>.
</p>
</li>
<li> <p><code>textx</code> Horizontal position of the text label.
</p>
</li>
<li> <p><code>texty</code> Vertical position of the text label.
</p>
</li>
</ul>
<p>Current list of graphical parameters for edges:
</p>

<ul>
<li> <p><code>colorstyle</code> Whether the to use a solid color (<code>col</code>),
or <code>gradient</code> to plot the edges. The color of a gradient
edges is between the colors of the nodes.
</p>
</li>
<li> <p><code>curvestyle</code> Edge style, <code>sin</code> for sinusoid curves,
<code>line</code> for straight lines.
</p>
</li>
<li> <p><code>col</code> Edge color, for edges with solid colors.
</p>
</li>
<li> <p><code>weight</code> Edge weight. Determines the width of the edges.
</p>
</li>
</ul>
<h3>Value</h3>

<p>A <code>sankey</code> object that can be plotted via the
<code>sankey</code> function.x
</p>


<h3>Examples</h3>

<pre><code class="language-R">## Function calls in the pkgsnap package:
edges &lt;- read.table(stringsAsFactors = FALSE, textConnection(
"                get_deps          get_description
                 get_deps               parse_deps
                 get_deps                     %||%
                 get_deps            drop_internal
          get_description        pkg_from_filename
               parse_deps                 str_trim
                cran_file             get_pkg_type
                cran_file          r_minor_version
            download_urls split_pkg_names_versions
            download_urls                cran_file
             pkg_download               dir_exists
             pkg_download            download_urls
             pkg_download        filename_from_url
             pkg_download             try_download
                  restore             pkg_download
                  restore        drop_missing_deps
                  restore            install_order
                  restore                 get_deps
 split_pkg_names_versions               data_frame
"))
pkgsnap_sankey &lt;- make_sankey(edges = edges)
sankey(pkgsnap_sankey)

## Some customization
nodes &lt;- data.frame(
  stringsAsFactors = FALSE,
  id = c("snap", sort(unique(c(edges[,1], edges[,2]))))
)
nodes$col &lt;- ifelse(nodes$id %in% c("snap", "restore"), "orange", "#2ca25f")
edges$colorstyle &lt;- "gradient"

sankey(make_sankey(nodes, edges))
</code></pre>


</div>