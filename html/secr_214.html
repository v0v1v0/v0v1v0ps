<div class="container">

<table style="width: 100%;"><tr>
<td>userdist</td>
<td style="text-align: right;">R Documentation</td>
</tr></table>
<h2> Non-Euclidean Distances </h2>

<h3>Description</h3>

<p>Non-Euclidean distances have a variety of uses, some obscure. You
probably do not need them unless you have data from linear habitats,
covered in the forthcoming package <span class="pkg">secrlinear</span>. On the other hand,
they open up some intriguing possibilities for the advanced user. The
key is to provide an appropriate value for the component ‘userdist’ of
the <code>details</code> argument of <code>secr.fit</code>.
</p>
<p><code>details$userdist</code> is either a function to compute distances
between detectors and mask points, or a pre-computed matrix of such
distances. Pre-computing assumes the matrix is static (i.e. fixed and
not dependent on any estimated coefficients). The functions
<code>edist</code> and <code>nedist</code> are useful for computing
static matrices of Euclidean or non-Euclidean distances (the latter is 
useful when there are barriers to movement).
</p>
<p>If <code>details$userdist</code> is a function then it should take the form
</p>
<p>userdist(xy1, xy2, mask)
</p>


<h3>Arguments</h3>

<table>
<tr style="vertical-align: top;">
<td><code>xy1</code></td>
<td>
<p>2-column matrix of x-y coordinates of <code class="reqn">k</code> detectors</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>xy2</code></td>
<td>
<p>2-column matrix of x-y coordinates of <code class="reqn">m</code> mask points</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>mask</code></td>
<td>
<p>habitat mask defining a non-Euclidean habitat geometry</p>
</td>
</tr>
</table>
<h3>Details</h3>

<p>The matrix returned by the function must have exactly <code class="reqn">k</code> rows and
<code class="reqn">m</code> columns. The function name may be almost anything you like.
</p>
<p>The non-Euclidean habitat geometry may or may not require access to
local density (D), local (mask) covariates, and the estimation of
additional coefficients (beta variables). In order that secr.fit can
assemble these data, there is a mechanism for the user to indicate
which, if any, variables are required: when called with no arguments the
function should return a character vector of variable names. These may
include covariates of ‘mask’, the dynamically computed density 'D', and
a special real parameter ‘noneuc’ for which one or more coefficients
will be fitted.
</p>
<p>‘noneuc’ is like 'D' in that it may be modelled as a function of any mask
covariates, session, Session, x, y, etc. The actual meaning attributed
to ‘noneuc’ depends entirely on how it is used inside the function.
</p>
<p>The function may require no variables and not require estimation of
additional coefficients. This is the case for a simple linear geometry
as described in documentation for the package ‘secrlinear’.
</p>

<table>
<tr>
<td style="text-align: left;">
  Value  </td>
<td style="text-align: left;"> Interpretation </td>
</tr>
<tr>
<td style="text-align: left;">
  ''       </td>
<td style="text-align: left;"> no covariates etc. required </td>
</tr>
<tr>
<td style="text-align: left;">
  'D'      </td>
<td style="text-align: left;"> density at each mask point </td>
</tr>
<tr>
<td style="text-align: left;">
  'noneuc' </td>
<td style="text-align: left;"> a multi-purpose real parameter </td>
</tr>
<tr>
<td style="text-align: left;">
  </td>
<td style="text-align: left;"> defined for each mask point </td>
</tr>
<tr>
<td style="text-align: left;">
  c('D', 'noneuc') </td>
<td style="text-align: left;"> both of the preceding </td>
</tr>
<tr>
<td style="text-align: left;">
  c('noneuc','habclass') </td>
<td style="text-align: left;"> both noneuc and the mask covariate
  'habclass' </td>
</tr>
<tr>
<td style="text-align: left;">  
</td>
</tr>
</table>
<p>The last case does not estimate a coefficient for habclass, it merely
makes the raw value available to whatever algorithm you implement. 
</p>
<p>The ‘xy2’ and ‘mask’ parameters of the userdist function overlap in
practice: xy1 and xy2 only define the points between which distances are
required, whereas mask is a carrier for any and all additional
information needed by the algorithm.
</p>
<p>Full documentation of the <span class="pkg">secr</span> capability for non-Euclidean
distances is in the separate document
<a href="https://www.otago.ac.nz/density/pdfs/secr-noneuclidean.pdf">secr-noneuclidean.pdf</a>,
which includes example code for the analysis of Sutherland et
al. (2015).
</p>


<h3>Compatibility</h3>

<p>User-specified distances are compatible with some but not all features
of <span class="pkg">secr</span>. Functions with a ‘userdist’ argument are certainly
compatible, and others may be.
</p>
<p>With a static userdist, <code>region.N</code> will generally not calculate  population size for a region other than the original mask. If you want to supply a new mask in the ‘region’ argument, replace x$details$userdist with a distance matrix appropriate to the new mask, where ‘x’ is the name of the fitted model.
</p>
<p>User-specified distances cannot be used with polygon or transect
detectors.
</p>
<p>When using <code>sim.capthist</code> to simulate detections of a new
population from <code>sim.popn</code> you must provide <code>userdist</code>
as a function rather than a matrix. This is because new animals are not
restricted to locations on the ‘mask’ grid. 
</p>


<h3>References</h3>

<p>Sutherland, C., Fuller, A. K. and Royle, J. A. (2015) Modelling
non-Euclidean movement and landscape connectivity in highly structured
ecological networks. <em>Methods in Ecology and Evolution</em> <b>6</b>, 169–177.
</p>


<h3>See Also</h3>

<p><code>details</code>, <code>secr.fit</code>, <code>nedist</code>
</p>


<h3>Examples</h3>

<pre><code class="language-R">
## see secr-noneuclidean.pdf

</code></pre>


</div>