<div class="container">

<table style="width: 100%;"><tr>
<td>npower.lnorm</td>
<td style="text-align: right;">R Documentation</td>
</tr></table>
<h2>Sample Size and Power For Lognormal Distribution </h2>

<h3>Description</h3>

<p>Find either the sample size or power for complete sample from lognormal distribution</p>


<h3>Usage</h3>

<pre><code class="language-R">npower.lnorm(n=NA,power=NA,fstar=1,p=0.95,gamma=0.95)
</code></pre>


<h3>Arguments</h3>

<table>
<tr style="vertical-align: top;">
<td><code>n</code></td>
<td>
<p>sample size</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>power</code></td>
<td>
<p>power of the test = 1 - <code class="reqn">\beta</code></p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>fstar</code></td>
<td>
<p> true percent of X's <code class="reqn">\ge</code> limit L</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>p</code></td>
<td>
<p> probability for Xp the 100p<em>th</em> percentile. Default is 0.95</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>gamma</code></td>
<td>
<p>one-sided confidence level <code class="reqn">\gamma</code>. Default is 0.95</p>
</td>
</tr>
</table>
<h3>Details</h3>

<p>Find either the sample size <code>n</code> or the <code>power</code> of the test for specified
values of <code>fstar</code>,  <code>p</code>, and <code>gamma</code>. Either <code>n</code> is missing
or <code>power</code> is missing.
</p>
<p>The null hypothesis of interest is
<code class="reqn">Ho: F \ge Fo = 1-p</code>; i.e., Fo is the maximum proportion of the
population that can exceed the limit Lp. The null hypothesis is
rejected if the <code class="reqn">100 \gamma\%</code> UCL for F is less than Fo ,
indicating that the exposure profile is acceptable. For the complete
data case this is equivalent to testing the null hypothesis 
<code class="reqn">Ho: Xp \ge Lp</code> at the <code class="reqn">\alpha = (1- \gamma )</code> significance level.
See <code>efraction.exact</code>, <code>percentile.exact</code> and
Section 2.3 of Frome and Wambach(2005) for further details.
</p>


<h3>Value</h3>

<p>A vector with components:
</p>
<table>
<tr style="vertical-align: top;">
<td><code>n</code></td>
<td>
<p>sample size</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>power</code></td>
<td>
<p>power of the test = 1 -<code class="reqn">\beta</code></p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>fstar</code></td>
<td>
<p>true percent of X's <code class="reqn">\ge</code> limit L</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>p</code></td>
<td>
<p>probability for Xp the 100p<em>th</em> percentile. Default is 0.95</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>gamma</code></td>
<td>
<p>one-sided confidence level <code class="reqn">\gamma</code>. Default is 0.95</p>
</td>
</tr>
</table>
<h3>Note</h3>

<p> The R function <code>uniroot</code> is used to find a parameter of the
non-central t distribution.  In some versions of R this
may cause a warning message.  See R bug report RP 9171 full precision
was not achieved in 'pnt'.  This warning message may occur in <code>uniroot</code>
calls to <code>pt</code> and does not effect the precision of the final result</p>


<h3>Author(s)</h3>

<p> E.L. Frome</p>


<h3>References</h3>

<p>Johnson, N. L. and B. L. Welch (1940), "Application of the Non-Central
t-Distribution," <em>Biometrika</em>, 31(3/4), 362-389.
</p>
<p>Lyles R. H. and L. L. Kupper (1996), "On strategies for comparing occupational
exposure data to limits,"  <em>American Industrial Hygiene Association
Journal</em>, 57:6-15.
</p>
<p>Frome, E. L. and Wambach, P. F. (2005), "Statistical Methods and Software for 
the Analysis of Occupational Exposure Data with Non-Detectable Values," 
<em>ORNL/TM-2005/52,Oak Ridge National Laboratory</em>, Oak Ridge, TN 37830.
Available at: <a href="http://www.csm.ornl.gov/esh/aoed/ORNLTM2005-52.pdf">http://www.csm.ornl.gov/esh/aoed/ORNLTM2005-52.pdf</a>
</p>
<p>Ignacio, J. S. and W. H. Bullock (2006), <em>A Strategy for Assesing
and Managing Occupational Exposures</em>, Third Edition, AIHA Press,
Fairfax, VA.
</p>
<p>Mulhausen, J. R. and J. Damiano (1998), <em> A Strategy for Assessing
and Managing Occupational Exposures</em>, Second Edition, AIHA Press, Fairfax, VA.
</p>


<h3>See Also</h3>

<p>Help files for <code>efraction.ml</code>,<code>percentile.ml</code>,
<code>efclnp</code>,<code>aihand</code>   </p>


<h3>Examples</h3>

<pre><code class="language-R">#                              EXAMPLE 1
#    Table VII.1 Mulhausen and Damiano (1998) adapted from
#    Table II in Lyles and Kupper (1996) JAIHA vol 57 6-15 Table II
#    Sample Size Needed When Using UTL(95,95) to Show 95% Confidence
#    that the 95th Percentile is below the OEL (Power = 0.8)
rx&lt;-c(1.5,2,2.5,3)
sdx&lt;- sqrt(c(0.5,1,1.5,2,2.5,3))
tabn&lt;-matrix(0,4,6)
for ( i in 1:4) {
  for (j in 1:6) {
fstar&lt;- 100*(1 -pnorm( log(rx[i])/sdx[j] + qnorm(0.95) ))
tabn[i,j]&lt;- npower.lnorm(NA,0.8,fstar,p=0.95,gamma=0.95)[1] 
}
}
cn&lt;- paste("GSD = ",round(exp(sdx),2),sep="" )
dimnames(tabn)&lt;-list( round(1/rx,2),cn)
rm(cn,rx,sdx)
tabn
#                              EXAMPLE 2
top&lt;-"Power For Sample Size n = 20 for p=0.95 gamma=0.95"
fstar &lt;- seq(0.2,4.8,0.1)
pow &lt;- rep(1,length(fstar))
for (i in 1 : length(fstar)) {
pow[i]&lt;-npower.lnorm(20,NA,fstar[i],p=0.95,gamma=0.95)[2]
}
plot(fstar,pow,xlim=c(0,5),ylim=c(0,1),main=top,
xlab="fstar = True Percent of Xs &gt; L(Specified Limit )",ylab="Power")
</code></pre>


</div>