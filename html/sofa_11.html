<div class="container">

<table style="width: 100%;"><tr>
<td>db_changes</td>
<td style="text-align: right;">R Documentation</td>
</tr></table>
<h2>List changes to a database.</h2>

<h3>Description</h3>

<p>Of course it doesn't make much sense to use certain options in
_changes. For example, using feed=longpoll or continuous doesn't make much
sense within R itself.
</p>


<h3>Usage</h3>

<pre><code class="language-R">db_changes(
  cushion,
  dbname,
  descending = NULL,
  startkey = NULL,
  endkey = NULL,
  since = NULL,
  limit = NULL,
  include_docs = NULL,
  feed = "normal",
  heartbeat = NULL,
  filter = NULL,
  as = "list",
  ...
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr style="vertical-align: top;">
<td><code>cushion</code></td>
<td>
<p>A <code>Cushion</code> object. Required.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>dbname</code></td>
<td>
<p>Database name. (character)</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>descending</code></td>
<td>
<p>Return in descending order? (logical)</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>startkey</code></td>
<td>
<p>Document ID to start at. (character)</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>endkey</code></td>
<td>
<p>Document ID to end at. (character)</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>since</code></td>
<td>
<p>Start the results from the change immediately after the given
sequence number.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>limit</code></td>
<td>
<p>Number document IDs to return. (numeric)</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>include_docs</code></td>
<td>
<p>(character) If "true", returns docs themselves, in
addition to IDs</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>feed</code></td>
<td>
<p>Select the type of feed. One of normal, longpoll, or continuous.
See description. (character)</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>heartbeat</code></td>
<td>
<p>Period in milliseconds after which an empty line is sent in
the results. Only applicable for longpoll or continuous feeds. Overrides any
timeout to keep the feed alive indefinitely. (numeric (milliseconds))</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>filter</code></td>
<td>
<p>Reference a filter function from a design document to
selectively get updates.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>as</code></td>
<td>
<p>(character) One of list (default) or json</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>...</code></td>
<td>
<p>Curl args passed on to <code>HttpClient</code></p>
</td>
</tr>
</table>
<h3>Value</h3>

<p>Either a list of json (depending on <code>as</code> parameter), with
keys:
</p>

<ul>
<li>
<p> results - Changes made to a database, length 0 if no changes.
Each of these has:
</p>

<ul>
<li>
<p> changes - List of document's leafs with single field rev
</p>
</li>
<li>
<p> id - Document ID
</p>
</li>
<li>
<p> seq - Update sequence
</p>
</li>
</ul>
</li>
<li>
<p> last_seq - Last change update sequence
</p>
</li>
<li>
<p> pending - Count of remaining items in the feed
</p>
</li>
</ul>
<h3>Examples</h3>

<pre><code class="language-R">## Not run: 
user &lt;- Sys.getenv("COUCHDB_TEST_USER")
pwd &lt;- Sys.getenv("COUCHDB_TEST_PWD")
(x &lt;- Cushion$new(user=user, pwd=pwd))

if ("leoalion" %in% db_list(x)) {
  invisible(db_delete(x, dbname="leoalion"))
}
db_create(x, dbname='leoalion')

# no changes
res &lt;- db_changes(x, dbname="leoalion")
res$results

# create a document
doc1 &lt;- '{"name": "drink", "type": "water", "score": 5}'
doc_create(x, dbname="leoalion", doc1, docid="awater")

# now there's changes
res &lt;- db_changes(x, dbname="leoalion")
res$results

# as JSON
db_changes(x, dbname="leoalion", as='json')

## End(Not run)
</code></pre>


</div>