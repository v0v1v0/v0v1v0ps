<div class="container">

<table style="width: 100%;"><tr>
<td>check_credentials</td>
<td style="text-align: right;">R Documentation</td>
</tr></table>
<h2>Check credentials</h2>

<h3>Description</h3>

<p>Check credentials
</p>


<h3>Usage</h3>

<pre><code class="language-R">check_credentials(db, passphrase = NULL)
</code></pre>


<h3>Arguments</h3>

<table>
<tr style="vertical-align: top;">
<td><code>db</code></td>
<td>
<p>A <code>data.frame</code> with credentials data or path to SQLite database created with <code>create_db</code>.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>passphrase</code></td>
<td>
<p>Passphrase to decrypt the SQLite database.</p>
</td>
</tr>
</table>
<h3>Details</h3>

<p>The credentials <code>data.frame</code> can have the following columns:
</p>

<ul>
<li> <p><strong>user (mandatory)</strong> : the user's name.
</p>
</li>
<li> <p><strong>password (mandatory)</strong> : the user's password.
</p>
</li>
<li> <p><strong>admin (optional)</strong> : logical, is user have admin right ? If so,
user can access the admin mode (only available using a SQLite database)
</p>
</li>
<li> <p><strong>start (optional)</strong> : the date from which the user will have access to the application
</p>
</li>
<li> <p><strong>expire (optional)</strong> : the date from which the user will no longer have access to the application
</p>
</li>
<li> <p><strong>applications (optional)</strong> : the name of the applications to which the user is authorized,
separated by a semicolon. The name of the application corresponds to the name of the directory,
or can be declared using : <code>options("shinymanager.application" = "my-app")</code>
</p>
</li>
<li> <p><strong>additional columns</strong> : add others columns to retrieve the values server-side after authentication
</p>
</li>
</ul>
<h3>Value</h3>

<p>Return a <code>function</code> with two arguments: <code>user</code> and <code>password</code>
to be used in <code>module-authentication</code>. The authentication function returns
a <code>list</code> with 4 slots :
</p>

<ul>
<li> <p><strong>result</strong> : logical, result of authentication.
</p>
</li>
<li> <p><strong>expired</strong> : logical, is user has expired ? Always <code>FALSE</code> if <code>db</code> doesn't have a <code>expire</code> column.
</p>
</li>
<li> <p><strong>authorized</strong> : logical, is user can access to his app ? Always <code>TRUE</code> if <code>db</code> doesn't have a <code>applications</code> column.
</p>
</li>
<li> <p><strong>user_info</strong> : the line in <code>db</code> corresponding to the user.
</p>
</li>
</ul>
<h3>Examples</h3>

<pre><code class="language-R"># data.frame with credentials info
credentials &lt;- data.frame(
  user = c("fanny", "victor"),
  password = c("azerty", "12345"),
  stringsAsFactors = FALSE
)

# check a user
check_credentials(credentials)("fanny", "azerty")
check_credentials(credentials)("fanny", "azert")
check_credentials(credentials)("fannyyy", "azerty")

# data.frame with credentials info
# using hashed password with scrypt
credentials &lt;- data.frame(
  user = c("fanny", "victor"),
  password = c(scrypt::hashPassword("azerty"), scrypt::hashPassword("12345")),
  is_hashed_password = TRUE,
  stringsAsFactors = FALSE
)

# check a user
check_credentials(credentials)("fanny", "azerty")
check_credentials(credentials)("fanny", "azert")
check_credentials(credentials)("fannyyy", "azerty")

## Not run: 

## With a SQLite database:

check_credentials("credentials.sqlite", passphrase = "supersecret")


## End(Not run)

</code></pre>


</div>