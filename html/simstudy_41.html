<div class="container">

<table style="width: 100%;"><tr>
<td>genCorMat</td>
<td style="text-align: right;">R Documentation</td>
</tr></table>
<h2>Create a correlation matrix</h2>

<h3>Description</h3>

<p>Create a correlation matrix
</p>


<h3>Usage</h3>

<pre><code class="language-R">genCorMat(nvars, cors = NULL, rho = NULL, corstr = "cs", nclusters = 1)
</code></pre>


<h3>Arguments</h3>

<table>
<tr style="vertical-align: top;">
<td><code>nvars</code></td>
<td>
<p>number of rows and columns (i.e. number of variables) for correlation matrix. It can be
a scalar or vector (see details).</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>cors</code></td>
<td>
<p>vector of correlations.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>rho</code></td>
<td>
<p>Correlation coefficient, <code>-1 &lt;= rho &lt;= 1</code>. Use if corMatrix is not provided. It can
be a scalar or vector (see details).</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>corstr</code></td>
<td>
<p>Correlation structure. Options include "cs" for a compound symmetry structure, "ar1" 
for an autoregressive structure of order 1, "arx" for an autoregressive structure 
that has a general decay pattern, and "structured" that imposes a prescribed
pattern between observation based on distance (see details).</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>nclusters</code></td>
<td>
<p>An integer that indicates the number of matrices that will be generated.</p>
</td>
</tr>
</table>
<h3>Details</h3>

<p>This function can generate correlation matrices randomly or deterministically, 
depending on the combination of arguments provided. A single matrix will be
generated when <code>nclusters == 1</code> (the default), and a list of matrices of matrices will be generated when
<code>nclusters &gt; 1</code>.
</p>
<p>If the vector 'cors' is specified with length 'nvars - 1' then 'corstr' must be "structured". If
'cors' is specified with length 'choose(nvars, 2)' then 'corstr' should not be specified as
"structured". In this case the 'cors' vector should be interpreted as the lower triangle of the correlation
matrix, and is specified by reading down the columns. For example, if <b>CM</b> is the correlation matrix and
<code>nvars = 3</code>, then <code>CM[2,1] = CM[1,2] = cors[1]</code>,  <code>CM[3,1] = CM[1,3] = cors[2]</code>, 
and <code>CM[3,2] = CM[2,3] = cors[3]</code>.
</p>
<p>If the vector <code>cors</code> and <code>rho</code> are not specified, random correlation matrices are generated
based on the specified <code>corstr</code>. If the structure is "arx", then a random vector of 
length <code>nvars - 1</code> is randomly generated and sorted in descending order; the correlation matrix
will be generated base on this set of structured correlations. If the structure is <em>not</em> specified
as "arx" then a random positive definite of dimensions nvars x nvars with no structural 
assumptions is generated.
</p>
<p>If <code>cors</code> is not specified but <code>rho</code> is specified, then a matrix with either a "cs" or "ar1" 
structure is generated.
</p>
<p>If <code>nclusters &gt; 1</code>, <code>nvars</code> can be of length 1 or <code>nclusters</code>. If it is of length 1,
each cluster will have correlation matrices with the same dimension. Likewise, if <code>nclusters &gt; 1</code>, 
<code>rho</code> can be of length 1 or <code>nclusters</code>. If length of <code>rho</code> is 1,
each cluster will have correlation matrices with the same autocorrelation.
</p>


<h3>Value</h3>

<p>A single correlation matrix of size <code>nvars x nvars</code>, or a list of matrices of potentially
different sizes with length indicated by <code>nclusters</code>.
</p>


<h3>Examples</h3>

<pre><code class="language-R">genCorMat(nvars = 3, cors = c(.3, -.2, .1))
genCorMat(nvars = 3)

genCorMat(nvars = 4, c(.3, -.2, .1, .2, .5, .2))
genCorMat(4)

genCorMat(nvars = 4, cors = c(.3, .2, .1), corstr = "structured") 
genCorMat(nvars = 4, corstr = "arx") 

genCorMat(nvars = 4, rho = .4, corstr = "cs") 
genCorMat(nvars = 4, rho = .4, corstr = "ar1") 

genCorMat(nvars = c(3, 2, 5), rho = c(.4, .8, .7), corstr = "ar1", nclusters = 3) 

</code></pre>


</div>