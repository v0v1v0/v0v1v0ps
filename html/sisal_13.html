<div class="container">

<table style="width: 100%;"><tr>
<td>sisalTable</td>
<td style="text-align: right;">R Documentation</td>
</tr></table>
<h2>
Draw Table with Equally Sized Cells
</h2>

<h3>Description</h3>

<p>Draws a resizable or fixed-size table with equally sized cells.  Main
title, axis (tick) labels and axis titles (left, bottom) are optional.
Cells can have individual background and text colors and stripes.
</p>


<h3>Usage</h3>

<pre><code class="language-R">sisalTable(labels = matrix(seq_len(12), 3, 4),
           nRows = NROW(labels), nCols = NCOL(labels),
           bg = sample(colors(), nRows * nCols, replace = TRUE),
           stripeCol = NULL, fg = NULL, naFill = "white",
           naStripes = "grey50", main = NULL, xlab = NULL,
           ylab = NULL, xAxisLabels = NULL, yAxisLabels = NULL,
           draw = TRUE, outerRect = TRUE, innerLines = TRUE,
           nStripes = 7, stripeRot = 45, stripeWidth = 0.2,
           stripeScale = 0.95, resizeText = TRUE,
           resizeTable = TRUE, resizeMain = resizeText,
           resizeLab = resizeText, resizeAxes = resizeText,
           resizeLabels = resizeTable &amp;&amp; resizeText,
           x = unit(0.5, "npc"), y = unit(0.5, "npc"),
           width = unit(0.97, "npc"), height = unit(0.97, "npc"),
           default.units = "npc", just = "center",
           clip = "inherit", xAxisRot = 0, yAxisRot = 0,
           xAxisJust = c(0.5, 1), xAxisX = 0.5, xAxisY = 1,
           yAxisJust = c(1, 0.5), yAxisX = 1, yAxisY = 0.5,
           mainMargin = if (resizeMain) 0.15 else unit(8, "points"),
           xlabMargin = if (resizeLab) 0.1 else unit(5, "points"),
           ylabMargin = if (resizeLab) 0.1 else unit(5, "points"),
           axesMargin = if (resizeAxes) 0.1 else unit(5, "points"),
           axesSize = 0.8, forceAxesSize = FALSE,
           mainSize = 1, xlabSize = 1, ylabSize = 1,
           mainPar = gpar(fontface = "bold", fontsize = 14),
           labPar = gpar(fontface = "plain", fontsize = 14),
           labelPars = gpar(fontsize = 20, cex = 0.6),
           axesPar = gpar(fontsize = 10),
           rectPar = gpar(), linePar = gpar(),
           name = NULL, gp = NULL, vp = NULL)
</code></pre>


<h3>Arguments</h3>

<table>
<tr style="vertical-align: top;">
<td><code>labels</code></td>
<td>
<p> the labels to use in the table cells.  A <code>list</code> or
an <code>atomic</code> <code>vector</code> containing something that can be
displayed as text, e.g. <code>character</code> values.  One element is
used for each cell.  If the object has a <code>"dim"</code> attribute
(<code>matrix</code>, <code>array</code>), it is used for
determining the number of rows and columns in the table.
</p>
<p><code>NA</code> means no text.  </p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>nRows</code></td>
<td>
<p> the number of rows in the table. A positive integral
number.  </p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>nCols</code></td>
<td>
<p> the number of columns in the table. A positive integral
number.  </p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>bg</code></td>
<td>
<p> the background colors of the table cells.  One element is
used for each cell.   </p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>stripeCol</code></td>
<td>
<p> an optional <code>vector</code> of colors.  If used,
indicates the color of stripes to be painted on top of the
background color in each table cell.  One element is used for each
table cell.  <code>NA</code> means no stripes.  </p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>fg</code></td>
<td>
<p> the text colors of the table cells.  One element is used
for each cell.  If <code>NULL</code> (the default), black or white text is
used so that the contrast between foreground and background is
maximized. </p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>naFill</code></td>
<td>
<p> background color to use when the label of a table cell
is <code>NA</code>.  This is a single color value. </p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>naStripes</code></td>
<td>
<p> table cells with an <code>NA</code> label are indicated
with stripes.  This is the color of the stripes, a single color
value.  The stripes can be hidden by using a value identical with
that of <code><var>naFill</var></code>.  </p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>main</code></td>
<td>
<p> the main title of the plot. </p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>xlab</code></td>
<td>
<p> a title for the x axis. </p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>ylab</code></td>
<td>
<p> a title for the y axis. </p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>xAxisLabels</code></td>
<td>
<p> a label for each column of the table. </p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>yAxisLabels</code></td>
<td>
<p> a label for each row of the table. </p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>draw</code></td>
<td>
<p> a <code>logical</code> flag indicating whether to draw the
table.  If <code>FALSE</code>, no drawing is done.  </p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>outerRect</code></td>
<td>
<p> a <code>logical</code> flag indicating whether a rectangle
will be drawn around the table. </p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>innerLines</code></td>
<td>
<p> a <code>logical</code> flag indicating whether line
segments will be drawn between the table cells. </p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>nStripes</code></td>
<td>
<p> a positive integral number giving the number of
stripes to be drawn in table cells.  Only applies to those cells
where stripes are used, i.e. when the relevant element of
<code><var>label</var></code> is <code>NA</code> or <code><var>stripeCol</var></code> is not
<code>NA</code>.  The stripes are spaced evenly.  Defaults to <code>7</code>. </p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>stripeRot</code></td>
<td>
<p> an integral number giving the rotation angle
(degrees, counterclockwise) of the stripes used in table cells.
Defaults to <code>45</code> which means diagonal stripes parallel to a
line segment between the lower left corner and the upper right
corner of the cell.  Value <code>0</code> means horizontal and <code>90</code>
vertical stripes.  </p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>stripeWidth</code></td>
<td>
<p> a <code>numerical</code> value giving the width of the
stripes used in cells as a proportion of the available width.
Values between <code>0</code> and <code>1</code> are allowed, excluding the
endpoints.  Defaults to <code>0.2</code>. </p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>stripeScale</code></td>
<td>
<p> a <code>numerical</code> value indicating the proportion
of the area of a table cell to be used for the stripe pattern.  The
pattern is always centered, and the possible empty space is left on
the borders of the cell.  Values between <code>0</code> and <code>1</code> are
allowed, including the endpoints.  Defaults to <code>0.95</code>. </p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>resizeText</code></td>
<td>
<p> a <code>logical</code> flag indicating whether to use
dynamic text size.  This is only used as the default value of
<code><var>resizeMain</var></code>, <code><var>resizeLab</var></code>,
<code><var>resizeLabels</var></code> and <code><var>resizeAxes</var></code>.  Defaults to
<code>TRUE</code>. </p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>resizeTable</code></td>
<td>
<p> a <code>logical</code> flag indicating whether the size
of the table will depend on the size of the main
<code>viewport</code>, which itself may be static or depend on the
size of the graphical device.  Defaults to <code>TRUE</code>.  See
‘Details’.  </p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>resizeMain</code></td>
<td>
<p> a <code>logical</code> flag indicating whether the main
title will be resizable. </p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>resizeLab</code></td>
<td>
<p> a <code>logical</code> flag indicating whether the the x
axis and y axis titles will be resizable. </p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>resizeLabels</code></td>
<td>
<p> a <code>logical</code> flag indicating whether the
labels used in the table cells will be resizable. </p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>resizeAxes</code></td>
<td>
<p> a <code>logical</code> flag indicating whether the row
and column labels will be resizable. </p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>x</code></td>
<td>
<p> a <code>numeric</code> vector or <code>unit</code> object of length one
specifying the x location of the graphical object. </p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>y</code></td>
<td>
<p> a <code>numeric</code> vector or <code>unit</code> object of length one
specifying the y location of the graphical object. </p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>width</code></td>
<td>
<p> a <code>numeric</code> vector or <code>unit</code> object of length
one specifying the width of the graphical object.  See
‘Details’. </p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>height</code></td>
<td>
<p> a <code>numeric</code> vector or <code>unit</code> object of length
one specifying the height of the graphical object.  See
‘Details’.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>default.units</code></td>
<td>
<p> a <code>character</code> string indicating the
<code>unit</code> to use for <code>numeric</code> values of
<code><var>x</var></code>, <code><var>y</var></code>, <code><var>width</var></code> and
<code><var>height</var></code>.  </p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>just</code></td>
<td>
<p> a <code>character</code> or <code>numeric</code> vector of one or two
values specifying the justification of the graphical object relative
to its (x, y) location.  See <code>viewport</code>. </p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>clip</code></td>
<td>
<p> a <code>character</code> string specifying what to do if the
graphical object overflows the <code>viewport</code> reserved for
it.  See ‘Details’. </p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>xAxisRot</code></td>
<td>
<p> a <code>numeric</code> value giving the rotation angle of
the column labels in degrees. </p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>yAxisRot</code></td>
<td>
<p> a <code>numeric</code> value giving the rotation angle of
the row labels in degrees. </p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>xAxisJust</code></td>
<td>
<p> justification setting for column labels.  A
<code>numeric</code> or <code>character</code> vector.  Rotation (if any) will
be done <em>before</em> justification.  See <var>just</var> in
<code>textGrob</code> for possible values. </p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>xAxisX</code></td>
<td>
<p> x location of column labels relative to the space
allocated for them.  A <code>numeric</code> value where <code>0</code> means
left and <code>1</code> right. </p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>xAxisY</code></td>
<td>
<p> y location of column labels relative to the space
allocated for them.  A <code>numeric</code> value where <code>0</code> means
bottom and <code>1</code> top. </p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>yAxisJust</code></td>
<td>
<p> justification setting for row labels.  A
<code>numeric</code> or <code>character</code> vector.  See
<code><var>xAxisJust</var></code>. </p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>yAxisX</code></td>
<td>
<p> x location of row labels relative to the space
allocated for them.  A <code>numeric</code> value where <code>0</code> means
left and <code>1</code> right. </p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>yAxisY</code></td>
<td>
<p> y location of row labels relative to the space
allocated for them.  A <code>numeric</code> value where <code>0</code> means
bottom and <code>1</code> top. </p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>mainMargin</code></td>
<td>
<p> size of the margin between the main title and the
table. </p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>xlabMargin</code></td>
<td>
<p> size of the margin between the x axis title and
the next graphical object towards the table. </p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>ylabMargin</code></td>
<td>
<p> size of the margin between the y axis title and
the next graphical object towards the table. </p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>axesMargin</code></td>
<td>
<p> size of the margin between the row or column labels
and the table. </p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>axesSize</code></td>
<td>
<p> a positive <code>numeric</code> value specifying the
desired ratio of fontsize in row and column labels to fontsize in
table cells. </p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>forceAxesSize</code></td>
<td>
<p> a <code>logical</code> flag.  If <code>TRUE</code>, the
function will reduce the size of text in table cells if it is
necessary in order to achieve the desired <code><var>axesSize</var></code>.  </p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>mainSize</code></td>
<td>
<p> scale factor for fontsize of main title.  A positive
<code>numeric</code> value.  Only effective when <code><var>resizeMain</var></code> is
<code>TRUE</code>. </p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>xlabSize</code></td>
<td>
<p> scale factor for fontsize of x axis title.  A
positive <code>numeric</code> value.  Only effective when
<code><var>resizeLab</var></code> is <code>TRUE</code>.  </p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>ylabSize</code></td>
<td>
<p> scale factor for fontsize of y axis title.  A
positive <code>numeric</code> value.  Only effective when
<code><var>resizeLab</var></code> is <code>TRUE</code>.  </p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>mainPar</code></td>
<td>
<p> graphical parameters for the main title. </p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>labPar</code></td>
<td>
<p> graphical parameters for x and y axis titles. </p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>labelPars</code></td>
<td>
<p> graphical parameters for labels used in table cells.
Can also be a list, one element for each table cell, recycled if
necessary.  </p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>axesPar</code></td>
<td>
<p> graphical parameters for row and column labels. </p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>rectPar</code></td>
<td>
<p> graphical parameters for the rectangle around the
table. </p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>linePar</code></td>
<td>
<p> graphical parameters for the line segments between
table cells. </p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>name</code></td>
<td>
<p> a <code>character</code> string identifier for the graphical
object returned by the function.  If <code>NULL</code> (the default), a
name will be assigned automatically.  </p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>gp</code></td>
<td>
<p> graphical parameters for the whole object. </p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>vp</code></td>
<td>
<p> a <code>"viewport"</code> object, the name of a viewport object,
a <code>vpPath</code> object pointing to a viewport or <code>NULL</code>
(the default).  If not <code>NULL</code>, this graphical object will be
drawn in the given viewport.  The name or the path must point to a
descendant of the current viewport.  See
<code>current.vpPath</code>, <code>current.vpTree</code>,
<code>downViewport</code> and <code>grid.draw</code>. </p>
</td>
</tr>
</table>
<h3>Details</h3>

<p>This function was written to be used with <code>plotSelected</code>
but it should be generic enough to be useful for other purposes, too.
</p>
<p>The color and text vectors (including matrices and arrays) pointing to
table cells (<code><var>labels</var></code>, <code><var>bg</var></code>,
<code><var>stripeCol</var></code>, <code><var>fg</var></code>) are interpreted in
column-major order, like linear indexing of a <code>matrix</code>.  Each
<code>data.frame</code> argument is collapsed to a list by combining its
columns.  Finally, values are recycled if needed, also in
<code><var>xAxisLabels</var></code> and <code><var>yAxisLabels</var></code>.
</p>
<p>For possible color values, see <code>col2rgb</code>.
</p>
<p>In the various text objects, mathematical annotation (see
plotmath) is supported in addition to <code>character</code> values.
</p>
<p>For information on setting graphical parameters (<code><var>gp</var></code>,
<code><var>mainPar</var></code>, <code><var>labPar</var></code>, ...), see
<code>gpar</code>.
</p>
<p>The graphical object returned is a <code>gTree</code> which contains
a <code>gList</code> of graphical objects and a <code>vpTree</code>
of viewports.  The child viewports are placed inside the parent using
a <code>grid.layout</code>.  The size of the whole object is the size
of the parent viewport.  It will be fixed or depend on the space
available to it:
</p>

<ul>
<li>
<p> If all graphical elements are non-resizable (but
<code><var>resizeLabels</var></code> can be <code>TRUE</code>), a suitable fixed size
will be computed.
</p>
</li>
<li>
<p> Otherwise, the size is determined by <code><var>width</var></code> and
<code><var>height</var></code>.  However, if there are non-resizable elements,
the graphical object may be larger than that.
</p>
</li>
</ul>
<p>The graphical object will not use any excess space.  In other words,
the width and height reported by <code>grobWidth</code> and
<code>grobHeight</code> are tight.  It is possible that some parts of
the plot may overflow their assigned space and the bounds computed for
the whole graphical object.  Examples include using large fixed-size
text elements or large values of the <code>gpar</code> graphical
parameter <code>"cex"</code>.  Clipping can be adjusted through
<code><var>clip</var></code>.
</p>
<p>If <code><var>resizeAxes</var></code> is <code>TRUE</code>, <code><var>axesMargin</var></code>
must be a non-negative <code>numeric</code> value giving the size of the
margin as a proportion of the side length of a table cell.  If
<code><var>resizeAxes</var></code> is <code>FALSE</code>, <code><var>axesMargin</var></code> can
also be a <code>unit</code> object.  The arguments
<code><var>mainMargin</var></code> and <code><var>labMargin</var></code> are analogous to
<code><var>axesMargin</var></code>.
</p>


<h3>Value</h3>

<p>The function is usually called for the side effect (a plot is drawn),
but it also returns a <code>grob</code> representation of the plot.
The returned object is a custom <code>gTree</code> of class
<code>"sisalTable"</code>.
</p>


<h3>Author(s)</h3>

<p>Mikko Korpela
</p>


<h3>Examples</h3>

<pre><code class="language-R">library(grDevices)
library(grid)
## Default: 3 by 4 table with labels 1:12 and random background colors
grid.newpage()
sisalTable()

## Four examples in a grid layout
rowCol &lt;- c(1, 18, 2, 18, 1)
lo &lt;- grid.layout(nrow = 5, ncol = 5,
                  widths = rowCol, heights = rowCol)
grid.newpage()
pushViewport(viewport(layout = lo, name = "bgLayout"))
grid.rect(gp=gpar(fill="grey75", col="grey75"))

rNames &lt;- c("topmargin", "top", "hspace", "bottom", "bottommargin")
cNames &lt;- c("leftmargin", "left", "vspace", "right", "rightmargin")
for (Row in c(2, 4)) {
    for (Col in c(2, 4)) {
        pushViewport(viewport(layout.pos.row = Row,
                              layout.pos.col = Col,
                              name = paste(rNames[Row],
                                           cNames[Col], sep="")))
        grid.rect(gp=gpar(fill="cadetblue"))
        upViewport(1)
    }
}

colors1Vec &lt;- terrain.colors(12)
colors1Mat &lt;- matrix(colors1Vec, 3, 4)
labels1Vec &lt;- sample(c(letters, LETTERS), 12)
labels1Mat &lt;- matrix(labels1Vec, 3, 4)

## Column vector, aligned with the right side of the viewport
longText &lt;- rep("", 12)
longText[3] &lt;- "a longish piece of text"
longText[9] &lt;- "and some more"
sisalTable(labels1Vec, bg = colors1Vec, vp = "topleft",
           x = 1, just = "right",
           yAxisLabels = longText, xAxisLabels = "Boo")

## Matrix, zero margin
downViewport("topright")
sisalTable(labels1Mat, bg = colors1Mat,
           width = 1, height = 1, name = "trPlot",
           xAxisLabels = 1:4, yAxisLabels = LETTERS[1:3])
grid.rect(width = grobWidth("trPlot"), height = grobHeight("trPlot"),
          gp = gpar(lty="dashed", col = "white", lwd = 2))
upViewport(1)

## Transpose of matrix, width and height 0.75 "npc" units
downViewport("bottomleft")
sisalTable(t(labels1Mat), bg = t(colors1Mat),
           width = 0.75, height = 0.75, name = "blPlot",
           yAxisLabels = 1:4, xAxisLabels = LETTERS[1:3])
grid.rect(width = grobWidth("blPlot"), height = grobHeight("blPlot"),
          gp = gpar(lty="dashed", col = "white", lwd = 2))
upViewport(1)

## ?plotmath, some cells with no background color
labels2 &lt;- expression(x^{y+x}, sqrt(x), bolditalic(x), NA)
bgCol &lt;- c(rep("white", 3), NA)
sisalTable(labels2, nRows=3, nCols=5, bg = bgCol, naFill = NA,
           naStripes = "darkmagenta", vp="bottomright",
           main = "plotmath text")
</code></pre>


</div>