<div class="container">

<table style="width: 100%;"><tr>
<td>delta.estimate</td>
<td style="text-align: right;">R Documentation</td>
</tr></table>
<h2>
Estimates the treatment effect at time t, defined as the difference in the restricted mean survival time
</h2>

<h3>Description</h3>

<p>Estimates the treatment effect at time t, defined as the difference in the restricted mean survival time.</p>


<h3>Usage</h3>

<pre><code class="language-R">delta.estimate(xone, xzero, deltaone, deltazero, t, std = FALSE, conf.int = FALSE, 
weight.perturb = NULL)
</code></pre>


<h3>Arguments</h3>

<table>
<tr style="vertical-align: top;">
<td><code>xone</code></td>
<td>

<p>numeric vector, observed event times for the primary outcome in the treatment group.
</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>xzero</code></td>
<td>

<p>numeric vector, observed event times for the primary outcome in the control group.
</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>deltaone</code></td>
<td>

<p>numeric vector, event/censoring indicators for the primary outcome in the treatment group.
</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>deltazero</code></td>
<td>

<p>numeric vector, event/censoring indicators for the primary outcome in the control group.
</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>t</code></td>
<td>

<p>time of interest for treatment effect.
</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>std</code></td>
<td>

<p>TRUE or FALSE; indicates whether standard error estimates should be provided, default is FALSE. Estimates are calculated using perturbation-resampling.  Two versions are provided: one that takes the standard deviation of the perturbed estimates (denoted as "sd") and one that takes the median absolute deviation (denoted as "mad").
</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>conf.int</code></td>
<td>

<p>TRUE or FALSE; indicates whether 95% confidence intervals should be provided. Confidence intervals are calculated using the percentiles of perturbed estimates, default is FALSE. If this is TRUE, standard error estimates are automatically provided.
</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>weight.perturb</code></td>
<td>

<p>weights used for perturbation resampling.
</p>
</td>
</tr>
</table>
<h3>Details</h3>


<p>Let <code class="reqn">G \in \{1,0\}</code> be the randomized treatment indicator and <code class="reqn">T</code> denote the time of the primary outcome of interest. We use potential outcomes notation such that <code class="reqn">T^{(G)}</code> denotes the time of the primary outcome under treatment G, for <code class="reqn">G \in \{1, 0\}</code>. We define the treatment effect as the difference in restricted mean survival time up to a fixed time <code class="reqn">t</code> under treatment 1 versus under treatment 0,
</p>
<p style="text-align: center;"><code class="reqn"> \Delta(t)=E\{T^{(1)}\wedge t\} - E\{T^{(0)}\wedge t \}</code>
</p>

<p>where <code class="reqn">\wedge</code> indicates the minimum. Due to censoring, data consist of <code class="reqn">n = n_1 + n_0</code> independent observations <code class="reqn">\{X_{gi}, \delta_{gi}, i=1,...,n_g, g = 1,0\}</code>, where <code class="reqn">X_{gi} = T_{gi}\wedge C_{ gi}</code>, <code class="reqn">\delta_{gi} = I(T_{gi} &lt; C_{gi})</code>, <code class="reqn">C_{gi}</code> denotes the censoring time, <code class="reqn">T_{gi}</code> denotes the time of the primary outcome, and <code class="reqn">\{(T_{gi}, C_{gi}), i = 1, ..., n_g\}</code> are identically distributed within treatment group. The quantity <code class="reqn"> \Delta(t)</code> is estimated using inverse probability of censoring weights:
</p>
<p style="text-align: center;"><code class="reqn">\hat{\Delta}(t)  = n_1^{-1} \sum_{i=1}^{n_1} \hat{M}_{1i}(t)- n_0^{-1} \sum_{i=1}^{n_0} \hat{M}_{0i}(t)</code>
</p>

<p>where  <code class="reqn">\hat{M}_{gi}(t) = I(X_{gi} &gt; t)t/\hat{W}^C_g(t) +  I(X_{gi} &lt; t)X_{gi}\delta_{gi}/\hat{W}^C_g(X_{gi})</code> and <code class="reqn">\hat{W}^C_g(t)</code> is the Kaplan-Meier estimator of <code class="reqn">P(C_{gi} \ge t).</code>
</p>


<h3>Value</h3>

<p>A list is returned:                
</p>
<table>
<tr style="vertical-align: top;">
<td><code>delta </code></td>
<td>
<p>the estimate, <code class="reqn">\hat{\Delta}(t)</code>, described above.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>rmst.1 </code></td>
<td>
<p>the estimated restricted mean survival time in group 1, described above.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>rmst.0 </code></td>
<td>
<p>the estimated restricted mean survival time in group 0, described above.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>delta.sd </code></td>
<td>
<p>the standard error estimate of <code class="reqn">\hat{\Delta}(t)</code>; if std = TRUE or conf.int = TRUE.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>delta.mad </code></td>
<td>
<p>the standard error estimate of <code class="reqn">\hat{\Delta}(t)</code> using the median absolute deviation; if std = TRUE or conf.int = TRUE.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>conf.int.delta</code></td>
<td>
<p>a vector of size 2; the 95% confidence interval for <code class="reqn">\hat{\Delta}(t)</code> based on sample quantiles of the perturbed values; if conf.int = TRUE.</p>
</td>
</tr>
</table>
<h3>Author(s)</h3>

<p>Layla Parast
</p>


<h3>References</h3>

<p>Parast L, Tian L, and Cai T (2020). Assessing the Value of a Censored Surrogate Outcome. Lifetime Data Analysis, 26(2):245-265.
</p>
<p>Tian, L, Zhao, L, &amp; Wei, LJ (2013). Predicting the restricted mean event time with the subject's baseline covariates in survival analysis. Biostatistics, 15(2), 222-233.
</p>
<p>Royston, P, &amp; Parmar, MK (2011). The use of restricted mean survival time to estimate the treatment effect in randomized clinical trials when the proportional hazards assumption is in doubt. Statistics in Medicine, 30(19), 2409-2421.
</p>


<h3>Examples</h3>

<pre><code class="language-R">data(ExampleData)
names(ExampleData)

delta.estimate(xone = ExampleData$x1, xzero = ExampleData$x0, deltaone = ExampleData$delta1, 
deltazero = ExampleData$delta0, t = 5)


delta.estimate(xone = ExampleData$x1, xzero = ExampleData$x0, deltaone = ExampleData$delta1, 
deltazero = ExampleData$delta0, t = 5, std = TRUE, conf.int = TRUE)


</code></pre>


</div>