<div class="container">

<table style="width: 100%;"><tr>
<td>power.calc</td>
<td style="text-align: right;">R Documentation</td>
</tr></table>
<h2>Generate the power to detect the difference between two groups</h2>

<h3>Description</h3>

<p>generates a value for the power between two groups
</p>


<h3>Usage</h3>

<pre><code class="language-R">  power.calc( n, ratio=1, N = 500, test.type, sig.level = 0.05,
    vitdcurves.placebo = NULL, vitdcurves.treatment = NULL,
  	baseline = 0.03, RR = 3, rate = 1, intensity.func = intensity.function(), 
  	holding.time = 2, lohi.vit = c(10,70), clt = NULL, mc.error = 1, boot.rep = 9999, 
  	parallel = FALSE, num.cores = NULL, verbose=FALSE )
</code></pre>


<h3>Arguments</h3>

<table>
<tr style="vertical-align: top;">
<td><code>n</code></td>
<td>
<p>Numeric, the number of participants in the control group.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>ratio</code></td>
<td>
<p>Ratio greater than or equal to 1 giving size of treatment group as a multiple of <code>n</code>. Defaults to groups of equal size.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>N</code></td>
<td>
<p>Number of simulations of the study to run.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>test.type</code></td>
<td>
<p>Type of test to calculate the power, one of "count" or "proportions". </p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>sig.level</code></td>
<td>
<p>Significance level used to test for a statistically significant difference between the groups.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>vitdcurves.placebo</code></td>
<td>
<p>An object of class <code>vitd.curve</code>.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>vitdcurves.treatment</code></td>
<td>
<p>An object of class <code>vitd.curve</code>.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>baseline</code></td>
<td>
<p>Baseline prevalence of getting diseased at any exposure time. Probability of getting diseased when a participant has sufficient vitamin D levels.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>RR</code></td>
<td>
<p>Fold risk difference between getting infection between the most deficient and most sufficient vitamin D levels.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>rate</code></td>
<td>
<p>Expected number of exposures per week, the rate at which exposures occur in the equivalent homogeneous Poisson process.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>intensity.func</code></td>
<td>
<p>Function taking time as sole argument and returns value between 0 and 1, input to nhpp function see poisson package.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>holding.time</code></td>
<td>
<p>Expected number of weeks for the holding time.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>lohi.vit</code></td>
<td>
<p>Inflection points of the relative risk curve used in <code>infection.count</code>.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>clt</code></td>
<td>
<p>Logical or vector of logical values of same length as <code>n</code> indicating whether to use Central Limit Theorem approximation for the test when <code>TRUE</code>. Default is <code>NULL</code> and determination is automatic based on whether group size is less than 35 or not. </p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>mc.error</code></td>
<td>
<p>Number of times to repeat the experiment at each <code>n</code> value to explore Monte Carlo error.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>boot.rep</code></td>
<td>
<p>Number of bootstrap samples to carry out non-parametric tests of hypotheses.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>parallel</code></td>
<td>
<p>Use parallel processing to carry out the simulations. This will parallelise over mc.error.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>num.cores</code></td>
<td>
<p>Number of cores to exploit in parallel mode. Defaults to (cores available) - 1. </p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>verbose</code></td>
<td>
<p>If <code>TRUE</code> print out regular updates on progression. Not available when parallel is set to <code>TRUE</code>.</p>
</td>
</tr>
</table>
<h3>Value</h3>

<p><code>power.calc</code> returns an object of class <code>power.calc</code> that is a list.
The list has the following slots.
</p>
<table>
<tr style="vertical-align: top;">
<td><code>test.type</code></td>
<td>
<p>The type of study the power has been calculated on.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>baseline</code></td>
<td>
<p>The baseline prevalence for disease.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>RR</code></td>
<td>
<p>The relative risk of the study.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>npergroup</code></td>
<td>
<p>The number of participants per group in the study.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>mc.error</code></td>
<td>
<p>Number of repetitions of experiment to approximate Monte Carlo error.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>power</code></td>
<td>
<p>A <code>length(RR)</code> x <code>mc.error</code> x <code>length(npergroup)</code> array of estimated power values. </p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>eff.size</code></td>
<td>
<p>A <code>length(RR)</code> x <code>mc.error</code> x <code>length(npergroup)</code> array of estimated treatment effects (differences between groups).</p>
</td>
</tr>
</table>
<h3>Author(s)</h3>

<p>Rebecca Mangan and Jason Wyse</p>


<h3>Examples</h3>

<pre><code class="language-R"># simulate placebo group
placebo &lt;- vitd.curve( n = 10, type = "placebo" )

# simulate treatment group
treatment &lt;- vitd.curve( n = 10, type = "dynamic-dose" )

# intensity function for exposures to infection
intensfun &lt;- intensity.function( summer.rate = 0, winter.rate = 1 )
  
# calculate power: example only- run for much larger value of N
pow &lt;- power.calc( n = c(10,20,30), 
        N = 10,  test.type = 'count', 
        vitdcurves.placebo = placebo, vitdcurves.treatment = treatment,
        baseline = 0.03, RR = c(2,4), rate = 1, intensity.func = intensfun, boot.rep=2000 )
            
### NOT RUN ###            
# approximate the Monte Carlo error in estimation of the power-- takes longer to run
#pow &lt;- power.calc( n = c(10,20,30), 
#         N = 100, test.type = 'count', 
#         vitdcurves.placebo = placebo, vitdcurves.treatment = treatment,
#         baseline = 0.03, RR = c(2,3,4), rate = 1, 
#         intensity.func = intensfun, mc.error = 10 )

# plot power curves
plot( pow, xlab = "n", x.legend = 10, y.legend = 1, main.legend = "Relative Risk" )
</code></pre>


</div>