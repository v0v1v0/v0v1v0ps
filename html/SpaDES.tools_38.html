<div class="container">

<table style="width: 100%;"><tr>
<td>rasterizeReduced</td>
<td style="text-align: right;">R Documentation</td>
</tr></table>
<h2>Convert reduced representation to full raster</h2>

<h3>Description</h3>

<p>Convert reduced representation to full raster
</p>


<h3>Usage</h3>

<pre><code class="language-R">rasterizeReduced(
  reduced,
  fullRaster,
  newRasterCols,
  mapcode = names(fullRaster),
  ...
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr style="vertical-align: top;">
<td><code>reduced</code></td>
<td>
<p><code>data.frame</code> or <code>data.table</code> that has at least one
column of codes that are represented in the <code>fullRaster</code>.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>fullRaster</code></td>
<td>
<p><code>RasterLayer</code>/<code>SpatRaster</code> of codes used in <code>reduced</code> that
represents a spatial representation of the data. Note that
if <code>fullRaster</code> is a <code>factor</code> <code>SpatRaster</code>, the active category
level values are used, not the IDs (see <code>terra::activeCat</code> and
<code>terra::cats</code>)</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>newRasterCols</code></td>
<td>
<p>Character vector, length 1 or more, with the name(s) of
the column(s) in <code>reduced</code> whose value will be
returned as a <code>RasterLayer</code>/<code>SpatRaster</code> or list
of <code>RasterLayer</code>/<code>SpatRaster</code>s.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>mapcode</code></td>
<td>
<p>a character, length 1, with the name of the column in <code>reduced</code>
that is represented in <code>fullRaster</code>.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>...</code></td>
<td>
<p>Other arguments. None used yet.</p>
</td>
</tr>
</table>
<h3>Value</h3>

<p>A <code>RasterLayer</code>/<code>SpatRaster</code> or list of
<code>RasterLayer</code>/<code>SpatRaster</code> of with same dimensions as <code>fullRaster</code> representing
<code>newRasterCols</code> spatially, according to the join between the <code>mapcode</code>
contained within <code>reduced</code> and <code>fullRaster</code>
</p>


<h3>Author(s)</h3>

<p>Eliot McIntire
</p>


<h3>See Also</h3>

<p><code>terra::rast()</code>
</p>


<h3>Examples</h3>

<pre><code class="language-R">library(data.table)
library(terra)

origDTThreads &lt;- data.table::setDTthreads(2L)
origNcpus &lt;- options(Ncpus = 2L)

ras &lt;- rast(ext(0, 15, 0, 15), res = 1)
fullRas &lt;- randomPolygons(ras, numTypes = 2)
names(fullRas) &lt;- "mapcodeAll"
uniqueComms &lt;- unique(fullRas)
reducedDT &lt;- data.table(uniqueComms,
                        communities = sample(1:1000, length(uniqueComms)),
                        biomass = rnbinom(length(uniqueComms), mu = 4000, 0.4))
biomass &lt;- rasterizeReduced(reducedDT, fullRas, "biomass")

# The default key is the layer name of the fullRas, so rekey incase of miskey
setkey(reducedDT, biomass)

communities &lt;- rasterizeReduced(reducedDT, fullRas, "communities")
coltab(communities) &lt;- c("blue", "orange", "red")
if (interactive()) {
  terra::plot(c(biomass, communities, fullRas))
}

## with a factor SpatRaster, the mapcode should correspond to the
## active category (not the ids)
cls &lt;- data.frame(id = sort(unique(as.vector(fullRas[]))))
cls$Bclass &lt;- LETTERS[cls$id]
levels(fullRas) &lt;- cls
is.factor(fullRas)

clsDT &lt;- as.data.table(cls)
reducedDT &lt;- reducedDT[clsDT, on = "mapcodeAll==id"]
reducedDT[, mapcodeAll := Bclass]

biomass2 &lt;- rasterizeReduced(reducedDT, fullRas, "biomass")

# clean up
data.table::setDTthreads(origDTThreads)
options(Ncpus = origNcpus)
</code></pre>


</div>