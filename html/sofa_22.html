<div class="container">

<table style="width: 100%;"><tr>
<td>db_replicate</td>
<td style="text-align: right;">R Documentation</td>
</tr></table>
<h2>Upload (replicate) a local database to a remote database server,
e.g., Cloudant, Iriscouch</h2>

<h3>Description</h3>

<p>Upload (replicate) a local database to a remote database server,
e.g., Cloudant, Iriscouch
</p>


<h3>Usage</h3>

<pre><code class="language-R">db_replicate(from, to, dbname, createdb = FALSE, as = "list", ...)
</code></pre>


<h3>Arguments</h3>

<table>
<tr style="vertical-align: top;">
<td><code>from</code></td>
<td>
<p>Couch to replicate from. An object of class Cushion.
Required.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>to</code></td>
<td>
<p>Remote couch to replicate to. An object of class Cushion.
Required.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>dbname</code></td>
<td>
<p>(character) Database name. Required.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>createdb</code></td>
<td>
<p>If <code>TRUE</code>, the function creates the db on the remote
server before uploading. The db has to exist before uploading, so either
you do it separately or this fxn can do it for you. Default: <code>FALSE</code></p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>as</code></td>
<td>
<p>(character) One of list (default) or json</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>...</code></td>
<td>
<p>Curl args passed on to crul::HttpClient</p>
</td>
</tr>
</table>
<h3>Value</h3>

<p>JSON as a character string or a list (determined by the
<code>as</code> parameter)
</p>


<h3>Examples</h3>

<pre><code class="language-R">## Not run: 
if (interactive()) {
## create a connection
user &lt;- Sys.getenv("COUCHDB_TEST_USER")
pwd &lt;- Sys.getenv("COUCHDB_TEST_PWD")
(x &lt;- Cushion$new(user=user, pwd=pwd))

# Create a database locally
db_list(x)
if ("hello_earth" %in% db_list(x)) {
  invisible(db_delete(x, dbname="hello_earth"))
}
db_create(x, 'hello_earth')

## replicate to a remote server
z &lt;- Cushion$new(host = "ropensci.cloudant.com", transport = 'https',
  port = NULL, user = 'ropensci', pwd = Sys.getenv('CLOUDANT_PWD'))

## do the replication
db_replicate(x, z, dbname = "hello_earth")

## check changes on the remote
db_list(z)
db_changes(z, dbname = "hello_earth")

## make some changes on the remote
doc_create(z, dbname = "hello_earth",
  '{"language":"python","library":"requests"}', 'stuff')
changes(z, dbname = "hello_earth")

## create another document, and try to get it
doc_create(z, dbname = "hello_earth", doc = '{"language":"R"}',
  docid="R_rules")
doc_get(z, dbname = "hello_earth", docid='R_rules')

## cleanup - delete the database
db_delete(z, 'hello_earth')
}

## End(Not run)
</code></pre>


</div>