<div class="container">

<table style="width: 100%;"><tr>
<td>swaprinc</td>
<td style="text-align: right;">R Documentation</td>
</tr></table>
<h2>Swap in Principal Components</h2>

<h3>Description</h3>

<p>Compare a regression model using raw variables with another model where principal
components are extracted from a subset of the raw independent variables, and
a user-defined number of these principal components are then used to replace
the original subset of variables in the regression model.
</p>


<h3>Usage</h3>

<pre><code class="language-R">swaprinc(
  data,
  formula,
  engine = "stats",
  prc_eng = "stats",
  pca_vars,
  n_pca_components,
  norun_raw = FALSE,
  lpca_center = "none",
  lpca_scale = "none",
  lpca_undo = FALSE,
  gifi_transform = "none",
  gifi_trans_vars,
  gifi_trans_dims,
  no_tresp = FALSE,
  miss_handler = "none",
  model_options = "noaddpars",
  prcomp_options = "noaddpars",
  gifi_princals_options = "noaddpars",
  gifi_trans_options = "noaddpars"
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr style="vertical-align: top;">
<td><code>data</code></td>
<td>
<p>A dataframe</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>formula</code></td>
<td>
<p>A quoted model formula</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>engine</code></td>
<td>
<p>The engine for fitting the model.  Options are 'stats' or 'lme4'.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>prc_eng</code></td>
<td>
<p>Then engine or extracting principal components.  Options are
'stats', 'Gifi', and 'stats_Gifi'.  The stats_Gifi engine uses
<code>tidyselect::where(is.numeric)</code> to select the pca_vars for <code>stats::prcomp</code> and
<code>-tidyselect::where(is.numeric)</code> to select the pca_vars for <code>Gifi::princals</code>.
Read Rossiter (2021) for more on princals.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>pca_vars</code></td>
<td>
<p>Variables to include in the principal component analysis.
These variables will be swapped out for principal components</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>n_pca_components</code></td>
<td>
<p>The number of principal components to include in the
model. If using a complex prc_eng (i.e., stats_Gifi) then provide a named
vector (i.e., n_pca_components = c("stats" = 2, "Gifi" = 3)).</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>norun_raw</code></td>
<td>
<p>Include regression on raw variables if TRUE, exclude if FALSE.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>lpca_center</code></td>
<td>
<p>Center data as in the Step-by-Step PCA vignette
(Harvey &amp; Hanson, 2022).  Only numeric variables will be included in the
centering.  Parameter takes values 'all' to center raw and pca variables, 'raw'
to only center variables for the raw variable model fitting, 'pca' to only
center pca_vars before pca regression model fitting, and 'none' to skip lpca
centering.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>lpca_scale</code></td>
<td>
<p>Scale data as in the Step-by-Step PCA vignette.  Only
numeric variables will be included in the scaling.  Parameter takes values
'all' to scale raw and pca variables, 'raw' to only scale variables for the
raw variable model fitting, 'pca' to only scale pca_vars before pca regression
model fitting, and 'none' to skip lpca scaling.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>lpca_undo</code></td>
<td>
<p>Undo centering and scaling of pca_vars as in the Step-by-Step
PCA vignette.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>gifi_transform</code></td>
<td>
<p>Use Gifi optimal scaling to transform a set of variables.
Parameter takes values 'none', 'all', 'raw', and 'pca'</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>gifi_trans_vars</code></td>
<td>
<p>A vector of variables to include in the Gifi optimal
scaling transformation</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>gifi_trans_dims</code></td>
<td>
<p>Number of dimensions to extract in the Gifi optimal
scaling transformation algorithm</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>no_tresp</code></td>
<td>
<p>When set to <code>TRUE</code>, no_tresp (No transform response) will exclude
the response variable from from pre-modeling and pre-pca transformations.
Specifically, setting no_tresp to TRUE will exclude the response variable from
the transformation specified in lpca_center and lpca_scale.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>miss_handler</code></td>
<td>
<p>Choose how <code>swaprinc</code> handles missing data on the input
data.  Default is 'none'.  Use 'omit' for complete case analysis.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>model_options</code></td>
<td>
<p>Pass additional arguments to statistical modeling functions
(i.e., <code>stats::lm</code>, <code>stats::glm</code>, <code>lme4::lmer</code>, <code>lme4::glmer</code>) Default is
'noaddpars' (no additional parameters)</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>prcomp_options</code></td>
<td>
<p>Pass additional arguments to <code>stats::prcomp</code> for
prc_eng = 'stats' and prc_eng = 'stats_Gifi' call. Default is 'noaddpars'
(no additional parameters)</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>gifi_princals_options</code></td>
<td>
<p>Pass additional arguments to <code>Gifi::princals</code> for
prc_eng = 'Gifi' and prc_eng = 'stats_Gifi' call. Default is 'noaddpars'
(no additional parameters)</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>gifi_trans_options</code></td>
<td>
<p>Pass additional arguments to <code>Gifi::princals</code> for
gifi_transform.  Default is 'noaddpars' (no additional parameters)</p>
</td>
</tr>
</table>
<h3>Value</h3>

<p>A list with fitted models
</p>


<h3>References</h3>


<ol>
<li>
<p> Rossiter, D. G.  Nonlinear Principal Components Analysis: Multivariate Analysis with Optimal Scaling (MVAOS). (2021) <a href="https://www.css.cornell.edu/faculty/dgr2/_static/files/R_html/NonlinearPCA.html">https://www.css.cornell.edu/faculty/dgr2/_static/files/R_html/NonlinearPCA.html</a>
</p>
</li>
<li>
<p> Harvey, D. T., &amp; Hanson, B. A. Step-by-Step PCA. (2022) <a href="https://cran.r-project.org/package=LearnPCA/vignettes/Vig_03_Step_By_Step_PCA.pdf">https://cran.r-project.org/package=LearnPCA/vignettes/Vig_03_Step_By_Step_PCA.pdf</a>
</p>
</li>
</ol>
<h3>Examples</h3>

<pre><code class="language-R">data(iris)
res &lt;- swaprinc(iris,
"Sepal.Length ~ Sepal.Width + Petal.Length + Petal.Width",
pca_vars = c("Sepal.Width", "Petal.Length", "Petal.Width"),
n_pca_components = 2)
</code></pre>


</div>