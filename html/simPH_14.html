<div class="container">

<table style="width: 100%;"><tr>
<td>simGG.siminteract</td>
<td style="text-align: right;">R Documentation</td>
</tr></table>
<h2>Plot simulated linear multiplicative interactions from Cox Proportional
Hazards Models</h2>

<h3>Description</h3>

<p><code>simGG.siminteract</code> uses ggplot2 to plot the quantities of
interest from <code>siminteract</code> objects, including marginal effects, first
differences, hazard ratios, and hazard rates.
</p>


<h3>Usage</h3>

<pre><code class="language-R">## S3 method for class 'siminteract'
simGG(
  obj,
  from = NULL,
  rug = TRUE,
  rug_position = "identity",
  to = NULL,
  xlab = NULL,
  ylab = NULL,
  title = NULL,
  method = "auto",
  spalette = "Set1",
  legend = "legend",
  leg.name = "",
  lcolour = "#2B8CBE",
  lsize = 1,
  pcolour = "#A6CEE3",
  psize = 1,
  alpha = 0.2,
  type = "ribbons",
  ...
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr style="vertical-align: top;">
<td><code>obj</code></td>
<td>
<p>a <code>siminteract</code> class object</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>from</code></td>
<td>
<p>numeric time to start the plot from. Only relevant if
<code>qi = "Hazard Rate"</code>.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>rug</code></td>
<td>
<p>logical indicating whether or not to include a rug plot showing
the distribution of values in the sample used to estimate the <code>coxph</code>
model. Only relevant when the quantity of interest is not
<code>"Hazard Rate"</code>.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>rug_position</code></td>
<td>
<p>character string. The position adjustment to use for
overlapping points in the rug plot. Use <code>"jitter"</code> to jitter the points.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>to</code></td>
<td>
<p>numeric time to plot to. Only relevant if
<code>qi = "Hazard Rate"</code>.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>xlab</code></td>
<td>
<p>a label for the plot's x-axis.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>ylab</code></td>
<td>
<p>a label of the plot's y-axis. The default uses the value of
<code>qi</code>.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>title</code></td>
<td>
<p>the plot's main title.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>method</code></td>
<td>
<p>what type of smoothing method to use to summarize the center
of the simulation distribution.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>spalette</code></td>
<td>
<p>colour palette for when there are multiple sets of
comparisons to plot. Not relevant for <code>qi = "Marginal Effect"</code>. Default
palette is <code>"Set1"</code>. See <code>scale_colour_brewer</code>.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>legend</code></td>
<td>
<p>specifies what type of legend to include (if applicable). The
default is <code>legend = "legend"</code>. To hide the legend use
<code>legend = FALSE</code>. See the <code>discrete_scale</code> for more details.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>leg.name</code></td>
<td>
<p>name of the legend (if applicable).</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>lcolour</code></td>
<td>
<p>character string colour of the smoothing line. The default is
hexadecimal colour <code>lcolour = '#2B8CBE'</code>. Only relevant if
<code>qi = "Marginal Effect"</code>.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>lsize</code></td>
<td>
<p>size of the smoothing line. Default is 1. See
<code>ggplot2</code>.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>pcolour</code></td>
<td>
<p>character string colour of the simulated points or ribbons
(when there are not multiple sets of simulations). Default is hexadecimal
colour <code>pcolour = '#A6CEE3'</code>.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>psize</code></td>
<td>
<p>size of the plotted simulation points. Default is
<code>psize = 1</code>. See <code>ggplot2</code>.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>alpha</code></td>
<td>
<p>numeric. Alpha (e.g. transparency) for the points, lines, or
ribbons. Default is <code>alpha = 0.2</code>. See <code>ggplot2</code>. Note, if
<code>type = "lines"</code> or <code>type = "points"</code> then <code>alpah</code> sets the
maximum value per line or point at the center of the distribution. Lines or
points further from the center are more transparent the further they get
from the middle.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>type</code></td>
<td>
<p>character string. Specifies how to plot the simulations. Can be
<code>points</code>, <code>lines</code>, or <code>ribbons</code>. If points then each
simulation value will be plotted. If <code>lines</code> is chosen then each
simulation is plotted using a different line. Note: any simulation with a
value along its length that is outside of the specified central interval
will be dropped. This is to create a smooth plot. If <code>type = "ribbons"</code>
a plot will be created with shaded areas ('ribbons') for the minimum and
maximum simulation values (i.e. the middle interval set with <code>qi</code> in
<code>coxsimSpline</code>) as well as the central 50 percent of this area.
It also plots a line for the median value of the full area, so values in
<code>method</code> are ignored. One of the key advantages of using ribbons
rather than points is that it creates plots with smaller file sizes.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>...</code></td>
<td>
<p>Additional arguments. (Currently ignored.)</p>
</td>
</tr>
</table>
<h3>Details</h3>

<p>Uses ggplot2 to plot the quantities of interest from
<code>siminteract</code> objects, including marginal effects, first differences,
hazard ratios, and hazard rates. If there are multiple strata, the quantities
of interest will be plotted in a grid by strata.
</p>
<p>Note: A dotted line is created at y = 1 (0 for first difference), i.e. no
effect, for time-varying hazard ratio graphs. No line is created for hazard
rates.
</p>
<p>Note: if <code>qi = "Hazard Ratio"</code> or <code>qi = "First Difference"</code> then
you need to have choosen more than one fitted value for <code>X1</code> in
<code>coxsimInteract</code>.
</p>


<h3>Value</h3>

<p>a <code>gg</code> <code>ggplot</code> class object
</p>


<h3>References</h3>

<p>Gandrud, Christopher. 2015. simPH: An R Package for Illustrating
Estimates from Cox Proportional Hazard Models Including for Interactive and
Nonlinear Effects. Journal of Statistical Software. 65(3)1-20.
</p>
<p>Brambor, Thomas, William Roberts Clark, and Matt Golder. 2006.
”Understanding Interaction Models: Improving Empirical Analyses.” Political
Analysis 14(1): 63-82.
</p>
<p>Keele, Luke. 2010. ”Proportionally Difficult: Testing for Nonproportional
Hazards in Cox Models.” Political Analysis 18(2): 189-205.
</p>
<p>Carpenter, Daniel P. 2002. ”Groups, the Media, Agency Waiting Costs, and
FDA Drug Approval.” American Journal of Political Science 46(3): 490-505.
</p>


<h3>See Also</h3>

<p><code>coxsimInteract</code>, <code>simGG.simlinear</code>,
and <code>ggplot2</code>
</p>


<h3>Examples</h3>

<pre><code class="language-R"># Load Carpenter (2002) data
data("CarpenterFdaData")

# Load survival package
library(survival)

# Run basic model
M1 &lt;- coxph(Surv(acttime, censor) ~ lethal*prevgenx,
            data = CarpenterFdaData)

# Simulate Marginal Effect of lethal for multiple values of prevgenx
Sim1 &lt;- coxsimInteract(M1, b1 = "lethal", b2 = "prevgenx",
                     X2 = seq(2, 115, by = 2), nsim = 100)

# Plot quantities of interest
simGG(Sim1)
simGG(Sim1, rug_position = 'jitter')

## Not run: 
# Change the order of the covariates to make a more easily
# interpretable hazard ratio graph.
M2 &lt;- coxph(Surv(acttime, censor) ~ prevgenx*lethal,
             data = CarpenterFdaData)

# Simulate Hazard Ratio of lethal for multiple values of prevgenx
Sim2 &lt;- coxsimInteract(M2, b1 = "prevgenx", b2 = "lethal",
                    X1 = seq(2, 115, by = 2),
                    X2 = c(0, 1),
                    qi = "Hazard Ratio", ci = 0.9)

# Simulate First Difference
Sim3 &lt;- coxsimInteract(M2, b1 = "prevgenx", b2 = "lethal",
                       X1 = seq(2, 115, by = 2),
                       X2 = c(0, 1),
                       qi = "First Difference", spin = TRUE)

# Simulate Hazard Rate
Sim4 &lt;- coxsimInteract(M2, b1 = "prevgenx", b2 = "lethal",
                       X1 = 100, X2 = 1, qi = "Hazard Rate")

# Plot quantities of interest
simGG(Sim1, xlab = "\nprevgenx",
       ylab = "Marginal Effect of lethal\n")
simGG(Sim2, type = 'ribbons', rug_position = 'jitter')
simGG(Sim3)
simGG(Sim4, to = 150, type = 'lines', legend = FALSE)

## End(Not run)

</code></pre>


</div>