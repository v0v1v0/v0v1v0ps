<div class="container">

<table style="width: 100%;"><tr>
<td>sfn_mutate</td>
<td style="text-align: right;">R Documentation</td>
</tr></table>
<h2>Mutate variables by function</h2>

<h3>Description</h3>

<p>Port of <code>mutate</code> for <code>sfn_data</code> and
<code>sfn_data_multi</code> objects
</p>


<h3>Usage</h3>

<pre><code class="language-R">sfn_mutate(sfn_data, ..., solar = FALSE)
</code></pre>


<h3>Arguments</h3>

<table>
<tr style="vertical-align: top;">
<td><code>sfn_data</code></td>
<td>
<p><code>sfn_data</code> or <code>sfn_data_multi</code> object to subset</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>...</code></td>
<td>
<p>Name-value pairs of expressions to pass to the
<code>mutate</code> function.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>solar</code></td>
<td>
<p>Logical indicating if solar timestamp must used to subset</p>
</td>
</tr>
</table>
<h3>Details</h3>

<p>'sfn_mutate' function will maintain the same number of rows before and after
the modification, so it is well suited to modify variables without creating
TIMESTAMP gaps (i.e. to change variable units). For mutating groups of
variables at the same time see <code>sfn_mutate_at</code>.
</p>


<h3>Value</h3>

<p>For <code>sfn_data</code> objects, a mutated <code>sfn_data</code>. For
<code>sfn_data_multi</code> another <code>sfn_data_multi</code> with the sites mutated
</p>


<h3>Sapflow and environmental variables</h3>

<p>'sfn_mutate' internally joins the sapflow and environmental datasets by the
TIMESTAMP, so it is possible to mutate variables conditionally between
sapflow and environmental measures (i.e. mutate sapflow when wind is high or
radiation is zero). Due to this, at the moment any new variable is dropped
when building the final results, so this is ONLY intended to mutate
existing variables without changing the names.
</p>


<h3>Examples</h3>

<pre><code class="language-R">library(dplyr)
library(lubridate)

# data
data('ARG_TRE', package = 'sapfluxnetr')

# transform to NAs any wind value above 25
ws_threshold &lt;- 25
sfn_mutate(ARG_TRE, ws = if_else(ws &gt; 25, NA_real_, ws))

## multi
data(ARG_MAZ, package = 'sapfluxnetr')
data(AUS_CAN_ST2_MIX, package = 'sapfluxnetr')
multi_sfn &lt;- sfn_data_multi(ARG_TRE, ARG_MAZ, AUS_CAN_ST2_MIX)

multi_sfn_mutated &lt;- sfn_mutate(
  multi_sfn, ws = if_else(ws &gt; 25, NA_real_, ws)
)

multi_sfn_mutated[['ARG_TRE']]

</code></pre>


</div>