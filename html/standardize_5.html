<div class="container">

<table style="width: 100%;"><tr>
<td>named_contr_sum</td>
<td style="text-align: right;">R Documentation</td>
</tr></table>
<h2>Create named sum contrasts for an unordered factor.</h2>

<h3>Description</h3>

<p><code>named_contr_sum</code> creates sum contrasts for a factor which are named
with the levels of the factor rather than with numbers (e.g. if a factor
<code>f1</code> has levels <code>A</code>, <code>B</code>, and <code>C</code>, then rather than
creating contrast columns <code>f11</code> and <code>f12</code>, it creates columns
<code>f1A</code> and <code>f1B</code>).  The absolute value of the non-zero elements
of the matrix can also be specified.
</p>


<h3>Usage</h3>

<pre><code class="language-R">named_contr_sum(x, scale = 1, return_contr = TRUE)
</code></pre>


<h3>Arguments</h3>

<table>
<tr style="vertical-align: top;">
<td><code>x</code></td>
<td>
<p>An object coercible to factor or a numeric or character vector of
levels.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>scale</code></td>
<td>
<p>A positive number by which the entire contrast
matrix returned by <code>contr.sum</code> is multiplied.  See
'Details'.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>return_contr</code></td>
<td>
<p>A logical. If <code>TRUE</code> (the default), a contrast
matrix is returned. If <code>FALSE</code>, <code>x</code> is converted to an unordered
factor with the contrast matrix applied, and the factor is returned.</p>
</td>
</tr>
</table>
<h3>Details</h3>

<p>First, <code>x</code> is coerced to factor, and its levels (excluding <code>NA</code>)
are sorted alphabetically.  If there are two unique values, and they are
equal to (ignoring case) "F" and "T", "FALSE" and "TRUE", "N" and "Y",
"NO" and "YES", or "0" and "1", then their order is reversed (this makes it
so the positive level gets the dummy coefficient rather than the negative
level, yielding a more intuitive interpretation for coefficients).  Then
<code>contr.sum</code> is called, and the column names of the
resulting contrast matrix are set using the character vector of unique values
(excluding the final element that gets coded as <code>-1</code> for all dummy
variables).  This entire matrix is then multiplied by <code>scale</code>; with
the default value of <code>1</code>, this does not change the matrix; if, for
example, <code>scale = 0.5</code>, then rather than each column containing values
in <code>-1, 0, 1</code>, each column would contain values in <code>-0.5, 0, 0.5</code>.
If <code>return_contr = TRUE</code>, then this contrast matrix is
returned.  If <code>return_contr = FALSE</code>, then <code>x</code> is converted to an
unordered factor with the named sum contrasts and returned. <code>NA</code> is never
assigned as a level in the contrast matrix or in the factor returned by the
function, but <code>NA</code> values in <code>x</code> are not removed in the factor
returned when <code>return_contr = FALSE</code>. See the examples.
</p>


<h3>Value</h3>

<p>If <code>return_contr = TRUE</code>, a contrast matrix obtained from
<code>contr.sum</code> with named columns rather than numbered
columns and deviations with magnitude <code>scale</code>.
If <code>return_contr = FALSE</code>, then <code>x</code> is returned
as an unordered factor with the named sum contrasts applied.
</p>


<h3>Author(s)</h3>

<p>Christopher D. Eager &lt;eager.stats@gmail.com&gt;
</p>


<h3>See Also</h3>

<p><code>scaled_contr_poly</code> for ordered factors.
</p>


<h3>Examples</h3>

<pre><code class="language-R">f &lt;- factor(rep(c("a", "b", "c", NA), 2), levels = c("b", "c", "a"))
f &lt;- addNA(f)
levels(f)  # NA listed as factor level
contrasts(f)  # NA included in contrast matrix
named_contr_sum(f)  # named sum contrasts (NA dropped; levels alphabetized)
named_contr_sum(levels(f))  # same output
named_contr_sum(f, return_contr = FALSE)  # factor with named sum contrasts
named_contr_sum(f, 0.5)  # deviations of magniude 0.5

f &lt;- c(TRUE, FALSE, FALSE, TRUE)
class(f)  # logical
named_contr_sum(f)  # TRUE gets the dummy variable
f &lt;- named_contr_sum(f, return_contr = FALSE)
class(f)  # factor

named_contr_sum(letters[1:5])  # character argument
named_contr_sum(rep(letters[1:5], 2), return_contr = FALSE)  # creates factor

# ordered factors are converted to unordered factors, so use with caution
f &lt;- factor(rep(1:3, 2), ordered = TRUE)
is.ordered(f)  # TRUE
f
f &lt;- named_contr_sum(f, return_contr = FALSE)
is.ordered(f)  # FALSE
f

## Not run: 
# error from stats::contr.sum because only one unique non-NA value
named_contr_sum(5)
named_contr_sum(rep(c("a", NA), 3))

## End(Not run)
</code></pre>


</div>