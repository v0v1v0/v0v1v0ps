<div class="container">

<table style="width: 100%;"><tr>
<td>rmst2perm</td>
<td style="text-align: right;">R Documentation</td>
</tr></table>
<h2>Permutation Test for Comparing Restricted Mean Survival Time</h2>

<h3>Description</h3>

<p>Performs the permutation test using difference in the restricted mean
survival time (RMST) between groups as a summary measure of the survival time distribution.
When the sample size is less than 50 per group, it has been shown that there is non-negligible
inflation of the type I error rate in the commonly used asymptotic test for the RMST comparison.
Generally, permutation tests can be useful in such a situation.
However, when we apply the permutation test for the RMST comparison, particularly in small sample
situations, there are some cases where the survival function in either group cannot be defined
due to censoring in the permutation process. Horiguchi and Uno (2020) &lt;doi:10.1002/sim.8565&gt;
have examined six workable solutions to handle this numerical issue.
It performs permutation tests with implementation of the six methods outlined in the paper
when the numerical issue arises during the permutation process.
The result of the asymptotic test is also provided for a reference.
</p>


<h3>Usage</h3>

<pre><code class="language-R">rmst2perm(time, status, arm, tau=NULL, mperm=c(1:6), nperm=100000,
seed=NULL, asy="greenwood", test="2_side")
</code></pre>


<h3>Arguments</h3>

<table>
<tr style="vertical-align: top;">
<td><code>time</code></td>
<td>
<p>The follow-up time for right censored data.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>status</code></td>
<td>
<p>The event indicator, 1=event, and 0=censor.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>arm</code></td>
<td>
<p>The group indicator for comparison with a value of either 0 or 1. Normally, 0=control group, 1=active treatment group. The three vectors (<code>time</code>, <code>status</code>, <code>arm</code>) need to have the same length.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>tau</code></td>
<td>
<p>A scaler value to specify the truncation time point for the RMST calculation.
It needs to be smaller than the minimum value of the largest observed time in each of the two groups.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>mperm</code></td>
<td>
<p>A vector with the numbers from 1 to 6 to specify the method for conducting the permutation test when the last observation time from either group does not reach the specified <code>tau</code>.
It supports: 1=ignoring the inestimable cases (Method 1),
2=extending the survival curve to tau (Method 2),
3=switching the last censored observation to the event observation (Method 3),
4=averaging RMSTs derived from Methods 2 and 3 (Method 4),
5=fitting a Weibull distribution to each inestimable case (Method 5), and
6=utilizing pseudo-observations (Method 6). Please see Horiguchi and Uno (2020) &lt;doi:10.1002/sim.8565&gt; for details.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>nperm</code></td>
<td>
<p>The number of iterations for the resampling. It is recommended to specify at least 100,000 (default) or larger.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>seed</code></td>
<td>
<p>An integer value, used for random number generation in the resampling procedure. Default is <code>NULL</code>.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>asy</code></td>
<td>
<p>Specify the asymptotic variance estimator for the difference in RMST.
<code>asy</code> supports <code>"greenwood"</code> for Greenwood plug-in estimator (default) and <code>"aj"</code> for Aalen-Johansen plug-in estimators. Please see Horiguchi and Uno (2020) &lt;doi:10.1002/sim.8565&gt; for details.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>test</code></td>
<td>
<p>Specify <code>"1_side"</code> for the one-sided test where the alternative hypothesis is that the treatment effect in arm=1 is superior to that in arm=0 with respect to survival.
Specify <code>"2_side"</code> for the two-sided test where the alternative hypothesis is that the treatment effect in arm=1 is not equal to that in arm=0 with respect to survival.
Default is <code>"2_side"</code>.</p>
</td>
</tr>
</table>
<h3>Value</h3>

<p>An object of class rmst2perm.
</p>
<table>
<tr style="vertical-align: top;">
<td><code>point_estimate</code></td>
<td>
<p>Estimated RMST values for arm=1, arm=0, and their difference</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>asymptotic_test_pval</code></td>
<td>
<p>P-value of the asymptotic test for the difference in RMST</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>permutation_test_methodX_pval</code></td>
<td>
<p>P-value of the permutation test for the difference in RMST using Method X (X is the number specified in <code>mperm</code>)</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>methodX_number_applied</code></td>
<td>
<p>The number of times Method X was applied during the permutation process. (X is the number specified in <code>mperm</code> except 6.) For X=1 (Method 1), this returns how many additional permutations were performed in order to obtain <code>nperm</code> of realizations.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>method5_number_exponential_used</code></td>
<td>
<p>The number of times the exponential distribution was used for the parametric fit during the permutations. Normally, the Weibull distribution is used for Method 5.
However, when the maximum likelihood estimate (MLE) for the Weibull distribution cannot be derived or the hessian of the covariance matrix for the MLE is singular, the exponential distribution will be used.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>tau</code></td>
<td>
<p>The truncation time used in the analysis</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>mperm</code></td>
<td>
<p>The method used to conduct the permutation test</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>nperm</code></td>
<td>
<p>The number of iterations for the resampling</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>asy</code></td>
<td>
<p>The type of the asymptotic variance estimator used for the asymptotic test</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>test</code></td>
<td>
<p>The type of test used in the analysis</p>
</td>
</tr>
</table>
<h3>Author(s)</h3>

<p>Miki Horiguchi, Hajime Uno
</p>


<h3>References</h3>

<p>Horiguchi M, Uno H. On permutation tests for comparing restricted mean survival time
with small sample from randomized trials. Statistics in Medicine 2020. doi:10.1002/sim.8565.
</p>


<h3>Examples</h3>

<pre><code class="language-R">#--- sample data ---#
D      = rmst2perm.sample.data()
time   = D$time
status = D$status
arm    = D$arm
tau    = 34
mperm  = c(1:6)
nperm  = 100 #--This number is only for the example.
             #--It is recommended to specify at least 100K (default) or larger.
seed   = 123

a = rmst2perm(time=time, status=status, arm=arm,
              tau=tau, mperm=mperm, nperm=nperm, seed=seed)
print(a)
</code></pre>


</div>