<div class="container">

<table style="width: 100%;"><tr>
<td>sparseR</td>
<td style="text-align: right;">R Documentation</td>
</tr></table>
<h2>Fit a ranked-sparsity model with regularized regression</h2>

<h3>Description</h3>

<p>Fit a ranked-sparsity model with regularized regression
</p>


<h3>Usage</h3>

<pre><code class="language-R">sparseR(
  formula,
  data,
  family = c("gaussian", "binomial", "poisson", "coxph"),
  penalty = c("lasso", "MCP", "SCAD"),
  alpha = 1,
  ncvgamma = 3,
  lambda.min = 0.005,
  k = 1,
  poly = 2,
  gamma = 0.5,
  cumulative_k = FALSE,
  cumulative_poly = TRUE,
  pool = FALSE,
  ia_formula = NULL,
  pre_process = TRUE,
  model_matrix = NULL,
  y = NULL,
  poly_prefix = "_poly_",
  int_sep = "\\:",
  pre_proc_opts = c("knnImpute", "scale", "center", "otherbin", "none"),
  filter = c("nzv", "zv"),
  extra_opts = list(),
  ...
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr style="vertical-align: top;">
<td><code>formula</code></td>
<td>
<p>Names of the terms</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>data</code></td>
<td>
<p>Data</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>family</code></td>
<td>
<p>The family of the model</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>penalty</code></td>
<td>
<p>What penalty should be used (lasso, MCP, or SCAD)</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>alpha</code></td>
<td>
<p>The mix of L1 penalty (lower values introduce more L2 ridge
penalty)</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>ncvgamma</code></td>
<td>
<p>The tuning parameter for ncvreg (for MCP or SCAD)</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>lambda.min</code></td>
<td>
<p>The minimum value to be used for lambda (as ratio of max,
see ?ncvreg)</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>k</code></td>
<td>
<p>The maximum order of interactions to consider (default: 1; all
pairwise)</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>poly</code></td>
<td>
<p>The maximum order of polynomials to consider (default: 2)</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>gamma</code></td>
<td>
<p>The degree of extremity of sparsity rankings (see details)</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>cumulative_k</code></td>
<td>
<p>Should penalties be increased cumulatively as order
interaction increases?</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>cumulative_poly</code></td>
<td>
<p>Should penalties be increased cumulatively as order
polynomial increases?</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>pool</code></td>
<td>
<p>Should interactions of order k and polynomials of order k+1 be
pooled together for calculating the penalty?</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>ia_formula</code></td>
<td>
<p>formula to be passed to step_interact (for interactions,
see details)</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>pre_process</code></td>
<td>
<p>Should the data be preprocessed (if FALSE, must provide
model_matrix)</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>model_matrix</code></td>
<td>
<p>A data frame or matrix specifying the full model matrix
(used if !pre_process)</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>y</code></td>
<td>
<p>A vector of responses (used if !pre_process)</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>poly_prefix</code></td>
<td>
<p>If model_matrix is specified, what is the prefix for
polynomial terms?</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>int_sep</code></td>
<td>
<p>If model_matrix is specified, what is the separator for
interaction terms?</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>pre_proc_opts</code></td>
<td>
<p>List of preprocessing steps (see details)</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>filter</code></td>
<td>
<p>The type of filter applied to main effects + interactions</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>extra_opts</code></td>
<td>
<p>A list of options for all preprocess steps (see details)</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>...</code></td>
<td>
<p>Additional arguments (passed to fitting function)</p>
</td>
</tr>
</table>
<h3>Details</h3>

<p>Selecting <code>gamma</code>: higher values of gamma will penalize "group" size more. By
default, this is set to 0.5, which yields equal contribution of prior
information across orders of interactions/polynomials (this is a good
default for most settings).
</p>
<p>Additionally, setting <code>cumulative_poly</code> or <code>cumulative_k</code> to <code>TRUE</code> increases
the penalty cumulatively based on the order of either polynomial or
interaction.
</p>
<p>The options that can be passed to <code>pre_proc_opts</code> are: - knnImpute (should
missing data be imputed?) - scale (should data be standardized)? - center
(should data be centered to the mean or another value?) - otherbin (should
factors with low prevalence be combined?) - none (should no preprocessing be
done? can also specify a null object)
</p>
<p>The options that can be passed to <code>extra_opts</code> are:
</p>

<ul>
<li>
<p> centers (named numeric vector which denotes where each covariate should be
centered)
</p>
</li>
<li>
<p> center_fn (alternatively, a function can be specified to calculate center
such as <code>min</code>
or <code>median</code>)
</p>
</li>
<li>
<p> freq_cut, unique_cut (see ?step_nzv; these get used by the filtering steps)
</p>
</li>
<li>
<p> neighbors (the number of neighbors for knnImpute)
</p>
</li>
<li>
<p> one_hot (see ?step_dummy), this defaults to cell-means coding which can be
done in regularized regression (change at your own risk)
</p>
</li>
<li>
<p> raw (should polynomials not be orthogonal? defaults to true because variables are
centered and scaled already by this point by default)
</p>
</li>
</ul>
<p><code>ia_formula</code> will by default interact all variables with each other up
to order k. If specified, ia_formula will be passed as the <code>terms</code> argument
to <code>recipes::step_interact</code>, so the help documentation for that function
can be investigated for further assistance in specifying specific
interactions.
</p>


<h3>Value</h3>

<p>an object of class <code>sparseR</code> containing the following:
</p>
<table>
<tr style="vertical-align: top;">
<td><code>fit</code></td>
<td>
<p>the fit object returned by <code>ncvreg</code></p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>srprep</code></td>
<td>
<p>a <code>recipes</code> object used to prep the data</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>pen_factors</code></td>
<td>
<p>the factor multiple on penalties for ranked sparsity</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>results</code></td>
<td>
<p>all coefficients and penalty factors at minimum CV lambda</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>results_summary</code></td>
<td>
<p>a tibble of summary results at minimum CV lambda</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>results1se</code></td>
<td>
<p>all coefficients and penalty factors at lambda_1se</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>results1se_summary</code></td>
<td>
<p>a tibble of summary results at lambda_1se</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>data</code></td>
<td>
<p>the (unprocessed) data</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>family</code></td>
<td>
<p>the family argument (for non-normal, eg. poisson)</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>info</code></td>
<td>
<p>a list containing meta-info about the procedure</p>
</td>
</tr>
</table>
<h3>References</h3>

<p>For fitting functionality, the <code>ncvreg</code> package is used; see
Breheny, P. and Huang, J. (2011) Coordinate descent algorithms for nonconvex
penalized regression, with applications to biological feature selection. Ann.
Appl. Statist., 5: 232-253.
</p>


</div>