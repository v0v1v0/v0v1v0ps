<div class="container">

<table style="width: 100%;"><tr>
<td>construct_DesMat</td>
<td style="text-align: right;">R Documentation</td>
</tr></table>
<h2>Construct the Design Matrix</h2>

<h3>Description</h3>

<p>Constructs the design matrix with one column for every (fixed)
parameter to be estimated and one row for every cluster for every timepoint.
This function calls 'construct_trtMat' to construct a matrix that indicates
treatment status for each cluster at each timepoint.
This is then transformed into the first
column of the design matrix. 'construct_CovMat' further calls
'construct_timeAdjust' to get the fixed effect(s) of the timepoints.
</p>
<p>Note: Unlike the usual notation, the treatment effect is in the first column
(for easier access by higher level functions).
</p>


<h3>Usage</h3>

<pre><code class="language-R">construct_DesMat(
  Cl = NULL,
  trtDelay = NULL,
  dsntype = "SWD",
  timepoints = NULL,
  timeAdjust = "factor",
  period = NULL,
  trtmatrix = NULL,
  timeBlk = NULL,
  N = NULL,
  incomplete = NULL,
  INDIV_LVL = FALSE
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr style="vertical-align: top;">
<td><code>Cl</code></td>
<td>
<p>integer (vector), number of clusters per sequence group (in SWD),
or number in control and intervention (in parallel designs)</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>trtDelay</code></td>
<td>
<p>numeric (possibly vector), 'NA'(s) and/or value(s)
between '0' and '1'. 'NA' means that first (second, ... ) period after intervention
start is not observed. A value between '0' and '1' specifies the assumed proportion of intervention effect
in the first (second ... ) intervention period.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>dsntype</code></td>
<td>
<p>character, defines the type of design. Options are "SWD",
"parallel" and "parallel_baseline", defaults to "SWD".</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>timepoints</code></td>
<td>
<p>numeric (scalar or vector), number of timepoints (periods).
If design is swd, timepoints defaults to length(Cl)+1.
Defaults to 1 for parallel designs.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>timeAdjust</code></td>
<td>
<p>character, specifies adjustment for time periods.
One of the following: "factor", "linear", "none", "periodic".
Defaults to "factor".</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>period</code></td>
<td>
<p>numeric (scalar)</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>trtmatrix</code></td>
<td>
<p>an optional user defined matrix
to define treatment allocation</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>timeBlk</code></td>
<td>
<p>an optional user defined matrix that defines
the time adjustment in one cluster.
Is repeated for every cluster.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>N</code></td>
<td>
<p>numeric, number of individuals per cluster. Either a scalar, vector
of length #Clusters or a matrix of dimension #Clusters x timepoints.
Defaults to 1 if not passed.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>incomplete</code></td>
<td>
<p>integer, either a scalar (only for SWD) or a matrix.
A vector defines the number of periods before and after the switch from
control to intervention that are observed. A matrix consists of '1's for
observed clusterperiods and '0's or 'NA' for unobserved clusterperiods.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>INDIV_LVL</code></td>
<td>
<p>logical, should the computation be conducted on an
individual level? This leads to longer run time and is
mainly for diagnostic purposes.</p>
</td>
</tr>
</table>
<h3>Value</h3>

<p>an object of class DesMat
</p>


<h3>Examples</h3>

<pre><code class="language-R">construct_DesMat(Cl=c(2,0,1))
construct_DesMat(Cl=c(2,0,1), N=c(1,3,2))

## manually defined time adjustment (same as above)
timeBlock &lt;- matrix(c(1,0,0,0,
                      1,1,0,0,
                      1,0,1,0,
                      1,0,0,1), 4, byrow=TRUE)
construct_DesMat(Cl=c(2,0,1), timeBlk=timeBlock)

</code></pre>


</div>