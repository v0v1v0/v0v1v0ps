<div class="container">

<table style="width: 100%;"><tr>
<td>dbImportOneStudy</td>
<td style="text-align: right;">R Documentation</td>
</tr></table>
<h2>Import SEND study data in SAS xport format into a SEND database from a single
study folder</h2>

<h3>Description</h3>

<p>Check each of the SAS xpt file located in the specified folder - import
content from file and load it into the corresponding SEND domain table in the
open database.
</p>


<h3>Usage</h3>

<pre><code class="language-R">dbImportOneStudy(dbToken, xptPath, overWrite = FALSE, checkRequiredVars = TRUE)
</code></pre>


<h3>Arguments</h3>

<table>
<tr style="vertical-align: top;">
<td><code>dbToken</code></td>
<td>
<p>Mandatory<br>
Token for the open database connection (see <code>initEnvironment</code>).</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>xptPath</code></td>
<td>
<p>Mandatory, character<br>
Location of the SAS xport files</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>overWrite</code></td>
<td>
<p>Mandatory, boolean<br>
Whether an already existing study in the database may be overwritten by
newly imported data.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>checkRequiredVars</code></td>
<td>
<p>Mandatory, boolean<br>
Whether not-required domains are checked for existence and content of
required variables</p>
</td>
</tr>
</table>
<h3>Details</h3>

<p>These requirements to the content of the folder must be fulfilled:
</p>

<ol>
<li>
<p> The folder must contain some SAS xport files named
<code>[send domain].xpt</code> - the case of the file names doesn't care
</p>
</li>
<li>
<p> A minimum set of required domain files must be included:
<code>ts.xpt</code>, <code>tx.xpt</code>, <code>dm.xpt</code>.
</p>
</li>
<li>
<p> Each xpt file must contain one data table with same name as the file
name - i.e. a send domain name.
</p>
</li>
<li>
<p> Each xpt file must contain a non-empty STUDYID value in each row equal
to the value of TS.STUDYID.
</p>
</li>
<li>
<p> Each xpt file must contain a set of required column(s).<br>
In general it's (where relevant for the different kinds of domains):<br><code>STUDYID, DOMAIN, --SEQ, USUBJID, --TESTCD, --TEST,--ORRES, --ORRESU,
   --STRESC, --STRESN, --STRESU</code>
</p>
</li>
<li>
<p> The DOMAIN variable must contain the name of the actual domain in
all rows
</p>
</li>
</ol>
<p>The last two requirements are checked for the required domains in all cases.
For other domains, these two requirements are only checked if parameter
<code>checkRequiredVars = TRUE</code>.<br></p>
<p>If an error is detected, the import and load of data is canceled, and further
execution is aborted (i.e. error message is written to the console).<br>
These error situations are checked and reported:
</p>

<ul>
<li>
<p> Any of the requirements 1 to 3 are not fulfilled or any of the
following requirements are not fulfilled for one of the required domains
</p>
</li>
<li>
<p> A study with the same value if STUDYID exists in the database and
parameter <code>overWrite = FALSE</code>.
</p>
</li>
</ul>
<p>If one of the requirements 4 to 6 are not fulfilled for a not-required
domain, this domain is excluded from the import. These kinds of issues are
reported as one warning message to the console when data has been loaded.<br></p>
<p>Some non-critical issues, which doesn't prohibit data to be loaded to the
database may be detected. These are reported as one warning message to the
console when data has been loaded (together with eventual warning messages
for skipped domains).<br>
These non-critical issues are checked and reported:
</p>

<ul>
<li>
<p> The study folder contains one or more xpt file(s) with names(s) not
matching SEND domain name(s).<br>
Such files are ignored by the import/load process.
</p>
</li>
<li>
<p> An imported data tables contains one or more column(s) which
do(es)n't exist(s) in the corresponding domain.
</p>
</li>
</ul>
<p>The database must be an SQLite database - no other types of databases are
supported by this function.
</p>


<h3>Value</h3>

<p>No return value, called for side effects<br></p>


<h3>Examples</h3>

<pre><code class="language-R">## Not run: 
# Do not overwrite if study already exists in the database
dbImportOneStudy(myDbToken,'/mydatapath/studies/1213443')
# Allow to overwrite data if study already exists in the database
dbImportOneStudy(myDbToken,'/mydatapath/studies/786756', overwrite = TRUE)

## End(Not run)
</code></pre>


</div>