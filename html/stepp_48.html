<div class="container">

<table style="width: 100%;"><tr>
<td>stmodelKM-class</td>
<td style="text-align: right;">R Documentation</td>
</tr></table>
<h2>Class <code>"stmodelKM"</code>
</h2>

<h3>Description</h3>

<p>This is the S4 class for the stepp model of survival data using Kaplan-Meier method.
</p>


<h3>Value</h3>

<p>The new method returns the stmodelKM object.
</p>
<p>The estimate method returns a list with the following fields:
</p>
<table>
<tr style="vertical-align: top;">
<td><code>model</code></td>
<td>
<p>the stepp model - "KMe"</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>sObs1</code></td>
<td>
<p>a vector of effect estimates of all subpopulations based on the first treatment</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>sSE1</code></td>
<td>
<p>a vector of standard errors of effect estimates of all subpopulations based on the first treatment</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>oObs1</code></td>
<td>
<p>effect estimate of the entire population based on the first treatment</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>oSE1</code></td>
<td>
<p>the standard error of the effect estimate of the entire population based on the first treatment</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>sObs2</code></td>
<td>
<p>a vector of effect estimates of all subpopulations based on the group treatment</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>sSE2</code></td>
<td>
<p>a vector of standard errors of effect estimates of all subpopulations based on the first treatment</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>oObs2</code></td>
<td>
<p>effect estimate of the entire population based on the first treatment</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>oSE2</code></td>
<td>
<p>the standard error of the effect estimate of the entire population based on the first treatment</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>skmw</code></td>
<td>
<p>Wald's statistics for the effect estimate differences between the two treatments</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>logHR</code></td>
<td>
<p>a vector of log hazard ratio estimate of the subpopulations comparing first and second treatments</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>logHRSE</code></td>
<td>
<p>a vector of standard error of the log hazard ratio estimate of the subpopulations comparing first and second treatment</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>ologHR</code></td>
<td>
<p>the log hazard ratio estimate of the entire population comparing first and second treatment</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>ologHRSE</code></td>
<td>
<p>the standard error of the log hazard ratio estimate of the entire population comparing first and second treatment</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>logHRw</code></td>
<td>
<p>Wald's statistics for the log hazard ratio between the two treatment</p>
</td>
</tr>
</table>
<p>The test method returns a list with the following fields:
</p>
<table>
<tr style="vertical-align: top;">
<td><code>model</code></td>
<td>
<p>the stepp model - "KMt"</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>sigma</code></td>
<td>
<p>the covariance matrix for subpopulations based on effect differences</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>hasigma</code></td>
<td>
<p>the homogeneous association covariance matrix for subpopulations based on effect differences</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>HRsigma</code></td>
<td>
<p>the covariance matrix for the subpopulations based on hazard ratios</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>haHRsigma</code></td>
<td>
<p>the homogeneous association covariance matrix for subpopulations based on hazard ratios</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>pvalue</code></td>
<td>
<p>the supremum pvalue based on effect difference</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>chi2pvalue</code></td>
<td>
<p>the chisquare pvalue based on effect difference</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>hapvalue</code></td>
<td>
<p>the homogeneous association pvalue based on effect difference</p>
</td>
</tr>
</table>
<h3>Objects from the Class</h3>

<p>Objects can be created by calls of the form <code>new("stmodelKM", ...)</code> or by <br>
the constructor function stmodel.KM.

</p>


<h3>Slots</h3>


<dl>
<dt>
<code>coltrt</code>:</dt>
<dd>
<p>Object of class <code>"numeric"</code> <br>
the treatment variable</p>
</dd>
<dt>
<code>survTime</code>:</dt>
<dd>
<p>Object of class <code>"numeric"</code> <br>
the time to event variable</p>
</dd>
<dt>
<code>censor</code>:</dt>
<dd>
<p>Object of class <code>"numeric"</code> <br>
the censor variable</p>
</dd>
<dt>
<code>trts</code>:</dt>
<dd>
<p>Object of class <code>"numeric"</code> <br>
a vector containing the codes for the 2 treatment groups, first and second treatment groups, respectively</p>
</dd>
<dt>
<code>timePoint</code>:</dt>
<dd>
<p>Object of class <code>"numeric"</code> <br>
timepoint to estimate survival</p>
</dd>
</dl>
<h3>Extends</h3>

<p>Class <code>"stmodel"</code>, directly.
</p>


<h3>Methods</h3>


<dl>
<dt>estimate</dt>
<dd>
<p><code>signature(.Object = "stmodelKM")</code>:  <br>
estimate the effect in absolute and relative scale of the overall population and each subpopulation.  </p>
</dd>
<dt>print</dt>
<dd>
<p><code>signature(.Object = "stmodelKM")</code>: <br>
print the estimate, covariance matrices and statistics. </p>
</dd>
<dt>test</dt>
<dd>
<p><code>signature(.Object = "stmodelKM")</code>:  <br>
perform the permutation tests or GEE and obtain various statistics. </p>
</dd>
</dl>
<h3>Author(s)</h3>

<p>Wai-Ki YIp
</p>


<h3>See Also</h3>

<p><code>stwin</code>,     <code>stsubpop</code>,  
<code>stmodelCI</code>, <code>stmodelGLM</code>, 
<code>steppes</code>,   <code>stmodel</code>, 
<code>stepp.win</code>,        <code>stepp.subpop</code>,     <code>stepp.KM</code>,
<code>stepp.CI</code>,         <code>stepp.GLM</code>,
<code>stepp.test</code>,       <code>estimate</code>,         <code>generate</code>
</p>


<h3>Examples</h3>

<pre><code class="language-R">showClass("stmodelKM")

#GENERATE TREATMENT VARIABLE:
N &lt;- 1000
Txassign &lt;- sample(c(1,2), N, replace=TRUE, prob=c(1/2, 1/2))
n1 &lt;- length(Txassign[Txassign==1])
n2 &lt;- N - n1
#GENERATE A COVARIATE:
covariate &lt;- rnorm(N, 55, 7)
#GENERATE SURVIVAL AND CENSORING VARIABLES ASSUMING A TREATMENT COVARIATE INTERACTION:
Entry &lt;- sort( runif(N, 0, 5) )
SurvT1 &lt;- .5
beta0 &lt;-  -65 / 75
beta1 &lt;- 2 / 75
Surv &lt;- rep(0, N)
lambda1 &lt;- -log(SurvT1) / 4
Surv[Txassign==1] &lt;- rexp(n1, lambda1)
Surv[Txassign==2] &lt;- rexp(n2, (lambda1*(beta0+beta1*covariate[Txassign==2])))
EventTimes &lt;- rep(0, N)
EventTimes &lt;- Entry + Surv
censor &lt;- rep(0, N)
time &lt;- rep(0,N)
for ( i in 1:N )
   {
     censor[i] &lt;- ifelse( EventTimes[i] &lt;= 7, 1, 0 )
     time[i] &lt;- ifelse( EventTimes[i] &lt; 7, Surv[i], 7 - Entry[i] ) 
   }

modKM &lt;- new("stmodelKM", coltrt=Txassign, survTime=time, censor=censor, trts=c(1,2), timePoint=4)

</code></pre>


</div>