<div class="container">

<table style="width: 100%;"><tr>
<td>comprSensitivity</td>
<td style="text-align: right;">R Documentation</td>
</tr></table>
<h2>
Sensitivity analysis of treatment effect to unmeasured confounding with competing risks outcomes.
</h2>

<h3>Description</h3>

<p><code>comprSensitivity</code> performs a dual-parameter sensitivity analysis of treatment effect to unmeasured confounding in observational studies with competing risks outcomes.
</p>


<h3>Usage</h3>

<pre><code class="language-R">comprSensitivity(t, d, Z, X, method, zetaT = seq(-2,2,by=0.5),
zetat2 = 0, zetaZ = seq(-2,2,by=0.5), theta = 0.5, B = 50, Bem = 200)
</code></pre>


<h3>Arguments</h3>

<table>
<tr style="vertical-align: top;">
<td><code>t</code></td>
<td>
<p>survival outcomes with competing risks.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>d</code></td>
<td>
<p>indicator of occurrence of event, with <code>d == 0</code> denotes right censoring, <code>d==1</code> denotes event of interest, <code>d==2</code> denotes competing risk.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>Z</code></td>
<td>
<p>indicator of treatment.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>X</code></td>
<td>
<p>pre-treatment covariates that will be included in the model as measured confounders.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>method</code></td>
<td>
<p>needs to be one of <code>"stoEM_reg"</code>, <code>"stoEM_IPW"</code> and <code>"EM_reg"</code>.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>zetaT</code></td>
<td>
<p>range of coefficient of <code class="reqn">U</code> in the event of interest response model.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>zetat2</code></td>
<td>
<p>value of coefficient of <code class="reqn">U</code> in the competing risk response model</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>zetaZ</code></td>
<td>
<p>range of coefficient of <code class="reqn">U</code> in the treatment model.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>theta</code></td>
<td>
<p>marginal probability of <code class="reqn">U=1</code>.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>B</code></td>
<td>
<p>iteration in the stochastic EM algorithm.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>Bem</code></td>
<td>
<p>iteration used to estimate the variance-covariance matrix in the EM algorithm.</p>
</td>
</tr>
</table>
<h3>Details</h3>

<p>This function performs a dual-parameter sensitivity analysis of treatment effect to unmeasured confounding by either drawing simulated potential confounders <code class="reqn">U</code> from the conditional distribution of <code class="reqn">U</code> given observed response, treatment and covariates or the Expectation-Maximization algorithm. We assume <code class="reqn">U</code> is following <code class="reqn">Bernoulli(\pi)</code> (default 0.5). Given <code class="reqn">Z</code>, <code class="reqn">X</code> and <code class="reqn">U</code>, the hazard rate of the jth type of failure is modeled using the Cox proportional hazards (PH) regression:
</p>
<p style="text-align: center;"><code class="reqn">\lambda_j (t | Z, X, U) = \lambda_{j0} (t) exp( \tau_j Z + X' \beta_j + \zeta_j U).</code>
</p>

<p>Given <code class="reqn">X</code> and <code class="reqn">U</code>, <code class="reqn">Z</code> follows a generalized linear model:
</p>
<p style="text-align: center;"><code class="reqn">P(Z=1 | X, U) = \Phi(X' \beta_z + \zeta_z U).</code>
</p>



<h3>Value</h3>

<table>
<tr style="vertical-align: top;">
<td><code>tau1</code></td>
<td>
<p>a data.frame with zetaz, zetat1, zetat2, tau1, tau1.se and t statistic in the event of interest response model.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>tau2</code></td>
<td>
<p>a data.frame with zetaz, zetat, zetat2, tau2, tau2.se and t statistic in the competing risks response model.</p>
</td>
</tr>
</table>
<h3>Author(s)</h3>

<p>Rong Huang
</p>


<h3>References</h3>

<p>Huang, R., Xu, R., &amp; Dulai, P. S. (2019). Sensitivity Analysis of Treatment Effect to Unmeasured Confounding in Observational Studies with Survival and Competing Risks Outcomes. arXiv preprint arXiv:1908.01444.
</p>


<h3>Examples</h3>

<pre><code class="language-R">#load the dataset included in the package
data(comprdata)
#stochastic EM with regression
tau.sto = comprSensitivity(comprdata$t, comprdata$d, comprdata$Z, comprdata$X,
"stoEM_reg", zetaT = 0.5, zetaZ = 0.5, B = 3)

#EM with regression
tau.em = comprSensitivity(comprdata$t, comprdata$d, comprdata$Z, comprdata$X,
"EM_reg", zetaT = 0.5, zetaZ = 0.5, Bem = 50)
</code></pre>


</div>