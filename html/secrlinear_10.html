<div class="container">

<table style="width: 100%;"><tr>
<td>utility</td>
<td style="text-align: right;">R Documentation</td>
</tr></table>
<h2> Utility Functions </h2>

<h3>Description</h3>

<p>Utilities for various functions
</p>
<p>– conversion of a flat table of coordinates for a line or set of
lines to a SpatialLinesDataFrame object
</p>
<p>– snapping points from objects of various types (traps, popn, matrix
etc.) to a linearmask object.
</p>
<p>– converting distances along a linear mask to x-y coordinates
</p>
<p>– build igraph network from linearmask object
</p>


<h3>Usage</h3>

<pre><code class="language-R">
make.sldf(coord, f)

snapPointsToLinearMask(xy, mask)

asgraph(mask)

getLineID(mask, laboffset = rep(spacing(mask) * 3, 2), ...)

branched(mask)

</code></pre>


<h3>Arguments</h3>

<table>
<tr style="vertical-align: top;">
<td><code>coord</code></td>
<td>
<p> dataframe of coordinates - must include columns 'x','y'</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>f</code></td>
<td>
<p>vector of values by which to split coord rows</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>xy</code></td>
<td>
<p>any object that may be coerced to a 2-column matrix (columns
interpreted as x- and y-coordinates)</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>mask</code></td>
<td>
<p>‘linearmask’ object</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>laboffset</code></td>
<td>
<p>offset of label from point</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>...</code></td>
<td>
<p> other arguments passed to <code>plot.linearmask</code> </p>
</td>
</tr>
</table>
<h3>Details</h3>

<p>In <code>make.sldf</code>, if <code>f</code> is missing and there is a column ‘lineID’ in ‘coord’ then this
will be used instead.
</p>
<p><code>snapPointsToLinearMask</code> shifts each point in the input to the
nearest point on the graph stored as the ‘graph’ attribute of <code>mask</code>.
</p>
<p><code>make.line</code> creates a ‘traps’ object with equally spaced or clustered 
detectors.
</p>
<p><code>asgraph</code> is a utility function used internally for expressing the
points in <code>mask</code> as an igraph network (Csardi and Nepusz 2006). 
</p>
<p><code>getLineID</code> plots the mask and for each mouse click displays the
corresponding point and LineID.
</p>
<p>Other utilities specific to editing graphs are documented in edges.
</p>


<h3>Value</h3>

<p>For <code>make.sldf</code>, a SpatialLinesDataFrame.
</p>
<p>For <code>snapPointsToLinearMask</code>, the output has the same attributes (including class) as
the <code>xy</code> input: only the coordinates themselves may change.
</p>
<p>For <code>alongmask</code>, a 2-column dataframe with the x and y
coordinates of the points.
</p>
<p>For <code>asgraph</code>, an object of class ‘igraph’
</p>
<p><code>getLineID</code> invisibly returns a dataframe with columns 'Point'
and 'LineID'.
</p>
<p>For <code>branched</code>, a logical value indicating whether the degree of any node exceeds 2.
</p>


<h3>References</h3>

<p>Csardi, G. and Nepusz, T. (2006) The igraph software package for complex network
research, InterJournal, Complex Systems 1695. <a href="https://igraph.org/">https://igraph.org/</a>.
</p>


<h3>See Also</h3>

<p><code>checkmoves</code>
<code>make.line</code>, <code>networkdistance</code>,
<code>SpatialLinesDataFrame</code>,
<code>showedges</code>, <code>deleteedges</code>, <code>addedges</code>
</p>


<h3>Examples</h3>

<pre><code class="language-R">
## test make.sldf()

coord &lt;- data.frame(x = c(1,2,3,1.05,2.05,3.05),
    y = c(3,2,2,3.05,2.05,2.05))

sldf1 &lt;- make.sldf(coord)
sldf2 &lt;- make.sldf(coord, f = c(1,1,1,2,2,2))

if (require('sp')) {
  plot(sldf1)
  plot(sldf2)
}

## test snapPointsToLinearMask()

## Not run: 

x &lt;- seq(0, 4*pi, length = 200)
xy &lt;- data.frame(x = x*100, y = sin(x)*300)
mask &lt;- read.linearmask(data = xy, spacing = 20)
plot(mask)
## click several points, right-click and select 'stop'
pts &lt;- locator()
pts &lt;- do.call(cbind, pts)
points(pts)
pts1 &lt;- snapPointsToLinearMask(pts, mask)
segments(pts[,1], pts[,2], pts1[,1], pts1[,2])
points(pts1, pch = 16, col = 'red')
df &lt;- data.frame(pts, pts1)
names(df) &lt;- c('from.x', 'from.y', 'to.x', 'to.y')
df


## End(Not run)

## asgraph (called by networkdistance)
## see 'igraph' for further manipulation
grmask &lt;- asgraph(glymemask)
if (require('igraph')) {
  summary(grmask)
}

</code></pre>


</div>