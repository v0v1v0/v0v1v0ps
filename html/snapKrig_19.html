<div class="container">

<table style="width: 100%;"><tr>
<td>sk_coords</td>
<td style="text-align: right;">R Documentation</td>
</tr></table>
<h2>Return coordinates of a grid of points in column-vectorized order</h2>

<h3>Description</h3>

<p>Expands a set of y and x grid line numbers in the column-vectorized order returned
by <code>sk</code>. This is similar to <code>base::expand.grid</code> but with the first dimension (y)
descending instead of ascending.
</p>


<h3>Usage</h3>

<pre><code class="language-R">sk_coords(g, out = "matrix", corner = FALSE, na_omit = FALSE, quiet = FALSE)
</code></pre>


<h3>Arguments</h3>

<table>
<tr style="vertical-align: top;">
<td><code>g</code></td>
<td>
<p>any object accepted by <code>sk</code></p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>out</code></td>
<td>
<p>character indicating return value type, either 'list', 'matrix', or 'sf'</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>corner</code></td>
<td>
<p>logical, indicates to return only the four corner points</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>na_omit</code></td>
<td>
<p>logical, indicates to return only locations of observed points</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>quiet</code></td>
<td>
<p>logical, suppresses console output</p>
</td>
</tr>
</table>
<h3>Details</h3>

<p><code>out='sf'</code> returns an <code>sf</code> simple features object containing points in the same order,
with data (if any) copied from <code>g[['gval']]</code> into column 'gval'. Note that <code>length(g)</code>
points are created, which can be slow for large grids.
</p>
<p>If <code>na_omit</code> is <code>TRUE</code> the function omits points with <code>NA</code> data (in <code>gval</code>) and only
returns the coordinates for observations. This argument is ignored when <code>corners=TRUE</code>
(which always returns the four corner points) or when the grid contains no observations
(all points returned).
</p>


<h3>Value</h3>

<p>a matrix, list, or sf point collection in column vectorized order
</p>


<h3>See Also</h3>

<p>sk sk_snap base::expand.grid
</p>
<p>Other exporting functions: 
<code>sk_export()</code>
</p>


<h3>Examples</h3>

<pre><code class="language-R">gdim = c(5,3)
g_complete = sk(gdim=gdim, gres=c(0.5, 0.7), gval=seq(prod(gdim)))
sk_coords(g_complete)
sk_coords(g_complete, out='list')

# missing data example
idx_obs =  sort(sample.int(length(g_complete), 5))
g = sk(gdim=gdim, gres=c(0.5, 0.7))
g[idx_obs] = g_complete[idx_obs]
all.equal(sk_coords(g, na_omit=TRUE), sk_coords(g_complete)[idx_obs,])

# corner points
sk_coords(g, corner=TRUE)
sk_coords(g, corner=TRUE, out='list')

# repeat with multi-layer example
g_multi = sk(utils::modifyList(g, list(gval = cbind(g[], 2*g[]))))
all.equal(sk_coords(g_multi, na_omit=TRUE), sk_coords(g_complete)[idx_obs,])
sk_coords(g_multi, corner=TRUE)

# sf output type
if( requireNamespace('sf') ) {

# gather all points but don't copy data
sf_coords_all = sk_coords(sk(g, vals=FALSE), out='sf')

# extract non-NA data
sf_coords = sk_coords(g, out='sf', na_omit=TRUE)

# plot everything together
plot(g, reset=FALSE)
plot(sf_coords_all, add=TRUE)
plot(sf_coords, pch=16, cex=2, add=TRUE)

}

</code></pre>


</div>