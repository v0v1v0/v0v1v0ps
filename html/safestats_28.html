<div class="container">

<table style="width: 100%;"><tr>
<td>designSafeLogrank</td>
<td style="text-align: right;">R Documentation</td>
</tr></table>
<h2>Designs a Safe Logrank Test Experiment</h2>

<h3>Description</h3>

<p>A designed experiment requires (1) an anticipated number of events nEvents, or even better nPlan, the number of
participants to be recruited in the study, and (2) the parameter of the safe test, i.e., thetaS. Provided with a
clinically relevant minimal hazard ratio hrMin, this function outputs thetaS = hrMin as the safe test defining
parameter in accordance to the GROW criterion. If a tolerable type II error beta is provided then nEvents can be
sampled. The sampled nEvents is then the smallest nEvents for which hrMin is found with power of at least 1 - beta
under optional stopping. If exact equal <code>FALSE</code>, then the computations exploit the local asymptotic normal
approximation to sampling distribution of the logrank test derived by Schoenfeld (1981).
</p>


<h3>Usage</h3>

<pre><code class="language-R">designSafeLogrank(
  hrMin = NULL,
  beta = NULL,
  nEvents = NULL,
  h0 = 1,
  alternative = c("twoSided", "greater", "less"),
  alpha = 0.05,
  ratio = 1,
  exact = TRUE,
  tol = 1e-05,
  m0 = 50000L,
  m1 = 50000L,
  nSim = 1000L,
  nBoot = 10000L,
  parameter = NULL,
  groupSizePerTimeFunction = returnOne,
  pb = TRUE,
  ...
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr style="vertical-align: top;">
<td><code>hrMin</code></td>
<td>
<p>numeric that defines the minimal relevant hazard ratio, the smallest hazard ratio that we want to
detect.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>beta</code></td>
<td>
<p>numeric in (0, 1) that specifies the tolerable type II error control necessary to calculate both "n"
and "phiS". Note that 1-beta defines the power.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>nEvents</code></td>
<td>
<p>numeric &gt; 0, targetted number of events.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>h0</code></td>
<td>
<p>numeric &gt; 0, represents the null hypothesis, default h0=1.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>alternative</code></td>
<td>
<p>a character string specifying the alternative hypothesis, which must be one of
"twoSided" (default),"greater" or "less". The alternative is pitted against the null hypothesis of equality
of the survival distributions. More specifically, let lambda1 be the hazard rate of group 1 (i.e., placebo), and
lambda2 the hazard ratio of group 2 (i.e., treatment), then the null hypothesis states that the hazard ratio
theta = lambda2/lambda1 = 1. If alternative = "less", the null hypothesis is compared to theta &lt; 1, thus,
lambda2 &lt; lambda1, that is, the hazard of group 2 (i.e., treatment) is less than that of group 1 (i.e., placebo),
hence, the treatment is beneficial. If alternative = "greater", then the null hypothesis is compared to theta &gt; 1,
thus, lambda2 &gt; lambda1, hence, harm.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>alpha</code></td>
<td>
<p>numeric in (0, 1) that specifies the tolerable type I error control –independent on n– that the
designed test has to adhere to. Note that it also defines the rejection rule e10 &gt; 1/alpha.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>ratio</code></td>
<td>
<p>numeric &gt; 0 representing the randomisation ratio of condition 2 (Treatment) over condition 1 (Placebo),
thus, m1/m0. Note that m1 and m0 are not used to specify ratio. Ratio is only used when <code>zApprox=TRUE</code>, which
ignores m1 and m0.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>exact</code></td>
<td>
<p>a logical indicating whether the design should be based on the exact safe logrank test based on the
hypergeometric likelihood. Default is <code>TRUE</code>, if <code>FALSE</code> then the design is based on a  safe z-test.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>tol</code></td>
<td>
<p>a number that defines the stepsizes between the lowParam and highParam.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>m0</code></td>
<td>
<p>Number of subjects in the control group 0/1 at the beginning of the trial, i.e., nPlan[1].</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>m1</code></td>
<td>
<p>Number of subjects in the treatment group 1/2 at the beginning of the trial, i.e., nPlan[2].</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>nSim</code></td>
<td>
<p>integer &gt; 0, the number of simulations needed to compute power or the number of events for the exact
safe logrank test under continuous monitoring</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>nBoot</code></td>
<td>
<p>integer &gt; 0 representing the number of bootstrap samples to assess the accuracy of the approximation of
power or nEvents for the exact safe logrank test under continuous monitoring</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>parameter</code></td>
<td>
<p>Numeric &gt; 0, represents the safe tests defining thetaS. Default NULL so it's decided by the
algorithm, typically, this equals hrMin, which corresponds to the GROW choice.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>groupSizePerTimeFunction</code></td>
<td>
<p>A function without parameters and integer output. This function provides the number
of events at each time step. For instance, if <code>rpois(1, 7)</code> leads to a random number of events at each time
step.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>pb</code></td>
<td>
<p>logical, if <code>TRUE</code>, then show progress bar.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>...</code></td>
<td>
<p>further arguments to be passed to or from methods.</p>
</td>
</tr>
</table>
<h3>Value</h3>

<p>Returns a safeDesign object that includes:
</p>

<dl>
<dt>nEvents</dt>
<dd>
<p>the anticipated number of events, either (1) specified by the user, or
(2) computed based on beta and thetaMin.</p>
</dd>
<dt>parameter</dt>
<dd>
<p>the parameter that defines the safe test. Here log(thetaS).</p>
</dd>
<dt>esMin</dt>
<dd>
<p>the minimally clinically relevant hazard ratio specified by the user.</p>
</dd>
<dt>alpha</dt>
<dd>
<p>the tolerable type I error provided by the user.</p>
</dd>
<dt>beta</dt>
<dd>
<p>the tolerable type II error provided by the user.</p>
</dd>
<dt>alternative</dt>
<dd>
<p>any of "twoSided", "greater", "less" provided by the user.</p>
</dd>
<dt>testType</dt>
<dd>
<p>"logrank".</p>
</dd>
<dt>ratio</dt>
<dd>
<p>default is 1. It defines the ratio between the planned randomisation of
condition 2 over condition 1.</p>
</dd>
<dt>pilot</dt>
<dd>
<p><code>FALSE</code> to indicate that the design is not a pilot study.</p>
</dd>
<dt>call</dt>
<dd>
<p>the expression with which this function is called.</p>
</dd>
</dl>
<h3>References</h3>

<p>Schoenfeld, D. (1981). The asymptotic properties of nonparametric tests
for comparing survival distributions. Biometrika, 68(1), 316-319.
</p>


<h3>Examples</h3>

<pre><code class="language-R">designSafeLogrank(hrMin=0.7)
designSafeLogrank(hrMin=0.7, zApprox=TRUE)
designSafeLogrank(hrMin=0.7, beta=0.3, nSim=10)
designSafeLogrank(hrMin=0.7, nEvents=190, nSim=10)
</code></pre>


</div>