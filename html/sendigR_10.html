<div class="container">

<table style="width: 100%;"><tr>
<td>getControlSubj</td>
<td style="text-align: right;">R Documentation</td>
</tr></table>
<h2>Extract a list of control animals for a list of studies</h2>

<h3>Description</h3>

<p>Returns a data table with a list of animals belonging to the groups for
negative control in the given list of studies.<br></p>


<h3>Usage</h3>

<pre><code class="language-R">getControlSubj(dbToken, studyList, inclUncertain = FALSE)
</code></pre>


<h3>Arguments</h3>

<table>
<tr style="vertical-align: top;">
<td><code>dbToken</code></td>
<td>
<p>Mandatory.<br>
Token for the open database connection (see <code>initEnvironment</code>).</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>studyList</code></td>
<td>
<p>Mandatory, data.table.<br>
A table with a list of studies to limit the output to be within this
set of studies.<br>
The table must include a column named 'STUDYID'.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>inclUncertain</code></td>
<td>
<p>Mandatory, boolean.<br>
Indicates whether animals, which cannot be identified as neither negative
nor positive control (i.e. uncertain animals), shall be included or not in
the output data table.</p>
</td>
</tr>
</table>
<h3>Details</h3>

<p>The set of animals contains all animals from DM where the SETCD
is associated with a TX parameter 'TCNTRL'. Negative control animals are
further defined by
</p>

<ul>
<li>
<p>  either containing a word from a set of words, to
automatically distinguish it as a negative control:
</p>

<ul><li>
<p> ['placebo', 'untreated', 'sham']
</p>
</li></ul>
</li>
<li>
<p> or containing a combination of a word  from of two lists:
</p>

<ol>
<li>
<p> ['negative', 'saline', 'peg', 'vehicle', 'citrate', 'dextrose', 'water', 'air']
</p>
</li>
<li>
<p> ['item', 'control', 'article']
</p>
</li>
</ol>
</li>
</ul>
<p>Animals are in all cases excluded (i.e. whether <code>inclUncertain=TRUE</code> or
<code>inclUncertain=FALSE</code>) from the output set, when they are identified as
positive control animals - i.e. they are associated with a TX parameter
'TCNTRL' containing a word from this set of words:
</p>

<ul><li>
<p> ['positive','reference']
</p>
</li></ul>
<p>The age in days at reference start date is calculated for each animal based
on the age related variables in DM:
</p>

<ol>
<li>
<p> If BRTHDTC is populated compute DM.RFSTDTC â€“ DM.BRTHDTC + 1
</p>
</li>
<li>
<p> Else If AGE is populated convert from units specified in AGEU to days.
</p>
</li>
<li>
<p> Else If AGETXT is populated convert the mid-point of the range from
units specified in AGEU to days.<br>
These AGEU units are handled with the described conversion from value to
number of days:
</p>

<ul>
<li>
<p> DAYS
</p>
</li>
<li>
<p> WEEKS   : value * 7
</p>
</li>
<li>
<p> MONTHS  : value * 365/12
</p>
</li>
<li>
<p> YEARS   : value * 365
</p>
</li>
</ul>
</li>
</ol>
<p>If input parameter <code>inclUncertain=TRUE</code>, uncertain animals are included
in the output set. These uncertain situations are identified and reported (in
column UNCERTAIN_MSG):
</p>

<ul>
<li>
<p> TX parameter 'TCNTRL' is missing
</p>
</li>
<li>
<p> TXVAL for TX parameter 'TCNTRL' cannot be identified as Negative or
Positive control according to the algorithm described above
</p>
</li>
</ul>
<h3>Value</h3>

<p>The function return a data.table with columns:
</p>

<ul>
<li>
<p> STUDYID       (character)
</p>
</li>
<li>
<p> Additional columns contained in the <code>studyList</code> table
</p>
</li>
<li>
<p> TCNTRL        (character)<br>
The value of the TX parameter TCNTRL which is used for identification
of whether it is a negative control group or not
</p>
</li>
<li>
<p> USUBJID       (character)
</p>
</li>
<li>
<p> RFSTDTC       (character)
</p>
</li>
<li>
<p> DM_AGEDAYS    (integer)<br>
The calculated age in days of the animal at the reference start day
- i.e. the age registered in DM.
</p>
</li>
<li>
<p> DSDECOD    (character)<br>
The standardized disposition term for the animal
</p>
</li>
<li>
<p> DS_AGEDAYS    (integer)<br>
The calculated age in days of the animal at the disposition
</p>
</li>
<li>
<p> NO_AGE_MSG    (character)<br>
Empty or contains the reason if a DM_AGEDAYS couldn't be calculated
</p>
</li>
<li>
<p> UNCERTAIN_MSG (character)<br>
Included when parameter <code>inclUncertain=TRUE</code>.<br>
Contains the reason for an uncertain animal is NA for rows for
confident identified negative control animals.
</p>
</li>
<li>
<p> NOT_VALID_MSG (character)<br>
Included if the column is included in data table specified in
<code>studyList</code>,
</p>
</li>
</ul>
<h3>Examples</h3>

<pre><code class="language-R">## Not run: 
controlAnimals &lt;- getControlSubj(myDbToken, allSTudies)

## End(Not run)
</code></pre>


</div>