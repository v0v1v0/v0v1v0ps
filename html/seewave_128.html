<div class="container">

<table style="width: 100%;"><tr>
<td>scd</td>
<td style="text-align: right;">R Documentation</td>
</tr></table>
<h2>Soundcape chord diagram</h2>

<h3>Description</h3>

<p>Computes and displays a chord diagram of a set of audio
files or of a set segments extracted from a single audio file.</p>


<h3>Usage</h3>

<pre><code class="language-R">scd(input, f,  sl, wl = 512, wn = "hanning", ovlp = 0, flim = NULL,
rmoffset = TRUE, threshold = NULL, HCA = TRUE,
grid.col = terrain.colors, names, plot = TRUE, verbose = TRUE, ...)
</code></pre>


<h3>Arguments</h3>

<table>
<tr style="vertical-align: top;">
<td><code>input</code></td>
<td>
<p>a character vector, either (i) the path to the directory where
.wav files are stored, (ii) directly the names of the .wav files to be
processed, or (iii) a single .wav file to be segmented by the
duration set with the argument <code>sl</code>.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>f</code></td>
<td>
<p>sampling frequency of <code>wave</code> (in Hz). Does not need to
be specified if embedded in the .wav files contained in <code>input</code>.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>sl</code></td>
<td>
<p>segment length in duration if <code>input</code> is a single file.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>wl</code></td>
<td>
<p>window length for the analysis spectral
(even number of points) (by default = 512).</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>wn</code></td>
<td>
<p>window name for the spectral analysis, see
<code>ftwindow</code> (by default <code>"hanning"</code>).</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>ovlp</code></td>
<td>
<p>overlap between two successive windows (in %) for the
spectral analysis.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>flim</code></td>
<td>
<p>a numeric vector of length 2 to select a frequency band
(in kHz).</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>rmoffset</code></td>
<td>
<p>a logical to sepcify whether DC offset should be
removed. By default <code>TRUE</code>.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>threshold</code></td>
<td>
<p>a numeric value in ]0,1[ to be applied to the
similarity distance. All similairty distances below this threshold
will not depicted.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>HCA</code></td>
<td>
<p>logical, if <code>TRUE</code> the sectors are colored according
to clusters automatically obtained with a hierarchical cluster analysis (HCA).</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>grid.col</code></td>
<td>
<p>name of color palette to color the sectors and
the links). By default <code>terrain.colors</code>.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>names</code></td>
<td>
<p>names of the sectors, if empty then the names of the .wav
files or the time stamps of the segments.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>plot</code></td>
<td>
<p>logical, if <code>TRUE</code> plots the chord diagram.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>verbose</code></td>
<td>
<p>logical, if <code>TRUE</code> prints the computation progress
of the mean spectra.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>...</code></td>
<td>
<p>other <code>chordDiagram</code> parameters.</p>
</td>
</tr>
</table>
<h3>Details</h3>

<p>The soundscape chord diagram (SCD) aims at representing similarities
between audio files or audio segments extracted from a single audio file. The
mean frequency spectrum of each file/segment is computed using a
STFT. These frequency spectra are then (1) pairwised compared using a
similarity distance (see function <code>diffcumspec</code>, and (2)
automatically clustered with a hierarchical cluster analysis (HCA) (see function
<code>HCPC</code> of <code>FactoMiner</code>). The
resulting similarity matrix is then given as an input to the function
<code>chordDiagram</code>. The width of the sectors and the links are
based on the spectral similarity matrix. The color of the sectors and the links
follow the HCA classification.
</p>


<h3>Value</h3>

<p>THe function returns a list of two items:
</p>
<table>
<tr style="vertical-align: top;">
<td><code>m</code></td>
<td>
<p>spectral similarity matrix</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>resHCA</code></td>
<td>
<p>the classification result of the HCA, if <code>HCA</code> is <code>TRUE</code></p>
</td>
</tr>
</table>
<h3>Note</h3>

<p>The function call the function <code>HCPC</code> of the package
<code>FactoMineR</code> and the function <code>chordDiagram</code> of the
package <code>circlize</code>.
</p>


<h3>Author(s)</h3>

<p>Adèle de Baudouin, Jérôme Sueur</p>


<h3>References</h3>

<p>de Baudouin, A, Couprie P, Michaud F, Haupert S, Sueur J –
Similarity visualization of nature and music soundscapes, in prep.</p>


<h3>See Also</h3>

<p><code>diffcumspec</code></p>


<h3>Examples</h3>

<pre><code class="language-R">## Not run: 
## 1 ##
# if 'dir' contains a set of files recorded with a Wildlife Acoustics
# songmeter recorder or an Audiomoth  then a direct way to obtain
# the soundscape chord diagram (SCD)  of all .wav files is
dir &lt;- "pathway-to-directory-containing-wav-files"
scd(dir)
# to change the STFT parameters used to obtain each mean spectrum
lts(dir, wl=1024, wn="hamming", ovlp=50)
# to select only high similarities, here above 0.6
scd(dir, threshold=0.6)
# to change the colors
scd(dir, grid.col=colorRampPalette(c("darkblue", "yellow", "grey")))
# to name manually the sectors
scd(dir, names=as.character(0:23))
# to name automatically the sectors from the name of songmeter files
# here according to hour of recording 
scd(dir, names=as.character(songmeter(files)$hour))  

## 2 ##
# to directly use files names stored in the working directory
files &lt;- c("S4A09154_20190213_150000.wav", "S4A09154_20190213_153000.wav",
"S4A09154_20190213_160000.wav", "S4A09154_20190213_163000.wav",
"S4A09154_20190213_170000.wav", "S4A09154_20190213_173000.wav",
"S4A09154_20190213_180000.wav", "S4A09154_20190213_183000.wav",
"S4A09154_20190213_190000.wav", "S4A09154_20190213_193000.wav")
scd(files)

## 3 ##
# to  use of single files which is segmented in successive time segments
# lasting each 60 s
file &lt;- "a-very-nice-soundscape.wav")
scd(file, sl = 60)

## End(Not run)

</code></pre>


</div>