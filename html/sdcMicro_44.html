<div class="container">

<table style="width: 100%;"><tr>
<td>microaggrGower</td>
<td style="text-align: right;">R Documentation</td>
</tr></table>
<h2>Microaggregation for numerical and categorical key variables based on a
distance similar to the Gower Distance</h2>

<h3>Description</h3>

<p>The microaggregation is based on the distances computed similar to the Gower
distance. The distance function makes distinction between the variable types
factor,ordered,numerical and mixed (semi-continuous variables with a fixed
probability mass at a constant value e.g. 0)
</p>


<h3>Usage</h3>

<pre><code class="language-R">microaggrGower(
  obj,
  variables = NULL,
  aggr = 3,
  dist_var = NULL,
  by = NULL,
  mixed = NULL,
  mixed.constant = NULL,
  trace = FALSE,
  weights = NULL,
  numFun = mean,
  catFun = VIM::sampleCat,
  addRandom = FALSE
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr style="vertical-align: top;">
<td><code>obj</code></td>
<td>
<p><code>sdcMicroObj-class</code>-object or a <code>data.frame</code></p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>variables</code></td>
<td>
<p>character vector with names of variables to be aggregated
(Default for sdcMicroObj is all keyVariables and all numeric key variables)</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>aggr</code></td>
<td>
<p>aggregation level (default=3)</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>dist_var</code></td>
<td>
<p>character vector with variable names for distance
computation</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>by</code></td>
<td>
<p>character vector with variable names to split the dataset before
performing microaggregation (Default for sdcMicroObj is strataVar)</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>mixed</code></td>
<td>
<p>character vector with names of mixed variables</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>mixed.constant</code></td>
<td>
<p>numeric vector with length equal to mixed, where the
mixed variables have the probability mass</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>trace</code></td>
<td>
<p>TRUE/FALSE for some console output</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>weights</code></td>
<td>
<p>numerical vector with length equal the number of variables
for distance computation</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>numFun</code></td>
<td>
<p>function: to be used to aggregated numerical variables</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>catFun</code></td>
<td>
<p>function: to be used to aggregated categorical variables</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>addRandom</code></td>
<td>
<p>TRUE/FALSE if a random value should be added for the
distance computation.</p>
</td>
</tr>
</table>
<h3>Details</h3>

<p>The function sampleCat samples with probabilities corresponding to the
occurrence of the level in the NNs. The function maxCat chooses the level
with the most occurrences and random if the maximum is not unique.
</p>


<h3>Value</h3>

<p>The function returns the updated sdcMicroObj or simply an altered
data frame.
</p>


<h3>Note</h3>

<p>In each by group all distance are computed, therefore introducing more
by-groups significantly decreases the computation time and memory
consumption.
</p>


<h3>Author(s)</h3>

<p>Alexander Kowarik
</p>


<h3>See Also</h3>

<p><code>sampleCat</code> and <code>maxCat</code>
</p>


<h3>Examples</h3>

<pre><code class="language-R">
data(testdata,package="sdcMicro")
testdata &lt;- testdata[1:200,]

for(i in c(1:7,9)) testdata[,i] &lt;- as.factor(testdata[,i])
test &lt;- microaggrGower(testdata,variables=c("relat","age","expend"),
  dist_var=c("age","sex","income","savings"),by=c("urbrur","roof"))

sdc &lt;- createSdcObj(testdata,
  keyVars=c('urbrur','roof','walls','water','electcon','relat','sex'),
  numVars=c('expend','income','savings'), w='sampling_weight')

sdc &lt;- microaggrGower(sdc)

</code></pre>


</div>