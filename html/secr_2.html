<div class="container">

<table style="width: 100%;"><tr>
<td>addCovariates</td>
<td style="text-align: right;">R Documentation</td>
</tr></table>
<h2>
Add Covariates to Mask or Traps
</h2>

<h3>Description</h3>

<p>Tools to construct spatial covariates for existing mask or traps objects
from a spatial data source.  
</p>


<h3>Usage</h3>

<pre><code class="language-R">
addCovariates(object, spatialdata, columns = NULL, strict = FALSE, replace = FALSE)

</code></pre>


<h3>Arguments</h3>

<table>
<tr style="vertical-align: top;">
<td><code>object</code></td>
<td>
<p>mask, traps or popn object</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>spatialdata</code></td>
<td>
<p>spatial data source (see Details)</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>columns</code></td>
<td>
<p>character vector naming columns to include (all by default)</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>strict</code></td>
<td>
<p>logical; if TRUE a check is performed for points in <code>object</code> that
lie outside <code>spatialdata</code> (mask data sources only)</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>replace</code></td>
<td>
<p>logical; if TRUE then covariates with duplicate names are replaced; otherwise a new column is added</p>
</td>
</tr>
</table>
<h3>Details</h3>

<p>The goal is to obtain the value(s) of one or more spatial covariates
for each point (i.e. row) in <code>object</code>. The procedure depends on
the data source <code>spatialdata</code>, which may be either a spatial
coverage (raster or polygon) or an object with covariate values at
points (another mask or traps object). In the first case, an
overlay operation is performed to find the pixel or
polygon matching each point. In the second case, a search is conducted
for the closest point in <code>spatialdata</code>.
</p>
<p>If <code>spatialdata</code> is a character value then it is interpreted as
the name of a polygon shape file (excluding ‘.shp’).
</p>
<p>If <code>spatialdata</code> is a SpatialPolygonsDataFrame, 
SpatialGridDataFrame or 'sf' object from <span class="pkg">sf</span> then it will be used 
in an overlay operation as described. 
</p>
<p>If package <span class="pkg">terra</span> has been installed then <code>spatialdata</code> may also be a RasterLayer from package <span class="pkg">raster</span> or SpatRaster from <span class="pkg">terra</span>. If provided <code>counts</code> should be a single name that will be used for the values (otherwise 'raster' will be used).
</p>
<p>If <code>spatialdata</code> is a <code>mask</code> or <code>traps</code> object then it
is searched for the closest point to each point in <code>object</code>, and
covariates are drawn from the corresponding rows in
<code>covariates(spatialdata)</code>. By default (<code>strict = FALSE</code>),
values are returned even when the points lie outside any cell of the mask.
</p>


<h3>Value</h3>

<p>An object of the same class as <code>object</code> with new or augmented
<code>covariates</code> attribute. Column names and types are derived from the input.
</p>


<h3>Warning</h3>

<p>Use of a SpatialGridDataFrame for <code>spatialdata</code> is untested.
</p>


<h3>See Also</h3>

<p><code>make.mask</code>, <code>read.mask</code>, <code>read.traps</code>
</p>


<h3>Examples</h3>

<pre><code class="language-R">
## In the Lake Station skink study (see ?skink), habitat covariates were
## measured only at trap sites. Here we extrapolate to a mask, taking
## values for each mask point from the nearest trap.

LSmask &lt;- make.mask(LStraps, buffer = 30, type = "trapbuffer")
tempmask &lt;- addCovariates(LSmask, LStraps)
## show first few lines
head(covariates(tempmask))

</code></pre>


</div>