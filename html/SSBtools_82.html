<div class="container">

<table style="width: 100%;"><tr>
<td>quantile_weighted</td>
<td style="text-align: right;">R Documentation</td>
</tr></table>
<h2>Weighted quantiles</h2>

<h3>Description</h3>

<p>The default method (<code>type=2</code>) corresponds to weighted percentiles in SAS.
</p>


<h3>Usage</h3>

<pre><code class="language-R">quantile_weighted(
  x,
  probs = (0:4)/4,
  weights = rep(1, length(x)),
  type = 2,
  eps = 1e-09
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr style="vertical-align: top;">
<td><code>x</code></td>
<td>
<p>Numeric vector</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>probs</code></td>
<td>
<p>Numeric vector of probabilities</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>weights</code></td>
<td>
<p>Numeric vector of weights of the same length as <code>x</code></p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>type</code></td>
<td>
<p>An integer, <code>2</code> (default) or <code>5</code>. Similar to types 2 and 5 in <code>quantile</code>.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>eps</code></td>
<td>
<p>Precision parameter used when <code>type=2</code> so that numerical inaccuracy is accepted (see details)</p>
</td>
</tr>
</table>
<h3>Details</h3>

<p>When <code>type=2</code>, averaging is used in case of equal of probabilities.
Equal probabilities (<code>p[j]==probs[i]</code>) is determined by
<code>abs(1-p[j]/probs[i])&lt;eps</code>
with <code>p=cumsum(w)/sum(w)</code>
where <code>w=weights[order(x)]</code>.
</p>
<p>With zero length of <code>x</code>, <code>NA</code>s are returned.
</p>
<p>When all weights are zero and when when all <code>x</code>'s are not equal,
<code>NaN</code>s are returned except for the 0% and 100% quantiles.
</p>


<h3>Value</h3>

<p>Quantiles as a named numeric vector.
</p>


<h3>Note</h3>

<p>Type 2 similar to type 5 in <code>DescTools::Quantile</code>
</p>


<h3>Examples</h3>

<pre><code class="language-R">x &lt;- rnorm(27)/5 + 1:27
w &lt;- (1:27)/27

quantile_weighted(x, (0:5)/5, weights = w)
quantile_weighted(x, (0:5)/5, weights = w, type = 5)

quantile_weighted(x) - quantile(x, type = 2)
quantile_weighted(x, type = 5) - quantile(x, type = 5)

</code></pre>


</div>