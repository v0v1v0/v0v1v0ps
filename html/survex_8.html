<div class="container">

<table style="width: 100%;"><tr>
<td>extract_predict_survshap</td>
<td style="text-align: right;">R Documentation</td>
</tr></table>
<h2>Extract Local SurvSHAP(t) from Global SurvSHAP(t)</h2>

<h3>Description</h3>

<p>Helper function to extract local SurvSHAP(t) explanation from global one.
Can be can be useful for creating SurvSHAP(t) plots for single observations.
</p>


<h3>Usage</h3>

<pre><code class="language-R">extract_predict_survshap(aggregated_survshap, index)
</code></pre>


<h3>Arguments</h3>

<table>
<tr style="vertical-align: top;">
<td><code>aggregated_survshap</code></td>
<td>
<p>an object of class <code>aggregated_surv_shap</code> containing the computed global SHAP values</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>index</code></td>
<td>
<p>a numeric value, position of an observation to be extracted in the result of global explanation</p>
</td>
</tr>
</table>
<h3>Value</h3>

<p>An object of classes <code>c("predict_parts_survival", "surv_shap")</code>. It is a list with the element <code>result</code> containing the results of the explanation.
</p>


<h3>Examples</h3>

<pre><code class="language-R">
veteran &lt;- survival::veteran
rsf_ranger &lt;- ranger::ranger(
    survival::Surv(time, status) ~ .,
    data = veteran,
    respect.unordered.factors = TRUE,
    num.trees = 100,
    mtry = 3,
    max.depth = 5
)
rsf_ranger_exp &lt;- explain(
    rsf_ranger,
    data = veteran[, -c(3, 4)],
    y = survival::Surv(veteran$time, veteran$status),
    verbose = FALSE
)

ranger_global_survshap &lt;- model_survshap(
    explainer = rsf_ranger_exp,
    new_observation = veteran[
        c(1:4, 17:20, 110:113, 126:129),
        !colnames(veteran) %in% c("time", "status")
    ]
)

local_survshap_1 &lt;- extract_predict_survshap(ranger_global_survshap, index = 1)
plot(local_survshap_1)


</code></pre>


</div>