<div class="container">

<table style="width: 100%;"><tr>
<td>create_db</td>
<td style="text-align: right;">R Documentation</td>
</tr></table>
<h2>Create credentials database</h2>

<h3>Description</h3>

<p>Create a SQLite database with credentials data protected by a password.
</p>


<h3>Usage</h3>

<pre><code class="language-R">create_db(
  credentials_data,
  sqlite_path,
  passphrase = NULL,
  flags = RSQLite::SQLITE_RWC
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr style="vertical-align: top;">
<td><code>credentials_data</code></td>
<td>
<p>A <code>data.frame</code> with information about users, <code>user</code> and <code>password</code> are required.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>sqlite_path</code></td>
<td>
<p>Path to the SQLite database.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>passphrase</code></td>
<td>
<p>A password to protect the data inside the database.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>flags</code></td>
<td>
<p><code>RSQLite::SQLITE_RWC:</code> open the database in read/write mode and create the database file if it does not already exist; 
<code>RSQLite::SQLITE_RW:</code> open the database in read/write mode. Raise an error if the file does not already exist; 
<code>RSQLite::SQLITE_RO:</code> open the database in read only mode. Raise an error if the file does not already exist</p>
</td>
</tr>
</table>
<h3>Details</h3>

<p>The credentials <code>data.frame</code> can have the following columns:
</p>

<ul>
<li> <p><strong>user (mandatory)</strong> : the user's name.
</p>
</li>
<li> <p><strong>password (mandatory)</strong> : the user's password.
</p>
</li>
<li> <p><strong>admin (optional)</strong> : logical, is user have admin right ? If so,
user can access the admin mode (only available using a SQLite database)
</p>
</li>
<li> <p><strong>start (optional)</strong> : the date from which the user will have access to the application
</p>
</li>
<li> <p><strong>expire (optional)</strong> : the date from which the user will no longer have access to the application
</p>
</li>
<li> <p><strong>applications (optional)</strong> : the name of the applications to which the user is authorized,
separated by a semicolon. The name of the application corresponds to the name of the directory,
or can be declared using : <code>options("shinymanager.application" = "my-app")</code>
</p>
</li>
<li> <p><strong>additional columns</strong> : add others columns to retrieve the values server-side after authentication
</p>
</li>
</ul>
<h3>See Also</h3>

<p><code>read_db_decrypt</code>
</p>


<h3>Examples</h3>

<pre><code class="language-R">## Not run: 

# Credentials data
credentials &lt;- data.frame(
  user = c("shiny", "shinymanager"),
  password = c("azerty", "12345"), # password will automatically be hashed
  stringsAsFactors = FALSE
)

# you can use keyring package to set database key
library(keyring)
key_set("R-shinymanager-key", "obiwankenobi")

# Create the database
create_db(
  credentials_data = credentials,
  sqlite_path = "path/to/database.sqlite", # will be created
  passphrase = key_get("R-shinymanager-key", "obiwankenobi")
)


## End(Not run)
</code></pre>


</div>