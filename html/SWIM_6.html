<div class="container">

<table style="width: 100%;"><tr>
<td>ES_stressed</td>
<td style="text-align: right;">R Documentation</td>
</tr></table>
<h2>Value-at-Risk and Expected Shortfall of a Stressed Model</h2>

<h3>Description</h3>

<p>Provides the Value-at-Risk (VaR) and the Expected Shortfall (ES)
for components (random variables) of a stochastic model.
</p>


<h3>Usage</h3>

<pre><code class="language-R">ES_stressed(
  object,
  alpha = 0.95,
  xCol = "all",
  wCol = 1,
  base = FALSE,
  gamma = NULL
)

VaR_stressed(object, alpha = 0.95, xCol = "all", wCol = 1, base = FALSE)
</code></pre>


<h3>Arguments</h3>

<table>
<tr style="vertical-align: top;">
<td><code>object</code></td>
<td>
<p>A <code>SWIM</code> or <code>SWIMw</code> object.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>alpha</code></td>
<td>
<p>Numeric vector, the levels of the stressed VaR and ES
(<code>default = 0.95</code>).</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>xCol</code></td>
<td>
<p>Numeric or character vector, (names of) the columns of 
the underlying data 
of the <code>object</code> (<code>default = "all"</code>).</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>wCol</code></td>
<td>
<p>Numeric, the column of the scenario weights
of the <code>object</code> (<code>default = 1</code>).</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>base</code></td>
<td>
<p>Logical, if <code>TRUE</code>, statistics under the baseline 
are also returned (<code>default = "FALSE"</code>).</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>gamma</code></td>
<td>
<p>Function that defines the gamma of the risk measure. If null,
the Expected Shortfall (ES) will be used.<br></p>
</td>
</tr>
</table>
<h3>Details</h3>

<p><code>ES_stressed</code>: The ES of a stressed model is the
ES of a chosen stressed model component, subject to the calculated scenario
weights. The ES at level <code>alpha</code> of a stressed model
component is given by:
</p>
<p style="text-align: center;"><code class="reqn">ES_{alpha} = 1 / (1 - alpha) * \int_{alpha}^1 VaR_u^W d u,</code>
</p>

<p>where <code>VaR_u^W</code> is the VaR of the stressed model component, defined below.
</p>
<p><code>VaR_stressed</code>: The VaR of a model is the VaR (quantile) of
a chosen stressed model component, subject to the calculated scenario weights.
The VaR at level <code>alpha</code> of a stressed model component with
stressed distribution function F^W is defined as its
left-quantile at alpha:
</p>
<p style="text-align: center;"><code class="reqn">VaR_{alpha}^W = F^{W,-1}(alpha).</code>
</p>

<p>The function <code>VaR_stressed</code> provides the empirical quantile, whereas
the function <code>quantile_stressed</code> calculates quantiles of model
components with different interpolations.
</p>


<h3>Value</h3>

<p><code>ES_stressed</code>: Returns a matrix with the empirical or KDE 
ES's at level <code>alpha</code> of
model components specified in <code>xCol</code>, under the scenario weights
<code>wCol</code>.
</p>
<p><code>VaR_stressed</code>: Returns a matrix with the empirical or KDE VaR's
at level <code>alpha</code> of
model components specified in <code>xCol</code>, under the scenario weights
<code>wCol</code>.
</p>


<h3>Functions</h3>


<ul>
<li> <p><code>ES_stressed</code>: Expected Shortfall of a stressed model
</p>
</li>
<li> <p><code>VaR_stressed</code>: Value-at-Risk of a stressed model.
</p>
</li>
</ul>
<h3>Author(s)</h3>

<p>Silvana M. Pesenti, Zhuomin Mao
</p>


<h3>See Also</h3>

<p>See <code>quantile_stressed</code> for quantiles other than the
empirical quantiles and <code>cdf</code> for the empirical or KDE distribution
function of a stressed model.
</p>


<h3>Examples</h3>

<pre><code class="language-R">## example with a stress on VaR
set.seed(0)
x &lt;- as.data.frame(cbind(
  "normal" = rnorm(1000),
  "gamma" = rgamma(1000, shape = 2)))
res1 &lt;- stress(type = "VaR", x = x,
  alpha = c(0.9, 0.95), q_ratio = 1.05)
## stressed ES
quantile_stressed(res1, probs = seq(0.9, 0.99, 0.01),
                    xCol = 1, wCol = 2, type = "i/n")
quantile(x[, 1],  probs = seq(0.9, 0.99, 0.01), type = 1)
VaR_stressed(res1, alpha = seq(0.9, 0.99, 0.01), xCol = 1,
                    wCol = 2, base = TRUE)

## the ES of both model components under stress one
ES_stressed(res1, alpha = seq(0.9, 0.99, 0.01), xCol = "all",
                    wCol = 1)
## the ES of both model components under stress two
ES_stressed(res1, alpha = seq(0.9, 0.99, 0.01), xCol = "all",
                    wCol = 2)

</code></pre>


</div>