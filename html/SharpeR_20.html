<div class="container">

<table style="width: 100%;"><tr>
<td>dsropt</td>
<td style="text-align: right;">R Documentation</td>
</tr></table>
<h2>The (non-central) maximal Sharpe ratio distribution.</h2>

<h3>Description</h3>

<p>Density, distribution function, quantile function and random
generation for the maximal Sharpe ratio distribution with 
<code>df1</code> and <code>df2</code> degrees of freedom
(and optional maximal signal-noise-ratio <code>zeta.s</code>).
</p>


<h3>Usage</h3>

<pre><code class="language-R">dsropt(x, df1, df2, zeta.s, ope, drag = 0, log = FALSE)

psropt(q, df1, df2, zeta.s, ope, drag = 0, ...)

qsropt(p, df1, df2, zeta.s, ope, drag = 0, ...)

rsropt(n, df1, df2, zeta.s, ope, drag = 0, ...)
</code></pre>


<h3>Arguments</h3>

<table>
<tr style="vertical-align: top;">
<td><code>x, q</code></td>
<td>
<p>vector of quantiles.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>df1</code></td>
<td>
<p>the number of assets in the portfolio.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>df2</code></td>
<td>
<p>the number of observations.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>zeta.s</code></td>
<td>
<p>the non-centrality parameter, defined as 
<code class="reqn">\zeta_* = \sqrt{\mu^{\top}\Sigma^{-1}\mu},</code>
for population parameters.
defaults to 0, <em>i.e.</em> a central maximal Sharpe ratio distribution.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>ope</code></td>
<td>
<p>the number of observations per 'epoch'. For convenience of
interpretation, The Sharpe ratio is typically quoted in 'annualized' 
units for some epoch, that is, 'per square root epoch', though returns 
are observed at a frequency of <code>ope</code> per epoch. 
The default value is 1, meaning the code will not attempt to guess
what the observation frequency is, and no annualization adjustments
will be made.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>drag</code></td>
<td>
<p>the 'drag' term, <code class="reqn">c_0/R</code>. defaults to 0. It is assumed
that <code>drag</code> has been annualized, <em>i.e.</em> is given in the
same units as <code>x</code> and <code>q</code>.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>log</code></td>
<td>
<p>logical; if TRUE, densities <code class="reqn">f</code> are given as <code class="reqn">\mbox{log}(f)</code>.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>p</code></td>
<td>
<p>vector of probabilities.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>n</code></td>
<td>
<p>number of observations.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>...</code></td>
<td>
<p>arguments passed on to the respective Hotelling <code class="reqn">T^2</code> functions.</p>
</td>
</tr>
</table>
<h3>Details</h3>

<p>Suppose <code class="reqn">x_i</code> are <code class="reqn">n</code> independent draws of a <code class="reqn">q</code>-variate
normal random variable with mean <code class="reqn">\mu</code> and covariance matrix
<code class="reqn">\Sigma</code>. Let <code class="reqn">\bar{x}</code> be the (vector) sample mean, and 
<code class="reqn">S</code> be the sample covariance matrix (using Bessel's correction). Let
</p>
<p style="text-align: center;"><code class="reqn">Z(w) = \frac{w^{\top}\bar{x} - c_0}{\sqrt{w^{\top}S w}}</code>
</p>

<p>be the (sample) Sharpe ratio of the portfolio <code class="reqn">w</code>, subject to 
risk free rate <code class="reqn">c_0</code>.
</p>
<p>Let <code class="reqn">w_*</code> be the solution to the portfolio optimization problem:
</p>
<p style="text-align: center;"><code class="reqn">\max_{w: 0 &lt; w^{\top}S w \le R^2} Z(w),</code>
</p>

<p>with maximum value <code class="reqn">z_* = Z\left(w_*\right)</code>.
Then 
</p>
<p style="text-align: center;"><code class="reqn">w_* = R \frac{S^{-1}\bar{x}}{\sqrt{\bar{x}^{\top}S^{-1}\bar{x}}}</code>
</p>

<p>and
</p>
<p style="text-align: center;"><code class="reqn">z_* = \sqrt{\bar{x}^{\top} S^{-1} \bar{x}} - \frac{c_0}{R}</code>
</p>

<p>The variable <code class="reqn">z_*</code> follows an <em>Optimal Sharpe ratio</em>
distribution. For convenience, we may assume that the sample statistic
has been annualized in the same manner as the Sharpe ratio, that is 
by multiplying by <code class="reqn">d</code>, the number of observations per
epoch.
</p>
<p>The Optimal Sharpe Ratio distribution is parametrized by the number 
of assets, <code class="reqn">q</code>, the number of independent observations, <code class="reqn">n</code>, the 
noncentrality parameter, 
</p>
<p style="text-align: center;"><code class="reqn">\zeta_* = \sqrt{\mu^{\top}\Sigma^{-1}\mu},</code>
</p>

<p>the 'drag' term, <code class="reqn">c_0/R</code>, and the annualization factor, <code class="reqn">d</code>.
The drag term makes this a location family of distributions, and 
by default we assume it is zero.
</p>
<p>The parameters are encoded as follows:
</p>

<ul>
<li> <p><code class="reqn">q</code> is denoted by <code>df1</code>.
</p>
</li>
<li> <p><code class="reqn">n</code> is denoted by <code>df2</code>.
</p>
</li>
<li> <p><code class="reqn">\zeta_*</code> is denoted by <code>zeta.s</code>.
</p>
</li>
<li> <p><code class="reqn">d</code> is denoted by <code>ope</code>.
</p>
</li>
<li> <p><code class="reqn">c_0/R</code> is denoted by <code>drag</code>.
</p>
</li>
</ul>
<p>See ‘The Sharpe Ratio: Statistics and Applications’,
section 6.1.4.
</p>


<h3>Value</h3>

<p><code>dsropt</code> gives the density, <code>psropt</code> gives the distribution function,
<code>qsropt</code> gives the quantile function, and <code>rsropt</code> generates random deviates.
</p>
<p>Invalid arguments will result in return value <code>NaN</code> with a warning.
</p>


<h3>Note</h3>

<p>This is a thin wrapper on the Hotelling T-squared distribution, which is a
wrapper on the F distribution.
</p>


<h3>Author(s)</h3>

<p>Steven E. Pav <a href="mailto:shabbychef@gmail.com">shabbychef@gmail.com</a>
</p>


<h3>References</h3>

<p>Kan, Raymond and Smith, Daniel R. "The Distribution of the Sample Minimum-Variance Frontier."
Journal of Management Science 54, no. 7 (2008): 1364–1380.
doi: <a href="https://doi.org/10.1287/mnsc.1070.0852">10.1287/mnsc.1070.0852</a>
</p>
<p>Pav, S. E. "The Sharpe Ratio: Statistics and Applications." CRC Press, 2021.
</p>


<h3>See Also</h3>

<p><code>reannualize</code>
</p>
<p>F-distribution functions, <code>df, pf, qf, rf</code>, 
Sharpe ratio distribution, <code>dsr, psr, qsr, rsr</code>.
</p>
<p>Other sropt: 
<code>as.sropt()</code>,
<code>confint.sr()</code>,
<code>is.sropt()</code>,
<code>pco_sropt()</code>,
<code>power.sropt_test()</code>,
<code>reannualize()</code>,
<code>sropt_test()</code>,
<code>sropt</code>
</p>


<h3>Examples</h3>

<pre><code class="language-R"># generate some variates 
ngen &lt;- 128
ope &lt;- 253
df1 &lt;- 8
df2 &lt;- ope * 10
drag &lt;- 0
# sample
rvs &lt;- rsropt(ngen, df1, df2, drag, ope)
hist(rvs)
# these should be uniform:
isp &lt;- psropt(rvs, df1, df2, drag, ope)
plot(ecdf(isp))

</code></pre>


</div>