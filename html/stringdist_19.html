<div class="container">

<table style="width: 100%;"><tr>
<td>stringdist-metrics</td>
<td style="text-align: right;">R Documentation</td>
</tr></table>
<h2>String metrics in <span class="pkg">stringdist</span>
</h2>

<h3>Description</h3>

<p>This page gives an overview of the string dissimilarity measures offered by
<span class="pkg">stringdist</span>.
</p>


<h3>String Metrics</h3>

<p>String metrics are ways of quantifying the dissimilarity between two finite
sequences, usually text strings. Over the years, many such measures have been
developed. Some are based on a mathematical understanding of the set of all 
strings that can be composed from a finite alphabet, others are based on more
heuristic principles, such as how a text string sounds when pronounced by a 
native English speaker.
</p>
<p>The terms 'string metrics' and 'string distance' are used more or less
interchangibly in literature. From a mathematical point of view, string
metrics often do not obey the demands that are usually required from a
distance function. For example, it is not true for all string metrics that a
distance of 0 means that two strings are the same (e.g. in the <code class="reqn">q</code>-gram
distance). Nevertheless, string metrics are very useful in practice and have
many applications.
</p>
<p>The metric you need to choose for an application strongly depends on both the
nature of the string (what does the string represent?) and the cause of
dissimilarities between the strings you are measuring. For example, if you
are comparing human-typed names that may contain typo's, the Jaro-Winkler
distance may be of use. If you are comparing names that were written down
after hearing them, a phonetic distance may be a better choice.
</p>
<p>Currently, the following distance metrics are supported by <span class="pkg">stringdist</span>.
</p>

<table>
<tr>
<td style="text-align: left;">
   <b>Method name</b> </td>
<td style="text-align: left;"> <b>Description</b>
</td>
</tr>
<tr>
<td style="text-align: left;">
   <code>osa</code> </td>
<td style="text-align: left;"> Optimal string aligment, (restricted Damerau-Levenshtein distance).</td>
</tr>
<tr>
<td style="text-align: left;">
   <code>lv</code> </td>
<td style="text-align: left;"> Levenshtein distance (as in R's native <code>adist</code>).</td>
</tr>
<tr>
<td style="text-align: left;">
   <code>dl</code> </td>
<td style="text-align: left;"> Full Damerau-Levenshtein distance.</td>
</tr>
<tr>
<td style="text-align: left;">
   <code>hamming</code>  </td>
<td style="text-align: left;"> Hamming distance (<code>a</code> and <code>b</code> must have same nr of characters).</td>
</tr>
<tr>
<td style="text-align: left;">
   <code>lcs</code> </td>
<td style="text-align: left;"> Longest common substring distance.</td>
</tr>
<tr>
<td style="text-align: left;">
   <code>qgram</code> </td>
<td style="text-align: left;"> <code class="reqn">q</code>-gram distance. </td>
</tr>
<tr>
<td style="text-align: left;">
   <code>cosine</code> </td>
<td style="text-align: left;"> cosine distance between <code class="reqn">q</code>-gram profiles </td>
</tr>
<tr>
<td style="text-align: left;">
   <code>jaccard</code> </td>
<td style="text-align: left;"> Jaccard distance between <code class="reqn">q</code>-gram profiles </td>
</tr>
<tr>
<td style="text-align: left;">
   <code>jw</code> </td>
<td style="text-align: left;"> Jaro, or Jaro-Winkler distance.</td>
</tr>
<tr>
<td style="text-align: left;">
   <code>soundex</code> </td>
<td style="text-align: left;"> Distance based on soundex encoding (see below)
</td>
</tr>
</table>
<h3>A short description of string metrics supported by <span class="pkg">stringdist</span>
</h3>

<p>See <a href="https://journal.r-project.org/archive/2014-1/loo.pdf">Van der Loo
(2014)</a> for an extensive description and references. The review papers of
Navarro (2001) and Boytsov (2011) provide excellent technical overviews of
respectively online and offline string matching algorithms.
</p>
<p>The <b>Hamming distance</b> (<code>method='hamming'</code>) counts the number of 
character substitutions that turns <code>b</code> into <code>a</code>. If <code>a</code> 
and <code>b</code> have different number of characters the distance is <code>Inf</code>. 
</p>
<p>The <b>Levenshtein distance</b> (<code>method='lv'</code>) counts the number of 
deletions, insertions and substitutions necessary to turn <code>b</code> into 
<code>a</code>. This method is equivalent to <code>R</code>'s native <code>adist</code> 
function. 
</p>
<p>The <b>Optimal String Alignment distance</b> (<code>method='osa'</code>) is like the Levenshtein 
distance but also allows transposition of adjacent characters. Here, each 
substring  may be edited only once. (For example, a character cannot be transposed twice
to move it forward in the string). 
</p>
<p>The <b>full Damerau-Levenshtein distance</b> (<code>method='dl'</code>) is like the optimal 
string alignment distance except that it allows for multiple edits on substrings. 
</p>
<p>The <b>longest common substring</b> (method='lcs') is defined as the longest string that can be 
obtained by pairing characters from <code>a</code> and <code>b</code> while keeping the order 
of characters intact. The <b>lcs-distance</b> is defined as the number of unpaired characters. 
The distance is equivalent to the edit distance allowing only deletions and insertions, 
each with weight one. 
</p>
<p>A <b><code class="reqn">q</code>-gram</b> (method='qgram') is a subsequence of <code class="reqn">q</code> <em>consecutive</em> 
characters of a string. If <code class="reqn">x</code> (<code class="reqn">y</code>) is the vector of counts
of <code class="reqn">q</code>-gram occurrences in <code>a</code> (<code>b</code>), the <b><code class="reqn">q</code>-gram distance</b> 
is given by the sum over the absolute differences <code class="reqn">|x_i-y_i|</code>.
The computation is aborted when <code>q</code> is is larger than the length of 
any of the strings. In that case <code>Inf</code>  is returned.
</p>
<p>The <b>cosine distance</b> (method='cosine') is computed as <code class="reqn">1-x\cdot
y/(\|x\|\|y\|)</code>, where <code class="reqn">x</code> and <code class="reqn">y</code> were defined above.
</p>
<p>Let <code class="reqn">X</code> be the set of unique <code class="reqn">q</code>-grams in <code>a</code> and <code class="reqn">Y</code> the set of unique 
<code class="reqn">q</code>-grams in <code>b</code>. The <b>Jaccard distance</b> (<code>method='jaccard'</code>) is given by <code class="reqn">1-|X\cap Y|/|X\cup Y|</code>.
</p>
<p>The <b>Jaro distance</b> (<code>method='jw'</code>, <code>p=0</code>), is a number
between 0 (exact match) and 1 (completely dissimilar) measuring 
dissimilarity between strings.  It is defined to be 0 when both strings have
length 0, and 1 when  there are no character matches between <code>a</code> and
<code>b</code>.  Otherwise, the Jaro distance is defined as 
<code class="reqn">1-(1/3)(w_1m/|a| + w_2m/|b| + w_3(m-t)/m)</code>. 
Here,<code class="reqn">|a|</code> indicates the number of characters in <code>a</code>, <code class="reqn">m</code> is
the number of character matches and <code class="reqn">t</code> the number of transpositions of
matching characters. The <code class="reqn">w_i</code> are weights associated with the characters
in <code>a</code>, characters in <code>b</code> and with transpositions.  A character
<code class="reqn">c</code> of <code>a</code> <em>matches</em> a character from <code>b</code> when <code class="reqn">c</code>
occurs in <code>b</code>, and the index of <code class="reqn">c</code> in <code>a</code> differs less than
<code class="reqn">\max(|a|,|b|)/2 -1</code> (where we use integer division) from the index of
<code class="reqn">c</code> in <code>b</code>. Two matching characters are transposed when they are
matched but they occur in different order in string <code>a</code> and <code>b</code>.
</p>
<p>The <b>Jaro-Winkler distance</b> (<code>method=jw</code>, <code>0&lt;p&lt;=0.25</code>) adds a
correction term to the Jaro-distance. It is defined as <code class="reqn">d - l\cdot p\cdot d</code>, where
<code class="reqn">d</code> is the Jaro-distance. Here,  <code class="reqn">l</code> is obtained by counting, from
the start of the input strings, after how many characters the first
character mismatch between the two strings occurs, with a maximum of four. The
factor <code class="reqn">p</code> is a 'prefix' factor, which in the work of Winkler is often
chosen <code class="reqn">0.1</code>.
</p>
<p>For the <b>soundex</b> distance (method='soundex'), strings are translated to a soundex code 
(see <code>phonetic</code> for a specification). The
distance between strings is 0 when they have the same soundex code,
otherwise 1. Note that soundex recoding is only meaningful for characters
in the ranges a-z and A-Z. A warning is emitted when non-printable or non-ascii
characters are encountered. Also see <code>printable_ascii</code>.
</p>
<p>The <b>running_cosine</b> distance is an implementatation of the cosine
distance especially meant for fuzzy text search as in <code>afind</code>.
In fuzzy search a window of <code>n</code> characters slides accros a (long)
string while for each position of the window the distance between the part
of the string in the window and a search pattern is computed. The (position
of) the window with the shortest distance to the search pattern is returned.
Sliding the window with a single position only affects the <code class="reqn">q</code>-grams at
the beginning and end of the window, and the 'running cosine' distance uses
this and a few other tricks to save calculations.
</p>


<h3>References</h3>


<ul>
<li>
<p>MPJ van der Loo (2014) <em>The stringdist package for approximate string matching</em>. The R Journal <b>6</b>(1) 111-122.

</p>
</li>
<li>
<p>L. Boytsov (2011). <em>Indexing methods for approximate dictionary searching: comparative analyses</em>. ACM Journal of experimental
algorithmics <b>16</b> 1-88.

</p>
</li>
<li>
<p>G. Navarro (2001). <em>A guided tour to approximate string matching</em>. ACM Computing Surveys <b>33</b> 31-88.

</p>
</li>
</ul>
<h3>See Also</h3>

 
<ul>
<li>
<p>Functions applying string metrics to text: <code>stringdist</code>,
<code>stringdistmatrix</code>, <code>amatch</code>
</p>
</li>
<li>
<p>Functions applying string metrics to integer sequences:
<code>seq_dist</code>, <code>seq_distmatrix</code>, <code>seq_amatch</code> 
</p>
</li>
<li>
<p>Encoding issues: <code>stringdist-encoding</code>  
</p>
</li>
</ul>
</div>