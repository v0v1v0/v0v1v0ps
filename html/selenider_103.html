<div class="container">

<table style="width: 100%;"><tr>
<td>selenider_session</td>
<td style="text-align: right;">R Documentation</td>
</tr></table>
<h2>Start a session</h2>

<h3>Description</h3>

<p>Create a session in selenider, setting it as the local session unless
otherwise specified, allowing the session to be accessed globally in the
environment where it was defined.
</p>


<h3>Usage</h3>

<pre><code class="language-R">selenider_session(
  session = getOption("selenider.session"),
  browser = getOption("selenider.browser"),
  timeout = 4,
  options = NULL,
  driver = NULL,
  local = TRUE,
  .env = rlang::caller_env(),
  view = FALSE,
  selenium_manager = TRUE,
  quiet = TRUE
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr style="vertical-align: top;">
<td><code>session</code></td>
<td>
<p>The package to use as a backend: either "chromote",
"selenium" or "rselenium". By default, chromote is used, since this tends
to be faster and more reliable. Change the default value using the
<code>selenider.session</code> option.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>browser</code></td>
<td>
<p>The name of the browser to run the session in; one of
"chrome", "firefox", "edge", "safari", or another valid browser name.
If <code>NULL</code>, the function will try to work out which browser you have
installed. If we are using chromote, this option is ignored, since
chromote only works on Chrome. Change the default value of this parameter
using the <code>selenider.browser</code> option.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>timeout</code></td>
<td>
<p>The default time to wait when collecting an element.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>options</code></td>
<td>
<p>A <code>chromote_options()</code> or <code>selenium_options()</code> object,
used to specify options that are specific to chromote or selenium. See
Details for some useful examples of this.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>driver</code></td>
<td>
<p>A driver object to use instead of creating one manually. This
can be one of:
</p>

<ul>
<li>
<p> A chromote::ChromoteSession object.
</p>
</li>
<li>
<p> A shinytest2::AppDriver object.
</p>
</li>
<li>
<p> An selenium::SeleniumSession object.
</p>
</li>
<li>
<p> A Selenium server object, created by <code>selenium::selenium_server()</code> or
<code>wdman::selenium()</code>. In this case, a client will be created using the
server object.
</p>
</li>
<li>
<p> A list/environment containing the selenium::SeleniumSession object,
the Selenium server object, or both.
</p>
</li>
<li>
<p> An <code>RSelenium::remoteDriver()</code> object can be used instead of a
selenium::SeleniumSession object.
</p>
</li>
</ul>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>local</code></td>
<td>
<p>Whether to set the session as the local session object,
using <code>local_session()</code>.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>.env</code></td>
<td>
<p>Passed into <code>local_session()</code>, to define the
environment in which the session is used. Change this if you want to
create the session inside a function and then use it outside the
function.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>view, selenium_manager, quiet</code></td>
<td>
<p><a href="https://lifecycle.r-lib.org/articles/stages.html#deprecated"><img src="../help/figures/lifecycle-deprecated.svg" alt="[Deprecated]"></a>
Use the <code>options</code> argument instead.</p>
</td>
</tr>
</table>
<h3>Value</h3>

<p>A <code>selenider_session</code> object. Use <code>session$driver</code> to retrieve the driver
object that controls the browser.
</p>


<h3>Useful session-specific options</h3>

<p>See <code>chromote_options()</code> and <code>selenium_options()</code> for the full range.
</p>


<h4>Making a chromote session non-headless</h4>

<p>By default, chromote will run in headless mode, meaning that you won't
actually be able to see the browser as you control it. Use the <code>view</code>
argument to <code>chromote_options()</code> to change this:
</p>
<div class="sourceCode r"><pre>session &lt;- selenider_session(
  options = chromote_options(view = TRUE)
)
</pre></div>



<h4>Prevent creation of a selenium server</h4>

<p>Sometimes, you want to manage the Selenium server separately, and only let
selenider create client objects to attach to the server. You can do this by
passing <code>NULL</code> into the <code>server_options</code> argument to <code>selenium_options()</code>:
</p>
<div class="sourceCode r"><pre>session &lt;- selenider_session(
  "selenium",
  options = selenium_options(server_options = NULL)
)
</pre></div>
<p>If the port you are using is not 4444, you will need to pass in the <code>port</code>
argument to <code>selenium_client_options()</code> as well:
</p>
<div class="sourceCode r"><pre>session &lt;- selenider_session(
  "selenium",
  options = selenium_options(
    client_options = selenium_client_options(port = YOUR_PORT),
    server_options = NULL
  )
)
</pre></div>
<p>One example of when this may be useful is when you are managing the Selenium
server using Docker.
</p>



<h4>Store the Selenium server persistently</h4>

<p>By default, selenium will download and store the Selenium server JAR file
in a temporary directory, which will be deleted when the R session finishes.
This means that every time you start a new R session, this file will be
re-downloaded. You can store the JAR file permanently using the <code>temp</code>
argument to <code>selenium_server_options()</code>:
</p>
<div class="sourceCode r"><pre>session &lt;- selenider_session(
  "selenium",
  options = selenium_options(
    server_options = selenium_server_options(temp = TRUE)
  )
)
</pre></div>
<p>The downside of this is you may end up using a lot of storage, especially
if a new version of Selenium is released and the old server file is left
on the filesystem.
</p>
<p>You can also use the <code>path</code> argument to <code>selenium_server_options()</code> to
specify the directory where the JAR file should be stored.
</p>



<h3>Structure of a selenider session</h3>

<p>A <code>selenider_session</code> object has several components that can be useful to
access:
</p>

<ul>
<li> <p><code>session</code> - The type of session, either <code>"chromote"</code> or <code>"selenium"</code>.
</p>
</li>
<li> <p><code>driver</code> - The driver object used to control the browser. This is either a
chromote::ChromoteSession or selenium::SeleniumSession object. This is
useful if you want to do something with the driver that is not directly
supported by selenider. See <code>get_actual_element()</code> for some examples of
this.
</p>
</li>
<li> <p><code>server</code> - The Selenium server object, if one was created or passed in.
</p>
</li>
<li> <p><code>id</code> - A unique ID that can be used to identify the session.
</p>
</li>
</ul>
<p>Access these components using <code>$</code> (e.g. <code>session$driver</code>).
</p>


<h3>Custom drivers</h3>

<p>If you want complete manual control over creating the underlying driver,
you can pass your own <code>driver</code> argument to stop selenider from creating
the driver for you.
</p>
<p>You can also supply a shinytest2::AppDriver object, allowing selenider and
shinytest2 to share a session:
</p>
<div class="sourceCode"><pre>shiny_app &lt;- shiny::shinyApp(
  ui = shiny::fluidPage(
    # ... Your UI
  ),
  server = function(input, output) {
    # ... Your server
  }
)

app &lt;- shinytest2::AppDriver$new()

session &lt;- selenider_session(
  driver = app
)
</pre></div>


<h3>See Also</h3>


<ul>
<li> <p><code>close_session()</code> to close the session. Note that this will not reset the
result of <code>get_session()</code>, which is why <code>withr::deferred_run()</code> is
preferred.
</p>
</li>
<li> <p><code>local_session()</code> and <code>with_session()</code> to manually set the local session
object (and <code>get_session()</code> to get it).
</p>
</li>
<li> <p><code>open_url()</code>, <code>s()</code> and <code>find_elements()</code> to get started once you have
created a session.
</p>
</li>
</ul>
<h3>Examples</h3>

<pre><code class="language-R">

session_1 &lt;- selenider_session(timeout = 10)
# session_1 is the local session here

get_session() # Returns session 1

my_function &lt;- function() {
  session_2 &lt;- selenider_session()

  # In here, session_2 is the local session
  get_session()
} # When the function finishes executing, the session is closed

my_function() # Returns `session_2`

# If we want to use a session outside the scope of a function,
# we need to use the `.env` argument.
create_session &lt;- function(timeout = 10, .env = rlang::caller_env()) {
  # caller_env() is the environment where the function is called
  selenider_session(timeout = timeout, .env = .env)
}

my_session &lt;- create_session()

# We can now use this session outside the `create_session()` function
get_session()

# `my_session` will be closed automatically.

</code></pre>


</div>