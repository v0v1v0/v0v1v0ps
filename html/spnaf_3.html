<div class="container">

<table style="width: 100%;"><tr>
<td>Gij.flow</td>
<td style="text-align: right;">R Documentation</td>
</tr></table>
<h2>Calculate spatial autocorrelation with OD data and corresponding flows.</h2>

<h3>Description</h3>

<p>Calculate spatial autocorrelation with OD data and corresponding flows.
</p>


<h3>Usage</h3>

<pre><code class="language-R">Gij.flow(
  df,
  shape,
  method = "queen",
  k = NULL,
  d = NULL,
  idw = FALSE,
  row_standardized = FALSE,
  snap = 1,
  OD = "t",
  R = 1000
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr style="vertical-align: top;">
<td><code>df</code></td>
<td>
<p>A data.frame that contains your Origin-Destination data. The df must consist of "oid" (origin id), "did" (destination id), and "n" (flow weight).</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>shape</code></td>
<td>
<p>A shapefile (in a polygon type) that matches your OD dataframe. The shape must have an "id" column to match your ids in df.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>method</code></td>
<td>
<p>A string value among "queen" (spatial contiguity), "KNN" (k-nearest neighbors), and "fixed_distance" (fixed distance).</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>k</code></td>
<td>
<p>An integer value to define the number of nearest neighbors for the K-nearest neighbors method.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>d</code></td>
<td>
<p>An integer value to define the distance for the fixed distance spatial weight matrix.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>idw</code></td>
<td>
<p>A logical value indicating whether to use inverse distance weighting.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>row_standardized</code></td>
<td>
<p>A logical value indicating whether to row-standardize the spatial weights.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>snap</code></td>
<td>
<p>A parameter used to calculate <code>spdep</code>'s spatial contiguity (please refer to the poly2nb documentation for more information).</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>OD</code></td>
<td>
<p>A string value among "o" (origin-based), "d" (destination-based), and "t" (both ways), which determines how to generate spatial weights. The default value is "t".</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>R</code></td>
<td>
<p>An integer value to define how many times you want to execute bootstrapping.</p>
</td>
</tr>
</table>
<h3>Value</h3>

<p>The result is a list containing a dataframe and an <code>sf</code> object. Both contain Gij statistics and p-value columns merged with your input df. The geometry type of the latter is linestring.
</p>


<h3>References</h3>

<p>Berglund, S., &amp; Karlstr√∂m, A. (1999). Identifying local spatial association in flow data. Journal of Geographical Systems, 1(3), 219-236. https://doi.org/10.1007/s101090050013
</p>


<h3>Examples</h3>

<pre><code class="language-R"># Data manipulation
CA &lt;- spnaf::CA
OD &lt;- cbind(CA$FIPS.County.Code.of.Geography.B, CA$FIPS.County.Code.of.Geography.A)
OD &lt;- cbind(OD, CA$Flow.from.Geography.B.to.Geography.A)
OD &lt;- data.frame(OD)
names(OD) &lt;- c("oid", "did", "n")
OD$n &lt;- as.numeric(OD$n)
OD &lt;- OD[order(OD[,1], OD[,2]),]
head(OD) # check the input df's format

# Load sf polygon
CA_polygon &lt;- spnaf::CA_polygon
head(CA_polygon) # it has a geometry column

# Execution of Gij.flow with data above and given parameters
## Not run: 
result &lt;- Gij.flow(df = OD, shape = CA_polygon, method = 'queen', snap = 1, OD = 't', R = 1000)

## End(Not run)

# check the results
## Not run: 
head(result[[1]])
head(result[[2]])

## End(Not run)
</code></pre>


</div>