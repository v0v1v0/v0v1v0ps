<div class="container">

<table style="width: 100%;"><tr>
<td>transform_to_stepfunction</td>
<td style="text-align: right;">R Documentation</td>
</tr></table>
<h2>Transform Fixed Point Prediction into a Stepfunction</h2>

<h3>Description</h3>

<p>Some models return the survival function or cumulative hazard function prediction at the times of events present in the training data set. This is a convenient utility to allow the prediction to be evaluated at any time.
</p>


<h3>Usage</h3>

<pre><code class="language-R">transform_to_stepfunction(
  predict_function,
  eval_times = NULL,
  ...,
  type = NULL,
  prediction_element = NULL,
  times_element = NULL
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr style="vertical-align: top;">
<td><code>predict_function</code></td>
<td>
<p>a function making the prediction based on <code>model</code> and <code>newdata</code> arguments, the <code>...</code> parameter is also passed to this function. It has to return either a numeric vector of the same length as <code>eval_times</code>, a matrix with this number of columns and the same number of rows as <code>nrow(newdata)</code>. It can also return a list, with one of the elements containing such an object.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>eval_times</code></td>
<td>
<p>a numeric vector of times, at which the fixed predictions are made. This can be <code>NULL</code>, if <code>predict_function</code> returns a list which contains such a vector.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>...</code></td>
<td>
<p>other parameters passed to predict_function</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>type</code></td>
<td>
<p>the type of function to be returned, either <code>"survival"</code>, <code>"chf"</code> or <code>NULL</code> this chooses the value of the step function before the first prediction time. If <code>"survival"</code> then it is 1, if <code>"chf"</code> then 0, otherwise, it is the value of the prediction for the first time in numerical order.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>prediction_element</code></td>
<td>
<p>if <code>predict_function</code> returns a list with the matrix as one of its elements, this parameter should contain the name of this element</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>times_element</code></td>
<td>
<p>if <code>predict_function</code> returns a list with the matrix as one of its elements, this parameter should contain the name of this element</p>
</td>
</tr>
</table>
<h3>Value</h3>

<p>The function returns a function with three arguments, (<code>model</code>, <code>newdata</code>, <code>times</code>), ready to supply it to an explainer.
</p>


<h3>Examples</h3>

<pre><code class="language-R">
library(survex)
library(survival)

rsf_src &lt;- randomForestSRC::rfsrc(Surv(time, status) ~ ., data = veteran)

chf_function &lt;- transform_to_stepfunction(predict,
    type = "chf",
    prediction_element = "chf",
    times_element = "time.interest"
)

explainer &lt;- explain(rsf_src, predict_cumulative_hazard_function = chf_function)

</code></pre>


</div>