<div class="container">

<table style="width: 100%;"><tr>
<td>sf_query</td>
<td style="text-align: right;">R Documentation</td>
</tr></table>
<h2>Perform SOQL Query</h2>

<h3>Description</h3>

<p><a href="https://lifecycle.r-lib.org/articles/stages.html#stable"><img src="../help/figures/lifecycle-stable.svg" alt="[Stable]"></a>
</p>
<p>Executes a query against the specified object and returns data that matches
the specified criteria.
</p>


<h3>Usage</h3>

<pre><code class="language-R">sf_query(
  soql,
  object_name = NULL,
  queryall = FALSE,
  guess_types = TRUE,
  api_type = c("REST", "SOAP", "Bulk 1.0", "Bulk 2.0"),
  control = list(...),
  ...,
  page_size = deprecated(),
  next_records_url = NULL,
  bind_using_character_cols = deprecated(),
  object_name_append = FALSE,
  object_name_as_col = FALSE,
  verbose = FALSE
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr style="vertical-align: top;">
<td><code>soql</code></td>
<td>
<p><code>character</code>; a string defining a SOQL query
(e.g. "SELECT Id, Name FROM Account").</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>object_name</code></td>
<td>
<p><code>character</code>; the name of the Salesforce object that the
function is operating against (e.g. "Account", "Contact", "CustomObject__c").</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>queryall</code></td>
<td>
<p><code>logical</code>; indicating if the query recordset should include records
that have been deleted because of a merge or delete. Setting this argument to
<code>TRUE</code> will also return information about archived Task and Event records.
It is available in API versions 29.0 and later.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>guess_types</code></td>
<td>
<p><code>logical</code>; indicating whether or not to use <code>col_guess()</code>
to try and cast the data returned in the recordset. If <code>TRUE</code> then
<code>col_guess()</code> is used, if <code>FALSE</code> then all fields will be returned
as character. This is helpful when <code>col_guess()</code> will mangle field values
in Salesforce that you'd like to preserve during translation into a <code>tbl_df</code>,
like numeric looking values that must be preserved as strings ("48.0").</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>api_type</code></td>
<td>
<p><code>character</code>; one of <code>"REST"</code>, <code>"SOAP"</code>,
<code>"Bulk 1.0"</code>, or <code>"Bulk 2.0"</code> indicating which API to use when
making the request.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>control</code></td>
<td>
<p><code>list</code>; a list of parameters for controlling the behavior of
the API call being used. For more information of what parameters are available
look at the documentation for <code>sf_control</code>.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>...</code></td>
<td>
<p>arguments passed to <code>sf_control</code> or further downstream
to <code>sf_query_bulk</code>.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>page_size</code></td>
<td>
<p><code>numeric</code>; a number between 200 and 2000 indicating the number of
records per page that are returned. Speed benchmarks should be done to better
understand the speed implications of choosing high or low values of this argument.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>next_records_url</code></td>
<td>
<p><code>character</code> (leave as NULL); a string used internally
by the function to paginate through to more records until complete</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>bind_using_character_cols</code></td>
<td>
<p><code>logical</code>; an indicator of whether to
cast the data to all character columns to ensure that <code>bind_rows</code>
does not fail because two paginated recordsets have differing datatypes for the
same column. Set this to <code>TRUE</code> rarely, typically only when having this
set to <code>FALSE</code> returns an error or you want all columns in the data to be
character.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>object_name_append</code></td>
<td>
<p><code>logical</code>; whether to include the object type
(e.g. Account or Contact) as part of the column names (e.g. Account.Name).</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>object_name_as_col</code></td>
<td>
<p><code>logical</code>; whether to include the object type
(e.g. Account or Contact) as a new column.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>verbose</code></td>
<td>
<p><code>logical</code>; an indicator of whether to print additional
detail for each API call, which is useful for debugging. More specifically, when
set to <code>TRUE</code> the URL, header, and body will be printed for each request,
along with additional diagnostic information where available.</p>
</td>
</tr>
</table>
<h3>Value</h3>

<p><code>tbl_df</code> of records
</p>


<h3>Note</h3>

<p>Bulk API query doesn't support the following SOQL:
</p>

<ul>
<li>
<p> COUNT
</p>
</li>
<li>
<p> ROLLUP
</p>
</li>
<li>
<p> SUM
</p>
</li>
<li>
<p> GROUP BY CUBE
</p>
</li>
<li>
<p> OFFSET
</p>
</li>
<li>
<p> Nested SOQL queries
</p>
</li>
<li>
<p> Relationship fields
</p>
</li>
</ul>
<p>Additionally, Bulk API can't access or query compound address or compound geolocation fields.
</p>


<h3>References</h3>

<p><a href="https://developer.salesforce.com/docs/atlas.en-us.api_asynch.meta/api_asynch">https://developer.salesforce.com/docs/atlas.en-us.api_asynch.meta/api_asynch</a>
</p>


<h3>Examples</h3>

<pre><code class="language-R">## Not run: 
sf_query("SELECT Id, Account.Name, Email FROM Contact LIMIT 10")

## End(Not run)
</code></pre>


</div>