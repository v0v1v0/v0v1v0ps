<div class="container">

<table style="width: 100%;"><tr>
<td>survsim-package</td>
<td style="text-align: right;">R Documentation</td>
</tr></table>
<h2>
Simulation of simple and complex survival data 
</h2>

<h3>Description</h3>

<p>Simulation of cohorts in a context of simple and complex survival analysis, multiple events and recurrent events including several covariates, individual heterogeneity and periods at risk before and after the initial time of follow-up.
</p>

<table>
<tr>
<td style="text-align: center;">
         Distribution </td>
<td style="text-align: center;"> Survival function   </td>
<td style="text-align: center;"> Density function </td>
<td style="text-align: center;"> Parametrization</td>
</tr>
<tr>
<td style="text-align: center;">
         Weibull </td>
<td style="text-align: center;"> <code class="reqn">exp(- \lambda t^p)</code> </td>
<td style="text-align: center;"> <code class="reqn">\lambda pt^{p-1}exp(- \lambda t^p)</code> </td>
<td style="text-align: center;"> <code class="reqn">\lambda = exp(-p \beta_0)</code>
</td>
</tr>
<tr>
<td style="text-align: center;">
         Log-normal </td>
<td style="text-align: center;"> <code class="reqn">1- \Theta((log(t)- \mu)/ \sigma)</code> </td>
<td style="text-align: center;"> <code class="reqn">(1/(t \sigma \sqrt{2 \pi})) exp((-1/(2 \sigma^2))(log(t) - \mu)^2)</code> </td>
<td style="text-align: center;"> <code class="reqn">\mu = \beta_0</code>
</td>
</tr>
<tr>
<td style="text-align: center;">
         Log-logistic </td>
<td style="text-align: center;"> <code class="reqn">1/(1+(\lambda t)^{1/ \gamma}</code>) </td>
<td style="text-align: center;"> <code class="reqn">\lambda^{1/ \gamma}t^{(1/ \gamma) - 1}/ (\gamma (1 + (\lambda t)^{1/ \gamma})^2)</code> </td>
<td style="text-align: center;"> <code class="reqn">\lambda = exp(- \beta_0)</code>
</td>
</tr>
<tr>
<td style="text-align: center;">
       </td>
</tr>
</table>
<table>
<tr>
<td style="text-align: center;">
         Distribution </td>
<td style="text-align: center;"> Time</td>
</tr>
<tr>
<td style="text-align: center;">
         Weibull </td>
<td style="text-align: center;"> <code class="reqn">t = (- ln u/ \lambda)^{1/p}</code>
</td>
</tr>
<tr>
<td style="text-align: center;">
         Log-normal </td>
<td style="text-align: center;"> <code class="reqn">t = exp(\beta_0 + \gamma (log(u)-log(1-u)))</code>
</td>
</tr>
<tr>
<td style="text-align: center;">
         Log-logistic </td>
<td style="text-align: center;"> <code class="reqn">t = exp(\beta_0 + \sigma \Theta^{-1}(u))</code>
</td>
</tr>
<tr>
<td style="text-align: center;">
       </td>
</tr>
</table>
<p>Where <code class="reqn">\Theta</code> is the standard normal cumulative distribution.
</p>
<p>In order to simulate censored survival data, two survival distributions are required, one for the uncensored survival times that would be observed if the follow-up had been sufficiently long to reach the event and another representing the censoring mechanism. The uncensored survival distribution, <code class="reqn">T'_i</code>, for <code class="reqn">i=1,\ldots,n</code> subjects, could be generated to depend on a set of covariates with a specified relationship with survival, which represents the true prognostic importance of each covariate (Burton, 2006). The package allows to simulate times by means of using Weibull (and exponential as a particular case), log-normal and log-logistic distributions, as such is showed in previous table.
To induce individual heterogeneity or within-subject correlation we generate <code class="reqn">Z_i</code>, a random effect covariate that follows a particular distribution (Uniform or Normal). 
</p>
<p style="text-align: center;"><code class="reqn">t_i = t_i'\cdot z_i</code>
</p>

<p>When <code class="reqn">z_i = 1</code>, for all subjects, we are in the case of individual homogeneity and the survival times are completely specified by the covariates.
Random non-informative right censoring, <code class="reqn">C_i</code>, can be generated in a similar manner to the uncensored survival times, <code class="reqn">T'_i</code>, by assuming a  particular distribution for the censoring times (previous table), but without including any covariates nor individual heterogenity. 
The observation times, <code class="reqn">Y_i'</code>, incorporating both events and censored observations are calculated for each case by combining the uncensored survival times, <code class="reqn">T_i</code>, and the censoring times, <code class="reqn">C_i</code>. If the uncensored survival time for an observation is less than or equal to the censored time, then the event is considered to be observed and the observation time equals the uncensored survival time, otherwise the event is considered censored and the observation time equals the censored time. In other words, once simulated <code class="reqn">t_i</code> and <code class="reqn">c_i</code>, we can define <code class="reqn">Y_i'= min(t_i,c_i)</code> as the obervation time with <code class="reqn">\delta_i</code> an indicator of non-censoring, i.e. <code class="reqn">\delta_i = I(t_i \le c_i )</code>.
While all <code class="reqn">y_i'</code>  start at 0, the package allows create dynamic cohorts. We can generate entry times higher than 0 adding a <code class="reqn">t_0</code> value corresponding with an uniform distribution in <code class="reqn">[0,t_{max follow-up}]</code>. We can also simulate subjects at risk before of the initial time of follow-up <code class="reqn">(y_i'= 0)</code>, by including an uniform distribution for <code class="reqn">t_0</code> between <code class="reqn">[-t_{max old},0)</code> for a fixed percentage of subjects. Then:
</p>
<p style="text-align: center;"><code class="reqn">y_i=y_i' + t_0</code>
</p>

<p>where <code class="reqn">t_0</code> follows a uniform distribution in <code class="reqn">[0,t_{max follow-up}]</code> if entry time is 0 or more and <code class="reqn">t_0</code> is uniform distributed in <code class="reqn">[-t_{max old}, 0)</code> if entry time is less than 0.
Therefore, <code class="reqn">t_0</code> represents the initial point of the episode, <code class="reqn">y_i</code> the endpoint and <code class="reqn">y_i'</code> is the lenght. Note that <code class="reqn">y_i'+t_0</code> can be higher than <code class="reqn">t_{max follow-up}</code>, and in this case <code class="reqn">y_i</code> will be set at <code class="reqn">t_{max follow-up}</code> and <code class="reqn">\delta_i=0</code>. The observations corresponding to the subjects at risk before of the initial time of follow-up have <code class="reqn">t_0</code> negative, then the initial point of the episode will be set at 0. <code class="reqn">y_i</code> may also be negative, in this case this episode will not be included in the simulated data, as long as this episode won't be observed in practice. 
</p>


<h3>Details</h3>


<table>
<tr>
<td style="text-align: left;">
Package: </td>
<td style="text-align: left;"> survsim</td>
</tr>
<tr>
<td style="text-align: left;">
Type: </td>
<td style="text-align: left;"> Package</td>
</tr>
<tr>
<td style="text-align: left;">
Version: </td>
<td style="text-align: left;"> 1.1.8</td>
</tr>
<tr>
<td style="text-align: left;">
Date: </td>
<td style="text-align: left;"> 2021-12-13</td>
</tr>
<tr>
<td style="text-align: left;">
License: </td>
<td style="text-align: left;"> GPL version 2 or newer</td>
</tr>
<tr>
<td style="text-align: left;">
LazyLoad: </td>
<td style="text-align: left;"> yes</td>
</tr>
<tr>
<td style="text-align: left;">
</td>
</tr>
</table>
<p>The package provide a tool for simulation of cohorts in a simple single-event context through the function <code>simple.surv.sim</code>, in a recurrent event context with the function <code>rec.ev.sim</code>, in a multiple event context with the function <code>mult.ev.sim</code> and in a competing risks context with the function <code>crisk.sim</code>, and it also allows the user to generate aggregated data from the simulated cohort, by means of the function <code>accum</code>.
</p>


<h3>Author(s)</h3>

<p>David Moriña, (Universitat de Barcelona) and Albert Navarro (Universitat Autònoma de Barcelona)
</p>
<p>Maintainer: David Moriña Soler &lt;dmorina@ub.edu&gt;
</p>


<h3>References</h3>

<p>Kelly PJ, Lim LL. Survival analysis for recurrent event data: an application to childhood infectious diseases. Stat Med 2000 Jan 15;<b>19</b>(1):13-33.
</p>
<p>Bender R, Augustin T, Blettner M. Generating survival times to simulate Cox proportional hazards models. Stat Med 2005 Jun 15;<b>24</b>(11):1713-1723.
</p>
<p>Metcalfe C, Thompson SG. The importance of varying the event generation process in simulation studies of statistical methods for recurrent events. Stat Med 2006 Jan 15;<b>25</b>(1):165-179.
</p>
<p>Burton A, Altman DG, Royston P, Holder RL. The design of simulation studies in medical statistics. Stat Med 2006 Dec 30;<b>25</b>(24):4279-4292.
</p>
<p>Beyersmann J, Latouche A, Buchholz A, Schumacher M. Simulating competing risks data in survival analysis. Stat Med 2009 Jan 5;<b>28</b>(1):956-971. 
</p>
<p>Reis RJ, Utzet M, La Rocca PF, Nedel FB, Martin M, Navarro A. Previous sick leaves as predictor of subsequent ones. Int Arch Occup Environ Health 2011 Jun;<b>84</b>(5):491-499.
</p>
<p>Navarro A, Moriña D, Reis R, Nedel FB, Martin M, Alvarado S. Hazard functions to describe patterns of new and recurrent sick leave episodes for different diagnoses. Scand J Work Environ Health 2012 Jan 27.
</p>
<p>Moriña D, Navarro A. The R package survsim for the simulation of simple and complex survival data. Journal of Statistical Software 2014 Jul; <b>59</b>(2):1-20.
</p>


</div>