<div class="container">

<table style="width: 100%;"><tr>
<td>normalizeFolder</td>
<td style="text-align: right;">R Documentation</td>
</tr></table>
<h2>Normalize folder</h2>

<h3>Description</h3>

<p>Normalizes the amplitude of all wav/mp3 files in a folder based on their peak
or RMS amplitude or subjective loudness. This is good for playback
experiments, which require that all sounds should have similar intensity or
loudness.
</p>


<h3>Usage</h3>

<pre><code class="language-R">normalizeFolder(
  myfolder,
  type = c("peak", "rms", "loudness")[1],
  maxAmp = 0,
  summaryFun = "mean",
  windowLength = 50,
  step = NULL,
  overlap = 70,
  killDC = FALSE,
  windowDC = 200,
  saveAudio = NULL,
  reportEvery = NULL
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr style="vertical-align: top;">
<td><code>myfolder</code></td>
<td>
<p>full path to folder containing input audio files</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>type</code></td>
<td>
<p>normalize so the output files has the same peak amplitude
('peak'), root mean square amplitude ('rms'), or subjective loudness in
sone ('loudness')</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>maxAmp</code></td>
<td>
<p>maximum amplitude in dB (0 = max possible, -10 = 10 dB below
max possible, etc.)</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>summaryFun</code></td>
<td>
<p>should the output files have the same mean / median / max
etc rms amplitude or loudness? (summaryFun has no effect if type = 'peak')</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>windowLength</code></td>
<td>
<p>length of FFT window, ms</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>step</code></td>
<td>
<p>you can override <code>overlap</code> by specifying FFT step, ms (NB:
because digital audio is sampled at discrete time intervals of
1/samplingRate, the actual step and thus the time stamps of STFT frames
may be slightly different, eg 24.98866 instead of 25.0 ms)</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>overlap</code></td>
<td>
<p>overlap between successive FFT frames, %</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>killDC</code></td>
<td>
<p>if TRUE, removed DC offset (see also <code>flatEnv</code>)</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>windowDC</code></td>
<td>
<p>the window for calculating DC offset, ms</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>saveAudio</code></td>
<td>
<p>full path to where the normalized files should be saved
(defaults to 'myfolder/normalized')</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>reportEvery</code></td>
<td>
<p>when processing multiple inputs, report estimated time
left every ... iterations (NULL = default, NA = don't report)</p>
</td>
</tr>
</table>
<h3>Details</h3>

<p>Algorithm: first all files are rescaled to have the same peak amplitude of
<code>maxAmp</code> dB. If <code>type = 'peak'</code>, the process ends here. If
<code>type = 'rms'</code>, there are two additional steps. First the original RMS
amplitude of all files is calculated per frame by <code>getRMS</code>. The
"quietest" sound with the lowest summary RMS value is not modified, so its
peak amplitude remains <code>maxAmp</code> dB. All the remaining sounds are
rescaled linearly, so that their summary RMS values becomes the same as that
of the "quietest" sound, and their peak amplitudes become smaller,
<code>&lt;maxAmp</code>. Finally, if <code>type = 'loudness'</code>, the subjective
loudness of each sound is estimated by <code>getLoudness</code>, which
assumes frequency sensitivity typical of human hearing. The following
normalization procedure is similar to that for <code>type = 'rms'</code>.
</p>


<h3>See Also</h3>

<p><code>getRMS</code> <code>analyze</code> <code>getLoudness</code>
</p>


<h3>Examples</h3>

<pre><code class="language-R">## Not run: 
# put a few short audio files in a folder, eg '~/Downloads/temp'
getRMS('~/Downloads/temp2', summaryFun = 'mean')$summary  # different
normalizeFolder('~/Downloads/temp2', type = 'rms', summaryFun = 'mean',
  saveAudio = '~/Downloads/temp2/normalized')
getRMS('~/Downloads/temp2/normalized', summaryFun = 'mean')$summary  # same
# If the saved audio files are treated as stereo with one channel missing,
# try reconverting with ffmpeg (saving is handled by tuneR::writeWave)

## End(Not run)
</code></pre>


</div>