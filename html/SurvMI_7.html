<div class="container">

<table style="width: 100%;"><tr>
<td>KMMI</td>
<td style="text-align: right;">R Documentation</td>
</tr></table>
<h2>Kaplan-Meier estimation with event uncertainty

</h2>

<h3>Description</h3>

<p>KM estimation for survival data when event uncertainty presents. KM plot will be output if plot=TRUE specfied.
</p>


<h3>Usage</h3>

<pre><code class="language-R">KMMI(data_list,nMI,covariates,data_orig = NULL,plot = TRUE,
time_var=NULL,event_var=NULL)
</code></pre>


<h3>Arguments</h3>

<table>
<tr style="vertical-align: top;">
<td><code>data_list</code></td>
<td>

<p>The data list which has been transformed from the long format by uc_data_transform function.
</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>nMI</code></td>
<td>

<p>Number of imputations (&gt;1). If missing, weighted statistics would be output instead.
</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>covariates</code></td>
<td>

<p>The grouping varaible, no need to be factorized. If missing then the overall KM is returned.
</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>plot</code></td>
<td>

<p>T/F, whether output a KM plot, the plot potentially contains KM curves from original dataset and imputed/weighted dataset.
</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>data_orig</code></td>
<td>

<p>The original data without any uncertain events. If supplies then user can compare results from certain events only and all possible events.
</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>time_var</code></td>
<td>

<p>Time variable in data_orig. If user provides the orig dataset then user need to specify the time and event indicator variable in the orignal dataset.
</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>event_var</code></td>
<td>

<p>Event indicator variable in the original data set.
</p>
</td>
</tr>
</table>
<h3>Value</h3>

<table>
<tr style="vertical-align: top;">
<td><code>KM_mi</code></td>
<td>
<p>A dataset contains MI estimation and variance at all potential event time</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>KM_cook</code></td>
<td>
<p>A dataset contains weighted KM estimation and variance at all potential event time</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>ngroup</code></td>
<td>
<p>Number of groups</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>cate_level</code></td>
<td>
<p>Values of the categorical variable</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>nMI</code></td>
<td>
<p>Number of imputed datasets</p>
</td>
</tr>
</table>
<h3>Author(s)</h3>

<p>Yiming Chen
</p>


<h3>References</h3>

<p>[1]Cook TD. Adjusting survival analysis for the presence of unadjudicated study events. Controlled clinical trials. 2000;21(3):208-222.
</p>
<p>[2]Cook TD, Kosorok MR. Analysis of time-to-event data with incomplete event adjudication. Journal of the american statistical association. 2004;99(468):1140-1152.
</p>
<p>[3]Klein JP, Moeschberger ML. Survival Analysis : Techniques for Censored and Truncated Data. New York: Springer; 1997.
</p>
<p>[4]Rubin DB. Multiple Imputation for Nonresponse in Surveys. New York: Wiley; 1987
</p>


<h3>See Also</h3>

<p><code>uc_data_transform</code>
</p>


<h3>Examples</h3>

<pre><code class="language-R">##an example with more potential event case
##data_orig was created as keeping the event with largest weights for individuals
df_x&lt;-data_sim(n=500,0.8,haz_c=0.5/365)
data_intrim&lt;-uc_data_transform(data=df_x,
                               var_list=c("id_long","trt_long"),
                               var_list_new=c("id","trt"),
                               time="time_long",
                               prob="prob_long")
df_y&lt;-data_sim2(data_list=data_intrim,covariates=c("trt"),percentage=1)
data_orig&lt;-df_y[df_y$prob==0|df_y$prob==1,]
data_orig&lt;-data_orig[!duplicated(data_orig$id),]
data_orig$cens&lt;-data_orig$prob


##weighted estimation
KM_res&lt;-KMMI(data_list=data_intrim,nMI=NULL,covariates=c("trt"),plot=TRUE,data_orig=NULL)

##MI estimation
KMMI(data_list=data_intrim,nMI=1000,covariates=c("trt"),plot=TRUE,data_orig=NULL)

data_intrim2&lt;-uc_data_transform(data=df_y, var_list=c("id","trt"),
                               var_list_new=NULL,time="time", prob="prob")

KMMI(data_list=data_intrim2,nMI=1000,covariates=c("trt"),plot=TRUE,data_orig=data_orig,
time_var=c("time"),event_var=c("cens"))

</code></pre>


</div>