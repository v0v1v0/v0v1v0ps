<div class="container">

<table style="width: 100%;"><tr>
<td>generate_model</td>
<td style="text-align: right;">R Documentation</td>
</tr></table>
<h2>Generate a model.</h2>

<h3>Description</h3>

<p>This function executes the <code>make_model</code> function provided by the user
and writes to file the resulting <code>Model</code> object(s).  For example,
when simulating regression with a fixed design, <code>X</code> would be generated
in this function and <code>n</code>, <code>p</code>, <code>beta</code>, and <code>sigma</code> would
also be specified.
</p>


<h3>Usage</h3>

<pre><code class="language-R">generate_model(object = ".", make_model, ..., seed = 123, vary_along = NULL)
</code></pre>


<h3>Arguments</h3>

<table>
<tr style="vertical-align: top;">
<td><code>object</code></td>
<td>
<p>the name of the directory where directory named "files" exists
(or should be created) to save <code>Model</code> object in.
Default is current working directory. Or can be an object of class
<code>Simulation</code>, in which case the <code>object@dir</code> is used
and a simulation object is returned instead of an object of class
<code>ModelRef</code>.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>make_model</code></td>
<td>
<p>a function that outputs an object of class
<code>Model</code>.  Or a list of such functions.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>...</code></td>
<td>
<p>optional parameters that may be passed to make_model</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>seed</code></td>
<td>
<p>an integer seed for the random number generator.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>vary_along</code></td>
<td>
<p>character vector with all elements contained in names(...)
See description for more details.</p>
</td>
</tr>
</table>
<h3>Details</h3>

<p>When <code>make_model</code> has arguments, these can be passed using <code>...</code>.
These will be passed directly to <code>make_model</code> except for any arguments
named in <code>vary_along</code>.  These arguments should be lists and a separate
model will be created for each combination of elements in these lists.  For
example, if <code>vary_along = c("n", "p")</code>, then we can pass
<code>n=as.list(c(50, 100, 150))</code> and <code>p=as.list(c(10, 100))</code> and 6
models will be created, one for each pair of <code>n</code> and <code>p</code>.  For each
pair (n,p), a distinct extension is added to the end of the model name. This
extension is generated using a hash function so that different values of the
vary_along parameters will lead to different model name extensions. This
ensures that if one later decides to add more values of the vary_along
parameters, this will not lead to pre-existing files being overwritten
(unless the same values of the vary_along combination are used again.
</p>
<p>If <code>object</code> is a directory name, the function returns a reference or
list of references to the model(s) generated. If <code>object</code> is a
<code>Simulation</code>, then function returns the same <code>Simulation</code> object
but with references added to the new models created.  These changes to the
<code>Simulation</code> object are saved to file.
</p>
<p><code>make_model</code> is called generating an object of class
<code>Model</code>, called <code>model</code>, which is saved to
<code>dir/name/model.Rdata</code> (where <code>name</code> is the name attribute of
<code>model</code>). This file also contains the random number generator state and
other information such as the function <code>make_model</code> itself and the date
when <code>model</code> was created.
</p>


<h3>See Also</h3>

<p><code>new_model</code> <code>simulate_from_model</code>
<code>run_method</code>
</p>


<h3>Examples</h3>

<pre><code class="language-R"> # initialize a new simulation
 sim &lt;- new_simulation(name = "normal-example",
                       label = "Normal Mean Estimation",
                       dir = tempdir())
 # generate a model (and add it to the simulation)
 sim &lt;- generate_model(sim, make_my_example_model, n = 20)
 # generate a sequence of models (and add them to the simulation)
 sim &lt;- generate_model(sim, make_my_example_model,
                       n = list(10, 20, 30),
                       vary_along = "n")
</code></pre>


</div>