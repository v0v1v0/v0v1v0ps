<div class="container">

<table style="width: 100%;"><tr>
<td>threshold_percentile_plot</td>
<td style="text-align: right;">R Documentation</td>
</tr></table>
<h2>Threshold Percentile Plot</h2>

<h3>Description</h3>

<p>Observed data compared against user-defined percentiles
</p>


<h3>Usage</h3>

<pre><code class="language-R">threshold_percentile_plot(swmpr_in, ...)

## S3 method for class 'swmpr'
threshold_percentile_plot(
  swmpr_in,
  param = NULL,
  hist_rng = NULL,
  target_yr = NULL,
  percentiles = c(0.05, 0.95),
  free_y = FALSE,
  by_month = FALSE,
  log_trans = FALSE,
  converted = FALSE,
  plot_title = FALSE,
  ...
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr style="vertical-align: top;">
<td><code>swmpr_in</code></td>
<td>
<p>input swmpr object</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>...</code></td>
<td>
<p>additional arguments passed to other methods (not used for this function).</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>param</code></td>
<td>
<p>chr, variable to plot</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>hist_rng</code></td>
<td>
<p>num, years to include in the plot. This variable can either be one year (e.g., <code>hist_rng = 2012</code>), or two years (e.g. <code>hist_rng = c(2012, 2016)</code>) , If range is not specified then the entire data set will be used.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>target_yr</code></td>
<td>
<p>num, year of interest for plotting. If not specified, the entire data set will be plotted.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>percentiles</code></td>
<td>
<p>num, percentiles to calculate (maximum: 2). Defaults to 5th and 95th percentiles.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>free_y</code></td>
<td>
<p>logical, should the y-axis be free? Defaults to <code>FALSE</code>. If <code>FALSE</code>, defaults to zero, unless negative values are present. If <code>TRUE</code>, y-axis limits are selected by <code>ggplot</code></p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>by_month</code></td>
<td>
<p>logical. should percentiles be calculated on a monthly basis? Defaults to <code>FALSE</code></p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>log_trans</code></td>
<td>
<p>logical, should y-axis be log? Defaults to <code>FALSE</code></p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>converted</code></td>
<td>
<p>logical, were the units converted from the original units used by CDMO? Defaults to <code>FALSE</code>. See <code>y_labeler</code> for details.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>plot_title</code></td>
<td>
<p>logical, should the station name be included as the plot title? Defaults to <code>FALSE</code></p>
</td>
</tr>
</table>
<h3>Details</h3>

<p>This function provides an alternative to <code>threshold_criteria_plot</code>. For parameters that may not have numeric threshold criteria, a percentile threshold can be used instead. For a one-tailed analysis, the 90-th percentile is recommended. For a two-tailed analysis, the 5-th and 95-th percentiles are recommended.
</p>
<p>Using <code>by_month</code>, the user can specify whether the percentiles should be calculated on a monthly basis or by using the entire data set.
</p>
<p>Recommended thresholds for chlorophyll-a, dissolved inorganic nitrogen, dissolved inorganic phosphorus, and dissolved oxygen can be found in the National Coastal Condition Assessment 2010 (USEPA 2016)
</p>


<h3>Value</h3>

<p>Returns a <code>ggplot</code> object
</p>


<h3>Author(s)</h3>

<p>Julie Padilla
</p>


<h3>References</h3>

<p>United States Environmental Protection Agency (USEPA). 2015. "National Coastal Condition Assessment 2010". EPA 841-R-15-006.
https://cfpub.epa.gov/si/si_public_record_Report.cfm?Lab=OWOW&amp;dirEntryId=327030
</p>


<h3>See Also</h3>

<p><code>ggplot</code>
</p>


<h3>Examples</h3>

<pre><code class="language-R">dat_wq &lt;- qaqc(elksmwq, qaqc_keep = c(0, 3, 5))
dat_wq &lt;- subset(dat_wq, subset = '2007-01-01 0:00', operator = '&gt;=')

x &lt;-
  threshold_percentile_plot(dat_wq, param = 'do_mgl'
                           , hist_rng = c(2013, 2014), by_month = FALSE)


y &lt;-
  threshold_percentile_plot(dat_wq, param = 'do_mgl', percentiles = c(0.95)
                           , hist_rng = c(2013, 2014), target_yr = 2014
                           , by_month = FALSE)

x2 &lt;-
  threshold_percentile_plot(dat_wq, param = 'do_mgl'
                           , hist_rng = c(2013, 2014), by_month = TRUE)

y2 &lt;-
  threshold_percentile_plot(dat_wq, param = 'do_mgl'
                           , hist_rng = c(2013, 2014), by_month = TRUE
                           , target_yr = 2014)


dat_nut &lt;- qaqc(elknmnut, qaqc_keep = c(0, 3, 5))
dat_nut &lt;- subset(dat_nut, subset = '2007-01-01 0:00', operator = '&gt;=')
dat_nut &lt;- rem_reps(dat_nut)

x3 &lt;-
  threshold_percentile_plot(dat_nut, param = 'chla_n'
                           , hist_rng = c(2007, 2014), by_month = FALSE)

y3 &lt;-
  threshold_percentile_plot(dat_nut, param = 'chla_n'
                           , hist_rng = c(2007, 2014), by_month = FALSE
                           , target_yr = 2016)


</code></pre>


</div>