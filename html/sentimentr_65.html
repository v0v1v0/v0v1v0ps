<div class="container">

<table style="width: 100%;"><tr>
<td>validate_sentiment</td>
<td style="text-align: right;">R Documentation</td>
</tr></table>
<h2>Validate Sentiment Score Sign Against Known Results</h2>

<h3>Description</h3>

<p>Provides a multiclass macroaverage/microaverage of precision, recall, 
accuracy, and F-score for the sign of the predicted sentiment against known 
sentiment scores.  There are three classes sentiment analysis generally 
predicts: positive (&gt; 0), negative (&lt; 0) and neutral (= 0).  In assessing 
model performance one can use macro- or micro- averaging across classes.  
Macroaveraging allows every class to have an equal say.  Microaveraging gives 
larger say to larger classes.
</p>


<h3>Usage</h3>

<pre><code class="language-R">validate_sentiment(predicted, actual, ...)
</code></pre>


<h3>Arguments</h3>

<table>
<tr style="vertical-align: top;">
<td><code>predicted</code></td>
<td>
<p>A numeric vector of predicted sentiment scores or a 
<span class="pkg">sentimentr</span> object that returns sentiment scores.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>actual</code></td>
<td>
<p>A numeric vector of known sentiment ratings.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>...</code></td>
<td>
<p>ignored.</p>
</td>
</tr>
</table>
<h3>Value</h3>

<p>Returns a <code>data.frame</code> with a macroaveraged and 
microaveraged model validation scores.  Additionally, the
<code>data.frame</code> has the following attributes:
</p>
<table>
<tr style="vertical-align: top;">
<td><code>confusion_matrix</code></td>
<td>
<p>A confusion matrix of all classes</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>class_confusion_matrices</code></td>
<td>
<p>A <code>list</code> of class level (class vs. all) confusion matrices</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>macro_stats</code></td>
<td>
<p>A <code>data.frame</code> of the macroaverged class level stats before averaging</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>mda</code></td>
<td>
<p>Mean Directional Accuracy</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>mare</code></td>
<td>
<p>Mean Absolute Rescaled Error</p>
</td>
</tr>
</table>
<h3>Note</h3>

<p>Mean Absolute Rescaled Error (MARE) is defined as: 
<code class="reqn">\frac{\sum{|actual - predicted|}}{2n}</code> and gives a sense of, on average, 
how far off were the rescaled predicted values (-1 to 1) from the rescaled 
actual values (-1 to 1).  A value of 0 means perfect accuracy.  A value of
1 means perfectly wrong every time.  A value of .5 represents expected value
for random guessing.  This measure is related to 
<a href="https://en.wikipedia.org/wiki/Mean_absolute_error">Mean Absolute Error</a>.
</p>


<h3>References</h3>

<p><a href="https://www.youtube.com/watch?v=OwwdYHWRB5E&amp;index=31&amp;list=PL6397E4B26D00A269">https://www.youtube.com/watch?v=OwwdYHWRB5E&amp;index=31&amp;list=PL6397E4B26D00A269</a> <br><a href="https://en.wikipedia.org/wiki/Mean_Directional_Accuracy_(MDA)">https://en.wikipedia.org/wiki/Mean_Directional_Accuracy_(MDA)</a>
</p>


<h3>Examples</h3>

<pre><code class="language-R">actual &lt;- c(1, 1, 1, 1, -1, -1, -1, -1, -1, -1, -1, 1,-1)
predicted &lt;- c(1, 0, 1, -1, 1, 0, -1, -1, -1, -1, 0, 1,-1)
validate_sentiment(predicted, actual)

scores &lt;- hu_liu_cannon_reviews$sentiment
mod &lt;- sentiment_by(get_sentences(hu_liu_cannon_reviews$text))

validate_sentiment(mod$ave_sentiment, scores)
validate_sentiment(mod, scores)

x &lt;- validate_sentiment(mod, scores)
attributes(x)$confusion_matrix
attributes(x)$class_confusion_matrices
attributes(x)$macro_stats

## Annie Swafford Example
swafford &lt;- data.frame(
    text = c(
        "I haven't been sad in a long time.",
        "I am extremely happy today.",
        "It's a good day.",
        "But suddenly I'm only a little bit happy.",
        "Then I'm not happy at all.",
        "In fact, I am now the least happy person on the planet.",
        "There is no happiness left in me.",
        "Wait, it's returned!",
        "I don't feel so bad after all!"
    ), 
    actual = c(.8, 1, .8, -.1, -.5, -1, -1, .5, .6), 
    stringsAsFactors = FALSE
)

pred &lt;- sentiment_by(swafford$text) 
validate_sentiment(
    pred,
    actual = swafford$actual
)
</code></pre>


</div>