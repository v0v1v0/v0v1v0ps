<div class="container">

<table style="width: 100%;"><tr>
<td>AUC.sh</td>
<td style="text-align: right;">R Documentation</td>
</tr></table>
<h2>AUC estimator proposed by Song and Zhou</h2>

<h3>Description</h3>

<p>Song and Zhou's estimators of AUC for right-censored time-to-event data
</p>


<h3>Usage</h3>

<pre><code class="language-R">AUC.sh(Surv.rsp, Surv.rsp.new=NULL, lp, lpnew, times, 
		type="incident", savesensspec=FALSE)
sens.sh(Surv.rsp, lp, lpnew, times, type="incident")
spec.sh(Surv.rsp, lp, lpnew, times)
</code></pre>


<h3>Arguments</h3>

<table>
<tr style="vertical-align: top;">
<td><code>Surv.rsp</code></td>
<td>
<p>A <code>Surv(.,.)</code> object containing to the outcome of the training data.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>Surv.rsp.new</code></td>
<td>
<p>A <code>Surv(.,.)</code> object containing the outcome of the test data.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>lp</code></td>
<td>
<p>The vector of predictors estimated from the training data.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>lpnew</code></td>
<td>
<p>The vector of predictors obtained from the test data.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>times</code></td>
<td>
<p>A vector of time points at which to evaluate AUC.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>type</code></td>
<td>
<p>A string defining the type of true positive rate (TPR):
<code>"incident"</code> refers to incident TPR ,
<code>"cumulative"</code> refers to cumulative TPR.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>savesensspec</code></td>
<td>
<p>A logical specifying whether sensitivities and specificities
should be saved.</p>
</td>
</tr>
</table>
<h3>Details</h3>

<p>The <code>sens.sh</code> and <code>spec.sh</code> functions implement the estimators of
time-dependent true and false positive rates proposed by Song and Zhou (2008).
</p>
<p>The <code>AUC.sh</code> function implements the estimators of cumulative/dynamic and
incident/dynamic AUC proposed by Song and Zhou (2008). These estimators are given
by the areas under the time-dependent ROC curves estimated by
<code>sens.sh</code> and <code>spec.sh</code>. In case of cumulative/dynamic
AUC, the <code>iauc</code> summary measure is given by the integral of AUC on
[0, max(<code>times</code>)] (weighted by the estimated probability density of
the time-to-event outcome). In case of incident/dynamic AUC, <code>iauc</code> is
given by the integral of AUC on [0, max(<code>times</code>)] (weighted by 2 times
the product of the estimated probability density and the estimated survival
function of the time-to-event outcome).
</p>
<p>The results obtained from <code>spec.sh</code>, <code>spec.sh</code> and <code>AUC.sh</code>
are valid as long as <code>lp</code> and <code>lpnew</code> are the predictors of
a correctly specified Cox proportional hazards model. In this case, the
estimators remain valid even if the censoring times depend on the values of
the predictors.
</p>


<h3>Value</h3>

<p><code>AUC.sh</code> returns an object of class <code>survAUC</code>. Specifically,
<code>AUC.sh</code> returns a list with the following components:
</p>
<table>
<tr style="vertical-align: top;">
<td><code>auc</code></td>
<td>
<p>The cumulative/dynamic or incident/dynamic AUC estimates
(evaluated at <code>times</code>).</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>times</code></td>
<td>
<p>The vector of time points at which AUC is evaluated.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>iauc</code></td>
<td>
<p>The summary measure of AUC.</p>
</td>
</tr>
</table>
<p><code>sens.sh</code> and <code>spec.sh</code> return matrices of dimensions <code>times</code> x
<code>lpnew + 1</code>. The elements of these matrices are the sensitivity and
specificity estimates for each threshold of <code>lpnew</code> and for each time point
specified in <code>times</code>.
</p>


<h3>References</h3>

<p>Song, X. and X.-H. Zhou (2008).<br> A semiparametric approach for the covariate
specific ROC curve with survival outcome.<br><em>Statistica Sinica</em>
<b>18</b>, 947â€“965.<br></p>


<h3>See Also</h3>

<p><code>AUC.uno</code>, <code>AUC.cd</code>, <code>AUC.hc</code>,
<code>GHCI</code>, <code>IntAUC</code>
</p>


<h3>Examples</h3>

<pre><code class="language-R">data(cancer,package="survival")
TR &lt;- ovarian[1:16,]
TE &lt;- ovarian[17:26,]
train.fit  &lt;- survival::coxph(survival::Surv(futime, fustat) ~ age,
                    x=TRUE, y=TRUE, method="breslow", data=TR)

lp &lt;- predict(train.fit)
lpnew &lt;- predict(train.fit, newdata=TE)
Surv.rsp &lt;- survival::Surv(TR$futime, TR$fustat)
Surv.rsp.new &lt;- survival::Surv(TE$futime, TE$fustat)
times &lt;- seq(10, 1000, 10)                  

AUC_sh &lt;- AUC.sh(Surv.rsp, Surv.rsp.new, lp, lpnew, times)
names(AUC_sh)
AUC_sh$iauc

</code></pre>


</div>