<div class="container">

<table style="width: 100%;"><tr>
<td>rtruncate</td>
<td style="text-align: right;">R Documentation</td>
</tr></table>
<h2>Generate a random set of values within a truncated range</h2>

<h3>Description</h3>

<p>Function generates data given a supplied random number generating function that
are constructed to fall within a particular range. Sampled values outside this
range are discarded and re-sampled until the desired criteria has been met.
</p>


<h3>Usage</h3>

<pre><code class="language-R">rtruncate(n, rfun, range, ..., redraws = 100L)
</code></pre>


<h3>Arguments</h3>

<table>
<tr style="vertical-align: top;">
<td><code>n</code></td>
<td>
<p>number of observations to generate. This should be the first argument
passed to <code>rfun</code></p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>rfun</code></td>
<td>
<p>a function to generate random values. Function can return
a numeric/integer vector or matrix, and additional arguments
requred for this function are passed through the argument <code>...</code></p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>range</code></td>
<td>
<p>a numeric vector of length two, where the first element
indicates the lower bound and the second the upper bound. When values are
generated outside these two bounds then data are redrawn until the bounded
criteria is met. When the output of <code>rfun</code> is a matrix then this input
can be specified as a matrix with two rows, where each the first row
corresponds to the lower bound and the second row the upper bound for
each generated column in the output</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>...</code></td>
<td>
<p>additional arguments to be passed to <code>rfun</code></p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>redraws</code></td>
<td>
<p>the maximum number of redraws to take before terminating the
iterative sequence. This is in place as a safety in case the <code>range</code>
is too small given the random number generator, causing too many
consecutive rejections. Default is 100</p>
</td>
</tr>
</table>
<h3>Details</h3>

<p>In simulations it is often useful to draw numbers from truncated distributions
rather than across the full theoretical range. For instance, sampling parameters
within the range [-4,4] from a normal distribution. The <code>rtruncate</code>
function has been designed to accept any sampling function, where the first
argument is the number of values to sample, and will draw values iteratively
until the number of values within the specified bound are obtained.
In situations where it is unlikely for the bounds to be located
(e.g., sampling from a standard normal distribution where all values are
within [-10,-6]) then the sampling scheme will throw an error if too many
re-sampling executions are required (default will stop if more that 100
calls to <code>rfun</code> are required).
</p>


<h3>Value</h3>

<p>either a numeric vector or matrix, where all values are within the
desired <code>range</code>
</p>


<h3>Author(s)</h3>

<p>Phil Chalmers <a href="mailto:rphilip.chalmers@gmail.com">rphilip.chalmers@gmail.com</a>
</p>


<h3>References</h3>

<p>Chalmers, R. P., &amp; Adkins, M. C.  (2020). Writing Effective and Reliable
Monte Carlo Simulations with the SimDesign Package.
<code>The Quantitative Methods for Psychology, 16</code>(4), 248-280.
<a href="https://doi.org/10.20982/tqmp.16.4.p248">doi:10.20982/tqmp.16.4.p248</a>
</p>
<p>Sigal, M. J., &amp; Chalmers, R. P. (2016). Play it again: Teaching statistics
with Monte Carlo simulation. <code>Journal of Statistics Education, 24</code>(3),
136-156. <a href="https://doi.org/10.1080/10691898.2016.1246953">doi:10.1080/10691898.2016.1246953</a>
</p>


<h3>See Also</h3>

<p><code>runSimulation</code>
</p>


<h3>Examples</h3>

<pre><code class="language-R">
# n = 1000 truncated normal vector between [-2,3]
vec &lt;- rtruncate(1000, rnorm, c(-2,3))
summary(vec)

# truncated correlated multivariate normal between [-1,4]
mat &lt;- rtruncate(1000, rmvnorm, c(-1,4),
   sigma = matrix(c(2,1,1,1),2))
summary(mat)

# truncated correlated multivariate normal between [-1,4] for the
#  first column and [0,3] for the second column
mat &lt;- rtruncate(1000, rmvnorm, cbind(c(-1,4), c(0,3)),
   sigma = matrix(c(2,1,1,1),2))
summary(mat)

# truncated chi-square with df = 4 between [2,6]
vec &lt;- rtruncate(1000, rchisq, c(2,6), df = 4)
summary(vec)

</code></pre>


</div>