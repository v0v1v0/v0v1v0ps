<div class="container">

<table style="width: 100%;"><tr>
<td>multiple.synth</td>
<td style="text-align: right;">R Documentation</td>
</tr></table>
<h2>Function to Apply Synthetic Controls to Multiple Treated Units</h2>

<h3>Description</h3>

<p>Generates one synthetic control for each treated unit and calculates 
the difference between the treated and the synthetic control for each. 
Returns a vector with outcome values for the synthetic controls, 
a plot of average treatment effects, and if required generates placebos 
out of the donor pool to be used in conjunction with <code>plac.dist</code>. 
All arguments are the same used for <code>dataprep</code> in the <code>Synth</code>
package, except for <code>treated.units</code>, <code>treatment.time</code>, and 
<code>generate.placebos</code>.
</p>


<h3>Usage</h3>

<pre><code class="language-R">multiple.synth(
  foo,
  predictors,
  predictors.op,
  dependent,
  unit.variable,
  time.variable,
  special.predictors,
  treated.units,
  control.units,
  time.predictors.prior,
  time.optimize.ssr,
  unit.names.variable,
  time.plot,
  treatment.time,
  gen.placebos = FALSE,
  strategy = "sequential",
  Sigf.ipop = 5
)

multiple_synth(
  foo,
  predictors,
  predictors.op,
  dependent,
  unit.variable,
  time.variable,
  special.predictors,
  treated.units,
  control.units,
  time.predictors.prior,
  time.optimize.ssr,
  unit.names.variable,
  time.plot,
  treatment.time,
  gen.placebos = FALSE,
  strategy = "sequential",
  Sigf.ipop = 5
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr style="vertical-align: top;">
<td><code>foo</code></td>
<td>
<p>Dataframe with the panel data.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>predictors</code></td>
<td>
<p>Vector of column numbers or column-name character strings 
that identifies the predictors' columns. All predictors have to be numeric.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>predictors.op</code></td>
<td>
<p>A character string identifying the method (operator) 
to be used on the predictors. Default is <code>mean</code>.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>dependent</code></td>
<td>
<p>The column number or a string with the column name that 
corresponds to the dependent variable.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>unit.variable</code></td>
<td>
<p>The column number or a string with the column name 
that identifies unit numbers. The variable must be numeric.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>time.variable</code></td>
<td>
<p>The column number or a string with the column name 
that identifies the period (time) data. The variable must be numeric.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>special.predictors</code></td>
<td>
<p>A list object identifying additional predictors and 
their pre-treatment years and operators.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>treated.units</code></td>
<td>
<p>A vector identifying the <code>unit.variable</code> numbers of 
the treated units.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>control.units</code></td>
<td>
<p>A vector identifying the <code>unit.variable</code> numbers of 
the control units.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>time.predictors.prior</code></td>
<td>
<p>A numeric vector identifying the pretreatment 
periods over which the values for the outcome predictors should be averaged.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>time.optimize.ssr</code></td>
<td>
<p>A numeric vector identifying the periods of the 
dependent variable over which the loss function should be minimized 
between each treated unit and its synthetic control.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>unit.names.variable</code></td>
<td>
<p>The column number or string with column name 
identifying the variable with units' names. The variable must be a character.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>time.plot</code></td>
<td>
<p>A vector identifying the periods over which results are 
to be plotted with <code>path.plot</code></p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>treatment.time</code></td>
<td>
<p>A numeric value with the value in <code>time.variable</code>
that marks the intervention.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>gen.placebos</code></td>
<td>
<p>Logical. Whether a placebo (a synthetic control) 
for each unit in the donor pool should be constructed. Will increase 
computation time.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>strategy</code></td>
<td>
<p>The processing method you wish to use 
"sequential", "multicore" or "multisession" . Use "multicore" or "multisession" to parallelize operations
and reduce computing time. Default is <code>sequential</code>. Since SCtools &gt;= 0.3.2 "multiprocess" is deprecated.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>Sigf.ipop</code></td>
<td>
<p>The Precision setting for the ipop optimization routine. 
Default of 5.</p>
</td>
</tr>
</table>
<h3>Details</h3>

<p>The function runs <code>dataprep</code> and <code>synth</code> 
for each unit identified in <code>treated.units</code>. It saves the vector with 
predicted values for each synthetic control, to be used in estimating 
average treatment effects in applications of Synthetic Controls for 
multiple treated units.
</p>
<p>For further details on the arguments, see the documentation of 
<code>Synth</code>.
</p>


<h3>Value</h3>

<p>Data frame. Each column contains the outcome values for every 
time-point for one unit or its synthetic control. The last column contains 
the time-points.
</p>


<h3>Examples</h3>

<pre><code class="language-R">## Using the toy data from 'Synth':

library(Synth)
data(synth.data)
set.seed(42)

multi &lt;- multiple.synth(foo = synth.data,
                       predictors = c("X1"),
                       predictors.op = "mean",
                       dependent = "Y",
                       unit.variable = "unit.num",
                       time.variable = "year",
                       treatment.time = 1990,
                       special.predictors = list(
                         list("Y", 1991, "mean")
                       ),
                       treated.units = c(2,7),
                       control.units = c(29, 13, 17),
                       time.predictors.prior = c(1984:1989),
                       time.optimize.ssr = c(1984:1990),
                       unit.names.variable = "name",
                       time.plot = 1984:1996, gen.placebos =  FALSE, 
                       Sigf.ipop = 2)
## Plot with the average path of the treated units and the average of their
## respective synthetic controls:

multi$p

</code></pre>


</div>