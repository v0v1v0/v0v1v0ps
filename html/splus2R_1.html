<div class="container">

<table style="width: 100%;"><tr>
<td>allTrue</td>
<td style="text-align: right;">R Documentation</td>
</tr></table>
<h2>Test whether all expressions return TRUE</h2>

<h3>Description</h3>

<p>This is typically used to combine multiple <code>all.equal</code> tests
into a single test, in a test file called by <code>do.test</code>.
</p>


<h3>Usage</h3>

<pre><code class="language-R">allTrue(...)
</code></pre>


<h3>Arguments</h3>

<table><tr style="vertical-align: top;">
<td><code>...</code></td>
<td>
<p>Each argument is typically a call to <code>do.test</code> or
another expression that returns a logical value.</p>
</td>
</tr></table>
<h3>Details</h3>

<p>This is intended for use in test run by <code>do.test</code>.
A typical test may contain lines that create one or more
objects, followed by commands to check that those objects have
the expected structure and/or that calculations were correct.
By using <code>allTrue</code>, the tests can all be combined into the
same expression that created the objects, so that if an error
occurs it is easier to see where it occured.
</p>


<h3>Value</h3>

<p>if all inputs are <code>TRUE</code> the value is <code>TRUE</code>.
Otherwise a list indicating which arguments did not return
<code>TRUE</code>, containing the actual values.
</p>


<h3>Author(s)</h3>

<p>Tim Hesterberg</p>


<h3>See Also</h3>

<p><code>all.equal</code>,
<code>do.test</code>,
<code>expectStop</code>,
<code>expectWarnings</code>,
<code>identical</code>.
</p>


<h3>Examples</h3>

<pre><code class="language-R"># This is the type of expression that may be found in a test file
# to be run by do.test -- inside {} are lines that create one or
# more objects, followed by multiple tests (inside allTrue) that
# check those objects.
{
  y &lt;- rnorm(30)
  x &lt;- matrix(rnorm(60), ncol=2)
  fit &lt;- lm(y~x)
  allTrue(# are important components included?
          all(is.element(c("coefficients", "residuals", "effects", "rank",
                           "fitted.values", "assign", "df.residual", "call"),
                         names(fit))),
          {
            # do coefficients match the algebraic form?
            # The algebraic form is inaccurate, so allow greater tolerance
            X &lt;- cbind(1, x)
            all.equal(unname(fit$coefficients),
                      drop(solve( t(X) %*% X, t(X) %*% y)),
                      tol = 1e-5)
          },
          # are residuals computed correctly?
          all.equal(fit$residuals, y - X %*% fit$coefficients))
}
# The second test uses 'unname' to remove names and 'drop' to change a
# matrix to a vector, so the test should pass.
# The third test fails because fit$residuals is a vector with names
# while the %*% calculation returns a matrix.
</code></pre>


</div>