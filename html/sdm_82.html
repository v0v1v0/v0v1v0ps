<div class="container">

<table style="width: 100%;"><tr>
<td>niche</td>
<td style="text-align: right;">R Documentation</td>
</tr></table>
<h2>Generate and plot Ecological Niche</h2>

<h3>Description</h3>

<p>This function maps the species data (either presence/absence or probability of occurrence/habitat suitability) into a two-dimensional environmental space (i.e., based on two environmental variables) to characterise ecological niche based on the specified environmental variables.
</p>


<h3>Usage</h3>

<pre><code class="language-R">niche(x,h,n,.size,plot,out,...)

</code></pre>


<h3>Arguments</h3>

<table>
<tr style="vertical-align: top;">
<td><code>x</code></td>
<td>
<p>A <code>Raster*</code> object (or sdmdata) containing environmental variables</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>h</code></td>
<td>
<p>A <code>RasterLayer</code>, or <code>SpatialPoints</code>, or <code>sdmdata</code> object that represents species data either in the form of habitat suitability (e.g., probability of occurrence) or presence-absence (or even presence-only) data</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>n</code></td>
<td>
<p>A character vector specifying the names of environmental variables (two names) that should be used to map the ecological niche; if <code>h</code> is a <code>SpatialPoints</code> or <code>sdmdata</code> object, a third name may be added specifying the species name (e.g., the name of the column in <code>SpatialPointsDataFrame</code> contains species data)</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>.size</code></td>
<td>
<p>optional; a numeric value (default: 1e6) specifies the size of the maximum number of records should be used to generate the ecological niche map; would be useful when the <code>Raster*</code> object introduced in <code>x</code> is big, then a random sample with the specified .size will be drawn based on which the niche is generated</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>plot</code></td>
<td>
<p>logical, specifies whether the generated niche should be plotted</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>out</code></td>
<td>
<p>logical, specifies whether the niche should be returned by the function; it will be <code>TRUE</code> if <code>plot</code> is <code>FALSE</code></p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>...</code></td>
<td>
<p>additional arguments includingthe argument <code>gg</code> (see details) and other arguments that passed to the plot function</p>
</td>
</tr>
</table>
<h3>Details</h3>

<p>As an additional argument, a user may specify <code>gg</code> which is logical, specifies whether the plot should be generated using the ggplot2 package (if the package is installed), otherwise, the raster package is used to generate the plot.
</p>
<p>- <code>...</code>: additional arguments for the <code>plot</code> function (e.g., xlab, ylab, main, col, ...) can be used with the function
</p>


<h3>Value</h3>

<p>an object of class <code>.nicheRaster</code> that contains some information about the environmental variable, and a RasterLayer (100x100) that represents the two-dimensional ecological niche.
</p>


<h3>Author(s)</h3>

<p>Babak Naimi <a href="mailto:naimi.b@gmail.com">naimi.b@gmail.com</a>
</p>
<p><a href="https://www.r-gis.net/">https://www.r-gis.net/</a>
</p>
<p><a href="https://www.biogeoinformatics.org/">https://www.biogeoinformatics.org/</a>
</p>


<h3>References</h3>

<p>Naimi, B., Araujo, M.B. (2016) sdm: a reproducible and extensible R platform for species distribution modelling, Ecography, 39:368-375, DOI: 10.1111/ecog.01881
</p>


<h3>Examples</h3>

<pre><code class="language-R">## Not run: 

file &lt;- system.file("external/species.shp", package="sdm") # get the location of the species data

species &lt;- vect(file) # read the shapefile

path &lt;- system.file("external", package="sdm") # path to the folder contains the data

lst &lt;- list.files(path=path,pattern='asc$',full.names = T) # list the name of the raster files 


# stack is a function in the raster package, to read/create a multi-layers raster dataset
preds &lt;- rast(lst) # making a raster object

names(preds) # 4 environmental variables are used!

d &lt;- sdmData(formula=Occurrence~., train=species, predictors=preds)

d

# fit models:
m &lt;- sdm(Occurrence~.,data=d,methods=c('rf','glm','brt'))

# ensemble using weighted averaging based on AUC statistic:    
p1 &lt;- ensemble(m, newdata=preds,setting=list(method='weighted',stat='AUC'))
plot(p1, main='Habitat Suitability in Geographic Space')

# Mapping Ecological Niche using selected two variables
niche(x=preds, h=p1, c('precipitation','temperature'))

niche(x=preds, h=p1, c('vegetation','temperature'))

# in case if you do not have the habitat suitability map but species data:

niche(x=preds, h=species, c('vegetation','temperature','Occurrence'))


niche(x=preds, h=d, n=c('vegetation','temperature','Occurrence'), rnd=2) 
# rnd is the argument specifies the decimal degrees to which the values on axis rounded.




## End(Not run)
</code></pre>


</div>