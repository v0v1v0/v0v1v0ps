<div class="container">

<table style="width: 100%;"><tr>
<td>plotAvailWater</td>
<td style="text-align: right;">R Documentation</td>
</tr></table>
<h2>Visual Demonstration of Available Soil Water</h2>

<h3>Description</h3>

<p>Generate a simplistic diagram of the various fractions of water held within soil pore-space. Largely inspired by <a href="https://www.nature.com/scitable/knowledge/library/soil-water-dynamics-103089121/">Figure 2 from O'Geen (2013)</a>.
</p>


<h3>Usage</h3>

<pre><code class="language-R">plotAvailWater(
  x,
  width = 0.25,
  cols = c(grey(0.5), "DarkGreen", "LightBlue", "RoyalBlue"),
  name.cex = 0.8,
  annotate = TRUE
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr style="vertical-align: top;">
<td><code>x</code></td>
<td>
<p>a <code>data.frame</code> containing sample names and water retention data, see examples below</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>width</code></td>
<td>
<p>vertical width of each bar graph</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>cols</code></td>
<td>
<p>a vector of colors used to symbolize 'solid phase', 'unavailable water', 'available water', and 'gravitational water'</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>name.cex</code></td>
<td>
<p>character scaling of horizon names, printed on left-hand side of figure</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>annotate</code></td>
<td>
<p>logical, annotate AWC</p>
</td>
</tr>
</table>
<h3>Value</h3>

<p>nothing, function is called to generate graphical output
</p>


<h3>Author(s)</h3>

<p>D.E. Beaudette
</p>


<h3>References</h3>

<p>O'Geen, A. T. (2013) Soil Water Dynamics. Nature Education Knowledge 4(5):9.
</p>


<h3>Examples</h3>

<pre><code class="language-R">

# demonstration
s &lt;- data.frame(
  name = c('loamy sand', 'sandy loam', 'silt loam', 'clay loam'), 
  pwp = c(0.05, 0.1, 0.18, 0.2), 
  fc = c(0.1, 0.2, 0.38, 0.35), 
  sat = c(0.25, 0.3, 0.45, 0.4))
s$solid &lt;- with(s, 1-sat)

par(mar=c(5, 6, 0.5, 0.5))
plotAvailWater(s, name.cex=1.25)



  
  if(requireNamespace("aqp")) {
    
    # demonstration using idealized AWC by soil texture
    data("ROSETTA.centroids", package = "aqp")
    
    # subset columns
    x &lt;- ROSETTA.centroids[, c('texture', 'pwp', 'fc', 'sat', 'awc')]
    
    # adjust to expected names / additional data required by plotAvailWater
    names(x)[1] &lt;- 'name'
    x$solid &lt;- with(x, 1 - sat)
    
    # re-order based on approximate AWC
    x &lt;- x[order(x$awc), ]
    
    op &lt;- par(no.readonly = TRUE)
    
    par(mar=c(5, 6.5, 0.5, 0.5))
    plotAvailWater(x, name.cex = 1)
    
    par(op)
    
  }
  
  
  # use some real data from SSURGO
  if(requireNamespace("curl") &amp;
     curl::has_internet() &amp;
     require(soilDB)) {
    
    q &lt;- "SELECT hzdept_r as hztop, hzdepb_r as hzbottom, 
hzname as name, wsatiated_r/100.0 as sat, 
wthirdbar_r/100.0 as fc, wfifteenbar_r/100.0 as pwp, awc_r as awc
FROM chorizon 
WHERE cokey IN (SELECT cokey from component where compname = 'dunstone') 
AND wsatiated_r IS NOT NULL 
ORDER BY cokey, hzdept_r ASC;"
    
    x &lt;- SDA_query(q)
    x &lt;- unique(x)
    x &lt;- x[order(x$name), ]
    x$solid &lt;- with(x, 1-sat)
    
    op &lt;- par(no.readonly = TRUE)
    
    par(mar=c(5, 5, 0.5, 0.5))
    plotAvailWater(x)
    
    par(op)
  }
  


</code></pre>


</div>