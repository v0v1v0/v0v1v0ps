<div class="container">

<table style="width: 100%;"><tr>
<td>addFormattedXAxis</td>
<td style="text-align: right;">R Documentation</td>
</tr></table>
<h2>
Formatted Time Axis for <code>"sts"</code> Objects
</h2>

<h3>Description</h3>

<p>Add a nicely formatted x-axis to time series plots related to the
<code>"sts"</code> class. This utility function is, e.g., used
by <code>stsplot_time1</code> and <code>plotHHH4_fitted1</code>.
</p>


<h3>Usage</h3>

<pre><code class="language-R">addFormattedXAxis(x, epochsAsDate = FALSE,
                  xaxis.tickFreq = list("%Q"=atChange),
                  xaxis.labelFreq = xaxis.tickFreq,
                  xaxis.labelFormat = "%G\n\n%OQ",
                  ...)
</code></pre>


<h3>Arguments</h3>

<table>
<tr style="vertical-align: top;">
<td><code>x</code></td>
<td>

<p>an object of class <code>"sts"</code>.
</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>epochsAsDate</code></td>
<td>

<p>a logical indicating if the old (<code>FALSE</code>) or the new
(<code>TRUE</code>) and more flexible implementation should be used.
The <code>xaxis.*</code> arguments are only relevant for the new
implementation <code>epochsAsDate = TRUE</code>.
</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>xaxis.labelFormat,xaxis.tickFreq,xaxis.labelFreq</code></td>
<td>

<p>see the details below.
</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>...</code></td>
<td>

<p>further arguments passed to <code>axis</code>.
</p>
</td>
</tr>
</table>
<h3>Details</h3>

<p>The setting <code>epochsAsDate = TRUE</code>
enables very flexible formatting of the x-axis and its
annotations using the <code>xaxis.tickFreq</code>, <code>xaxis.labelFreq</code>
and <code>xaxis.labelFormat</code> arguments. The first two are named lists containing
pairs with the <em>name</em> being a <code>strftime</code> single
conversion specification and the second part is a function which based
on this conversion returns a subset of the rows in the <code>sts</code>
objects. The subsetting function has the following header:
<code>function(x,xm1)</code>, where <code>x</code> is a vector containing
the result of applying the conversion in <code>name</code> to the epochs of
the <code>sts</code> object and <code>xm1</code> is the scalar result when
applying the conversion to the natural element just before the first
epoch. Please note that the input to the subsetting function is converted
using <code>as.numeric</code> before calling the function. Hence, the
conversion specification needs to result in a string convertible to integer.
</p>
<p>Three predefined subsetting functions exist:
<code>atChange</code>, <code>at2ndChange</code>  and <code>atMedian</code>, which
are used to make a tick at each (each 2nd for <code>at2ndChange</code>)
change and at the median index computed on all having the same value,
respectively:
</p>
<pre>
    atChange &lt;- function(x,xm1) which(diff(c(xm1,x)) != 0)
    at2ndChange &lt;- function(x,xm1) which(diff(c(xm1,x) %/% 2) != 0)
    atMedian &lt;- function(x,xm1) tapply(seq_along(x), INDEX=x, quantile, prob=0.5, type=3)
  </pre>
<p>By defining own functions here, one can obtain an arbitrary degree of
flexibility.
</p>
<p>Finally, <code>xaxis.labelFormat</code> is a <code>strftime</code>
compatible formatting string., e.g. the default value is
<code>"%G\n\n%OQ"</code>, which means ISO year and quarter (in roman
letters) stacked on top of each other.
</p>


<h3>Value</h3>

<p><code>NULL</code> (invisibly). The function is called for its side effects.
</p>


<h3>Author(s)</h3>

<p>Michael HÃ¶hle with contributions by Sebastian Meyer
</p>


<h3>See Also</h3>

<p>the examples in <code>stsplot_time1</code> and <code>plotHHH4_fitted1</code>
</p>


</div>