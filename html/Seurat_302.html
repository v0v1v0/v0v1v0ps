<div class="container">

<table style="width: 100%;"><tr>
<td>ProjectUMAP</td>
<td style="text-align: right;">R Documentation</td>
</tr></table>
<h2>Project query into UMAP coordinates of a reference</h2>

<h3>Description</h3>

<p>This function will take a query dataset and project it into the coordinates
of a provided reference UMAP. This is essentially a wrapper around two steps:
</p>

<ul>
<li>
<p>FindNeighbors - Find the nearest reference cell neighbors and their
distances for each query cell.
</p>
</li>
<li>
<p>RunUMAP - Perform umap projection by providing the neighbor set
calculated above and the umap model previously computed in the reference.
</p>
</li>
</ul>
<h3>Usage</h3>

<pre><code class="language-R">ProjectUMAP(query, ...)

## Default S3 method:
ProjectUMAP(
  query,
  query.dims = NULL,
  reference,
  reference.dims = NULL,
  k.param = 30,
  nn.method = "annoy",
  n.trees = 50,
  annoy.metric = "cosine",
  l2.norm = FALSE,
  cache.index = TRUE,
  index = NULL,
  neighbor.name = "query_ref.nn",
  reduction.model,
  ...
)

## S3 method for class 'DimReduc'
ProjectUMAP(
  query,
  query.dims = NULL,
  reference,
  reference.dims = NULL,
  k.param = 30,
  nn.method = "annoy",
  n.trees = 50,
  annoy.metric = "cosine",
  l2.norm = FALSE,
  cache.index = TRUE,
  index = NULL,
  neighbor.name = "query_ref.nn",
  reduction.model,
  ...
)

## S3 method for class 'Seurat'
ProjectUMAP(
  query,
  query.reduction,
  query.dims = NULL,
  reference,
  reference.reduction,
  reference.dims = NULL,
  k.param = 30,
  nn.method = "annoy",
  n.trees = 50,
  annoy.metric = "cosine",
  l2.norm = FALSE,
  cache.index = TRUE,
  index = NULL,
  neighbor.name = "query_ref.nn",
  reduction.model,
  reduction.name = "ref.umap",
  reduction.key = "refUMAP_",
  ...
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr style="vertical-align: top;">
<td><code>query</code></td>
<td>
<p>Query dataset</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>...</code></td>
<td>
<p>Additional parameters to <code>RunUMAP</code></p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>query.dims</code></td>
<td>
<p>Dimensions (columns) to use from query</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>reference</code></td>
<td>
<p>Reference dataset</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>reference.dims</code></td>
<td>
<p>Dimensions (columns) to use from reference</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>k.param</code></td>
<td>
<p>Defines k for the k-nearest neighbor algorithm</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>nn.method</code></td>
<td>
<p>Method for nearest neighbor finding. Options include: rann,
annoy</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>n.trees</code></td>
<td>
<p>More trees gives higher precision when using annoy approximate
nearest neighbor search</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>annoy.metric</code></td>
<td>
<p>Distance metric for annoy. Options include: euclidean,
cosine, manhattan, and hamming</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>l2.norm</code></td>
<td>
<p>Take L2Norm of the data</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>cache.index</code></td>
<td>
<p>Include cached index in returned Neighbor object
(only relevant if return.neighbor = TRUE)</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>index</code></td>
<td>
<p>Precomputed index. Useful if querying new data against existing
index to avoid recomputing.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>neighbor.name</code></td>
<td>
<p>Name to store neighbor information in the query</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>reduction.model</code></td>
<td>
<p><code>DimReduc</code> object that contains the umap model</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>query.reduction</code></td>
<td>
<p>Name of reduction to use from the query for neighbor
finding</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>reference.reduction</code></td>
<td>
<p>Name of reduction to use from the reference for
neighbor finding</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>reduction.name</code></td>
<td>
<p>Name of projected UMAP to store in the query</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>reduction.key</code></td>
<td>
<p>Value for the projected UMAP key</p>
</td>
</tr>
</table>
</div>