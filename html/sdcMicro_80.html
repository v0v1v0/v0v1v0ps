<div class="container">

<table style="width: 100%;"><tr>
<td>sdcMicro-package</td>
<td style="text-align: right;">R Documentation</td>
</tr></table>
<h2>sdcMicro: Statistical Disclosure Control Methods for Anonymization of Data and Risk Estimation</h2>

<h3>Description</h3>

<p>Data from statistical agencies and other institutions are mostly confidential. This package, introduced in Templ, Kowarik and Meindl (2017) <a href="https://doi.org/10.18637/jss.v067.i04">doi:10.18637/jss.v067.i04</a>, can be used for the generation of anonymized (micro)data, i.e. for the creation of public- and scientific-use files. The theoretical basis for the methods implemented can be found in Templ (2017) <a href="https://doi.org/10.1007/978-3-319-50272-4">doi:10.1007/978-3-319-50272-4</a>. Various risk estimation and anonymization methods are included. Note that the package includes a graphical user interface published in Meindl and Templ (2019) <a href="https://doi.org/10.3390/a12090191">doi:10.3390/a12090191</a> that allows to use various methods of this package.
</p>
<p>This package includes all methods of the popular software mu-Argus plus
several new methods. In comparison with mu-Argus the advantages of this
package are that the results are fully reproducible even with the included
GUI, that the package can be used in batch-mode from other software, that
the functions can be used in a very flexible way, that everybody could look
at the source code and that there are no time-consuming meta-data management
is necessary. However, the user should have a detailed knowledge about SDC
when applying the methods on data.
</p>


<h3>Details</h3>

<p>The package is programmed using S4-classes and it comes with a well-defined
class structure.
</p>
<p>The implemented graphical user interface (GUI) for microdata protection
serves as an easy-to-handle tool for users who want to use the sdcMicro
package for statistical disclosure control but are not used to the native R
command line interface.  In addition to that, interactions between objects
which results from the anonymization process are provided within the GUI.
This allows an automated recalculation and displaying information of the
frequency counts, individual risk, information loss and data utility after
each anonymization step. In addition to that, the code for every
anonymization step carried out within the GUI is saved in a script which can
then be easily modified and reloaded.
</p>

<table>
<tr>
<td style="text-align: left;"> Package: </td>
<td style="text-align: left;"> sdcMicro</td>
</tr>
<tr>
<td style="text-align: left;"> Type: </td>
<td style="text-align: left;"> Package</td>
</tr>
<tr>
<td style="text-align: left;"> Version: </td>
<td style="text-align: left;">
2.5.9</td>
</tr>
<tr>
<td style="text-align: left;"> Date: </td>
<td style="text-align: left;"> 2009-07-22</td>
</tr>
<tr>
<td style="text-align: left;"> License: </td>
<td style="text-align: left;"> GPL 2.0 </td>
</tr>
<tr>
<td style="text-align: left;"> </td>
</tr>
</table>
<h3>Author(s)</h3>

<p><strong>Maintainer</strong>: Matthias Templ <a href="mailto:matthias.templ@gmail.com">matthias.templ@gmail.com</a> (<a href="https://orcid.org/0000-0002-8638-5276">ORCID</a>)
</p>
<p>Authors:
</p>

<ul>
<li>
<p> Bernhard Meindl <a href="mailto:Bernhard.Meindl@statistik.gv.at">Bernhard.Meindl@statistik.gv.at</a>
</p>
</li>
<li>
<p> Alexander Kowarik <a href="mailto:Alexander.Kowarik@statistik.gv.at">Alexander.Kowarik@statistik.gv.at</a> (<a href="https://orcid.org/0000-0001-8598-4130">ORCID</a>)
</p>
</li>
<li>
<p> Johannes Gussenbauer <a href="mailto:johannes.gussenbauer@statistik.gv.at">johannes.gussenbauer@statistik.gv.at</a>
</p>
</li>
</ul>
<p>Other contributors:
</p>

<ul>
<li>
<p> Organisation For Economic Co-Operation And Development (Initial published c(++) code (under LGPL) code for rank swapping, mdav-microaggregation, suda2 and other (hierarchical) risk measures) [copyright holder]
</p>
</li>
<li>
<p> Statistics Netherlands (microAggregation cpp code (under EUPL v1.1)) [copyright holder]
</p>
</li>
<li>
<p> Pascal Heus (original measure threshold cpp code (under LGPL)) [copyright holder]
</p>
</li>
</ul>
<p>Matthias Templ, Alexander Kowarik, Bernhard Meindl
</p>
<p>Maintainer: Matthias Templ &lt;templ@statistik.tuwien.ac.at&gt;
</p>


<h3>References</h3>

<p>Templ, M. Statistical Disclosure Control for Microdata: Methods and Applications in R.
<em>Springer International Publishing</em>, 287 pages, 2017. ISBN 978-3-319-50272-4.
<a href="https://doi.org/10.1007/978-3-319-50272-4">doi:10.1007/978-3-319-50272-4</a>
</p>
<p>Templ, M. and Kowarik, A. and Meindl, B.
Statistical Disclosure Control for Micro-Data Using the R Package sdcMicro.
<em>Journal of Statistical Software</em>, <strong>67</strong> (4), 1â€“36, 2015. <a href="https://doi.org/10.18637/jss.v067.i04">doi:10.18637/jss.v067.i04</a>
</p>
<p>Templ, M. and Meindl, B. <em>Practical Applications in
Statistical Disclosure Control Using R</em>, Privacy and Anonymity in
Information Management Systems, Bookchapter, Springer London, pp. 31-62,
2010. <a href="https://doi.org/10.1007/978-1-84996-238-4_3">doi:10.1007/978-1-84996-238-4_3</a>
</p>
<p>Kowarik, A. and Templ, M. and Meindl, B. and Fonteneau, F. and Prantner, B.:
<em>Testing of IHSN Cpp Code and Inclusion of New Methods into sdcMicro</em>,
in: Lecture Notes in Computer Science, J. Domingo-Ferrer, I. Tinnirello
(editors.); Springer, Berlin, 2012, ISBN: 978-3-642-33626-3, pp. 63-77.
<a href="https://doi.org/10.1007/978-3-642-33627-0_6">doi:10.1007/978-3-642-33627-0_6</a>
</p>
<p>Templ, M.  <em>Statistical Disclosure Control for Microdata Using the
R-Package sdcMicro</em>, Transactions on Data Privacy, vol. 1, number 2, pp.
67-85, 2008. <a href="http://www.tdp.cat/issues/abs.a004a08.php">http://www.tdp.cat/issues/abs.a004a08.php</a>
</p>
<p>Templ, M.  <em>New Developments in Statistical Disclosure Control and
Imputation: Robust Statistics Applied to Official Statistics</em>,
Suedwestdeutscher Verlag fuer Hochschulschriften, 2009, ISBN: 3838108280,
264 pages.
</p>


<h3>See Also</h3>

<p>Useful links:
</p>

<ul><li> <p><a href="https://github.com/sdcTools/sdcMicro">https://github.com/sdcTools/sdcMicro</a>
</p>
</li></ul>
<h3>Examples</h3>

<pre><code class="language-R">
## example from Capobianchi, Polettini and Lucarelli:
data(francdat)
f &lt;- freqCalc(francdat, keyVars=c(2, 4:6), w = 8)
f
f$fk
f$Fk

## dealing with missing values:
x &lt;- francdat
x[3,5] &lt;- NA
x[4,2] &lt;- x[4,4] &lt;- NA
x[5,6]  &lt;- NA
x[6,2]  &lt;- NA
f2 &lt;- freqCalc(x, keyVars = c(2, 4:6), w = 8)
f2$fk
f2$Fk

## individual risk calculation:
indivf &lt;- indivRisk(f)
indivf$rk

## Local Suppression
localS &lt;- localSupp(f, keyVar = 2, threshold = 0.25)
f2 &lt;- freqCalc(localS$freqCalc, keyVars=c(2, 4:6), w = 8)
indivf2 &lt;- indivRisk(f2)
indivf2$rk

## select another keyVar and run localSupp() once again,
## if you think the table is not fully protected
data(free1)
free1 &lt;- as.data.frame(free1)
f &lt;- freqCalc(x = free1, keyVars = 1:3, w = 30)
ind &lt;- indivRisk(f)
## and now you can use the interactive plot for individual risk objects:
## plot(ind)

## example from Capobianchi, Polettini and Lucarelli:
data(francdat)
l1 &lt;- localSuppression(
  obj = francdat,
  keyVars=c(2, 4:6),
  importance = c(1, 3, 2, 4)
)
l1
l1$x
l2 &lt;- localSuppression(obj = francdat, keyVars=c(2, 4:6), k = 2)
l3 &lt;- localSuppression(obj = francdat, keyVars=c(2, 4:6), k = 4)

## Global recoding:
data(free1)
free1 &lt;- as.data.frame(free1)
free1[, "AGE"] &lt;- globalRecode(
  obj = free1[, "AGE"],
  breaks = c(1,9,19,29,39,49,59,69,100),
  labels = 1:8
)

## Top coding:
topBotCoding(
  obj = free1[, "DEBTS"],
  value = 9000,
  replacement = 9100,
  kind = "top"
)

## Numerical Rank Swapping:
data(Tarragona)
Tarragona1 &lt;- rankSwap(Tarragona, P = 10, K0 = NULL, R0 = NULL)

## Microaggregation:
m1 &lt;- microaggregation(Tarragona, method = "onedims", aggr = 3)
m2 &lt;- microaggregation(Tarragona, method = "pca", aggr = 3)

## using a subset because of computation time
valTable(Tarragona[1:50, ], method = c("simple", "onedims", "pca"))

data(microData)
microData &lt;- as.data.frame(microData)
m_micro &lt;- microaggregation(microData, method = "mdav")
summary(m_micro)
plotMicro(m_micro, 1, which.plot = 1)  # not enough observations...
data(free1)
free1 &lt;- as.data.frame(free1)
plotMicro(
  x = microaggregation(free1[,31:34], method = "onedims"),
  p = 1,
  which.plot = 1
)

## disclosure risk (interval) and data utility:
m1 &lt;- microaggregation(Tarragona, method = "onedims", aggr = 3)
dRisk(obj = Tarragona, xm = m1$mx)
dRisk(obj = Tarragona, xm = m2$mx)
dUtility(obj = Tarragona, xm = m1$mx)
dUtility(obj = Tarragona, xm = m2$mx)

## Fast generation of synthetic data with approximately
## the same covariance matrix as the original one.
data(mtcars)
cov(mtcars[, 4:6])
df_gen &lt;- dataGen(obj = mtcars[, 4:6], n = 200)
cov(df_gen)
pairs(mtcars[, 4:6])
pairs(df_gen)

## Post-Randomization (PRAM)
x &lt;- factor(sample(1:4, 250, replace = TRUE))
pr1 &lt;- pram(x)
length(which(pr1$x_pram == x))
summary(pr1)
x2 &lt;- factor(sample(1:4, 250, replace=TRUE))
length(which(pram(x2)$x_pram == x2))

data(free1)
marstat &lt;- as.factor(free1[,"MARSTAT"])
marstatPramed &lt;- pram(marstat)
summary(marstatPramed)

## The same functionality can be also applied to `sdcMicroObj`-objects
data(testdata)

## undo-functionality is by default restricted to data sets
## with &lt;= `1e5` rows; to modify, env-var `sdcMicro_maxsize_undo`
## can to be changed before creating a problem instance
Sys.setenv("sdcMicro_maxsize_undo" = 1e6)

## create an object
testdata$water &lt;- factor(testdata$water)
sdc &lt;- createSdcObj(
  dat = testdata,
  keyVars = c("urbrur", "roof", "walls", "electcon", "water", "relat", "sex"),
  numVars = c("expend", "income", "savings"),
  w = "sampling_weight"
)
head(sdc@manipNumVars)

## Display risk-measures
sdc@risk$global
sdc &lt;- dRisk(sdc)
sdc@risk$numeric

## Generation of synthetic data
synthdat &lt;- dataGen(sdc)

## use addNoise with default parameters (not suggested)
sdc &lt;- addNoise(sdc, variables = c("expend", "income"))
head(sdc@manipNumVars)
sdc@risk$numeric

## undolast step (remove adding noise)
sdc &lt;- undolast(sdc)
head(sdc@manipNumVars)
sdc@risk$numeric

## apply addNoise() with custom parameters
sdc &lt;- addNoise(sdc, noise = 0.2)
head(sdc@manipNumVars)
sdc@risk$numeric

## LocalSuppression
sdc &lt;- undolast(sdc)
head(sdc@risk$individual)
sdc@risk$global
sdc &lt;- localSuppression(sdc)
head(sdc@risk$individual)
sdc@risk$global

## microaggregation
sdc &lt;- undolast(sdc)
head(get.sdcMicroObj(sdc, type = "manipNumVars"))
sdc &lt;- microaggregation(sdc)
head(get.sdcMicroObj(sdc, type = "manipNumVars"))

## Post-Randomization
sdc &lt;- undolast(sdc)
head(sdc@risk$individual)
sdc@risk$global
sdc &lt;- pram(sdc, variables = "water")
head(sdc@risk$individual)
sdc@risk$global

## rankSwap
sdc &lt;- undolast(sdc)
head(sdc@risk$individual)
sdc@risk$global
head(get.sdcMicroObj(sdc, type = "manipNumVars"))
sdc &lt;- rankSwap(sdc)
head(get.sdcMicroObj(sdc, type = "manipNumVars"))
head(sdc@risk$individual)
sdc@risk$global


## topBotCoding
head(get.sdcMicroObj(sdc, type = "manipNumVars"))
sdc@risk$numeric
sdc &lt;- topBotCoding(
  obj = sdc,
  value = 60000000,
  replacement = 62000000,
  column = "income"
)
head(get.sdcMicroObj(sdc, type = "manipNumVars"))
sdc@risk$numeric

## LocalRecProg
data(testdata2)
keyVars &lt;- c("urbrur", "roof", "walls", "water", "sex")
w &lt;- "sampling_weight"
sdc &lt;- createSdcObj(testdata2,
  keyVars = keyVars,
  weightVar = w
)
sdc@risk$global
sdc &lt;- LocalRecProg(sdc)
sdc@risk$global

## Model-based risks using a formula
form &lt;- as.formula(paste("~", paste(keyVars, collapse = "+")))
sdc &lt;- modRisk(sdc, method = "default", formulaM = form)
get.sdcMicroObj(sdc, "risk")$model

sdc &lt;- modRisk(sdc, method = "CE", formulaM = form)
get.sdcMicroObj(sdc, "risk")$model

sdc &lt;- modRisk(sdc, method = "PML", formulaM = form)
get.sdcMicroObj(sdc, "risk")$model

sdc &lt;- modRisk(sdc, method = "weightedLLM", formulaM = form)
get.sdcMicroObj(sdc, "risk")$model

sdc &lt;- modRisk(sdc, method = "IPF", formulaM = form)
get.sdcMicroObj(sdc, "risk")$model

</code></pre>


</div>