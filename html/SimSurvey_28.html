<div class="container">

<table style="width: 100%;"><tr>
<td>sim_abundance</td>
<td style="text-align: right;">R Documentation</td>
</tr></table>
<h2>Simulate basic population dynamics model</h2>

<h3>Description</h3>

<p>Simulate basic population dynamics model
</p>


<h3>Usage</h3>

<pre><code class="language-R">sim_abundance(
  ages = 1:20,
  years = 1:20,
  Z = sim_Z(),
  R = sim_R(),
  N0 = sim_N0(),
  growth = sim_vonB()
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr style="vertical-align: top;">
<td><code>ages</code></td>
<td>
<p>Ages to include in the simulation.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>years</code></td>
<td>
<p>Years to include in the simulation.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>Z</code></td>
<td>
<p>Total mortality function, like <code>sim_Z</code>, for generating
mortality matrix.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>R</code></td>
<td>
<p>Recruitment (i.e. abundance at <code>min(ages)</code>) function, like
<code>sim_R</code>, for generating recruitment vector.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>N0</code></td>
<td>
<p>Starting abundance (i.e. abundance at <code>min(years)</code>) function, like
<code>sim_N0</code>, for generating starting abundance vector.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>growth</code></td>
<td>
<p>Closure, such as <code>sim_vonB</code>, for simulating length given age.
The function is used here to generate a abundance-at-age matrix and
it is carried forward for later use in <code>sim_survey</code> to simulate
lengths from survey catch at age.</p>
</td>
</tr>
</table>
<h3>Details</h3>

<p>Abundance from is calculated using a standard population dynamics model.
An abundance-at-length matrix is generated using a growth function coded as a closure like
<code>sim_vonB</code>. The function is retained for later use in <code>sim_survey</code>
to simulate lengths given simulated catch at age in a simulated survey. The ability to simulate
distributions by length is yet to be implemented.
</p>


<h3>Value</h3>

<p>A <code>list</code> of length 9:
</p>

<ul>
<li>
<p><code>ages</code> - Vector of ages in the simulation
</p>
</li>
<li>
<p><code>lengths</code> - Vector of length groups (depends on growth function)
</p>
</li>
<li>
<p><code>years</code> - Vector of years in the simulation
</p>
</li>
<li>
<p><code>R</code> - Vector of recruitment values
</p>
</li>
<li>
<p><code>N0</code> - Vector of starting abundance values
</p>
</li>
<li>
<p><code>Z</code> - Matrix of total mortality values
</p>
</li>
<li>
<p><code>N</code> - Matrix of abundance values
</p>
</li>
<li>
<p><code>N_at_length</code> - Abundance at length matrix
</p>
</li>
<li>
<p><code>sim_length</code> - Function for simulating lengths given ages
</p>
</li>
</ul>
<h3>Examples</h3>

<pre><code class="language-R">
R_fun &lt;- sim_R(log_mean = log(100000), log_sd = 0.1, random_walk = TRUE, plot = TRUE)
R_fun(years = 1:100)
sim_abundance(R = sim_R(log_mean = log(100000), log_sd = 0.5))
sim_abundance(years = 1:20,
              R = sim_R(log_mean = log(c(rep(100000, 10), rep(10000, 10))), plot = TRUE))

Z_fun &lt;- sim_Z(log_mean = log(0.5), log_sd = 0.1, phi_age = 0.9, phi_year = 0.9, plot = TRUE)
Z_fun(years = 1:100, ages = 1:20)
sim_abundance(Z = sim_Z(log_mean = log(0.5), log_sd = 0.1, plot = TRUE))
Za_dev &lt;- c(-0.2, -0.1, 0, 0.1, 0.2, 0.3, 0.3, 0.2, 0.1, 0)
Zy_dev &lt;- c(-0.2, -0.2, -0.2, -0.2, -0.2, 2, 2, 2, 2, 0.2, 0.2, 0.2, 0.2, 0.2, 0, 0, 0, 0, 0, 0)
Z_mat &lt;- outer(Za_dev, Zy_dev, "+") + 0.5
sim_abundance(ages = 1:10, years = 1:20,
              Z = sim_Z(log_mean = log(Z_mat), plot = TRUE))
sim_abundance(ages = 1:10, years = 1:20,
              Z = sim_Z(log_mean = log(Z_mat), log_sd = 0, phi_age = 0, phi_year = 0, plot = TRUE))

N0_fun &lt;- sim_N0(N0 = "exp", plot = TRUE)
N0_fun(R0 = 1000, Z0 = rep(0.5, 20), ages = 1:20)
sim_abundance(N0 = sim_N0(N0 = "exp", plot = TRUE))

growth_fun &lt;- sim_vonB(Linf = 100, L0 = 5, K = 0.2, log_sd = 0.05, length_group = 1, plot = TRUE)
growth_fun(age = rep(1:15, each = 100))
growth_fun(age = 1:15, length_age_key = TRUE)
sim_abundance(growth = sim_vonB(plot = TRUE))

sim &lt;- sim_abundance()
plot_trend(sim)
plot_surface(sim, mat = "N")
plot_surface(sim, mat = "Z")
plot_surface(sim, mat = "N_at_length", xlab = "Length", zlab = "N")

</code></pre>


</div>