<div class="container">

<table style="width: 100%;"><tr>
<td>spiral_horizon</td>
<td style="text-align: right;">R Documentation</td>
</tr></table>
<h2>Draw horizon chart along the spiral</h2>

<h3>Description</h3>

<p>Draw horizon chart along the spiral
</p>


<h3>Usage</h3>

<pre><code class="language-R">spiral_horizon(
  x,
  y,
  y_max = max(abs(y)),
  n_slices = 4,
  slice_size,
  pos_fill = "#D73027",
  neg_fill = "#313695",
  use_bars = FALSE,
  bar_width = min(diff(x)),
  negative_from_top = FALSE,
  track_index = current_track_index()
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr style="vertical-align: top;">
<td><code>x</code></td>
<td>
<p>X-locations of the data points.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>y</code></td>
<td>
<p>Y-locations of the data points.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>y_max</code></td>
<td>
<p>Maximal absolute value on y-axis.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>n_slices</code></td>
<td>
<p>Number of slices.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>slice_size</code></td>
<td>
<p>Size of the slices. The final number of sizes is <code>ceiling(max(abs(y))/slice_size)</code>.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>pos_fill</code></td>
<td>
<p>Colors for positive values.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>neg_fill</code></td>
<td>
<p>Colors for negative values.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>use_bars</code></td>
<td>
<p>Whether to use bars?</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>bar_width</code></td>
<td>
<p>Width of bars.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>negative_from_top</code></td>
<td>
<p>Should negative distribution be drawn from the top?</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>track_index</code></td>
<td>
<p>Index of the track.</p>
</td>
</tr>
</table>
<h3>Details</h3>

<p>Since the track height is very small in the spiral, horizon chart visualization is an efficient way to visualize
distribution-like graphics.
</p>


<h3>Value</h3>

<p>A list of the following objects:
</p>

<ul>
<li>
<p> a color mapping function for colors.
</p>
</li>
<li>
<p> a vector of intervals that split the data.
</p>
</li>
</ul>
<h3>See Also</h3>

<p><code>horizon_legend()</code> for generating the legend.
</p>


<h3>Examples</h3>

<pre><code class="language-R">
df = readRDS(system.file("extdata", "global_temperature.rds", package = "spiralize"))
df = df[df$Source == "GCAG", ]
spiral_initialize_by_time(xlim = range(df$Date), unit_on_axis = "months", period = "year",
    period_per_loop = 20, polar_lines_by = 360/20)
spiral_track()
spiral_horizon(df$Date, df$Mean, use_bar = TRUE)

# with legend
require(ComplexHeatmap)
spiral_initialize_by_time(xlim = range(df$Date), unit_on_axis = "months", period = "year",
    period_per_loop = 20, polar_lines_by = 360/20, 
    vp_param = list(x = unit(0, "npc"), just = "left"))
spiral_track()
lt = spiral_horizon(df$Date, df$Mean, use_bar = TRUE)
lgd = horizon_legend(lt, title = "Temperature difference")
draw(lgd, x = unit(1, "npc") + unit(2, "mm"), just = "left")

</code></pre>


</div>