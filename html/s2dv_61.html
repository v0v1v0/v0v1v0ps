<div class="container">

<table style="width: 100%;"><tr>
<td>ProbBins</td>
<td style="text-align: right;">R Documentation</td>
</tr></table>
<h2>Compute probabilistic information of a forecast relative to a threshold or a quantile</h2>

<h3>Description</h3>

<p>Compute probabilistic bins of a set of forecast years ('fcyr') relative to 
the forecast climatology over the whole period of anomalies, optionally excluding 
the selected forecast years ('fcyr') or the forecast year for which the 
probabilistic bins are being computed (see 'compPeriod').
</p>


<h3>Usage</h3>

<pre><code class="language-R">ProbBins(
  data,
  thr,
  fcyr = "all",
  time_dim = "sdate",
  memb_dim = "member",
  quantile = TRUE,
  compPeriod = "Full period",
  ncores = NULL
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr style="vertical-align: top;">
<td><code>data</code></td>
<td>
<p>An numeric array of anomalies with the dimensions 'time_dim' and
'memb_dim' at least. It can be generated by <code>Ano()</code>.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>thr</code></td>
<td>
<p>A numeric vector used as the quantiles (if 'quantile' is TRUE) or 
thresholds (if 'quantile' is FALSE) to bin the anomalies. If it is quantile,
it must be within [0, 1].</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>fcyr</code></td>
<td>
<p>A numeric vector of the indices of the forecast years (i.e., 
time_dim) to compute the probabilistic bins for, or 'all' to compute the 
bins for all the years. E.g., c(1:5), c(1, 4), 4, or 'all'. The default 
value is 'all'.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>time_dim</code></td>
<td>
<p>A character string indicating the dimension along which to 
compute the probabilistic bins. The default value is 'sdate'.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>memb_dim</code></td>
<td>
<p>A character string indicating the name of the member 
dimension or the dimension to be merged with 'time_dim' for probabilistic
calculation. The default value is 'member'.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>quantile</code></td>
<td>
<p>A logical value indicating if the thresholds ('thr') are 
quantiles (TRUE) or the absolute thresholds of the bins (FALSE). The 
default value is TRUE.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>compPeriod</code></td>
<td>
<p>A character string referring to three computation options:<br>
"Full period": The probabilities are computed based on 'data';<br>
"Without fcyr": The probabilities are computed based on 'data' with all 
'fcyr' removed;<br>
"Cross-validation": The probabilities are computed based on leave-one-out
cross-validation.<br>
The default value is "Full period".</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>ncores</code></td>
<td>
<p>An integer indicating the number of cores to use for parallel 
computation. The default value is NULL.</p>
</td>
</tr>
</table>
<h3>Value</h3>

<p>A numeric array of probabilistic information with dimensions:<br>
c(bin = length of 'thr' + 1, time_dim = length of 'fcyr', memb_dim, the  
rest of dimensions of 'data')<br>
The values along the 'bin' dimension take values 0 or 1 depending on which 
of the 'thr' + 1 cathegories the forecast or observation at the corresponding 
grid point, time step, member and start date belongs to.
</p>


<h3>Examples</h3>

<pre><code class="language-R">
clim &lt;- Clim(sampleMap$mod, sampleMap$obs)
ano_exp &lt;- Ano(sampleMap$mod, clim$clim_exp)
PB &lt;- ProbBins(ano_exp, fcyr = 3, thr = c(1/3, 2/3), quantile = TRUE)

</code></pre>


</div>