<div class="container">

<table style="width: 100%;"><tr>
<td>get_num_batch_ranks</td>
<td style="text-align: right;">R Documentation</td>
</tr></table>
<h2>Plot factor-batch associations for increasing number of donor factors</h2>

<h3>Description</h3>

<p>Plot factor-batch associations for increasing number of donor factors
</p>


<h3>Usage</h3>

<pre><code class="language-R">get_num_batch_ranks(
  container,
  donor_ranks_test,
  gene_ranks,
  batch_var,
  thresh = 0.5,
  tucker_type = "regular",
  rotation_type = "hybrid"
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr style="vertical-align: top;">
<td><code>container</code></td>
<td>
<p>environment Project container that stores sub-containers
for each cell type as well as results and plots from all analyses</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>donor_ranks_test</code></td>
<td>
<p>numeric The number of donor rank values to test</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>gene_ranks</code></td>
<td>
<p>numeric The number of gene ranks to use throughout</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>batch_var</code></td>
<td>
<p>character The name of the batch meta variable</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>thresh</code></td>
<td>
<p>numeric The threshold r-squared cutoff for considering a
factor to be a batch factor. Can be a vector of multiple values to get plots
at varying thresholds. (default=0.5)</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>tucker_type</code></td>
<td>
<p>character Set to 'regular' to run regular tucker or to 'sparse' to run tucker
with sparsity constraints (default='regular')</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>rotation_type</code></td>
<td>
<p>character Set to 'hybrid' to optimize loadings via our hybrid
method (see paper for details). Set to 'ica_dsc' to perform ICA rotation
on resulting donor factor matrix. Set to 'ica_lds' to optimize loadings by the
ICA rotation. (default='hybrid')</p>
</td>
</tr>
</table>
<h3>Value</h3>

<p>A ggpubr figure of ggplot objects showing batch-factor associations and
placed in container$plots$num_batch_factors slot
</p>


<h3>Examples</h3>

<pre><code class="language-R">test_container &lt;- get_num_batch_ranks(test_container, donor_ranks_test=c(2:4), 
gene_ranks=10, batch_var='lanes', thresh=0.5, tucker_type='regular', rotation_type='hybrid')
</code></pre>


</div>