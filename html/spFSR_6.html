<div class="container">

<table style="width: 100%;"><tr>
<td>spFSR.default</td>
<td style="text-align: right;">R Documentation</td>
</tr></table>
<h2>Default Function of SP-FSR for Feature Selection and Ranking</h2>

<h3>Description</h3>

<p>This is the default function of spFeatureSelection. See spFeatureSelection for example.
</p>


<h3>Usage</h3>

<pre><code class="language-R">spFSR.default(
  task,
  wrapper = NULL,
  scoring = NULL,
  perturb.amount = 0.05,
  gain.min = 0.01,
  gain.max = 2,
  change.min = 0,
  change.max = 0.2,
  bb.bottom.threshold = 10^(-8),
  mon.gain.A = 100,
  mon.gain.a = 0.75,
  mon.gain.alpha = 0.6,
  hot.start.num.ft.factor = 15,
  hot.start.max.auto.num.ft = 150,
  use.hot.start = TRUE,
  hot.start.range = 0.2,
  rf.n.estimators = 50,
  gain.type = "bb",
  num.features.selected = 0L,
  iters.max = 100L,
  stall.limit = 35L,
  n.samples.max = 5000,
  ft.weighting = FALSE,
  encoding.type = "encode",
  is.debug = FALSE,
  stall.tolerance = 10^(-8),
  random.state = 1,
  rounding = 3,
  run.parallel = TRUE,
  n.jobs = NULL,
  show.info = TRUE,
  print.freq = 10L,
  num.cv.folds = 5L,
  num.cv.reps.eval = 3L,
  num.cv.reps.grad = 1L,
  num.grad.avg = 4L,
  perf.eval.method = "cv"
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr style="vertical-align: top;">
<td><code>task</code></td>
<td>
<p>A task <code>tsk</code> object created using <span class="pkg">mlr3</span> package. It must be either a <code>ClassifTask</code> or <code>RegrTask</code> object.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>wrapper</code></td>
<td>
<p>A Learner <code>lrn</code> object created using <span class="pkg">mlr3</span> package or a <code>GraphLearner</code> object created using <span class="pkg">mlr3pipelines</span> package. Multiple learners object is not supported. If left empty will select random forest by default.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>scoring</code></td>
<td>
<p>A performance measure <code>msr</code> within the <span class="pkg">mlr3</span> package supported by the <code>task</code>. If left blank will select accuracy for classification and r-squared for regression.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>perturb.amount</code></td>
<td>
<p>Perturbation amount for feature importances during gradient approximation. It must be a value between 0.01 and 0.1. Default value is 0.05.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>gain.min</code></td>
<td>
<p>The minimum gain value. It must be greater than or equal to 0.001. Default value is 0.01.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>gain.max</code></td>
<td>
<p>The maximum gain value. It must be greater than or equal to <code>gain.min</code>.  Default value is 1.0.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>change.min</code></td>
<td>
<p>The minimum change value. It must be non-negative. Default value is 0.0.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>change.max</code></td>
<td>
<p>The maximum change value. It must be greater than <code>change.min</code>. Default is 0.2.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>bb.bottom.threshold</code></td>
<td>
<p>The threshold value of denominator for the Barzilai-Borwein gain sequence. It must be positive. Default is 1/10^8.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>mon.gain.A</code></td>
<td>
<p>Parameter for the monetone gain sequence. It must be a positive integer. Default is 100.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>mon.gain.a</code></td>
<td>
<p>Parameter for the monetone gain sequence. It must be positive. Default is 0.75.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>mon.gain.alpha</code></td>
<td>
<p>Parameter for the monetone gain sequence. It must be between (0, 1). Default is 0.6.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>hot.start.num.ft.factor</code></td>
<td>
<p>The factor of features to select for hot start. Must be an integer greater than 1. Default is 15.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>hot.start.max.auto.num.ft</code></td>
<td>
<p>The maximum initial number of features for automatic hot start. Must be an integer greater than 1. Default is 75.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>use.hot.start</code></td>
<td>
<p>Logical argument. Whether hot start should be used. Default is True.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>hot.start.range</code></td>
<td>
<p>Float, the initial range of imputations carried over from hot start. It must be between (0,1). Default is 0.2.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>rf.n.estimators</code></td>
<td>
<p>integer, The number of trees to use in the random forest hot start. The default is 50.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>gain.type</code></td>
<td>
<p>The gain sequence to use. Accepted methods are 'bb' for Barzilai-Borwein or 'mon' for a monetonic gain sequence. Default is 'bb'.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>num.features.selected</code></td>
<td>
<p>Number of features selected. It must be a nonnegative integer and must not exceed the total number of features in the task. A value of 0 results in automatic feature selection. Default value is 0L.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>iters.max</code></td>
<td>
<p>Maximum number of iterations to execute. The minimum value is 2L. Default value is 300L.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>stall.limit</code></td>
<td>
<p>Number of iterations to stall, that is, to continue without at least <code>stall.tolerance</code> improvement to the measure value. The mininum value is 2L. Default value is 100L.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>n.samples.max</code></td>
<td>
<p>The maximum number of samples to select from sampling. It must be a non-negative integer. Default is 2500.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>ft.weighting</code></td>
<td>
<p>Logical argument. Include simultaneous feature weighting and selection?. Default is FALSE.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>encoding.type</code></td>
<td>
<p>Encoding method for factor features for feature weighting, default is 'encoded'.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>is.debug</code></td>
<td>
<p>Logical argument. Print additional debug messages? Default value is FALSE.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>stall.tolerance</code></td>
<td>
<p>Value of stall tolerance. It must be strictly positive. Default value is 1/10^8.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>random.state</code></td>
<td>
<p>random state used. Default is 1.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>rounding</code></td>
<td>
<p>The number of digits to round results. It must be a positive integer. Default value is 3.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>run.parallel</code></td>
<td>
<p>Logical argument. Perform cross-validations in parallel? Default value is TRUE.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>n.jobs</code></td>
<td>
<p>Number of cores to use in case of a parallel run. It must be less than or equal to the total number of cores on the host machine. If set to <code>NULL</code> when <code>run.parallel</code> is <code>TRUE</code>, it is taken as one less of the total number of cores.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>show.info</code></td>
<td>
<p>If set to <code>TRUE</code>, iteration information is displayed at print frequency.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>print.freq</code></td>
<td>
<p>Iteration information printing frequency. It must be a positive integer. Default value is 10L.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>num.cv.folds</code></td>
<td>
<p>The number of cross-validation folds when 'cv' is selected as <code>perf.eval.method</code>. The minimum value is 3L. Default value is 5L.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>num.cv.reps.eval</code></td>
<td>
<p>The number of cross-validation repetitions for feature subset evaluation. It must be a positive integer. Default value is 3L.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>num.cv.reps.grad</code></td>
<td>
<p>The number of cross-validation repetitions for gradient averaging. It must be a positive integer. Default value is 1L.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>num.grad.avg</code></td>
<td>
<p>Number of gradients to average for gradient approximation. It must be a positive integer. Default value is 4L.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>perf.eval.method</code></td>
<td>
<p>Performance evaluation method. It must be either 'cv' for cross-validation or 'resub' for resubstitution. Default is 'cv'.</p>
</td>
</tr>
</table>
<h3>Value</h3>

<p><code>spFSR</code> returns an object of class "spFSR". An object of class "spFSR" consists of the following:
</p>
<table>
<tr style="vertical-align: top;">
<td><code>task.spfs</code></td>
<td>
<p>An <span class="pkg">mlr3</span> package <code>tsk</code> object defined on the best performing features.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>wrapper</code></td>
<td>
<p>An <span class="pkg">mlr3</span> package <code>lrn</code> object or a <span class="pkg">mlr3pipelines</span> package <code>GraphLearner</code> object as specified by the user.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>scoring</code></td>
<td>
<p>An <span class="pkg">mlr3</span> package <code>msr</code> as specified by the user.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>param best.model</code></td>
<td>
<p>An <span class="pkg">mlr3</span> package <code>model</code> object trained by the <code>wrapper</code> using <code>task.spfs</code>.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>iter.results</code></td>
<td>
<p>A <code>data.frame</code> object containing detailed information on each iteration.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>features</code></td>
<td>
<p>Names of the best performing features.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>num.features</code></td>
<td>
<p>The number of best performing features.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>importance</code></td>
<td>
<p>A vector of importance ranks of the best performing features.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>total.iters</code></td>
<td>
<p>The total number of iterations executed.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>best.iter</code></td>
<td>
<p>The iteration where the best performing feature subset was encountered.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>best.value</code></td>
<td>
<p>The best measure value encountered during execution.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>best.std</code></td>
<td>
<p>The standard deviation corresponding to the best measure value encountered.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>run.time</code></td>
<td>
<p>Total run time in minutes.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>results</code></td>
<td>
<p>Dataframe with boolean of selected features, names and measure</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>call</code></td>
<td>
<p>Call.</p>
</td>
</tr>
</table>
<h3>References</h3>

<p>David V. Akman et al. (2022) k-best feature selection and ranking via stochastic approximation,  <em>Expert Systems with Applications</em>, <b>Vol. 213</b>. See <a href="https://doi.org/10.1016/j.eswa.2022.118864">doi:10.1016/j.eswa.2022.118864</a>
</p>
<p>G.F.A Yeo and V. Aksakalli (2021) A stochastic approximation approach to simultaneous feature weighting and selection for nearest neighbour learners,  <em>Expert Systems with Applications</em>, <b>Vol. 185</b>. See <a href="https://doi.org/10.1016/j.eswa.2021.115671">doi:10.1016/j.eswa.2021.115671</a>
</p>


<h3>See Also</h3>

<p>spFeatureSelection.
</p>


</div>