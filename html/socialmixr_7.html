<div class="container">

<table style="width: 100%;"><tr>
<td>contact_matrix</td>
<td style="text-align: right;">R Documentation</td>
</tr></table>
<h2>Generate a contact matrix from diary survey data</h2>

<h3>Description</h3>

<p>Samples a contact survey using a bootstrap
</p>


<h3>Usage</h3>

<pre><code class="language-R">contact_matrix(
  survey,
  countries = NULL,
  survey.pop,
  age.limits,
  filter,
  n = 1,
  bootstrap,
  counts = FALSE,
  symmetric = FALSE,
  split = FALSE,
  sample.participants = FALSE,
  estimated.participant.age = c("mean", "sample", "missing"),
  estimated.contact.age = c("mean", "sample", "missing"),
  missing.participant.age = c("remove", "keep"),
  missing.contact.age = c("remove", "sample", "keep", "ignore"),
  weights = NULL,
  weigh.dayofweek = FALSE,
  weigh.age = FALSE,
  weight.threshold = NA,
  sample.all.age.groups = FALSE,
  return.part.weights = FALSE,
  return.demography = NA,
  per.capita = FALSE,
  ...
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr style="vertical-align: top;">
<td><code>survey</code></td>
<td>
<p>a <code>survey()</code> object</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>countries</code></td>
<td>
<p>limit to one or more countries; if not given, will use all countries in the survey; these can be given as country names or 2-letter (ISO Alpha-2) country codes</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>survey.pop</code></td>
<td>
<p>survey population â€“ either a data frame with columns 'lower.age.limit' and 'population', or a character vector giving the name(s) of a country or countries from the list that can be obtained via <code>wpp_countries</code>; if not given, will use the country populations from the chosen countries, or all countries in the survey if <code>countries</code> is not given</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>age.limits</code></td>
<td>
<p>lower limits of the age groups over which to construct the matrix</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>filter</code></td>
<td>
<p>any filters to apply to the data, given as list of the form (column=filter_value) - only contacts that have 'filter_value' in 'column' will be considered. If multiple filters are given, they are all applied independently and in the sequence given.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>n</code></td>
<td>
<p>deprecated; number of bootstrap samples to generate</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>bootstrap</code></td>
<td>
<p>deprecated; whether to bootstrap contact matrices</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>counts</code></td>
<td>
<p>whether to return counts (instead of means)</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>symmetric</code></td>
<td>
<p>whether to make matrix symmetric, such that <code class="reqn">c_{ij}N_i = c_{ji}N_j</code>.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>split</code></td>
<td>
<p>whether to split the number of contacts and assortativity</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>sample.participants</code></td>
<td>
<p>whether to sample participants randomly (with replacement); done multiple times this can be used to assess uncertainty in the generated contact matrices. See the "Bootstrapping" section in the vignette for how to do this..</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>estimated.participant.age</code></td>
<td>
<p>if set to "mean" (default), people whose ages are given as a range (in columns named "..._est_min" and "..._est_max") but not exactly (in a column named "..._exact") will have their age set to the mid-point of the range; if set to "sample", the age will be sampled from the range; if set to "missing", age ranges will be treated as missing</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>estimated.contact.age</code></td>
<td>
<p>if set to "mean" (default), contacts whose ages are given as a range (in columns named "..._est_min" and "..._est_max") but not exactly (in a column named "..._exact") will have their age set to the mid-point of the range; if set to "sample", the age will be sampled from the range; if set to "missing", age ranges will be treated as missing</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>missing.participant.age</code></td>
<td>
<p>if set to "remove" (default), participants without age information are removed; if set to "keep", participants with missing age are kept and treated as a separate age group</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>missing.contact.age</code></td>
<td>
<p>if set to "remove" (default), participants that have contacts without age information are removed; if set to "sample", contacts without age information are sampled from all the contacts of participants of the same age group; if set to "keep", contacts with missing age are kept and treated as a separate age group; if set to "ignore", contact with missing age are ignored in the contact analysis</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>weights</code></td>
<td>
<p>column names(s) of the participant data of the <code>survey()</code> object with user-specified weights (default = empty vector)</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>weigh.dayofweek</code></td>
<td>
<p>whether to weigh social contacts data by the day of the week (weight (5/7 / N_week / N) for weekdays and (2/7 / N_weekend / N) for weekends)</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>weigh.age</code></td>
<td>
<p>whether to weigh social contacts data by the age of the participants (vs. the populations' age distribution)</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>weight.threshold</code></td>
<td>
<p>threshold value for the standardized weights before running an additional standardisation (default 'NA' = no cutoff)</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>sample.all.age.groups</code></td>
<td>
<p>what to do if bootstrapping fails to sample participants from one or more age groups; if FALSE (default), corresponding rows will be set to NA, if TRUE the sample will be discarded and a new one taken instead</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>return.part.weights</code></td>
<td>
<p>boolean to return the participant weights</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>return.demography</code></td>
<td>
<p>boolean to explicitly return demography data that corresponds to the survey data (default 'NA' = if demography data is requested by other function parameters)</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>per.capita</code></td>
<td>
<p>wheter to return a matrix with contact rates per capita (default is FALSE and not possible if 'counts=TRUE' or 'split=TRUE')</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>...</code></td>
<td>
<p>further arguments to pass to <code>get_survey()</code>, <code>check()</code> and <code>pop_age()</code> (especially column names)</p>
</td>
</tr>
</table>
<h3>Value</h3>

<p>a contact matrix, and the underlying demography of the surveyed population
</p>


<h3>Author(s)</h3>

<p>Sebastian Funk
</p>


<h3>Examples</h3>

<pre><code class="language-R">data(polymod)
contact_matrix(polymod, countries = "United Kingdom", age.limits = c(0, 1, 5, 15))
</code></pre>


</div>