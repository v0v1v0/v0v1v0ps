<div class="container">

<table style="width: 100%;"><tr>
<td>all_geog_synthetic_new_attribute</td>
<td style="text-align: right;">R Documentation</td>
</tr></table>
<h2>Add a new attribute to a set (ie list) of synthetic_micro datasets</h2>

<h3>Description</h3>

<p>Add a new attribute to a set (ie list) of synthetic_micro datasets using conditional 
relationships between the new attribute and existing attributes (eg. wage rate conditioned on age 
and education level). The same attribute is added to *each* synthetic_micro dataset, where each
dataset is supplied a distinct relationship for attribute creation.
</p>


<h3>Usage</h3>

<pre><code class="language-R">all_geog_synthetic_new_attribute(
  df_list,
  prob_name = "p",
  attr_name = "variable",
  conditional_vars = NULL,
  st_list = NULL,
  leave_cores = 1L
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr style="vertical-align: top;">
<td><code>df_list</code></td>
<td>
<p>A <code>list</code> of R objects each of class "synthetic_micro".</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>prob_name</code></td>
<td>
<p>A string specifying the column name of each <code>data.frame</code> in <code>df_list</code> 
containing the probabilities for each synthetic observation.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>attr_name</code></td>
<td>
<p>A string specifying the desired name of the new attribute to be added to the data.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>conditional_vars</code></td>
<td>
<p>An character vector specifying the existing variables, if any, on which 
the new attribute (variable) is to be conditioned on for each dataset. Variables must be specified 
in order. Defaults to <code>NULL</code> ie- an unconditional new attribute.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>st_list</code></td>
<td>
<p>A <code>list</code> of equal length to <code>df_list</code>. Each element of <code>st_list</code> is 
a <code>data.frame</code> symbol table with N + 2 columns. The last two columns must be:
1. A vector containing the new attribute counts or percentages; 2. is a vector of the new attribute 
levels. The first N columns must match the conditioning scheme imposed by the variables in 
<code>conditional_vars</code>. See <code>synthetic_new_attribute</code> and examples.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>leave_cores</code></td>
<td>
<p>An <code>integer</code> for the number of cores you wish to leave open for other
processing.</p>
</td>
</tr>
</table>
<h3>Value</h3>

<p>A list of new synthetic_micro datasets each with class "synthetic_micro".
</p>


<h3>See Also</h3>

<p><code>synthetic_new_attribute</code>
</p>


<h3>Examples</h3>

<pre><code class="language-R">## Not run: 
 set.seed(567L)
 df &lt;- data.frame(gender= factor(sample(c("male", "female"), size= 100, replace= TRUE)),
                 age= factor(sample(1:5, size= 100, replace= TRUE)),
                 pov= factor(sample(c("lt_pov", "gt_eq_pov"),
                                    size= 100, replace= TRUE, prob= c(.15,.85))),
                 p= runif(100))
df$p &lt;- df$p / sum(df$p)
class(df) &lt;- c("data.frame", "micro_synthetic")

# and example test elements
cond_v &lt;- c("gender", "pov")
levels &lt;- c("employed", "unemp", "not_in_LF")
sym_tbl &lt;- data.frame(gender= rep(rep(c("male", "female"), each= 3), 2),
                      pov= rep(c("lt_pov", "gt_eq_pov"), each= 6),
                      cnts= c(52, 8, 268, 72, 12, 228, 1338, 93, 297, 921, 105, 554),
                      lvls= rep(levels, 4))



df_list &lt;- replicate(10, df, simplify= FALSE)
st_list &lt;- replicate(10, sym_tbl, simplify= FALSE)

# run
library(parallel)
syn &lt;- all_geog_synthetic_new_attribute(df_list, prob_name= "p", attr_name= "variable",
                                        conditional_vars= cond_v,st_list= st_list)

## End(Not run)
</code></pre>


</div>