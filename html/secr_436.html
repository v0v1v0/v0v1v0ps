<div class="container">

<table style="width: 100%;"><tr>
<td>RMarkInput</td>
<td style="text-align: right;">R Documentation</td>
</tr></table>
<h2> Convert Data to RMark Input Format </h2>

<h3>Description</h3>

<p>A single-session capthist object is formed by RMarkInput into a dataframe that may be
passed directly to RMark. 
</p>


<h3>Usage</h3>

<pre><code class="language-R">
RMarkInput(object, grouped = FALSE, covariates = TRUE)

unRMarkInput(df, covariates = TRUE)

</code></pre>


<h3>Arguments</h3>

<table>
<tr style="vertical-align: top;">
<td><code>object</code></td>
<td>
<p>secr capthist object</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>grouped</code></td>
<td>
<p>logical for whether to replace each group of identical
capture histories with a single line</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>covariates</code></td>
<td>
<p>logical or character vector; see Details</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>df</code></td>
<td>
<p>dataframe with fields ‘ch’ and ‘freq’ </p>
</td>
</tr>
</table>
<h3>Details</h3>

<p>To convert a multi-session object first collapse the sessions with
<code>join</code>.
</p>
<p>If <code>covariates</code> is TRUE then all columns of individual covariates
in the input are appended as columns in the output. If
<code>covariates</code> is a character-valued vector then only the specified
covariates will be appended.
</p>
<p>If both <code>grouped</code> and <code>covariates</code> are specified in
<code>RMarkInput</code>, <code>grouped</code> will be ignored, with a warning.
</p>


<h3>Value</h3>

<p>For RMarkInput –
</p>
<p>Dataframe with fields ch and freq. ‘ch’ is a character string of 0's
and 1's. If <code>grouped = FALSE</code> the rownames are retained and the
value of ‘freq’ is 1 or -1. Negative values of ‘freq’ indicate
removal.
</p>
<p>The dataframe also includes individual covariates specified with
<code>covariates</code>.
</p>
<p>The attribute ‘intervals’ is copied from ‘object’, if present;
otherwise it is set to a vector of zeros (indicating a
closed-population sample).
</p>
<p>For unRMarkInput –
</p>
<p>A single-session capthist object with no traps attribute and hence no
detector type (i.e. non-spatial capture histories). Covariates are
copied as requested. 
</p>
<p>From <span class="pkg">secr</span> 4.6.6, missing values (.) in input capture histories are 
converted to NA in the output, with a warning. The resulting capthist is 
unusable until the NAs are removed.
</p>


<h3>Note</h3>

<p>In versions before 2.4.0, a spurious occasion was added by
<code>RMarkInput</code> when grouped = FALSE. Thanks to Jeff Stetz for
spotting this.
</p>
<p>The default value for <code>grouped</code> changed to FALSE in secr 2.4.0.
</p>


<h3>References</h3>

<p>Laake, J. and Rexstad E. (2008) Appendix C. RMark - an alternative
approach to building linear models in MARK. In: Cooch, E. and White,
G. (eds) Program MARK: A Gentle Introduction. 6th edition. Most recent edition 
available at www.phidot.org/software/mark/docs/book/.
</p>


<h3>See Also</h3>

<p><code>join</code>
</p>


<h3>Examples</h3>

<pre><code class="language-R">
## ovenCH is a 5-year mist-netting dataset
ovenRD &lt;- RMarkInput (join(ovenCH))
head(ovenRD)

unRMarkInput(ovenRD)

RMarkInput(deermouse.ESG, covariates = FALSE, grouped = TRUE)
RMarkInput(deermouse.ESG, covariates = TRUE)

## Not run: 
## fit robust-design model in RMark (MARK must be  installed)
library(RMark)
MarkPath &lt;- 'c:/MARK'    ## adjust for your installation
ovenRD.data &lt;- process.data(ovenRD, model = "Robust",
    time.interval = attr(ovenRD, "intervals"))
ovenRD.model &lt;- mark(data = ovenRD.data, model = "Robust",
    model.parameters = list(p = list(formula = ~1, share = TRUE),
    GammaDoublePrime = list(formula = ~1),
    GammaPrime = list(formula = ~1),
    f0 = list(formula = ~1)))   
cleanup(ask = FALSE)

## End(Not run)


</code></pre>


</div>