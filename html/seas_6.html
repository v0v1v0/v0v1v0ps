<div class="container">

<table style="width: 100%;"><tr>
<td>change</td>
<td style="text-align: right;">R Documentation</td>
</tr></table>
<h2>Find seasonal and annual changes between two data sets</h2>

<h3>Description</h3>

<p>Find seasonal and annual changes between two data sets; relative and
absolute changes are found between the central tendency and spread of
each seasonal state.
</p>


<h3>Usage</h3>

<pre><code class="language-R">change(x1, x2, var1, var2 = var1, width = "mon",
       cent = "mean", sprd = "sd", disc = FALSE, inter = FALSE,
       p.cut = 0.3, start.day = 1, calendar)
</code></pre>


<h3>Arguments</h3>

<table>
<tr style="vertical-align: top;">
<td><code>x1</code></td>
<td>
<p>a <code>data.frame</code> of seasonal data</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>x2</code></td>
<td>
<p>a second <code>data.frame</code> of seasonal data</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>var1</code></td>
<td>
<p>a variable in <code>x1</code></p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>var2</code></td>
<td>
<p>a variable in <code>x2</code></p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>width</code></td>
<td>
<p>the width of the bins, see <code>mkseas</code> for more
details; this will change the sample-sizes between <code>x1</code> and
<code>x2</code>, which can affect the changes detected</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>cent</code></td>
<td>
<p>a <code>function</code> to find a central tendency;
usually this is <code>mean</code>, however <code>median</code> or
other functions can be used too</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>sprd</code></td>
<td>
<p>a <code>function</code> to find a spread around a central
tendency; usually this will be <code>sd</code>
(standard-deviation), however <code>mad</code> or other functions
can be used too</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>disc</code></td>
<td>
<p>if the data are discontinuous, the <code>seas.sum</code> objects
are created for <code>var1</code>/<code>var2</code> to determine the changes;
this is ideal for precipitation, and other sparsely distributed
variables</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>inter</code></td>
<td>
<p><code>interarrival</code>s are calculated, and changes
are found between <em>wet</em> and <em>dry</em> series</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>p.cut</code></td>
<td>
<p>cut-off for wet/dry; see <code>interarrival</code></p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>start.day</code></td>
<td>
<p>starting day</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>calendar</code></td>
<td>
<p>calendar; if not specified it will try to read this
from the attributes, otherwise it is assumed to be a proleptic
Gregorian calendar; see <code>year.length</code></p>
</td>
</tr>
</table>
<h3>Details</h3>

<p>This function is useful for finding changes between different states of
seasonal data. Here, a <em>state</em> represents how seasonal data
behave statistically at either a <em>time</em> or
<em>place</em>. The stability of a state depends on both the variance
throughout each portion of the season, as well as the number of years
of observations.
</p>
<p>For instance, seasonal and annual changes in climate can be detected
in climate data series, by comparing the normals from two time periods.
</p>


<h3>Value</h3>

<p>Returns a complex <code>list</code> of relative and absolute (if
applicable) changes of <code>var1</code>/<code>var2</code> between <code>x1</code> and
<code>x2</code>.
</p>
<p>Seasonal and annual changes are identified independently of each
other; where annual changes have a <code>ann</code> prefix.
</p>
<p>Relative changes are not found if <code>x$var</code> has values less than 0,
such as Temperature measured in degrees C or F.
</p>


<h3>Author(s)</h3>

<p>Mike Toews</p>


<h3>See Also</h3>

<p><code>dathomog</code>, <code>lars</code></p>


<h3>Examples</h3>

<pre><code class="language-R">data(mscdata)
dat1 &lt;- mksub(mscdata, id=1108447, start=1975, end=1984)
dat2 &lt;- mksub(mscdata, id=1108447, start=1985, end=1995)

# A few plot functions to make thing easy
plot.ch &lt;- function(x, main, h, col) {
  main &lt;- paste(main, "between 1975-1984 and 1985-1994", sep="\n")
  barplot(x, main=main)
  abline(h=c(0, h), col=c(1, col), lty=c(1, 2))
}
plot.abs &lt;- function(x, col="red", abs="abs", ann.abs="ann.abs") {
  main &lt;- sprintf("Absolute change in %s", x$long.name[[1]])
  plot.ch(x[[abs]], main, x[[ann.abs]], col)
}
plot.rel &lt;- function(x, col="orange", rel="rel", ann.rel="ann.rel") {
  main &lt;- sprintf("Relative change in %s", x$long.name[[1]])
  plot.ch(x[[rel]], main, x[[ann.rel]], col)
}
plot.std &lt;- function(x, col="purple") {
  main &lt;- sprintf("Relative change in the\nstandard deviation of %s",
                  x$long.name[[1]])
  plot.ch(x$sprd.rel, main, x$ann.sprd.rel, col)
}

# Minimum temperature
ch &lt;- change(dat1, dat2, "t_min")
str(ch)
plot.abs(ch)
plot.std(ch)
# Cannot do ch$rel ; since div/0!

# Precipitation
ch2 &lt;- change(dat1, dat2, "precip", width="DJF", disc=TRUE)
plot.abs(ch2, "blue")
plot.rel(ch2, "purple")
plot.std(ch2)

</code></pre>


</div>