<div class="container">

<table style="width: 100%;"><tr>
<td>ml_logistic_regression</td>
<td style="text-align: right;">R Documentation</td>
</tr></table>
<h2>Spark ML â€“ Logistic Regression</h2>

<h3>Description</h3>

<p>Perform classification using logistic regression.
</p>


<h3>Usage</h3>

<pre><code class="language-R">ml_logistic_regression(
  x,
  formula = NULL,
  fit_intercept = TRUE,
  elastic_net_param = 0,
  reg_param = 0,
  max_iter = 100,
  threshold = 0.5,
  thresholds = NULL,
  tol = 1e-06,
  weight_col = NULL,
  aggregation_depth = 2,
  lower_bounds_on_coefficients = NULL,
  lower_bounds_on_intercepts = NULL,
  upper_bounds_on_coefficients = NULL,
  upper_bounds_on_intercepts = NULL,
  features_col = "features",
  label_col = "label",
  family = "auto",
  prediction_col = "prediction",
  probability_col = "probability",
  raw_prediction_col = "rawPrediction",
  uid = random_string("logistic_regression_"),
  ...
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr style="vertical-align: top;">
<td><code>x</code></td>
<td>
<p>A <code>spark_connection</code>, <code>ml_pipeline</code>, or a <code>tbl_spark</code>.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>formula</code></td>
<td>
<p>Used when <code>x</code> is a <code>tbl_spark</code>. R formula as a character string or a formula. This is used to transform the input dataframe before fitting, see ft_r_formula for details.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>fit_intercept</code></td>
<td>
<p>Boolean; should the model be fit with an intercept term?</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>elastic_net_param</code></td>
<td>
<p>ElasticNet mixing parameter, in range [0, 1]. For alpha = 0, the penalty is an L2 penalty. For alpha = 1, it is an L1 penalty.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>reg_param</code></td>
<td>
<p>Regularization parameter (aka lambda)</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>max_iter</code></td>
<td>
<p>The maximum number of iterations to use.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>threshold</code></td>
<td>
<p>in binary classification prediction, in range [0, 1].</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>thresholds</code></td>
<td>
<p>Thresholds in multi-class classification to adjust the probability of predicting each class. Array must have length equal to the number of classes, with values &gt; 0 excepting that at most one value may be 0. The class with largest value <code>p/t</code> is predicted, where <code>p</code> is the original probability of that class and <code>t</code> is the class's threshold.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>tol</code></td>
<td>
<p>Param for the convergence tolerance for iterative algorithms.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>weight_col</code></td>
<td>
<p>The name of the column to use as weights for the model fit.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>aggregation_depth</code></td>
<td>
<p>(Spark 2.1.0+) Suggested depth for treeAggregate (&gt;= 2).</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>lower_bounds_on_coefficients</code></td>
<td>
<p>(Spark 2.2.0+) Lower bounds on
coefficients if fitting under bound constrained optimization.
The bound matrix must be compatible with the shape (1, number of features)
for binomial regression, or (number of classes, number of features) for
multinomial regression.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>lower_bounds_on_intercepts</code></td>
<td>
<p>(Spark 2.2.0+) Lower bounds on intercepts
if fitting under bound constrained optimization.
The bounds vector size must be equal with 1 for binomial regression, or
the number of classes for multinomial regression.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>upper_bounds_on_coefficients</code></td>
<td>
<p>(Spark 2.2.0+) Upper bounds on
coefficients if fitting under bound constrained optimization.
The bound matrix must be compatible with the shape (1, number of features)
for binomial regression, or (number of classes, number of features) for
multinomial regression.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>upper_bounds_on_intercepts</code></td>
<td>
<p>(Spark 2.2.0+) Upper bounds on intercepts
if fitting under bound constrained optimization.
The bounds vector size must be equal with 1 for binomial regression, or
the number of classes for multinomial regression.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>features_col</code></td>
<td>
<p>Features column name, as a length-one character vector. The column should be single vector column of numeric values. Usually this column is output by <code>ft_r_formula</code>.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>label_col</code></td>
<td>
<p>Label column name. The column should be a numeric column. Usually this column is output by <code>ft_r_formula</code>.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>family</code></td>
<td>
<p>(Spark 2.1.0+) Param for the name of family which is a
description of the label distribution to be used in the model. Supported
options: "auto", "binomial", and "multinomial."</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>prediction_col</code></td>
<td>
<p>Prediction column name.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>probability_col</code></td>
<td>
<p>Column name for predicted class conditional probabilities.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>raw_prediction_col</code></td>
<td>
<p>Raw prediction (a.k.a. confidence) column name.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>uid</code></td>
<td>
<p>A character string used to uniquely identify the ML estimator.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>...</code></td>
<td>
<p>Optional arguments; see Details.</p>
</td>
</tr>
</table>
<h3>Value</h3>

<p>The object returned depends on the class of <code>x</code>. If it is a
<code>spark_connection</code>, the function returns a <code>ml_estimator</code> object. If
it is a <code>ml_pipeline</code>, it will return a pipeline with the predictor
appended to it. If a <code>tbl_spark</code>, it will return a <code>tbl_spark</code> with
the predictions added to it.
</p>


<h3>See Also</h3>

<p>Other ml algorithms: 
<code>ml_aft_survival_regression()</code>,
<code>ml_decision_tree_classifier()</code>,
<code>ml_gbt_classifier()</code>,
<code>ml_generalized_linear_regression()</code>,
<code>ml_isotonic_regression()</code>,
<code>ml_linear_regression()</code>,
<code>ml_linear_svc()</code>,
<code>ml_multilayer_perceptron_classifier()</code>,
<code>ml_naive_bayes()</code>,
<code>ml_one_vs_rest()</code>,
<code>ml_random_forest_classifier()</code>
</p>


<h3>Examples</h3>

<pre><code class="language-R">## Not run: 
sc &lt;- spark_connect(master = "local")
mtcars_tbl &lt;- sdf_copy_to(sc, mtcars, name = "mtcars_tbl", overwrite = TRUE)

partitions &lt;- mtcars_tbl %&gt;%
  sdf_random_split(training = 0.7, test = 0.3, seed = 1111)

mtcars_training &lt;- partitions$training
mtcars_test &lt;- partitions$test

lr_model &lt;- mtcars_training %&gt;%
  ml_logistic_regression(am ~ gear + carb)

pred &lt;- ml_predict(lr_model, mtcars_test)

ml_binary_classification_evaluator(pred)

## End(Not run)

</code></pre>


</div>