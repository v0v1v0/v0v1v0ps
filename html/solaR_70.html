<div class="container">

<table style="width: 100%;"><tr>
<td>C_fCompI</td>
<td style="text-align: right;">R Documentation</td>
</tr></table>
<h2>
Calculation of solar irradiance on a horizontal surface</h2>

<h3>Description</h3>

<p>From the daily global, diffuse and direct irradiation values supplied by <code>fCompD</code>, the profile of the global, diffuse and direct irradiance is calculated with the <code>rd</code> and <code>rg</code> components of <code>fSolI</code>.
</p>


<h3>Usage</h3>

<pre><code class="language-R">fCompI(sol, compD, G0I, corr = 'none', f, filterG0 = TRUE)</code></pre>


<h3>Arguments</h3>

<table>
<tr style="vertical-align: top;">
<td><code>sol</code></td>
<td>
<p>A <code>Sol</code> object as provided by <code>calcSol</code> or
a <code>zoo</code> object as provided by <code>fSolI</code>.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>compD</code></td>
<td>
<p>A <code>zoo</code> object as provided by fCompD. It is not
considered if <code>G0I</code> is provided.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>G0I</code></td>
<td>
<p>A <code>Meteo</code> object from <code>readBDi</code>,
<code>dfI2Meteo</code> or <code>zoo2Meteo</code>, or a <code>zoo</code>
object containing <em>intradaily</em> global irradiation (Wh/m²) on a
horizontal surface.
</p>
<p>See below for <code>corr = 'none'</code>.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>corr</code></td>
<td>
<p>A character, the correlation between the the fraction of
intradaily diffuse irradiation and the clearness index to be
used. It is ignored if <code>G0I</code> is not provided.
</p>
<p>With this version several correlations are available, as described in
<code>corrFdKt</code>. You should choose one of <em>intradaily</em>
proposals. For example, the <code>FdKtCLIMEDh</code> is
selected with <code>corr = 'CLIMEDh'</code>.
</p>
<p>If <code>corr = 'user'</code> the use of a correlation defined by a function
<code>f</code> is possible.
</p>
<p>If <code>corr = 'none'</code> the <code>G0I</code> object must include information
about global, diffuse and direct intradaily irradiation with columns
named <code>G0</code>, <code>D0</code> and <code>B0</code>, respectively. </p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>f</code></td>
<td>
<p>A function defininig a correlation between the fraction of
diffuse irradiation and the clearness index. It is only neccessary
when <code>corr = 'user'</code></p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>filterG0</code></td>
<td>
<p>A logical. If <code>TRUE</code> (default) this function sets the
global irradiation values to <code>NA</code> when they are higher than the
extra-atmospheric irradiation values.</p>
</td>
</tr>
</table>
<h3>Value</h3>

<p>A <code>zoo</code> with these components:
</p>
<table>
<tr style="vertical-align: top;">
<td><code>kt</code></td>
<td>
<p>numeric, clearness index.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>fd</code></td>
<td>
<p>numeric, diffuse fraction.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>G0</code></td>
<td>
<p>numeric, global irradiance on a horizontal surface, (W/m²)</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>D0</code></td>
<td>
<p>numeric, diffuse irradiance on a horizontal surface, (W/m²)</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>B0</code></td>
<td>
<p>numeric, direct irradiance on a horizontal surface, (W/m²)</p>
</td>
</tr>
</table>
<h3>Author(s)</h3>

<p>Oscar Perpiñán Lamigueiro.
</p>


<h3>References</h3>

 
<ul>
<li>
<p> Collares-Pereira, M. y Rabl, A.,  The average distribution of solar radiation: correlations between
diffuse and hemispherical and between daily and hourly insolation values. Solar Energy, 22:155–164, 1979.
</p>
</li>
<li>
<p> Perpiñán, O, Energía Solar Fotovoltaica, 2015.
(<a href="https://oscarperpinan.github.io/esf/">https://oscarperpinan.github.io/esf/</a>)
</p>
</li>
<li>
<p> Perpiñán, O. (2012), "solaR: Solar Radiation and Photovoltaic
Systems with R", Journal of Statistical Software, 50(9), 1-32,
doi: <a href="https://doi.org/10.18637/jss.v050.i09">10.18637/jss.v050.i09</a>
</p>
</li>
</ul>
<h3>See Also</h3>

<p><code>fCompD</code>,
<code>fSolI</code>,
<code>calcSol</code>,
<code>corrFdKt</code>.
</p>


<h3>Examples</h3>

<pre><code class="language-R">
lat &lt;- 37.2

BTd &lt;- fBTd(mode = 'serie')
solD &lt;- fSolD(lat, BTd[100])
solI &lt;- fSolI(solD, sample = 'hour')
G0d &lt;- zoo(5000, index(solD))
compD &lt;- fCompD(solD, G0d, corr = "Page")
fCompI(solI, compD)

sol &lt;- calcSol(lat, fBTd(mode = 'prom'), sample = 'hour', keep.night = FALSE)

G0dm &lt;- c(2.766, 3.491, 4.494, 5.912, 6.989, 7.742,
          7.919, 7.027, 5.369, 3.562, 2.814, 2.179)*1000

Ta &lt;- c(10, 14.1, 15.6, 17.2, 19.3, 21.2, 28.4, 29.9,
        24.3, 18.2, 17.2, 15.2)

BD &lt;- readG0dm(G0dm = G0dm, Ta = Ta, lat = lat)
compD &lt;- fCompD(sol, BD, corr = 'Page')
compI &lt;- fCompI(sol, compD)
head(compI)

## Use of 'corr'.  The help page of calcG0 includes additional examples
## with intradaily data xyplot(fd ~ kt, data = compI)

climed &lt;- fCompI(sol, G0I = compI, corr = 'CLIMEDh')
xyplot(fd ~ kt, data = climed)

ekdh &lt;- fCompI(sol, G0I = compI, corr = 'EKDh')
xyplot(fd ~ kt, data = ekdh)

brl &lt;- fCompI(sol, G0I = compI, corr = 'BRL')
xyplot(fd ~ kt, data = brl)
</code></pre>


</div>