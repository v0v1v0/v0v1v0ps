<div class="container">

<table style="width: 100%;"><tr>
<td>getPitchSpec</td>
<td style="text-align: right;">R Documentation</td>
</tr></table>
<h2>BaNa pitch tracker</h2>

<h3>Description</h3>

<p>Internal soundgen function.
</p>


<h3>Usage</h3>

<pre><code class="language-R">getPitchSpec(
  frame,
  bin,
  freqs,
  specMethod = c("commonFactor", "BaNa")[1],
  specRatios,
  specSmooth,
  specThres,
  specMerge,
  specPeak,
  specHNRslope,
  HNR = NULL,
  specSinglePeakCert,
  pitchFloor,
  pitchCeiling,
  nCands
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr style="vertical-align: top;">
<td><code>frame</code></td>
<td>
<p>the abs spectrum of a frame, as returned by
<code>fft</code></p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>bin</code></td>
<td>
<p>the width of spectral bin in <code>frame</code>, Hz</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>freqs</code></td>
<td>
<p>frequency per bin of spectrogram</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>specMethod</code></td>
<td>
<p>"commonFactor" = highest common factor of putative
harmonics, "BaNa" = ratio of putative harmonics</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>specRatios</code></td>
<td>
<p>for method = "commonFactor", the number of harmonics AND
integer fractions to consider</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>specSmooth</code></td>
<td>
<p>the width of window for detecting peaks in the spectrum, Hz</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>specThres</code></td>
<td>
<p>voicing threshold (unitless, ~0 to 1)</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>specMerge</code></td>
<td>
<p>pitch candidates within <code>specMerge</code> semitones are
merged with boosted certainty</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>specPeak, specHNRslope</code></td>
<td>
<p>when looking for putative harmonics in
the spectrum, the threshold for peak detection is calculated as
<code>specPeak * (1 - HNR * specHNRslope)</code></p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>HNR</code></td>
<td>
<p>harmonics-to-noise ratio returned by <code>getPitchAutocor</code></p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>specSinglePeakCert</code></td>
<td>
<p>(0 to 1) if f0 is calculated based on a single
harmonic ratio (as opposed to several ratios converging on the same
candidate), its certainty is taken to be <code>specSinglePeakCert</code></p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>pitchFloor, pitchCeiling</code></td>
<td>
<p>absolute bounds for pitch candidates (Hz)</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>nCands</code></td>
<td>
<p>number of pitch candidates pre frame (specMethod =
"commonFactor" always returns a single candidate)</p>
</td>
</tr>
</table>
<h3>Details</h3>

<p>Attempts to find F0 of a frame by detecting several putative harmonics and
either finding their highest common factor (specMethod = "commonFactor") or
comparing their ratios (specMethod = "BaNa"). For the highest common factor
method, see Howard &amp; Angus (2017) "Acoustics and psychoacoustics" (section
3.2.1). For BaNa, see Ba et al. (2012) "BaNa: A hybrid approach for noise
resilient pitch detection." Statistical Signal Processing Workshop (SSP),
2012 IEEE.
</p>


<h3>Value</h3>

<p>Returns either NULL or a dataframe of pitch candidates.
</p>


</div>