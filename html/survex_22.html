<div class="container">

<table style="width: 100%;"><tr>
<td>model_performance</td>
<td style="text-align: right;">R Documentation</td>
</tr></table>
<h2>Dataset Level Performance Measures</h2>

<h3>Description</h3>

<p>This function calculates metrics for survival models. The metrics calculated are C/D AUC, Brier score, and their integrated versions, as well as concordance index. It also can calculate ROC curves for specific selected time points.
</p>


<h3>Usage</h3>

<pre><code class="language-R">model_performance(explainer, ...)

## S3 method for class 'surv_explainer'
model_performance(
  explainer,
  ...,
  type = "metrics",
  metrics = c(`C-index` = c_index, `Integrated C/D AUC` = integrated_cd_auc,
    `Brier score` = brier_score, `Integrated Brier score` = integrated_brier_score,
    `C/D AUC` = cd_auc),
  times = NULL
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr style="vertical-align: top;">
<td><code>explainer</code></td>
<td>
<p>an explainer object - model preprocessed by the <code>explain()</code> function</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>...</code></td>
<td>
<p>other parameters, currently ignored</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>type</code></td>
<td>
<p>character, either <code>"metrics"</code> or <code>"roc"</code>. If <code>"metrics"</code> then performance metrics are calculated, if <code>"roc"</code> ROC curves for selected time points are calculated.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>metrics</code></td>
<td>
<p>a named vector containing the metrics to be calculated. The values should be standardized loss functions. The functions can be supplied manually but has to have these named parameters (<code>y_true</code>, <code>risk</code>, <code>surv</code>, <code>times</code>), where <code>y_true</code> represents the <code>survival::Surv</code> object with observed times and statuses, <code>risk</code> is the risk score calculated by the model, and <code>surv</code> is the survival function for each observation evaluated at <code>times</code>.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>times</code></td>
<td>
<p>a numeric vector of times. If <code>type == "metrics"</code> then the survival function is evaluated at these times, if <code>type == "roc"</code> then the ROC curves are calculated at these times.</p>
</td>
</tr>
</table>
<h3>Value</h3>

<p>An object of class <code>"model_performance_survival"</code>. It's a list of metric values calculated for the model. It contains:
</p>

<ul>
<li>
<p> Harrell's concordance index [1]
</p>
</li>
<li>
<p> Brier score [2, 3]
</p>
</li>
<li>
<p> C/D AUC using the estimator proposed by Uno et. al [4]
</p>
</li>
<li>
<p> integral of the Brier score
</p>
</li>
<li>
<p> integral of the C/D AUC
</p>
</li>
</ul>
<h3>References</h3>


<ul>
<li>
<p> [1] Harrell, F.E., Jr., et al. "Regression modelling strategies for improved prognostic prediction." Statistics in Medicine 3.2 (1984): 143-152.
</p>
</li>
<li>
<p> [2] Brier, Glenn W. "Verification of forecasts expressed in terms of probability." Monthly Weather Review 78.1 (1950): 1-3.
</p>
</li>
<li>
<p> [3] Graf, Erika, et al. "Assessment and comparison of prognostic classification schemes for survival data." Statistics in Medicine 18.17‚Äê18 (1999): 2529-2545.
</p>
</li>
<li>
<p> [4] Uno, Hajime, et al. "Evaluating prediction rules for t-year survivors with censored regression models." Journal of the American Statistical Association 102.478 (2007): 527-537.
</p>
</li>
</ul>
<h3>Examples</h3>

<pre><code class="language-R">
library(survival)
library(survex)


cph &lt;- coxph(Surv(time, status) ~ ., data = veteran, model = TRUE, x = TRUE, y = TRUE)
rsf_ranger &lt;- ranger::ranger(Surv(time, status) ~ .,
    data = veteran,
    respect.unordered.factors = TRUE,
    num.trees = 100,
    mtry = 3,
    max.depth = 5
)

rsf_src &lt;- randomForestSRC::rfsrc(Surv(time, status) ~ .,
    data = veteran
)

cph_exp &lt;- explain(cph)
rsf_ranger_exp &lt;- explain(rsf_ranger,
    data = veteran[, -c(3, 4)],
    y = Surv(veteran$time, veteran$status)
)
rsf_src_exp &lt;- explain(rsf_src)


cph_model_performance &lt;- model_performance(cph_exp)
rsf_ranger_model_performance &lt;- model_performance(rsf_ranger_exp)
rsf_src_model_performance &lt;- model_performance(rsf_src_exp)

print(cph_model_performance)

plot(rsf_ranger_model_performance, cph_model_performance,
    rsf_src_model_performance,
    metrics_type = "scalar"
)

plot(rsf_ranger_model_performance, cph_model_performance, rsf_src_model_performance)

cph_model_performance_roc &lt;- model_performance(cph_exp, type = "roc", times = c(100, 250, 500))
plot(cph_model_performance_roc)

</code></pre>


</div>