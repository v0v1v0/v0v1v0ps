<div class="container">

<table style="width: 100%;"><tr>
<td>si_to_od</td>
<td style="text-align: right;">R Documentation</td>
</tr></table>
<h2>Prepare OD data frame</h2>

<h3>Description</h3>

<p>Prepares an OD data frame that next could be used to
estimate movement between origins and destinations
with a spatial interaction model.
</p>


<h3>Usage</h3>

<pre><code class="language-R">si_to_od(origins, destinations, max_dist = Inf, intrazonal = TRUE)
</code></pre>


<h3>Arguments</h3>

<table>
<tr style="vertical-align: top;">
<td><code>origins</code></td>
<td>
<p><code>sf</code> object representing origin locations/zones</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>destinations</code></td>
<td>
<p><code>sf</code> object representing destination locations/zones</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>max_dist</code></td>
<td>
<p>Euclidean distance in meters (numeric).
Only OD pairs that are this distance apart or less will be returned
and therefore included in the SIM.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>intrazonal</code></td>
<td>
<p>Include intrazonal OD pairs?
Intrazonal OD pairs represent movement from one
place in a zone to another place in the same zone.
<code>TRUE</code> by default.</p>
</td>
</tr>
</table>
<h3>Details</h3>

<p>In most origin-destination datasets the spatial entities that constitute
origins (typically administrative zones) also represent destinations.
In this 'unipartite' case <code>origins</code> and <code>destinations</code> should be passed
the same object, an <code>sf</code> data frame representing administrative zones.
</p>
<p>'Bipartite' datasets, by contrast, represent
"spatial interaction systems where origins cannot act as
destinations and vice versa" (Hasova et al. <a href="https://lenkahas.com/files/preprint.pdf">2022</a>).
</p>
<p>a different
<code>sf</code> object can be passed to the <code>destinations</code> argument.
</p>


<h3>Value</h3>

<p>An sf data frame
</p>


<h3>Examples</h3>

<pre><code class="language-R">library(sf)
origins = si_centroids[c(1, 2, 99), ]
destinations = origins
plot(origins$geometry)
odsf = si_to_od(origins, destinations, max_dist = 1200)
plot(odsf)
# note: result contains intrazonal flows represented by linestrings
# with a length of 0, e.g.:
sf::st_coordinates(odsf$geometry[1])
# With different destinations compared with origins
library(sf)
origins = si_centroids[c(2, 99), c(1, 6, 7)]
destinations = si_centroids[1, c(1, 6, 8)]
odsf = si_to_od(origins, destinations)
nrow(odsf) # no intrazonal flows
plot(odsf)
</code></pre>


</div>