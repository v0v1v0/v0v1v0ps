<div class="container">

<table style="width: 100%;"><tr>
<td>epidata_animate</td>
<td style="text-align: right;">R Documentation</td>
</tr></table>
<h2>
Spatio-Temporal Animation of an Epidemic
</h2>

<h3>Description</h3>

<p>Function for the animation of epidemic data, i.e. objects inheriting from 
class <code>"epidata"</code>.  This only works with 1- or 2-dimensional coordinates 
and is not useful if some individuals share the same coordinates 
(overlapping).  There are two types of animation, see argument 
<code>time.spacing</code>.  Besides the direct plotting in the <span style="font-family: Courier New, Courier; color: #666666;"><b>R</b></span> session, it is 
also possible to generate a sequence of graphics files to create animations 
outside <span style="font-family: Courier New, Courier; color: #666666;"><b>R</b></span>.
</p>


<h3>Usage</h3>

<pre><code class="language-R">## S3 method for class 'summary.epidata'
animate(object, main = "An animation of the epidemic",
        pch = 19, col = c(3, 2, gray(0.6)), time.spacing = NULL,
        sleep = quote(5/.nTimes), legend.opts = list(), timer.opts = list(),
        end = NULL, generate.snapshots = NULL, ...)

## S3 method for class 'epidata'
animate(object, ...)
</code></pre>


<h3>Arguments</h3>

<table>
<tr style="vertical-align: top;">
<td><code>object</code></td>
<td>

<p>an object inheriting from class <code>"epidata"</code> or
<code>"summary.epidata"</code>.  In the former case, its summary is calculated
and the function continues as in the latter case, passing all <code>...</code>
arguments to the <code>summary.epidata</code> method.
</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>main</code></td>
<td>

<p>a main title for the plot, see also <code>title</code>.
</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>pch, col</code></td>
<td>

<p>vectors of length 3 specifying the point symbols and colors for
susceptible, infectious and removed individuals (in this order).
The vectors are recycled if necessary.
By default, susceptible individuals are marked as filled green circles,
infectious individuals as filled red circles and removed individuals as
filled gray circles.  Note that the symbols are iteratively drawn
(overlaid) in the same plotting region as time proceeds.
For information about the possible values of <code>pch</code> and <code>col</code>, see
the help pages of <code>points</code> and <code>par</code>, respectively.
</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>time.spacing</code></td>
<td>

<p>time interval for the animation steps.  If <code>NULL</code> (the default), the
events are plotted one by one with pauses of <code>sleep</code> seconds.  Thus, 
it is just the <em>ordering</em> of the events, which is shown.  To plot
the appearance of events proportionally to the exact time line,
<code>time.spacing</code> can be set to a numeric value indicating the period of
time between consecutive plots.  Then, for each time point in
<code>seq(0, end, by = time.spacing)</code> the current state of the epidemic can
be seen and an additional timer indicates the current time
(see <code>timer.opts</code> below).  The argument <code>sleep</code> will be the
artificial pause in seconds between two of those time points.
</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>sleep</code></td>
<td>

<p>time in seconds to <code>Sys.sleep</code> before the next plotting
event.  By default, each artificial pause is of length <code>5/.nTimes</code>
seconds, where <code>.nTimes</code> is the number of events (infections and
removals) of the epidemic, which is evaluated in the function body.
Thus, for <code>time.spacing = NULL</code> the animation has a duration of
approximately 5 seconds. In the other case, <code>sleep</code> is the duration of
the artificial pause between two time points.
Note that <code>sleep</code> is ignored on non-interactive devices
(see <code>dev.interactive</code>)
</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>legend.opts</code></td>
<td>

<p>either a list of arguments passed to the <code>legend</code> function or
<code>NULL</code> (or <code>NA</code>), in which case no legend will be plotted.  All 
necessary arguments have sensible defaults and need not be specified, i.e.
</p>

<dl>
<dt>
<code>x</code>:</dt>
<dd>
<p><code>"topright"</code></p>
</dd>
<dt>
<code>legend</code>:</dt>
<dd>
<p><code>c("susceptible", "infectious", "removed")</code></p>
</dd>
<dt>
<code>pch</code>:</dt>
<dd>
<p>same as argument <code>pch</code> of the main function</p>
</dd>
<dt>
<code>col</code>:</dt>
<dd>
<p>same as argument <code>col</code> of the main function</p>
</dd>
</dl>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>timer.opts</code></td>
<td>

<p>either a list of arguments passed to the <code>legend</code> function or
<code>NULL</code> (or <code>NA</code>), in which case no timer will be plotted.  All 
necessary arguments have sensible defaults and need not be specified, i.e.
</p>

<dl>
<dt>
<code>x</code>:</dt>
<dd>
<p><code>"bottomright"</code></p>
</dd>
<dt>
<code>title</code>:</dt>
<dd>
<p><code>"time"</code></p>
</dd>
<dt>
<code>box.lty</code>:</dt>
<dd>
<p><code>0</code></p>
</dd>
<dt>
<code>adj</code>:</dt>
<dd>
<p><code>c(0.5,0.5)</code></p>
</dd>
<dt>
<code>inset</code>:</dt>
<dd>
<p><code>0.01</code></p>
</dd>
<dt>
<code>bg</code>:</dt>
<dd>
<p><code>"white"</code></p>
</dd>
</dl>
<p>Note that the argument <code>legend</code>, which is the current time of the
animation, can not be modified.
</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>end</code></td>
<td>

<p>ending time of the animation in case of <code>time.spacing</code> not being
<code>NULL</code>.  By default (<code>NULL</code>), time stops after the last event.
</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>generate.snapshots</code></td>
<td>

<p>By default (<code>NULL</code>), the animation is not saved to image files
but only shown on the on-screen device. In order to print to files,
<code>time.spacing</code> must not be <code>NULL</code>, a screen device must be
available, and there are two options:<br>
If the framework of the <span class="pkg">animation</span> package
should be used, i.e. the <code>animate</code>-call is passed as the
<code>expr</code> argument to one of the <code>save*</code> functions of the
<span class="pkg">animation</span> package, then set
<code>generate.snapshots = img.name</code>, where <code>img.name</code> is the
base name for the generated images (the same as passed to the
<code>save*</code> function). The path and format (type, width, height)
for the generated images is derived from
<code>ani.options</code>. See the last example below.<br>
Alternatively, <code>generate.snapshots</code> may be a list of arguments
passed to the function <code>dev.print</code>, which then is
executed at each time point of the grid defined by
<code>time.spacing</code>.  Essentially, this is used for 
saving the produced snapshots to files, e.g.
</p>
<p><code>generate.snapshots = 
    list(device=pdf, file=quote(paste("epidemic_",sprintf(form,tp),".pdf",
    sep="")))</code>
</p>
<p>will store the animation steps in pdf-files in the current
working directory, where the file names each end with the time point
represented by the corresponding plot.  Because the variables <code>tp</code>
and <code>form</code> should only be evaluated inside the function the
<code>file</code> argument is <code>quote</code>d. Alternatively, the file name
could also make use of the internal plot index <code>i</code>, e.g., use
<code>file=quote(paste("epidemic",i,".pdf",sep=""))</code>.
</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>...</code></td>
<td>

<p>further graphical parameters passed to the basic call of <code>plot</code>, e.g.
<code>las</code>, <code>cex.axis</code> (etc.) and <code>mgp</code>.
</p>
</td>
</tr>
</table>
<h3>Author(s)</h3>

<p>Sebastian Meyer
</p>


<h3>See Also</h3>

<p><code>summary.epidata</code> for the data, on which the plot is based.
<code>plot.epidata</code> for plotting the evolution of an epidemic by
the numbers of susceptible, infectious and removed individuals.
</p>
<p>The contributed <span style="font-family: Courier New, Courier; color: #666666;"><b>R</b></span> package <span class="pkg">animation</span>.
</p>


<h3>Examples</h3>

<pre><code class="language-R">data("hagelloch")
(s &lt;- summary(hagelloch))

# plot the ordering of the events only
animate(s)   # or: animate(hagelloch)

# with timer (animate only up to t=10)
animate(s, time.spacing=0.1, end=10, sleep=0.01,
        legend.opts=list(x="topleft"))

# Such an animation can be saved in various ways using tools of
# the animation package, e.g., saveHTML()
if (interactive() &amp;&amp; require("animation")) {
  oldwd &lt;- setwd(tempdir())  # to not clutter up the current working dir
  saveHTML({
    par(bg="white")  # default "transparent" is grey in some browsers
    animate(s, time.spacing=1, sleep=0, legend.opts=list(x="topleft"),
            generate.snapshots="epiani")
  }, use.dev=FALSE, img.name="epiani", ani.width=600, interval=0.5)
  setwd(oldwd)
}
</code></pre>


</div>