<div class="container">

<table style="width: 100%;"><tr>
<td>calcknncorrWithinQuery</td>
<td style="text-align: right;">R Documentation</td>
</tr></table>
<h2>Calculates the k-NN correlation within the query cells only, which measures how well the sorted
ordering of k nearest query neighbors in a query de novo PCA embedding correlate with the ordering
for the cells in the reference mapping embedding.</h2>

<h3>Description</h3>

<p>Calculates the k-NN correlation within the query cells only, which measures how well the sorted
ordering of k nearest query neighbors in a query de novo PCA embedding correlate with the ordering
for the cells in the reference mapping embedding.
</p>


<h3>Usage</h3>

<pre><code class="language-R">calcknncorrWithinQuery(
  query,
  var = NULL,
  k = 100,
  topn = 2000,
  d = 20,
  distance = "euclidean"
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr style="vertical-align: top;">
<td><code>query</code></td>
<td>
<p>Query object (returned from mapQuery)</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>var</code></td>
<td>
<p>Query metadata batch variable (PCA is calculated within each batch separately); if NULL, do not split by batch</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>k</code></td>
<td>
<p>Number of neighbors to use for kNN-correlation calculation</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>topn</code></td>
<td>
<p>number of variable genes to calculate within each query batch for query PCA</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>d</code></td>
<td>
<p>number of dimensions for query PCA within each query batch</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>distance</code></td>
<td>
<p>either 'euclidean' or 'cosine'</p>
</td>
</tr>
</table>
<h3>Value</h3>

<p>Vector of within-query k-NN correlations for query cells
</p>


</div>