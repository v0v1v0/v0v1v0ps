<div class="container">

<table style="width: 100%;"><tr>
<td>superpc.cv</td>
<td style="text-align: right;">R Documentation</td>
</tr></table>
<h2>
Cross-validation for supervised principal components
</h2>

<h3>Description</h3>

<p>This function uses a form of cross-validation to estimate 
the optimal feature threshold in supervised principal components
</p>


<h3>Usage</h3>

<pre><code class="language-R">    superpc.cv(fit,
               data, 
               n.threshold=20,
               n.fold=NULL,
               folds=NULL,
               n.components=3, 
               min.features=5, 
               max.features=nrow(data$x),
               compute.fullcv= TRUE,
               compute.preval=TRUE, 
               xl.mode=c("regular","firsttime","onetime","lasttime"), 
               xl.time=NULL,
               xl.prevfit=NULL)
</code></pre>


<h3>Arguments</h3>

<table>
<tr style="vertical-align: top;">
<td><code>fit</code></td>
<td>
<p> Object returned by superpc.train </p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>data</code></td>
<td>
<p> Data object of form described in superpc.train documentation </p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>n.threshold</code></td>
<td>
<p>Number of thresholds to consider. Default 20.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>n.fold</code></td>
<td>
<p> Number of cross-validation folds. default is around 10 
(program pick a convenient value based on the sample size </p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>folds</code></td>
<td>
<p>List of indices  of cross-validation folds (optional)   </p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>n.components</code></td>
<td>
<p> Number of cross-validation components to use: 1,2 or 3. </p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>min.features</code></td>
<td>
<p> Minimum number of features to include 
in determining range for threshold. 
Default 5.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>max.features</code></td>
<td>
<p> Maximum number of features to include 
in determining range for threshold.
Default is total number of features in the dataset  </p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>compute.fullcv</code></td>
<td>
<p> Should full cross-validation  be done? </p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>compute.preval</code></td>
<td>
<p> Should full pre-validation  be done? </p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>xl.mode</code></td>
<td>
<p>Used by Excel interface only</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>xl.time</code></td>
<td>
<p>Used by Excel interface only</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>xl.prevfit</code></td>
<td>
<p>Used by Excel interface only</p>
</td>
</tr>
</table>
<h3>Details</h3>

<p>This function uses a form of cross-validation to estimate the optimal feature threshold in supervised principal components. 
To avoid prolems with fitting Cox models to samll validation datastes, 
it uses the "pre-validation" approach of Tibshirani and Efron (2002)
</p>


<h3>Value</h3>

<table>
<tr style="vertical-align: top;">
<td><code>threshold</code></td>
<td>
<p>Vector of thresholds considered</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>nonzero</code></td>
<td>
<p>Number of features exceeding each value of the threshold</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>scor.preval</code></td>
<td>
<p>Likelihood ratio scores from pre-validation</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>scor</code></td>
<td>
<p>Full CV scores</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>folds</code></td>
<td>
<p>Indices of CV folds used</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>featurescores.folds</code></td>
<td>
<p>Feature scores for each fold</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>v.preval</code></td>
<td>
<p>The pre-validated predictors</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>type</code></td>
<td>
<p>problem type</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>call</code></td>
<td>
<p>calling sequence</p>
</td>
</tr>
</table>
<h3>Author(s)</h3>


<ul>
<li>
<p> "Eric Bair, Ph.D."
</p>
</li>
<li>
<p> "Jean-Eudes Dazard, Ph.D."
</p>
</li>
<li>
<p> "Rob Tibshirani, Ph.D."
</p>
</li>
</ul>
<p>Maintainer: "Jean-Eudes Dazard, Ph.D."
</p>


<h3>References</h3>


<ul>
<li>
<p> E. Bair and R. Tibshirani (2004).
"<em>Semi-supervised methods to predict patient survival from gene expression data</em>."
PLoS Biol, 2(4):e108.
</p>
</li>
<li>
<p> E. Bair, T. Hastie, D. Paul, and R. Tibshirani (2006).
"<em>Prediction by supervised principal components</em>."
J. Am. Stat. Assoc., 101(473):119-137.
</p>
</li>
</ul>
<h3>Examples</h3>

<pre><code class="language-R">## Not run: 
set.seed(332)

#generate some data
x &lt;- matrix(rnorm(50*30), ncol=30)
y &lt;- 10 + svd(x[1:50,])$v[,1] + .1*rnorm(30)
censoring.status &lt;- sample(c(rep(1,20), rep(0,10)))

featurenames &lt;- paste("feature", as.character(1:50), sep="")
data &lt;- list(x=x, 
             y=y, 
             censoring.status=censoring.status, 
             featurenames=featurenames)

a &lt;- superpc.train(data, type="survival")
aa &lt;- superpc.cv(a, data)

## End(Not run)
</code></pre>


</div>