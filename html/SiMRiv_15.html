<div class="container">

<table style="width: 100%;"><tr>
<td>resistanceFromShape</td>
<td style="text-align: right;">R Documentation</td>
</tr></table>
<h2>Build resistance raster by combining shapefiles</h2>

<h3>Description</h3>

<p>Creates a resistance raster to be used in simulations, by rasterizing and combining different shapefiles.
It is basically a helper function that uses the functions from package <code>terra-package</code> to create and manipulate
such raster.
</p>


<h3>Usage</h3>

<pre><code class="language-R">  resistanceFromShape(shp, baseRaster, res, binary = is.na(field)
	, field = NA, background = 1, buffer = NA, margin = 0
	, mapvalues = NA, extend = TRUE, ...)
</code></pre>


<h3>Arguments</h3>

<table>
<tr style="vertical-align: top;">
<td><code>shp</code></td>
<td>
<p>either a character string specifying the shapefile filename or a shapefile object itself.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>baseRaster</code></td>
<td>
<p>if provided, a raster onto which to stack the given rasterized shapefile. If not provided, a new raster will be created.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>res</code></td>
<td>
<p>the desired pixel resolution of the raster to be created, when <code>baseRaster</code> is not provided.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>binary</code></td>
<td>
<p>if TRUE, the shapefile will be rasterized so that any feature is assigned a value of 0, and the background 1.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>field</code></td>
<td>
<p>either a number in the range [0-1], in which case it will be assigned to all pixels covered by features of the shapefile; or the name of the numeric shapefile field from which to extract such number; or the name of the factor shapefile field containing classes to map to resistance values (see <code>mapvalues</code>).</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>background</code></td>
<td>
<p>the value in the range [0-1] to assign to all pixels that are not covered by any shapefile feature.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>buffer</code></td>
<td>
<p>the size of a buffer to build around every shapefile feature before rasterizing.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>margin</code></td>
<td>
<p>the margin to leave around the shapefile's extent when rasterizing (i.e. how much to increase shapefile's extent).</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>mapvalues</code></td>
<td>
<p>a named vector specifying the resistance value mapping from the classes of <code>field</code>.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>extend</code></td>
<td>
<p>set to TRUE to extend <code>baseRaster</code> if the shapefile has a larger extent. If FALSE, the shapefile will be clipped to <code>baseRaster</code>'s extent.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>...</code></td>
<td>
<p>other arguments to pass to <code>rasterize</code>.</p>
</td>
</tr>
</table>
<h3>Details</h3>

<p>This function rasterizes the given shapefile using provided options and optionally stacks it onto the provided <code>baseRaster</code>.
The produced raster does not contain NAs and all values are in the range [0, 1]. All the areas of the raster for which data is not provided are assigned the value of <code>background</code>.
</p>
<p>When combining a shapefile to an existing <code>baseRaster</code>, only the areas covered by features are updated in the base raster;
all the remaining areas are left with the original values of <code>baseRaster</code>. If the shapefile to combine has a larger extent than <code>baseRaster</code>,
those extra pixels will be assigned the <code>background</code> value defined for the shapefile (not use the original background of <code>baseRaster</code>).
</p>


<h3>Value</h3>

<p>The resistance raster, an object of class <code>SpatRaster-class</code>.
</p>


<h3>See Also</h3>

<p><code>simulate</code>.
</p>


<h3>Examples</h3>

<pre><code class="language-R">## Example taken from the vignette; see the vignette
## for more details and examples.
## In this example we read a land cover shapefile and
## assign resistance values based on each polygon's
## land cover class (provided in the field 'coverclass')

landcover &lt;- resistanceFromShape(
  system.file("doc/landcover.shp", package="SiMRiv")
  , res = 150, field = "coverclass", mapvalues = c(
    "forest" = 0.5, "urban" = 1, "dam" = 0
    , "shrubland" = 0.75), background = 0.95)
    
## We then combine it with a river network from another
## shapefile, assigning a value of 0 to all rivers

river.landcover &lt;- resistanceFromShape(
  system.file("doc/river-sample.shp", package="SiMRiv")
  , baseRaster = landcover, buffer = 100, field = 0
  , background = 0.95, margin = 1000)

plot(river.landcover, axes = FALSE, mar = c(0, 0, 0, 2))

</code></pre>


</div>