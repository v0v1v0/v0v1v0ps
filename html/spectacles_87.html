<div class="container">

<table style="width: 100%;"><tr>
<td>spectra-methods</td>
<td style="text-align: right;">R Documentation</td>
</tr></table>
<h2>Retrieves or sets the spectra of a <code>Spectra*</code> objects.</h2>

<h3>Description</h3>

<p>Either retrieves the spectra matrix from a <code>Spectra*</code> object, or
creates a <code>Spectra*</code> object from a <code>"data.frame"</code> object different
interfaces detailed below.When applied to a <code>Spectra*</code> object, this functions simply returns the spectra it is storing.
</p>


<h3>Usage</h3>

<pre><code class="language-R">## S4 method for signature 'Spectra'
spectra(object)

## S4 replacement method for signature 'data.frame'
spectra(object, ...) &lt;- value

## S4 replacement method for signature 'Spectra'
spectra(object) &lt;- value
</code></pre>


<h3>Arguments</h3>

<table>
<tr style="vertical-align: top;">
<td><code>object</code></td>
<td>
<p>an object of class <code>"Spectra"</code> or inheriting from this class</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>...</code></td>
<td>
<p>see details below</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>value</code></td>
<td>
<p>see details below</p>
</td>
</tr>
</table>
<h3>Details</h3>

<p>If applied on a <code>"data.frame"</code> object, it is an helper function to
create a <code>Spectra*</code> object. Two kind of interfaces are then available.
<code>value</code> can be: 
</p>

<dl>
<dt>a vector:</dt>
<dd>
<p>Similarly to <code>wl</code>, the wavelengths of the spectra can be passed by a <code>"numeric"</code> vector. Alternatively, the names of the columns that contain the spectra information can be passed as a <code>"character"</code> vector.</p>
</dd>
<dt>a formula:</dt>
<dd>
<p>This interface is specific to inspectr. It follows a
scheme where differents parts can be observed, the id column, the attributes
columns, and the spectra columns, described by the wavelengths at which it
has been measured:</p>
</dd>
</dl>
<ul>
<li> <p><b>Placeholders:</b> 
</p>

<ul>
<li> <p><code>...</code> placeholder for all the columns of your data.frame object except those that have been already used in other parts of the formula. This can lead to errors. E.g. if <code>object</code> has data one every wavelength between 350 and 2500 nm, <code>spectra(object) &lt;- id_field ~ ... ~ 500:2500</code> will stores the columns corresponding to the wavelengths 350-499 nm in its data slot!
</p>
</li>
<li> <p><code>id</code> For the creation of a <code>SpectraDataFrame</code>, it is important to always specify an id field in the formula. If no id column is present, the <code>id</code> placeholder will create one for you.
</p>
</li>
</ul>
</li>
<li> <p><code>spectra(object) &lt;- ~ 350:2500</code> will build a <code>Spectra</code> object from the wavelengths between 350 and 2500, based on the column names.
</p>
</li>
<li> <p><code>spectra(object) &lt;- ~ 350:2:2500</code> will build a <code>Spectra</code> object from the wavelengths in <code>seq(350, 2500, by = 2)</code>
</p>
</li>
<li> <p><code>spectra(object) &lt;- ~ 500:2350</code> will build a <code>Spectra</code> object from the wavelengths between 500 and 2350, even though other wavelengths are present (they will be dropped)
</p>
<p>In the three later cases, the id field has been dropped (it will be automatically created). If you want to use a column of <code>"data.frame"</code> as an id filed, you can still use the first part of the formula:
</p>
</li>
<li> <p><code>spectra(object) &lt;- id_field ~ 350:2500</code> 
</p>
</li>
<li> <p><code>spectra(object) &lt;- id_field ~ 350:5:2500</code>
</p>
<p>Some data can also be added to the object, which will then be of <code>SpectraDataFrame</code> class:
</p>
</li>
<li> <p><code>spectra(object) &lt;- id_field ~ property1 ~ 500:2300</code> will create a <code>SpectraDataFrame</code> with ids from the id_field column, data from the property1 column, and spectral information between 500 and 2300 nm. That means that data property2, and all spectral information from bands &lt; 500 nm or &gt; 2300 nm will be dropped
</p>
<p>You can also combine the placeholders:
</p>
</li>
<li> <p><code>spectra(object) &lt;- id_field ~ ... ~ 350:2500</code> will create a <code>SpectraDataFrame</code> object with ids from the id_field column, all spectral bands between 350 and 2500 nm. The data slot is given all the remaining columns.  
</p>
</li>
</ul>
<h3>Author(s)</h3>

<p>Pierre Roudier <a href="mailto:pierre.roudier@gmail.com">pierre.roudier@gmail.com</a>
</p>


<h3>Examples</h3>

<pre><code class="language-R">
# Loading example data
data(oz)
class(oz) # this is a simple data.frame
# structure of the data.frame: it is rowwise-formatted
big.head(oz) 

## CREATING Spectra OBJECTS
##

# Using spectra() to initiate a Spectra from 
# the data.frame
spectra(oz) &lt;- sr_no ~ 350:2500

# It is possible to select wavelengths using the formula interface
data(oz)
spectra(oz) &lt;- sr_no ~ 350:5:2500

data(oz)
spectra(oz) &lt;- sr_no ~ 500:1800

## CREATING SpectraDataFrame OBJECTS
##

# Using spectra() to initiate a SpectraDataFrame from 
# the data.frame
data(oz)
spectra(oz) &lt;- sr_no ~ carbon + ph + clay ~ 350:2500

# Selecting data to be included in the SpectradataFrame object
data(oz)
spectra(oz) &lt;- sr_no ~ carbon ~ 350:2500

# Forcing the creation of new ids using the id keyword in the 
# formula interface
data(oz)
spectra(oz) &lt;- id ~ carbon ~ 350:2500
ids(oz, as.vector = TRUE)

# Using the "..." short-hand to select all the remaining columns
data(oz)
spectra(oz) &lt;- sr_no ~ ... ~ 350:2500

## CREATING Spectra OBJECTS FROM
## BY-COLS-FORMATTED DATA
##

# For data formatted in the colwise format, 
# use the "colwise" mode

# Transforming data into colwise format
# for demonstration's sake
#
m &lt;- melt_spectra(oz)
oz_by_col &lt;- reshape2::acast(m, ... ~ sr_no)
oz_by_col &lt;- data.frame(
  wl = rownames(oz_by_col), 
  oz_by_col, 
  check.names = FALSE)

# Here's colwise-formatted data 
big.head(oz_by_col)

# Convert it into Spectra object
spectra(oz_by_col, mode = "colwise") &lt;- wl ~ ...

# Then data can be added to promote it as a SpectraDataFrame
my.data &lt;- features(oz)
features(oz_by_col) &lt;- my.data

</code></pre>


</div>