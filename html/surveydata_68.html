<div class="container">

<table style="width: 100%;"><tr>
<td>surveydata-package</td>
<td style="text-align: right;">R Documentation</td>
</tr></table>
<h2>Tools, classes and methods to manipulate survey data.</h2>

<h3>Description</h3>

<p>Tools, classes and methods to manipulate survey data.
</p>


<h3>Details</h3>

<p>Surveydata objects have been designed to function with SPSS export data, i.e. the result of an SPSS import,  <code>foreign::read.spss()</code>.  This type of data is contained in a data.frame, with information about the questionnaire text in the <code>variable.labels</code> attribute.  Surveydata objects keep track of the variable labels, by offering methods for renaming, subsetting, etc.
</p>
<p>Coercion functions:
</p>

<ul>
<li> <p><code>as.surveydata()</code>
</p>
</li>
<li> <p><code>is.surveydata()</code>
</p>
</li>
<li> <p><code>as.data.frame.surveydata()</code>
</p>
</li>
</ul>
<p>To access and modify attributes:
</p>

<ul>
<li> <p><code>pattern()</code>
</p>
</li>
<li> <p><code>varlabels()</code>
</p>
</li>
</ul>
<p>To subset or merge surveydata objects:
</p>

<ul>
<li> <p><code>merge()</code>
</p>
</li>
<li> <p><code>Extract()</code>
</p>
</li>
<li> <p><code>cbind.surveydata()</code>
</p>
</li>
</ul>
<p>To extract question text from varlabels:
</p>

<ul>
<li> <p><code>question_text()</code>
</p>
</li>
<li> <p><code>question_text_common()</code>
</p>
</li>
<li> <p><code>question_text_unique()</code>
</p>
</li>
</ul>
<p>To fix common encoding problems:
</p>

<ul>
<li> <p><code>encToInt()</code>
</p>
</li>
<li> <p><code>intToEnc()</code>
</p>
</li>
<li> <p><code>fix_common_encoding_problems()</code>
</p>
</li>
</ul>
<p>To clean data:
</p>

<ul>
<li> <p><code>remove_dont_know()</code> to remove "Don't know" responses
</p>
</li>
<li> <p><code>remove_all_dont_know()</code> to remove "Don't know" responses from all questions
</p>
</li>
<li> <p><code>fix_levels_01()</code> to fix level formatting of all question with Yes/No type answers
</p>
</li>
</ul>
<p>Miscellaneous tools:
</p>

<ul><li> <p><code>dropout()</code> to determine questions where respondents drop out
</p>
</li></ul>
<h3>Author(s)</h3>

<p>Andrie de Vries <a href="mailto:apdevries@gmail.com">apdevries@gmail.com</a>
</p>


<h3>Examples</h3>

<pre><code class="language-R">library(surveydata)

# Create surveydata object

sdat &lt;- data.frame(
    id   = 1:4,
    Q1   = c("Yes", "No", "Yes", "Yes"),
    Q4_1 = c(1, 2, 1, 2), 
    Q4_2 = c(3, 4, 4, 3), 
    Q4_3 = c(5, 5, 6, 6), 
    Q10 = factor(c("Male", "Female", "Female", "Male")),
    crossbreak  = c("A", "A", "B", "B"), 
    weight      = c(0.9, 1.1, 0.8, 1.2)
)

varlabels(sdat) &lt;- c(
    "RespID",
    "Question 1", 
    "Question 4: red", "Question 4: green", "Question 4: blue", 
    "Question 10",
    "crossbreak",
    "weight"
  )

sv &lt;- as.surveydata(sdat, renameVarlabels = TRUE)

# Extract specific questions
sv[, "Q1"]
sv[, "Q4"]

# Query attributes
varlabels(sv)
pattern(sv)

# Find unique questions

questions(sv)
which.q(sv, "Q1")
which.q(sv, "Q4")

# Find question text
question_text(sv, "Q1")
question_text(sv, "Q4")

question_text_common(sv, "Q4")
question_text_unique(sv, "Q4")


# Basic operations on a surveydata object, illustrated with the example dataset membersurvey

class(membersurvey)

questions(membersurvey)

which.q(membersurvey, "Q1")
which.q(membersurvey, "Q3")
which.q(membersurvey, c("Q1", "Q3"))

question_text(membersurvey, "Q3")
question_text_unique(membersurvey, "Q3")
question_text_common(membersurvey, "Q3")

# Extracting columns from a surveydata object

head(membersurvey[, "Q1"])
head(membersurvey["Q1"])
head(membersurvey[, "Q3"])
head(membersurvey[, c("Q1", "Q3")])

# Note that the result is always a surveydata object, even if only one column is extracted

head(membersurvey[, "id"])
str(membersurvey[, "id"])

</code></pre>


</div>