<div class="container">

<table style="width: 100%;"><tr>
<td>lottie_addEventListener</td>
<td style="text-align: right;">R Documentation</td>
</tr></table>
<h2>Add Event Listener to 'Lottie' Animation</h2>

<h3>Description</h3>

<p>Adds an event listener to a 'Lottie' animation within a 'shiny' application.
It is also possible to apply multiple event listeners to a single animation.
</p>


<h3>Usage</h3>

<pre><code class="language-R">lottie_addEventListener(
  animation,
  event,
  target,
  ...,
  session = shiny::getDefaultReactiveDomain()
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr style="vertical-align: top;">
<td><code>animation</code></td>
<td>
<p>A 'Lottie' animation object created by the <code>lottie_animation</code> function or its name.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>event</code></td>
<td>
<p>The event to listen for (e.g. <code>"mouseenter"</code>, <code>"mouseleave"</code> etc.).</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>target</code></td>
<td>
<p>The target for the event listener, either <code>"animation"</code> or <code>"container"</code>.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>...</code></td>
<td>
<p>Additional optional event listener properties, including:
</p>

<dl>
<dt><code>state</code></dt>
<dd>
<p>A character string corresponding to an animation state (either <code>"play"</code>, <code>"pause"</code>, or <code>"stop"</code>).</p>
</dd>
<dt><code>loop</code></dt>
<dd>
<p>Logical value indicating whether the animation should loop.</p>
</dd>
<dt><code>speed</code></dt>
<dd>
<p>A numeric specifying the desired animation speed.</p>
</dd>
<dt><code>direction</code></dt>
<dd>
<p>Either <code>1</code> for forward playback or <code>-1</code> for reverse playback.</p>
</dd>
<dt><code>setSubFrame</code></dt>
<dd>
<p>A logical value specifying whether a 'Lottie' animation should loop (<code>TRUE</code>) or not (<code>FALSE</code>).</p>
</dd>
<dt><code>playSegments</code></dt>
<dd>
<p>A numeric vector or list of numeric vectors indicating the segment(s) to be played.</p>
</dd>
<dt><code>forceFlag</code></dt>
<dd>
<p>Logical value indicating whether to force the animation to play the specified segments immediately (<code>TRUE</code>) or wait until the current animation completes (<code>FALSE</code>).</p>
</dd>
<dt><code>custom_js</code></dt>
<dd>
<p>Custom 'JavaScript' to execute when the event is triggered.</p>
</dd>
<dt><code>functionName</code></dt>
<dd>
<p>Optional name for the event handler function (can be useful when referencing the event listener, such as with <code>lottie_removeEventListener</code>).</p>
</dd>
</dl>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>session</code></td>
<td>
<p>The 'shiny' session object. Defaults to the current reactive domain.</p>
</td>
</tr>
</table>
<h3>Details</h3>

<p>This function has several usage options:
</p>

<ul>
<li>
<p> Supplying an animation object created by the <code>lottie_animation</code> function, and placing the resultant list object in the 'shiny' UI.
</p>
</li>
<li>
<p> Outside of a reactive context, supplying the name of the animation and placing the resultant <code>script</code> object in the 'shiny' UI.
</p>
</li>
<li>
<p> Within a reactive context, supplying the name of the animation.
</p>
</li>
</ul>
<p>When run within a reactive context, sends a custom session message <code>"lottie_js_runJS"</code> containing the function arguments.
</p>
<p><strong>Target Options</strong>
</p>

<ul>
<li> <p><code>"animation"</code>: Attaches the event listener directly to the 'Lottie' animation instance. This is necessary when using a Lottie-specific event (e.g. "onComplete"). See <a href="https://airbnb.io/lottie/#/web">https://airbnb.io/lottie/#/web</a> for further details.
</p>
</li>
<li> <p><code>"container"</code>: Attaches the event listener to the container div of the 'Lottie' animation. This should be used when using a generic HTML event, such as "mouseenter" or "mouseleave".
</p>
</li>
</ul>
<h3>Value</h3>

<p>If used within a reactive context, the function will execute the necessary 'JavaScript'. Otherwise, it will return a <code>script</code> tag containing the 'JavaScript'.
</p>


<h3>Note</h3>

<p>Using the <code>custom_js</code> argument, it is possible to assign 'shiny' input values when an event is triggered, see <code>lottie_removeEventListener</code> for an example.
</p>


<h3>Examples</h3>

<pre><code class="language-R">
library(shiny)
library(shinyLottie)

ui &lt;- fluidPage(
  include_lottie(),
  # Create an 'animation' event listener that prints a message to the
  # browser console after each loop
  lottie_animation(
    path = "shinyLottie/example.json",
    name = "my_animation"
  ) |&gt;
  lottie_addEventListener(
    event = "loopComplete",
    target = "animation",
    custom_js = "console.log('Animation Complete!');"
  ),
  # Create a 'container' event listener that plays an animation when
  # hovering over the button, and another that pauses the animation
  # when hovering stops
  lottie_animation(
    path = "shinyLottie/example.json",
    name = "button",
    width = "200px",
    height = "100px",
    loop = TRUE,
    autoplay = FALSE,
  ) |&gt; lottie_button(inputId = "lottieButton", label = "Lottie",
                     height = "200px", width = "200px") |&gt;
    lottie_addEventListener("mouseenter", "container", state = "play") |&gt;
    lottie_addEventListener("mouseleave", "container", state = "pause")
)

server &lt;- function(input, output, session) {}

shinyApp(ui, server)

</code></pre>


</div>