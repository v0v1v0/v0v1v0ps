<div class="container">

<table style="width: 100%;"><tr>
<td>sentiment_series</td>
<td style="text-align: right;">R Documentation</td>
</tr></table>
<h2>Compute a sentiment time series</h2>

<h3>Description</h3>

<p>Compute a sentiment time series based on the internal sentiment
and dates of a <code>sentopicmodel</code>. The time series computation supports
multiple sampling period and optionally allow computing a moving average.
</p>


<h3>Usage</h3>

<pre><code class="language-R">sentiment_series(
  x,
  period = c("year", "quarter", "month", "day"),
  rolling_window = 1,
  scale = TRUE,
  scaling_period = c("1900-01-01", "2099-12-31"),
  as.xts = TRUE,
  ...
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr style="vertical-align: top;">
<td><code>x</code></td>
<td>
<p>a <code>LDA()</code>, <code>JST()</code> or <code>rJST()</code> model populated with internal dates
and/or internal sentiment.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>period</code></td>
<td>
<p>the sampling period within which the sentiment of documents
will be averaged. <code>period = "identity"</code> is a special case that will return
document-level variables before the aggregation happens. Useful to rapidly
compute topical sentiment at the document level.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>rolling_window</code></td>
<td>
<p>if greater than 1, determines the rolling window to
compute a moving average of sentiment. The rolling window is based on the
period unit and rely on actual dates (i.e, is not affected by unequally
spaced data points).</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>scale</code></td>
<td>
<p>if <code>TRUE</code>, the resulting time series will be scaled to a mean of
zero and a standard deviation of 1. This argument also has the side effect
of attaching scaled sentiment values as <em>docvars</em> to the input object with
the <code style="white-space: pre;">⁠_scaled⁠</code> suffix.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>scaling_period</code></td>
<td>
<p>the date range over which the scaling should be
applied. Particularly useful to normalize only the beginning of the time
series.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>as.xts</code></td>
<td>
<p>if <code>TRUE</code>, returns an xts::xts object. Otherwise, returns a
data.frame.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>...</code></td>
<td>
<p>other arguments passed on to <code>zoo::rollapply()</code> or <code>mean()</code> and
<code>sd()</code>.</p>
</td>
</tr>
</table>
<h3>Value</h3>

<p>A time series of sentiment, stored as an xts::xts or
data.frame.
</p>


<h3>See Also</h3>

<p>sentopics_sentiment sentopics_date
</p>
<p>Other series functions: 
<code>proportion_topics()</code>,
<code>sentiment_breakdown()</code>,
<code>sentiment_topics()</code>
</p>


<h3>Examples</h3>

<pre><code class="language-R">lda &lt;- LDA(ECB_press_conferences_tokens)
series &lt;- sentiment_series(lda, period = "month")

# JST and rJST models can use computed sentiment from the sentiment layer,
# but the model must be estimated first.
rjst &lt;- rJST(ECB_press_conferences_tokens, lexicon = LoughranMcDonald)
sentiment_series(rjst)

sentopics_sentiment(rjst) &lt;- NULL ## remove existing sentiment
rjst &lt;- fit(rjst, 10) ## estimating the model is then needed
sentiment_series(rjst)

# note the presence of both raw and scaled sentiment values
# in the initial object
sentopics_sentiment(lda)
sentopics_sentiment(rjst)
</code></pre>


</div>