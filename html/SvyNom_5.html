<div class="container">

<table style="width: 100%;"><tr>
<td>svycox.validate</td>
<td style="text-align: right;">R Documentation</td>
</tr></table>
<h2>
Validating a nomogram for a survey-weighted Cox model
</h2>

<h3>Description</h3>

<p>Validates a nomogram for a survey-weighted Cox model using bootstrap.
</p>


<h3>Usage</h3>

<pre><code class="language-R">svycox.validate(.boot.index, .nom, .data)
</code></pre>


<h3>Arguments</h3>

<table>
<tr style="vertical-align: top;">
<td><code>.boot.index</code></td>
<td>

<p>a matrix of bootstrap sample indicators with the number of rows the same as the number of rows 
in the data on which the nomogram was created and the number of columns being the number of 
bootstrap samples</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>.nom</code></td>
<td>

<p>a nomogram object returned from svycox.nomogram
</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>.data</code></td>
<td>

<p>contains the dataset on which the validation will take place
</p>
</td>
</tr>
</table>
<h3>Details</h3>

<p>Note that generating the bootstrap sample is design dependent and it is not part of the function. 
The user has to generate the bootstrap samples consistent with the   design used. An example of how 
the bootstrap sample was generated for the dataset is presented in the reference below. </p>


<h3>Value</h3>

<p>prints the estimated optimism and returns the vector of optimism values for each bootstrap sample 
which can be used to summarize the validation with the measure of choice
</p>


<h3>References</h3>

<p>Marinela Capanu, Mithat Gonen (2015). Building a Nomogram for Survey-Weighted Cox Models Using R. 
Journal of Statistical Software, Code Snippets, 64(1), 1-17. URL https://www.jstatsoft.org/v64/c01/.
</p>


<h3>Examples</h3>

<pre><code class="language-R">bootit=200
library(survey)
library(rms)
data(noNA)
dd=datadist(noNA)
options(datadist="dd")
dstr2=svydesign(id=~1, strata=~group, prob=~inv_weight, fpc=~ssize, data=noNA)
mynom=svycox.nomogram(.design=dstr2, .model=Surv(survival,surv_cens)~ECOG+liver_only+Alb+Hb+Age+
Differentiation+Gt_1_m1site+lymph_only, .data=noNA, pred.at=24, fun.lab="Prob of 2 Yr OS")

cases=which(noNA$group=="long")
controls=which(noNA$group=="&lt;24")
boot.index=matrix(NA,nrow(noNA),bootit)
for(i in 1:bootit){
boot.index[,i]=c(sample(cases,replace=TRUE),sample(controls,replace=TRUE))
}
myval=svycox.validate(boot.index,mynom,noNA)  
</code></pre>


</div>