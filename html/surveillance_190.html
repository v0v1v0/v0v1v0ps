<div class="container">

<table style="width: 100%;"><tr>
<td>linelist2sts</td>
<td style="text-align: right;">R Documentation</td>
</tr></table>
<h2>
Convert Dates of Individual Case Reports into a
Time Series of Counts
</h2>

<h3>Description</h3>

<p>The function is used to convert an individual line list of cases to an
aggregated time series of counts based on event date information of the cases.
</p>


<h3>Usage</h3>

<pre><code class="language-R">linelist2sts(linelist,dateCol,
              aggregate.by=c("1 day", "1 week", "7 day", "1 week",
"1 month",  "3 month", "1 year"),
              dRange=NULL,
              epochInPeriodStr=switch(aggregate.by, "1 day"="1",
"1 week"="%u", "1 month"="%d","3 month"="%q","1 year"="%j"),
              startYearFormat=switch(aggregate.by,"1 day"="%Y",
"7 day"="%G", "1 week"="%G","1 month"="%Y","3 month"="%Y","1 year"="%Y"),
              startEpochFormat=switch(aggregate.by,"1 day"="%j",
"7 day"="%V", "1 week"="%V", "1 month"="%m", "3 month"="%Q", "1 year"="1")
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr style="vertical-align: top;">
<td><code>linelist</code></td>
<td>

<p>A <code>data.frame</code> containing the line list of cases.
</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>dateCol</code></td>
<td>
<p>A character string stating the column name in
<code>linelist</code> which contains the event occurrence information (as a
vector of <code>Date</code>s) which are to be temporally aggregated.
</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>aggregate.by</code></td>
<td>
<p>Temporal aggregation level given as a string, see
the <code>by</code> variable of the <code>seq.Date</code> function for
further details.  
</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>dRange</code></td>
<td>
<p>A vector containing the minimum and maximum date
for doing the aggregation. If not specified these dates are
extracted automatically by taking <code>range(D[,dateCol])</code> and
adjust these according to <code>aggregate.by</code> (e.g. always first of
a month).
</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>epochInPeriodStr</code></td>
<td>
<p><code>strptime</code> compatible format string to use for
determining how a date is placed within the epoch. This is, e.g.,
used to move the <code>dRange</code> epochs to the beginning of the
period. Example: In case of weekly aggregation the "%u" determines
which day within the week (Monday is day 1) we have. See
<code>strptime</code> for further details.
</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>startYearFormat</code></td>
<td>
<p><code>strptime</code> compatible format string to use for
determining how the <code>start</code> entry of the <code>sts</code> object is
generated. Usually the provided defaults are sufficient.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>startEpochFormat</code></td>
<td>
<p><code>strptime</code> compatible format string to use for
determining how the <code>start</code> entry of the <code>sts</code> object is
generated. Usually the provided defaults are sufficient.</p>
</td>
</tr>
</table>
<h3>Details</h3>

<p>The date range is automatically extended such that the starting and
ending dates are always the first epoch within the period, i.e. for
aggregation by week it is moved to Mondays. This is controlled by the
<code>epochInPeriodStr</code> parameter.
</p>
<p>Please note that the formatting strings are implemented by the
<code>formatDate</code> function, which uses <code>strptime</code>
formatting strings as well as
formatting of quarters via "%Q", "%OQ" and "%q".
</p>


<h3>Value</h3>

<p>The function returns an object of class <code>"sts"</code>.
The <code>freq</code> slot might not be appropriate.
</p>


<h3>Author(s)</h3>

<p>Michael HÃ¶hle
</p>


<h3>See Also</h3>

<p><code>seq.Date</code>, <code>strptime</code>, <code>formatDate</code>
</p>


<h3>Examples</h3>

<pre><code class="language-R">#Load O104 outbreak data
data("husO104Hosp")

#Convert line list to an sts object
sts &lt;- linelist2sts(husO104Hosp, dateCol="dHosp", aggregate.by="1 day")

#Check that the number of cases is correct
all.equal(sum(observed(sts)),nrow(husO104Hosp))

#Plot the result
plot(sts,xaxis.tickFreq=list("%d"=atChange,"%m"=atChange),
           xaxis.labelFreq=list("%d"=at2ndChange),
           xaxis.labelFormat="%d %b",
           xlab="",las=2,cex.axis=0.8)
</code></pre>


</div>