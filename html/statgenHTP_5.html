<div class="container">

<table style="width: 100%;"><tr>
<td>createTimePoints</td>
<td style="text-align: right;">R Documentation</td>
</tr></table>
<h2>Create an object of class TP</h2>

<h3>Description</h3>

<p>Convert a data.frame to an object of class TP (Time Points).
The function converts a data.frame to an object of class TP in the following
steps:
</p>

<ul>
<li>
<p>Quality control on the input data. For example, warnings will be given
when more than 50% of observations are missing for a plant.
</p>
</li>
<li>
<p>Rename columns to default column names used by the functions in the
statgenHTP package. For example, the column in the data containing
variety/accession/genotype is renamed to “genotype.” Original column names
are stored as an attribute of the individual data.frames in the TP object.
</p>
</li>
<li>
<p>Convert column types to the default column types. For example, the
column “genotype” is converted to a factor and “rowNum” to a numeric column.
</p>
</li>
<li>
<p>Convert the column containing time into time format. If needed, the
time format can be provided in <code>timeFormat</code>. For example, with a
date/time input of the form “day/month/year hour:minute”, use
"%d/%m/%Y %H:%M". For a full list of abbreviations see the R package
strptime. When the input time is a numeric value, the function will
convert it to time from 01-01-1970.
</p>
</li>
<li>
<p>If <code>addCheck = TRUE</code>, the genotypes listed in
<code>checkGenotypes</code> are reference genotypes (or check). It will add a
column check with a value "noCheck" for the genotypes that are not in
<code>checkGenotypes</code> and the name of the genotypes for the
<code>checkGenotypes</code>. A column genoCheck is also added with the names of
the genotypes that are not in <code>checkGenotypes</code> and <code>NA</code> for the
<code>checkGenotypes</code>. These columns are necessary for fitting models on
data that includes check genotypes, e.g. reference genotypes that are
highly replicated or in case of augmented design.
</p>
</li>
<li>
<p>Split the data into separate data.frames by time point. A TP object is
a list of data.frames where each data.frame contains the data for a single
time point. If there is only one time point the output will be a list with
only one item.
</p>
</li>
<li>
<p>Add a data.frame with columns timeNumber and timePoint as attribute
“timePoints” to the TP object. This data.frame can be used for referencing
time points by a unique number.
</p>
</li>
</ul>
<p>Note that <code>plotId</code> needs to be a unique identifier for a plot or a
plant. It cannot occur more than once per time point.
</p>


<h3>Usage</h3>

<pre><code class="language-R">createTimePoints(
  dat,
  experimentName,
  genotype,
  timePoint,
  timeFormat = NULL,
  plotId,
  repId = NULL,
  rowNum = NULL,
  colNum = NULL,
  addCheck = FALSE,
  checkGenotypes = NULL
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr style="vertical-align: top;">
<td><code>dat</code></td>
<td>
<p>A data.frame.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>experimentName</code></td>
<td>
<p>A character string, the name of the experiment. Stored
with the data and used in default plot titles.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>genotype</code></td>
<td>
<p>A character string indicating the column in dat containing
the genotypes.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>timePoint</code></td>
<td>
<p>A character string indicating the column in dat containing
the time points.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>timeFormat</code></td>
<td>
<p>A character string indicating the input format of the time
points. E.g. for a date/time input of the form day/month/year hour:minute,
use "%d/%m/%Y %H:%M". For a full list of abbreviations see
<code>strptime</code>. If <code>NULL</code>, a best guess is done based on
the input.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>plotId</code></td>
<td>
<p>A character string indicating the column in dat containing
the plotId. This has to be a unique identifier per plot/plant per time point.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>repId</code></td>
<td>
<p>A character string indicating the column in dat containing
the replicates.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>rowNum</code></td>
<td>
<p>A character string indicating the column in dat containing
the row number of the plot.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>colNum</code></td>
<td>
<p>A character string indicating the column in dat containing
the column number of the plot.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>addCheck</code></td>
<td>
<p>Should a column check be added to the output? If <code>TRUE</code>,
checkGenotypes cannot be <code>NULL</code>.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>checkGenotypes</code></td>
<td>
<p>A character vector containing the genotypes used as
checks in the experiment.</p>
</td>
</tr>
</table>
<h3>Value</h3>

<p>An object of class <code>TP</code>. A list with, per time point in the
input, a data.frame containing the data for that time point. A data.frame
with columns timeNumber and timePoint is added as attribute timePoints to
the data. This data.frame can be used for referencing timePoints by their
number.
</p>


<h3>See Also</h3>

<p>Other functions for data preparation: 
<code>as.data.frame.TP()</code>,
<code>getTimePoints()</code>,
<code>plot.TP()</code>,
<code>removeTimePoints()</code>,
<code>summary.TP()</code>
</p>


<h3>Examples</h3>

<pre><code class="language-R">## Create a TP object containing the data from the Phenovator.
phenoTP &lt;- createTimePoints(dat = PhenovatorDat1,
                            experimentName = "Phenovator",
                            genotype = "Genotype",
                            timePoint = "timepoints",
                            repId = "Replicate",
                            plotId = "pos",
                            rowNum = "y", colNum = "x",
                            addCheck = TRUE,
                            checkGenotypes = c("check1", "check2",
                                               "check3","check4"))
summary(phenoTP)

</code></pre>


</div>