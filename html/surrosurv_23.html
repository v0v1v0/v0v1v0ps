<div class="container">

<table style="width: 100%;"><tr>
<td>simData</td>
<td style="text-align: right;">R Documentation</td>
</tr></table>
<h2>
Generate survival times for two endpoints in a meta-analysis of randomized trials
</h2>

<h3>Description</h3>

<p>Data are generated from a mixed proportional hazard model,
a Clayton copula model (Burzykowski and Cortinas Abrahantes, 2005),
a Gumbel-Hougaard copula model,
or a mixture of half-normal and exponential random variables
(Shi et al., 2011).
</p>


<h3>Usage</h3>

<pre><code class="language-R">simData.re(R2 = 0.6, N = 30, ni = 200,
           nifix = TRUE, gammaWei = c(1, 1), censorT, censorA, 
           kTau= 0.6, baseCorr = 0.5, baseVars = c(0.2, 0.2),
           alpha = 0, beta = 0,
           alphaVar = 0.1, betaVar = 0.1,
           mstS = 4 * 365.25, mstT = 8 * 365.25)
           
simData.cc(R2 = 0.6, N = 30, ni = 200,
           nifix = TRUE, gammaWei = c(1, 1), censorT, censorA,
           kTau= 0.6, baseCorr = 0.5, baseVars = c(0.2, 0.2),
           alpha = 0, beta = 0,
           alphaVar = 0.1, betaVar = 0.1,
           mstS = 4 * 365.25, mstT = 8 * 365.25)
           
simData.gh(R2 = 0.6, N = 30, ni = 200,
           nifix = TRUE, gammaWei = c(1, 1), censorT, censorA,
           kTau= 0.6, baseCorr = 0.5, baseVars = c(0.2, 0.2),
           alpha = 0, beta = 0,
           alphaVar = 0.1, betaVar = 0.1,
           mstS = 4 * 365.25, mstT = 8 * 365.25)
           
simData.mx(R2 = 0.6, N = 30, ni = 200,
           nifix = TRUE, gammaWei = c(1, 1), censorT, censorA,
           indCorr = TRUE, baseCorr = 0.5, baseVars = c(0.2, 0.2),
           alpha = 0, beta = 0,
           alphaVar = 0.1, betaVar = 0.1,
           mstS = 4 * 365.25, mstT = 8 * 365.25)
</code></pre>


<h3>Arguments</h3>

<table>
<tr style="vertical-align: top;">
<td><code>R2</code></td>
<td>

<p>The desired trial-level surrogacy <code class="reqn">R^2</code>
</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>N</code></td>
<td>

<p>The number of trials
</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>ni</code></td>
<td>

<p>The (fixed or average) number of patients per trial
</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>nifix</code></td>
<td>

<p>Should all trials have the same size (if <code>nifix = TRUE</code>)
of should the <code>N * ni</code> patients be randomly assigned to trials
with random probabilities (if <code>nifix = FALSE</code>)?
</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>gammaWei</code></td>
<td>

<p>The shape parameter(s) of the Weibull distributions.
Either one or two values. If one value is provided, it is used for both endpoints
</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>censorT</code></td>
<td>

<p>censoring rate for the true endpoint T
(before adding administrative censoring)
</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>censorA</code></td>
<td>

<p>administrative censoring at time censorA
</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>kTau</code></td>
<td>

<p>The desired individual-level dependence between S and T (Kendall's tau)
</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>indCorr</code></td>
<td>

<p>Should S and T be correlated or not? (for <code>.mx</code> method)
</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>baseCorr</code></td>
<td>

<p>correlation between baseline hazards (<code class="reqn">\rho_{basehaz}</code>)
</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>baseVars</code></td>
<td>

<p>variances of baseline random effects (S and T)
</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>alpha</code></td>
<td>

<p>average treatment effect on S
</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>beta</code></td>
<td>

<p>average treatment effect on T
</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>alphaVar</code></td>
<td>

<p>variance of <code class="reqn">a_i</code> (<code class="reqn">\theta_a^2</code>)
</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>betaVar</code></td>
<td>

<p>variance of <code class="reqn">b_i</code> (<code class="reqn">\theta_b^2</code>)
</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>mstS</code></td>
<td>

<p>median survival time for S in the control arm
</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>mstT</code></td>
<td>

<p>median survival time for T in the control arm
</p>
</td>
</tr>
</table>
<h3>Details</h3>

<p>The function <code>simData.re</code> generates data from a proportional hazard model
with random effects at individual level and 
random effects and random treatment effects at trial level.
Individual dependence can be tuned in terms of Kendall's <code class="reqn">tau</code>
(<code>kTau</code>).
</p>
<p>The function <code>simData.cc</code> generates data from a Copula function
as shown by Burzykowski and Cortinas Abrahantes (2005).
Individual dependence can be tuned in terms of Kendall's <code class="reqn">tau</code>
(<code>kTau</code>).
</p>
<p>The function <code>simData.mx</code> implements the simulation method by Shi et al. (2011).
This model is based on a mixture of half-normal and exponential random variables.
Under this model, individual dependence can be induced by using the same
half-normal random variable for S and T.
This is obtained by setting <code>indCorr = TRUE</code>,
but the amount of correlation is not dependent on a single parameter.
</p>


<h3>Value</h3>

<p>A data.frame with columns
</p>
<table>
<tr style="vertical-align: top;">
<td><code>trialref</code></td>
<td>
<p>the trial reference</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>trt</code></td>
<td>
<p>the treatment arm (-0.5 or 0.5)</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>id</code></td>
<td>
<p>the patient id</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>timeT</code></td>
<td>
<p>the value of the true endpoint T</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>statusT</code></td>
<td>
<p>the censoring/event (0/1) indicator of the true endpoint T</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>timeS</code></td>
<td>
<p>the value of the surrogate endpoint S</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>statusS</code></td>
<td>
<p>the censoring/event (0/1) indicator of the surrogate endpoint S</p>
</td>
</tr>
</table>
<h3>Author(s)</h3>

<p>NA
</p>


<h3>References</h3>

<p>Burzykowski T, Cortinas Abrahantes J (2005). Validation in the case of two failure-time endpoints.
In <em>The Evaluation of Surrogate Endpoints</em> (pp. 163-194). Springer, New York.
</p>
<p>Rotolo F, Paoletti X, Burzykowski T, Buyse M, Michiels S.
A Poisson approach for the validation of failure time surrogate endpoints
in individual patient data meta-analyses.
<em>Statistical Methods in Medical Research</em> 2017;
<b>In Press</b>.
doi: <a href="https://doi.org/10.1177/0962280217718582">10.1177/0962280217718582</a>
</p>
<p>Shi Q, Renfro LA, Bot BM, Burzykowski T, Buyse M, Sargent DJ.
Comparative assessment of trial-level surrogacy measures for candidate
time-to-event surrogate endpoints in clinical trials. 
<em>Computational Statistics &amp; Data Analysis</em> 2011; 
<b>55</b>: 2748â€“2757.
</p>


<h3>Examples</h3>

<pre><code class="language-R">  set.seed(1)
  simData.re(N = 2, ni = 5)
  simData.cc(N = 2, ni = 5)
  simData.mx(N = 2, ni = 5)
</code></pre>


</div>