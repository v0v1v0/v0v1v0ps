<div class="container">

<table style="width: 100%;"><tr>
<td>mergingCycle</td>
<td style="text-align: right;">R Documentation</td>
</tr></table>
<h2>Merging Cycle</h2>

<h3>Description</h3>

<p>Runs the stop and merging cycle until no changes are seen or until the max
number of merges are met.
</p>


<h3>Usage</h3>

<pre><code class="language-R">mergingCycle(
  res,
  max_merges = Inf,
  thetaD = 200,
  small_track_action = "merge",
  ...
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr style="vertical-align: top;">
<td><code>res</code></td>
<td>
<p>Results data.table from <code>stopFinder</code> containing
columns timestamp, longitude, latitude and state</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>max_merges</code></td>
<td>
<p>integer of maximum number of merges to perform</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>thetaD</code></td>
<td>
<p>how many meters away may stops be and still be merged</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>small_track_action</code></td>
<td>
<p>one of "merge" or "exclude" for short tracks</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>...</code></td>
<td>
<p>additional optional arguments passed to moveMerger including
max_locs, max_time and max_dist</p>
</td>
</tr>
</table>
<h3>Value</h3>

<p>Modifies res data.table by reference
</p>


<h3>Examples</h3>

<pre><code class="language-R"># Load data
library(data.table)
data(loc_data_2019); setDT(loc_data_2019)
# Find initial set of stops
stopFinder(loc_data_2019, thetaD = 200, thetaT = 300)
# This selection contains two short tracks to eliminate and two stops to merge
example &lt;- copy(loc_data_2019[state_id %between% c(1, 11)])
events_pre_merge &lt;- returnStateEvents(example)
# Perform the merging
mergingCycle(example, thetaD = 200, small_track_action = "exclude", max_locs = Inf)
events_post_merge &lt;- returnStateEvents(example)
# From 11 states to 8 states
events_pre_merge[, .(state_id, state, meanlat, meanlon, n_locations)]
events_post_merge[, .(state_id, state, meanlat, meanlon, n_locations)]
</code></pre>


</div>