<div class="container">

<table style="width: 100%;"><tr>
<td>create.fused</td>
<td style="text-align: right;">R Documentation</td>
</tr></table>
<h2>Creates a matched (synthetic) dataset</h2>

<h3>Description</h3>

<p>Creates a <em>synthetic</em> data frame after the statistical matching of two data sources at <em>micro</em> level.
</p>


<h3>Usage</h3>

<pre><code class="language-R">create.fused(data.rec, data.don, mtc.ids, 
                z.vars, dup.x=FALSE, match.vars=NULL)  
</code></pre>


<h3>Arguments</h3>

<table>
<tr style="vertical-align: top;">
<td><code>data.rec</code></td>
<td>

<p>A matrix or data frame that plays the role of <em>recipient</em> in the statistical matching application. 
</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>data.don</code></td>
<td>

<p>A matrix or data frame that plays the role of <em>donor</em> in the statistical matching application.
</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>mtc.ids</code></td>
<td>

<p>A matrix with two columns.  Each row must contain the name or the index of the recipient record (row) in <code>data.don</code> and the name or the index of the corresponding donor record (row) in <code>data.don</code>.  Note that this type of matrix is returned by the functions <code>NND.hotdeck</code>, <code>RANDwNND.hotdeck</code>, <code>rankNND.hotdeck</code>, and <code>mixed.mtc</code>.
</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>z.vars</code></td>
<td>

<p>A character vector with the names of the variables available only in <code>data.don</code> that should be “donated” to <code>data.rec</code>.
</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>dup.x</code></td>
<td>

<p>Logical. When <code>TRUE</code> the values of the matching variables in <code>data.don</code> are also “donated” to <code>data.rec</code>.  The names of the matching variables have to be specified with the argument <code>match.vars</code>.  To avoid confusion, the matching variables added to <code>data.rec</code> are renamed by adding the suffix “don”. By default <code>dup.x=FALSE</code>.
</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>match.vars</code></td>
<td>

<p>A character vector with the names of the matching variables.  It has to be specified only when <code>dup.x=TRUE</code>.
</p>
</td>
</tr>
</table>
<h3>Details</h3>

<p>This function allows to create the synthetic (or fused) data set after the application of a statistical matching in a <em>micro</em> framework.  For details see D'Orazio <em>et al.</em> (2006).
</p>


<h3>Value</h3>

<p>The data frame <code>data.rec</code> with the <code>z.vars</code> filled in and, when <code>dup.x=TRUE</code>, with the values of the matching variables <code>match.vars</code> observed on the donor records.
</p>


<h3>Author(s)</h3>

<p>Marcello D'Orazio <a href="mailto:mdo.statmatch@gmail.com">mdo.statmatch@gmail.com</a> 
</p>


<h3>References</h3>

<p>D'Orazio, M., Di Zio, M. and Scanu, M. (2006). <em>Statistical Matching: Theory and Practice.</em> Wiley, Chichester.
</p>


<h3>See Also</h3>

 
<p><code>NND.hotdeck</code>
<code>RANDwNND.hotdeck</code>
<code>rankNND.hotdeck</code>
</p>


<h3>Examples</h3>

<pre><code class="language-R">
lab &lt;- c(1:15, 51:65, 101:115)
iris.rec &lt;- iris[lab, c(1:3,5)]  # recipient data.frame
iris.don &lt;- iris[-lab, c(1:2,4:5)] # donor data.frame

# Now iris.rec and iris.don have the variables
# "Sepal.Length", "Sepal.Width"  and "Species"
# in common.
#  "Petal.Length" is available only in iris.rec
#  "Petal.Width"  is available only in iris.don

# find the closest donors using NND hot deck;
# distances are computed on "Sepal.Length" and "Sepal.Width"

out.NND &lt;- NND.hotdeck(data.rec=iris.rec, data.don=iris.don,
            match.vars=c("Sepal.Length", "Sepal.Width"), 
            don.class="Species")

# create synthetic data.set, without the 
# duplication of the matching variables

fused.0 &lt;- create.fused(data.rec=iris.rec, data.don=iris.don, 
            mtc.ids=out.NND$mtc.ids, z.vars="Petal.Width")

# create synthetic data.set, with the "duplication" 
# of the matching variables

fused.1 &lt;- create.fused(data.rec=iris.rec, data.don=iris.don,
            mtc.ids=out.NND$mtc.ids, z.vars="Petal.Width",
            dup.x=TRUE, match.vars=c("Sepal.Length", "Sepal.Width"))
</code></pre>


</div>