<div class="container">

<table style="width: 100%;"><tr>
<td>as.svrepdesign</td>
<td style="text-align: right;">R Documentation</td>
</tr></table>
<h2>Convert a survey design to use replicate weights</h2>

<h3>Description</h3>

<p>Creates a replicate-weights survey design object from a traditional
strata/cluster survey design object. <code>JK1</code> and <code>JKn</code> are
jackknife methods, <code>BRR</code> is Balanced Repeated Replicates and
<code>Fay</code> is Fay's modification of this, <code>bootstrap</code> is Canty
and Davison's bootstrap, <code>subbootstrap</code> is Rao and Wu's
<code class="reqn">(n-1)</code> bootstrap, and <code>mrbbootstrap</code> is Preston's multistage
rescaled bootstrap.  With a <code>svyimputationList</code> object, the same
replicate weights will be used for each imputation if the sampling
weights are all the same and <code>separate.replicates=FALSE</code>.
</p>


<h3>Usage</h3>

<pre><code class="language-R">as.svrepdesign(design,...)
## Default S3 method:
as.svrepdesign(design, type=c("auto", "JK1", "JKn", "BRR", "bootstrap",
   "subbootstrap","mrbbootstrap","Fay"),
   fay.rho = 0, fpc=NULL,fpctype=NULL,..., compress=TRUE, 
   mse=getOption("survey.replicates.mse"))
## S3 method for class 'svyimputationList'
as.svrepdesign(design, type=c("auto", "JK1", "JKn", "BRR", "bootstrap",
   "subbootstrap","mrbbootstrap","Fay"),
   fay.rho = 0, fpc=NULL,fpctype=NULL, separate.replicates=FALSE, ..., compress=TRUE, 
   mse=getOption("survey.replicates.mse"))
</code></pre>


<h3>Arguments</h3>

<table>
<tr style="vertical-align: top;">
<td><code>design</code></td>
<td>
<p>Object of class <code>survey.design</code> or
<code>svyimputationList</code>. Must not have been
post-stratified/raked/calibrated in R</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>type</code></td>
<td>
<p>Type of replicate weights. <code>"auto"</code> uses JKn for
stratified, JK1 for unstratified designs</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>fay.rho</code></td>
<td>
<p>Tuning parameter for Fay's variance method </p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>fpc,fpctype,...</code></td>
<td>
<p>Passed to <code>jk1weights</code>, <code>jknweights</code>,
<code>brrweights</code>, <code>bootweights</code>, <code>subbootweights</code>, or
<code>mrbweights</code>.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>separate.replicates</code></td>
<td>
<p>Compute replicate weights separately for
each design (useful for the bootstrap types, which are not deterministic</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>compress</code></td>
<td>
<p>Use a compressed representation of the replicate
weights matrix.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>mse</code></td>
<td>
<p>if <code>TRUE</code>, compute variances from sums of squares around
the point estimate, rather than the mean of the replicates</p>
</td>
</tr>
</table>
<h3>Value</h3>

<p>Object of class <code>svyrep.design</code>.
</p>


<h3>References</h3>

<p>Canty AJ, Davison AC. (1999) Resampling-based variance
estimation for labour force surveys. The Statistician 48:379-391
</p>
<p>Judkins, D. (1990), "Fay's Method for Variance Estimation," Journal of Official Statistics, 6, 223-239.
</p>
<p>Preston J. (2009) Rescaled bootstrap for stratified multistage sampling. Survey Methodology 35(2) 227-234
</p>
<p>Rao JNK, Wu CFJ. Bootstrap inference for sample surveys. Proc Section
on Survey Research Methodology. 1993 (866â€“871)
</p>


<h3>See Also</h3>

<p><code>brrweights</code>, <code>svydesign</code>,
<code>svrepdesign</code>, <code>bootweights</code>, <code>subbootweights</code>, <code>mrbweights</code>
</p>


<h3>Examples</h3>

<pre><code class="language-R">data(scd)
scddes&lt;-svydesign(data=scd, prob=~1, id=~ambulance, strata=~ESA,
nest=TRUE, fpc=rep(5,6))
scdnofpc&lt;-svydesign(data=scd, prob=~1, id=~ambulance, strata=~ESA,
nest=TRUE)

# convert to BRR replicate weights
scd2brr &lt;- as.svrepdesign(scdnofpc, type="BRR")
scd2fay &lt;- as.svrepdesign(scdnofpc, type="Fay",fay.rho=0.3)
# convert to JKn weights 
scd2jkn &lt;- as.svrepdesign(scdnofpc, type="JKn")

# convert to JKn weights with finite population correction
scd2jknf &lt;- as.svrepdesign(scddes, type="JKn")

## with user-supplied hadamard matrix
scd2brr1 &lt;- as.svrepdesign(scdnofpc, type="BRR", hadamard.matrix=paley(11))

svyratio(~alive, ~arrests, design=scd2brr)
svyratio(~alive, ~arrests, design=scd2brr1)
svyratio(~alive, ~arrests, design=scd2fay)
svyratio(~alive, ~arrests, design=scd2jkn)
svyratio(~alive, ~arrests, design=scd2jknf)

data(api)
## one-stage cluster sample
dclus1&lt;-svydesign(id=~dnum, weights=~pw, data=apiclus1, fpc=~fpc)
## convert to JK1 jackknife
rclus1&lt;-as.svrepdesign(dclus1)
## convert to bootstrap
bclus1&lt;-as.svrepdesign(dclus1,type="bootstrap", replicates=100)

svymean(~api00, dclus1)
svytotal(~enroll, dclus1)

svymean(~api00, rclus1)
svytotal(~enroll, rclus1)

svymean(~api00, bclus1)
svytotal(~enroll, bclus1)

dclus2&lt;-svydesign(id = ~dnum + snum, fpc = ~fpc1 + fpc2, data = apiclus2)
mrbclus2&lt;-as.svrepdesign(dclus2, type="mrb",replicates=100)
svytotal(~api00+stype, dclus2)
svytotal(~api00+stype, mrbclus2)
</code></pre>


</div>