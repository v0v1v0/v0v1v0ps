<div class="container">

<table style="width: 100%;"><tr>
<td>spatial.select</td>
<td style="text-align: right;">R Documentation</td>
</tr></table>
<h2>Spatial Select</h2>

<h3>Description</h3>

<p>Performs a spatial select (feature subset) between a polygon(s) and other
feature class
</p>


<h3>Usage</h3>

<pre><code class="language-R">spatial.select(
  x,
  y = NULL,
  distance = NULL,
  predicate = c("intersection", "intersect", "contains", "covers", "touches",
    "proximity", "contingency"),
  neighbors = c("queen", "rook")
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr style="vertical-align: top;">
<td><code>x</code></td>
<td>
<p>An sp or sf polygon(s) object that defines the spatial query</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>y</code></td>
<td>
<p>A sp or sf feature class that will be subset by the query of x</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>distance</code></td>
<td>
<p>A proximity distance of features to select (within distance)</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>predicate</code></td>
<td>
<p>Spatial predicate for intersection</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>neighbors</code></td>
<td>
<p>If predicate = "contingency" type of neighbors options are
c("queen", "rook")</p>
</td>
</tr>
</table>
<h3>Details</h3>

<p>Performs a spatial select of features based on an overlay of a polygon (x),
which can represent multiple features, and a polygon, point or line feature
classes (y). User can specify a partial or complete intersection, using within
argument, or within a distance, using distance argument, predicated on the
query polygon. This function is similar to ArcGIS/Pro spatial select. Please note
that for point to point neighbor selections use the knn function.
Valid spatial predicates include: intersect, touches, covers, contains, proximity
and contingency.
See DE-9IM topology model for detailed information on following data predicates.
</p>

<ul>
<li>
<p> intersection  Create a spatial intersection between two features
</p>
</li>
<li>
<p> intersect     Boolean evaluation of features intersecting
</p>
</li>
<li>
<p> contains      Boolean evaluation of x containing y
</p>
</li>
<li>
<p> covers        Boolean evaluation of x covering y
</p>
</li>
<li>
<p> touches       Boolean evaluation of x touching y
</p>
</li>
<li>
<p> proximity     Evaluation of distance-based proximity of x to y (x and y can be the same)
</p>
</li>
<li>
<p> contingency   Evaluation of polygon contingency (eg., 1st, 2nd order)
</p>
</li>
</ul>
<h3>Value</h3>

<p>An sf object representing a subset of y based on the spatial query of x or,
if predicate = contingency a sparse matrix representing neighbor indexes
</p>


<h3>Author(s)</h3>

<p>Jeffrey S. Evans  <a href="mailto:jeffrey_evans@tnc.org">jeffrey_evans@tnc.org</a>
</p>


<h3>See Also</h3>

<p><code>st_intersection</code> for details on intersection predicate
</p>
<p><code>st_intersects</code> for details on intersect predicate
</p>
<p><code>st_contains</code> for details on contain predicate
</p>
<p><code>st_covers</code> for details on covers predicate
</p>
<p><code>st_touches</code> for details on touches predicate
</p>
<p><code>st_is_within_distance</code> for details on proximity predicate
</p>
<p><a href="https://en.wikipedia.org/wiki/DE-9IM">https://en.wikipedia.org/wiki/DE-9IM</a> for details on DE-9IM topology model
</p>


<h3>Examples</h3>

<pre><code class="language-R">if(require(sp, quietly = TRUE)) {
library(sf)
  data(meuse, package = "sp")
  meuse &lt;- st_as_sf(meuse, coords = c("x", "y"), crs = 28992, 
                    agr = "constant")

spolys &lt;- hexagons(meuse, res=100)
  spolys$ID &lt;- 1:nrow(spolys)
    p &lt;- st_as_sf(st_sample(spolys, 500))
	  p$PTID &lt;- 1:nrow(p) 
	  sf::st_geometry(p) &lt;- "geometry"

  plot(st_geometry(spolys), main="all data")
    plot(st_geometry(p), pch=20, add=TRUE)
	
sub.int &lt;- spatial.select(p, spolys, predicate = "intersect")
  plot(st_geometry(sub.int), main="intersects")
    plot(st_geometry(p), pch=20, add=TRUE)	

sub.prox &lt;- spatial.select(p, spolys, distance=100, predicate = "proximity")	
  plot(st_geometry(sub.int), main="intersects")
    plot(st_geometry(p), pch=20, add=TRUE)

# For rook or queen polygon contingency 	
plot( spolys &lt;- sf::st_make_grid(sf::st_sfc(sf::st_point(c(0,0)), 
                 sf::st_point(c(3,3))), n = c(3,3)) )
  
spatial.select(x=spolys, predicate = "contingency")
spatial.select(spolys, predicate = "contingency", neighbors = "rook") 

} else { 
  cat("Please install sp package to run example", "\n")
}

</code></pre>


</div>