<div class="container">

<table style="width: 100%;"><tr>
<td>quark</td>
<td style="text-align: right;">R Documentation</td>
</tr></table>
<h2>Quark</h2>

<h3>Description</h3>

<p>The <code>quark</code> function provides researchers with the ability to calculate
and include component scores calculated by taking into account the variance
in the original dataset and all of the interaction and polynomial effects of
the data in the dataset.
</p>


<h3>Usage</h3>

<pre><code class="language-R">quark(data, id, order = 1, silent = FALSE, ...)
</code></pre>


<h3>Arguments</h3>

<table>
<tr style="vertical-align: top;">
<td><code>data</code></td>
<td>
<p>The data frame is a required component for <code>quark</code>.  In
order for <code>quark</code> to process a data frame, it must not contain any
factors or text-based variables.  All variables must be in numeric format.
Identifiers and dates can be left in the data; however, they will need to be
identified under the <code>id</code> argument.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>id</code></td>
<td>
<p>Identifiers and dates within the dataset will need to be
acknowledged as <code>quark</code> cannot process these.  By acknowledging the
identifiers and dates as a vector of column numbers or variable names,
<code>quark</code> will remove them from the data temporarily to complete its main
processes.  Among many potential issues of not acknowledging identifiers and
dates are issues involved with imputation, product and polynomial effects,
and principal component analysis.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>order</code></td>
<td>
<p>Order is an optional argument provided by quark that can be
used when the imputation procedures in mice fail.  Under some circumstances,
mice cannot calculate missing values due to issues with extreme missingness.
Should an error present itself stating a failure due to not having any
columns selected, set the argument <code>order = 2</code> in order to reorder the
imputation method procedure.  Otherwise, use the default <code>order = 1</code>.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>silent</code></td>
<td>
<p>If <code>FALSE</code>, the details of the <code>quark</code> process are
printed.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>...</code></td>
<td>
<p>additional arguments to pass to <code>mice</code>.</p>
</td>
</tr>
</table>
<h3>Details</h3>

<p>The <code>quark</code> function calculates these component scores by first filling
in the data via means of multiple imputation methods and then expanding the
dataset by aggregating the non-overlapping interaction effects between
variables by calculating the mean of the interactions and polynomial
effects.  The multiple imputation methods include one of iterative sampling
and group mean substitution and multiple imputation using a polytomous
regression algorithm (mice). During the expansion process, the dataset is
expanded to three times its normal size (in width). The first third of the
dataset contains all of the original data post imputation, the second third
contains the means of the polynomial effects (squares and cubes), and the
final third contains the means of the non-overlapping interaction effects. A
full principal componenent analysis is conducted and the individual
components are retained. The subsequent <code>combinequark</code> function
provides researchers the control in determining how many components to
extract and retain. The function returns the dataset as submitted (with
missing values) and the component scores as requested for a more accurate
multiple imputation in subsequent steps.
</p>


<h3>Value</h3>

<p>The output value from using the quark function is a list. It will
return a list with 7 components.
</p>
<table>
<tr style="vertical-align: top;">
<td><code>ID Columns</code></td>
<td>
<p>Is a vector of the identifier columns entered when
running quark.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>ID Variables</code></td>
<td>
<p>Is a subset of the dataset that contains the identifiers
as acknowledged when running quark.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>Used Data</code></td>
<td>
<p>Is a matrix / dataframe of the data provided by user as
the basis for quark to process.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>Imputed Data</code></td>
<td>
<p>Is a matrix / dataframe of the data after the multiple
method imputation process.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>Big Matrix</code></td>
<td>
<p>Is the expanded product and polynomial matrix.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>Principal Components</code></td>
<td>
<p>Is the entire dataframe of principal components
for the dataset.  This dataset will have the same number of rows of the big
matrix, but will have 1 less column (as is the case with principal
component analyses).</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>Percent Variance Explained</code></td>
<td>
<p>Is a vector of the percent variance
explained with each column of principal components.</p>
</td>
</tr>
</table>
<h3>Author(s)</h3>

<p>Steven R. Chesnut (University of Southern Mississippi;
<a href="mailto:Steven.Chesnut@usm.edu">Steven.Chesnut@usm.edu</a>)
</p>
<p>Danny Squire (Texas Tech University)
</p>
<p>Terrence D. Jorgensen (University of Amsterdam)
</p>
<p>The PCA code is copied and modified from the <code>FactoMineR</code> package.
</p>


<h3>References</h3>

<p>Howard, W. J., Rhemtulla, M., &amp; Little, T. D. (2015). Using
Principal Components as Auxiliary Variables in Missing Data Estimation.
<em>Multivariate Behavioral Research, 50</em>(3), 285â€“299.
<a href="https://doi.org/10.1080/00273171.2014.999267">doi:10.1080/00273171.2014.999267</a>
</p>


<h3>See Also</h3>

<p><code>combinequark</code>
</p>


<h3>Examples</h3>

<pre><code class="language-R">
set.seed(123321)

dat &lt;- HolzingerSwineford1939[,7:15]
misspat &lt;- matrix(runif(nrow(dat) * 9) &lt; 0.3, nrow(dat))
dat[misspat] &lt;- NA
dat &lt;- cbind(HolzingerSwineford1939[,1:3], dat)
## Not run: 
quark.list &lt;- quark(data = dat, id = c(1, 2))

final.data &lt;- combinequark(quark = quark.list, percent = 80)

## Example to rerun quark after imputation failure:
quark.list &lt;- quark(data = dat, id = c(1, 2), order = 2)

## End(Not run)

</code></pre>


</div>