<div class="container">

<table style="width: 100%;"><tr>
<td>string_magic_alias</td>
<td style="text-align: right;">R Documentation</td>
</tr></table>
<h2>Create <code>string_magic</code> aliases with custom defaults</h2>

<h3>Description</h3>

<p>Utility to easily create <code>string_magic</code> aliases with custom default
</p>


<h3>Usage</h3>

<pre><code class="language-R">string_magic_alias(
  .sep = "",
  .vectorize = FALSE,
  .delim = c("{", "}"),
  .last = NULL,
  .post = NULL,
  .default = NULL,
  .nest = FALSE,
  .invisible = FALSE,
  .local_ops = NULL,
  .collapse = NULL,
  .check = TRUE,
  .class = NULL,
  .namespace = NULL
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr style="vertical-align: top;">
<td><code>.sep</code></td>
<td>
<p>Character scalar, default is the empty string <code>""</code>. It is used to collapse all
the elements in <code>...</code> before applying any operation.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>.vectorize</code></td>
<td>
<p>Logical scalar, default is <code>FALSE</code>. If <code>TRUE</code>, Further, elements in <code>...</code> are
NOT collapsed together, but instead vectorised.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>.delim</code></td>
<td>
<p>Character vector of length 1 or 2. Default is <code>c("{", "}")</code>. Defines
the opening and the closing delimiters for interpolation.
</p>
<p>If of length 1, it must be of the form: 1) the opening delimiter,
2) a single space, 3) the closing delimiter. Ex: <code>".[ ]"</code> is equivalent to <code>c(".[", "]")</code>.
The default value is equivalent to <code>"{ }"</code>.
</p>
<p>[ ]: R:%20
[", "]: R:%22,%20%22</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>.last</code></td>
<td>
<p>Character scalar, a function, or <code>NULL</code> (default). If provided and character:
it must be an <code>string_magic</code> chain of operations of the form <code>"'arg1'op1, op2, etc"</code>. All these operations
are applied just before returning the vector. If a function,
it will be applied to the resulting vector.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>.post</code></td>
<td>
<p>Function or <code>NULL</code> (default). If not <code>NULL</code>, this function will be applied
after all the processing, just before returning the object. This function can have
extra arguments which will be caught directly in the <code>...</code> argument of <code>string_magic</code>.
For example if <code>.post = head</code>, you can directly pass the argument <code>n = 3</code> to <code>string_magic</code>'s arguments.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>.default</code></td>
<td>
<p>Character scalar or <code>NULL</code> (default). If provided, it must be
a sequence of <code>string_magic</code> operations. It will be applied as a default to any interpolation.
Ex: if <code>x = 1:2</code>, then <code>string_magic("x = {x}", .default = "enum")</code> leads to "x = 1 and 2",
and is equivalent to <code>string_magic("x = {enum?x}")</code>. Note that this default operations does
not apply to nested expressions. That is <code>string_magic("{!x{1:2}}", .default = "enum")</code> leads
to <code>c("x1", "x2")</code> and NOT <code>"x1 and 2"</code>.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>.nest</code></td>
<td>
<p>Logical, default is <code>FALSE</code>. If <code>TRUE</code>, it will nest the original string within
interpolation delimiters, so that you can apply operations directly on the string. Example:
<code>string_magic("upper ! hello")</code> returns "upper ! hello", while <code>string_magic("upper ! hello", .nest = TRUE)</code>
returns <code>"HELLO"</code>.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>.invisible</code></td>
<td>
<p>Logical scalar, default is <code>FALSE</code>. Whether the object returned should be
invisible (i.e. not printed on the console).</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>.local_ops</code></td>
<td>
<p>Named list or <code>NULL</code> (default). If provided, it must be a list
of the form <code>list(alias1 = ops1, alias2 = ops2)</code> where alias is the name of the newly defined
operator an <code>ops</code> is a character scalar representing the associated string_magic operations.
Ex: <code>list(add = "' + 'collapse")</code> creates the operation <code>add</code> which collapses the
string with pluses. All operations created here are only available to the
generated function.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>.collapse</code></td>
<td>
<p>Character scalar, default is <code>NULL</code>. If provided, the character vector
that should be returned is collapsed with the value of this argument. This leads
to return a string of length 1.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>.check</code></td>
<td>
<p>Logical scalar, default is <code>TRUE</code>. Whether to enable error-handling (i.e.
human readable error messages).
Without error-handling you can save something of the order of 40us. Useful only
in long loops.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>.class</code></td>
<td>
<p>Character vector representing the class to give to the object returned.
By default it is <code>NULL</code>. Note that the class <code>string_magic</code> has a specific <code>print</code> method, usually
nicer for small vectors (it <code>base::cat()</code>s the elements).</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>.namespace</code></td>
<td>
<p>Character scalar or <code>NULL</code> (default). <strong>Only useful for package developers.</strong>
As a regular end-user you shouldn't care! If your package uses <code>string_magic</code>, you should care.
It is useful <strong>only</strong> if your package uses 'custom' <code>string_magic</code> operations, set with
<code>string_magic_register_fun()</code> or <code>string_magic_register_ops()</code>.</p>
</td>
</tr>
</table>
<h3>Details</h3>

<p>Use this function if you want to change <code>string_magic</code> default values. For example,
if you want the interpolation to be done with <code>"{{}}"</code> (instead of <code>{}</code>) or if you want the
default separation to be the space (instead of the empty string). See the example.
</p>


<h3>Value</h3>

<p>This function returns a function which will behave in the same way as <code>string_magic()</code>
</p>


<h3>Writing a package using <code>string_magic</code>
</h3>

<p>If you want to use <code>string_magic</code> in your package and want to make use of custom operations:
</p>

<ul><li>
<p> place any <code>string_magic_register_fun</code> and <code>string_magic_register_ops</code> in your <code>.onLoad</code> function
(see <code>help("onLoad")</code>). The .onLoad function is run whenever the package is loaded
for the first time. It's a function that you can place anywhere in your <code style="white-space: pre;">⁠R/*⁠</code> files
and which looks like this:
</p>
</li></ul>
<div class="sourceCode r"><pre>.onLoad = function(libname, pkgname){
  # string_magic custom operations
  string_magic_register_ops("'80|-'fill", "h1")

  invisible()
}
</pre></div>

<ul><li>
<p> if you don't want to place the <code style="white-space: pre;">⁠string_magic_register_*⁠</code> functions in the .onLoad function,
you can, but then you <strong>must</strong> provide the argument <code>namespace</code>:
</p>
</li></ul>
<div class="sourceCode r"><pre>string_magic_register_ops("'80|-'fill", "h1", namespace = "myPackageName")
</pre></div>

<ul><li>
<p> you must create an <code>string_magic_alias()</code> to create an alias to <code>string_magic()</code> and use the
argument <code>.namespace = "myPackageName"</code>. Use this opportunity to change the
defaults if you wish. You can even override the <code>string_magic</code> function:
</p>
</li></ul>
<div class="sourceCode r"><pre># creating an alias with the same name + changing the delimiter
string_magic = stringmagic::string_magic_alias(.namespace = "myPackageName", .delim = "{{ }}")
</pre></div>


<h3>Author(s)</h3>

<p>Laurent Berge
</p>


<h3>See Also</h3>

<p>Other related to string_magic: 
<code>string_magic_register_fun()</code>
</p>
<p>Other tools with aliases: 
<code>cat_magic_alias()</code>,
<code>string_clean_alias()</code>,
<code>string_magic()</code>,
<code>string_ops_alias()</code>,
<code>string_vec_alias()</code>
</p>


<h3>Examples</h3>

<pre><code class="language-R">
# we create the function sma2 with different defaults
sma2 = string_magic_alias(.delim = ".[ ]", .sep = " ", .class = "string_magic")

person = "john doe"
sma2("Hello", ".[title ? person]")

# you can use the arguments whose default has been changed
sma2("Hello", ".[title ? person]", .sep = ": ")



</code></pre>


</div>