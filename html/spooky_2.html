<div class="container">

<table style="width: 100%;"><tr>
<td>spooky</td>
<td style="text-align: right;">R Documentation</td>
</tr></table>
<h2>spooky</h2>

<h3>Description</h3>

<p>Automatic jack-knife of spectral analysis for time feature extrapolation
</p>


<h3>Usage</h3>

<pre><code class="language-R">spooky(
  df,
  seq_len = NULL,
  lno = NULL,
  n_samp = 30,
  n_windows = 3,
  ci = 0.8,
  smoother = FALSE,
  dates = NULL,
  error_scale = "naive",
  error_benchmark = "naive",
  seed = 42
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr style="vertical-align: top;">
<td><code>df</code></td>
<td>
<p>A data frame with time features on columns</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>seq_len</code></td>
<td>
<p>Positive integer. Time-step number of the forecasting sequence. Default: NULL (automatic selection between 1 and the square root of full length).</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>lno</code></td>
<td>
<p>Positive integer. Number of data points to leave out for resampling (using jack-knife approach). Default: NULL (automatic selection between 1 and the square root of full length).</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>n_samp</code></td>
<td>
<p>Positive integer. Number of samples for random search. Default: 30.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>n_windows</code></td>
<td>
<p>Positive integer. Number of validation windows to test prediction error. Default: 10.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>ci</code></td>
<td>
<p>Confidence interval for prediction. Default: 0.8</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>smoother</code></td>
<td>
<p>Logical. Flag to TRUE for loess smoothing. Default: FALSE.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>dates</code></td>
<td>
<p>Date. Vector with dates for time features.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>error_scale</code></td>
<td>
<p>String. Scale for the scaled error metrics. Two options: "naive" (average of naive one-step absolute error for the historical series) or "deviation" (standard error of the historical series). Default: "naive".</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>error_benchmark</code></td>
<td>
<p>String. Benchmark for the relative error metrics. Two options: "naive" (sequential extension of last value) or "average" (mean value of true sequence). Default: "naive".</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>seed</code></td>
<td>
<p>Positive integer. Random seed. Default: 42.</p>
</td>
</tr>
</table>
<h3>Value</h3>

<p>This function returns a list including:
</p>

<ul>
<li>
<p> exploration: list of all not-null models, complete with predictions, test metrics, prediction stats and plot
</p>
</li>
<li>
<p> history: a table with the sampled models, hyper-parameters, validation errors
</p>
</li>
<li>
<p> best_model: results for the best selected model according to the weighted average rank, including:
</p>

<ul>
<li>
<p> testing_errors: testing errors for each time feature for the best selected model (for continuous variables: me, mae, mse, rmsse, mpe, mape, rmae, rrmse, rame, mase, smse, sce, gmrae; for factor variables: czekanowski, tanimoto, cosine, hassebrook, jaccard, dice, canberra, gower, lorentzian, clark)
</p>
</li>
<li>
<p> preds: for continuous variables, min, max, q25, q50, q75, quantiles at selected ci, mean, sd, mode, skewness, kurtosis, IQR to range, risk ratio, upside probability and divergence for each point fo predicted sequences; for factor variables, min, max, q25, q50, q75, quantiles at selected ci, proportions, difformity (deviation of proportions normalized over the maximum possible deviation), entropy, upgrade probability and divergence for each point fo predicted sequences
</p>
</li>
<li>
<p> plots: standard plot with confidence interval for each time feature
</p>
</li>
</ul>
</li>
<li>
<p> time_log
</p>
</li>
</ul>
<h3>Author(s)</h3>

<p>Giancarlo Vercellino <a href="mailto:giancarlo.vercellino@gmail.com">giancarlo.vercellino@gmail.com</a>
</p>


<h3>See Also</h3>

<p>Useful links:
</p>

<ul><li> <p><a href="https://rpubs.com/giancarlo_vercellino/spooky">https://rpubs.com/giancarlo_vercellino/spooky</a>
</p>
</li></ul>
<h3>Examples</h3>

<pre><code class="language-R">spooky(time_features, seq_len = c(10, 30), lno = c(1, 30), n_samp = 1)


</code></pre>


</div>