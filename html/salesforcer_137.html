<div class="container">

<table style="width: 100%;"><tr>
<td>sf_control</td>
<td style="text-align: right;">R Documentation</td>
</tr></table>
<h2>Auxiliary for Controlling Calls to Salesforce APIs</h2>

<h3>Description</h3>

<p>Typically only used internally by functions when control parameters are passed
through via dots (...), but it can be called directly to control the behavior
of API calls. This function behaves exactly like <code>glm.control</code>
for the <code>glm</code> function.
</p>


<h3>Usage</h3>

<pre><code class="language-R">sf_control(
  AllOrNoneHeader = list(allOrNone = FALSE),
  AllowFieldTruncationHeader = list(allowFieldTruncation = FALSE),
  AssignmentRuleHeader = list(useDefaultRule = TRUE),
  DisableFeedTrackingHeader = list(disableFeedTracking = FALSE),
  DuplicateRuleHeader = list(allowSave = FALSE, includeRecordDetails = FALSE,
    runAsCurrentUser = TRUE),
  EmailHeader = list(triggerAutoResponseEmail = FALSE, triggerOtherEmail = FALSE,
    triggerUserEmail = TRUE),
  LocaleOptions = list(language = "en_US"),
  MruHeader = list(updateMru = FALSE),
  OwnerChangeOptions = list(options = list(list(execute = TRUE, type =
    "EnforceNewOwnerHasReadAccess"), list(execute = FALSE, type = "KeepAccountTeam"),
    list(execute = FALSE, type = "KeepSalesTeam"), list(execute = FALSE, type =
    "KeepSalesTeamGrantCurrentOwnerReadWriteAccess"), list(execute = FALSE, type =
    "SendEmail"), list(execute = FALSE, type = "TransferAllOwnedCases"), list(execute =
    TRUE, type = "TransferContacts"), list(execute = TRUE, type = "TransferContracts"),
    list(execute = FALSE, type = "TransferNotesAndAttachments"),      list(execute =
    TRUE, type = "TransferOpenActivities"), list(execute = TRUE, type =
    "TransferOrders"), list(execute = FALSE, type = "TransferOtherOpenOpportunities"),
    list(execute = FALSE, type = "TransferOwnedClosedOpportunities"), list(execute =
    FALSE, type = "TransferOwnedOpenCases"), list(execute = FALSE, type =
    "TransferOwnedOpenOpportunities"))),
  QueryOptions = list(batchSize = 500),
  UserTerritoryDeleteHeader = list(transferToUserId = NA),
  BatchRetryHeader = list(`Sforce-Disable-Batch-Retry` = FALSE),
  LineEndingHeader = list(`Sforce-Line-Ending` = NA),
  PKChunkingHeader = list(`Sforce-Enable-PKChunking` = FALSE),
  api_type = NULL,
  operation = NULL
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr style="vertical-align: top;">
<td><code>AllOrNoneHeader</code></td>
<td>
<p><code>list</code>; containing the <code>allOrNone</code> element with
a value of <code>TRUE</code> or <code>FALSE</code>. This control specifies whether a call rolls back all changes
unless all records are processed successfully. This control is available in
SOAP, REST, and Metadata APIs for the following functions: <code>sf_create</code>,
<code>sf_delete</code>, <code>sf_update</code>, <code>sf_upsert</code>, <code>sf_create_metadata</code>,
<code>sf_delete_metadata</code>, <code>sf_update_metadata</code>, <code>sf_upsert_metadata</code>.
For more information, read the Salesforce documentation
<a href="https://developer.salesforce.com/docs/atlas.en-us.api.meta/api/sforce_api_header_allornoneheader.htm">here</a>.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>AllowFieldTruncationHeader</code></td>
<td>
<p><code>list</code>; containing the <code>allowFieldTruncation</code>
element with a value of <code>TRUE</code> or <code>FALSE</code>. This control specifies the truncation behavior
for some field types in SOAP API version 15.0 and later for the following functions:
<code>sf_create</code>, <code>sf_update</code>, <code>sf_upsert</code>. For
more information, read the Salesforce documentation
<a href="https://developer.salesforce.com/docs/atlas.en-us.api.meta/api/sforce_api_header_allowfieldtruncation.htm">here</a>.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>AssignmentRuleHeader</code></td>
<td>
<p><code>list</code>; containing the <code>useDefaultRule</code>
element with a value of <code>TRUE</code> or <code>FALSE</code> or the <code>assignmentRuleId</code> element.
This control specifies the assignment rule to use when creating or updating an
Account, Case, or Lead for the following functions: <code>sf_create</code>,
<code>sf_update</code>, <code>sf_upsert</code>. For more information, read the Salesforce documentation
<a href="https://developer.salesforce.com/docs/atlas.en-us.api.meta/api/sforce_api_header_assignmentruleheader.htm">here</a>.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>DisableFeedTrackingHeader</code></td>
<td>
<p><code>list</code>; containing the <code>disableFeedTracking</code>
element with a value of <code>TRUE</code> or <code>FALSE</code>. This control specifies whether
the changes made in the current call are tracked in feeds for SOAP API calls made
with the following functions: <code>sf_create</code>, <code>sf_delete</code>,
<code>sf_update</code>, <code>sf_upsert</code>. For more information, read the Salesforce documentation
<a href="https://developer.salesforce.com/docs/atlas.en-us.api.meta/api/sforce_api_header_disablefeedtracking.htm">here</a>.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>DuplicateRuleHeader</code></td>
<td>
<p><code>list</code>; containing the <code>allowSave</code>,
<code>includeRecordDetails</code>, and <code>runAsCurrentUser</code> elements each with a
value of <code>TRUE</code> or <code>FALSE</code>. This control specifies how duplicate rules should be applied
when using the following functions: <code>sf_create</code>, <code>sf_update</code>,
<code>sf_upsert</code>. For more information, read the Salesforce documentation
<a href="https://developer.salesforce.com/docs/atlas.en-us.api.meta/api/sforce_api_header_duplicateruleheader.htm">here</a>.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>EmailHeader</code></td>
<td>
<p><code>list</code>; containing the <code>triggerAutoResponseEmail</code>,
<code>triggerOtherEmail</code>, and <code>triggerUserEmail</code> elements each with a
value of <code>TRUE</code> or <code>FALSE</code>. This control determines if an email notification should be sent
when a request is processed by SOAP API calls made with the following functions:
<code>sf_create</code>, <code>sf_delete</code>, <code>sf_update</code>, <code>sf_upsert</code>,
<code>sf_reset_password</code>. For more information, read the Salesforce documentation
<a href="https://developer.salesforce.com/docs/atlas.en-us.api.meta/api/sforce_api_header_emailheader.htm">here</a>.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>LocaleOptions</code></td>
<td>
<p><code>list</code>; containing the <code>language</code> element. This control
specifies the language of the labels returned by the <code>sf_describe_objects</code>
function using the SOAP API. The value must be a valid user locale (language and country), such as
<code>de_DE</code> or <code>en_GB</code>. For more information, read the Salesforce documentation
<a href="https://developer.salesforce.com/docs/atlas.en-us.api.meta/api/sforce_api_header_localeheader.htm">here</a>.
The list of valid user locales is available
<a href="https://developer.salesforce.com/docs/atlas.en-us.api.meta/api/sforce_api_objects_categorynodelocalization.htm#languagelocalekey_desc">here</a>.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>MruHeader</code></td>
<td>
<p><code>list</code>; containing the <code>updateMru</code> element with a value
of <code>TRUE</code> or <code>FALSE</code>. This control indicates whether to update the list
of most recently used items (<code>TRUE</code>) or not (<code>FALSE</code>) in the Recent Items
section of the sidebar in the Salesforce user interface. This works for SOAP API calls
made with the following functions: <code>sf_create</code>, <code>sf_update</code>,
<code>sf_upsert</code>, <code>sf_retrieve</code>, <code>sf_query</code>. For more
information, read the Salesforce documentation
<a href="https://developer.salesforce.com/docs/atlas.en-us.api.meta/api/sforce_api_header_mruheader.htm">here</a>.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>OwnerChangeOptions</code></td>
<td>
<p><code>list</code>; containing the <code>options</code> element.
This control specifies the details of ownership of attachments and notes when a
record’s owner is changed. This works for SOAP API calls made with the following functions:
<code>sf_update</code>, <code>sf_upsert</code>. For more information, read the Salesforce documentation
<a href="https://developer.salesforce.com/docs/atlas.en-us.api.meta/api/sforce_api_header_ownerchangeoptions.htm">here</a>.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>QueryOptions</code></td>
<td>
<p><code>list</code>; containing the <code>batchSize</code> element.
This control specifies the batch size for query results . This works for SOAP or
REST API calls made with the following functions: <code>sf_query</code>,
<code>sf_retrieve</code>. For more information, read the Salesforce documentation
<a href="https://developer.salesforce.com/docs/atlas.en-us.api.meta/api/sforce_api_header_queryoptions.htm">here</a>.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>UserTerritoryDeleteHeader</code></td>
<td>
<p><code>list</code>; containing the <code>transferToUserId</code> element.
This control specifies a user to whom open opportunities are assigned when the current
owner is removed from a territory. This works for the <code>sf_delete</code> function
using the SOAP API. For more information, read the Salesforce documentation
<a href="https://developer.salesforce.com/docs/atlas.en-us.api.meta/api/sforce_api_header_userterritorydeleteheader.htm">here</a>.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>BatchRetryHeader</code></td>
<td>
<p><code>list</code>; containing the <code>Sforce-Disable-Batch-Retry</code> element.
When you create a bulk job, the Batch Retry control lets you disable retries
for unfinished batches included in the job. This works for most operations run through
the Bulk 1.0 API (e.g. <code>sf_create(., api_type = "Bulk 1.0")</code>) or creating
a Bulk 1.0 job with <code>sf_create_job_bulk</code>. For more information, read the Salesforce documentation
<a href="https://developer.salesforce.com/docs/atlas.en-us.api_asynch.meta/api_asynch/async_api_headers_disable_batch_retry.htm">here</a>.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>LineEndingHeader</code></td>
<td>
<p><code>list</code>; containing the <code>Sforce-Line-Ending</code> element.
When you’re creating a bulk upload job, the Line Ending control lets you
specify whether line endings are read as line feeds (LFs) or as carriage returns
and line feeds (CRLFs) for fields of type Text Area and Text Area (Long). This
works for most operations run through the Bulk APIs and/or creating a Bulk
job from scratch with <code>sf_create_job_bulk</code>. However, note that
as of <code>readr v1.3.1</code> all CSV files end with the line feed character
("\n") regardless of the operating system. So it is usually best to not specify
this argument. For more information, read the Salesforce documentation
<a href="https://developer.salesforce.com/docs/atlas.en-us.api_asynch.meta/api_asynch/async_api_headers_line_ending.htm">here</a>.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>PKChunkingHeader</code></td>
<td>
<p><code>list</code>; containing the <code>Sforce-Enable-PKChunking</code> element.
Use the PK Chunking control to enable automatic primary key (PK) chunking
for a bulk query job. This works for queries run through the Bulk 1.0 API either via
<code>sf_query(., api_type = "Bulk 1.0")</code>) or <code>sf_query_bulk</code>. For
more information, read the Salesforce documentation
<a href="https://developer.salesforce.com/docs/atlas.en-us.api_asynch.meta/api_asynch/async_api_headers_enable_pk_chunking.htm">here</a>.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>api_type</code></td>
<td>
<p><code>character</code>; one of <code>"REST"</code>, <code>"SOAP"</code>,
<code>"Bulk 1.0"</code>, or <code>"Bulk 2.0"</code> indicating which API to use when
making the request.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>operation</code></td>
<td>
<p><code>character</code>; a string defining the type of operation being
performed (e.g. "insert", "update", "upsert", "delete", "hardDelete",
"query", "queryall").</p>
</td>
</tr>
</table>
<h3>Examples</h3>

<pre><code class="language-R">## Not run: 
this_control &lt;- sf_control(DuplicateRuleHeader=list(allowSave=TRUE, 
                                                    includeRecordDetails=FALSE, 
                                                    runAsCurrentUser=TRUE))
new_contact &lt;- c(FirstName = "Test", LastName = "Contact-Create")
new_record &lt;- sf_create(new_contact, "Contact", control = this_control)

# specifying the controls directly and are picked up by dots
new_record &lt;- sf_create(new_contact, "Contact", 
                        DuplicateRuleHeader = list(allowSave=TRUE, 
                                                   includeRecordDetails=FALSE, 
                                                   runAsCurrentUser=TRUE))

## End(Not run)
</code></pre>


</div>