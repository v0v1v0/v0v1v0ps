<div class="container">

<table style="width: 100%;"><tr>
<td>tcpPlot</td>
<td style="text-align: right;">R Documentation</td>
</tr></table>
<h2>Discrete-color maps based on the True Classification Probabilities</h2>

<h3>Description</h3>

<p>Discrete-color maps based on the True Classification Probabilities
</p>


<h3>Usage</h3>

<pre><code class="language-R">tcpPlot(
  draws,
  geo,
  by.geo = NULL,
  year_plot = NULL,
  ncol = 4,
  per1000 = FALSE,
  thresholds = NULL,
  intervals = 3,
  size.title = 0.7,
  legend.label = NULL,
  border = "gray20",
  size = 0.5
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr style="vertical-align: top;">
<td><code>draws</code></td>
<td>
<p>a posterior draw object from <code>getSmoothed</code></p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>geo</code></td>
<td>
<p>SpatialPolygonsDataFrame object for the map</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>by.geo</code></td>
<td>
<p>variable name specifying region names in geo</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>year_plot</code></td>
<td>
<p>vector of year string vector to be plotted.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>ncol</code></td>
<td>
<p>number of columns in the output figure.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>per1000</code></td>
<td>
<p>logical indicator to multiply results by 1000.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>thresholds</code></td>
<td>
<p>a vector of thresholds (on the mortality scale) defining the discrete color scale of the maps.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>intervals</code></td>
<td>
<p>number of quantile intervals defining the discrete color scale of the maps. Required when thresholds are not specified.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>size.title</code></td>
<td>
<p>a numerical value giving the amount by which the plot title should be magnified relative to the default.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>legend.label</code></td>
<td>
<p>Label for the color legend.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>border</code></td>
<td>
<p>color of the border</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>size</code></td>
<td>
<p>size of the border</p>
</td>
</tr>
</table>
<h3>Value</h3>

<p>a list of True Classification Probability (TCP) tables, a list of individual spplot maps, and a gridded array of all maps.
</p>


<h3>Author(s)</h3>

<p>Tracy Qi Dong, Zehang Richard Li
</p>


<h3>References</h3>

<p>Tracy Qi Dong, and Jon Wakefield. (2020) <em>Modeling and presentation of vaccination coverage estimates using data from household surveys.</em> arXiv preprint arXiv:2004.03127.
</p>


<h3>Examples</h3>

<pre><code class="language-R">## Not run: 
library(dplyr)
data(DemoData)
# Create dataset of counts, unstratified
counts.all &lt;- NULL
for(i in 1:length(DemoData)){
  counts &lt;- getCounts(DemoData[[i]][, c("clustid", "time", "age", "died",
                                        "region")],
            variables = 'died', by = c("age", "clustid", "region", 
                                         "time"))
  counts &lt;- counts %&gt;% mutate(cluster = clustid, years = time, Y=died)
  counts$strata &lt;- NA
  counts$survey &lt;- names(DemoData)[i] 
  counts.all &lt;- rbind(counts.all, counts)
}

# fit cluster-level model on the periods
periods &lt;- levels(DemoData[[1]]$time)
fit &lt;- smoothCluster(data = counts.all, 
      Amat = DemoMap$Amat, 
      time.model = "rw2", 
      st.time.model = "rw1",
      strata.time.effect =  TRUE, 
      survey.effect = TRUE,
      family = "betabinomial",
      year_label = c(periods, "15-19"))
est &lt;- getSmoothed(fit, nsim = 1000, save.draws=TRUE)

tcp &lt;- tcpPlot(est, DemoMap$geo, by.geo = "REGNAME", interval = 3, year_plot = periods) 
tcp$g

## End(Not run)

</code></pre>


</div>