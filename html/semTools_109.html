<div class="container">

<table style="width: 100%;"><tr>
<td>reliabilityL2-deprecated</td>
<td style="text-align: right;">R Documentation</td>
</tr></table>
<h2>Calculate the reliability values of a second-order factor</h2>

<h3>Description</h3>

<p>Calculate the reliability values (coefficient omega) of a second-order
factor
</p>


<h3>Usage</h3>

<pre><code class="language-R">reliabilityL2(object, secondFactor, omit.imps = c("no.conv", "no.se"))
</code></pre>


<h3>Arguments</h3>

<table>
<tr style="vertical-align: top;">
<td><code>object</code></td>
<td>
<p>A <code>lavaan</code> or
<code>lavaan.mi</code> object, expected to contain a least one
exogenous higher-order common factor.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>secondFactor</code></td>
<td>
<p>The name of a single second-order factor in the
model fitted in <code>object</code>. The function must be called multiple
times to estimate reliability for each higher-order factor.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>omit.imps</code></td>
<td>
<p><code>character</code> vector specifying criteria for omitting
imputations from pooled results.  Can include any of
<code>c("no.conv", "no.se", "no.npd")</code>, the first 2 of which are the
default setting, which excludes any imputations that did not
converge or for which standard errors could not be computed.  The
last option (<code>"no.npd"</code>) would exclude any imputations which
yielded a nonpositive definite covariance matrix for observed or
latent variables, which would include any "improper solutions" such
as Heywood cases.  NPD solutions are not excluded by default because
they are likely to occur due to sampling error, especially in small
samples.  However, gross model misspecification could also cause
NPD solutions, users can compare pooled results with and without
this setting as a sensitivity analysis to see whether some
imputations warrant further investigation.</p>
</td>
</tr>
</table>
<h3>Details</h3>

<p>The first formula of the coefficient omega (in the
<code>reliability</code>) will be mainly used in the calculation. The
model-implied covariance matrix of a second-order factor model can be
separated into three sources: the second-order common-factor variance,
the residual variance of the first-order common factors (i.e., not
accounted for by the second-order factor), and the measurement error of
observed indicators:
</p>
<p style="text-align: center;"><code class="reqn"> \hat{\Sigma} = \Lambda \bold{B} \Phi_2 \bold{B}^{\prime}
\Lambda^{\prime} + \Lambda \Psi_{u} \Lambda^{\prime} + \Theta, </code>
</p>

<p>where <code class="reqn">\hat{\Sigma}</code> is the model-implied covariance matrix,
<code class="reqn">\Lambda</code> contains first-order factor loadings, <code class="reqn">\bold{B}</code> contains
second-order factor loadings, <code class="reqn">\Phi_2</code> is the covariance matrix of the
second-order factor(s), <code class="reqn">\Psi_{u}</code> is the covariance matrix of residuals
from first-order factors, and <code class="reqn">\Theta</code> is the covariance matrix of the
measurement errors from observed indicators. Thus, we can calculate the
proportion of variance of a composite score calculated from the observed
indicators (e.g., a total score or scale mean) that is attributable to the
second-order factor, i.e. coefficient omega at Level 1:
</p>
<p style="text-align: center;"><code class="reqn"> \omega_{L1} = \frac{\bold{1}^{\prime} \Lambda \bold{B} \Phi_2
\bold{B}^{\prime} \Lambda^{\prime} \bold{1}}{\bold{1}^{\prime} \Lambda
\bold{B} \Phi_2 \bold{B} ^{\prime} \Lambda^{\prime} \bold{1} +
\bold{1}^{\prime} \Lambda \Psi_{u} \Lambda^{\prime} \bold{1} +
\bold{1}^{\prime} \Theta \bold{1}}, </code>
</p>

<p>where <code class="reqn">\bold{1}</code> is the <em>k</em>-dimensional vector of 1 and <em>k</em> is
the number of observed variables.
</p>
<p>The model-implied covariance matrix among first-order factors (<code class="reqn">\Phi_1</code>)
can be calculated as:
</p>
<p style="text-align: center;"><code class="reqn"> \Phi_1 = \bold{B} \Phi_2 \bold{B}^{\prime} + \Psi_{u}, </code>
</p>

<p>Thus, the proportion of variance among first-order common factors that is
attributable to the second-order factor (i.e., coefficient omega at Level 2)
can be calculated as:
</p>
<p style="text-align: center;"><code class="reqn"> \omega_{L2} = \frac{\bold{1_F}^{\prime} \bold{B} \Phi_2
\bold{B}^{\prime} \bold{1_F}}{\bold{1_F}^{\prime} \bold{B} \Phi_2
\bold{B}^{\prime} \bold{1_F} + \bold{1_F}^{\prime} \Psi_{u} \bold{1_F}}, </code>
</p>

<p>where <code class="reqn">\bold{1_F}</code> is the <em>F</em>-dimensional vector of 1 and <em>F</em>
is the number of first-order factors. This Level-2 omega can be interpreted
as an estimate of the reliability of a hypothetical composite calculated
from error-free observable variables representing the first-order common
factors. This might only be meaningful as a thought experiment.
</p>
<p>An additional thought experiment is possible: If the observed indicators
contained only the second-order common-factor variance and unsystematic
measurement error, then there would be no first-order common factors because
their unique variances would be excluded from the observed measures. An
estimate of this hypothetical composite reliability can be calculated as the
partial coefficient omega at Level 1, or the proportion of observed
variance explained by the second-order factor after partialling out the
uniqueness from the first-order factors:
</p>
<p style="text-align: center;"><code class="reqn"> \omega_{L1} = \frac{\bold{1}^{\prime} \Lambda \bold{B} \Phi_2
\bold{B}^{\prime} \Lambda^{\prime} \bold{1}}{\bold{1}^{\prime} \Lambda
\bold{B} \Phi_2 \bold{B}^{\prime} \Lambda^{\prime} \bold{1} +
\bold{1}^{\prime} \Theta \bold{1}}, </code>
</p>

<p>Note that if the second-order factor has a direct factor loading on some
observed variables, the observed variables will be counted as first-order
factors, which might not be desirable.
</p>


<h3>Value</h3>

<p>Reliability values at Levels 1 and 2 of the second-order factor, as
well as the partial reliability value at Level 1
</p>


<h3>Author(s)</h3>

<p>Sunthud Pornprasertmanit (<a href="mailto:psunthud@gmail.com">psunthud@gmail.com</a>)
</p>


<h3>See Also</h3>

<p><code>semTools-deprecated</code>
</p>


<h3>Examples</h3>

<pre><code class="language-R">
HS.model3 &lt;- ' visual  =~ x1 + x2 + x3
               textual =~ x4 + x5 + x6
               speed   =~ x7 + x8 + x9
               higher =~ visual + textual + speed'

fit6 &lt;- cfa(HS.model3, data = HolzingerSwineford1939)
reliability(fit6) # Should provide a warning for the endogenous variables
reliabilityL2(fit6, "higher")

</code></pre>


</div>