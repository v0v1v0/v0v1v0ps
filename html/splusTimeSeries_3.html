<div class="container">

<table style="width: 100%;"><tr>
<td>align</td>
<td style="text-align: right;">R Documentation</td>
</tr></table>
<h2>
Time Series and Signal Interpolation and Alignment 
</h2>

<h3>Description</h3>

<p>Aligns or interpolates a time series or signal to new positions. 
</p>


<h3>Usage</h3>

<pre><code class="language-R">align(x, pos, how="NA", error.how="NA", localzone=FALSE, matchtol=0, by, 
      k.by=1, week.align=NULL, holidays=timeDate())
</code></pre>


<h3>Arguments</h3>

<table>
<tr style="vertical-align: top;">
<td><code>x</code></td>
<td>

<p>the object to be aligned or interpolated. 
</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>pos</code></td>
<td>

<p>the new positions to align or interpolate it to  
(either <code>pos</code> or <code>by</code> is required). 
</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>how</code></td>
<td>

<p>specifies how to treat unmatched positions. Must be one of the following: 
</p>

<table>
<tr>
<td style="text-align: left;">
<code>"NA"</code> </td>
<td style="text-align: left;"> Insert a row of <code>NA</code>. </td>
</tr>
<tr>
<td style="text-align: left;">  
<code>"drop"</code> </td>
<td style="text-align: left;"> Drop that position entirely. </td>
</tr>
<tr>
<td style="text-align: left;"> 
<code>"nearest"</code> </td>
<td style="text-align: left;"> Use the row with the nearest position. </td>
</tr>
<tr>
<td style="text-align: left;"> 
<code>"before"</code> </td>
<td style="text-align: left;"> Use the data from the row whose position  
is just before the unmatched position. </td>
</tr>
<tr>
<td style="text-align: left;"> 
<code>"after"</code> </td>
<td style="text-align: left;"> Use the data from the row whose position is  
just after the unmatched position. </td>
</tr>
<tr>
<td style="text-align: left;"> 
<code>"interp"</code> </td>
<td style="text-align: left;"> Interpolate linearly between <code>"before"</code> and <code>"after"</code>. 
</td>
</tr>
</table>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>error.how</code></td>
<td>

<p>specifies available actions when an out of bounds error occurs. (Such an error can occur 
when <code>how</code> is  <code>"before"</code>, <code>"after"</code>, or <code>"interp"</code>). Must be one of
the following: 
</p>

<table>
<tr>
<td style="text-align: left;">
<code>"NA"</code> </td>
<td style="text-align: left;"> Insert a row of <code>NA</code>. </td>
</tr>
<tr>
<td style="text-align: left;"> 
<code>"drop"</code> </td>
<td style="text-align: left;"> Drop that position entirely. </td>
</tr>
<tr>
<td style="text-align: left;"> 
<code>"nearest"</code> </td>
<td style="text-align: left;"> Use the row with the nearest position. 
</td>
</tr>
</table>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>localzone</code></td>
<td>

<p>if T (<code>x</code> must be a calendar-based time series),
align by matching/interpolating with both <code>x</code> and 
<code>pos</code> in their local time zones, instead of with 
the absolute GMT times. 
</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>matchtol</code></td>
<td>

<p>the tolerance for matching positions. Positions that match within <code>matchtol</code> do 
not invoke the <code>how</code> argument methods. 
</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>by</code></td>
<td>

<p>if <code>pos</code> is missing and <code>by</code> is supplied for aligning a  
calendar-based time series, new positions are generated as a regular 
time/date sequence using one of the following:
</p>

<ul>
<li> <p><code>by</code>
</p>
</li>
<li> <p><code>k.by</code>
</p>
</li>
<li> <p><code>week.align</code>  
</p>
</li>
<li> <p><code>holidays</code>
</p>
</li>
</ul>
<p><code>by</code> gives the spacing between successive values in the sequence.   
This can be a <code>timeSpan</code>, <code>timeRelative</code>, or <code>numeric</code> value,  
in which case <code>k.by</code> is ignored. 
</p>
<p>Alternatively, it can be one of the following character strings: 
</p>

<ul>
<li> <p><code>"milliseconds"</code>
</p>
</li>
<li> <p><code>"seconds"</code>
</p>
</li>
<li> <p><code>"minutes"</code>
</p>
</li>
<li> <p><code>"hours"</code>
</p>
</li>
<li> <p><code>"days"</code> 
</p>
</li>
<li> <p><code>"weekdays"</code>
</p>
</li>
<li> <p><code>"bizdays"</code>
</p>
</li>
<li> <p><code>"weeks"</code>
</p>
</li>
<li> <p><code>"months"</code>
</p>
</li>
<li> <p><code>"quarters"</code>
</p>
</li>
<li> <p><code>"years"</code>
</p>
</li>
</ul>
<p>These strings give the time units of intervals between values in  
the sequence. 
</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>k.by</code></td>
<td>

<p>a non-zero integer giving the width of the interval between consecutive 
values in the sequence in terms of the units given in <code>by</code>.  Ignored if 
<code>by</code> is not a character string or if <code>pos</code> is given. 
</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>week.align</code></td>
<td>

<p>if not <code>NULL</code>, and <code>by</code> is <code>"weeks"</code>,  
you can supply a character 
string (or a number, 0 to 6, with 0 being Sunday)  
to specify a weekday to align to. The character string must 
be sufficient to make a unique case-insensitive match to the strings 
in <code>timeSeriesOptions("time.day.name")</code>.  Ignored if 
<code>by</code> is not a character string or if a <code>pos</code> is given. 
</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>holidays</code></td>
<td>

<p>the holidays for business day sequences. (Ignored if <code>by</code> is not 
a character string or if <code>pos</code> is given.)   
</p>
</td>
</tr>
</table>
<h3>Details</h3>

<p>If either <code>x</code> or <code>pos</code> (or the generated sequence) has zero length,  
a zero-length series is returned. 
</p>


<h3>Value</h3>

<p>returns a new time series or a signal whose positions are the passed-in positions or 
positions generated from <code>by</code>, <code>k.by</code>, and so on, and whose  
rows are derived from <code>x</code> as specified in the arguments.
(Can be a subset if <code>how</code> or <code>error.how</code> is <code>"drop"</code>.)  
</p>


<h3>See Also</h3>

<p><code>timeSeries</code>,  <code>signalSeries</code>,  <code>positions</code>,  <code>seriesMerge</code>.   
</p>


<h3>Examples</h3>

<pre><code class="language-R">a &lt;- signalSeries(pos=1:10, data=data.frame(a = 11:20, b = 5 * (1:10))) 
align(a, c(.2, 3, 7.8, 12), how = "interp", error.how = "nearest") 
a &lt;- timeSeries(pos=as(1:10, "timeDate"), 
		data=data.frame(a = 11:20, b = 5 * (1:10))) 
alpos &lt;- as(c(.2, 3, 7.8, 12), "timeDate") 
alpos@time.zone &lt;- "JST" 
positions(a)@time.zone &lt;- "PST" 
align(a, alpos, matchtol = 1, localzone = TRUE) 
align(a, matchtol=1, localzone=TRUE, by="days", k.by=2) 
</code></pre>


</div>