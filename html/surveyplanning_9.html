<div class="container">

<table style="width: 100%;"><tr>
<td>optsize</td>
<td style="text-align: right;">R Documentation</td>
</tr></table>
<h2>Optimal sample size allocation</h2>

<h3>Description</h3>

<p>The function computes optimal sample size allocation over strata.
</p>


<h3>Usage</h3>

<pre><code class="language-R">optsize(
  H,
  n,
  poph,
  s2h = NULL,
  Rh = NULL,
  deffh = NULL,
  fullsampleh = NULL,
  dataset = NULL
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr style="vertical-align: top;">
<td><code>H</code></td>
<td>
<p>The stratum variable. One dimensional object convertible to one-column <code>data.table</code>, variable name as character, or column number.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>n</code></td>
<td>
<p>Total sample size. One dimensional object with length one.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>poph</code></td>
<td>
<p>Population size in each stratum. One dimensional object convertible to one-column <code>data.table</code>, variable name as character, or column number.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>s2h</code></td>
<td>
<p>The expected population variance <code class="reqn">S^2</code> for variables of interest in each stratum (optional). If not defined, it is assumed to be 1 in each stratum. Object convertible to <code>data.table</code>, variable name as character vector, or column numbers.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>Rh</code></td>
<td>
<p>The expected response rate in each stratum (optional). If not defined, it is assumed to be 1 in each stratum (full-response). Object convertible to one-column <code>data.table</code>, variable name as character, or column number.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>deffh</code></td>
<td>
<p>The expected design effect for the estimate of variable (optional). If not defined, it is assumed to be 1 for each variable in each stratum. If is defined, then variables is defined the same arrangement as <code>Yh</code>. Object convertible to <code>data.table</code>, variable name as character vector, or column numbers.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>fullsampleh</code></td>
<td>
<p>Variable for detection fully surveyed stratum (optinal). If not defined, it is assumed to be 1 in each stratum (full-response). Object convertible to one-column <code>data.table</code>, variable name as character, or column number.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>dataset</code></td>
<td>
<p>Optional survey data object convertible to <code>data.table</code> with one row for each stratum.</p>
</td>
</tr>
</table>
<h3>Value</h3>

<p>An object as <code>data.table</code>, with variables:<br><code>H</code> - stratum, <br><code>variable</code> - the name of variable for population variance <code class="reqn">S^2</code>, <br><code>s2h</code> - population variance <code class="reqn">S^2</code>, <br><code>Rh</code> - the expectedresponse rate, <br><code>deffh</code> - the expected design effect, <br><code>poph</code> - population size, <br><code>deffh</code> - design effect, <br><code>fullsampleh</code> - full sample indicator, <br><code>nh</code> - sample size.
</p>


<h3>Details</h3>

<p>If <code>s2h</code> and <code>Rh</code> is not defined, the sample allocation will be calculated as proportional allocation (proportional to the population size).
If <code>Rh</code> is not defined, the sample allocation will be calculated as Neyman allocation.
</p>


<h3>See Also</h3>

<p><code>expsize</code>, <code>dom_optimal_allocation</code>
</p>


<h3>Examples</h3>

<pre><code class="language-R">library("data.table")
data &lt;- data.table(H = 1 : 3,
                   s2h=10 * runif(3),
                   s2h2 = 10 * runif(3),
                   poph = 8 * 1 : 3,
                   Rh = rep(1, 3),
                   dd = c(1, 1, 1))

vars &lt;- optsize(H = "H",
                s2h = c("s2h", "s2h2"),
                n = 10, poph = "poph",
                Rh = "Rh",
                fullsampleh = NULL,
                dataset = data)
vars

</code></pre>


</div>