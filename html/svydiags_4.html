<div class="container">

<table style="width: 100%;"><tr>
<td>svydfbetas</td>
<td style="text-align: right;">R Documentation</td>
</tr></table>
<h2>
dfbetas for models fitted with complex survey data
</h2>

<h3>Description</h3>

<p>Compute the dfbetas measure of the effect of extreme observations on parameter estimates for fixed effects, linear regression models fitted with data collected from one- and two-stage complex survey designs.
</p>


<h3>Usage</h3>

<pre><code class="language-R">svydfbetas(mobj, stvar=NULL, clvar=NULL, z=3)
</code></pre>


<h3>Arguments</h3>

<table>
<tr style="vertical-align: top;">
<td><code>mobj</code></td>
<td>

<p>model object produced by <code>svyglm</code> in the <code>survey</code> package
</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>stvar</code></td>
<td>

<p>name of the stratification variable in the <code>svydesign</code> object used to fit the model
</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>clvar</code></td>
<td>

<p>name of the cluster variable in the <code>svydesign</code> object used to fit the model
</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>z</code></td>
<td>

<p>numerator of cutoff for measuring whether an observation has an extreme effect on its own predicted value; default is 3 but can be adjusted to control how many observations are flagged for inspection
</p>
</td>
</tr>
</table>
<h3>Details</h3>

<p><code>svydfbetas</code> computes the values of dfbetas for each observation and parameter estimate, i.e., the amount that a parameter estimate changes when the unit is deleted from the sample. The model object must be created by <code>svyglm</code> in the R <code>survey</code> package. The output is a vector of the dfbeta and standardized dfbetas values.  By default, <code>svyglm</code> uses only complete cases (i.e., ones for which the dependent variable and all independent variables are non-missing) to fit the model. The rows of the data frame used in fitting the model can be retrieved from the <code>svyglm</code> object via <code>as.numeric(names(mobj$y))</code>. The data for those rows is in <code>mobj$data</code>.
</p>


<h3>Value</h3>

<p>List object with values:
</p>
<table>
<tr style="vertical-align: top;">
<td><code>Dfbeta</code></td>
<td>
<p>Numeric vector of unstandardized dfbeta values whose names are the rows of the data frame in the <code>svydesign</code> object that were used in fitting the model</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>Dfbetas</code></td>
<td>
<p>Numeric vector of standardized dfbetas values whose names are the rows of the data frame in the <code>svydesign</code> object that were used in fitting the model</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>cutoff</code></td>
<td>
<p>Value used for gauging whether a value of dffits is large. For a single-stage sample, <code>cutoff</code>=<code class="reqn">z/\sqrt{n}</code>; for a 2-stage sample, <code>cutoff</code>=<code class="reqn">z/\sqrt{n[1+\rho (\bar{m}-1)]}</code> </p>
</td>
</tr>
</table>
<h3>Author(s)</h3>

<p>Richard Valliant
</p>


<h3>References</h3>

<p>Li, J., and Valliant, R. (2011). Linear regression diagnostics for unclustered survey data. <em>Journal of Official Statistics</em>, 27, 99-119.
</p>
<p>Li, J., and Valliant, R. (2015). Linear regression diagnostics in cluster samples. <em>Journal of Official Statistics</em>, 31, 61-75.
</p>
<p>Lumley, T. (2010). <em>Complex Surveys</em>. New York: John Wiley &amp; Sons.
</p>
<p>Lumley, T. (2023). survey: analysis of complex survey samples. R package version 4.2.
</p>


<h3>See Also</h3>

<p><code>svydffits</code>, <code>svyCooksD</code>
</p>


<h3>Examples</h3>

<pre><code class="language-R">require(survey)
data(api)
    # unstratified design single stage design
d0 &lt;- svydesign(id=~1,strata=NULL, weights=~pw, data=apistrat)
m0 &lt;- svyglm(api00 ~ ell + meals + mobility, design=d0)
svydfbetas(mobj=m0)

    # stratified cluster
require(NHANES)
data(NHANESraw)
dnhanes &lt;- svydesign(id=~SDMVPSU, strata=~SDMVSTRA, weights=~WTINT2YR, nest=TRUE, data=NHANESraw)
m2 &lt;- svyglm(BPDiaAve ~ as.factor(Race1) + BMI + AlcoholYear, design = dnhanes)
yy &lt;- svydfbetas(mobj=m2, stvar= "SDMVSTRA", clvar="SDMVPSU")
apply(abs(yy$Dfbetas) &gt; yy$cutoff,1, sum)
</code></pre>


</div>