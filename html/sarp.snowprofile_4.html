<div class="container">

<table style="width: 100%;"><tr>
<td>computeRTA</td>
<td style="text-align: right;">R Documentation</td>
</tr></table>
<h2>Compute Relative Threshold Sum approach (RTA)</h2>

<h3>Description</h3>

<p>The function can compute the RTA index for layers and for interfaces. The calculation follows the example in Monti (2013),
referenced below. The six individual relative lemons are computed as follows. To compute the RTA index for layers,
the layer properties are combined with the interface properties of the weakest interface below or above the layer.
To compute the RTA index for interfaces, the interface properties are combined with the weakest layer properties below
or above the interface. The six properties considered in the index are
</p>

<ul>
<li>
<p> grain size, hardness, grain type (layer properties)
</p>
</li>
<li>
<p> difference of grain sizes and hardness (at the interface)
</p>
</li>
<li>
<p> depth (at the top interface of the layer)
</p>
</li>
</ul>
<p>Instead of implementing a static threshold for the depth weighting, the depth is scaled with a weibull function
that is corrected for potential crusts and their stabilizing effects (Monti and Mitterer, personal communication).
</p>
<p>Note that due to the crust correction, the results from this function will only be correct if applied to profiles
that have not yet been resampled (such as by functions from sarp.snowprofile.alignment: <code>resampleSP</code>, <code>resampleSPpairs</code>,
<code>dtw</code>, <code>averageSP</code>).
</p>
<p>The RTA index ranges between <code style="white-space: pre;">⁠[0, 1]⁠</code>, with the weakest layer/interface euqal to 1. Values &gt; 0.8 indicate layers/interfaces with a poor structural stability.
</p>


<h3>Usage</h3>

<pre><code class="language-R">computeRTA(x, target = c("interface", "layer"))

## S3 method for class 'snowprofileSet'
computeRTA(x, target = c("interface", "layer"))

## S3 method for class 'snowprofile'
computeRTA(x, target = c("interface", "layer"))
</code></pre>


<h3>Arguments</h3>

<table>
<tr style="vertical-align: top;">
<td><code>x</code></td>
<td>
<p>a snowprofile or snowprofileSet. Profile layer properties must be known for all layers (i.e., no NAs in gtype, hardness, gsize allowed!)</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>target</code></td>
<td>
<p>Do you want to compute the index for the layers or for the layer interfaces? defaults to both.</p>
</td>
</tr>
</table>
<h3>Value</h3>

<p>The input object will be returned with the new layer properties <code>rta</code>/<code>rta_interface</code> describing the RTA index added to the profile layers.
</p>


<h3>Methods (by class)</h3>


<ul>
<li> <p><code>computeRTA(snowprofileSet)</code>: for snowprofileSets
</p>
</li>
<li> <p><code>computeRTA(snowprofile)</code>: for snowprofiles
</p>
</li>
</ul>
<h3>Author(s)</h3>

<p>fherla
</p>


<h3>References</h3>

<p>Monti, F., &amp; Schweizer, J. (2013). A relative difference approach to detect potential weak layers within a snow profile.
Proceedings of the 2013 International Snow Science Workshop, Grenoble, France, 339–343. Retrieved from https://arc.lib.montana.edu/snow-science/item.php?id=1861
</p>


<h3>See Also</h3>

<p>computeTSA
</p>


<h3>Examples</h3>

<pre><code class="language-R">## apply function to snowprofileSet
profileset &lt;- computeRTA(SPgroup)

## apply function to snowprofile and plot output
sp &lt;- computeRTA(SPpairs$B_modeled1)
plot(sp, TempProfile = FALSE, main = "RTA")
lines(sp$layers$rta*5, sp$layers$height - 0.5*sp$layers$thickness, type = "b", xlim = c(0, 5))
lines(sp$layers$rta_interface*5, sp$layers$height, type = "b", xlim = c(0, 5), col = "red")
abline(h = sp$layers$height, lty = "dotted", col = "grey")
abline(v = 0.8*5, lty = "dashed")
</code></pre>


</div>