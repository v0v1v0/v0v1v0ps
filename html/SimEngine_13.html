<div class="container">

<table style="width: 100%;"><tr>
<td>update_sim</td>
<td style="text-align: right;">R Documentation</td>
</tr></table>
<h2>Update a simulation</h2>

<h3>Description</h3>

<p>This function updates a previously run simulation. After a
simulation has been <code>run</code>, you can alter the levels of the
resulting object of class <code>sim_obj</code> using <code>set_levels</code>,
or change the configuration (including the number of simulation
replicates) using <code>set_config</code>. Executing <code>update_sim</code> on
this simulation object will only run the added levels/replicates, without
repeating anything that has already been run.
</p>


<h3>Usage</h3>

<pre><code class="language-R">update_sim(sim, keep_errors = T)
</code></pre>


<h3>Arguments</h3>

<table>
<tr style="vertical-align: top;">
<td><code>sim</code></td>
<td>
<p>A simulation object of class <code>sim_obj</code>, usually created by
<code>new_sim</code>, that has already been run by the <code>run</code>
function</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>keep_errors</code></td>
<td>
<p>logical (<code>TRUE</code> by default); if <code>TRUE</code>, do not
try to re-run simulation reps that results in errors previously; if
<code>FALSE</code>, attempt to run those reps again</p>
</td>
</tr>
</table>
<h3>Details</h3>


<ul><li>
<p>It is not possible to add new level variables, only new levels of the
existing variables. Because of this, it is best practice to include all
potential level variables before initially running a simulation, even if
some of them only contain a single level. This way, additional levels can
be added later.
</p>
</li></ul>
<h3>Value</h3>

<p>The original simulation object with additional simulation replicates
in <code>results</code> or <code>errors</code>
</p>


<h3>Examples</h3>

<pre><code class="language-R">sim &lt;- new_sim()
create_data &lt;- function(n) { rpois(n, lambda=5) }
est_mean &lt;- function(dat, type) {
  if (type=="M") { return(mean(dat)) }
  if (type=="V") { return(var(dat)) }
}
sim %&lt;&gt;% set_levels(n=c(10,100), est="M")
sim %&lt;&gt;% set_config(num_sim=10)
sim %&lt;&gt;% set_script(function() {
  dat &lt;- create_data(L$n)
  lambda_hat &lt;- est_mean(dat=dat, type=L$est)
  return (list("lambda_hat"=lambda_hat))
})
sim %&lt;&gt;% run()
sim %&gt;% summarize(list(stat="mean", x="lambda_hat"))
sim %&lt;&gt;% set_levels(n=c(10,100,1000), est=c("M","V"))
sim %&lt;&gt;% set_config(num_sim=5)
sim %&lt;&gt;% update_sim()
sim %&gt;% summarize(list(stat="mean", x="lambda_hat"))
</code></pre>


</div>