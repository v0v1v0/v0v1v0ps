<div class="container">

<table style="width: 100%;"><tr>
<td>SeqAlloc</td>
<td style="text-align: right;">R Documentation</td>
</tr></table>
<h2>
Sequential Allocation for Prospective Experiments
</h2>

<h3>Description</h3>

<p>Simulates results of allocations using complete randomization (CR), random allocation rule (RAR), biased coin design (BCD), permuted block design (PBD), stratified permuted block design (SPBD), covariate-adaptive randomization (CAR), big stick design (BSD), and covariate-adjusted imbalance tolerance (CAIT) designs. The order of the prospective enrollees is permuted for a preset number of iterations; for each iteration, the allocations are determined for each of the methods listed above. The allocations are then evaluated for balance on the covariates and for predictability (i.e., how well an observer could guess the next treatment assignment).
</p>


<h3>Usage</h3>

<pre><code class="language-R">SeqAlloc(xmat, carwt, strata = NULL, blksize, pbcd, pcar, bsdtol, caittol, 
         niter, seed = 12345)
</code></pre>


<h3>Arguments</h3>

<table>
<tr style="vertical-align: top;">
<td><code>xmat</code></td>
<td>

<p>matrix or data frame of covariates for prospective enrollees in the experiment. This matrix is to be used in CAR/CAIT methods, and should include strata or marginals of strata as columns
</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>carwt</code></td>
<td>

<p>vector of weights to be used for CAR and CAIT methods
</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>strata</code></td>
<td>

<p>vector of planned strata for study (if none, should be NULL)
</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>blksize</code></td>
<td>

<p>vector of block sizes for PBDs and SPBDs
</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>pbcd</code></td>
<td>

<p>probability for biased coin design (BCD) method
</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>pcar</code></td>
<td>

<p>probability for CAR method
</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>bsdtol</code></td>
<td>

<p>tolerance (d value) for BSD method
</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>caittol</code></td>
<td>

<p>tolerance (d value) for CAIM method
</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>niter</code></td>
<td>

<p>number of iterations for simulation
</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>seed</code></td>
<td>

<p>random number seed, allows the allocation to be reproduced later
</p>
</td>
</tr>
</table>
<h3>Value</h3>

<p>List containing summary statistics (minimum, 25th percentile, median, mean, 75th percentile, 90th percentile, 95th percentile, maximum) for evaluation measures, including AI, Rsquared, MAIC, WAIC, perccorr, and perccorr_strat.
</p>
<table>
<tr style="vertical-align: top;">
<td><code>schemes</code></td>
<td>
<p>names of schemes evaluated</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>AI</code></td>
<td>
<p>value of overall allocation imblance defined as | Proportion of observations that are allocated to the treatment group - 0.5 |</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>Rsquared</code></td>
<td>
<p>value of R-squared from regression through the origin</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>MAIC</code></td>
<td>
<p>maximum of allocation imbalance for all covariates</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>WAIC</code></td>
<td>
<p>weighted average of allocation imbalance for all covariates</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>perccorr</code></td>
<td>
<p>percentage of allocations that an observer could guess correctly using the Blackwell-Hodges rule</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>perccorr_strat</code></td>
<td>
<p>percentage of allocations that an observer could guess correctly using the Blackwell-Hodges rule within each stratum</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>carwt</code></td>
<td>
<p>weights used in CAR and CAIM procedures</p>
</td>
</tr>
</table>
<h3>Note</h3>

<p>Because the program allows for sequential allocation methods, it can be slow when the data set and/or number of iterations is large.
</p>


<h3>Author(s)</h3>

<p>Xiaoshu Zhu <a href="mailto:xiaoshuzhu@westat.com">xiaoshuzhu@westat.com</a> and Sharon Lohr
</p>


<h3>References</h3>

<p>Blackwell, David and J. L. Hodges (1957). Design for the Control of Selection Bias. Annals of Mathematical Statistics 28: 449-460.
</p>
<p>Lohr, S. and X. Zhu (2015). Randomized Sequential Individual Assignment in Social Experiments: Evaluating the Design Options Prospectively. Sociological Methods and Research. [Advance online publication: December 27, 2015] doi: 10.1177/0049124115621332.
</p>
<p>Rosenberger, W. F. and Lachin, J. M. (2004). Randomization in Clinical Trials: Theory and Practice. New York: Wiley.
</p>


<h3>Examples</h3>

<pre><code class="language-R">sampsize &lt;- 200
percent &lt;- c(0.5,0.8,0.2,0.4)
set.seed(200)

xmat &lt;- matrix(rbinom(sampsize*length(percent),1,rep(percent,sampsize)),
              nrow=sampsize,ncol=length(percent),byrow=TRUE)
colnames(xmat) &lt;- c("C1","C2","C3","C4")
strat_factor &lt;- xmat[,2]*2 + xmat[,4] + 1

SeqAlloc(xmat,carwt=c(.4,.3,.2,.1),strata=strat_factor,blksize=c(2,6),
         pbcd=.7,pcar=.8,bsdtol=2,caittol=5,niter=10, seed = 20850)

</code></pre>


</div>