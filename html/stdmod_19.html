<div class="container">

<table style="width: 100%;"><tr>
<td>std_selected</td>
<td style="text-align: right;">R Documentation</td>
</tr></table>
<h2>Standardize Variables in a Regression Model</h2>

<h3>Description</h3>

<p>Standardize, mean center, or scale by standard deviation
selected variables in a regression model and refit the model
</p>


<h3>Usage</h3>

<pre><code class="language-R">std_selected(lm_out, to_scale = NULL, to_center = NULL, to_standardize = NULL)

std_selected_boot(
  lm_out,
  to_scale = NULL,
  to_center = NULL,
  to_standardize = NULL,
  conf = 0.95,
  nboot = 100,
  boot_args = NULL,
  save_boot_est = TRUE,
  full_output = FALSE,
  do_boot = TRUE
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr style="vertical-align: top;">
<td><code>lm_out</code></td>
<td>
<p>The output from <code>lm()</code>.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>to_scale</code></td>
<td>
<p>The terms to be rescaled by standard deviation,
specified by a formula as in <code>lm()</code>. For example, if the terms to be scaled
are <code>x1</code> and <code>x3</code>, use <code>~ x1 + x3</code>. No need to specify the
interaction
term. To scale the outcome variable, list it on the <em>right hand side</em>
as a predictor.
Specify only the original variables. If <code>NULL</code>, then no terms
will be rescaled by their standard deviations. Variables that are not
numeric will be ignored. Default is <code>NULL</code>.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>to_center</code></td>
<td>
<p>The terms to be mean centered, specified by a formula
as in <code>lm()</code>. For example, if the terms to be centered
is <code>x1</code> and <code>x3</code>, use <code>~ x1 + x3</code>. No need to specify the
interaction term. To center  the outcome variable, list it on the
<em>right hand side</em>
as a predictor.
Specify only the original variables. If <code>NULL</code>, then no term
will be centered. Default is <code>NULL</code>.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>to_standardize</code></td>
<td>
<p>The terms to be standardized, specified by a formula
as in <code>lm()</code>. For example, if the terms to be standardized
is <code>x1</code> and <code>x3</code>, use <code>~ x1 + x3</code>. No need to specify the
interaction term. To standardize the outcome variable, list it on the
<em>right hand side</em>
as a predictor.
Specify only the original variables.
This is a shortcut to <code>to_center</code> and <code>to_scale</code>. Listing a variable
in <code>to_standardize</code> is equivalent to listing this variable in
both <code>to_center</code> and <code>to_scale</code>.
Default is <code>NULL</code>.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>conf</code></td>
<td>
<p>The level of confidence for the confidence interval.
Default is .95.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>nboot</code></td>
<td>
<p>The number of bootstrap samples. Default is 100.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>boot_args</code></td>
<td>
<p>A named list of arguments to be passed to <code>boot::boot()</code>.
Default is <code>NULL</code>.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>save_boot_est</code></td>
<td>
<p>If <code>TRUE</code>, the default, the bootstrap estimates will
be saved in the element
<code>boot_est</code> of the output.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>full_output</code></td>
<td>
<p>Whether the full output from <code>boot::boot()</code> is returned.
Default is <code>FALSE</code>. If <code>TRUE</code>, the full output from
<code>boot::boot()</code> will be saved in the element <code>boot_out</code>
of the output.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>do_boot</code></td>
<td>
<p>Whether bootstrapping confidence intervals will be formed.
Default is <code>TRUE</code>. If <code>FALSE</code>, all arguments related to
bootstrapping will be ignored.</p>
</td>
</tr>
</table>
<h3>Details</h3>

<p><code>std_selected()</code> was originally developed to compute the standardized
moderation effect and the standardized coefficients for other predictors
given an <code>lm()</code> output (Cheung, Cheung, Lau, Hui, &amp; Vong, 2022).
It has been extended such that users can specify
which variables in a regression model are to be mean-centered and/or
rescaled by
their standard deviations. If the model has one or more interaction terms,
they will be formed after the transformation, yielding the correct
standardized solution for a moderated regression model. Moreover,
categorical predictors will be automatically skipped in mean-centering
and rescaling.
</p>
<p>Standardization is conducted when a variable is mean-centered and then
rescaled by its standard deviation. Therefore, if the goal is to get the
standardized solution of a moderated regression, users
just instruct the function to standardize all non-categorical variables
in the regression model.
</p>
<p><code>std_selected_boot()</code> is a wrapper of <code>std_selected()</code>. It calls
<code>std_selected()</code>
once
for each bootstrap sample, and then computes the nonparametric
bootstrap
percentile confidence intervals (Cheung, Cheung, Lau, Hui, &amp; Vong, 2022).
</p>
<p>If <code>do_boot</code> is <code>FALSE</code>, then the object it returns is identical to that
by <code>std_selected()</code>.
</p>
<p>This function intentionally does not have an argument for setting the seed
for
random number. Users are recommended to set the seed, e.g., using
<code>set.seed()</code>
before calling it, to ensure reproducibility.
</p>


<h3>Value</h3>

<p>The updated <code>lm()</code> output, with the class <code>std_selected</code> added. It will be
treated as a usual <code>lm()</code> object by most functions. These are the major
additional element in the list:
</p>

<ul>
<li> <p><code>scaled_terms</code>: If not <code>NULL</code>, a character vector of the variables scaled.
</p>
</li>
<li> <p><code>centered_terms</code>: If not <code>NULL</code>, a character vector of the variables mean-centered.
</p>
</li>
<li> <p><code>scaled_by</code>: A numeric vector of the scaling factors for all the variables in
the model. The value is 1 for terms not scaled.
</p>
</li>
<li> <p><code>centered_by</code>: A numeric vector of the numbers used for centering for all
the variables in the model. The value is 0 for
terms not centered.
</p>
</li>
<li> <p><code>std_selected_call</code>: The original call.
</p>
</li>
<li> <p><code>lm_out_call</code>: The call in <code>lm_out</code>.
</p>
</li>
</ul>
<p>Like <code>std_selected()</code>, <code>std_selected_boot()</code> returns the updated <code>lm()</code>
output, with the class <code>std_selected</code> added. The output of <code>std_selected_boot()</code>
contain these additional elements in the list:
</p>

<ul>
<li> <p><code>boot_ci</code>: A data frame of the bootstrap confidence intervals of the
regression coefficient.
</p>
</li>
<li> <p><code>nboot</code>: The number of bootstrap samples requested.
</p>
</li>
<li> <p><code>conf</code>: The level of confidence, in proportion.
</p>
</li>
<li> <p><code>boot_est</code>: A matrix of the bootstrap estimates of the regression coefficients.
The number of rows equal to <code>nboot</code>, and the number of columns
equal to the number of terms in the regression model.
</p>
</li>
<li> <p><code>std_selected_boot_call</code>: The call to <code>std_selected_boot()</code>.
</p>
</li>
<li> <p><code>boot_out</code>: If available, the original output from <code>boot::boot()</code>.
</p>
</li>
</ul>
<h3>Functions</h3>


<ul>
<li> <p><code>std_selected()</code>: The base function to center or
scale selected variables in a regression model
</p>
</li>
<li> <p><code>std_selected_boot()</code>: A wrapper of <code>std_selected()</code> that forms
nonparametric bootstrap confidence intervals.
</p>
</li>
</ul>
<h3>Author(s)</h3>

<p>Shu Fai Cheung <a href="https://orcid.org/0000-0002-9871-9448">https://orcid.org/0000-0002-9871-9448</a>
</p>


<h3>References</h3>

<p>Cheung, S. F., Cheung, S.-H., Lau, E. Y. Y., Hui, C. H., &amp; Vong, W. N.
(2022) Improving an old way to measure moderation effect in standardized
units. <em>Health Psychology</em>, <em>41</em>(7), 502-505.
<a href="https://doi.org/10.1037/hea0001188">doi:10.1037/hea0001188</a>
</p>


<h3>Examples</h3>

<pre><code class="language-R">
# Load a sample data set

dat &lt;- test_x_1_w_1_v_1_cat1_n_500
head(dat)

# Do a moderated regression by lm
lm_raw &lt;- lm(dv ~ iv*mod + v1 + cat1, dat)
summary(lm_raw)

# Mean center mod only
lm_cw &lt;- std_selected(lm_raw, to_center = ~ mod)
summary(lm_cw)

# Mean center mod and iv
lm_cwx &lt;- std_selected(lm_raw, to_center = ~ mod + iv)
summary(lm_cwx)

# Standardize both mod and iv
lm_stdwx &lt;- std_selected(lm_raw, to_scale = ~ mod + iv,
                               to_center = ~ mod + iv)
summary(lm_stdwx)

# Standardize all variables except for categorical variables.
# Interaction terms are formed after standardization.
lm_std &lt;- std_selected(lm_raw, to_scale = ~ .,
                               to_center = ~ .)
summary(lm_std)

# Use to_standardize as a shortcut
lm_stdwx2 &lt;- std_selected(lm_raw, to_standardize = ~ mod + iv)
# The results are the same
coef(lm_stdwx)
coef(lm_stdwx2)
all.equal(coef(lm_stdwx), coef(lm_stdwx2))



dat &lt;- test_x_1_w_1_v_1_cat1_n_500
head(dat)

# Do a moderated regression by lm
lm_raw &lt;- lm(dv ~ iv*mod + v1 + cat1, dat)
summary(lm_raw)
# Standardize all variables as in std_selected above, and compute the
# nonparametric bootstrapping percentile confidence intervals.
set.seed(87053)
lm_std_boot &lt;- std_selected_boot(lm_raw,
                                 to_scale = ~ .,
                                 to_center = ~ .,
                                 conf = .95,
                                 nboot = 100)
# In real analysis, nboot should be at least 2000.
summary(lm_std_boot)

# Use to_standardize as a shortcut
set.seed(87053)
lm_std_boot2 &lt;- std_selected_boot(lm_raw,
                                  to_standardize = ~ .,
                                  conf = .95,
                                  nboot = 100)
# The results are the same
confint(lm_std_boot)
confint(lm_std_boot2)
all.equal(confint(lm_std_boot), confint(lm_std_boot2))


</code></pre>


</div>