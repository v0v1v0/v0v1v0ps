<div class="container">

<table style="width: 100%;"><tr>
<td>randomizations</td>
<td style="text-align: right;">R Documentation</td>
</tr></table>
<h2>Data-stream randomizations</h2>

<h3>Description</h3>

<p><code>randomizations</code> performs data-stream social network randomization. The
function accepts a <code>data.table</code> with relocation data, individual
identifiers and a randomization <code>type</code>. The <code>data.table</code> is
randomized either using <code>step</code> or <code>daily</code> between-individual
methods, or within-individual daily <code>trajectory</code> method described by
Spiegel et al. (2016).
</p>


<h3>Usage</h3>

<pre><code class="language-R">randomizations(
  DT = NULL,
  type = NULL,
  id = NULL,
  group = NULL,
  coords = NULL,
  datetime = NULL,
  splitBy = NULL,
  iterations = NULL
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr style="vertical-align: top;">
<td><code>DT</code></td>
<td>
<p>input data.table</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>type</code></td>
<td>
<p>one of 'daily', 'step' or 'trajectory' - see details</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>id</code></td>
<td>
<p>Character string of ID column name</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>group</code></td>
<td>
<p>generated from spatial grouping functions - see details</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>coords</code></td>
<td>
<p>Character vector of X coordinate and Y coordinate column names</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>datetime</code></td>
<td>
<p>field used for providing date time or time group - see
details</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>splitBy</code></td>
<td>
<p>List of fields in DT to split the randomization process by</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>iterations</code></td>
<td>
<p>The number of iterations to randomize</p>
</td>
</tr>
</table>
<h3>Details</h3>

<p>The <code>DT</code> must be a <code>data.table</code>. If your data is a
<code>data.frame</code>, you can convert it by reference using
<code>data.table::setDT</code>.
</p>
<p>Three randomization <code>type</code>s are provided: </p>
 <ol>
<li>
<p> step -
randomizes identities of relocations between individuals within each time
step. </p>
</li>
<li>
<p> daily - randomizes identities of relocations between individuals
within each day. </p>
</li>
<li>
<p> trajectory - randomizes daily trajectories within
individuals (Spiegel et al. 2016). </p>
</li>
</ol>
<p>Depending on the <code>type</code>, the <code>datetime</code> must be a certain format:
</p>
 <ul>
<li>
<p> step - datetime is integer group created by
<code>group_times</code> </p>
</li>
<li>
<p> daily - datetime is <code>POSIXct</code> format </p>
</li>
<li>
<p>trajectory - datetime is <code>POSIXct</code> format </p>
</li>
</ul>
<p>The <code>id</code>, <code>datetime</code>,  (and optional <code>splitBy</code>) arguments
expect the names of respective columns in <code>DT</code> which correspond to the
individual identifier, date time, and additional grouping columns. The
<code>coords</code> argument is only required when the <code>type</code> is "trajectory",
since the coordinates are required for recalculating spatial groups with
<code>group_pts</code>, <code>group_lines</code> or <code>group_polys</code>.
</p>
<p>Please note that if the data extends over multiple years, a column indicating
the year should be provided to the <code>splitBy</code> argument. This will ensure
randomizations only occur within each year.
</p>
<p>The <code>group</code> argument is expected only when <code>type</code> is 'step' or
'daily'.
</p>
<p>For example, using <code>data.table::year</code>:
</p>
<pre> DT[, yr := year(datetime)] randomizations(DT, type = 'step',
id = 'ID', datetime = 'timegroup', splitBy = 'yr') </pre>
<p><code>iterations</code> is set to 1 if not provided. Take caution with a large
value for <code>iterations</code> with large input <code>DT</code>.
</p>


<h3>Value</h3>

<p><code>randomizations</code> returns the random date time or random id along
with the original <code>DT</code>, depending on the randomization <code>type</code>.
The length of the returned <code>data.table</code> is the original number of rows
multiplied by the number of iterations + 1. For example, 3 iterations will
return 4x - one observed and three randomized.
</p>
<p>Two columns are always returned: </p>
 <ul>
<li>
<p> observed - if the rows
represent the observed (TRUE/FALSE) </p>
</li>
<li>
<p> iteration - iteration of rows
(where 0 is the observed) </p>
</li>
</ul>
<p>In addition, depending on the randomization type, random ID or random date
time columns are returned:
</p>
 <ul>
<li>
<p> step - <code>randomID</code> each time step </p>
</li>
<li>
<p> daily -
<code>randomID</code> for each day and <code>jul</code> indicating julian day </p>
</li>
<li>
<p>trajectory - a random date time ("random" prefixed to <code>datetime</code>
argument), observed <code>jul</code> and <code>randomJul</code> indicating the random
day relocations are swapped to. </p>
</li>
</ul>
<h3>References</h3>

<p><a href="doi:10.1111/2041-210X.12553">doi:10.1111/2041-210X.12553</a>
</p>


<h3>See Also</h3>

<p>Other Social network tools: 
<code>get_gbi()</code>
</p>


<h3>Examples</h3>

<pre><code class="language-R"># Load data.table
library(data.table)


# Read example data
DT &lt;- fread(system.file("extdata", "DT.csv", package = "spatsoc"))

# Select only individuals A, B, C for this example
DT &lt;- DT[ID %in% c('A', 'B', 'C')]

# Date time columns
DT[, datetime := as.POSIXct(datetime)]
DT[, yr := year(datetime)]

# Temporal grouping
group_times(DT, datetime = 'datetime', threshold = '5 minutes')

# Spatial grouping with timegroup
group_pts(DT, threshold = 5, id = 'ID', coords = c('X', 'Y'), timegroup = 'timegroup')

# Randomization: step
randStep &lt;- randomizations(
    DT,
    type = 'step',
    id = 'ID',
    group = 'group',
    datetime = 'timegroup',
    splitBy = 'yr',
    iterations = 2
)

# Randomization: daily
randDaily &lt;- randomizations(
    DT,
    type = 'daily',
    id = 'ID',
    group = 'group',
    datetime = 'datetime',
    splitBy = 'yr',
    iterations = 2
)

# Randomization: trajectory
randTraj &lt;- randomizations(
    DT,
    type = 'trajectory',
    id = 'ID',
    group = NULL,
    coords = c('X', 'Y'),
    datetime = 'datetime',
    splitBy = 'yr',
    iterations = 2
)

</code></pre>


</div>