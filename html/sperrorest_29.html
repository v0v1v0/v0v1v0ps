<div class="container">

<table style="width: 100%;"><tr>
<td>partition_cv_strat</td>
<td style="text-align: right;">R Documentation</td>
</tr></table>
<h2>Partition the data for a stratified (non-spatial) cross-validation</h2>

<h3>Description</h3>

<p><code>partition_cv_strat</code> creates a set of sample indices
corresponding to cross-validation test and training sets.
</p>


<h3>Usage</h3>

<pre><code class="language-R">partition_cv_strat(
  data,
  coords = c("x", "y"),
  nfold = 10,
  return_factor = FALSE,
  repetition = 1,
  seed1 = NULL,
  strat
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr style="vertical-align: top;">
<td><code>data</code></td>
<td>
<p><code>data.frame</code> containing at least the columns specified by
<code>coords</code></p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>coords</code></td>
<td>
<p>vector of length 2 defining the variables in <code>data</code> that
contain the x and y coordinates of sample locations</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>nfold</code></td>
<td>
<p>number of partitions (folds) in <code>nfold</code>-fold cross-validation
partitioning</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>return_factor</code></td>
<td>
<p>if <code>FALSE</code> (default), return a represampling object;
if <code>TRUE</code> (used internally by other sperrorest functions), return a
<code>list</code> containing factor vectors (see Value)</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>repetition</code></td>
<td>
<p>numeric vector: cross-validation repetitions to be
generated. Note that this is not the number of repetitions, but the indices
of these repetitions. E.g., use <code>repetition = c(1:100)</code> to obtain (the
'first') 100 repetitions, and <code>repetition = c(101:200)</code> to obtain a
different set of 100 repetitions.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>seed1</code></td>
<td>
<p><code>seed1+i</code> is the random seed that will be used by set.seed in
repetition <code>i</code> (<code>i</code> in <code>repetition</code>) to initialize the random number
generator before sampling from the data set.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>strat</code></td>
<td>
<p>character: column in <code>data</code> containing a factor variable over
which the partitioning should be stratified; or factor vector of length
<code>nrow(data)</code>: variable over which to stratify</p>
</td>
</tr>
</table>
<h3>Value</h3>

<p>A represampling object, see also <code>partition_cv()</code>.
<code>partition_strat_cv</code>, however, stratified with respect to the variable
<code>data[,strat]</code>; i.e., cross-validation partitioning is done within each set
<code>data[data[,strat]==i,]</code> (<code>i</code> in <code>levels(data[, strat])</code>), and the <code>i</code>th
folds of all levels are combined into one cross-validation fold.
</p>


<h3>See Also</h3>

<p><code>sperrorest()</code>, <code>as.resampling()</code>, <code>resample_strat_uniform()</code>
</p>


<h3>Examples</h3>

<pre><code class="language-R">data(ecuador)
parti &lt;- partition_cv_strat(ecuador,
  strat = "slides", nfold = 5,
  repetition = 1
)
idx &lt;- parti[["1"]][[1]]$train
mean(ecuador$slides[idx] == "TRUE") / mean(ecuador$slides == "TRUE")
# always == 1
# Non-stratified cross-validation:
parti &lt;- partition_cv(ecuador, nfold = 5, repetition = 1)
idx &lt;- parti[["1"]][[1]]$train
mean(ecuador$slides[idx] == "TRUE") / mean(ecuador$slides == "TRUE")
# close to 1 because of large sample size, but with some random variation
</code></pre>


</div>