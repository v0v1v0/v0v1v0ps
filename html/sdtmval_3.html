<div class="container">

<table style="width: 100%;"><tr>
<td>assign_meta_data</td>
<td style="text-align: right;">R Documentation</td>
</tr></table>
<h2>Assign meta data to columns in a SDTM table based on specification file</h2>

<h3>Description</h3>

<p>Trims the length of each text and date variable to the length specified in
the spec and then assigns the attributes <code>"label"</code> and <code>"width"</code> to each
column.
</p>


<h3>Usage</h3>

<pre><code class="language-R">assign_meta_data(
  tbl,
  spec,
  datatype_col = "Data Type",
  var_col = "Variable",
  length_col = "Length",
  label_col = "Label"
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr style="vertical-align: top;">
<td><code>tbl</code></td>
<td>
<p>a data frame containing a SDTM table</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>spec</code></td>
<td>
<p>a data frame with the columns <code>"Variable"</code> which has a value for
each column in <code>tbl</code>, <code>"Data Type"</code> which specifies data types by column,
<code>"Length"</code> which specifies the character limit for each column, and <code>"Label"</code>
which specifies the label for each column</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>datatype_col</code></td>
<td>
<p>a string, the column in <code>spec</code> that contains the data
types (which should include the values <code>"text"</code> and <code>"date"</code>); default is
<code>"Data Type"</code></p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>var_col</code></td>
<td>
<p>a string, the column in <code>spec</code> that contains the domain
variable names</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>length_col</code></td>
<td>
<p>a string, the column in <code>spec</code> that contains the character
count limits for each variable</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>label_col</code></td>
<td>
<p>a string, the column in <code>spec</code> that contains the labels for
each variable</p>
</td>
</tr>
</table>
<h3>Value</h3>

<p>a modified copy of <code>tbl</code> with the meta data per specification
</p>


<h3>See Also</h3>

<p><code>get_data_spec()</code>, <code>get_key_vars()</code>, <code>get_codelist()</code>
</p>


<h3>Examples</h3>

<pre><code class="language-R">work_dir &lt;- system.file("extdata", package = "sdtmval")
spec &lt;- get_data_spec(domain = "XX",
                      dir = work_dir,
                      filename = "spec.xlsx")
after_meta_data &lt;- assign_meta_data(sdtmval::xx_no_meta_data, spec = spec)
labels &lt;- colnames(after_meta_data) |&gt;
  purrr::map(~ attr(after_meta_data[[.]], "label")) |&gt;
  unlist()
lengths &lt;- colnames(after_meta_data) |&gt;
  purrr::map(~ attr(after_meta_data[[.]], "width")) |&gt;
  unlist()
data.frame(
  column = colnames(after_meta_data),
  labels = labels,
  lengths = lengths
)

</code></pre>


</div>