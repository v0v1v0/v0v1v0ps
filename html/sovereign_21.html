<div class="container">

<table style="width: 100%;"><tr>
<td>RVAR</td>
<td style="text-align: right;">R Documentation</td>
</tr></table>
<h2>Estimate regime-dependent VAR, SVAR, or Proxy-SVAR</h2>

<h3>Description</h3>

<p>Estimate a regime-dependent VAR (i.e. a state-dependent VAR), with an exogenous state indicator, of the specification:
</p>
<p style="text-align: center;"><code class="reqn">Y_{t+1} = X_t \beta_{s_t} + \epsilon_t</code>
</p>

<p>where <em>t</em> is the time index, <em>Y</em> is the set of outcome vectors, <em>X</em> the design matrix (of <em>p</em> lagged values of Y), and
<em>s</em> is a mutually exclusive state of the world observed at time <em>t</em>. When the regime vector is not supplied by the user, then a two-state
regime series is estimated via random forest.
</p>


<h3>Usage</h3>

<pre><code class="language-R">RVAR(
  data,
  horizon = 10,
  freq = "month",
  type = "const",
  p = 1,
  lag.ic = NULL,
  lag.max = NULL,
  regime = NULL,
  regime.method = "rf",
  regime.n = 2,
  structure = "short",
  instrument = NULL,
  instrumented = NULL
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr style="vertical-align: top;">
<td><code>data</code></td>
<td>
<p>data.frame, matrix, ts, xts, zoo: Endogenous regressors</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>horizon</code></td>
<td>
<p>int: forecast horizons</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>freq</code></td>
<td>
<p>string: frequency of data ('day', 'week', 'month', 'quarter', or 'year')</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>type</code></td>
<td>
<p>string: type of deterministic terms to add ('none', 'const', 'trend', or 'both')</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>p</code></td>
<td>
<p>int: lags</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>lag.ic</code></td>
<td>
<p>string: information criterion to choose the optimal number of lags ('AIC' or 'BIC')</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>lag.max</code></td>
<td>
<p>int: maximum number of lags to test in lag selection</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>regime</code></td>
<td>
<p>string: name or regime assignment vector in the design matrix (data)</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>regime.method</code></td>
<td>
<p>string: regime assignment technique ('rf', 'kmeans', 'EM', or 'BP')</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>regime.n</code></td>
<td>
<p>int: number of regimes to estimate (applies to kmeans and EM)</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>structure</code></td>
<td>
<p>string: type of structural identification strategy to use in model analysis (NA, 'short', 'IV', or 'IV-short')</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>instrument</code></td>
<td>
<p>string: name of instrumental variable contained in the data matrix</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>instrumented</code></td>
<td>
<p>string: name of variable to be instrumented in IV and IV-short procedure; default is the first non-date variable in data</p>
</td>
</tr>
</table>
<h3>Details</h3>

<p>The regime-dependent VAR is a generalization of the popular threshold VAR - which trades off estimating a threshold value for an
endogenous variable for accepting an exogenous regime that can be based on information from inside or outside of the system, with or without parametric
assumptions, and with or without timing restrictions. Moreover, the RVAR may be extended to include structural shocks, including the use of instrumental
variables.
</p>
<p><strong>State dependence.</strong> The RVAR augments the traditional VAR by allowing state-dependence in the coefficient matrix. The RVAR differs from the more common threshold VAR (TVAR), due
to the fact that states are exegonesouly determined. As a result, the states (i.e. regimes) do not need to be based on information inside the model, moreover, regimes can be
determined by any process the user determines best fits their needs. For example, regimes based on NBER dated recessions and expansions are based on a judgmental process
considering hundreds of series, potentially none of which are in the VAR being modeled. Alternatively, a user may use unsupervised machine learning to assign regimes - this is
the process the <code>sovereign::regimes</code> function facilitates.
</p>
<p><strong>Structural shocks.</strong> See Sims (1980) for details regarding the baseline vector-autoregression (VAR) model. The VAR may be augmented to become a structural VAR (SVAR) with one of three different structural identification strategies:
</p>

<ol>
<li>
<p> short-term impact restrictions via Cholesky decomposition, see Christiano et al (1999) for details <strong>(structure = 'short')</strong>
</p>
</li>
<li>
<p> external instrument identification, i.e. a Proxy-SVAR strategy, see Mertens and Ravn (2013) for details <strong>(structure = 'IV')</strong>
</p>
</li>
<li>
<p> or a combination of short-term and IV identification via Lunsford (2015) <strong>(structure = 'IV-short')</strong>
</p>
</li>
</ol>
<p>Note that including structure does not change the estimation of model coefficients or forecasts, but does change impulse response functions, forecast error variance decomposition,
and historical decompositions. Historical decompositions will not be available for models using the 'IV' structure. Additionally note that only one instrument may be used in this
estimation routine.
</p>


<h3>Value</h3>

<p>List of lists, where each regime is a list with items:
</p>

<ol>
<li>
<p> data: data.frame with endogenous variables and 'date' column.
</p>
</li>
<li>
<p> model: list with data.frame of model coefficients (in psuedo-companion form), data.frame of coefficient standard errors, integer of lags p, integer of horizons, string of frequency, string of deterministic term type, numeric of log-likelihood, regime indicator
</p>
</li>
<li>
<p> forecasts: list of data.frames per horizon; data.frame with column for date (day the forecast was made), forecast.date (the date being forecasted), target (variable forecasted), and forecast
</p>
</li>
<li>
<p> residuals: list of data.frames per horizon; data.frame of residuals
</p>
</li>
<li>
<p> structure: string denoting which structural identification strategy will be used in analysis  (or NA)
</p>
</li>
<li>
<p> instrument: data.frame with 'date' column and 'instrument' column (or NULL)
</p>
</li>
<li>
<p> instrumented: string denoting which column will be instrumted in 'IV' and 'IV-short' strategies (or NULL)
</p>
</li>
</ol>
<h3>References</h3>


<ol>
<li>
<p> Christiano, Lawrence, Martin Eichenbaum, and Charles Evans "<a href="https://www.sciencedirect.com/science/article/pii/S1574004899010058">Monetary policy shocks: What have we learned and to what end?</a>" Handbook of Macroeconomics, Vol 1, Part A, 1999.
</p>
</li>
<li>
<p> Lunsford, Kurt "<a href="https://papers.ssrn.com/sol3/papers.cfm?abstract_id=2699452#">Identifying Structural VARs with a Proxy Variable and a Test for a Weak Proxy</a>" 2015.
</p>
</li>
<li>
<p> Mertens, Karel and Morten Ravn "<a href="https://www.aeaweb.org/articles?id=10.1257/aer.103.4.1212">The Dynamic Effects of Personal and Corporate Income Tax Changes in the United States</a>" 2013.
</p>
</li>
<li>
<p> Sims, Christopher "<a href="https://www.jstor.org/stable/1912017">Macroeconomics and Reality</a>" 1980.
</p>
</li>
</ol>
<h3>See Also</h3>

<p><code>VAR()</code>
</p>
<p><code>RVAR()</code>
</p>
<p><code>IRF()</code>
</p>
<p><code>FEVD()</code>
</p>
<p><code>HD()</code>
</p>


<h3>Examples</h3>

<pre><code class="language-R">

 # simple time series
 AA = c(1:100) + rnorm(100)
 BB = c(1:100) + rnorm(100)
 CC = AA + BB + rnorm(100)
 date = seq.Date(from = as.Date('2000-01-01'), by = 'month', length.out = 100)
 Data = data.frame(date = date, AA, BB, CC)
 Data = dplyr::mutate(Data, reg = dplyr::if_else(AA &gt; median(AA), 1, 0))

 # estimate regime-dependent VAR
  rvar =
    sovereign::RVAR(
      data = Data,
      horizon = 10,
      freq = 'month',
      regime.method = 'rf',
      regime.n = 2,
      lag.ic = 'BIC',
      lag.max = 4)

 # impulse response functions
 rvar.irf = sovereign::rvar_irf(rvar)

 # forecast error variance decomposition
 rvar.fevd = sovereign::rvar_fevd(rvar)

 # historical shock decomposition
 rvar.hd = sovereign::rvar_hd(rvar)



</code></pre>


</div>