<div class="container">

<table style="width: 100%;"><tr>
<td>modulationSpectrumFragment</td>
<td style="text-align: right;">R Documentation</td>
</tr></table>
<h2>Modulation spectrum per fragment</h2>

<h3>Description</h3>

<p>Internal soundgen function.
</p>


<h3>Usage</h3>

<pre><code class="language-R">modulationSpectrumFragment(
  sound,
  samplingRate,
  specSource = "STFT",
  audSpec_pars = NULL,
  msType = c("2D", "1D")[1],
  windowLength,
  windowLength_points,
  step,
  step_points,
  lowestFreq,
  wn = "hanning",
  zp = 0,
  specMethod = c("spec", "meanspec")[2],
  logSpec = FALSE,
  logMPS = FALSE,
  power = 1,
  normalize = TRUE
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr style="vertical-align: top;">
<td><code>sound</code></td>
<td>
<p>numeric vector</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>samplingRate</code></td>
<td>
<p>sampling rate of <code>x</code> (only needed if <code>x</code> is a
numeric vector)</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>specSource</code></td>
<td>
<p>'STFT' = Short-Time Fourier Transform; 'audSpec' = a bank
of bandpass filters (see <code>audSpectrogram</code>)</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>audSpec_pars</code></td>
<td>
<p>parameters for extracting an auditory spectrogram if
<code>specType = 'audSpec'</code>. If <code>specType = 'STFT'</code>, these settings
have no effect</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>msType</code></td>
<td>
<p>'2D' = two-dimensional Fourier transform of a spectrogram; '1D'
= separately calculated spectrum of each frequency band</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>windowLength, step, wn, zp</code></td>
<td>
<p>parameters for extracting a spectrogram if
<code>specType = 'STFT'</code>. Window length and step are specified in ms (see
<code>spectrogram</code>). If <code>specType = 'audSpec'</code>, these settings
have no effect</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>specMethod</code></td>
<td>
<p>the function to call when calculating the spectrum of each
frequency band (only used when <code>msType = '1D'</code>); 'meanspec' is faster
and less noisy, whereas 'spec' produces higher resolution</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>logSpec</code></td>
<td>
<p>if TRUE, the spectrogram is log-transformed prior to taking 2D
FFT</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>logMPS</code></td>
<td>
<p>if TRUE, the modulation spectrum is log-transformed prior to
calculating roughness</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>power</code></td>
<td>
<p>raise modulation spectrum to this power (eg power = 2 for ^2, or
"power spectrum")</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>normalize</code></td>
<td>
<p>if TRUE, the modulation spectrum of each analyzed fragment
<code>maxDur</code> in duration is separately normalized to have max = 1</p>
</td>
</tr>
</table>
<h3>Examples</h3>

<pre><code class="language-R">s = soundgen(amFreq = 25, amDep = 100)
ms = soundgen:::modulationSpectrumFragment(s, 16000,
  windowLength = 50, windowLength_points = .05 * 16000,
  step = 5, step_points = .005 * 16000)
image(as.numeric(colnames(ms$ms_half)), as.numeric(rownames(ms$ms_half)),
      t(log(ms$ms_half)))
</code></pre>


</div>