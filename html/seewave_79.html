<div class="container">

<table style="width: 100%;"><tr>
<td>lts</td>
<td style="text-align: right;">R Documentation</td>
</tr></table>
<h2>Long-term spectrogram</h2>

<h3>Description</h3>

<p>A spectrogram computed over several survey files obtained
with a Wildlife Acoustics SongMeter recorder</p>


<h3>Usage</h3>

<pre><code class="language-R">lts(dir, f, wl = 512,
wn = "hanning", ovlp = 0, rmoffset = TRUE, FUN = mean, col = spectro.colors(30),
fftw = FALSE, norm = FALSE, verbose = TRUE,
tlab = "Time", ntann = NULL, flab = "Frequency (kHz)",
recorder = c("songmeter", "audiomoth"), plot = TRUE, ...)
</code></pre>


<h3>Arguments</h3>

<table>
<tr style="vertical-align: top;">
<td><code>dir</code></td>
<td>
<p>a character vector, the path to the directory where the
.wav files are stored or directly the names of the .wav files to be processed.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>f</code></td>
<td>
<p>sampling frequency of <code>wave</code> (in Hz). Does not need to
be specified if embedded in the .wav files contained in <code>dir</code>.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>wl</code></td>
<td>
<p>window length for the analysis
(even number of points) (by default = 512).</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>wn</code></td>
<td>
<p>window name, see <code>ftwindow</code> (by default
<code>"hanning"</code>).</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>ovlp</code></td>
<td>
<p>overlap between two successive windows (in %).</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>rmoffset</code></td>
<td>
<p>a logical to sepcify whether DC offset should be
removed. By default <code>TRUE</code>.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>FUN</code></td>
<td>
<p>the function to apply to compute the successive frequency spectra, by
default <code>mean</code> for a mean spectrum but could be other as
<code>median</code> or <code>var</code> for a median spectrum or variance spectrum.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>col</code></td>
<td>
<p>a list of colors or the color palette with a number of colors</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>fftw</code></td>
<td>
<p>if <code>TRUE</code> calls the function <code>FFT</code> of the
library <code>fftw</code>. See Notes.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>norm</code></td>
<td>
<p>a logical, to specify if each mean
spectrum should be normalised between 0 and 1 (default <code>FALSE</code>)
before to concatenate the image.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>verbose</code></td>
<td>
<p>a logical, if <code>TRUE</code> (default) the file number and name
processed are displayed in the console.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>tlab</code></td>
<td>
<p>label of the time axis.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>ntann</code></td>
<td>
<p>a numeric of length 1, the number of axis annotations (all
annotations by default).</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>flab</code></td>
<td>
<p>label of the frequency axis.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>recorder</code></td>
<td>
<p>the type of automatic recorder used, either a Wildlife
SongMeter or a Open Audio deveices Audiomoth.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>plot</code></td>
<td>
<p>logical, if <code>TRUE</code> plots the spectrogram
(by default <code>TRUE</code>).</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>...</code></td>
<td>
<p>other <code>image</code> graphical parameters.</p>
</td>
</tr>
</table>
<h3>Details</h3>

<p>The function reads each .wav file and computes its mean spectrum with
<code>meanspec</code>. The successive mean spectra are then
concatenated into a single image with the function
<code>image</code>.
The parameters <code>wl</code>, <code>ovlp</code>, and <code>wn</code> are those of the
function <code>meanspec</code>.
</p>


<h3>Value</h3>

<p>This function returns a list of three items:
</p>
<table>
<tr style="vertical-align: top;">
<td><code>time</code></td>
<td>
<p>a numeric vector corresponding to the time axis.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>freq</code></td>
<td>
<p>a numeric vector corresponding to the frequency axis.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>amp</code></td>
<td>
<p>a numeric or a complex matrix corresponding to the amplitude values.
Each column is a Fourier transform of length <code>wl/2</code>.</p>
</td>
</tr>
</table>
<h3>Author(s)</h3>

<p>Jerome Sueur</p>


<h3>See Also</h3>

<p><code>spectro</code>, <code>meanspec</code>,
<code>image</code>,
<code>spectro3D</code>, <code>ggspectro</code>,
<code>songmeter</code>, <code>audiomoth</code>
</p>


<h3>Examples</h3>

<pre><code class="language-R">## Not run: 
## if 'dir' contains a set of files recorded with a Wildlife Acoustics
# songmeter recorder then a direct way to obtain
# the spectrogram of all .wav files is
dir &lt;- "pathway-to-directory-containing-wav-files"
lts(dir)
# to normalise each mean spectrum
lts(dir, norm=TRUE)
# to change the STFT parameters used to obtain each mean spectrum
lts(dir, wl=1024, wn="hamming", ovlp=50)
# to change the colors and the number of time labels and to make it quiet
lts(dir, col=cm.colors(20), ntann=10, verbose=FALSE)
## direct use of files names stored in the working directory
files &lt;- c("S4A09154_20190213_150000.wav", "S4A09154_20190213_153000.wav",
"S4A09154_20190213_160000.wav", "S4A09154_20190213_163000.wav",
"S4A09154_20190213_170000.wav", "S4A09154_20190213_173000.wav",
"S4A09154_20190213_180000.wav", "S4A09154_20190213_183000.wav",
"S4A09154_20190213_190000.wav", "S4A09154_20190213_193000.wav")
lts(files)

## End(Not run)
</code></pre>


</div>