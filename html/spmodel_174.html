<div class="container">

<table style="width: 100%;"><tr>
<td>spautorRF</td>
<td style="text-align: right;">R Documentation</td>
</tr></table>
<h2>Fit random forest spatial residual models</h2>

<h3>Description</h3>

<p>Fit random forest residual spatial linear models
for areal data (i.e., spatial autoregressive models) using
random forest to fit the mean and a spatial linear model to fit the residuals.
The spatial linear model fit to the residuals can incorporate
a variety of estimation methods, allowing for random effects,
partition factors, and row standardization.
</p>


<h3>Usage</h3>

<pre><code class="language-R">spautorRF(formula, data, ...)
</code></pre>


<h3>Arguments</h3>

<table>
<tr style="vertical-align: top;">
<td><code>formula</code></td>
<td>
<p>A two-sided linear formula describing the fixed effect structure
of the model, with the response to the left of the <code>~</code> operator and
the terms on the right, separated by <code>+</code> operators.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>data</code></td>
<td>
<p>A data frame or <code>sf</code> object object that contains
the variables in <code>fixed</code>, <code>random</code>, and <code>partition_factor</code>
as well as geographical information. If an <code>sf</code> object is
provided with <code>POINT</code> geometries, the x-coordinates and y-coordinates
are used directly. If an <code>sf</code> object is
provided with <code>POLYGON</code> geometries, the x-coordinates and y-coordinates
are taken as the centroids of each polygon.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>...</code></td>
<td>
<p>Additional named arguments to <code>ranger::ranger()</code> or <code>spautor()</code>.</p>
</td>
</tr>
</table>
<h3>Details</h3>

<p>The random forest residual spatial linear model is described by
Fox et al. (2020). A random forest model is fit to the mean portion of the
model specified by <code>formula</code> using <code>ranger::ranger()</code>. Residuals
are computed and used as the response variable in an intercept-only spatial
linear model fit using <code>spautor()</code>. This model object is intended for use with
<code>predict()</code> to perform prediction, also called random forest
regression Kriging.
</p>


<h3>Value</h3>

<p>A list with several elements to be used with <code>predict()</code>. These
elements include the function call (named <code>call</code>), the random forest object
fit to the mean (named <code>ranger</code>),
the spatial linear model object fit to the residuals
(named <code>spautor</code> or <code>spautor_list</code>), and an object can contain data for
locations at which to predict (called <code>newdata</code>). The <code>newdata</code>
object contains the set of
observations in <code>data</code> whose response variable is <code>NA</code>.
If <code>spcov_type</code> or <code>spcov_initial</code> (which are passed to <code>spautor()</code>)
are length one, the list has class <code>spautorRF</code> and the spatial linear
model object fit to the residuals is called <code>spautor</code>, which has
class <code>spautor</code>. If
<code>spcov_type</code> or <code>spcov_initial</code> are length greater than one, the
list has class <code>spautorRF_list</code> and the spatial linear model object
fit to the residuals is called <code>spautor_list</code>, which has class <code>spautor_list</code>.
and contains several objects, each with class <code>spautor</code>.
</p>


<h3>References</h3>

<p>Fox, E.W., Ver Hoef, J. M., &amp; Olsen, A. R. (2020). Comparing spatial
regression to random forests for large environmental data sets.
<em>PloS one</em>, 15(3), e0229509.
</p>


<h3>Examples</h3>

<pre><code class="language-R">
seal$var &lt;- rnorm(NROW(seal)) # add noise variable
sprfmod &lt;- spautorRF(log_trend ~ var, data = seal, spcov_type = "car")
predict(sprfmod)

</code></pre>


</div>