<div class="container">

<table style="width: 100%;"><tr>
<td>smd</td>
<td style="text-align: right;">R Documentation</td>
</tr></table>
<h2>Compute Standardized Mean Difference</h2>

<h3>Description</h3>

<p>Computes the standardized mean differnce (SMD) between two groups.
</p>
<p style="text-align: center;"><code class="reqn">
 d = \sqrt{D' S^{-1} D}
</code>
</p>

<p>where <code class="reqn">D</code> is a vector of differences between group 1 and 2 and <code class="reqn">S</code> is
the covariance matrix of these differences. If <code class="reqn">D</code> is length 1, the result
is multplied by <code class="reqn">sign(D)</code>.
</p>
<p>In the case of a <code>numeric</code> or <code>integer</code> variable, this is equivalent
to:
</p>
<p style="text-align: center;"><code class="reqn">
  d = \frac{\bar{x}_1 - \bar{x}_2}{\sqrt{(s^2_1 + s^2_2)/2}}
</code>
</p>

<p>where <code class="reqn">\bar{x}_g</code> is the sample mean for group <code class="reqn">g</code> and <code class="reqn">s^2_g</code> is
the sample variance.
</p>
<p>For a <code>logical</code> or <code>factor</code> with only two levels, the equation above is
<code class="reqn">\bar{x}_g = \hat{p}_g</code>, i.e. the sample proportion and <code class="reqn">s^2_g = \hat{p}_g(1 - \hat{p}_g)</code>.
</p>
<p>When using the SMD to evaluate the effectiveness of weighting in achieving
covariate balance, it is important to isolate the change in SMD before and
after weighting to the change in mean difference, so the denominator (covariance matrix)
must be held constant (Stuart 2008, <a href="https://doi.org/10.1002/sim.3207">doi:10.1002/sim.3207</a>).
By default, the unweighted covariance matrix is used to compute SMD in both
the unweighted and weighted case. If the weights are not being used to adjust
for covariate imbalance (e.g. case weights), the <code>unwgt.var</code> argument
can be set to <code>FALSE</code> to use the weighted covariance matrix as the denominator.
</p>


<h3>Usage</h3>

<pre><code class="language-R">smd(x, g, w, std.error = FALSE, na.rm = FALSE, gref = 1L, unwgt.var = TRUE)

## S4 method for signature 'character,ANY,missing'
smd(x, g, w, std.error = FALSE, na.rm = FALSE, gref = 1L, unwgt.var = TRUE)

## S4 method for signature 'character,ANY,numeric'
smd(x, g, w, std.error = FALSE, na.rm = FALSE, gref = 1L, unwgt.var = TRUE)

## S4 method for signature 'logical,ANY,missing'
smd(x, g, w, std.error = FALSE, na.rm = FALSE, gref = 1L, unwgt.var = TRUE)

## S4 method for signature 'logical,ANY,numeric'
smd(x, g, w, std.error = FALSE, na.rm = FALSE, gref = 1L, unwgt.var = TRUE)

## S4 method for signature 'matrix,ANY,missing'
smd(x, g, w, std.error = FALSE, na.rm = FALSE, gref = 1L, unwgt.var = TRUE)

## S4 method for signature 'matrix,ANY,numeric'
smd(x, g, w, std.error = FALSE, na.rm = FALSE, gref = 1L, unwgt.var = TRUE)

## S4 method for signature 'list,ANY,missing'
smd(x, g, w, std.error = FALSE, na.rm = FALSE, gref = 1L, unwgt.var = TRUE)

## S4 method for signature 'list,ANY,numeric'
smd(x, g, w, std.error = FALSE, na.rm = FALSE, gref = 1L, unwgt.var = TRUE)

## S4 method for signature 'data.frame,ANY,missing'
smd(x, g, w, std.error = FALSE, na.rm = FALSE, gref = 1L, unwgt.var = TRUE)

## S4 method for signature 'data.frame,ANY,numeric'
smd(x, g, w, std.error = FALSE, na.rm = FALSE, gref = 1L, unwgt.var = TRUE)
</code></pre>


<h3>Arguments</h3>

<table>
<tr style="vertical-align: top;">
<td><code>x</code></td>
<td>
<p>a <code>vector</code> or <code>matrix</code> of values</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>g</code></td>
<td>
<p>a vector of at least 2 groups to compare. This should coercable to a
<code>factor</code>.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>w</code></td>
<td>
<p>a vector of <code>numeric</code> weights (optional)</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>std.error</code></td>
<td>
<p>Logical indicator for computing standard errors using
<code>compute_smd_var</code>. Defaults to <code>FALSE</code>.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>na.rm</code></td>
<td>
<p>Remove <code>NA</code> values from <code>x</code>? Defaults to <code>FALSE</code>.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>gref</code></td>
<td>
<p>an integer indicating which level of <code>g</code> to use as the reference
group. Defaults to <code>1</code>.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>unwgt.var</code></td>
<td>
<p>Use unweighted or weighted covariance matrix. Defaults to <code>TRUE</code></p>
</td>
</tr>
</table>
<h3>Value</h3>

<p>a <code>data.frame</code> containing standardized mean differences between
levels of <code>g</code> for values of <code>x</code>. The <code>data.frame</code> contains
the columns:
</p>

<ul>
<li> <p><code>term</code>: the level being comparing to the reference level
</p>
</li>
<li> <p><code>estimate</code>: SMD estimates
</p>
</li>
<li> <p><code>std.error</code>: (if <code>std.error = TRUE</code>) SMD standard error estimates
</p>
</li>
</ul>
<h3>Examples</h3>

<pre><code class="language-R">x &lt;- rnorm(100)
g &lt;- rep(1:2, each = 50)
smd(x, g)
</code></pre>


</div>