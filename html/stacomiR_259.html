<div class="container">

<table style="width: 100%;"><tr>
<td>report_mig-class</td>
<td style="text-align: right;">R Documentation</td>
</tr></table>
<h2>Migration report for one DC, one species and one stage</h2>

<h3>Description</h3>

<p>This class performs a migration summary. A migration monitoring operation can correspond to a single
horodate (in the case of some video monitoring operation) or comprise a period which does not necessarily
span a full day. The daily migration is calculated by splitting the operation between days, and the migration is either
grouped or split according to the lenth of the different time spans.
</p>


<h3>Slots</h3>


<dl>
<dt><code>dc</code></dt>
<dd>
<p>Object of class ref_dc-class: the control device</p>
</dd>
<dt><code>taxa</code></dt>
<dd>
<p>Object of class ref_taxa-class: the species</p>
</dd>
<dt><code>stage</code></dt>
<dd>
<p>Object of class ref_stage-class : the stage of the fish</p>
</dd>
<dt><code>timestep</code></dt>
<dd>
<p>Object of class ref_timestep_daily-class : the time step
constrained to daily value and 365 days</p>
</dd>
<dt><code>data</code></dt>
<dd>
<p>Object of class <code>data.frame</code> with data filled in from the connect method</p>
</dd>
<dt><code>calcdata</code></dt>
<dd>
<p>A "list" of calculated daily data, one per dc, filled in by the calcule method</p>
</dd>
<dt><code>coef_conversion</code></dt>
<dd>
<p>A data.frame of daily weight to number conversion coefficients, filled in by the connect
method if any weight are found in the data slot.</p>
</dd>
<dt><code>time.sequence</code></dt>
<dd>
<p>Object of class <code>POSIXct</code> : a time sequence of days generated by the calcule method</p>
</dd>
</dl>
<h3>Note</h3>

<p>In practise, the report_mig class uses methods (calcule, connect...) from the more elaborate report_mig_mult-class
</p>


<h3>Author(s)</h3>

<p>Cedric Briand <a href="mailto:cedric.briand@eptb-vilaine.fr">cedric.briand@eptb-vilaine.fr</a>
</p>


<h3>See Also</h3>

<p>Other report Objects: 
<code>report_annual-class</code>,
<code>report_dc-class</code>,
<code>report_df-class</code>,
<code>report_env-class</code>,
<code>report_ge_weight-class</code>,
<code>report_mig_char-class</code>,
<code>report_mig_env-class</code>,
<code>report_mig_interannual-class</code>,
<code>report_mig_mult-class</code>,
<code>report_sample_char-class</code>,
<code>report_sea_age-class</code>,
<code>report_silver_eel-class</code>,
<code>report_species-class</code>
</p>


<h3>Examples</h3>

<pre><code class="language-R">stacomi(database_expected=FALSE) 
# If you have a working database
# the following line of code will create the r_mig dataset from the iav (default) 
# schema in the database
## Not run: 	
	stacomi(database_expected=TRUE)	
	if (interactive()){
		if (!exists("user")){
			user &lt;- readline(prompt="Enter user: ")
			password &lt;- readline(prompt="Enter password: ")	
		}	
	}
	options(					
			stacomiR.dbname = "bd_contmig_nat",
			stacomiR.host ="localhost",
			stacomiR.port = "5432",
			stacomiR.user = user,
			stacomiR.user = password						
	)	
  stacomi(
	  database_expected=TRUE)	
  r_mig=new("report_mig")
  r_mig=choice_c(r_mig,
	  dc=5,
	  taxa=c("Chelon ramada"),
	  stage=c("IND"),
	  datedebut="2015-01-01",
	  datefin="2015-12-31")
  r_mig&lt;-charge(r_mig)
  # launching charge will also load classes associated with the report
  # e.g. report_ope, report_df, report_dc
  r_mig&lt;-connect(r_mig)
  ########################
# calculations
  ########################
  r_mig&lt;-calcule(r_mig,silent=TRUE)

## End(Not run)
########################
# loading data
## use the following to get the raw data loaded by the connect method
# not shown there as the database and program might not be installed
# All three classes report... were created by the charge and connect method 
# of report_mig_mult
# in the previous example
################################
data("r_mig")
data("r_mig_ope")
assign("report_ope",r_mig_ope,envir=envir_stacomi)
data("r_mig_df")
assign("report_df",r_mig_df,envir=envir_stacomi)
data("r_mig_dc")
assign("report_dc",r_mig_dc,envir=envir_stacomi)


#Individual plot for all DC (standard), taxa and stage where data present
#silent argument to stop all messages
plot(r_mig,plot.type="standard",silent=TRUE)
#cumulated migration at the station (all stages and DC grouped)
plot(r_mig,plot.type="step")

# data will be written in the data directory specified in datawd argument to stacomi default "~"
#file

## Not run: 
  summary(r_mig,silent=TRUE)

## End(Not run)
# this will write the daily report for later in in the reportnMigrationInterannuelle-class
## Not run: 
  write_database(r_mig,silent=TRUE,dbname="bd_contmig_nat",host="localhost",port=5432)

## End(Not run)
</code></pre>


</div>