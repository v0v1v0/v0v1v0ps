<div class="container">

<table style="width: 100%;"><tr>
<td>mukey.wcs</td>
<td style="text-align: right;">R Documentation</td>
</tr></table>
<h2>Get Map Unit Key (<code>mukey</code>) grid from SoilWeb Web Coverage Service (WCS)</h2>

<h3>Description</h3>

<p>Download chunks of the gNATSGO, gSSURGO, RSS, and STATSGO2 map unit key grid via bounding-box from the SoilWeb WCS.
</p>


<h3>Usage</h3>

<pre><code class="language-R">mukey.wcs(
  aoi,
  db = c("gNATSGO", "gSSURGO", "RSS", "STATSGO", "PR_SSURGO", "HI_SSURGO"),
  res = 30,
  quiet = FALSE
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr style="vertical-align: top;">
<td><code>aoi</code></td>
<td>
<p>area of interest (AOI) defined using either a <code>Spatial*</code>, <code>RasterLayer</code>, <code>sf</code>, <code>sfc</code> or <code>bbox</code> object, or a <code>list</code>, see details</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>db</code></td>
<td>
<p>name of the gridded map unit key grid to access, should be either 'gNATSGO', 'gSSURGO', 'STATSGO', 'HI_SSURGO', or 'PR_SSURGO' (case insensitive)</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>res</code></td>
<td>
<p>grid resolution, units of meters. The native resolution of gNATSGO and gSSURGO (this WCS) is 30m; STATSGO (this WCS) is 300m; and Raster Soil Surveys (RSS) are at 10m resolution. If <code>res</code> is not specified the native resolution of the source is used.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>quiet</code></td>
<td>
<p>logical, passed to <code>curl::curl_download</code> to enable / suppress URL and progress bar for download.</p>
</td>
</tr>
</table>
<h3>Details</h3>

<p><code>aoi</code> should be specified as one of: <code>SpatRaster</code>, <code>Spatial*</code>, <code>RasterLayer</code>, <code>sf</code>, <code>sfc</code>, <code>bbox</code> object, OR a <code>list</code> containing:
</p>

<dl>
<dt><code>aoi</code></dt>
<dd>
<p>bounding-box specified as (xmin, ymin, xmax, ymax) e.g. c(-114.16, 47.65, -114.08, 47.68)</p>
</dd>
<dt><code>crs</code></dt>
<dd>
<p>coordinate reference system of BBOX, e.g. 'OGC:CRS84' (EPSG:4326, WGS84 Longitude/Latitude)</p>
</dd>
</dl>
<p>The WCS query is parameterized using a rectangular extent derived from the above AOI specification, after conversion to the native CRS (EPSG:5070) of the WCS grids.
</p>
<p>Databases available from this WCS can be queried using <code>WCS_details(wcs = 'mukey')</code>.
</p>


<h3>Value</h3>

<p>A SpatRaster (or RasterLayer) object containing indexed map unit keys and associated raster attribute table or a try-error if request fails. By default, spatial classes from the <code>terra</code> package are returned. If the input object class is from the <code>raster</code> or <code>sp</code> packages a RasterLayer is returned.
</p>


<h3>Note</h3>

<p>The gNATSGO grid includes raster soil survey map unit keys which are not in SDA.
</p>


<h3>Author(s)</h3>

<p>D.E. Beaudette and A.G. Brown
</p>


<h3>Examples</h3>

<pre><code class="language-R">## Not run: 
library(terra)

res &lt;- mukey.wcs(list(aoi = c(-116.7400, 35.2904, -116.7072, 35.3026), crs = "EPSG:4326"),
                 db = 'gNATSGO', res = 30) 
  
m &lt;- unique(values(res))

prp &lt;- setNames(
  get_SDA_property(
    c("ph1to1h2o_r", "claytotal_r"),
    "weighted average",
    mukeys = m,
    top_depth = 0,
    bottom_depth = 25,
    include_minors = TRUE,
    miscellaneous_areas = FALSE
  )[, c("mukey", "ph1to1h2o_r", "claytotal_r")],
  c("ID",    "pH1to1_0to25", "clay_0to25")
)

levels(res) &lt;- prp
res2 &lt;- catalyze(res)
res2

plot(res2[['pH1to1_0to25']])

## End(Not run)
</code></pre>


</div>