<div class="container">

<table style="width: 100%;"><tr>
<td>sv_interaction</td>
<td style="text-align: right;">R Documentation</td>
</tr></table>
<h2>SHAP Interaction Plot</h2>

<h3>Description</h3>

<p>Plots a beeswarm plot for each feature pair. Diagonals represent the main effects,
while off-diagonals show interactions (multiplied by two due to symmetry).
The colors on the beeswarm plots represent min-max scaled feature values.
Non-numeric features are transformed to numeric by calling <code>data.matrix()</code> first.
The features are sorted in decreasing order of usual SHAP importance.
</p>


<h3>Usage</h3>

<pre><code class="language-R">sv_interaction(object, ...)

## Default S3 method:
sv_interaction(object, ...)

## S3 method for class 'shapviz'
sv_interaction(
  object,
  kind = c("beeswarm", "no"),
  max_display = 7L,
  alpha = 0.3,
  bee_width = 0.3,
  bee_adjust = 0.5,
  viridis_args = getOption("shapviz.viridis_args"),
  color_bar_title = "Row feature value",
  sort_features = TRUE,
  ...
)

## S3 method for class 'mshapviz'
sv_interaction(
  object,
  kind = c("beeswarm", "no"),
  max_display = 7L,
  alpha = 0.3,
  bee_width = 0.3,
  bee_adjust = 0.5,
  viridis_args = getOption("shapviz.viridis_args"),
  color_bar_title = "Row feature value",
  sort_features = TRUE,
  ...
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr style="vertical-align: top;">
<td><code>object</code></td>
<td>
<p>An object of class "(m)shapviz" containing element <code>S_inter</code>.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>...</code></td>
<td>
<p>Arguments passed to <code>ggplot2::geom_point()</code>. For instance,
passing <code>size = 1</code> will produce smaller dots.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>kind</code></td>
<td>
<p>Set to "no" to return the matrix of average absolute SHAP
interactions (or a list of such matrices in case of object of class "mshapviz").
Due to symmetry, off-diagonals are multiplied by two. The default is "beeswarm".</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>max_display</code></td>
<td>
<p>How many features should be plotted?
Set to <code>Inf</code> to show all features. Has no effect if <code>kind = "no"</code>.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>alpha</code></td>
<td>
<p>Transparency of the beeswarm dots. Defaults to 0.3.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>bee_width</code></td>
<td>
<p>Relative width of the beeswarms.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>bee_adjust</code></td>
<td>
<p>Relative bandwidth adjustment factor used in
estimating the density of the beeswarms.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>viridis_args</code></td>
<td>
<p>List of viridis color scale arguments. The default points to the
global option <code>shapviz.viridis_args</code>, which corresponds to
<code>list(begin = 0.25, end = 0.85, option = "inferno")</code>. These values are passed to
<code>ggplot2::scale_color_viridis_c()</code>. For example, to switch to standard viridis,
either change the default with <code>options(shapviz.viridis_args = list())</code> or set
<code>viridis_args = list()</code>.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>color_bar_title</code></td>
<td>
<p>Title of color bar of the beeswarm plot. Set to <code>NULL</code>
to hide the color bar altogether.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>sort_features</code></td>
<td>
<p>Should features be sorted or not? The default is <code>TRUE</code>.</p>
</td>
</tr>
</table>
<h3>Value</h3>

<p>A "ggplot" (or "patchwork") object, or - if <code>kind = "no"</code> - a named
numeric matrix of average absolute SHAP interactions sorted by the average
absolute SHAP values (or a list of such matrices in case of "mshapviz" object).
</p>


<h3>Methods (by class)</h3>


<ul>
<li> <p><code>sv_interaction(default)</code>: Default method.
</p>
</li>
<li> <p><code>sv_interaction(shapviz)</code>: SHAP interaction plot for an object of class "shapviz".
</p>
</li>
<li> <p><code>sv_interaction(mshapviz)</code>: SHAP interaction plot for an object of class "mshapviz".
</p>
</li>
</ul>
<h3>See Also</h3>

<p><code>sv_importance()</code>
</p>


<h3>Examples</h3>

<pre><code class="language-R">dtrain &lt;- xgboost::xgb.DMatrix(
  data.matrix(iris[, -1]), label = iris[, 1], nthread = 1
)
fit &lt;- xgboost::xgb.train(data = dtrain, nrounds = 10, nthread = 1)
x &lt;- shapviz(fit, X_pred = dtrain, X = iris, interactions = TRUE)
sv_interaction(x, kind = "no")
sv_interaction(x, max_display = 2, size = 3)
</code></pre>


</div>