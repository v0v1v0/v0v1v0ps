<div class="container">

<table style="width: 100%;"><tr>
<td>R.t.estimate</td>
<td style="text-align: right;">R Documentation</td>
</tr></table>
<h2>
Calculates the proportion of the treatment effect (the difference in restricted mean survival time at time t) explained by primary outcome information observed up to the landmark time
</h2>

<h3>Description</h3>

<p>Calculates the proportion of the treatment effect (the difference in restricted mean survival time at time t) explained by primary outcome information observed up to the landmark time; also provides standard error estimate and confidence interval.
</p>


<h3>Usage</h3>

<pre><code class="language-R">R.t.estimate(xone, xzero, deltaone, deltazero, t, landmark, std = FALSE, conf.int
 = FALSE, weight.perturb = NULL)
</code></pre>


<h3>Arguments</h3>

<table>
<tr style="vertical-align: top;">
<td><code>xone</code></td>
<td>

<p>numeric vector, observed event times for the primary outcome in the treatment group.
</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>xzero</code></td>
<td>

<p>numeric vector, observed event times for the primary outcome in the control group.
</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>deltaone</code></td>
<td>

<p>numeric vector, event/censoring indicators for the primary outcome in the treatment group.
</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>deltazero</code></td>
<td>

<p>numeric vector, event/censoring indicators for the primary outcome in the control group.
</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>t</code></td>
<td>

<p>time of interest for treatment effect.
</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>landmark</code></td>
<td>

<p>landmark time of interest, <code class="reqn">t_0</code>.
</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>std</code></td>
<td>

<p>TRUE or FALSE; indicates whether standard error estimates should be provided, default is FALSE. Estimates are calculated using perturbation-resampling. Two versions are provided: one that takes the standard deviation of the perturbed estimates (denoted as "sd") and one that takes the median absolute deviation (denoted as "mad"). 
</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>conf.int</code></td>
<td>

<p>TRUE or FALSE; indicates whether 95% confidence intervals should be provided. Confidence intervals are calculated using the percentiles of perturbed estimates, default is FALSE. If this is TRUE, standard error estimates are automatically provided.
</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>weight.perturb</code></td>
<td>

<p>weights used for perturbation resampling.</p>
</td>
</tr>
</table>
<h3>Details</h3>


<p>Let <code class="reqn">G \in \{1,0\}</code> be the randomized treatment indicator, <code class="reqn">T</code> denote the time of the primary outcome of interest, and <code class="reqn">S</code> denote the time of the surrogate outcome. We use potential outcomes notation such that <code class="reqn">T^{(G)}</code> and <code class="reqn">S^{(G)}</code> denote the respective times of the primary and surrogate outcomes under treatment G, for <code class="reqn">G \in \{1, 0\}</code>.  In the absence of censoring, we only observe <code class="reqn">(T, S)=(T^{(1)}, S^{(1)})</code> or <code class="reqn">(T^{(0)}, S^{(0)})</code> for each individual depending on whether <code class="reqn">G=1</code> or <code class="reqn">0</code>. Due to censoring, data consist of <code class="reqn">n = n_1 + n_0</code> independent observations <code class="reqn">\{X_{gi}, \delta_{gi}, I(S_{gi}&lt; t_0)I(X_{gi} &gt; t_0),  S_{gi}\wedge t_0 I(X_{gi} &gt; t_0), i=1,...,n_g, g = 1,0\}</code>, where <code class="reqn">X_{gi} = T_{gi}\wedge C_{ gi}</code>, <code class="reqn">\delta_{gi} = I(T_{gi} &lt; C_{gi})</code>, <code class="reqn">C_{gi}</code> denotes the censoring time, <code class="reqn">T_{gi}</code> denotes the time of the primary outcome, <code class="reqn">S_{gi}</code> denotes the time of the surrogate outcome, <code class="reqn">\{(T_{gi}, C_{gi}, S_{gi}), i = 1, ..., n_g\}</code> are identically distributed within treatment group, and <code class="reqn">t_0</code> is the landmark time of interest.
</p>
<p>The proportion of treatment effect explained by primary outcome information observed up to the landmark time, <code class="reqn">t_0</code>, is defined as <code class="reqn">R_T(t, t_0) = 1-\Delta_T(t,t_0) / \Delta(t)</code> where 
</p>
<p style="text-align: center;"><code class="reqn">\Delta_T(t,t_0)   =  P(T^{(0)} &gt; t_0) E\{T^{(1)} \wedge t - T^{(0)} \wedge t \mid T &gt; t_0 \}</code>
</p>
<p> and <code class="reqn">\Delta(t)</code> is the treatment effect on the primary outcome, defined in the documentation for delta.estimate. The quantity <code class="reqn">\Delta_T(t,t_0)</code> is estimated using </p>
<p style="text-align: center;"><code class="reqn">\hat{\Delta}_T(t,t_0) = n_0^{-1} \sum_{i=1}^{n_0} I(X_{0i} &gt; t_0) /\hat{W}_0^C(t_0)  \{\hat{\nu}_{1}(t|t_0) - \hat{\nu}_{0}(t|t_0) \}</code>
</p>
<p> where <code class="reqn">\hat{W}^C_0(t)</code> is the Kaplan-Meier estimator of <code class="reqn">P(C_{gi} \ge t)</code>, <code class="reqn">\hat{\nu}_{0}(t|t_0)</code> is defined in the documentation for R.q.event and <code class="reqn">\hat{\nu}_{1}(t|t_0)</code> is obtained by replacing <code class="reqn">0</code> with <code class="reqn">1</code>.
</p>


<h3>Value</h3>

<p>A list is returned:                
</p>
<table>
<tr style="vertical-align: top;">
<td><code>delta </code></td>
<td>
<p>the estimate, <code class="reqn">\hat{\Delta}(t)</code>, described in delta.estimate documentation.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>delta.t </code></td>
<td>
<p>the estimate, <code class="reqn">\hat{\Delta}_T(t,t_0)</code>, described above.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>R.t </code></td>
<td>
<p>the estimate, <code class="reqn">\hat{R}_T(t,t_0)</code>, described above.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>delta.sd </code></td>
<td>
<p>the standard error estimate of <code class="reqn">\hat{\Delta}(t)</code>; if std = TRUE or conf.int = TRUE.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>delta.mad </code></td>
<td>
<p>the standard error estimate of <code class="reqn">\hat{\Delta}(t)</code> using the median absolute deviation; if std = TRUE or conf.int = TRUE.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>delta.t.sd</code></td>
<td>
<p>the standard error estimate of <code class="reqn">\hat{\Delta}_T(t,t_0)</code>; if std = TRUE or conf.int = TRUE.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>delta.t.mad</code></td>
<td>
<p>the standard error estimate of <code class="reqn">\hat{\Delta}_T(t,t_0)</code> using the median absolute deviation; if std = TRUE or conf.int = TRUE.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>R.t.sd </code></td>
<td>
<p>the standard error estimate of <code class="reqn">\hat{R}_T(t,t_0)</code>; if std = TRUE or conf.int = TRUE.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>R.t.mad </code></td>
<td>
<p>the standard error estimate of <code class="reqn">\hat{R}_T(t,t_0)</code> using the median absolute deviation; if std = TRUE or conf.int = TRUE.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>conf.int.delta</code></td>
<td>
<p>a vector of size 2; the 95% confidence interval for <code class="reqn">\hat{\Delta}(t)</code> based on sample quantiles of the perturbed values; if conf.int = TRUE.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>conf.int.delta.t</code></td>
<td>
<p>a vector of size 2; the 95% confidence interval for <code class="reqn">\hat{\Delta}_T(t,t_0)</code> based on sample quantiles of the perturbed values; if conf.int = TRUE.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>conf.int.R.t</code></td>
<td>
<p>a vector of size 2; the 95% confidence interval for <code class="reqn">\hat{R}_T(t,t_0)</code> based on sample quantiles of the perturbed values; if conf.int = TRUE.</p>
</td>
</tr>
</table>
<h3>Author(s)</h3>

<p>Layla Parast
</p>


<h3>References</h3>

<p>Parast L, Tian L, and Cai T (2020). Assessing the Value of a Censored Surrogate Outcome. Lifetime Data Analysis, 26(2):245-265.</p>


<h3>Examples</h3>

<pre><code class="language-R">data(ExampleData)
names(ExampleData)


R.t.estimate(xone = ExampleData$x1, xzero = ExampleData$x0, deltaone =ExampleData$delta1, 
deltazero = ExampleData$delta0, t = 5, landmark=2)

R.t.estimate(xone = ExampleData$x1, xzero = ExampleData$x0, deltaone = ExampleData$delta1, 
deltazero = ExampleData$delta0, t = 5, landmark=2, std = TRUE, conf.int = TRUE)


</code></pre>


</div>