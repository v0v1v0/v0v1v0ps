<div class="container">

<table style="width: 100%;"><tr>
<td>Persistence</td>
<td style="text-align: right;">R Documentation</td>
</tr></table>
<h2>Compute persistence</h2>

<h3>Description</h3>

<p>Compute a persistence forecast based on a lagged autoregression of 
observational data along the time dimension, with a measure of forecast 
uncertainty (prediction interval) based on Coelho et al., 2004.<br><br></p>


<h3>Usage</h3>

<pre><code class="language-R">Persistence(
  data,
  dates,
  start,
  end,
  ft_start,
  ft_end = ft_start,
  time_dim = "time",
  max_ft = 10,
  nmemb = 1,
  na.action = 10,
  ncores = NULL
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr style="vertical-align: top;">
<td><code>data</code></td>
<td>
<p>A numeric array corresponding to the observational data
including the time dimension along which the autoregression is computed.
The data should start at least 40 time steps (years or days) before 
'start'.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>dates</code></td>
<td>
<p>A sequence of 4-digit integers (YYYY) or string (YYYY-MM-DD) 
in class 'Date' indicating the dates available in the observations.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>start</code></td>
<td>
<p>A 4-digit integer (YYYY) or a string (YYYY-MM-DD) in class 'Date'
indicating the first start date of the persistence forecast. It must be 
between 1850 and 2020.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>end</code></td>
<td>
<p>A 4-digit integer (YYYY) or a string (YYYY-MM-DD) in class 'Date'
indicating the last start date of the persistence forecast. It must be
between 1850 and 2020.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>ft_start</code></td>
<td>
<p>An integer indicating the forecast time for which the 
persistence forecast should be calculated, or the first forecast time of
the average forecast times for which persistence should be calculated.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>ft_end</code></td>
<td>
<p>An (optional) integer indicating the last forecast time of the
average forecast times for which persistence should be calculated in the
case of a multi-timestep average persistence. The default value is 
'ft_start'.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>time_dim</code></td>
<td>
<p>A character string indicating the dimension along which to 
compute the autoregression. The default value is 'time'.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>max_ft</code></td>
<td>
<p>An integer indicating the maximum forecast time possible for 
'data'. For example, for decadal prediction 'max_ft' would correspond to 10
(years). The default value is 10.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>nmemb</code></td>
<td>
<p>An integer indicating the number of ensemble members to generate 
for the persistence forecast. The default value is 1.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>na.action</code></td>
<td>
<p>A function or an integer. A function (e.g., na.omit, 
na.exclude, na.fail, na.pass) indicates what should happen when the data 
contain NAs. A numeric indicates the maximum number of NA position allowed 
to compute regression. The default value is 10.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>ncores</code></td>
<td>
<p>An integer indicating the number of cores to use for parallel
computation. The default value is NULL.</p>
</td>
</tr>
</table>
<h3>Value</h3>

<p>A list containing:
</p>
<table>
<tr style="vertical-align: top;">
<td><code>$persistence</code></td>
<td>

<p>A numeric array with dimensions 'memb', time (start dates), latitudes and longitudes
containing the persistence forecast.   
</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>$persistence.mean</code></td>
<td>

<p>A numeric array with same dimensions as 'persistence', except the 'memb' dimension
which is of length 1, containing the ensemble mean persistence forecast.
</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>$persistence.predint</code></td>
<td>

<p>A numeric array with same dimensions as 'persistence', except the 'memb' dimension
which is of length 1, containing the prediction interval of the persistence forecast.
</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>$AR.slope</code></td>
<td>

<p>A numeric array with same dimensions as 'persistence', except the 'memb' dimension
which is of length 1, containing the slope coefficient of the autoregression.
</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>$AR.intercept</code></td>
<td>

<p>A numeric array with same dimensions as 'persistence', except the 'memb' dimension
which is of length 1, containing the intercept coefficient of the autoregression.
</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>$AR.lowCI</code></td>
<td>

<p>A numeric array with same dimensions as 'persistence', except the 'memb' dimension
which is of length 1, containing the lower value of the confidence interval of the
autoregression.
</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>$AR.highCI</code></td>
<td>

<p>A numeric array with same dimensions as 'persistence', except the 'memb' dimension
which is of length 1, containing the upper value of the confidence interval of the
autoregression.
</p>
</td>
</tr>
</table>
<h3>Examples</h3>

<pre><code class="language-R"># Case 1: year
# Building an example dataset with yearly start dates from 1920 to 2009
set.seed(1)
obs1 &lt;- rnorm(1 * 70 * 2 * 2)
dim(obs1) &lt;- c(member = 1, time = 70, lat = 2, lon = 2)
dates &lt;- seq(1920, 1989, 1)
res &lt;- Persistence(obs1, dates = dates, start = 1961, end = 1980, ft_start = 1,
                  nmemb = 2)
# Case 2: day
dates &lt;- seq(as.Date(ISOdate(1990, 1, 1)), as.Date(ISOdate(1990, 4, 1)) ,1)
start &lt;- as.Date(ISOdate(1990, 2, 15))
end &lt;-  as.Date(ISOdate(1990, 4, 1))
set.seed(1)
data &lt;- rnorm(1 * length(dates))
dim(data) &lt;- c(member = 1, time = length(dates))
res &lt;- Persistence(data, dates = dates, start = start, end = end, ft_start = 1)

</code></pre>


</div>