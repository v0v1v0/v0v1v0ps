<div class="container">

<table style="width: 100%;"><tr>
<td>model_profile_2d</td>
<td style="text-align: right;">R Documentation</td>
</tr></table>
<h2>Dataset Level 2-Dimensional Variable Profile for Survival Models</h2>

<h3>Description</h3>

<p>This function calculates explanations on a dataset level that help explore model response as a function of selected pairs of variables.
The explanations are calculated as an extension of Partial Dependence Profiles or Accumulated Local Effects with the inclusion of the time dimension.
</p>


<h3>Usage</h3>

<pre><code class="language-R">model_profile_2d(
  explainer,
  variables = NULL,
  N = 100,
  categorical_variables = NULL,
  grid_points = 25,
  center = FALSE,
  variable_splits_type = "uniform",
  type = "partial",
  output_type = "survival"
)

## S3 method for class 'surv_explainer'
model_profile_2d(
  explainer,
  variables = NULL,
  N = 100,
  categorical_variables = NULL,
  grid_points = 25,
  center = FALSE,
  variable_splits_type = "uniform",
  type = "partial",
  output_type = "survival"
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr style="vertical-align: top;">
<td><code>explainer</code></td>
<td>
<p>an explainer object - model preprocessed by the <code>explain()</code> function</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>variables</code></td>
<td>
<p>list of character vectors of length 2, names of pairs of variables to be explained</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>N</code></td>
<td>
<p>number of observations used for the calculation of aggregated profiles. By default <code>100</code>. If <code>NULL</code> all observations are used.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>categorical_variables</code></td>
<td>
<p>character, a vector of names of additional variables which should be treated as categorical (factors are automatically treated as categorical variables). If it contains variable names not present in the <code>variables</code> argument, they will be added at the end.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>grid_points</code></td>
<td>
<p>maximum number of points for profile calculations. Note that the final number of points may be lower than grid_points. Will be passed to internal function. By default <code>25</code>.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>center</code></td>
<td>
<p>logical, should profiles be centered around the average prediction</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>variable_splits_type</code></td>
<td>
<p>character, decides how variable grids should be calculated. Use <code>"quantiles"</code> for quantiles or <code>"uniform"</code> (default) to get uniform grid of points. Used only if <code>type = "partial"</code>.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>type</code></td>
<td>
<p>the type of variable profile, <code>"partial"</code> for Partial Dependence or <code>"accumulated"</code> for Accumulated Local Effects</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>output_type</code></td>
<td>
<p>either <code>"survival"</code>, <code>"chf"</code> or <code>"risk"</code> the type of survival model output that should be considered for explanations. If <code>"survival"</code> the explanations are based on the survival function. If <code>"chf"</code> the explanations are based on the cumulative hazard function. Otherwise the scalar risk predictions are used by the <code>DALEX::predict_profile</code> function.</p>
</td>
</tr>
</table>
<h3>Value</h3>

<p>An object of class <code>model_profile_2d_survival</code>. It is a list with the element <code>result</code> containing the results of the calculation.
</p>


<h3>Examples</h3>

<pre><code class="language-R">
library(survival)
library(survex)

cph &lt;- coxph(Surv(time, status) ~ ., data = veteran, model = TRUE, x = TRUE, y = TRUE)
cph_exp &lt;- explain(cph)

cph_model_profile_2d &lt;- model_profile_2d(cph_exp,
    variables = list(c("age", "celltype"))
)
head(cph_model_profile_2d$result)
plot(cph_model_profile_2d)

cph_model_profile_2d_ale &lt;- model_profile_2d(cph_exp,
    variables = list(c("age", "karno")),
    type = "accumulated"
)
head(cph_model_profile_2d_ale$result)
plot(cph_model_profile_2d_ale)


</code></pre>


</div>