<div class="container">

<table style="width: 100%;"><tr>
<td>extract_sentiment_terms</td>
<td style="text-align: right;">R Documentation</td>
</tr></table>
<h2>Extract Sentiment Words</h2>

<h3>Description</h3>

<p>Extract the sentiment words from a text.
</p>


<h3>Usage</h3>

<pre><code class="language-R">extract_sentiment_terms(
  text.var,
  polarity_dt = lexicon::hash_sentiment_jockers_rinker,
  hyphen = "",
  retention_regex = "\\d:\\d|\\d\\s|[^[:alpha:]',;: ]",
  ...
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr style="vertical-align: top;">
<td><code>text.var</code></td>
<td>
<p>The text variable.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>polarity_dt</code></td>
<td>
<p>A <span class="pkg">data.table</span> of positive/negative words and
weights with x and y as column names.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>hyphen</code></td>
<td>
<p>The character string to replace hyphens with.  Default replaces
with nothing so 'sugar-free' becomes 'sugarfree'.  Setting <code>hyphen = " "</code>
would result in a space between words (e.g., 'sugar free').</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>retention_regex</code></td>
<td>
<p>A regex of what characters to keep.  All other 
characters will be removed.  Note that when this is used all text is lower 
case format.  Only adjust this parameter if you really understand how it is 
used.  Note that swapping the <code>\\{p}</code> for <code>[^[:alpha:];:,\']</code> may 
retain more alpha letters but will likely decrease speed.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>...</code></td>
<td>
<p>Ignored.</p>
</td>
</tr>
</table>
<h3>Value</h3>

<p>Returns a <span class="pkg">data.table</span> with columns of positive and 
negative terms.  In addition, the attributes <code>$counts</code> and <code>$elements</code>
return an aggregated count of the usage of the words and a detailed sentiment
score of each word use.  See the examples for more.
</p>


<h3>Examples</h3>

<pre><code class="language-R">library(data.table)
set.seed(10)
x &lt;- get_sentences(sample(hu_liu_cannon_reviews[[2]], 1000, TRUE))
sentiment(x)

pol_words &lt;- extract_sentiment_terms(x)
pol_words
pol_words$sentence
pol_words$neutral
data.table::as.data.table(pol_words)

attributes(extract_sentiment_terms(x))$counts
attributes(extract_sentiment_terms(x))$elements

## Not run: 
library(wordcloud)
library(data.table)

set.seed(10)
x &lt;- get_sentences(sample(hu_liu_cannon_reviews[[2]], 1000, TRUE))
sentiment_words &lt;- extract_sentiment_terms(x)

sentiment_counts &lt;- attributes(sentiment_words)$counts
sentiment_counts[polarity &gt; 0,]

par(mfrow = c(1, 3), mar = c(0, 0, 0, 0))
## Positive Words
with(
    sentiment_counts[polarity &gt; 0,],
    wordcloud(words = words, freq = n, min.freq = 1,
          max.words = 200, random.order = FALSE, rot.per = 0.35,
          colors = brewer.pal(8, "Dark2"), scale = c(4.5, .75)
    )
)
mtext("Positive Words", side = 3, padj = 5)

## Negative Words
with(
    sentiment_counts[polarity &lt; 0,],
    wordcloud(words = words, freq = n, min.freq = 1,
          max.words = 200, random.order = FALSE, rot.per = 0.35,
          colors = brewer.pal(8, "Dark2"), scale = c(4.5, 1)
    )
)
mtext("Negative Words", side = 3, padj = 5)

sentiment_counts[, 
    color := ifelse(polarity &gt; 0, 'red', 
        ifelse(polarity &lt; 0, 'blue', 'gray70')
    )]

## Positive &amp; Negative Together
with(
    sentiment_counts[polarity != 0,],
    wordcloud(words = words, freq = n, min.freq = 1,
          max.words = 200, random.order = FALSE, rot.per = 0.35,
          colors = color, ordered.colors = TRUE, scale = c(5, .75)
    )
)
mtext("Positive (red) &amp; Negative (blue) Words", side = 3, padj = 5)

## End(Not run)
</code></pre>


</div>