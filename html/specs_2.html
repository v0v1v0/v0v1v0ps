<div class="container">

<table style="width: 100%;"><tr>
<td>specs_opt</td>
<td style="text-align: right;">R Documentation</td>
</tr></table>
<h2>SPECS with data transformation and penalty optimization</h2>

<h3>Description</h3>

<p>This function estimates SPECS and selects the optimal penalty parameter based on a selection rule. All arguments correspond
to those of the function specs(...), but it contains the additional arguments rule and CV_cutoff.
Selection of the penalty parameter can be carried out by BIC or AIC or by time series cross-validation (TSCV). The degrees
of freedom for the information criteria (BIC or AIC) are approximated by the number of non-zero coefficients in the
estimated model. TSCV cuts the sample in two, based on the argument CV_cutoff which determines the proportion of
the training sample. SPECS is estimated on the first part and the estimated model is used to predict the values
in the second part. The selection is then based on the lowest Mean-Squared Forecast Error (MSFE) obtained over the test sample.
</p>


<h3>Usage</h3>

<pre><code class="language-R">specs_opt(
  y,
  x,
  p = 1,
  rule = c("BIC", "AIC", "TSCV"),
  CV_cutoff = 2/3,
  deterministics = c("constant", "trend", "both", "none"),
  ADL = FALSE,
  weights = c("ridge", "ols", "none"),
  k_delta = 1,
  k_pi = 1,
  lambda_g = NULL,
  lambda_i = NULL,
  thresh = 1e-04,
  max_iter_delta = 1e+05,
  max_iter_pi = 1e+05,
  max_iter_gamma = 1e+05
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr style="vertical-align: top;">
<td><code>y</code></td>
<td>
<p>A vector containing the dependent variable in levels.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>x</code></td>
<td>
<p>A matrix containing the independent variables in levels.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>p</code></td>
<td>
<p>Integer indicating the desired number of lagged differences to include. Default is 1.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>rule</code></td>
<td>
<p>A charcater object indicating which selection rule the optimal choice of the penalty parameters is based on.
Default is "BIC".</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>CV_cutoff</code></td>
<td>
<p>A numeric value between 0 and 1 that decides the proportion of the training sample as a fraction of the complete
sample. Applies only when rule="TSCV". Default is 2/3.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>deterministics</code></td>
<td>
<p>A character object indicating which deterministic variables should be added
("none","constant","trend","both"). Default is "constant".</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>ADL</code></td>
<td>
<p>Logical object indicating whether an ADL model without error-correction term should be estimated.
Default is FALSE.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>weights</code></td>
<td>
<p>Choice of penalty weights. The weights can be automatically generated by ridge regression (default)
or ols. Alternatively, a conformable vector of non-negative weights can be supplied.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>k_delta</code></td>
<td>
<p>The power to which the weights for delta should be raised, if weights are set to "ridge" or "ols".</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>k_pi</code></td>
<td>
<p>The power to which the weights for pi should be raised, if weights are set to "ridge" or "ols".</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>lambda_g</code></td>
<td>
<p>An optional user-specified grid for the group penalty may be supplied. If left empty,
a 10-dimensional grid containing 0 as the minimum value is generated.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>lambda_i</code></td>
<td>
<p>An optional user-specified grid for the individual penalty may be supplied. If left empty,
a 10-dimensional grid containing 0 as the minimum value is generated.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>thresh</code></td>
<td>
<p>The treshold for convergence.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>max_iter_delta</code></td>
<td>
<p>Maximum number of updates for delta. Default is <code class="reqn">10^5</code>.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>max_iter_pi</code></td>
<td>
<p>Maximum number of updates for pi. Default is <code class="reqn">10^5</code>.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>max_iter_gamma</code></td>
<td>
<p>Maximum number of updates for gamma. Default is <code class="reqn">10^5</code>.</p>
</td>
</tr>
</table>
<h3>Value</h3>

<table>
<tr style="vertical-align: top;">
<td><code>D</code></td>
<td>
<p>A matrix containing the deterministic variables included in the model.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>gammas</code></td>
<td>
<p>A matrix containing the estimated coefficients of
the stochastic variables in the conditional error-correction model.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>gamma_opt</code></td>
<td>
<p>A vector containing the estimated coefficients corresponding to the optimal model.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>lambda_g</code></td>
<td>
<p>The grid of group penalties.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>lambda_i</code></td>
<td>
<p>The grid of individual penalties.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>Mv</code></td>
<td>
<p>A matrix containing the independent variables, after regressing out the deterministic components.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>My_d</code></td>
<td>
<p>A vector containing the dependent variable, after regressing out the deterministic components.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>theta</code></td>
<td>
<p>The estimated coefficients for the constant and trend. If a deterministic component is excluded,
its coefficient is set to zero.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>theta_opt</code></td>
<td>
<p>The estimated coefficients for the constant and trend in the optimal model.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>v</code></td>
<td>
<p>A matrix containing the independent variables (excluding deterministic components).</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>weights</code></td>
<td>
<p>The vector of penalty weights.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>y_d</code></td>
<td>
<p>A vector containing the dependent variable, i.e. the differences of y.</p>
</td>
</tr>
</table>
<h3>Examples</h3>

<pre><code class="language-R">
#Estimate an automatically optimized model for unemployment and ten google trends

#Organize data
y &lt;- Unempl_GT[,1]
index_GT &lt;- sample(c(2:ncol(Unempl_GT)),10)
x &lt;- Unempl_GT[,index_GT]

#Estimate a CECM with 1 lagged difference and penalty chosen by the minimum BIC
my_specs &lt;- specs_opt(y,x,p=1,rule="BIC")
coefs &lt;- my_specs$gamma_opt
</code></pre>


</div>