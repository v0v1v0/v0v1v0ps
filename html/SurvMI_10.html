<div class="container">

<table style="width: 100%;"><tr>
<td>uc_data_transform</td>
<td style="text-align: right;">R Documentation</td>
</tr></table>
<h2>Transform long formatted time-to-event data into a data list
</h2>

<h3>Description</h3>

<p>This function transforms data from long format (one record per event) to a datalist with length as unique subject number. The transformation is required before fitting other models from the package.
</p>


<h3>Usage</h3>

<pre><code class="language-R">uc_data_transform(data,var_list,var_list_new,time,prob)

</code></pre>


<h3>Arguments</h3>

<table>
<tr style="vertical-align: top;">
<td><code>data</code></td>
<td>

<p>The dataset in long format with a row for each potential event. For ceonsoring record, the event prob should be 0. It should include id, time and prob variables at a minimum. If any covariates are included in the call to the function, then these variables should also be included. A censoring record is required for each subject. Categorical variables need to be encoded as factor varaible before transformationif they are expected to be in the Cox model.
</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>var_list</code></td>
<td>

<p>The list of identification variables, such as: c("id_long","trt_long").
</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>time</code></td>
<td>

<p>The time variable need to be transofirmed, e.g. time_long.
</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>prob</code></td>
<td>

<p>The prob variable need to be transformed, e.g. prob_long.
</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>var_list_new</code></td>
<td>

<p>The character vector contains the new names for the id variables defined in the var_list, if missing, previous variable names would be used.
</p>
</td>
</tr>
</table>
<h3>Value</h3>

<table>
<tr style="vertical-align: top;">
<td><code>time</code></td>
<td>
<p>The list of all potential event time </p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>prob</code></td>
<td>
<p>The list of all potential event probabilities</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>weights</code></td>
<td>
<p>The list of all potential event weights </p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>e</code></td>
<td>
<p>The list of individual potential event count</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>s</code></td>
<td>
<p>The list of all survival probabilities </p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>data_uc</code></td>
<td>
<p>The dataset contains unique information of each subject</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>data_long</code></td>
<td>
<p>The dataset contains the original data in long format</p>
</td>
</tr>
</table>
<h3>Author(s)</h3>

<p>Yiming Chen
</p>


<h3>Examples</h3>

<pre><code class="language-R">df_x&lt;-data_sim(n=1000,true_hr=0.8,haz_c=0.5/365)
df_x$f.trt&lt;-as.factor(df_x$trt_long)
data_intrim&lt;-uc_data_transform(data=df_x,
                               var_list=c("id_long","f.trt"),
                               var_list_new=c("id","trt"),
                               time="time_long",
                               prob="prob_long")

</code></pre>


</div>