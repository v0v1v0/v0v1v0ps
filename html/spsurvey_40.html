<div class="container">

<table style="width: 100%;"><tr>
<td>sp_balance</td>
<td style="text-align: right;">R Documentation</td>
</tr></table>
<h2>Calculate spatial balance metrics</h2>

<h3>Description</h3>

<p>This function measures the spatial balance (with respect to the
sampling frame) of design sites using
Voronoi polygons (Dirichlet tessellations).
</p>


<h3>Usage</h3>

<pre><code class="language-R">sp_balance(
  object,
  sframe,
  stratum_var = NULL,
  ip = NULL,
  metrics = "pielou",
  extents = FALSE
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr style="vertical-align: top;">
<td><code>object</code></td>
<td>
<p>An <code>sf</code> object containing some design sites.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>sframe</code></td>
<td>
<p>The sampling frame as an <code>sf</code> object. The coordinate
system for <code>sframe</code> must be one where distance for coordinates is meaningful.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>stratum_var</code></td>
<td>
<p>The name of the stratum variable in <code>object</code>
and <code>sframe</code>. If <code>NULL</code> (the default), no strata is assumed.
If a single character vector is provided, it is assumed this is the
name of the stratum variable in <code>object</code> and <code>sframe</code>. If
a two-dimensional character vector is provided, one element must be
named "object" and corresponds to the name of the stratum variable
in <code>object</code>, while the other element must be named "sframe" and
corresponds to the name of the stratum variable in <code>sframe</code>.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>ip</code></td>
<td>
<p>Inclusion probabilities associated with each row of <code>sframe</code>.
If these are not provided, an equal probability design is assumed (within
strata).</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>metrics</code></td>
<td>
<p>A character vector of spatial balance metrics:
</p>

<dl>
<dt><code>pielou</code></dt>
<dd>
<p> Pielou's Evenness Index (the default). This statistic
can take on a value between zero and one.</p>
</dd>
<dt><code>simpsons</code></dt>
<dd>
<p> Simpsons Evenness Index. This statistic
can take on a value between zero and logarithm of the sample size.</p>
</dd>
<dt><code>rmse</code></dt>
<dd>
<p> Root-Mean-Squared Error. This statistic
can take on a value between zero and infinity.</p>
</dd>
<dt><code>mse</code></dt>
<dd>
<p> Mean-Squared Error. This statistic
can take on a value between zero and infinity.</p>
</dd>
<dt><code>mae</code></dt>
<dd>
<p> Median-Absolute Error. This statistic
can take on a value between zero and infinity.</p>
</dd>
<dt><code>medae</code></dt>
<dd>
<p> Mean-Absolute Error. This statistic
can take on a value between zero and infinity.</p>
</dd>
<dt><code>chisq</code></dt>
<dd>
<p> Chi-Squared Loss. This statistic
can take on a value between zero and infinity.</p>
</dd>
</dl>
<p>All spatial balance metrics have a lower bound of zero, which indicates perfect
spatial balance. As the metric value increases, the spatial balance decreases.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>extents</code></td>
<td>
<p>Should the extent (total units) within each Voronoi polygon
be returned? Defaults to <code>FALSE</code>.</p>
</td>
</tr>
</table>
<h3>Value</h3>

<p>A data frame with columns providing the stratum (<code>stratum</code>),
spatial balance metric (<code>metric</code>), and spatial balance (<code>value</code>).
</p>


<h3>Author(s)</h3>

<p>Michael Dumelle <a href="mailto:Dumelle.Michael@epa.gov">Dumelle.Michael@epa.gov</a>
</p>


<h3>Examples</h3>

<pre><code class="language-R">## Not run: 
sample &lt;- grts(NE_Lakes, 30)
sp_balance(sample$sites_base, NE_Lakes)
strata_n &lt;- c(low = 25, high = 30)
sample_strat &lt;- grts(NE_Lakes, n_base = strata_n, stratum_var = "ELEV_CAT")
sp_balance(sample_strat$sites_base, NE_Lakes, stratum_var = "ELEV_CAT", metric = "rmse")

## End(Not run)
</code></pre>


</div>