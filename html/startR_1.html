<div class="container">

<table style="width: 100%;"><tr>
<td>AddStep</td>
<td style="text-align: right;">R Documentation</td>
</tr></table>
<h2>Create the workflow with the previous defined operation and data.</h2>

<h3>Description</h3>

<p>The step that combines the previous declared data and operation together to 
create the complete workflow. It is the final step before data processing.
</p>


<h3>Usage</h3>

<pre><code class="language-R">AddStep(inputs, step_fun, ...)
</code></pre>


<h3>Arguments</h3>

<table>
<tr style="vertical-align: top;">
<td><code>inputs</code></td>
<td>
<p>One or a list of objects of the class 'startR_cube' returned by 
Start(), indicating the data to be processed.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>step_fun</code></td>
<td>
<p>A startR step function as returned by Step().</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>...</code></td>
<td>
<p>Additional parameters for the inputs of function defined in 
'step_fun' by Step().</p>
</td>
</tr>
</table>
<h3>Value</h3>

<p>A list of the class 'startR_workflow' containing all the objects 
needed for the data operation.
</p>


<h3>Examples</h3>

<pre><code class="language-R"> data_path &lt;- system.file('extdata', package = 'startR')
 path_obs &lt;- file.path(data_path, 'obs/monthly_mean/$var$/$var$_$sdate$.nc')
 sdates &lt;- c('200011', '200012')
 data &lt;- Start(dat = list(list(path = path_obs)),
               var = 'tos',
               sdate = sdates,
               time = 'all',
               latitude = 'all',
               longitude = 'all',
               return_vars = list(latitude = 'dat',
                                  longitude = 'dat',
                                  time = 'sdate'),
               retrieve = FALSE)
 pi_short &lt;- 3.14
 fun &lt;- function(x, pi_val) {
           lat = attributes(x)$Variables$dat1$latitude
           weight = sqrt(cos(lat * pi_val / 180))
           corrected = Apply(list(x), target_dims = "latitude",
                             fun = function(x) {x * weight})
         }


 step &lt;- Step(fun = fun,
              target_dims = 'latitude',
              output_dims = 'latitude',
              use_libraries = c('multiApply'),
              use_attributes = list(data = "Variables"))
 wf &lt;- AddStep(data, step, pi_val = pi_short)

</code></pre>


</div>