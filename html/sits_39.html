<div class="container">

<table style="width: 100%;"><tr>
<td>sits_accuracy</td>
<td style="text-align: right;">R Documentation</td>
</tr></table>
<h2>Assess classification accuracy (area-weighted method)</h2>

<h3>Description</h3>

<p>This function calculates the accuracy of the classification
result. For a set of time series, it creates a confusion matrix and then
calculates the resulting statistics using package <code>caret</code>. The time
series needs to be classified using <code>sits_classify</code>.
</p>
<p>Classified images are generated using <code>sits_classify</code>
followed by <code>sits_label_classification</code>.
For a classified image, the function uses an area-weighted technique
proposed by Olofsson et al. according to [1-3] to produce more reliable
accuracy estimates at 95
</p>
<p>In both cases, it provides an accuracy assessment of the classified,
including Overall Accuracy, Kappa, User's Accuracy, Producer's Accuracy
and error matrix (confusion matrix)
</p>


<h3>Usage</h3>

<pre><code class="language-R">sits_accuracy(data, ...)

## S3 method for class 'sits'
sits_accuracy(data, ...)

## S3 method for class 'class_cube'
sits_accuracy(data, ..., validation)

## S3 method for class 'raster_cube'
sits_accuracy(data, ...)

## S3 method for class 'derived_cube'
sits_accuracy(data, ...)

## S3 method for class 'tbl_df'
sits_accuracy(data, ...)

## Default S3 method:
sits_accuracy(data, ...)
</code></pre>


<h3>Arguments</h3>

<table>
<tr style="vertical-align: top;">
<td><code>data</code></td>
<td>
<p>Either a data cube with classified images or
a set of time series</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>...</code></td>
<td>
<p>Specific parameters</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>validation</code></td>
<td>
<p>Samples for validation (see below)
Only required when data is a class cube.</p>
</td>
</tr>
</table>
<h3>Value</h3>

<p>A list of lists: The error_matrix, the class_areas, the unbiased
estimated areas, the standard error areas, confidence interval 95
and the accuracy (user, producer, and overall), or NULL if the data is empty.
A confusion matrix assessment produced by the caret package.
</p>


<h3>Note</h3>

<p>The 'validation' data needs to contain the following columns: "latitude",
"longitude", "start_date", "end_date", and "label". It can be either a
path to a CSV file, a sits tibble, a data frame, or an sf object.
</p>
<p>When 'validation' is an sf object, the columns "latitude" and "longitude" are
not required as the locations are extracted from the geometry column. The
'centroid' is calculated before extracting the location values for any
geometry type.
</p>


<h3>Author(s)</h3>

<p>Rolf Simoes, <a href="mailto:rolf.simoes@inpe.br">rolf.simoes@inpe.br</a>
</p>
<p>Alber Sanchez, <a href="mailto:alber.ipia@inpe.br">alber.ipia@inpe.br</a>
</p>


<h3>References</h3>

<p>[1] Olofsson, P., Foody, G.M., Stehman, S.V., Woodcock, C.E. (2013).
Making better use of accuracy data in land change studies: Estimating
accuracy and area and quantifying uncertainty using stratified estimation.
Remote Sensing of Environment, 129, pp.122-131.
</p>
<p>[2] Olofsson, P., Foody G.M., Herold M., Stehman, S.V.,
Woodcock, C.E., Wulder, M.A. (2014)
Good practices for estimating area and assessing accuracy of land change.
Remote Sensing of Environment, 148, pp. 42-57.
</p>
<p>[3] FAO, Map Accuracy Assessment and Area Estimation: A Practical Guide.
National forest monitoring assessment working paper No.46/E, 2016.
</p>


<h3>Examples</h3>

<pre><code class="language-R">if (sits_run_examples()) {
    # show accuracy for a set of samples
    train_data &lt;- sits_sample(samples_modis_ndvi, frac = 0.5)
    test_data  &lt;- sits_sample(samples_modis_ndvi, frac = 0.5)
    rfor_model &lt;- sits_train(train_data, sits_rfor())
    points_class &lt;- sits_classify(
        data = test_data, ml_model = rfor_model
    )
    acc &lt;- sits_accuracy(points_class)

    # show accuracy for a data cube classification
    # create a random forest model
    rfor_model &lt;- sits_train(samples_modis_ndvi, sits_rfor())
    # create a data cube from local files
    data_dir &lt;- system.file("extdata/raster/mod13q1", package = "sits")
    cube &lt;- sits_cube(
        source = "BDC",
        collection = "MOD13Q1-6.1",
        data_dir = data_dir
    )
    # classify a data cube
    probs_cube &lt;- sits_classify(
        data = cube, ml_model = rfor_model, output_dir = tempdir()
    )
    # label the probability cube
    label_cube &lt;- sits_label_classification(
        probs_cube,
        output_dir = tempdir()
    )
    # obtain the ground truth for accuracy assessment
    ground_truth &lt;- system.file("extdata/samples/samples_sinop_crop.csv",
        package = "sits"
    )
    # make accuracy assessment
    as &lt;- sits_accuracy(label_cube, validation = ground_truth)
}
</code></pre>


</div>