<div class="container">

<table style="width: 100%;"><tr>
<td>sf_empty_recycle_bin</td>
<td style="text-align: right;">R Documentation</td>
</tr></table>
<h2>Empty Recycle Bin</h2>

<h3>Description</h3>

<p><a href="https://lifecycle.r-lib.org/articles/stages.html#experimental"><img src="../help/figures/lifecycle-experimental.svg" alt="[Experimental]"></a>
</p>
<p>Delete records from the recycle bin immediately and permanently.
</p>


<h3>Usage</h3>

<pre><code class="language-R">sf_empty_recycle_bin(ids, api_type = c("SOAP"), verbose = FALSE)
</code></pre>


<h3>Arguments</h3>

<table>
<tr style="vertical-align: top;">
<td><code>ids</code></td>
<td>
<p><code>vector</code>, <code>matrix</code>, <code>data.frame</code>, or
<code>tbl_df</code>; if not a vector, there must be a column called Id (case-insensitive)
that can be passed in the request</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>api_type</code></td>
<td>
<p><code>character</code>; one of <code>"REST"</code>, <code>"SOAP"</code>,
<code>"Bulk 1.0"</code>, or <code>"Bulk 2.0"</code> indicating which API to use when
making the request.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>verbose</code></td>
<td>
<p><code>logical</code>; an indicator of whether to print additional
detail for each API call, which is useful for debugging. More specifically, when
set to <code>TRUE</code> the URL, header, and body will be printed for each request,
along with additional diagnostic information where available.</p>
</td>
</tr>
</table>
<h3>Details</h3>

<p>When emptying recycle bins, consider the following rules and guidelines:
</p>

<ul>
<li>
<p> The logged in user can delete any record that he or she can query in their Recycle Bin, or the recycle bins of any subordinates. If the logged in user has Modify All Data permission, he or she can query and delete records from any Recycle Bin in the organization.
</p>
</li>
<li>
<p> Do not include the IDs of any records that will be cascade deleted, or an error will occur.
</p>
</li>
<li>
<p> Once records are deleted using this call, they cannot be undeleted using <code>link{sf_undelete}</code>
</p>
</li>
<li>
<p> After records are deleted from the Recycle Bin using this call, they can be queried using the <code>queryall</code> argument for some time. Typically this time is 24 hours, but may be shorter or longer.
</p>
</li>
</ul>
<h3>Value</h3>

<p><code>tbl_df</code> of records with success indicator
</p>


<h3>References</h3>

<p><a href="https://developer.salesforce.com/docs/atlas.en-us.api.meta/api/sforce_api_calls_emptyrecyclebin.htm">https://developer.salesforce.com/docs/atlas.en-us.api.meta/api/sforce_api_calls_emptyrecyclebin.htm</a>
</p>


<h3>Examples</h3>

<pre><code class="language-R">## Not run: 
new_contact &lt;- c(FirstName = "Test", LastName = "Contact")
new_records &lt;- sf_create(new_contact, object_name = "Contact")
delete &lt;- sf_delete(new_records$id[1],
                    AllOrNoneHeader = list(allOrNone = TRUE))
is_deleted &lt;- sf_query(sprintf("SELECT Id, IsDeleted FROM Contact WHERE Id='%s'",
                       new_records$id[1]),
                       queryall = TRUE)
hard_deleted &lt;- sf_empty_recycle_bin(new_records$id[1])

# confirm that the record really is gone (can't be deleted)
undelete &lt;- sf_undelete(new_records$id[1])
# if you use queryall you still will find the record for ~24hrs
is_deleted &lt;- sf_query(sprintf("SELECT Id, IsDeleted FROM Contact WHERE Id='%s'", 
                               new_records$id[1]), queryall = TRUE)
                               
# As of v48.0 (Spring 2020) you can query the Ids of all records in the Recycle 
# Bin, which makes it easier to clear the entire bin because you can grab the 
# Ids of the records first
records_in_bin &lt;- sf_query("SELECT Record FROM DeleteEvent")
records_emptied_from_bin &lt;- sf_delete(records_in_bin$Record)

## End(Not run)
</code></pre>


</div>