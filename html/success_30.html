<div class="container">

<table style="width: 100%;"><tr>
<td>parameter_assist</td>
<td style="text-align: right;">R Documentation</td>
</tr></table>
<h2>Assist users in parameter selection</h2>

<h3>Description</h3>

<p>This function can be used to determine some of the vital
parameters used to construct control charts in this package.
</p>


<h3>Usage</h3>

<pre><code class="language-R">parameter_assist(baseline_data, data, formula, followup, theta = log(2),
  time, alpha = 0.05, maxtheta = log(6))
</code></pre>


<h3>Arguments</h3>

<table>
<tr style="vertical-align: top;">
<td><code>baseline_data</code></td>
<td>
<p>A <code>data.frame</code> for determining a baseline performance
metric. Rows should represent subjects and the
following named columns should be present: </p>

<dl>
<dt>
<code>entrytime</code>:</dt>
<dd>
<p>time of entry into study (numeric);</p>
</dd>
<dt>
<code>survtime</code>:</dt>
<dd>
<p>time from entry until event (numeric);</p>
</dd>
<dt>
<code>censorid</code>:</dt>
<dd>
<p>censoring indicator (0 = right censored, 1 = observed),
(integer).</p>
</dd>
</dl>
<p> and optionally additional covariates used for risk-adjustment.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>data</code></td>
<td>
<p>A <code>data.frame</code> with data on which the user wants to construct
quality control charts.
Rows should represent subjects and the
following named columns should be present: </p>

<dl>
<dt>
<code>entrytime</code>:</dt>
<dd>
<p>time of entry into study (numeric);</p>
</dd>
<dt>
<code>survtime</code>:</dt>
<dd>
<p>time from entry until event (numeric);</p>
</dd>
<dt>
<code>censorid</code>:</dt>
<dd>
<p>censoring indicator (0 = right censored, 1 = observed),
(integer).</p>
</dd>
</dl>
<p> and optionally additional covariates used for risk-adjustment.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>formula</code></td>
<td>
<p>A formula with right-hand side (RHS) indicating the form in which
the covariates should be used for the Cox and GLM
regression models. LHS of the formula will be ignored, and can be left empty.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>followup</code></td>
<td>
<p>(optional): The value of the follow-up time to be used to determine event time.
Event time will be equal to <code>entrytime + followup</code> for each subject.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>theta</code></td>
<td>
<p>The value of the expected log-hazard/odds ratio. In other words: the logarithm of the
expected increase in the odds/hazard ratio. Default is log(2) (detecting a
doubling of the odds/failure rate).</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>time</code></td>
<td>
<p>Timeframe over which the type I error of the control chart should be
limited. Should be in the same unit as <code>survtime</code> in <code>data</code>. If left
unspecified, the maximum entrytime in <code>baseline_data</code> is taken. (numeric)</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>alpha</code></td>
<td>
<p>Required maximal type I error (between 0 and 1) of the procedure
over the timeframe specified in <code>time</code>. Default is 0.05. (numeric)</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>maxtheta</code></td>
<td>
<p>Maximum value the maximum likelihood estimate for
parameter <code class="reqn">\theta</code> can take. If <code>detection = "lower"</code>, <code>-abs(theta)</code>
will be the minimum value the maximum likelihood estimate for
parameter <code class="reqn">\theta</code> can take.  Default is <code>log(6)</code>, meaning that
at most a 6 times increase/decrease in the odds/hazard ratio is expected.</p>
</td>
</tr>
</table>
<h3>Details</h3>

<p>Depending on the specified arguments, the function will return
parameters. If <code>covariate_names</code> is not specified, the returned
risk-adjustment models will be trivial. If <code>formula</code> is not specified
but <code>covariate_names</code> are,
the function assumes the simplest form for the regression model
(cov1 + cov2 + ...). If <code>followup</code> is not specified, no <code>glmmod</code>
will be determined
</p>


<h3>Value</h3>

<p>A list of parameters to feed to quality control charts in this
package:
</p>

<ul>
<li>
<p> call: The call used to obtain output.
</p>
</li>
<li>
<p> data: The data used in the call to the function.
</p>
</li>
<li>
<p> baseline_data: The baseline_data used in the call to the function
</p>
</li>
<li>
<p> glmmod: A <code>glm()</code> model which can be fed to
the <code>funnel_plot()</code>
and <code>bernoulli_cusum()</code> functions.
</p>
</li>
<li>
<p> coxphmod: A <code>coxph()</code> model which can be
fed to the <code>cgr_cusum()</code> and
<code>cgr_cusum()</code> functions.
</p>
</li>
<li>
<p> theta: Expected increase in the odds/hazard ratio.
</p>
</li>
<li>
<p> psi: Estimated Poisson arrival rate in <code>data</code>.
</p>
</li>
<li>
<p> time: Time frame over which to restrict type I error.
</p>
</li>
<li>
<p> alpha: Desired level of type I error for control limit determination.
</p>
</li>
<li>
<p> maxtheta: Maximum expected increase/decrease in the odds/hazard ratio.
</p>
</li>
</ul>
<h3>Author(s)</h3>

<p>Daniel Gomon
</p>


<h3>Examples</h3>

<pre><code class="language-R">require(survival)

#Minimal example - no risk-adjustment
pars_min &lt;- parameter_assist(baseline_data = surgerydat,
data = subset(surgerydat, unit == 1))

#Specifying all parameters
pars &lt;- parameter_assist(baseline_data = surgerydat,
data = subset(surgerydat, unit == 1),
formula = formula("survtime ~ age + sex + BMI"), followup = 100)
</code></pre>


</div>