<div class="container">

<table style="width: 100%;"><tr>
<td>computePunstable</td>
<td style="text-align: right;">R Documentation</td>
</tr></table>
<h2>Compute probability of layer instability based on random forest model</h2>

<h3>Description</h3>

<p>This function enables comfortable and fast R access to Stephanie Mayer's python implementation of her random forest model to estimate the probability of dry snow layer instability.
The routine can be run very efficiently on large snowprofileSets. Layer properties required are sphericity, viscous deformation rate (10e-6 s-1), density (kg m-3), grain size (mm),
and the critical crack length (m) (which can be computed very efficiently automatically if shear strength (kPA) is available.) Additionally, skier penetration depth in (m) is required.
</p>


<h3>Usage</h3>

<pre><code class="language-R">computePunstable(x, ...)

## S3 method for class 'snowprofileSet'
computePunstable(
  x,
  ski_pen = NA,
  recompute_crit_cut_length = TRUE,
  buffer = TRUE,
  ...
)

## S3 method for class 'snowprofile'
computePunstable(x, ski_pen = NA, recompute_crit_cut_length = TRUE, ...)

## S3 method for class 'snowprofileLayers'
computePunstable(x, ski_pen = NA, ...)
</code></pre>


<h3>Arguments</h3>

<table>
<tr style="vertical-align: top;">
<td><code>x</code></td>
<td>
<p>snowprofile, snowprofileSet, or snowprofileLayers</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>...</code></td>
<td>
<p>passed on to subsequent methods</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>ski_pen</code></td>
<td>
<p>skier penetration depth (m), one scalar for each profile in x</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>recompute_crit_cut_length</code></td>
<td>
<p>This routine can very efficiently compute the critical crack length with computeCritCutLength.
SNOWPACK often provides NA values of the critical crack length even for layers that have a real solution to it. With this flag you can conveniently
recompute all critical crack lengths (<code>TRUE</code>). If set to <code>FALSE</code>, it will only be computed if not all profiles already contain it.
Note that shear strength must be available to compute the critical crack length!</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>buffer</code></td>
<td>
<p>internal switch to ensure fast computation at low memory cost. Leave at <code>TRUE</code>!</p>
</td>
</tr>
</table>
<h3>Value</h3>

<p>x is returned with <code style="white-space: pre;">⁠$p_unstable⁠</code> (and potentially <code style="white-space: pre;">⁠$crit_cut_length⁠</code>, <code style="white-space: pre;">⁠$slab_rho⁠</code>, and <code>slab_rhogs</code>) appended to each profile's layers object.
</p>


<h3>Methods (by class)</h3>


<ul>
<li> <p><code>snowprofileSet</code>: for sarp.snowprofile::snowprofileSets
</p>
</li>
<li> <p><code>snowprofile</code>: for snowprofiles
</p>
</li>
<li> <p><code>snowprofileLayers</code>: for snowprofileLayers
</p>
</li>
</ul>
<h3>Author(s)</h3>

<p>fherla and smayer
</p>


<h3>References</h3>

<p>Mayer, S., Herwijnen, A. Van, Techel, F., &amp; Schweizer, J. (accepted, 2022).
A random forest model to assess snow instability from simulated snow stratigraphy.
The Cryosphere Discussions. https://doi.org/10.5194/tc-2022-34
</p>


<h3>Examples</h3>

<pre><code class="language-R">## load a handful of example profiles from a PRO file
profiles &lt;- snowprofilePro(system.file("extdata/snowprofile.pro",
                                       package = "sarp.snowprofile.pyface"),
                           remove_soil = TRUE, suppressWarnings = TRUE)
summary(profiles)
names(profiles[[1]]$layers)
## compute p_unstable alongside critical crack length, slab_rho, slab_rhogs:
if (have_dependencies()) {
profiles &lt;- computePunstable(profiles)
names(profiles[[1]]$layers)
}


</code></pre>


</div>