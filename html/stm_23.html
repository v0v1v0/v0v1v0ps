<div class="container">

<table style="width: 100%;"><tr>
<td>make.heldout</td>
<td style="text-align: right;">R Documentation</td>
</tr></table>
<h2>Heldout Likelihood by Document Completion</h2>

<h3>Description</h3>

<p>Tools for making and evaluating heldout datasets.
</p>


<h3>Usage</h3>

<pre><code class="language-R">make.heldout(
  documents,
  vocab,
  N = floor(0.1 * length(documents)),
  proportion = 0.5,
  seed = NULL
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr style="vertical-align: top;">
<td><code>documents</code></td>
<td>
<p>the documents to be modeled (see <code>stm</code> for format).</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>vocab</code></td>
<td>
<p>the vocabulary item</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>N</code></td>
<td>
<p>number of docs to be partially held out</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>proportion</code></td>
<td>
<p>proportion of docs to be held out.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>seed</code></td>
<td>
<p>the seed, set for replicability</p>
</td>
</tr>
</table>
<h3>Details</h3>

<p>These functions are used to create and evaluate heldout likelihood using the
document completion method.  The basic idea is to hold out some fraction of
the words in a set of documents, train the model and use the document-level
latent variables to evaluate the probability of the heldout portion. See the
example for the basic workflow.
</p>


<h3>Examples</h3>

<pre><code class="language-R">
prep &lt;- prepDocuments(poliblog5k.docs, poliblog5k.voc,
                      poliblog5k.meta,subsample=500,
                      lower.thresh=20,upper.thresh=200)
heldout &lt;- make.heldout(prep$documents, prep$vocab)
documents &lt;- heldout$documents
vocab &lt;- heldout$vocab
meta &lt;- prep$meta

stm1&lt;- stm(documents, vocab, 5,
           prevalence =~ rating+ s(day),
           init.type="Random",
           data=meta, max.em.its=5)
eval.heldout(stm1, heldout$missing)

</code></pre>


</div>