<div class="container">

<table style="width: 100%;"><tr>
<td>svyglm.nb</td>
<td style="text-align: right;">R Documentation</td>
</tr></table>
<h2>Survey-weighted negative binomial generalised linear model</h2>

<h3>Description</h3>

<p><code>svyglm.nb()</code> is an extension to the <a href="https://CRAN.R-project.org/package=survey"><span class="pkg">survey</span></a>-package
to fit survey-weighted negative binomial models. It uses
<code>svymle</code> to fit sampling-weighted
maximum likelihood estimates, based on starting values provided
by <code>glm.nb</code>, as proposed by <em>Lumley
(2010, pp249)</em>.
</p>


<h3>Usage</h3>

<pre><code class="language-R">svyglm.nb(formula, design, ...)
</code></pre>


<h3>Arguments</h3>

<table>
<tr style="vertical-align: top;">
<td><code>formula</code></td>
<td>
<p>An object of class <code>formula</code>, i.e. a symbolic description
of the model to be fitted. See 'Details' in <code>glm</code>.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>design</code></td>
<td>
<p>An object of class <code>svydesign</code>, providing
a specification of the survey design.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>...</code></td>
<td>
<p>Other arguments passed down to <code>glm.nb</code>.</p>
</td>
</tr>
</table>
<h3>Details</h3>

<p>For details on the computation method, see Lumley (2010), Appendix E
(especially 254ff.)
<br><br><span class="pkg">sjstats</span> implements following S3-methods for <code>svyglm.nb</code>-objects:
<code>family()</code>, <code>model.frame()</code>, <code>formula()</code>, <code>print()</code>,
<code>predict()</code> and <code>residuals()</code>. However, these functions have some
limitations:
</p>

<ul>
<li>
<p><code>family()</code> simply returns the family-object from the
underlying <code>glm.nb</code>-model.
</p>
</li>
<li>
<p>The <code>predict()</code>-method just re-fits the <code>svyglm.nb</code>-model
with <code>glm.nb</code>, overwrites the <code>$coefficients</code>
from this model-object with the coefficients from the returned
<code>svymle</code>-object and finally calls
<code>predict.glm</code> to compute the predicted values.
</p>
</li>
<li>
<p><code>residuals()</code> re-fits the <code>svyglm.nb</code>-model with
<code>glm.nb</code> and then computes the Pearson-residuals
from the <code>glm.nb</code>-object.
</p>
</li>
</ul>
<h3>Value</h3>

<p>An object of class <code>svymle</code> and <code>svyglm.nb</code>,
with some additional information about the model.
</p>


<h3>References</h3>

<p>Lumley T (2010). Complex Surveys: a guide to analysis using R. Wiley
</p>


<h3>Examples</h3>

<pre><code class="language-R"># ------------------------------------------
# This example reproduces the results from
# Lumley 2010, figure E.7 (Appendix E, p256)
# ------------------------------------------
if (require("survey")) {
  data(nhanes_sample)

  # create survey design
  des &lt;- svydesign(
    id = ~SDMVPSU,
    strat = ~SDMVSTRA,
    weights = ~WTINT2YR,
    nest = TRUE,
    data = nhanes_sample
  )

  # fit negative binomial regression
  fit &lt;- svyglm.nb(total ~ factor(RIAGENDR) * (log(age) + factor(RIDRETH1)), des)

  # print coefficients and standard errors
  fit
}
</code></pre>


</div>