<div class="container">

<table style="width: 100%;"><tr>
<td>gridPointsFit</td>
<td style="text-align: right;">R Documentation</td>
</tr></table>
<h2>Fits regularly spaced points to a sample line or grid</h2>

<h3>Description</h3>

<p>This function is used to fit a model of points at a regular interval to a sample of points in one dimension. The function is used by <code>measureCheckerboardSize</code> to estimate the solution to the inter-point distance of points along a line or in a grid.
</p>


<h3>Usage</h3>

<pre><code class="language-R">	
gridPointsFit(p, nx, ny=NULL)
</code></pre>


<h3>Arguments</h3>

<table>
<tr style="vertical-align: top;">
<td><code>p</code></td>
<td>
<p>The parameters defining the regular point distribution. When <code>nx</code> is <code>NULL</code>, <code>p</code> is of length 2. When <code>nx</code> is non-<code>NULL</code>, <code>p</code> is of length 3.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>nx</code></td>
<td>
<p>The number of points to be created at regular spacing along one dimension.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>ny</code></td>
<td>
<p>The number of points to be created at regular spacing along a second dimension.</p>
</td>
</tr>
</table>
<h3>Details</h3>

<p>This function is used to fit a model of points at a regular interval to a sample of points in one dimension. The function is used by <code>measureCheckerboardSize</code> to estimate the solution to the inter-point distance of points along a line or in a grid. To fit a model to points along lines and grids in two dimensions, each dimension is fit separately. A best fit estimate of the true interval between points can then be calculated from the optimized parameters. See the examples below for how to use <code>gridPointsFit()</code> to estimate the inter-point intervals of line and grid points.
</p>


<h3>Value</h3>

<p>a vector of length <code>nx*ny</code>.
</p>


<h3>Author(s)</h3>

<p>Aaron Olsen</p>


<h3>See Also</h3>

<p><code>measureCheckerboardSize</code></p>


<h3>Examples</h3>

<pre><code class="language-R">
## ESTIMATE LINE INTER-POINT INTERVAL
# GENERATE POINTS AT A REGULAR INTERVAL WITH NORMAL, RANDOM VARIATION
pts &lt;- cbind((1:500) + rnorm(500, sd=1), (1:500) + rnorm(500, sd=1))

# FIND THE MEAN SUCCESSIVE POINT-TO-DISTANCE
# NOTE THAT THIS CONSISTENTLY OVERESTIMATES THE TRUE INTERVAL
mean(sqrt(rowSums((pts[2:nrow(pts), ] - pts[1:(nrow(pts)-1), ])^2)))

# FIT A REGULARLY SPACED POINTS MODEL TO EACH DIMENSION OF THE POINTS MATRIX
fit_x &lt;- nlminb(start=c(pts[1, 1], pts[2, 1]-pts[1, 1]), 
    objective=gridPointsFitError, nx=nrow(pts), points=pts[, 1])
fit_y &lt;- nlminb(start=c(pts[1, 2], pts[2, 2]-pts[1, 2]), 
    objective=gridPointsFitError, nx=nrow(pts), points=pts[, 2])

# FIND THE BEST FIT INTER-POINT DISTANCE
# MORE ACCURATELY RECOVERS TRUE INTERVAL
sqrt(fit_x$par[2]^2 + fit_y$par[2]^2)


## ESTIMATE REGULAR GRID SQUARE SIZE
# GENERATE A REGULAR GRID WITH NORMAL, RANDOM VARIATION
corners &lt;- cbind(
    rep(1:20, 20) + rnorm(20^2, sd=0.1), 
    c(t(matrix(1:20, nrow=20, ncol=20))) + rnorm(20^2, sd=0.1))

# FIT A REGULARLY SPACED POINTS MODEL TO EACH DIMENSION OF THE POINTS MATRIX
fit_x &lt;- nlminb(
    start=c(corners[1, 1], corners[2, 1]-corners[1, 1], 0),
    objective=gridPointsFitError, points=corners[, 1], nx=20, ny=20)
fit_y &lt;- nlminb(
    start=c(corners[1, 2], corners[2, 2]-corners[1, 2], 0),
    objective=gridPointsFitError, points=corners[, 2], nx=20, ny=20)

# FIND THE BEST FIT INTER-POINT DISTANCE (SQUARE SIZE)
sqrt(fit_x$par[2]^2 + fit_y$par[2]^2)
</code></pre>


</div>