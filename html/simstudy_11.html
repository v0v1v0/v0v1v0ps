<div class="container">

<table style="width: 100%;"><tr>
<td>addPeriods</td>
<td style="text-align: right;">R Documentation</td>
</tr></table>
<h2>Create longitudinal/panel data</h2>

<h3>Description</h3>

<p>Create longitudinal/panel data
</p>


<h3>Usage</h3>

<pre><code class="language-R">addPeriods(
  dtName,
  nPeriods = NULL,
  idvars = "id",
  timevars = NULL,
  timevarName = "timevar",
  timeid = "timeID",
  perName = "period",
  periodVec = NULL
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr style="vertical-align: top;">
<td><code>dtName</code></td>
<td>
<p>Name of existing data table</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>nPeriods</code></td>
<td>
<p>Number of time periods for each record</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>idvars</code></td>
<td>
<p>Names of index variables (in a string vector) that will be
repeated during each time period</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>timevars</code></td>
<td>
<p>Names of time dependent variables. Defaults to NULL.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>timevarName</code></td>
<td>
<p>Name of new time dependent variable</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>timeid</code></td>
<td>
<p>Variable name for new index field. Defaults to "timevar"</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>perName</code></td>
<td>
<p>Variable name for period field. Defaults to "period"</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>periodVec</code></td>
<td>
<p>Vector of period times. Defaults to NULL</p>
</td>
</tr>
</table>
<h3>Details</h3>

<p>It is possible to generate longitudinal data with varying 
numbers of measurement periods as well as varying time intervals between 
each measurement period. This is done by defining specific variables <em>in</em> the 
data set that define the number of observations per subject and the average 
interval time between each observation. <b><em>nCount</em></b> defines the number of 
measurements for an individual; <b><em>mInterval</em></b> specifies the average time between 
intervals for a subject; and <b><em>vInterval</em></b> specifies the variance of those 
interval times. If <b><em>mInterval</em></b> is not defined, no intervals are used. If <b><em>vInterval</em></b> is set to 0 or is not defined, the interval for
a subject is determined entirely by the mean interval. If <b><em>vInterval</em></b> is 
greater than 0, time intervals are generated using a gamma distribution 
with specified mean and dispersion. If either <b><em>nPeriods</em></b> or <b><em>timevars</em></b> 
is specified, that will override any <b><em>nCount</em></b>, <b><em>mInterval</em></b>, and 
<b><em>vInterval</em></b> data.
</p>
<p><b><em>periodVec</em></b> is used to specify measurement periods that are different
the default counting variables. If <b><em>periodVec</em></b> is not specified, 
the periods default to <em>0, 1, ... n-1</em>, with <em>n</em> periods. If 
<b><em>periodVec</em></b> is specified as <em>c(x_1, x_2, ... x_n)</em>, then
<em>x_1, x_2, ... x_n</em> represent the measurement periods.
</p>


<h3>Value</h3>

<p>An updated data.table that that has multiple rows
per observation in dtName
</p>


<h3>Examples</h3>

<pre><code class="language-R">tdef &lt;- defData(varname = "T", dist = "binary", formula = 0.5)
tdef &lt;- defData(tdef, varname = "Y0", dist = "normal", formula = 10, variance = 1)
tdef &lt;- defData(tdef, varname = "Y1", dist = "normal", formula = "Y0 + 5 + 5 * T", variance = 1)
tdef &lt;- defData(tdef, varname = "Y2", dist = "normal", formula = "Y0 + 10 + 5 * T", variance = 1)

dtTrial &lt;- genData(5, tdef)
dtTrial

dtTime &lt;- addPeriods(dtTrial,
  nPeriods = 3, idvars = "id",
  timevars = c("Y0", "Y1", "Y2"), timevarName = "Y"
)
dtTime

# Varying # of periods and intervals - need to have variables
# called nCount and mInterval

def &lt;- defData(varname = "xbase", dist = "normal", formula = 20, variance = 3)
def &lt;- defData(def, varname = "nCount", dist = "noZeroPoisson", formula = 6)
def &lt;- defData(def, varname = "mInterval", dist = "gamma", formula = 30, variance = .01)
def &lt;- defData(def, varname = "vInterval", dist = "nonrandom", formula = .07)

dt &lt;- genData(200, def)
dt[id %in% c(8, 121)]

dtPeriod &lt;- addPeriods(dt)
dtPeriod[id %in% c(8, 121)] # View individuals 8 and 121 only
</code></pre>


</div>