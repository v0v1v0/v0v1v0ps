<div class="container">

<table style="width: 100%;"><tr>
<td>dynspec</td>
<td style="text-align: right;">R Documentation</td>
</tr></table>
<h2>Dynamic sliding spectrum</h2>

<h3>Description</h3>

<p>This function plots dynamically a sliding spectrum along a time wave. 
This basically corresponds to a short-term Fourier transform.
</p>


<h3>Usage</h3>

<pre><code class="language-R">dynspec(wave, f, channel = 1, wl = 512, wn = "hanning", zp = 0,
ovlp = 0, fftw = FALSE, norm = FALSE, dB = NULL,  dBref = NULL, plot = TRUE,
title = TRUE, osc = FALSE, 
tlab = "Time (s)", flab = "Frequency (kHz)",
alab = "Amplitude", alim = NULL, flim = c(0, f/2000),
type = "l", from = NULL, to = NULL, envt = NULL,
msmooth = NULL, ksmooth = NULL, colspec = "black",
coltitle = "black", colbg = "white", colline = "black",
colaxis = "black", collab = "black", cexlab = 1,
fontlab = 1, colwave = "black",
coly0 = "lightgrey", colcursor = "red", bty = "l")
</code></pre>


<h3>Arguments</h3>

<table>
<tr style="vertical-align: top;">
<td><code>wave</code></td>
<td>
<p>an R object.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>f</code></td>
<td>
<p>sampling frequency of <code>wave</code> (in Hz). Does not need to
be specified if embedded in <code>wave</code>.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>channel</code></td>
<td>
<p>channel of the R object, by default left channel (1).</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>wl</code></td>
<td>
<p>if <code>at</code> is not null, length of the window for the analysis
(even number of points, by defaults = 512).</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>wn</code></td>
<td>
<p>window name, see <code>ftwindow</code> (by default <code>"hanning"</code>).</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>zp</code></td>
<td>
<p>zero-padding (even number of points), see <code>Details</code>.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>ovlp</code></td>
<td>
<p>overlap between two successive windows (in % ).</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>fftw</code></td>
<td>
<p>if <code>TRUE</code> calls the function <code>FFT</code> of the
library <code>fftw</code>. See Notes of the <code>spectro</code>.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>norm</code></td>
<td>
<p>logical, if <code>TRUE</code> compute a normalised sliding spectrum.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>dB</code></td>
<td>
<p>a character string specifying the type dB to return: "max0" for a
maximum dB value at 0, "A", "B", "C", "D", and "ITU" for common dB weights.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>dBref</code></td>
<td>
<p>a dB reference value when <code>dB</code> is not <code>NULL</code>. <code>NULL</code> by default
but should be set to 2*10e-5 for a 20 microPa reference (SPL).</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>plot</code></td>
<td>
<p>logical, if <code>TRUE</code> plots in an ew graphics device the successive
spectra sliding along the time wave (by default <code>TRUE</code>).</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>title</code></td>
<td>
<p>logical, if <code>TRUE</code> adds a title with the time position of the current
spectrum along the time wave.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>osc</code></td>
<td>
<p>logical, if <code>TRUE</code> plots an oscillogram beneath
the sliding spectrum with a cursor showing the position of the 
current spectrum (by default <code>FALSE</code>).</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>tlab</code></td>
<td>
<p>title of the time axis.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>flab</code></td>
<td>
<p>title of the frequency axis.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>alab</code></td>
<td>
<p>title of the amplitude axis.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>flim</code></td>
<td>
<p>range of frequency axis.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>alim</code></td>
<td>
<p>range of amplitude axis.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>type</code></td>
<td>
<p>type of plot that should be drawn for the sliding spectrum.
See <code>plot</code> for details (by default "l" for lines).</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>from</code></td>
<td>
<p>start mark where  to compute the sliding spectrum (in s).</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>to</code></td>
<td>
<p>end mark where to compute the sliding spectrum (in s).</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>envt</code></td>
<td>
<p>the type of envelope to be plooted:
either "abs" for absolute amplitude envelope or "hil" for Hilbert amplitude envelope.
See <code>env</code>.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>msmooth</code></td>
<td>
<p>when <code>env</code> is not <code>NULL</code>,
a vector of length 2 to smooth the amplitude envelope with a 
mean sliding window. The first component is the window length
(in number of points). The second component is the overlap between
successive windows (in %). See <code>env</code>.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>ksmooth</code></td>
<td>
<p>when <code>env</code> is not <code>NULL</code>,
kernel smooth via <code>kernel</code>. See <code>env</code>.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>colspec</code></td>
<td>
<p>colour of the sliding spectrum.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>coltitle</code></td>
<td>
<p>if <code>title</code> is <code>TRUE</code>, colour of the title.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>colbg</code></td>
<td>
<p>background colour.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>colline</code></td>
<td>
<p>colour of axes line.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>colaxis</code></td>
<td>
<p>colour of the axes.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>collab</code></td>
<td>
<p>colour of axes title.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>cexlab</code></td>
<td>
<p>character size for axes title.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>fontlab</code></td>
<td>
<p>font for axes title.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>colwave</code></td>
<td>
<p>colour of the oscillogram or of the envelope (only when <code>osc</code> is <code>TRUE</code>).</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>coly0</code></td>
<td>
<p>colour of the y=0 line (only when <code>osc</code> is <code>TRUE</code>).</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>colcursor</code></td>
<td>
<p>colour of oscillogram cursor (only when <code>osc</code> is <code>TRUE</code>).</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>bty</code></td>
<td>
<p>the type of box to be drawn around the oscillogram (only
when <code>osc</code> is <code>TRUE</code>).</p>
</td>
</tr>
</table>
<h3>Details</h3>

<p>Use the slider panel to move along the time wave.<br>
Use the argument <code>norm</code> if you wish to have each spectrum normalised, <em>i.e.</em>
with values between 0 and 1 or maximised to 0 dB when <code>dB</code> is <code>TRUE</code>.<br>
The function requires the package <span class="pkg">rpanel</span> that is based on the package <span class="pkg">tcltk</span>.
</p>


<h3>Value</h3>

<p>This function returns a list of three items:
</p>
<table>
<tr style="vertical-align: top;">
<td><code>time</code></td>
<td>
<p>a numeric vector corresponding to the time axis.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>freq</code></td>
<td>
<p>a numeric vector corresponding to the frequency axis.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>amp</code></td>
<td>
<p>a numeric matrix corresponding to the amplitude values.
Each column is a Fourier transform of length <code>wl/2</code>.</p>
</td>
</tr>
</table>
<h3>Note</h3>

<p>This function is very similar to a spectrogram. See the <code>Details</code> of
<code>spectro</code> for some information regarding the short term Fourier 
transform.</p>


<h3>Author(s)</h3>

<p>Jerome Sueur and Caroline Simonis</p>


<h3>See Also</h3>

<p><code>spectro</code>, <code>spectro3D</code>,
<code>wf</code>, <code>spec</code>, <code>dynspectro</code>,
<code>fft</code>, <code>oscillo</code>, <code>env</code>.</p>


<h3>Examples</h3>

<pre><code class="language-R">## Not run: 
data(sheep)
require(rpanel)
dynspec(sheep,f=8000,wl=1024,ovlp=50,osc=TRUE)

## End(Not run)
</code></pre>


</div>