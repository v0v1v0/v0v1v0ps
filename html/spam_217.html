<div class="container">

<table style="width: 100%;"><tr>
<td>diag</td>
<td style="text-align: right;">R Documentation</td>
</tr></table>
<h2>Sparse Matrix diagonals</h2>

<h3>Description</h3>

<p>Extract or replace the diagonal of a matrix, or construct a
diagonal matrix.
</p>


<h3>Usage</h3>

<pre><code class="language-R">## diag(x)
## diag(x=1, nrow, ncol, names = TRUE)
diag(x) &lt;- value

diag.spam(x=1, nrow, ncol)
spam_diag(x=1, nrow, ncol)
diag.spam(x) &lt;- value
</code></pre>


<h3>Arguments</h3>

<table>
<tr style="vertical-align: top;">
<td><code>x</code></td>
<td>
<p>a <code>spam</code> matrix, a vector or a scalar.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>nrow, ncol</code></td>
<td>
<p>Optional dimensions for the result.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>value</code></td>
<td>
<p>either a single value or a vector of length equal to that of
the current diagonal.</p>
</td>
</tr>
</table>
<h3>Details</h3>

<p>Using <code>diag(x)</code> can have unexpected effects if <code>x</code> is a vector
that could be of length one. Use <code>diag(x, nrow = length(x))</code> for
consistent behaviour.
</p>


<h3>Value</h3>

<p>If <code>x</code> is a spam matrix then <code>diag(x)</code> returns the diagonal of <code>x</code>.
</p>
<p>The assignment form sets the diagonal of the sparse matrix <code>x</code> to the
given value(s).<br></p>
<p><code>diag.spam</code> works as <code>diag</code> for spam matrices:
If <code>x</code> is a vector (or 1D array) of length two or more, then
<code>diag.spam(x)</code> returns a diagonal matrix whose diagonal is
<code>x</code>.
<code>spam_diag</code> is an alias for  <code>diag.spam</code> and in the spirit
of the result of <code>diag</code> is a <code>spam</code> object.
</p>
<p>If <code>x</code> is a vector of length one then <code>diag.spam(x)</code> returns an
identity matrix of order the nearest integer to <code>x</code>.  The
dimension of the returned matrix can be specified by <code>nrow</code> and
<code>ncol</code> (the default is square).
</p>
<p>The assignment form sets the diagonal of the matrix <code>x</code> to the
given value(s).
</p>


<h3>Author(s)</h3>

<p>Reinhard Furrer</p>


<h3>See Also</h3>

<p><code>upper.tri</code>, <code>lower.tri</code>.
</p>


<h3>Examples</h3>

<pre><code class="language-R">diag.spam(2, 4)           # 2*I4
smat &lt;- diag.spam(1:5)
diag( smat)
diag( smat) &lt;- 5:1

# The last line is equivalent to 
diag.spam( smat) &lt;- 5:1

# Note that diag.spam( 1:5) &lt;- 5:1 not work of course.


</code></pre>


</div>