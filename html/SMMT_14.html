<div class="container">

<table style="width: 100%;"><tr>
<td>territorial_mutation_count</td>
<td style="text-align: right;">R Documentation</td>
</tr></table>
<h2>Territorial mutation coutn</h2>

<h3>Description</h3>

<p>Count number of mutations in a given time period
</p>


<h3>Usage</h3>

<pre><code class="language-R">territorial_mutation_count(mutations, start_date, end_date = Sys.Date())
</code></pre>


<h3>Arguments</h3>

<table>
<tr style="vertical-align: top;">
<td><code>mutations</code></td>
<td>
<p>A tibble containing the municipality mutations inventory (see
<code>import_CH_municipality_inventory</code>)</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>start_date</code></td>
<td>
<p>Date vector (incl)</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>end_date</code></td>
<td>
<p>Date vector (excluded)</p>
</td>
</tr>
</table>
<h3>Details</h3>

<p><strong>Approach</strong>
</p>

<ol>
<li>
<p> Download the <a href="https://www.bfs.admin.ch/bfsstatic/dam/assets/11467405/master">Swiss municipality inventory</a>
</p>
</li>
<li>
<p> Import it into R workspace with <code>import_CH_municipality_inventory</code>
</p>
</li>
<li>
<p> Set the old state and the new state (see example)
</p>
</li>
<li>
<p> Get the mapping table with this function
</p>
</li>
</ol>
<p><strong>Example Daettwil / Baden</strong>
</p>
<p>On 1.1.1962 Daettwil (Bfs Nr. 4025) merged with Baden (Bfs Nr. 4021). 
Let's define </p>
 <ul>
<li>
<p> old_state &lt;- as.Date("1961-01-01") </p>
</li>
<li>
<p>new_state &lt;- as.Date("1963-01-01") </p>
</li>
<li>
<p> Result: </p>

<table>
<tr>
<td style="text-align: right;">
bfs_nr_new </td>
<td style="text-align: right;"> name_new </td>
<td style="text-align: right;"> bfs_nr_old </td>
<td style="text-align: right;"> name_old </td>
</tr>
<tr>
<td style="text-align: right;"> 4021 </td>
<td style="text-align: right;"> Baden </td>
<td style="text-align: right;"> 4021 </td>
<td style="text-align: right;"> Baden </td>
</tr>
<tr>
<td style="text-align: right;"> 4021 </td>
<td style="text-align: right;"> Baden </td>
<td style="text-align: right;">
4025 </td>
<td style="text-align: right;"> Daettwil </td>
</tr>
</table>
</li>
</ul>
<h3>Value</h3>

<p>A list with 4 elements:
</p>

<ol>
<li>
<p> mapped: A tibble with the mapped municipalities
</p>
</li>
<li>
<p> unmapped: A tibble with the unmapped municipalities
</p>
</li>
<li>
<p> state_old: see above
</p>
</li>
<li>
<p> state_new: see above
</p>
</li>
</ol>
<h3>Examples</h3>

<pre><code class="language-R">
mutations &lt;- structure(list(hist_id = c(11227L, 11240L, 13189L),
district_hist_id = c(10025L, 10025L, 10025L),
kanton_abbr = c("AG", "AG", "AG"),
bfs_nr = c(4025L, 4021L, 4021L),
name = c("Daettwil", "Baden", "Baden"),
admission_nr = c(1000L, 1000L, 1004L),
admission_mode = c(20L, 20L, 26L),
admission_date = structure(c(-3653, -3653, -2922),
class = c("Date")),
abolition_nr = c(1004L, 1004L, NA),
abolition_mode = c(29L, 26L, NA),
abolition_date = structure(c(-2923, -2923, NA),
class = c("Date")),
change_date = structure(c(-2923, -2923, -2922), class = c("Date"))),
row.names = c(NA, -3L), class = c("tbl_df", "tbl", "data.frame"))

mapping_object &lt;- map_old_to_new_state(mutations,
as.Date("1961-01-01"), as.Date("1963-01-01"))

</code></pre>


</div>