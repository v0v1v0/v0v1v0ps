<div class="container">

<table style="width: 100%;"><tr>
<td>sparseRBIC_step</td>
<td style="text-align: right;">R Documentation</td>
</tr></table>
<h2>Fit a ranked-sparsity model with forward stepwise RBIC (experimental)</h2>

<h3>Description</h3>

<p>Fit a ranked-sparsity model with forward stepwise RBIC (experimental)
</p>


<h3>Usage</h3>

<pre><code class="language-R">sparseRBIC_step(
  formula,
  data,
  family = c("gaussian", "binomial", "poisson"),
  k = 1,
  poly = 1,
  ic = c("RBIC", "RAIC", "BIC", "AIC", "EBIC"),
  hier = c("strong", "weak", "none"),
  sequential = (hier[1] != "none"),
  cumulative_k = FALSE,
  cumulative_poly = TRUE,
  pool = FALSE,
  ia_formula = NULL,
  pre_process = TRUE,
  model_matrix = NULL,
  y = NULL,
  poly_prefix = "_poly_",
  int_sep = "\\:",
  pre_proc_opts = c("knnImpute", "scale", "center", "otherbin", "none"),
  filter = c("nzv", "zv"),
  extra_opts = list(),
  trace = 0,
  message = TRUE,
  ...
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr style="vertical-align: top;">
<td><code>formula</code></td>
<td>
<p>Names of the terms</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>data</code></td>
<td>
<p>Data</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>family</code></td>
<td>
<p>The family of the model</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>k</code></td>
<td>
<p>The maximum order of interactions to consider</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>poly</code></td>
<td>
<p>The maximum order of polynomials to consider</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>ic</code></td>
<td>
<p>The information criterion to use</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>hier</code></td>
<td>
<p>Should hierarchy be enforced (weak or strong)? Must be set
with sequential == TRUE (see details)</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>sequential</code></td>
<td>
<p>Should the main effects be considered first, orders
sequentially added/considered?</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>cumulative_k</code></td>
<td>
<p>Should penalties be increased cumulatively as order
interaction increases?</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>cumulative_poly</code></td>
<td>
<p>Should penalties be increased cumulatively as order
polynomial increases?</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>pool</code></td>
<td>
<p>Should interactions of order k and polynomials of order k+1 be
pooled together for calculating the penalty?</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>ia_formula</code></td>
<td>
<p>formula to be passed to step_interact via terms argument</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>pre_process</code></td>
<td>
<p>Should the data be preprocessed (if FALSE, must provide
model_matrix)</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>model_matrix</code></td>
<td>
<p>A data frame or matrix specifying the full model matrix
(used if !pre_process)</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>y</code></td>
<td>
<p>A vector of responses (used if !pre_process)</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>poly_prefix</code></td>
<td>
<p>If model_matrix is specified, what is the prefix for
polynomial terms?</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>int_sep</code></td>
<td>
<p>If model_matrix is specified, what is the separator for
interaction terms?</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>pre_proc_opts</code></td>
<td>
<p>List of preprocessing steps (see details)</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>filter</code></td>
<td>
<p>The type of filter applied to main effects + interactions</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>extra_opts</code></td>
<td>
<p>A list of options for all preprocess steps (see details)</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>trace</code></td>
<td>
<p>Should intermediate results of model selection process be output</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>message</code></td>
<td>
<p>should experimental message be suppressed</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>...</code></td>
<td>
<p>additional arguments for running stepwise selection</p>
</td>
</tr>
</table>
<h3>Details</h3>

<p>This function mirrors <code>sparseR</code> but uses stepwise selection guided by RBIC.
</p>
<p>Additionally, setting <code>cumulative_poly</code> or <code>cumulative_k</code> to <code>TRUE</code> increases
the penalty cumulatively based on the order of either polynomial or
interaction.
</p>
<p>The <code>hier</code> hierarchy enforcement will only work if <code>sequential == TRUE</code>, and
notably will only consider the "first gen" hierarchy, that is, that all
main effects which make up an interaction are already in the model. It
is therefore possible for a third order interaction (x1:x2:x3) to
enter a model without x1:x2 or x2:x3, so long as x1, x2, and x3 are all
in the model.
</p>
<p>The options that can be passed to <code>pre_proc_opts</code> are:
</p>

<ul>
<li>
<p> knnImpute (should
missing data be imputed?)
</p>
</li>
<li>
<p> scale (should data be standardized)?
</p>
</li>
<li>
<p> center
(should data be centered to the mean or another value?)
</p>
</li>
<li>
<p> otherbin (should
factors with low prevalence be combined?)
</p>
</li>
<li>
<p> none (should no preprocessing be
done? can also specify a null object)
</p>
</li>
</ul>
<p>The options that can be passed to <code>extra_opts</code> are:
</p>

<ul>
<li>
<p> centers (named numeric
vector which denotes where each covariate should be centered)
</p>
</li>
<li>
<p> center_fn
(alternatively, a function can be specified to calculate center such as <code>min</code>
or <code>median</code>)
</p>
</li>
<li>
<p> freq_cut, unique_cut (see ?step_nzv - these get used by the
filtering steps)
</p>
</li>
<li>
<p> neighbors (the number of neighbors for knnImpute)
</p>
</li>
<li>
<p> one_hot (see ?step_dummy), this defaults to cell-means coding which can be
done in regularized regression (change at your own risk)
</p>
</li>
<li>
<p> raw (should polynomials not be orthogonal? defaults to true because variables are
centered and scaled already by this point by default)
</p>
</li>
</ul>
<h3>Value</h3>

<p>an object of class <code>sparseRBIC</code> containing the following:
</p>
<table>
<tr style="vertical-align: top;">
<td><code>fit</code></td>
<td>
<p>the final fit object</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>srprep</code></td>
<td>
<p>a <code>recipes</code> object used to prep the data</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>pen_info</code></td>
<td>
<p>coefficient-level variable counts, types + names</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>data</code></td>
<td>
<p>the (unprocessed) data</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>family</code></td>
<td>
<p>the family argument (for non-normal, eg. poisson)</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>info</code></td>
<td>
<p>a list containing meta-info about the procedure</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>stats</code></td>
<td>
<p>the IC for each fit and respective terms included</p>
</td>
</tr>
</table>
</div>