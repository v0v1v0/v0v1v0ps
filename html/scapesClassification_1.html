<div class="container">

<table style="width: 100%;"><tr>
<td>anchor.cell</td>
<td style="text-align: right;">R Documentation</td>
</tr></table>
<h2>Cell numbers to class vector</h2>

<h3>Description</h3>

<p>Converts a vector of cell numbers into a class vector.
</p>


<h3>Usage</h3>

<pre><code class="language-R">anchor.cell(
  attTbl,
  r,
  anchor,
  class,
  classVector = NULL,
  class2cell = TRUE,
  class2nbs = TRUE,
  overwrite_class = FALSE,
  plot = FALSE,
  writeRaster = NULL,
  overWrite = FALSE
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr style="vertical-align: top;">
<td><code>attTbl</code></td>
<td>
<p>data.frame, the attribute table returned by the function
<code>attTbl</code>.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>r</code></td>
<td>
<p>single or multi-layer raster of the class <code>SpatRaster</code> (see
<code>help("rast", terra)</code>) used to compute the <code>attTbl</code>.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>anchor</code></td>
<td>
<p>integer vector of raster cell numbers.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>class</code></td>
<td>
<p>numeric, the classification number to assign to all cells that
meet the function conditions.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>classVector</code></td>
<td>
<p>numeric vector, if provided, it defines the cells in the
attribute table that have already been classified and that have to be
ignored by the function (unless the argument <code>overwrite_class =
  TRUE</code>).</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>class2cell</code></td>
<td>
<p>logic, attribute the classification number to the cells of
the argument <code>anchor</code>. If there is a <code>classVector</code> input, the
classification number is only assigned to <code>classVector</code> NA-cells.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>class2nbs</code></td>
<td>
<p>logic, attribute the classification number to cells adjacent
to the ones of the argument <code>anchor</code>. If there is a <code>classVector</code>
input, the classification number is only assigned to <code>classVector</code>
NA-cells.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>overwrite_class</code></td>
<td>
<p>logic, if there is a <code>classVector</code> input,
reclassify cells that were already classified and that meet the function
conditions.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>plot</code></td>
<td>
<p>logic, plot the class vector output.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>writeRaster</code></td>
<td>
<p>filename, if a raster name is provided, save the class
vector in a raster file.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>overWrite</code></td>
<td>
<p>logic, if the raster names already exist, the existing file
is overwritten.</p>
</td>
</tr>
</table>
<h3>Details</h3>

<p>Converts a vector of cell numbers into a class vector. If there is a
<code>classVector</code> input, then the class vector is updated assigning a
classification number to all cells that meet the function conditions.
</p>


<h3>Value</h3>

<p>Update <code>classVector</code> with the new cells that were classified by
the function. If there is no <code>classVector</code> input, the function returns
a new class vector. See <code>conditions</code> for more details about
class vectors.
</p>


<h3>See Also</h3>

<p><code>conditions()</code>, <code>anchor.svo()</code>, <code>attTbl()</code>
</p>


<h3>Examples</h3>

<pre><code class="language-R"># DUMMY DATA
################################################################################
# LOAD LIBRARIES AND DATA
library(scapesClassification)
library(terra)

# CELL NUMBERS OF A DUMMY RASTER (7X7)
r_cn &lt;- terra::rast(matrix(1:49, nrow = 7, byrow = TRUE), extent=c(0,1,0,1))

# COMPUTE ATTRIBUTE TABLE AND LIST OF NEIGHBORHOODS
at  &lt;- attTbl(r_cn, "dummy_var")
nbs &lt;- ngbList(r_cn)
################################################################################

################################################################################
# ANCHOR.CELL
################################################################################
cv1  &lt;- anchor.cell(attTbl = at, r = r_cn, anchor = 1:7, class  = 10,
                    class2cell = TRUE, class2nbs  = FALSE)

cv2 &lt;- anchor.cell(attTbl = at, r = r_cn, anchor = 1:7, class  = 10,
                   class2cell = FALSE, class2nbs  = TRUE)

cv3 &lt;- anchor.cell(attTbl = at, r = r_cn, anchor = 1:7, class  = 10,
                   class2cell = TRUE, class2nbs  = TRUE)

# Convert class vectors to rasters
r_cv1 &lt;- cv.2.rast(r = r_cn, index = at$Cell, classVector = cv1)
r_cv2 &lt;- cv.2.rast(r = r_cn, index = at$Cell, classVector = cv2)
r_cv3 &lt;- cv.2.rast(r = r_cn, index = at$Cell, classVector = cv3)
################################################################################

################################################################################
# PLOTS
################################################################################
oldpar &lt;- par(mfrow = c(2,2))
m = c(1, 3.5, 2.5, 3.5)

# 1)
plot(r_cv1,type="classes",axes=FALSE,legend=FALSE,asp=NA,colNA="#818792",col="#78b2c4",mar=m)
text(r_cn)
mtext(side=3, line=1, adj=0, cex=1, font=2, "ANCHOR.CELL")
mtext(side=3, line=0, adj=0, cex=0.9, "anchor cells '1:7'")
mtext(side=1, line=0, cex=0.9, adj=0, "class2cell = TRUE; class2nbs = FALSE")
legend("bottomright", ncol = 1, bg = "white", fill = c("#78b2c4", "#818792"),
       legend = c("Classified cells","Unclassified cells"))

# 2)
plot(r_cv2,type="classes",axes=FALSE,legend=FALSE,asp=NA,colNA="#818792",col="#78b2c4",mar=m)
text(r_cn)
mtext(side=3, line=1, adj=0, cex=1, font=2, "ANCHOR.CELL")
mtext(side=3, line=0, adj=0, cex=0.9, "anchor cells '1:7'")
mtext(side=1, line=0, cex=0.9, adj=0, "class2cell = FALSE; class2nbs = TRUE")
legend("bottomright", ncol = 1, bg = "white", fill = c("#78b2c4", "#818792"),
       legend = c("Classified cells","Unclassified cells"))

# 3)
plot(r_cv3,type="classes",axes=FALSE,legend=FALSE,asp=NA,colNA="#818792",col="#78b2c4",mar=m)
text(r_cn)
mtext(side=3, line=1, adj=0, cex=1, font=2, "ANCHOR.CELL")
mtext(side=3, line=0, adj=0, cex=0.9, "anchor cells '1:7'")
mtext(side=1, line=0, cex=0.9, adj=0, "class2cell = TRUE; class2nbs = TRUE")
legend("bottomright", ncol = 1, bg = "white", fill = c("#78b2c4", "#818792"),
       legend = c("Classified cells","Unclassified cells"))
par(oldpar)
</code></pre>


</div>