<div class="container">

<table style="width: 100%;"><tr>
<td>comp.cont</td>
<td style="text-align: right;">R Documentation</td>
</tr></table>
<h2>Empirical comparison of two estimated distributions of the same continuous variable</h2>

<h3>Description</h3>

<p>This function estimates the “closeness” of distributions of the same continuous variable(s) but estimated from different data sources.
</p>


<h3>Usage</h3>

<pre><code class="language-R">comp.cont(data.A, data.B, xlab.A, xlab.B = NULL, w.A = NULL, w.B = NULL, ref = FALSE) 
</code></pre>


<h3>Arguments</h3>

<table>
<tr style="vertical-align: top;">
<td><code>data.A</code></td>
<td>

<p>A dataframe or matrix containing the variable of interest <code>xlab.A</code> and eventual survey weights <code>w.A</code>. 
</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>data.B</code></td>
<td>
 
<p>A dataframe or matrix containing the variable of interest <code>xlab.B</code> and eventual associated survey weights <code>w.B</code>. 
</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>xlab.A</code></td>
<td>

<p>Character string providing the name of the variable in <code>data.A</code> whose estimated distribution should be compared with that estimated from <code>data.B</code>.
</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>xlab.B</code></td>
<td>

<p>Character string providing the name of the variable in <code>data.B</code> whose distribution should be  compared with that estimated from <code>data.A</code>. If <code>xlab.B=NULL</code> (default) then it assumed <code>xlab.B=xlab.A</code>.
</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>w.A</code></td>
<td>

<p>Character string providing the name of the optional weighting variable in <code>data.A</code> that, in case, should be used to estimate the distribution of <code>xlab.A</code>
</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>w.B</code></td>
<td>

<p>Character string providing the name of the optional weighting variable in <code>data.B</code> that, in case, should be used to estimate the distribution of <code>xlab.B</code>
</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>ref</code></td>
<td>

<p>Logical.  When <code>ref = TRUE</code>, the distribution of <code>xlab.B</code> estimated from <code>data.B</code> is considered the reference distribution (true or reliable estimate of distribution). Affects some estimation procedures as explained in the Details. 
</p>
</td>
</tr>
</table>
<h3>Details</h3>

<p>As a first output, the function returns some well–known summary measures (min, Q1, median, mean, Q3, max and sd) estimated from the available input data sources. 
</p>
<p>Secondly this function performs a comparison between the  quantiles estimated from <code>data.A</code> and <code>data.B</code>; in particular, the average of the absolute value of the differences as well as the average of the squared differences are returned. The number of estimated percentiles depends on the minimum between the two sample sizes. Only quartiles are calculated when min(n.A, n.B)&lt;=50; quintiles are estimated when min(n.A, n.B)&gt;50 and min(n.A, n.B)&lt;=150; deciles are estimated when min(n.A, n.B)&gt;150 and min(n.A, n.B)&lt;=250; finally quantiles for <code>probs=seq(from = 0.05,to = 0.95,by = 0.05)</code> are estimated when min(n.A, n.B)&gt;250. When the survey weights are available (indicated with th arguments <code>w.A</code> and/or <code>w.B</code>) they are used in estimating the quantiles by calling the function <code>wtd.quantile</code> in the package <span class="pkg">Hmisc</span>.
</p>
<p>The function estimates also the dissimilarities between the estimated empirical distribution function. The measures considered are the maximum of the absolute differences, the sum between the maximum differences inverting the terms in the difference and the average of the absolute value of the differences. When the weights are provided they are used in estimating the empirical cumulative distribution function. Note that when <code>ref=TRUE</code> the estimation of the density and of the empirical cumulative distribution are guided by the data in <code>data.B</code>.
</p>
<p>The final output is the total variation distance, the overlap and the Hellinger distance calculated considering the transformed categorized variable. The breaks to categorize the variable are decided according to the Freedman-Diaconis rule (<code>nclass</code>) and, in this case, when <code>ref=TRUE</code> the IQR is estimated solely on <code>data.B</code>, whereas with <code>ref=FALSE</code> it is estimated by joining the two data sources. 
When present, the weights are used in estimating the relative frequencies of the categorized variable. 
For additional details on these distances please see (<code>comp.prop</code>)
</p>


<h3>Value</h3>

<p>A <code>list</code> object with four components. 
</p>
<table>
<tr style="vertical-align: top;">
<td><code>summary</code></td>
<td>
<p>A matrix with summaries of <code>xlab.A</code> estimated on <code>data.A</code> and summaries of <code>xlab.B</code> estimated on <code>data.B</code></p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>diff.Qs</code></td>
<td>
<p> Average of absolute and squared differences between the quantiles of <code>xlab.A</code> estimated on <code>data.A</code> and the corresponding ones of <code>xlab.B</code> estimated on <code>data.B</code></p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>dist.ecdf</code></td>
<td>
<p>Dissimilarity measures between the estimated empirical cumulative distribution functions.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>dist.discr</code></td>
<td>
<p>Distance between the distributions after discretization of the target variable.</p>
</td>
</tr>
</table>
<h3>Author(s)</h3>

<p>Marcello D'Orazio <a href="mailto:mdo.statmatch@gmail.com">mdo.statmatch@gmail.com</a> 
</p>


<h3>References</h3>

<p>Bellhouse D.R. and J. E. Stafford (1999). “Density Estimation from Complex Surveys”. <em>Statistica Sinica</em>, <b>9</b>, 407–424.
</p>


<h3>See Also</h3>

 
<p><code>plotCont</code>, <code>comp.prop</code> 
</p>


<h3>Examples</h3>

<pre><code class="language-R">data(samp.A)
data(samp.B)

comp.cont(data.A = samp.A, data.B = samp.B, xlab.A = "age")

comp.cont(data.A = samp.A, data.B = samp.B, xlab.A = "age",
          w.A = "ww", w.B = "ww")

</code></pre>


</div>