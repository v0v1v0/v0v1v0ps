<div class="container">

<table style="width: 100%;"><tr>
<td>airdas_segdata</td>
<td style="text-align: right;">R Documentation</td>
</tr></table>
<h2>Summarize AirDAS data for a continuous effort section</h2>

<h3>Description</h3>

<p>Summarize AirDAS effort data by effort segment, while averaging conditions
</p>


<h3>Usage</h3>

<pre><code class="language-R">airdas_segdata(x, ...)

## S3 method for class 'data.frame'
airdas_segdata(x, ...)

## S3 method for class 'airdas_df'
airdas_segdata(
  x,
  conditions,
  segdata.method = c("avg", "maxdist"),
  seg.lengths,
  section.id,
  ...
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr style="vertical-align: top;">
<td><code>x</code></td>
<td>
<p><code>airdas_df</code> object, 
or a data frame that can be coerced to a <code>airdas_df</code> object.
Must contain a single continuous effort section of AirDAS data; 
see the Details section below</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>...</code></td>
<td>
<p>ignored</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>conditions</code></td>
<td>
<p>see <code>airdas_effort</code>, or
see Details section for more information</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>segdata.method</code></td>
<td>
<p>character; either <code>"avg"</code> or <code>"maxdist"</code>.
<code>"avg"</code> means the condition values will be
calculated as a weighted average by distance, while
<code>"maxdist"</code> means the condition values will be those recorded
for the longest distance during that segment</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>seg.lengths</code></td>
<td>
<p>numeric; length of the modeling segments 
into which <code>x</code> will be chopped</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>section.id</code></td>
<td>
<p>numeric; the ID of <code>x</code> (the current continuous effort section)</p>
</td>
</tr>
</table>
<h3>Details</h3>

<p>WARNING - do not call this function directly!
It is exported for documentation purposes, but is intended for internal package use only.
</p>
<p>This function was designed to be called by one of the airdas_chop_ functions, 
e.g. <code>airdas_chop_equallength</code>, and thus 
users should avoid calling it themselves.
It loops through the events in <code>x</code>, calculating and storing relevant
information for each modeling segment as it goes. 
Because <code>x</code> is a continuous effort section, it must begin with 
a "T" or "R" event and end with the corresponding "E" or "O" event.
</p>
<p>For each segment, this function reports the 
segment ID, transect code, the start/end/mid coordinates (lat/lon),
start/end/mid date/times (DateTime), segment length, 
year, month, day, time, observers, 
and average conditions (which are specified by <code>conditions</code>).
The segment ID is designated as <code>section.id</code> _ index of the modeling segment.
Thus, if <code>section.id</code> is <code>1</code>, then the segment ID for 
the second segment from <code>x</code> is <code>"1_2"</code>.
</p>
<p>When <code>segdata.method</code> is <code>"avg"</code>, the condition values are
calculated as a weighted average by distance.
The reported value for logical columns (e.g. Haze) is the percentage
(in decimals) of the segment in which that condition was <code>TRUE</code>.
For character columns, the reported value for each segment is
the unique value(s) present in the segment, with <code>NA</code>s omitted,
pasted together via <code>paste(..., collapse = "; ")</code>.
When <code>segdata.method</code> is <code>"maxdist"</code>, the reported values
are, for each condition, the value recorded for the longest distance
during that segment (with <code>NA</code>s omitted).
</p>
<p>Transect code, file name, and vent code that started the continuous effort section 
are also included in the segdata output.
These values (excluding <code>NA</code>s) must be consistent across the
entire effort section, and thus across all segments in <code>x</code>;
a warning is printed if there are any inconsistencies.
</p>
<p><code>bearing</code> and <code>destination</code>
are used to calculate the segment start, mid, and end points,
with <code>method = "vincenty"</code>.
</p>


<h3>Value</h3>

<p>Data frame with the segdata information described above
and in <code>airdas_effort</code>
</p>


</div>