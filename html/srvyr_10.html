<div class="container">

<table style="width: 100%;"><tr>
<td>as_survey</td>
<td style="text-align: right;">R Documentation</td>
</tr></table>
<h2>Create a tbl_svy from a data.frame</h2>

<h3>Description</h3>

<p><code>as_survey</code> can be used to create a <code>tbl_svy</code> using design information
(<code>as_survey_design</code>), replicate weights (<code>as_survey_rep</code>),
or a two phase design (<code>as_survey_twophase</code>), or an object created by the
survey package.
</p>


<h3>Usage</h3>

<pre><code class="language-R">as_survey(.data, ...)

## S3 method for class 'tbl_svy'
as_survey(.data, ...)

## S3 method for class 'data.frame'
as_survey(.data, ...)

## S3 method for class 'tbl_lazy'
as_survey(.data, ...)

## S3 method for class 'survey.design2'
as_survey(.data, ...)

## S3 method for class 'svyrep.design'
as_survey(.data, ...)

## S3 method for class 'twophase2'
as_survey(.data, ...)
</code></pre>


<h3>Arguments</h3>

<table>
<tr style="vertical-align: top;">
<td><code>.data</code></td>
<td>
<p>a data.frame or an object from the survey package</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>...</code></td>
<td>
<p>other arguments, see other functions for details</p>
</td>
</tr>
</table>
<h3>Details</h3>

<p>See <code>vignette("databases", package = "dplyr")</code>
for more information on setting up databases in dplyr.
</p>


<h3>Value</h3>

<p>a tbl_svy
</p>


<h3>Examples</h3>

<pre><code class="language-R"># Examples from ?survey::svydesign
library(survey)
library(dplyr)
data(api)

# stratified sample
dstrata &lt;- apistrat %&gt;%
  as_survey(strata = stype, weights = pw)

# Examples from ?survey::svrepdesign
data(scd)
# use BRR replicate weights from Levy and Lemeshow
scd$rep1 &lt;- 2 * c(1, 0, 1, 0, 1, 0)
scd$rep2 &lt;- 2 * c(1, 0, 0, 1, 0, 1)
scd$rep3 &lt;- 2 * c(0, 1, 1, 0, 0, 1)
scd$rep4 &lt;- 2 * c(0, 1, 0, 1, 1, 0)

scdrep &lt;- scd %&gt;%
  as_survey(type = "BRR", repweights = starts_with("rep"),
                    combined_weights = FALSE)

# Examples from ?survey::twophase
# two-phase simple random sampling.
data(pbc, package="survival")

pbc &lt;- pbc %&gt;%
  mutate(randomized = !is.na(trt) &amp; trt &gt; 0,
         id = row_number())
d2pbc &lt;- pbc %&gt;%
  as_survey(id = list(id, id), subset = randomized)

# dplyr 0.7 introduced new style of NSE called quosures
# See `vignette("programming", package = "dplyr")` for details
st &lt;- quo(stype)
wt &lt;- quo(pw)
dstrata &lt;- apistrat %&gt;%
  as_survey(strata = !!st, weights = !!wt)
</code></pre>


</div>