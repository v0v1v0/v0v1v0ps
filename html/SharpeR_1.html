<div class="container">

<table style="width: 100%;"><tr>
<td>SharpeR-package</td>
<td style="text-align: right;">R Documentation</td>
</tr></table>
<h2>statistics concerning Sharpe ratio and Markowitz portfolio</h2>

<h3>Description</h3>

<p>Inference on Sharpe ratio and Markowitz portfolio.
</p>


<h3>Sharpe Ratio</h3>

<p>Suppose <code class="reqn">x_i</code> are <code class="reqn">n</code> independent draws of a normal random
variable with mean <code class="reqn">\mu</code> and variance <code class="reqn">\sigma^2</code>.
Let <code class="reqn">\bar{x}</code> be the sample mean, and <code class="reqn">s</code> be
the sample standard deviation (using Bessel's correction). Let <code class="reqn">c_0</code>
be the 'risk free' or 'disastrous rate' of return.  Then
</p>
<p style="text-align: center;"><code class="reqn">z = \frac{\bar{x} - c_0}{s}</code>
</p>
 
<p>is the (sample) Sharpe ratio.
</p>
<p>The units of <code class="reqn">z</code> are <code class="reqn">\mbox{time}^{-1/2}</code>.
Typically the Sharpe ratio is <em>annualized</em> by multiplying by
<code class="reqn">\sqrt{d}</code>, where <code class="reqn">d</code> is the number of observations
per year (or whatever the target annualization epoch.) It is <em>not</em>
common practice to include units when quoting Sharpe ratio, though
doing so could avoid confusion.
</p>
<p>The Sharpe ratio follows a rescaled non-central t distribution. That
is, <code class="reqn">z/K</code> follows a non-central t-distribution
with <code class="reqn">m</code> degrees of freedom and non-centrality parameter
<code class="reqn">\zeta / K</code>, for some <code class="reqn">K</code>, <code class="reqn">m</code> and <code class="reqn">\zeta</code>.
</p>
<p>We can generalize Sharpe's model to APT, wherein we write
</p>
<p style="text-align: center;"><code class="reqn">x_i = \alpha + \sum_j \beta_j F_{j,i} + \epsilon_i,</code>
</p>

<p>where the <code class="reqn">F_{j,i}</code> are observed 'factor returns', and
the variance of the noise term is <code class="reqn">\sigma^2</code>.
Via linear regression, one can compute estimates <code class="reqn">\hat{\alpha}</code>,
and <code class="reqn">\hat{\sigma}</code>, and then let the 'Sharpe ratio' be
</p>
<p style="text-align: center;"><code class="reqn">z = \frac{\hat{\alpha} - c_0}{\hat{\sigma}}.</code>
</p>

<p>As above, this Sharpe ratio follows a rescaled t-distribution
under normality, <em>etc.</em>
</p>
<p>The parameters are encoded as follows:
</p>

<ul>
<li> <p><code>df</code> stands for the degrees of freedom, typically <code class="reqn">n-1</code>, but
<code class="reqn">n-J-1</code> in general.
</p>
</li>
<li> <p><code class="reqn">\zeta</code> is denoted by <code>zeta</code>.
</p>
</li>
<li> <p><code class="reqn">d</code> is denoted by <code>ope</code>. ('Observations Per Year')
</p>
</li>
<li>
<p> For the APT form of Sharpe, <code>K</code> stands for the
rescaling parameter.
</p>
</li>
</ul>
<h3>Optimal Sharpe Ratio</h3>

<p>Suppose <code class="reqn">x_i</code> are <code class="reqn">n</code> independent draws of a <code class="reqn">q</code>-variate
normal random variable with mean <code class="reqn">\mu</code> and covariance matrix
<code class="reqn">\Sigma</code>. Let <code class="reqn">\bar{x}</code> be the (vector) sample mean, and 
<code class="reqn">S</code> be the sample covariance matrix (using Bessel's correction). Let
</p>
<p style="text-align: center;"><code class="reqn">Z(w) = \frac{w^{\top}\bar{x} - c_0}{\sqrt{w^{\top}S w}}</code>
</p>

<p>be the (sample) Sharpe ratio of the portfolio <code class="reqn">w</code>, subject to 
risk free rate <code class="reqn">c_0</code>.
</p>
<p>Let <code class="reqn">w_*</code> be the solution to the portfolio optimization problem:
</p>
<p style="text-align: center;"><code class="reqn">\max_{w: 0 &lt; w^{\top}S w \le R^2} Z(w),</code>
</p>

<p>with maximum value <code class="reqn">z_* = Z\left(w_*\right)</code>.
Then 
</p>
<p style="text-align: center;"><code class="reqn">w_* = R \frac{S^{-1}\bar{x}}{\sqrt{\bar{x}^{\top}S^{-1}\bar{x}}}</code>
</p>

<p>and
</p>
<p style="text-align: center;"><code class="reqn">z_* = \sqrt{\bar{x}^{\top} S^{-1} \bar{x}} - \frac{c_0}{R}</code>
</p>

<p>The variable <code class="reqn">z_*</code> follows an <em>Optimal Sharpe ratio</em>
distribution. For convenience, we may assume that the sample statistic
has been annualized in the same manner as the Sharpe ratio, that is 
by multiplying by <code class="reqn">d</code>, the number of observations per
epoch.
</p>
<p>The Optimal Sharpe Ratio distribution is parametrized by the number 
of assets, <code class="reqn">q</code>, the number of independent observations, <code class="reqn">n</code>, the 
noncentrality parameter, 
</p>
<p style="text-align: center;"><code class="reqn">\zeta_* = \sqrt{\mu^{\top}\Sigma^{-1}\mu},</code>
</p>

<p>the 'drag' term, <code class="reqn">c_0/R</code>, and the annualization factor, <code class="reqn">d</code>.
The drag term makes this a location family of distributions, and 
by default we assume it is zero.
</p>
<p>The parameters are encoded as follows:
</p>

<ul>
<li> <p><code class="reqn">q</code> is denoted by <code>df1</code>.
</p>
</li>
<li> <p><code class="reqn">n</code> is denoted by <code>df2</code>.
</p>
</li>
<li> <p><code class="reqn">\zeta_*</code> is denoted by <code>zeta.s</code>.
</p>
</li>
<li> <p><code class="reqn">d</code> is denoted by <code>ope</code>.
</p>
</li>
<li> <p><code class="reqn">c_0/R</code> is denoted by <code>drag</code>.
</p>
</li>
</ul>
<h3>Spanning and Hedging</h3>

<p>As above, let 
</p>
<p style="text-align: center;"><code class="reqn">Z(w) = \frac{w^{\top}\bar{x} - c_0}{\sqrt{w^{\top}S w}}</code>
</p>

<p>be the (sample) Sharpe ratio of the portfolio <code class="reqn">w</code>, subject to 
risk free rate <code class="reqn">c_0</code>.
</p>
<p>Let <code class="reqn">G</code> be a <code class="reqn">g \times q</code> matrix of 'hedge constraints'. 
Let <code class="reqn">w_*</code> be the solution to the portfolio optimization problem:
</p>
<p style="text-align: center;"><code class="reqn">\max_{w: 0 &lt; w^{\top}S w \le R^2,\,G S w = 0} Z(w),</code>
</p>

<p>with maximum value <code class="reqn">z_* = Z\left(w_*\right)</code>.
Then <code class="reqn">z_*^2</code> can be expressed as the difference of two squared
optimal Sharpe ratio random variables. A monotonic transform takes this
difference to the LRT statistic for portfolio spanning, first described by
Rao, and refined by Giri.
</p>


<h3>Legal Mumbo Jumbo</h3>

<p>SharpeR is distributed in the hope that it will be useful,
but WITHOUT ANY WARRANTY; without even the implied warranty of
MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
GNU Lesser General Public License for more details.
</p>


<h3>Note</h3>

<p>The following are still in the works:
</p>

<ol>
<li>
<p> Corrections for standard error based on skew, kurtosis and
autocorrelation.
</p>
</li>
<li>
<p> Tests on Sharpe under positivity constraint. (<em>c.f.</em> Silvapulle)
</p>
</li>
<li>
<p> Portfolio spanning tests.
</p>
</li>
<li>
<p> Tests on portfolio weights.
</p>
</li>
</ol>
<p>This package is maintained as a hobby.
</p>


<h3>Author(s)</h3>

<p>Steven E. Pav <a href="mailto:shabbychef@gmail.com">shabbychef@gmail.com</a>
</p>


<h3>References</h3>

<p>Sharpe, William F. "Mutual fund performance." Journal of business (1966): 119-138.
<a href="https://ideas.repec.org/a/ucp/jnlbus/v39y1965p119.html">https://ideas.repec.org/a/ucp/jnlbus/v39y1965p119.html</a>
</p>
<p>Johnson, N. L., and Welch, B. L. "Applications of the non-central t-distribution."
Biometrika 31, no. 3-4 (1940): 362-389. doi: <a href="https://doi.org/10.1093/biomet/31.3-4.362">10.1093/biomet/31.3-4.362</a>
</p>
<p>Lo, Andrew W. "The statistics of Sharpe ratios." Financial Analysts Journal 58, no. 4 
(2002): 36-52. <a href="https://www.ssrn.com/paper=377260">https://www.ssrn.com/paper=377260</a>
</p>
<p>Opdyke, J. D. "Comparing Sharpe Ratios: So Where are the p-values?" Journal of Asset
Management 8, no. 5 (2006): 308-336. <a href="https://www.ssrn.com/paper=886728">https://www.ssrn.com/paper=886728</a>
</p>
<p>Ledoit, O., and Wolf, M. "Robust performance hypothesis testing with the 
Sharpe ratio." Journal of Empirical Finance 15, no. 5 (2008): 850-859.
doi: <a href="https://doi.org/10.1016/j.jempfin.2008.03.002">10.1016/j.jempfin.2008.03.002</a>
</p>
<p>Giri, N. "On the likelihood ratio test of a normal multivariate testing problem."
Annals of Mathematical Statistics 35, no. 1 (1964): 181-189. 
doi: <a href="https://doi.org/10.1214/aoms/1177703740">10.1214/aoms/1177703740</a>
</p>
<p>Rao, C. R. "Advanced Statistical Methods in Biometric Research." Wiley
(1952).
</p>
<p>Rao, C. R. "On Some Problems Arising out of Discrimination with Multiple 
Characters." Sankhya, 9, no. 4 (1949): 343-366.
<a href="https://www.jstor.org/stable/25047988">https://www.jstor.org/stable/25047988</a>
</p>
<p>Kan, Raymond and Smith, Daniel R. "The Distribution of the Sample Minimum-Variance Frontier."
Journal of Management Science 54, no. 7 (2008): 1364–1380.
doi: <a href="https://doi.org/10.1287/mnsc.1070.0852">10.1287/mnsc.1070.0852</a>
</p>
<p>Kan, Raymond and Zhou, GuoFu. "Tests of Mean-Variance Spanning."
Annals of Economics and Finance 13, no. 1 (2012)
<a href="https://econpapers.repec.org/article/cufjournl/y_3a2012_3av_3a13_3ai_3a1_3akanzhou.htm">https://econpapers.repec.org/article/cufjournl/y_3a2012_3av_3a13_3ai_3a1_3akanzhou.htm</a>
</p>
<p>Britten-Jones, Mark. "The Sampling Error in Estimates of Mean-Variance 
Efficient Portfolio Weights." The Journal of Finance 54, no. 2 (1999):
655–671. <a href="https://www.jstor.org/stable/2697722">https://www.jstor.org/stable/2697722</a>
</p>
<p>Silvapulle, Mervyn. J. "A Hotelling's T2-type statistic for testing against 
one-sided hypotheses." Journal of Multivariate Analysis 55, no. 2 (1995):
312–319. doi: <a href="https://doi.org/10.1006/jmva.1995.1081">10.1006/jmva.1995.1081</a>
</p>
<p>Bodnar, Taras and Okhrin, Yarema. "On the Product of Inverse Wishart
and Normal Distributions with Applications to Discriminant Analysis 
and Portfolio Theory." Scandinavian Journal of Statistics 38, no. 2 (2011):
311–331. doi: <a href="https://doi.org/10.1111/j.1467-9469.2011.00729.x">10.1111/j.1467-9469.2011.00729.x</a>
</p>


</div>