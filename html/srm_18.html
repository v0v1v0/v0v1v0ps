<div class="container">

<table style="width: 100%;"><tr>
<td>srm</td>
<td style="text-align: right;">R Documentation</td>
</tr></table>
<h2>
Structural Equation Model for the Social Relations Model
</h2>

<h3>Description</h3>

<p>Provides an estimation routine for a multiple group structural equation model
for the social relations model (SRM; Kenny &amp; La Voie, 1984; Warner, Kenny, &amp; Soto, 1979).
The model is estimated by maximum likelihood (Gill &amp; Swartz, 2001;
Nestler, 2018).
</p>


<h3>Usage</h3>

<pre><code class="language-R">srm(model.syntax = NULL, data = NULL, group.var = NULL, rrgroup_name = NULL,
  person_names = c("Actor", "Partner"), fixed.groups = FALSE, var_positive = -1,
  optimizer = "srm", maxiter = 300, conv_dev = 1e-08, conv_par = 1e-06,
  do_line_search = TRUE, line_search_iter_max = 6, verbose = TRUE, use_rcpp = TRUE,
  shortcut = TRUE, use_woodbury = TRUE)

## S3 method for class 'srm'
coef(object, ...)
## S3 method for class 'srm'
vcov(object, ...)
## S3 method for class 'srm'
summary(object, digits=3, file=NULL, layout=1, ...)
## S3 method for class 'srm'
logLik(object, ...)
</code></pre>


<h3>Arguments</h3>

<table>
<tr style="vertical-align: top;">
<td><code>model.syntax</code></td>
<td>

<p>Syntax similar to <span class="pkg">lavaan</span> language, see Examples.
</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>data</code></td>
<td>

<p>Data frame containing round robin identifier variables and variables in the
round robin design
</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>group.var</code></td>
<td>

<p>Name of grouping variable
</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>rrgroup_name</code></td>
<td>

<p>Name of variable indicating round robin group
</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>person_names</code></td>
<td>

<p>Names for identifier variables for actors and partners
</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>fixed.groups</code></td>
<td>

<p>Logical indicating whether groups should be handled with fixed effects
</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>var_positive</code></td>
<td>

<p>Nonnegative value if variances are constrained to be positive
</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>optimizer</code></td>
<td>

<p>Optimizer to be used: <code>"srm"</code> for internal optimization using
Fisher scoring and <code>"nlminb"</code> for L-FBGS optimization.
</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>maxiter</code></td>
<td>

<p>Maximum number of iterations
</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>conv_dev</code></td>
<td>

<p>Convergence criterion for change relative deviance
</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>conv_par</code></td>
<td>

<p>Convergence criterion for change in parameters
</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>do_line_search</code></td>
<td>

<p>Logical indicating whether line search should be performed
</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>line_search_iter_max</code></td>
<td>

<p>Number of iterations during line search algorithm
</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>verbose</code></td>
<td>

<p>Logical indicating whether convergence progress should be displayed
</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>use_rcpp</code></td>
<td>

<p>Logical indicating whether <span class="pkg">Rcpp</span> package should be used
</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>shortcut</code></td>
<td>

<p>Logical indicating whether shortcuts for round robin groups with
same structure should be used
</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>use_woodbury</code></td>
<td>
<p>Logical indicating whether matrix inversion should
be simplified by Woodbury identity</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>object</code></td>
<td>
<p>Object of class <code>srm</code></p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>file</code></td>
<td>
<p>Optional file name for summary output</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>digits</code></td>
<td>
<p>Number of digits after decimal in summary output</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>layout</code></td>
<td>
<p>Different layouts (<code>1</code> or <code>2</code>) for layout of <code>summary</code></p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>...</code></td>
<td>
<p>Further arguments to be passed</p>
</td>
</tr>
</table>
<h3>Value</h3>

<p>List with following entries (selection)
</p>
<table>
<tr style="vertical-align: top;">
<td><code>parm.table</code></td>
<td>
<p>Parameter table with estimated values</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>coef</code></td>
<td>
<p>Vector of parameter estimates</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>vcov</code></td>
<td>
<p>Covariance matrix of parameter estimates</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>parm_list</code></td>
<td>
<p>List of model matrices</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>sigma</code></td>
<td>
<p>Model implied covariance matrices</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>...</code></td>
<td>
<p>Further values</p>
</td>
</tr>
</table>
<h3>References</h3>

<p>Gill, P. S., &amp; Swartz, T. B. (2001). Statistical analyses for round robin interaction
data. <em>Canadian Journal of Statistics, 29</em>(2), 321-331.
doi: <a href="https://doi.org/10.2307/3316080">10.2307/3316080</a>
</p>
<p>Kenny, D. A., &amp; La Voie, L. J. (1984).  The social relations model.  In L. Berkowitz (Ed.),
<em>Advances in experimental social psychology</em> (Vol. 18, pp. 142-182).
Orlando, FL: Academic. doi: <a href="https://doi.org/10.1016/S0065-2601(08)60144-6">10.1016/S0065-2601(08)60144-6</a>
</p>
<p>Nestler, S. (2018). Likelihood estimation of the multivariate social relations model.
<em>Journal of Educational and Behavioral Statistics, 43</em>(4), 387-406.
doi: <a href="https://doi.org/10.3102/1076998617741106">10.3102/1076998617741106</a>
</p>
<p>Warner, R. M., Kenny, D. A., &amp; Soto, M. (1979). A new round robin analysis of variance for
social interaction data. <em>Journal of Personality and Social Psychology, 37</em>(10),
1742-1757. doi: <a href="https://doi.org/10.1037/0022-3514.37.10.1742">10.1037/0022-3514.37.10.1742</a>
</p>


<h3>See Also</h3>

<p>See also <span class="pkg">TripleR</span> and <span class="pkg">amen</span> packages for alternative estimation
routines for the SRM.
</p>


<h3>Examples</h3>

<pre><code class="language-R">#############################################################################
# EXAMPLE 1: Univariate SRM
#############################################################################

data(data.srm01, package="srm")
dat &lt;- data.srm01

#-- define model
mf &lt;- '
%Person
F1@A =~ 1*Wert1@A
F1@P =~ 1*Wert1@P
Wert1@A ~~ 0*Wert1@A + 0*Wert1@P
Wert1@P ~~ 0*Wert1@P

%Dyad
F1@AP =~ 1*Wert1@AP
F1@PA =~ 1*Wert1@PA
Wert1@AP ~~ 0*Wert1@AP + 0*Wert1@PA
Wert1@PA ~~ 0*Wert1@PA
'

#-- estimate model
mod1 &lt;- srm::srm(mf, data = dat, rrgroup_name="Group", conv_par=1e-4, maxiter=20)
summary(mod1)
round(coef(mod1),3)


#############################################################################
# EXAMPLE 2: Bivariate SRM
#############################################################################

data(data.srm01, package="srm")
dat &lt;- data.srm01

#-- define model
mf &lt;- '
%Person
F1@A =~ 1*Wert1@A
F1@P =~ 1*Wert1@P
F2@A =~ 1*Wert2@A
F2@P =~ 1*Wert2@P
Wert1@A ~~ 0*Wert1@A + 0*Wert1@P
Wert1@P ~~ 0*Wert1@P
Wert2@A ~~ 0*Wert2@A + 0*Wert2@P
Wert2@P ~~ 0*Wert2@P

%Dyad
F1@AP =~ 1*Wert1@AP
F1@PA =~ 1*Wert1@PA
F2@AP =~ 1*Wert2@AP
F2@PA =~ 1*Wert2@PA
Wert1@AP ~~ 0*Wert1@AP + 0*Wert1@PA
Wert1@PA ~~ 0*Wert1@PA
Wert2@AP ~~ 0*Wert2@AP + 0*Wert2@PA
Wert2@PA ~~ 0*Wert2@PA
'

#-- estimate model
mod1 &lt;- srm::srm(mf, data = dat, rrgroup_name="Group", conv_par=1e-4, maxiter=20)
summary(mod1)

#############################################################################
# EXAMPLE 3: One-factor model
#############################################################################

data(data.srm01, package="srm")
dat &lt;- data.srm01

#-- define model
mf &lt;- '
# definition of factor for persons and dyad
%Person
f1@A=~Wert1@A+Wert2@A+Wert3@A
f1@P=~Wert1@P+Wert2@P+Wert3@P

%Dyad
f1@AP=~Wert1@AP+Wert2@AP+Wert3@AP

# define some constraints
Wert1@AP ~~ 0*Wert1@PA
Wert3@AP ~~ 0*Wert3@PA
'
#-- estimate model
mod1 &lt;- srm::srm(mf, data = dat, rrgroup_name="Group", conv_par=1e-4)
summary(mod1)
coef(mod1)

#- use stats::nlminb() optimizer
mod1 &lt;- srm::srm(mf, data = dat, rrgroup_name="Group", optimizer="nlminb", conv_par=1e-4)
summary(mod1)

</code></pre>


</div>