<div class="container">

<table style="width: 100%;"><tr>
<td>historyStack</td>
<td style="text-align: right;">R Documentation</td>
</tr></table>
<h2>history stack structure and methods</h2>

<h3>Description</h3>

<p>Some methods for a history stack data structure. It can store history
of certain repeating actions. For example, building the back-end of a file/image
editor, allow undo/redo actions.
</p>


<h3>Details</h3>


<ol>
<li>
<p> If the stack reaches the limit and you are trying to add more history, the
first history step will be removed , all history will be shift to the left
by one step and finally add the new step to the end.
</p>
</li>
<li>
<p> When history returning methods are called, like the <code>get()</code>, <code>forward()</code>, <code>backward()</code>
methods, it will not directly return the item saved, but a list, contains 4
components: 1. item, the actual item stored; 2. pos, current posistion value;
3. first, boolean value, if this history is stored on the first position of stack;
4. last, boolean value, if this history is stored on the last position of stack;
</p>
</li>
<li>
<p> If you <code>forward</code> beyond last step, or <code>backward</code> to prior the first
step, it will be stopped with errors.
</p>
</li>
<li>
<p> Starting  history stack with no initial history will return a special
stack, where the <code>pos = 0</code>, <code>len = 0</code>, <code>first = TRUE</code>, and <code>last = TRUE</code>.
This means you cannot move forward or backward. When you <code>get()</code>, it will be
an empty list <code>list()</code>. After adding any new history, <code>pos</code> will never be
0 again, it will always be a larger than 0 value.
</p>
</li>
</ol>
<h3>Value</h3>

<p>an R6 class object
</p>


<h3>Methods</h3>



<h4>Public methods</h4>


<ul>
<li> <p><a href="#method-new"><code>historyStack$new()</code></a>
</p>
</li>
<li> <p><a href="#method-clear"><code>historyStack$clear()</code></a>
</p>
</li>
<li> <p><a href="#method-get"><code>historyStack$get()</code></a>
</p>
</li>
<li> <p><a href="#method-getPos"><code>historyStack$getPos()</code></a>
</p>
</li>
<li> <p><a href="#method-status"><code>historyStack$status()</code></a>
</p>
</li>
<li> <p><a href="#method-forward"><code>historyStack$forward()</code></a>
</p>
</li>
<li> <p><a href="#method-backward"><code>historyStack$backward()</code></a>
</p>
</li>
<li> <p><a href="#method-add"><code>historyStack$add()</code></a>
</p>
</li>
<li> <p><a href="#method-clone"><code>historyStack$clone()</code></a>
</p>
</li>
</ul>
<hr>
<a id="method-new"></a>



<h4>Method <code>new()</code>
</h4>

<p>create the history object
</p>


<h5>Usage</h5>

<div class="r"><pre>historyStack$new(items = NULL, limit = 25, verbose = TRUE)</pre></div>



<h5>Arguments</h5>

<div class="arguments">

<dl>
<dt><code>items</code></dt>
<dd>
<p>list, initial history step items to store on start</p>
</dd>
<dt><code>limit</code></dt>
<dd>
<p>int, how many history steps can be stored in the stack,
default 25 steps</p>
</dd>
<dt><code>verbose</code></dt>
<dd>
<p>bool, print some verbose message?</p>
</dd>
</dl>
</div>


<hr>
<a id="method-clear"></a>



<h4>Method <code>clear()</code>
</h4>

<p>clear all history steps in the stack
</p>


<h5>Usage</h5>

<div class="r"><pre>historyStack$clear()</pre></div>


<hr>
<a id="method-get"></a>



<h4>Method <code>get()</code>
</h4>

<p>retrieve the history from a certain position in the stack
</p>


<h5>Usage</h5>

<div class="r"><pre>historyStack$get(pos = private$pos)</pre></div>



<h5>Arguments</h5>

<div class="arguments">

<dl>
<dt><code>pos</code></dt>
<dd>
<p>int, which position to get the history from, default is current
step.</p>
</dd>
</dl>
</div>


<hr>
<a id="method-getPos"></a>



<h4>Method <code>getPos()</code>
</h4>

<p>get current step position in the history stack
</p>


<h5>Usage</h5>

<div class="r"><pre>historyStack$getPos()</pre></div>


<hr>
<a id="method-status"></a>



<h4>Method <code>status()</code>
</h4>

<p>print out some status of the stack
</p>


<h5>Usage</h5>

<div class="r"><pre>historyStack$status()</pre></div>



<h5>Returns</h5>

<p>returns a list of <code>pos</code>: current position (int); <code>len</code>: current
length of the history stack (int); <code>limit</code>: history stack storing limit (int);
<code>first</code>: is current step position the first of the stack (bool);
<code>last</code>: is current step position the last of the stack (bool)
</p>


<hr>
<a id="method-forward"></a>



<h4>Method <code>forward()</code>
</h4>

<p>move one step forward in the history stack and return item
in that position
</p>


<h5>Usage</h5>

<div class="r"><pre>historyStack$forward()</pre></div>


<hr>
<a id="method-backward"></a>



<h4>Method <code>backward()</code>
</h4>

<p>move one step backward in the history stack and return item
in that position
</p>


<h5>Usage</h5>

<div class="r"><pre>historyStack$backward()</pre></div>


<hr>
<a id="method-add"></a>



<h4>Method <code>add()</code>
</h4>

<p>Add an item to the history and move one step forward
</p>


<h5>Usage</h5>

<div class="r"><pre>historyStack$add(item)</pre></div>



<h5>Arguments</h5>

<div class="arguments">

<dl>
<dt><code>item</code></dt>
<dd>
<p>any object you want to add to the stack. Everything store
in the item will be moved into a list, so even if item may be something
length &gt; 1, it will still be treated as a single item and single history
step.</p>
</dd>
</dl>
</div>



<h5>Details</h5>

<p>If current position is not the last position, and when a new
step item is added to the stack, all history records (items) after current
position will be removed before adding the new history item.
</p>


<hr>
<a id="method-clone"></a>



<h4>Method <code>clone()</code>
</h4>

<p>The objects of this class are cloneable with this method.
</p>


<h5>Usage</h5>

<div class="r"><pre>historyStack$clone(deep = FALSE)</pre></div>



<h5>Arguments</h5>

<div class="arguments">

<dl>
<dt><code>deep</code></dt>
<dd>
<p>Whether to make a deep clone.</p>
</dd>
</dl>
</div>




<h3>Examples</h3>

<pre><code class="language-R">his &lt;- historyStack$new()
# add some history
his$add(1)
his$add(2)
his$add(3)
his$add(4)
his$add(5)
# check status
his$status()
# get item at current history position
his$get()
# go back to previous step
his$backward()
# going back to step 2
his$backward()
his$backward()
# going forward 1 step tp step 3
his$forward()
# check current status
his$status()
# adding a new step at position 3 will remove the old step 4,5 before adding
his$add("new 4")
# only 3 steps + 1 new step = 4 steps left
his$status()
</code></pre>


</div>