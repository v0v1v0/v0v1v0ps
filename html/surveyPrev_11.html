<div class="container">

<table style="width: 100%;"><tr>
<td>clusterModel</td>
<td style="text-align: right;">R Documentation</td>
</tr></table>
<h2>Calculate cluster model estimates using beta binomial model</h2>

<h3>Description</h3>

<p>This function calculate smoothed direct estimates at given admin level.
</p>


<h3>Usage</h3>

<pre><code class="language-R">clusterModel(
  data,
  cluster.info,
  admin.info,
  admin,
  CI = 0.95,
  model = c("bym2", "iid"),
  stratification = FALSE,
  aggregation = FALSE,
  overdisp.mean = 0,
  overdisp.prec = 0.4
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr style="vertical-align: top;">
<td><code>data</code></td>
<td>
<p>dataframe that contains the indicator of interests, output of getDHSindicator function</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>cluster.info</code></td>
<td>
<p>dataframe that contains admin 1 and admin 2 information and coordinates for each cluster.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>admin.info</code></td>
<td>
<p>dataframe that contains population and urban/rural proportion at specific admin level</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>admin</code></td>
<td>
<p>admin level for the model</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>CI</code></td>
<td>
<p>Credible interval to be used. Default to 0.95.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>model</code></td>
<td>
<p>smoothing model used in the random effect. Options are independent ("iid") or spatial ("bym2").</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>stratification</code></td>
<td>
<p>whether or not to include urban/rural stratum.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>aggregation</code></td>
<td>
<p>whether or not report aggregation results.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>overdisp.mean</code></td>
<td>
<p>prior mean for logit(d), where d is the intracluster correlation.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>overdisp.prec</code></td>
<td>
<p>prior precision for logit(d), where d is the intracluster correlation.</p>
</td>
</tr>
</table>
<h3>Value</h3>

<p>This function returns the dataset that contain district name and population for given  tiff files and polygons of admin level,
</p>


<h3>Author(s)</h3>

<p>Qianyu Dong
</p>


<h3>Examples</h3>

<pre><code class="language-R">## Not run: 
geo &lt;- getDHSgeo(country = "Zambia", year = 2018)
data(ZambiaAdm1)
data(ZambiaAdm2)
data(ZambiaPopWomen)
cluster.info &lt;- clusterInfo(geo = geo,
                            poly.adm1 = ZambiaAdm1,
                            poly.adm2 = ZambiaAdm2)

dhsData &lt;- getDHSdata(country = "Zambia",
                                 indicator = "ancvisit4+",
                                 year = 2018)

data &lt;- getDHSindicator(dhsData, indicator = "ancvisit4")
admin.info1 &lt;- adminInfo(poly.adm = ZambiaAdm1,
                        admin = 1,
                        agg.pop =ZambiaPopWomen$admin1_pop,
                        proportion = ZambiaPopWomen$admin1_urban)
cl_res_ad1 &lt;- clusterModel(data=data,
                  cluster.info = cluster.info,
                  admin.info = admin.info1,
                  stratification = FALSE,
                  model = "bym2",
                  admin = 1,
                  aggregation = TRUE,
                  CI = 0.95)
cl_res_ad1$res.admin1

# compare with the DHS direct estimates
dhs_table &lt;- get_api_table(country = "ZM",
                           survey = "ZM2018DHS",
                           indicator = "RH_ANCN_W_N4P",
                           simplify = TRUE)
subset(dhs_table, ByVariableLabel == "Five years preceding the survey")


## End(Not run)

</code></pre>


</div>