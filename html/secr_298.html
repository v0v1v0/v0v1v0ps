<div class="container">

<table style="width: 100%;"><tr>
<td>BUGS</td>
<td style="text-align: right;">R Documentation</td>
</tr></table>
<h2>
Convert Data To Or From BUGS Format
</h2>

<h3>Description</h3>

<p>Convert data between ‘capthist’ and BUGS input format.
</p>


<h3>Usage</h3>

<pre><code class="language-R">
read.DA(DAlist, detector = "polygonX", units = 1, session = 1,
    Y = "Y", xcoord = "U1", ycoord = "U2", xmin = "Xl",
    xmax = "Xu", ymin = "Yl", ymax = "Yu", buffer = "delta",
    verify = TRUE)

write.DA(capthist, buffer, nzeros = 200, units = 1)

</code></pre>


<h3>Arguments</h3>

<table>
<tr style="vertical-align: top;">
<td><code>DAlist</code></td>
<td>
<p> list containing data in BUGS format </p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>detector</code></td>
<td>
<p> character value for detector type: ‘polygon’ or ‘polygonX’ </p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>units</code></td>
<td>
<p> numeric for scaling output coordinates</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>session</code></td>
<td>
<p>numeric or character label used in output</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>Y</code></td>
<td>
<p>character, name of binary detection history matrix (animals x occasions)</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>xcoord</code></td>
<td>
<p>character, name of matrix of x-coordinates for each detection in <code>Y</code></p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>ycoord</code></td>
<td>
<p>character, name of matrix of y-coordinates for each detection in <code>Y</code></p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>xmin</code></td>
<td>
<p> character, name of coordinate of state space boundary</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>xmax</code></td>
<td>
<p> character, name of coordinate of state space boundary</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>ymin</code></td>
<td>
<p> character, name of coordinate of state space boundary</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>ymax</code></td>
<td>
<p> character, name of coordinate of state space boundary</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>buffer</code></td>
<td>
<p> see Details</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>verify</code></td>
<td>
<p> logical if TRUE then the resulting capthist object is
checked with <code>verify</code></p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>capthist</code></td>
<td>
<p><code>capthist</code> object </p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>nzeros</code></td>
<td>
<p>level of data augmentation (all-zero detection histories)</p>
</td>
</tr>
</table>
<h3>Details</h3>

<p>Data for OpenBUGS or WinBUGS called from R using the package
<span class="pkg">R2WinBUGS</span> (Sturtz et al. 2005) take the form of an <span style="font-family: Courier New, Courier; color: #666666;"><b>R</b></span> list.
</p>
<p>These functions are limited at present to binary data from a square
quadrat such as used by Royle and Young (2008). Marques et al. (2011)
provide an <span style="font-family: Courier New, Courier; color: #666666;"><b>R</b></span> function <code>create.data()</code> for generating simulated
datasets of this sort (see <code>sim.capthist</code> for equivalent
functionality).
</p>
<p>When reading BUGS data –
</p>
<p>The character values <code>Y</code>, <code>xcoord</code>, <code>ycoord</code>,
<code>xmin</code> etc. are used to locate the data within <code>DAlist</code>,
allowing for variation in the input names.
</p>
<p>The number of sampling occasions is taken from the number of columns
in <code>Y</code>. Each value in <code>Y</code> should be 0 or 1. Coordinates may
be missing
</p>
<p>A numeric value for <code>buffer</code> is the distance (in the original
units) by which the limits Xl, Xu etc. should be shrunk to give the
actual plot limits.  If <code>buffer</code> is character then a component of
<code>DAlist</code> contains the required numeric value.
</p>
<p>Coordinates in the output will be <em>multiplied by</em> the scalar
<code>units</code>.
</p>
<p>Augmentation rows corresponding to ‘all-zero’ detection histories in
<code>Y</code>, <code>xcoord</code>, and <code>ycoord</code> are discarded.
</p>
<p>When writing BUGS data –
</p>
<p>Null (all-zero) detection histories are added to the matrix of
detection histories <code>Y</code>, and missing (NA) rows are added to the
coordinate matrices <code>xcoord</code> and <code>ycoord</code>.
</p>
<p>Coordinates in the output will be <em>divided by</em> the scalar
<code>units</code>.
</p>


<h3>Value</h3>

<p>For <code>read.DA</code>, an object of class ‘capthist’.
</p>
<p>For <code>write.DA</code>, a list with the components
</p>

<table>
<tr>
<td style="text-align: left;">
Xl </td>
<td style="text-align: left;"> left edge of state space </td>
</tr>
<tr>
<td style="text-align: left;">
Xu </td>
<td style="text-align: left;"> right edge of state space </td>
</tr>
<tr>
<td style="text-align: left;">
Yl </td>
<td style="text-align: left;"> bottom edge of state space </td>
</tr>
<tr>
<td style="text-align: left;">
Yu </td>
<td style="text-align: left;"> top edge of state space </td>
</tr>
<tr>
<td style="text-align: left;">
delta </td>
<td style="text-align: left;"> buffer between edge of state space and quadrat </td>
</tr>
<tr>
<td style="text-align: left;">
nind </td>
<td style="text-align: left;"> number of animals observed </td>
</tr>
<tr>
<td style="text-align: left;">
nzeros </td>
<td style="text-align: left;"> number of added all-zero detection histories </td>
</tr>
<tr>
<td style="text-align: left;">
T </td>
<td style="text-align: left;"> number of sampling occasions </td>
</tr>
<tr>
<td style="text-align: left;">
Y </td>
<td style="text-align: left;"> binary matrix of detection histories (dim = c(nind+nzeros, T)) </td>
</tr>
<tr>
<td style="text-align: left;">
U1 </td>
<td style="text-align: left;"> matrix of x-coordinates, dimensioned as Y </td>
</tr>
<tr>
<td style="text-align: left;">
U2 </td>
<td style="text-align: left;"> matrix of y-coordinates, dimensioned as Y </td>
</tr>
<tr>
<td style="text-align: left;">
</td>
</tr>
</table>
<p>U1 and U2 are ‘NA’ where animal was not detected.
</p>


<h3>References</h3>

<p>Marques, T. A., Thomas, L. and Royle, J. A. (2011) A hierarchical model
for spatial capture–recapture data: Comment. <em>Ecology</em> <b>92</b>,
526–528.
</p>
<p>Royle, J. A. and Young, K. V. (2008) A hierarchical model for spatial
capture–recapture data. <em>Ecology</em> <b>89</b>, 2281–2289.
</p>
<p>Sturtz, S., Ligges, U. and Gelman, A. (2005) R2WinBUGS: a package for
running WinBUGS from R. <em>Journal of Statistical Software</em>
<b>12</b>, 1–16.
</p>


<h3>See Also</h3>

<p><code>hornedlizardCH</code>, <code>verify</code>, <code>capthist</code>
</p>


<h3>Examples</h3>

<pre><code class="language-R">
write.DA (hornedlizardCH, buffer = 100, units = 100)

## In this example, the input uses Xl, Xu etc.
## for the limits of the plot itself, so buffer = 0.
## Input is in hundreds of metres.
## First, obtain the list lzdata
olddir &lt;- setwd (system.file("extdata", package="secr"))
source ("lizarddata.R")
setwd(olddir)
str(lzdata)
## Now convert to capthist
tempcapt &lt;- read.DA(lzdata, Y = "H", xcoord = "X",
    ycoord = "Y", buffer = 0, units = 100)

## Not run: 

plot(tempcapt)
secr.fit(tempcapt, trace = FALSE)
## etc.


## End(Not run)

</code></pre>


</div>