<div class="container">

<table style="width: 100%;"><tr>
<td>benchmark</td>
<td style="text-align: right;">R Documentation</td>
</tr></table>
<h2>Prediction benchmark evaluation utility</h2>

<h3>Description</h3>

<p>This function is able to calculate a series of binary 
classification evaluation statistics given (i) two vectors: one with the 
true target variable values, and the other with the predicted target variable
values or (ii) a confusion matrix with the counts for False Positives (FP), 
True Positives (TP), True Negatives (TN), and False Negatives (FN).
The user can specify the desired set of metrics to compute: (i) precision, 
recall, f1 score and Matthews Correlation Coefficient (mcc) or 
(ii) specificity, sensitivity, accuracy and mcc.
</p>


<h3>Usage</h3>

<pre><code class="language-R">benchmark(yobs, yhat, CT = NULL, thr = 0, F1 = TRUE, verbose = FALSE, ...)
</code></pre>


<h3>Arguments</h3>

<table>
<tr style="vertical-align: top;">
<td><code>yobs</code></td>
<td>
<p>A binary vector with the true target variable values.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>yhat</code></td>
<td>
<p>A continuous vector with the predicted target variable values.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>CT</code></td>
<td>
<p>An optional confusion matrix of dimension 2x2 containing the counts 
for FP, TP, TN, and FN.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>thr</code></td>
<td>
<p>A numerical value indicating the threshold for converting the
<code>yhat</code> continuous vector to a binary vector. If <code>yhat</code> vector 
ranges between -1 and 1, the user can specify <code>thr = 0</code> (default); 
if <code>yhat</code> ranges between 0 and 1, the user can specify <code>thr = 0.5</code>.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>F1</code></td>
<td>
<p>A logical value. If TRUE (default), precision (pre), recall (rec),
f1 and mcc will be computed. Otherwise, if FALSE, specificity (sp),
sensitivity (se), accuracy (acc) and mcc will be obtained.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>verbose</code></td>
<td>
<p>A logical value. If FALSE (default), the density plots of 
<code>yhat</code> per group will not be plotted to screen.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>...</code></td>
<td>
<p>Currently ignored.</p>
</td>
</tr>
</table>
<h3>Details</h3>

<p>#' Suppose a 2x2 table with notation
</p>

<table>
<tr>
<td style="text-align: right;"> </td>
<td style="text-align: center;"> Reference </td>
<td style="text-align: center;"> </td>
</tr>
<tr>
<td style="text-align: right;"> Predicted </td>
<td style="text-align: center;"> Event </td>
<td style="text-align: center;"> No Event
</td>
</tr>
<tr>
<td style="text-align: right;"> Event </td>
<td style="text-align: center;"> A </td>
<td style="text-align: center;"> B </td>
</tr>
<tr>
<td style="text-align: right;"> No Event </td>
<td style="text-align: center;"> C </td>
<td style="text-align: center;"> D </td>
</tr>
<tr>
<td style="text-align: right;"> </td>
</tr>
</table>
<p>The formulas used here are: </p>
<p style="text-align: center;"><code class="reqn">se = A/(A+C)</code>
</p>
 <p style="text-align: center;"><code class="reqn">sp =
D/(B+D)</code>
</p>
 <p style="text-align: center;"><code class="reqn">acc = (A+D)/(A+B+C+D)</code>
</p>
 <p style="text-align: center;"><code class="reqn">pre = A/(A+B)</code>
</p>
 
<p style="text-align: center;"><code class="reqn">rec = A/(A+C)</code>
</p>
 <p style="text-align: center;"><code class="reqn">F1 = (2*pre*rec)/(pre+rec)</code>
</p>
 
<p style="text-align: center;"><code class="reqn">mcc = (A*D - B*C)/sqrt((A+B)*(A+C)*(D+B)*(D+C))</code>
</p>



<h3>Value</h3>

<p>A data.frame with classification evaluation statistics is returned.
</p>


<h3>Author(s)</h3>

<p>Mario Grassi <a href="mailto:mario.grassi@unipv.it">mario.grassi@unipv.it</a>
</p>


<h3>References</h3>

<p>Sammut, C. &amp; Webb, G. I. (eds.) (2017). Encyclopedia of Machine Learning 
and Data Mining. New York: Springer. ISBN: 978-1-4899-7685-7 
</p>
<p>Chicco, D., Jurman, G. (2020) The advantages of the Matthews correlation 
coefficient (MCC) over F1 score and accuracy in binary classification 
evaluation. BMC Genomics 21, 6.
</p>


<h3>Examples</h3>

<pre><code class="language-R">

# Load Amyotrophic Lateral Sclerosis (ALS)
data&lt;- alsData$exprs; dim(data)
data&lt;- transformData(data)$data
group&lt;- alsData$group; table (group)
ig&lt;- alsData$graph; gplot(ig)

#...with train-test (0.5-0.5) samples
set.seed(123)
train&lt;- sample(1:nrow(data), 0.5*nrow(data))

#...with a binary outcome (1=case, 0=control)
ig1&lt;- mapGraph(ig, type = "outcome"); gplot(ig1)
outcome&lt;- group; table(outcome)
data1&lt;- cbind(outcome, data); data1[1:5,1:5]

res &lt;- SEMml(ig1, data1, train, algo="rf")
mse &lt;- predict(res, data1[-train, ])
yobs&lt;- group[-train]
yhat&lt;- mse$Yhat[ ,"outcome"]

# ... evaluate predictive benchmark (sp, se, acc, mcc)
benchmark(yobs, yhat, thr=0, F1=FALSE)

# ... evaluate predictive benchmark (pre, rec, f1, mcc)
benchmark(yobs, yhat, thr=0, F1=TRUE)

#... with confusion matrix table as input
ypred&lt;- ifelse(yhat &lt; 0, 0, 1)
benchmark(CT=table(yobs, ypred), F1=TRUE)

#...with density plots of yhat per group
#old.par &lt;- par(no.readonly = TRUE)
benchmark(yobs, yhat, thr=0, F1=FALSE, verbose = TRUE)
#par(old.par)


</code></pre>


</div>