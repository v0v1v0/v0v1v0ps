<div class="container">

<table style="width: 100%;"><tr>
<td>sdf_unnest_longer</td>
<td style="text-align: right;">R Documentation</td>
</tr></table>
<h2>Unnest longer</h2>

<h3>Description</h3>

<p>Expand a struct column or an array column within a Spark dataframe into one
or more rows, similar what to tidyr::unnest_longer does to an R dataframe.
An index column, if included, will be 1-based if 'col' is an array column.
</p>


<h3>Usage</h3>

<pre><code class="language-R">sdf_unnest_longer(
  data,
  col,
  values_to = NULL,
  indices_to = NULL,
  include_indices = NULL,
  names_repair = "check_unique",
  ptype = list(),
  transform = list()
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr style="vertical-align: top;">
<td><code>data</code></td>
<td>
<p>The Spark dataframe to be unnested</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>col</code></td>
<td>
<p>The struct column to extract components from</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>values_to</code></td>
<td>
<p>Name of column to store vector values. Defaults to 'col'.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>indices_to</code></td>
<td>
<p>A string giving the name of column which will contain the
inner names or position (if not named) of the values. Defaults to 'col'
with '_id' suffix</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>include_indices</code></td>
<td>
<p>Whether to include an index column. An index column
will be included by default if 'col' is a struct column. It will also be
included if 'indices_to' is not 'NULL'.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>names_repair</code></td>
<td>
<p>Strategy for fixing duplicate column names (the semantic
will be exactly identical to that of '.name_repair' option in
<code>tibble</code>)</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>ptype</code></td>
<td>
<p>Optionally, supply an R data frame prototype for the output.
Each column of the unnested result will be casted based on the Spark
equivalent of the type of the column with the same name within 'ptype',
e.g., if 'ptype' has a column 'x' of type 'character', then column 'x'
of the unnested result will be casted from its original SQL type to
StringType.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>transform</code></td>
<td>
<p>Optionally, a named list of transformation functions applied</p>
</td>
</tr>
</table>
<h3>Examples</h3>

<pre><code class="language-R">## Not run: 
library(sparklyr)
sc &lt;- spark_connect(master = "local", version = "2.4.0")

# unnesting a struct column
sdf &lt;- copy_to(
  sc,
  dplyr::tibble(
    x = 1:3,
    y = list(list(a = 1, b = 2), list(a = 3, b = 4), list(a = 5, b = 6))
  )
)

unnested &lt;- sdf %&gt;% sdf_unnest_longer(y, indices_to = "attr")

# unnesting an array column
sdf &lt;- copy_to(
  sc,
  dplyr::tibble(
    x = 1:3,
    y = list(1:10, 1:5, 1:2)
  )
)

unnested &lt;- sdf %&gt;% sdf_unnest_longer(y, indices_to = "array_idx")

## End(Not run)

</code></pre>


</div>