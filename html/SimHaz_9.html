<div class="container">

<table style="width: 100%;"><tr>
<td>tdSim.method1</td>
<td style="text-align: right;">R Documentation</td>
</tr></table>
<h2>

Simulate 1 dataframe (1 simulation) of time-dep exposure under method 1
</h2>

<h3>Description</h3>


<p>This function generates a simulated dataset with time-dependent exposure under  
method 1 with a user-specified list of parameters as input. Survival times and censoring times are generated from the exponential distribution.
</p>


<h3>Usage</h3>

<pre><code class="language-R">tdSim.method1(N, duration = 24, lambda, rho = 1, beta, rateC, exp.prop, 
    prop.fullexp  = 0, maxrelexptime = 1, min.futime = 0, min.postexp.futime = 0)
</code></pre>


<h3>Arguments</h3>

<table>
<tr style="vertical-align: top;">
<td><code>N</code></td>
<td>

<p>Number of subjects needs to be screened
</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>duration</code></td>
<td>

<p>Length of the study in Months. The default value is 24 (months)
</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>lambda</code></td>
<td>

<p>Scale parameter of the Weibull distribution, which is calculated as log(2) / median time to event for control group
</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>rho</code></td>
<td>

<p>Shape parameter of the Weibull distribution, which is defaulted as 1, as we generate survival times by using the exponential distribution
</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>beta</code></td>
<td>

<p>A numeric value that represents the exposure effect, which is the regression coefficient (log hazard ratio) that represent the magnitude of the relationship between the exposure covariate and the risk of an event
</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>rateC</code></td>
<td>

<p>Rate of the exponential distribution to generate censoring times, which is calculated as log(2) / median time to censoring
</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>exp.prop</code></td>
<td>

<p>A numeric value between 0 and 1 (not include 0 and 1) that represents the proportion of subjects that are assigned with an exposure
</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>prop.fullexp</code></td>
<td>

<p>A numeric value in interval [0, 1) that represents the proportion of exposed subjects that are fully exposed from the beginning to the end of the study. The default value is 0, which means all exposed subjects have an exposure status transition at some point during the study
</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>maxrelexptime</code></td>
<td>

<p>A numeric value in interval (0, 1] that represents the maximum relative exposure time. Suppose this value is p, the exposure time for each subject is then uniformly distributed from 0 to p*subject's time in the study. The default value is 1, which means all exposed subjects have an exposure status transition at any point during the time in study.
</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>min.futime</code></td>
<td>

<p>A numeric value that represents minimum follow-up time (in months). The default value is 0, which means no minimum follow-up time is considered. If it has a positive value, this argument will help exclude subjects that only spend a short amount of time in the study
</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>min.postexp.futime</code></td>
<td>

<p>A numeric value that represents minimum post-exposure follow-up time (in months). The default value is 0, which means no minimum post-exposure follow-up time is considered. If it has a positive value, this argument will help exclude subjects that only spend a short amount of time in the study after their exposure
</p>
</td>
</tr>
</table>
<h3>Details</h3>

<p>If no minimum follow-up time or minimum post-exposure follow-up time is considered (min.fut = 0 and min.postexp.fut = 0), then the output data frame
will have N subjects. If we consider minimum follow-up time or both, then the
output data frame will have at most N subjects. 
</p>


<h3>Value</h3>






<p>A data.frame object with columns corresponding to
</p>
<table>
<tr style="vertical-align: top;">
<td><code>id</code></td>
<td>

<p>Integer that represents a subject's identification number
</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>start</code></td>
<td>

<p>For counting process formulation. Represents the start of each time interval
</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>stop</code></td>
<td>

<p>For counting process formulation. Represents the end of each time interval
</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>status</code></td>
<td>

<p>Indicator of event. status = 1 when event occurs and 0 otherwise
</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>x</code></td>
<td>

<p>Indicator of exposure. x = 1 when exposed and 0 otherwise
</p>
</td>
</tr>
</table>
<h3>Author(s)</h3>

<p>Danyi Xiong, Teeranan Pokaprakarn, Hiroto Udagawa, Nusrat Rabbee <br>
Maintainer: Nusrat Rabbee &lt;rabbee@berkeley.edu&gt;
</p>


<h3>References</h3>


<p>Therneau and C. Crowson (2015). Using Time Dependent Covariates and Time Dependent Coefficients in the Cox Model.
</p>
<p>https://cran.r-project.org/web/packages/survival/vignettes/timedep.pdf
</p>


<h3>Examples</h3>

<pre><code class="language-R"># Simulate a dataset of 600 subjects with time-dependent exposure without
# considering minimum follow-up time or minimum post-exposure follow-up time.
# Specifically, set the duration of the study to be 24 months; the median time to
# event for control group to be 24 months; exposure effect to be 0.3; median time
# to censoring to be 14 months; and exposure proportion to be 20%.

df1 &lt;- tdSim.method1(N = 600, duration = 24, lambda = log(2)/24, rho = 1, 
   beta = 0.3, rateC = log(2)/14, exp.prop = 0.2, prop.fullexp  = 0, 
   maxrelexptime = 1, min.fut = 0, min.postexp.fut = 0)

# Simulate a dataset of 600 subjects with time-dependent exposure with
# both minimum follow-up time (4 months) and minimum post-exposure
# follow-up time (4 months) imposed. Other parameters remain the same as
# in the first case.

df2 &lt;- tdSim.method1(N = 600, duration = 24, lambda = log(2)/24, rho = 1, 
   beta = 0.3, rateC = log(2)/14, exp.prop = 0.2, prop.fullexp  = 0, 
   maxrelexptime = 1, min.fut = 4, min.postexp.fut = 4)

# Simulate a dataset of 600 subjects with time-dependent exposure with
# both minimum follow-up time (4 months) and minimum post-exposure
# follow-up time (4 months) imposed. Also consider a quick exposure after
# entering the study for each exposed subject. Set the maximum relative
# exposure time to be 1/6. Other parameters remain the same as in the first case.

df3 &lt;- tdSim.method1(N = 600, duration = 24, lambda = log(2)/24, rho = 1, 
   beta = 0.3, rateC = log(2)/14, exp.prop = 0.2, prop.fullexp  = 0,
   maxrelexptime = 1/6, min.fut = 4,min.postexp.fut = 4)
</code></pre>


</div>