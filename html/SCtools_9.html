<div class="container">

<table style="width: 100%;"><tr>
<td>mspe.plot</td>
<td style="text-align: right;">R Documentation</td>
</tr></table>
<h2>Plot the post/pre-treatment MSPE ratio</h2>

<h3>Description</h3>

<p>Plots the post/pre-treatment mean square prediction error ratio 
for the treated unit and placebos.
</p>


<h3>Usage</h3>

<pre><code class="language-R">mspe.plot(
  tdf,
  discard.extreme = FALSE,
  mspe.limit = 20,
  plot.hist = FALSE,
  title = NULL,
  xlab = "Post/Pre MSPE ratio",
  ylab = NULL
)

mspe_plot(
  tdf,
  discard.extreme = FALSE,
  mspe.limit = 20,
  plot.hist = FALSE,
  title = NULL,
  xlab = "Post/Pre MSPE ratio",
  ylab = NULL
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr style="vertical-align: top;">
<td><code>tdf</code></td>
<td>
<p>An object constructed by <code>generate.placebos</code>.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>discard.extreme</code></td>
<td>
<p>Logical. Whether or not placebos with high 
pre-treatement MSPE should be excluded from the plot.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>mspe.limit</code></td>
<td>
<p>Numerical. Used if <code>discard.extreme</code> is <code>TRUE</code>. 
It indicates how many times the pretreatment MSPE of a placebo should 
be higher than that of the treated unit to be considered extreme and 
discarded. Default is <code>20</code>.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>plot.hist</code></td>
<td>
<p>Logical. If <code>FALSE</code>, a dotplot with each unit name 
and its post/pre treatment MSPE ratio is produced. If <code>TRUE</code>, 
a histogram is produced, with the frequency of each ratio. 
Should be set to <code>TRUE</code> when there are many controls, to make 
visualization easier.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>title</code></td>
<td>
<p>Character. Optional. Title of the plot.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>xlab</code></td>
<td>
<p>Character. Optional. Label of the x axis.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>ylab</code></td>
<td>
<p>Character. Optional. Label of the y axis.</p>
</td>
</tr>
</table>
<h3>Details</h3>

<p>Post/pre-treatement mean square prediction error ratio is the 
difference between the observed outcome of a unit and its synthetic 
control, before and after treatement. A higher ratio means a small 
pretreatment prediction error (a good synthetic control), and a high 
post-treatment MSPE, meaning a large difference between the unit and 
its synthetic control after the intervention. By calculating this ratio 
for all placebos, the test can be interpreted as looking at how likely 
the result obtained for a single treated case with a synthetic control 
analysis could have occurred by chance given no treatement. 
For more detailed description, see Abadie, Diamond, and Hainmueller (2011, 2014).
</p>


<h3>Value</h3>


<dl>
<dt>p.dot </dt>
<dd>
<p>Plot with the post/pre MSPE ratios for the treated unit and
each placebo indicated individually. Returned if <code>plot.hist</code> is 
<code>FALSE</code>.</p>
</dd>
<dt>p.dens </dt>
<dd>
<p>Histogram of the distribution of post/pre MSPE ratios for
all placebos and the treated unit. Returned if <code>plot.hist</code> is 
<code>TRUE</code>.</p>
</dd>
</dl>
<h3>References</h3>

<p>Abadie, A., Diamond, A., Hainmueller, J. (2014). 
Comparative Politics and the Synthetic Control Method. 
American Journal of Political Science Forthcoming 2014.
</p>
<p>Synthetic : An R Package for Synthetic Control Methods in Comparative 
Case Studies. Journal of Statistical Software 42 (13) 1–17.
</p>
<p>Abadie, A., Diamond, A., Hainmueller, J. (2011). Synth: An R Package for 
Synthetic Control Methods in Comparative Case Studies. 
Journal of Statistical Software 42 (13) 1–17.
</p>
<p>Abadie A, Diamond A, Hainmueller J (2010). Synthetic Control Methods for 
Comparative Case Studies: Estimating the Effect of California's Tobacco 
Control Program. Journal of the American Statistical Association 
105 (490) 493–505.
</p>


<h3>See Also</h3>

<p><code>generate.placebos</code>, <code>mspe.test</code>, 
<code>plot_placebos</code>, <code>synth</code>
</p>


<h3>Examples</h3>

<pre><code class="language-R">
## Example with toy data from 'Synth'
library(Synth)
# Load the simulated data
data(synth.data)

# Execute dataprep to produce the necessary matrices for 'Synth'
dataprep.out&lt;-
  dataprep(
    foo = synth.data,
    predictors = c("X1"),
    predictors.op = "mean",
    dependent = "Y",
    unit.variable = "unit.num",
    time.variable = "year",
    special.predictors = list(
      list("Y", 1991, "mean")
    ),
    treatment.identifier = 7,
    controls.identifier = c(29, 2, 13, 17),
    time.predictors.prior = c(1984:1989),
    time.optimize.ssr = c(1984:1990),
    unit.names.variable = "name",
    time.plot = 1984:1996
)

# run the synth command to create the synthetic control
synth.out &lt;- synth(dataprep.out, Sigf.ipop=2)

## run the generate.placebos command to reassign treatment status
## to each unit listed as control, one at a time, and generate their
## synthetic versions. Sigf.ipop = 2 for faster computing time. 
## Increase to the default of 5 for better estimates. 
tdf &lt;- generate.placebos(dataprep.out,synth.out, Sigf.ipop = 2)

## Test how extreme was the observed treatment effect given the placebos:
ratio &lt;- mspe.test(tdf)
ratio$p.val

mspe.plot(tdf, discard.extreme = FALSE)
   
</code></pre>


</div>