<div class="container">

<table style="width: 100%;"><tr>
<td>svy_vglm</td>
<td style="text-align: right;">R Documentation</td>
</tr></table>
<h2>
Design-based inference for vector generalised linear models
</h2>

<h3>Description</h3>

<p>This function provides design-based (survey) inference for Thomas Yee's
vector generalised linear models.  It works by calling <code>vglm</code> with
sampling weights, and then either using resampling (replicate weights)
or extracting the influence functions and using a Horvitz-Thompson-type
sandwich estimator.
</p>


<h3>Usage</h3>

<pre><code class="language-R">svy_vglm(formula, family, design, ...)
</code></pre>


<h3>Arguments</h3>

<table>
<tr style="vertical-align: top;">
<td><code>formula</code></td>
<td>

<p>Model formula, as for <code>vglm</code>
</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>family</code></td>
<td>

<p>Model family, as for <code>vglm</code>
</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>design</code></td>
<td>

<p>Survey design object
</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>...</code></td>
<td>

<p>Other arguments to pass to  <code>vglm</code>
</p>
</td>
</tr>
</table>
<h3>Value</h3>

<p>An S3 object of class <code>svy_glm</code> with <code>print</code>, <code>coef</code> and <code>vcov</code>
methods, containing the design in the <code>design</code> component and a
fitted <code>vglm</code> object in the <code>fit</code> component.
</p>


<h3>See Also</h3>

<p><code>nhanes_sxq</code>
</p>
<p><code>vglm</code>
</p>
<p><code>svydesign</code>
<code>svrepdesign</code>
</p>


<h3>Examples</h3>

<pre><code class="language-R">data(api)
dclus2&lt;-svydesign(id=~dnum+snum, fpc=~fpc1+fpc2, data=apiclus2)

## Ordinary Gaussian regression
m1&lt;-svyglm(api00~api99+mobility+ell, design=dclus2,family=gaussian)
## same model, but with the variance as a second parameter
m2&lt;-svy_vglm(api00~api99+mobility+ell, design=dclus2,family=uninormal())
m1
m2
SE(m1)
SE(m2)

summary(m1)
summary(m2)

## Proportional odds model
dclus2&lt;-update(dclus2, mealcat=as.ordered(cut(meals,c(0,25,50,75,100))))
a&lt;-svyolr(mealcat~avg.ed+mobility+stype, design=dclus2)
b&lt;-svy_vglm(mealcat~avg.ed+mobility+stype, design=dclus2, family=propodds())
a
b
SE(a)
SE(b) #not identical, because svyolr() uses approximate Hessian


## Zero-inflated Poisson
data(nhanes_sxq)
nhdes = svydesign(id=~SDMVPSU,strat=~SDMVSTRA,weights=~WTINT2YR,
       nest=TRUE, data=nhanes_sxq)

sv1&lt;-svy_vglm(malepartners~RIDAGEYR+factor(RIDRETH1)+DMDEDUC,
      zipoisson(), design=nhdes, crit = "coef")
sv1
summary(sv1)

## Multinomial
## Reference group (non-Hispanic White) average older and more educated
## so coefficients are negative
mult_eth&lt;- svy_vglm(RIDRETH1~RIDAGEYR+DMDEDUC,
     family=multinomial(refLevel=3), design=nhdes)

## separate logistic regressions are close but not identical
two_eth&lt;-svyglm(I(RIDRETH1==1)~RIDAGEYR+DMDEDUC, family=quasibinomial,
    design=subset(nhdes, RIDRETH1 %in% c(1,3)))

summary(mult_eth)
summary(two_eth)

</code></pre>


</div>