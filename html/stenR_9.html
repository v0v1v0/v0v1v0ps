<div class="container">

<table style="width: 100%;"><tr>
<td>extract_observations</td>
<td style="text-align: right;">R Documentation</td>
</tr></table>
<h2>Extract observations from data</h2>

<h3>Description</h3>

<p>On basis of <em>GroupAssignment</em> extract one or many groups from
provided data.frame
</p>


<h3>Usage</h3>

<pre><code class="language-R">extract_observations(
  data,
  groups,
  group_names = NULL,
  extract_mode = c("list", "data.frame"),
  strict_names = TRUE,
  simplify = FALSE,
  id
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr style="vertical-align: top;">
<td><code>data</code></td>
<td>
<p><em>data.frame</em> from which to extract data</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>groups</code></td>
<td>
<p><em>GroupAssignment</em> object on basis of which extract the data.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>group_names</code></td>
<td>
<p><em>character</em> vector of group names which to extract. If kept
as default <code>NULL</code>, all groups are extracted.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>extract_mode</code></td>
<td>
<p><em>character</em>: either <code>list</code> or <code>data.frame</code>. When kept as
default: <code>list</code>, data is extracted as named list: where the name of list is
name of the groups, and each one contains <em>data.frame</em> with observations.
When <code>data.frame</code> is used, then assigned data is returned as one <em>data.frame</em>
with new column named: <code>GroupAssignment</code>, declaring the group.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>strict_names</code></td>
<td>
<p><em>boolean</em> If <code>TRUE</code>, then intersected groups are extracted
using <em>strict</em> strategy: <code>group_names</code> need to be provided in form: <code>"group1:group2"</code>. If
<code>FALSE</code>, then intersected groups will be taken into regard separately, so
eg. when <code>"group1"</code> is provided to <code>group_names</code>, all of: <code>"group1:group2"</code>,
<code>"group1:group3"</code>, <code>"group1:groupN"</code>  will be extracted. Defaults to <code>TRUE</code></p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>simplify</code></td>
<td>
<p><em>boolean</em> If <code>TRUE</code>, then when only one group is to be
returned, it returns as <code>data.frame</code> without taking into account value of
<code>group_name</code> argument. Defaults to <code>FALSE</code></p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>id</code></td>
<td>
<p>If <em>GroupAssignment</em> mode is <code>id</code>, and you want to overwrite the
original <code>id_col</code>, provide a name of the column there. If none is provided,
then the default <code>id_col</code> will be used.</p>
</td>
</tr>
</table>
<h3>Value</h3>

<p>either:
</p>

<ul>
<li> <p><em>named list</em> of <em>data.frames</em> if <code>extract_mode = 'list'</code>
</p>
</li>
<li> <p><em>data.frame</em> if <code>extract_mode = 'data.frame'</code> or if only one group is to be
returned and <code>simplify = TRUE</code>
</p>
</li>
</ul>
<h3>See Also</h3>

<p>Other observation grouping functions: 
<code>GroupAssignment()</code>,
<code>intersect_GroupAssignment()</code>
</p>


<h3>Examples</h3>

<pre><code class="language-R">#### Create Group Conditions ####
sex_grouping &lt;- GroupConditions(
  conditions_category = "Sex",
  "M" ~ sex == "M",
  "F" ~ sex == "F",
  "O" ~ !sex %in% c("M", "F")
)

age_grouping &lt;- GroupConditions(
  conditions_category = "Age",
  "to 20" ~ age &lt; 20,
  "20 to 40" ~ age &gt;= 20 &amp; age &lt;= 40,
  "41 to 60" ~ age &gt; 40 &amp; age &lt;= 60,
  "above 60" ~ age &gt; 60
)

#### Create Group Assignement ####
# can be done both with indices, so later this can be used only on the same data
# or with IDs - so later it can be done with only subset or transformed original data

sex_assignment &lt;- GroupAssignment(HEXACO_60, sex_grouping, id = "user_id")
age_assignment &lt;- GroupAssignment(HEXACO_60, age_grouping, id = "user_id")

#### Intersect two Group Assignement ###
# with additional forcing set
intersected &lt;- intersect_GroupAssignment(
  sex_assignment,
  age_assignment,
  force_exhaustive = TRUE,
  force_disjoint = FALSE
)

extracted &lt;- extract_observations(
  HEXACO_60,
  groups = intersected,
  group_names = c("M"),
  extract_mode = "data.frame",
  strict_names = FALSE)

# only groups created from "M" group were extracted
# groups without observations were dropped
table(extracted$GroupAssignment)
</code></pre>


</div>