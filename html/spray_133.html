<div class="container">

<table style="width: 100%;"><tr>
<td>spray</td>
<td style="text-align: right;">R Documentation</td>
</tr></table>
<h2>
Sparse arrays: <code>spray</code> objects
</h2>

<h3>Description</h3>

<p>Create, coerce, and test for sparse array objects
</p>


<h3>Usage</h3>

<pre><code class="language-R">spray(M, x, addrepeats=FALSE)
spraymaker(L, addrepeats=FALSE, arity=ncol(L[[1]]))
is.spray(S)
as.spray(arg1, arg2, addrepeats=FALSE, offbyone=FALSE)
index(S)
coeffs(S)
coeffs(S) &lt;- value
is_valid_spray(L)
</code></pre>


<h3>Arguments</h3>

<table>
<tr style="vertical-align: top;">
<td><code>M</code></td>
<td>
<p>Integer matrix with rows corresponding to index positions</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>x</code></td>
<td>
<p>Numeric value with elements corresponding to spray entries</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>S</code></td>
<td>
<p>Object to be tested for being a spray</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>L</code></td>
<td>
<p>A list, nominally of two elements (index matrix and value)
which is to be tested for acceptability to be coerce to class spray</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>arg1,arg2</code></td>
<td>
<p>Various arguments to be coerced to a spray</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>addrepeats</code></td>
<td>
<p>Boolean, with default <code>FALSE</code> meaning to check
for repeated index rows and, if any are found, return an error</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>value</code></td>
<td>
<p>In the assignment operator <code>coeffs&lt;-()</code>, a
<code>disord</code> object (or a length-one numeric vector), so that
<code>coeffs(S) &lt;- x</code> works as expected</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>offbyone</code></td>
<td>
<p>In function <code>as.spray()</code>, when converting from an
array.  Argument <code>offbyone</code> is Boolean with default
<code>FALSE</code> meaning to insert array elements in positions
corresponding to index elements, and <code>TRUE</code> meaning to add
one</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>arity</code></td>
<td>
<p>In function <code>spraymaker()</code>, integer specifying the
arity (number of columns of the index matrix <code>L[[1]]</code>); ignored
if <code>L</code> is non-empty.  See details</p>
</td>
</tr>
</table>
<h3>Details</h3>

<p>Spray objects are sparse arrays interpreted as multivariate
polynomials.  They can be added and subtracted; “<code>*</code>” is
interpreted as polynomial multiplication.
</p>
<p>To create a spray object the user should use <code>spray()</code>, if a
matrix of indices and vector of values is available, or
<code>as.spray()</code> which tries hard to do the Right Thing (tm).
</p>
<p>Function <code>spraymaker()</code> is the formal creator function, and it is
written to take the output of the C++ routines and return a
spray object.  The reason this needs an <code>arity</code> argument is that
C++ sometimes returns <code>NULL</code> (in lieu of a zero-row
matrix, which it cannot deal with).  In this case, we need some way to
tell <span style="font-family: Courier New, Courier; color: #666666;"><b>R</b></span> the arity of the corresponding spray object.
</p>
<p>Rownames and colnames of the index matrix are removed by
<code>spraymaker()</code> [C++ routine <code>spray_maker()</code>
discards the <code>dimnames</code> attribute of matrix <code>M</code>], but the
print method might add colnames to printed output, via option
<code>sprayvars</code>.
</p>
<p>Functions <code>index()</code> and <code>coeffs()</code> are accessor methods.
Function <code>index()</code> returns an integer-valued matrix with rows
corresponding to variable powers. 
</p>
<p>There is an extensive vignette available; type
<code>vignette("spray")</code> at the command line.
</p>


<h3>Note</h3>

<p>Function <code>coeffs()</code> was formerly known as <code>value()</code>.
</p>
<p>Technically, <code>index()</code> breaks <code>disordR</code> discipline.
</p>


<h3>Author(s)</h3>

<p>Robin K. S. Hankin</p>


<h3>See Also</h3>

<p><code>Ops</code>,<code>spray-package</code></p>


<h3>Examples</h3>

<pre><code class="language-R">
S &lt;- spray(diag(5))    # missing second argument interpreted as '1'.
as.array(S,offbyone=TRUE) # zero indices interpreted as ones.

M &lt;- matrix(1:5,6,5) # note first row matches the sixth row

## Not run:  spray(M,1:6)  # will not work because addrepeats is not TRUE


spray(M,1:6,addrepeats=TRUE)  # 7=1:6 


S &lt;- spray(matrix(1:7,5,7))
a &lt;- as.array(S)    # will not work if any(M&lt;1)
S1 &lt;- as.spray(a)
stopifnot(S==S1)

a &lt;- rspray(20)
coeffs(a)[coeffs(a) %% 2 == 1] &lt;- 99  # every odd coefficient -&gt; 99


</code></pre>


</div>