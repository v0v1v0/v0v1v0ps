<div class="container">

<table style="width: 100%;"><tr>
<td>adjust_data</td>
<td style="text-align: right;">R Documentation</td>
</tr></table>
<h2>Adjust an outcome time series based on the group weights.</h2>

<h3>Description</h3>

<p>Reweight the components of a series to match target weights for several
categories. This is a good preprocessing step to adjust for time-varying
covariates such as changing mix of case types.
</p>


<h3>Usage</h3>

<pre><code class="language-R">adjust_data(
  dat,
  outcomename,
  groupname,
  Nname,
  pi_star,
  is_count = FALSE,
  include_aggregate = FALSE,
  covariates = NULL
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr style="vertical-align: top;">
<td><code>dat</code></td>
<td>
<p>Dataframe of data.  Requires an N column of total cases
represented in each row.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>outcomename</code></td>
<td>
<p>Name of column that has the outcome to calculated adjusted
values for.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>groupname</code></td>
<td>
<p>Name of categorical covariate that determines the groups.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>Nname</code></td>
<td>
<p>Name of column in dat that contains total cases (this is the
name of the variable used to generate the weights in pi_star).</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>pi_star</code></td>
<td>
<p>The target weights.  Each month will have its groups
re-weighted to match these target weights.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>is_count</code></td>
<td>
<p>Indicator of whether outcome is count data or a continuous
measure (this impacts how aggregation is done).</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>include_aggregate</code></td>
<td>
<p>Include aggregated (unadjusted) totals in the output
as well.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>covariates</code></td>
<td>
<p>Covariates to be passed to aggregation (list of string
variable names).</p>
</td>
</tr>
</table>
<h3>Value</h3>

<p>Dataframe of adjusted data.
</p>


<h3>Examples</h3>

<pre><code class="language-R">data( "meck_subgroup" )
head( meck_subgroup )
pis = calculate_group_weights( "category", Nname="n.cases", 
                               meck_subgroup, t_min=0, t_max= max( meck_subgroup$month ) )
pis

agg = aggregate_data( meck_subgroup, 
                      outcomename="pbail", groupname="category", Nname="n.cases", 
                      is_count=FALSE,
                      rich = TRUE, covariates = NULL )
head( agg )  


adjdat = adjust_data( meck_subgroup, "pbail", "category", "n.cases", pis, include_aggregate=TRUE )
head( adjdat )
</code></pre>


</div>