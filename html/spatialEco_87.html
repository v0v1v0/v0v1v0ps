<div class="container">

<table style="width: 100%;"><tr>
<td>raster.change</td>
<td style="text-align: right;">R Documentation</td>
</tr></table>
<h2>Raster change between two nominal rasters</h2>

<h3>Description</h3>

<p>Compares two categorical rasters with a variety of statistical options
</p>


<h3>Usage</h3>

<pre><code class="language-R">raster.change(
  x,
  y,
  s = 3,
  stat = c("kappa", "t.test", "cor", "entropy", "cross-entropy", "divergence"),
  ...
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr style="vertical-align: top;">
<td><code>x</code></td>
<td>
<p>A terra SpatRaster</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>y</code></td>
<td>
<p>A terra SpatRaster for comparison to x</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>s</code></td>
<td>
<p>Integer or matrix for defining Kernel,
must be odd but not necessarily square</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>stat</code></td>
<td>
<p>Statistic to use in comparison, please see details for
options.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>...</code></td>
<td>
<p>Additional arguments passed to terra::focalPairs</p>
</td>
</tr>
</table>
<h3>Details</h3>

<p>This function provides a various statistics for comparing two classified maps.
Valid options are:
</p>

<ul>
<li>
<p> kappa - Cohen's Kappa
</p>
</li>
<li>
<p> t.test - Two-tailed paired t-test
</p>
</li>
<li>
<p> cor - Persons Correlation
</p>
</li>
<li>
<p> entropy - Delta entropy
</p>
</li>
<li>
<p> cross-entropy - Cross-entropy loss function
</p>
</li>
<li>
<p> divergence - Kullback-Leibler divergence (relative entropy)
</p>
</li>
</ul>
<p>Kappa and t-test values &lt; 0 are reported as 0. For a weighted kappa, a matrix must
be provided that correspond to the pairwise weights for all values in both rasters.
Delta entropy is derived by calculating Shannon's on each focal window then
differencing  them (e(x) - e(y)). The s argument can be a single scalar, defining
a symmetrical kernel, two scalers defining the dimensions of the kernel eg., c(3,5)
or a matrix defining the kernel say, resulting from terra::focalMat
</p>


<h3>Value</h3>

<p>A terra SpatRaster layer containing one of the following layers:
</p>

<ul>
<li>
<p> kappa - Kappa or Weighted Kappa statistic (if stat = "kappa")
</p>
</li>
<li>
<p> correlation - Paired t.test statistic  (if stat = "cor")
</p>
</li>
<li>
<p> entropy - Local entropy  (if stat = "entropy")
</p>
</li>
<li>
<p> divergence - Kullback-Leibler divergence (if stat = "divergence")
</p>
</li>
<li>
<p> cross.entropy - Local Cross-entropy (if stat = "cross.entropy")
</p>
</li>
<li>
<p> t.test - Paired t.test statistic  (if stat = "t.test")
</p>
</li>
<li>
<p> p.value - p-value of the paired t.test statistic (if stat = "t.test")
</p>
</li>
</ul>
<h3>Author(s)</h3>

<p>Jeffrey S. Evans  <a href="mailto:jeffrey_evans@tnc.org">jeffrey_evans@tnc.org</a>
</p>


<h3>References</h3>

<p>Cohen, J. (1960). A coefficient of agreement for nominal scales. Educational
and Psychological Measurement, 20:37-46
</p>
<p>McHugh M.L. (2012) Interrater reliability: the kappa statistic.
Biochemia medica, 22(3):276–282.
</p>
<p>Kullback, S., R.A. Leibler (1951). On information and sufficiency. Annals of
Mathematical Statistics. 22(1):79–86
</p>


<h3>Examples</h3>

<pre><code class="language-R">
 library(sf) 
 library(terra) 
  
 e &lt;- ext(179407.8, 181087.9, 331134.4, 332332.1)
 r1 &lt;- rast(e, resolution=20)
   r1[] &lt;- sample(1:5, ncell(r1), replace=TRUE)
 r2 &lt;- rast(e, resolution=20)
   r2[] &lt;- sample(1:5, ncell(r2), replace=TRUE)
 	  
 d = 5 # kernel    
 ( r.kappa &lt;- raster.change(r1, r2, s = d) )   
 ( r.ttest &lt;- raster.change(r1, r2, s = d, stat="t.test") )
 ( r.ent &lt;- raster.change(r1, r2, s = d, stat="entropy") )   
 ( r.cor &lt;- raster.change(r1, r2, s = d, stat="cor") )
 ( r.ce &lt;- raster.change(r1, r2, s = d, stat = "cross-entropy") )
 ( r.kl &lt;- raster.change(r1, r2, s = d, stat = "divergence") )	
       
   opar &lt;- par(no.readonly=TRUE)
   par(mfrow=c(3,2))
     plot(r.kappa, main="Kappa")
     plot(r.ttest[[1]], main="Paired t-test")
     plot(r.ent, main="Delta Entropy")
     plot(r.cor, main="Rank Correlation")
     plot(r.kl, main="Kullback-Leibler")
     plot(r.ce, main="cross-entropy")
   par(opar) 


</code></pre>


</div>