<div class="container">

<table style="width: 100%;"><tr>
<td>calc.rule.surv</td>
<td style="text-align: right;">R Documentation</td>
</tr></table>
<h2>Stopping Rule Calculation (Survival Data)</h2>

<h3>Description</h3>

<p>Calculate a stopping rule for safety monitoring for time-to-event data
</p>


<h3>Usage</h3>

<pre><code class="language-R">calc.rule.surv(n, p0, alpha, type, tau, maxInf = "expected", param = NULL)
</code></pre>


<h3>Arguments</h3>

<table>
<tr style="vertical-align: top;">
<td><code>n</code></td>
<td>
<p>Maximum sample size for safety monitoring</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>p0</code></td>
<td>
<p>The probability of a toxicity occurring in <code>tau</code> units of time under the null hypothesis</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>alpha</code></td>
<td>
<p>The nominal type I error/false positive rate for the stopping rule,
under an assumption that the cumulative number of events follows a Poisson process
over the study duration.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>type</code></td>
<td>
<p>The method used for constructing the stopping rule. Choices including a Pocock test ("Pocock"),
a O'Brein-Fleming test ("OBF"), a Wang-Tsiatis test ("WT"), the Bayesian Gamma-Poisson method ("GP"),
a truncated sequential probability ratio test ("SPRT"), and a maximized SPRT ("MaxSPRT")</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>tau</code></td>
<td>
<p>Length of observation period</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>maxInf</code></td>
<td>
<p>Specification of the maximum information (maximum exposure time) used for designing the
stopping rule. Options include the expected exposure time for n patients used H0 ("expected") and the
maximum possible exposure time ("maximum"). Default is "expected" (expected exposure time in cohort).</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>param</code></td>
<td>
<p>A vector of the extra parameter(s) needed for certain stopping rule methods. For Wang-Tsiatis tests, this is the Delta parameter. For truncated SPRT, this is the targeted alternative toxicity probability p1. For Bayesian Gamma-Poisson model, this is the vector of hyperparameters (shape,rate) for the gamma prior on the toxicity event rate.</p>
</td>
</tr>
</table>
<h3>Value</h3>

<p>A rule.surv object, which is a list with the following elements: Rule, a two-column matrix with total follow-up times for each stage and their corresponding rejection boundaries; <code>n</code>; <code>p0</code>; <code>alpha</code>; <code>type</code>; <code>tau</code>; <code>param</code>; and cval, the boundary parameter for the rule
</p>


<h3>References</h3>

<p>Kulldorff, M., Davis, R. L., Kolczak, M., Lewis, E., Lieu, T., and Platt, R. (2011). A maximized sequential probability ratio test for drug and vaccine safety surveillance. <em>Sequential Analysis</em>, <strong>30(1)</strong>, 58–78.
</p>
<p>Zacks, S. and Mukhopadhyay, N. (2006). Exact risks of sequential point estimators of the exponential parameter. <em>Sequential Analysis</em>, <strong>25(2)</strong>, 203–226.
</p>


<h3>Examples</h3>

<pre><code class="language-R"># Survival Pocock test in 50 patient cohort at 10% level, expected toxicity
# probability of 20%, 100 day observation period
calc.rule.surv(n=50,p0=0.20,alpha=0.10,type="Pocock",tau=100)

# Survival Wang-Tsiatis test with Delta = 0.25 in 50 patient cohort at 10% level,
# expected toxicity probability of 20%, 100 day observation period
calc.rule.surv(n=50,p0=0.20,alpha=0.10,type="WT",tau=100,param=0.25)

# Gamma-Poisson test with hyperparameters (1, 1000) in 100 patient cohort at 5% level,
# expected toxicity probability of 10%, 60 day observation period
calc.rule.surv(n=100,p0=0.10,alpha=0.05,type="GP",tau=60,param=c(1,1000))

# Truncated exponential SPRT with p1 = 0.3 in 100 patient cohort at 5% level,
# expected toxicity probability of 10%, 60 day observation period
calc.rule.surv(n=100,p0=0.10,alpha=0.05,type="SPRT",tau=60,param=0.3)

</code></pre>


</div>