<div class="container">

<table style="width: 100%;"><tr>
<td>airdas_comments_process</td>
<td style="text-align: right;">R Documentation</td>
</tr></table>
<h2>Process comments in AirDAS data</h2>

<h3>Description</h3>

<p>Extract miscellaneous information recorded in AirDAS data comments, i.e. comment-data
</p>


<h3>Usage</h3>

<pre><code class="language-R">airdas_comments_process(x, ...)

## S3 method for class 'data.frame'
airdas_comments_process(x, ...)

## S3 method for class 'airdas_dfr'
airdas_comments_process(x, comment.format = NULL, ...)

## S3 method for class 'airdas_df'
airdas_comments_process(x, comment.format = NULL, ...)
</code></pre>


<h3>Arguments</h3>

<table>
<tr style="vertical-align: top;">
<td><code>x</code></td>
<td>
<p><code>airdas_dfr</code> or <code>airdas_df</code> object, 
or a data frame that can be coerced to a <code>airdas_dfr</code> object</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>...</code></td>
<td>
<p>ignored</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>comment.format</code></td>
<td>
<p>list; default is <code>NULL</code>. 
See the 'Using <code>comment.format</code>' section</p>
</td>
</tr>
</table>
<h3>Details</h3>

<p>Historically, project-specific or miscellaneous data have been 
recorded in AirDAS comments using specific formats and character codes. 
This functions identifies and extracts this data from the comment text strings. 
However, different data types have different comment-data formats. 
Specifically, TURTLE and PHOCOENA comment-data uses identifier codes 
that each signify a certain data pattern, while other comment-data
(usually that of CARETTA) uses data separated by some delimiter.
</p>


<h3>Value</h3>

<p><code>x</code>, filtered for comments with recorded data, 
with the following columns added: 
</p>

<ul>
<li>
<p> comment_str: the full comment string
</p>
</li>
<li>
<p> Misc#: Some number of descriptor columns. There should be <code>n</code> columns, 
although the minimum number will be two columns
</p>
</li>
<li>
<p> Value: Associated count or percentage for TURTLE/PHOCOENA data
</p>
</li>
<li>
<p> flag_check: logical indicating if the TURTLE/PHOCOENA 
comment string was longer than an expected number of characters, 
and thus should be manually inspected 
</p>
</li>
</ul>
<p>See the additional sections for more context. 
If <code>comment.format</code> is <code>NULL</code>, 
then the output data frame would two Misc# columns: 
a level one descriptor, e.g. "Fish ball" or "Jellyfish", 
and a level two descriptor, e.g. s, m, or c. 
However, if <code>comment.format$n</code> is say 4, then the output data frame would have
columns Misc1, Misc2, Misc3, and Misc4.
</p>
<p>Messages are printed if either <code>comment.format</code> is not <code>NULL</code>
and not comment-data is identified using <code>comment.format</code>, or if 
<code>x</code> has TURTLE/PHOCOENA data but no TURTLE/PHOCOENA comment-data
</p>


<h3>TURTLE and PHOCOENA comment-data</h3>

<p>Current supported data types are: fish balls, molas, jellyfish, and crab pots. 
See any of the AirDAS format PDFs (<code>airdas_format_pdf</code>) 
for information about the specific codes and formats used to
record this data. All comments are converted to lower case for processing 
to avoid missing data.
</p>
<p>These different codes contain (at most):
a level one descriptor (e.g. fish ball or crab pot), 
a level two descriptor (e.g. size or jellyfish species), 
and a value (a count or percentage). 
Thus, the extracted data are returned together in this structure. 
The output data frame is long data, i.e. it has one piece of information per line.
For instance, if the comment is "fb1s fb1m", then the output data frame
will have one line for the small fish ball and one for the medium fish ball. 
See Value section for more details.
</p>
<p>Currently this function only recognizes mola data recorded using the 
"m1", "m2", and "m3" codes (small, medium, and large mola, respectively). 
Thus, "mola" is not recognized and processed.
</p>
<p>The following codes are used for the level two descriptors: 
</p>

<table>
<tr>
<td style="text-align: left;">
    <em>Description</em> </td>
<td style="text-align: right;"> <em>Code</em>
</td>
</tr>
<tr>
<td style="text-align: left;">
    Small  </td>
<td style="text-align: right;"> s</td>
</tr>
<tr>
<td style="text-align: left;">
    Medium </td>
<td style="text-align: right;"> m</td>
</tr>
<tr>
<td style="text-align: left;">
    Large  </td>
<td style="text-align: right;"> l</td>
</tr>
<tr>
<td style="text-align: left;">
    Unknown  </td>
<td style="text-align: right;"> u</td>
</tr>
<tr>
<td style="text-align: left;">
    Chrysaora  </td>
<td style="text-align: right;"> c</td>
</tr>
<tr>
<td style="text-align: left;">
    Moon jelly </td>
<td style="text-align: right;"> m</td>
</tr>
<tr>
<td style="text-align: left;">
    Egg yolk   </td>
<td style="text-align: right;"> e</td>
</tr>
<tr>
<td style="text-align: left;">
    Other      </td>
<td style="text-align: right;"> o</td>
</tr>
<tr>
<td style="text-align: left;">
  </td>
</tr>
</table>
<h3>Using <code>comment.format</code>
</h3>

<p><code>comment.format</code> is a list that allows the user to specify the comment-data format. 
To use this argument, data must be separated by a delimiter. 
This list must contain three named elements:
</p>

<ul>
<li>
<p> n: A single number indicating the number of elements of data in each comment. 
Must equal the length of <code>type</code>. 
A comment must contain exactly this number of <code>sep</code> to be recognized as comment-data
</p>
</li>
<li>
<p> sep: A single string indicating the field separator string (delimiter). 
Values within each comment are separated by this string. 
Currently accepted values are ";" and ","
</p>
</li>
<li>
<p> type: A character vector of length <code>n</code> indicating the data type of 
each data element (column). 
All values must be one of: "character", "numeric", or "integer".
</p>
</li>
</ul>
<p>For instance, for most CARETTA data <code>comment.format</code> should be 
<code>list(n = 5, sep = ";", type = c("character", "character", "numeric", "numeric", "character"))</code>
</p>


<h3>Examples</h3>

<pre><code class="language-R">y &lt;- system.file("airdas_sample.das", package = "swfscAirDAS")
y.proc &lt;- airdas_process(y)

airdas_comments_process(y.proc)

</code></pre>


</div>