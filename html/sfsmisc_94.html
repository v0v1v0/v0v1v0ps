<div class="container">

<table style="width: 100%;"><tr>
<td>pretty10exp</td>
<td style="text-align: right;">R Documentation</td>
</tr></table>
<h2>Nice  10 ** k  Label Expressions</h2>

<h3>Description</h3>

<p>Produce nice <code class="reqn">a \times 10^k</code> expressions to be used
instead of the scientific notation  <code>"a E&lt;k&gt;"</code>.
</p>


<h3>Usage</h3>

<pre><code class="language-R">pretty10exp(x, drop.1 = FALSE, sub10 = FALSE, digits = 7, digits.fuzz,
            off = pmax(10^-digits, 2^-(l10x*log2(10)+1075)),
            lab.type = c("plotmath","latex"),
            lab.sep = c("cdot", "times"))
</code></pre>


<h3>Arguments</h3>

<table>
<tr style="vertical-align: top;">
<td><code>x</code></td>
<td>
<p>numeric vector (e.g. axis tick locations)</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>drop.1</code></td>
<td>
<p>logical indicating if <code class="reqn">1 \times</code> should be
dropped from the resulting expressions.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>sub10</code></td>
<td>
<p>logical, <code>"10"</code>, a non-negative integer number or
an integer vector of length two, say <code class="reqn">(k_1,k_2)</code>, indicating if some
<code class="reqn">10^j</code> expressions for <code class="reqn">j \in J</code> should be formatted
traditionally, notably e.g., <code class="reqn">10^0 \equiv 1</code>.
<br>
When a (non-negative) number, say <code class="reqn">k</code>, <code class="reqn">J = \{j; j \le k\}</code> are all simplified, when a length–2 vector,
<code class="reqn">J = \{j; k_1 \le j \le k_2\}</code> are.
</p>
<p>Special cases: <code>sub10 = TRUE</code> means to use
<code class="reqn">1</code> instead of <code class="reqn">10^0</code> and <code>sub10 = "10"</code> uses both
<code class="reqn">1</code> for <code class="reqn">10^0</code> and <code class="reqn">10</code> for <code class="reqn">10^1</code>; these are short
forms of <code>sub10 = c(0,0)</code> and <code>sub10 = c(0,1)</code> respectively.
</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>digits</code></td>
<td>
<p>number of digits for mantissa (<code class="reqn">a</code>) construction;
the number of <em>significant</em> digits, see <code>signif</code>.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>digits.fuzz</code></td>
<td>
<p>the old deprecated name for <code>digits</code>.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>off</code></td>
<td>
<p>a numeric offset in <code>eT &lt;- floor(l10x + off)</code> where
<code>l10x &lt;- log10(abs(x))</code> and <code>eT</code> are the exponents <code class="reqn">k</code>
for label factors <code class="reqn">10^k</code>.  Previously hardcoded to
<code>10^-digits</code>, the new default provides better results for
subnormal <code>abs(x)</code> values.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>lab.type</code></td>
<td>
<p>a string indicating how the result should look like.
By default, (<code>plotmath</code>-compatible)
<code>expression</code>s are returned. Alternatively,
<code>lab.type = "plotmath"</code> returns LaTeX formatted strings for
labels.  (The latter is useful, e.g., when using the <a href="https://CRAN.R-project.org/package=tikzDevice"><span class="pkg">tikzDevice</span></a>
package to generate LaTeX-processed figures.)</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>lab.sep</code></td>
<td>
<p>character separator between mantissa and exponent for
LaTeX labels; it will be prepended with a backslash,
i.e., ‘"cdot"’ will use ‘"\cdot"’</p>
</td>
</tr>
</table>
<h3>Value</h3>

<p>For the default <code>lab.type = "plotmath"</code>,
an expression of the same length as <code>x</code>, typically with elements
of the form <code>a %*% 10 ^ k</code>.
Exceptions are <code>0</code> which is kept simple, if <code>drop.1</code> is
true and <code class="reqn">a = 1</code>, <code>10 ^ k</code> is used, and if <code>sub10</code>
is not false, <code>a %*% 10 ^ 0</code> as <code>a</code>, and <code>a %*% 10 ^ k</code> as
as the corresponding formatted number <code>a * 10^k</code> independently of
<code>drop.1</code>.
</p>
<p>Otherwise, a <code>character</code> vector of the same length as
<code>x</code>.  For <code>lab.type = "latex"</code>, currently the only
alternative to the default, these strings are LaTeX (math mode)
compatible strings.
</p>


<h3>Note</h3>

<p>If <code>sub10</code> is set, it will typically be a small number such as 0,
1, or 2.  Setting <code>sub10 = TRUE</code> will be interpreted as
<code>sub10 =1</code> where resulting exponents <code class="reqn">k</code> will either be
negative or <code class="reqn">k \ge 2</code>.
</p>


<h3>Author(s)</h3>

<p>Martin Maechler;  Ben Bolker contributed <code>lab.type = "latex"</code>
and <code>lab.sep</code>.</p>


<h3>See Also</h3>

<p><code>axTexpr</code> and <code>eaxis()</code> which build on
<code>pretty10exp()</code>, notably the <code>eaxis()</code> example plots.
</p>
<p>The new <code>toLatex.numeric</code> method which gives very similar
results with option <code>scientific = TRUE</code>.
<br> Further, <code>axis</code>, <code>axTicks</code>.
</p>


<h3>Examples</h3>

<pre><code class="language-R">pretty10exp(-1:3 * 1000)
pretty10exp(-1:3 * 1000, drop.1 = TRUE)
pretty10exp(c(1,2,5,10,20,50,100,200) * 1e3)
pretty10exp(c(1,2,5,10,20,50,100,200) * 1e3, drop.1 = TRUE)

set.seed(17); lx &lt;- rlnorm(10, m=8, s=6)
pretty10exp(lx, digits = 3)
pretty10exp(lx, digits = 3, sub10 = 2)

pretty10exp(lx, digits = 3, lab.type="latex")
pretty10exp(lx, digits = 3, lab.type="latex", lab.sep="times", sub10=2)

## use regular formatted numbers from 0.03 to 300 :
pretty10exp(3*10^(-3:4), sub10 = c(-2,2))
pretty10exp(3*10^(-3:4), sub10 = c(-2,2), lab.type = "l")


ax &lt;- 10^(-6:0) - 2e-16
pretty10exp(ax, drop.1=TRUE) # nice for plotting
pretty10exp(ax, drop.1=TRUE, sub10=TRUE)
pretty10exp(ax, drop.1=TRUE, sub10=c(-2,2))

## in sfsmisc version &lt;= 1.0-16, no 'digits',
## i.e., implicitly had  digits := #{double precision digits} ==
(dig. &lt;- .Machine$double.digits * log10(2)) # 15.95
pretty10exp(ax, drop.1=TRUE, digits= dig.)  # ''ugly''

## Subnormal numbers
x &lt;- sort(c(outer(10^-(323:305), 1:9))); x &lt;- c(x[1]/2, x)
tail(x, 12) # nice
head(x, 6)  # "ugly" (they are multiple's of 2^-1074):
head(x, 6) / 2^-1074  # nice

head(p0 &lt;- pretty10exp(x, off = 10^-7), 30) # previous behavior {before 'off' existed}
str(head(pTen &lt;- lapply(p0, `[[`, 3L)))
str(exTen &lt;- sapply(pTen, `[[`, 3L)) # -324 -324 ..
head(f0 &lt;- sapply(p0, `[[`, 2L), 17)

head(p1 &lt;- pretty10exp(x))# new default
str(head(pTen1 &lt;- lapply(p1, `[[`, 3L)))
str(exTen1 &lt;- sapply(pTen1, `[[`, 3L)) # -324 -324 ..
head(f1 &lt;- sapply(p1, `[[`, 2L), 17)   #

head(cbind(x, f0, f1, exTen, exTen1), 80)
(nEQ &lt;- which(sapply(1:length(p0), function(i) p0[[i]] != p1[[i]])))
cbind(x, f0, f1, exTen, exTen1)[nEQ,]
stopifnot(is.finite(f1), 0.5 &lt;= f1, f1 &lt;= 9)
</code></pre>


</div>