<div class="container">

<table style="width: 100%;"><tr>
<td>prepare.training.validation.datasets</td>
<td style="text-align: right;">R Documentation</td>
</tr></table>
<h2>Prepare training and validation datasets</h2>

<h3>Description</h3>

<p>Computes per-patient pathway-derived network impact scores across all input
datasets, independently
</p>


<h3>Usage</h3>

<pre><code class="language-R">prepare.training.validation.datasets(
  data.directory = ".",
  output.directory = ".",
  data.types = c("mRNA"),
  data.types.ordinal = c("cna"),
  min.ordinal.threshold = c(cna = 3),
  centre.data = "median",
  p.threshold = 0.5,
  feature.selection.datasets = NULL,
  datasets = NULL,
  truncate.survival = 100,
  networks.database = "default",
  write.normed.datasets = TRUE,
  subset = NULL
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr style="vertical-align: top;">
<td><code>data.directory</code></td>
<td>
<p>Path to the directory containing datasets as specified
by <code>datasets</code></p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>output.directory</code></td>
<td>
<p>Path to the output folder where intermediate and
results files will be saved</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>data.types</code></td>
<td>
<p>A vector of molecular datatypes to load. Defaults to
c('mRNA')</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>data.types.ordinal</code></td>
<td>
<p>A vector of molecular datatypes to be treated as
ordinal. Defaults to c('cna')</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>min.ordinal.threshold</code></td>
<td>
<p>A named vector specifying minimum percent
threshold for each ordinal data type to be used prior to estimating
coefficients. Coefficient for features not satisfying minimum threshold will
not be estimated, and set to 0. Defaults to cna threshold as 3 percent</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>centre.data</code></td>
<td>
<p>A character string specifying the centre value to be used for 
scaling data. Valid values are: 'median', 'mean', or a user defined numeric threshold
e.g. '0.3' when modelling methylation beta values. This value is used for both scaling
as well as for dichotomising data for estimating univariate betas from Cox model.
Defaults to 'median'</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>p.threshold</code></td>
<td>
<p>Cox P value threshold to be applied for selecting features 
(e.g. genes) which will contribute to patient risk score estimation. Defaults to 0.5</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>feature.selection.datasets</code></td>
<td>
<p>A vector containing names of datasets used
for feature selection in function <code>derive.network.features()</code></p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>datasets</code></td>
<td>
<p>A vector containing names of all the datasets to be later
used for training and validation purposes</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>truncate.survival</code></td>
<td>
<p>A numeric value specifying survival truncation in
years. Defaults to 100 years which effectively means no truncation</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>networks.database</code></td>
<td>
<p>Name of the pathway networks database. Default to
NCI PID/Reactome/Biocarta i-e "default"</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>write.normed.datasets</code></td>
<td>
<p>A toggle to control whether processed mRNA and
survival data should be written to file</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>subset</code></td>
<td>
<p>A list with a Field and Entry component specifying a subset of
patients to be selected whose annotation Field matches Entry</p>
</td>
</tr>
</table>
<h3>Value</h3>

<p>The output files are stored under <code>output.directory</code>/output/
</p>


<h3>Author(s)</h3>

<p>Syed Haider
</p>


<h3>Examples</h3>

<pre><code class="language-R">
# get data directory 
data.directory &lt;- get.program.defaults()[["test.data.dir"]];

# initialise params
output.directory &lt;- tempdir();
data.types &lt;- c("mRNA");
feature.selection.datasets &lt;- c("Breastdata1");
training.datasets &lt;- c("Breastdata1");
validation.datasets &lt;- c("Breastdata1", "Breastdata2");

# preparing training and validation datasets.
# Normalisation &amp; patientwise subnet feature scores
prepare.training.validation.datasets(
  data.directory = data.directory,
  output.directory = output.directory,
  data.types =  data.types,
  feature.selection.datasets = feature.selection.datasets,
  datasets = unique(c(training.datasets, validation.datasets)),
  networks.database = "test"
  );

</code></pre>


</div>