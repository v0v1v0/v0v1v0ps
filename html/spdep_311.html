<div class="container">

<table style="width: 100%;"><tr>
<td>subset.listw</td>
<td style="text-align: right;">R Documentation</td>
</tr></table>
<h2>Subset a spatial weights list</h2>

<h3>Description</h3>

<p>The function subsets a spatial weights list, retaining objects for which the subset argument vector is TRUE. At present it will only subset non-general weights lists (that is those created by <code>nb2listw</code> with <code>glist=NULL</code>).</p>


<h3>Usage</h3>

<pre><code class="language-R">## S3 method for class 'listw'
subset(x, subset, zero.policy = attr(x, "zero.policy"), ...)
</code></pre>


<h3>Arguments</h3>

<table>
<tr style="vertical-align: top;">
<td><code>x</code></td>
<td>
<p>an object of class <code>listw</code></p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>subset</code></td>
<td>
<p>logical expression</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>zero.policy</code></td>
<td>
<p>default <code>attr(x, "zero.policy")</code> as set when <code>x</code> was created, if attribute not set, use global option value; if FALSE stop with error for any empty neighbour sets, if TRUE permit the weights list to be formed with zero-length weights vectors - passed through to <code>nb2listw</code></p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>...</code></td>
<td>
<p>generic function pass-through</p>
</td>
</tr>
</table>
<h3>Value</h3>

<p>The function returns an object of class <code>listw</code> with component <code>style</code> the same as the input object, component <code>neighbours</code> a list of integer vectors containing neighbour region number ids (compacted to run from 1:number of regions in subset), and component <code>weights</code> as the weights computed for <code>neighbours</code> using <code>style</code>. If no-neighbour observations are created by subsetting and <code>zero.policy</code> in the input weights object was FALSE, it will be set to TRUE and a warning issued.
</p>


<h3>Author(s)</h3>

<p>Roger Bivand <a href="mailto:Roger.Bivand@nhh.no">Roger.Bivand@nhh.no</a></p>


<h3>See Also</h3>

<p><code>nb2listw</code>, <code>subset.nb</code></p>


<h3>Examples</h3>

<pre><code class="language-R">col.gal.nb &lt;- read.gal(system.file("weights/columbus.gal", package="spData")[1])
to.be.dropped &lt;- c(31, 34, 36, 39, 42, 46)
pre &lt;- nb2listw(col.gal.nb)
print(pre)
post &lt;- subset(pre, !(1:length(col.gal.nb) %in% to.be.dropped))
print(post)
columbus &lt;- st_read(system.file("shapes/columbus.gpkg", package="spData")[1], quiet=TRUE)
nb &lt;- poly2nb(columbus)
lw &lt;- nb2listw(nb, style="W")
attr(lw, "zero.policy")
(lwa &lt;- subset(lw, 1:nrow(columbus) != c(21)))
attr(lwa, "zero.policy")
(lwb &lt;- subset(lw, !(1:nrow(columbus) %in% c(21, 36, 39))))
attr(lwb, "zero.policy")
</code></pre>


</div>