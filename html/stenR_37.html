<div class="container">

<table style="width: 100%;"><tr>
<td>normalize_scores_grouped</td>
<td style="text-align: right;">R Documentation</td>
</tr></table>
<h2>Normalize scores using GroupedFrequencyTables or GroupedScoreTables</h2>

<h3>Description</h3>

<p>Normalize scores using either <code>GroupedFrequencyTable</code> or
<code>GroupedScoreTable</code> for one or more variables. Given data.frame should also
contain columns used in <code>GroupingConditions</code> attached to the table
</p>


<h3>Usage</h3>

<pre><code class="language-R">normalize_scores_grouped(
  data,
  vars,
  ...,
  what,
  retain = FALSE,
  group_col = NULL,
  .dots = list()
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr style="vertical-align: top;">
<td><code>data</code></td>
<td>
<p>data.frame object containing raw scores</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>vars</code></td>
<td>
<p>names of columns to normalize. Length of vars
need to be the same as number of tables provided to either <code>...</code> or <code>.dots</code></p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>...</code></td>
<td>
<p><code>GroupedFrequencyTable</code> or <code>GroupedScoreTable</code> objects to be used
for normalization. They should be provided in the same order as <code>vars</code></p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>what</code></td>
<td>
<p>the values to get. One of either:
</p>

<ul>
<li> <p><code>quan</code> - the quantile of x in the raw score distribution
</p>
</li>
<li> <p><code>Z</code> - normalized Z score for the x raw score
</p>
</li>
<li>
<p> name of the scale calculated in <code>GroupedScoreTables</code> provided to <code>...</code> or
<code>.dots</code> argument
</p>
</li>
</ul>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>retain</code></td>
<td>
<p>either boolean: <code>TRUE</code> if all columns in the <code>data</code> are to be
retained, <code>FALSE</code> if none; or character vector with names of columns to be retained</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>group_col</code></td>
<td>
<p>name of the column for name of the group each
observation was qualified into. If left as default <code>NULL</code>, they won't be returned.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>.dots</code></td>
<td>
<p><code>GroupedFrequencyTable</code> or <code>GroupedScoreTable</code> objects provided
as a list, instead of individually in <code>...</code>.</p>
</td>
</tr>
</table>
<h3>Value</h3>

<p>data.frame with normalized scores
</p>


<h3>See Also</h3>

<p>Other score-normalization functions: 
<code>normalize_scores_df()</code>,
<code>normalize_scores_scoring()</code>,
<code>normalize_score()</code>
</p>


<h3>Examples</h3>

<pre><code class="language-R"># setup - create necessary objects #
suppressMessages({
  age_grouping &lt;- GroupConditions(
    conditions_category = "Age",
    "below 22" ~ age &lt; 22,
    "23-60" ~ age &gt;= 23 &amp; age &lt;= 60,
    "above 60" ~ age &gt; 60
  )
  sex_grouping &lt;- GroupConditions(
    conditions_category = "Sex",
    "Male" ~ sex == "M",
    "Female" ~ sex == "F"
  )
  NEU_gft &lt;- GroupedFrequencyTable(
    data = IPIP_NEO_300,
    conditions = list(age_grouping, sex_grouping),
    var = "N"
  )
  NEU_gst &lt;- GroupedScoreTable(
    NEU_gft,
    scale = list(STEN, STANINE)
  )
})

#### normalize scores ####
# to Z score or quantile using GroupedFrequencyTable
normalized_to_quan &lt;- normalize_scores_grouped(
  IPIP_NEO_300,
  vars = "N",
  NEU_gft,
  what = "quan",
  retain = c("sex", "age")
)

# only 'sex' and 'age' are retained
head(normalized_to_quan)

# to StandardScale attached to GroupedScoreTable
normalized_to_STEN &lt;- normalize_scores_grouped(
  IPIP_NEO_300,
  vars = "N",
  NEU_gst,
  what = "stanine",
  retain = FALSE,
  group_col = "sex_age_group"
)

# none is retained, 'sex_age_group' is created
head(normalized_to_STEN)
</code></pre>


</div>