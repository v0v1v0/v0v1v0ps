<div class="container">

<table style="width: 100%;"><tr>
<td>sfc_shape,sfc_2x2-method</td>
<td style="text-align: right;">R Documentation</td>
</tr></table>
<h2>Shape of the curve</h2>

<h3>Description</h3>

<p>Shape of the curve
</p>


<h3>Usage</h3>

<pre><code class="language-R">## S4 method for signature 'sfc_2x2'
sfc_shape(p)

all_2x2_shapes(level = 2)

## S4 method for signature 'sfc_3x3_peano'
sfc_shape(p)

all_3x3_peano_shapes(level = 2)

## S4 method for signature 'sfc_3x3_meander'
sfc_shape(p)

all_3x3_meander_shapes(level = 2)
</code></pre>


<h3>Arguments</h3>

<table>
<tr style="vertical-align: top;">
<td><code>p</code></td>
<td>
<p>An <code>sfc_2x2</code> object.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>level</code></td>
<td>
<p>Level of the 2x2 curve.</p>
</td>
</tr>
</table>
<h3>Details</h3>

<p>The shape of the curve is defined as a form of the curve without considering entry/exit directions, rotation,
flipping (reflection) nor reversing.
</p>


<h4>2x2 curve</h4>

<p>The process of selecting the shape segment of the curve denoted as <code>P</code> is:
</p>

<ol>
<li>
<p> The entry-point should locate in the bottom left subunit and the exit-point should
locate in the bottom right subunit. We try the four rotations (0, 90, 180, 270), and
the four rotations on the horizontally flipped curve. Once we find the transformed curve
that satisfies this criterion, we name it as <code>P2</code>.
</p>
</li>
<li>
<p> We also generate <code>P3</code> which is a horizontally flipped version of <code>rev(P2)</code>.
</p>
</li>
<li>
<p> We compare the first point <code>p</code> of <code>P2</code> and <code>P3</code>, and select the one whose <code>p</code> has the smaller
x-coordinate (i.e. more to the left of the curve). If the x-coordinates of <code>p</code> are the same in
<code>P2</code> and <code>P3</code>, we select the one whose <code>p</code> has the smaller y-coordinate.
</p>
</li>
</ol>
<h4>3x3 Peano curve</h4>

<p>The process of selecting the shape segment of the curve denoted as <code>P</code> is:
</p>

<ol>
<li>
<p> The entry-point should locate in the bottom left subunit and the exit-point should
locate in the top right subunit. We try the four rotations (0, 90, 180, 270). Once we find the transformed curve
that satisfies this criterion, we name it as <code>P2</code>.
</p>
</li>
<li>
<p> We also generate <code>P3</code> which is a 180 degrees rotation on the reversed <code>P2</code>, <code>P4</code> which is a diagonal flip with slop of 1 on <code>P2</code>
and <code>P5</code> which is a diagonal flip with slop of 1 on <code>P3</code>.
</p>
</li>
<li>
<p> We calculate the "UID" of <code>P(2-5)</code> and pick the one with the smallest UID as the final curve.
</p>
</li>
</ol>
<p>The UID of a 3x3 Peano curve is based on the hierarchical indices of the units on it. The hierarchy of the
Peano curve is traversed in a depth-first manner. On each node, the orientation of the corresponding unit is
calculated where vertical is 1 and horizontal is 2. The digits are concatenated into a long string.
</p>

<p><code>all_3x3_peano_shapes()</code> only calculates all shapes for Peano curve on level 2.
</p>
<p><code>all_3x3_meander_shapes()</code> only considers the Meander curve with all subunits on all levels in forward orientation.
</p>


<h3>Value</h3>

<p><code>sfc_shape()</code> returns a two-column data frame of the xy-coordinates of the shape curve.
</p>
<p><code>all_2x2_shapes()</code> returns a list of <code>n</code> two-column data frames where each data frame corresponds to
the xy-coordnates of the corresponding shape curve.
</p>


<h3>Examples</h3>

<pre><code class="language-R">p1 = sfc_2x2("I", 11)
p2 = sfc_2x2("R", 22)
draw_multiple_curves(
    p1, p2, 
    sfc_shape(p1), sfc_shape(p2), 
    col = "black")
sl = all_2x2_shapes(2)
draw_multiple_curves(list = sl, lwd = 2, col = "black")
sl = all_2x2_shapes(3)
draw_multiple_curves(list = sl, lwd = 2, col = "black")
p = sfc_3x3_peano("I", 11)
draw_multiple_curves(
    p, sfc_dflip(p),
    sfc_shape(p), sfc_shape(sfc_dflip(p)),
    col = "black")

sl = all_3x3_peano_shapes()
length(sl)
# the first 8 shapes
draw_multiple_curves(sl[1:8], col = "black")

sl = all_3x3_meander_shapes(2)
draw_multiple_curves(list = sl, lwd = 2, col = "black")
</code></pre>


</div>