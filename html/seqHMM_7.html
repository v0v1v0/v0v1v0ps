<div class="container">

<table style="width: 100%;"><tr>
<td>build_mmm</td>
<td style="text-align: right;">R Documentation</td>
</tr></table>
<h2>Build a Mixture Markov Model</h2>

<h3>Description</h3>

<p>Function <code>build_mmm</code> is a shortcut for constructing a mixture Markov
model as a restricted case of an <code>mhmm</code> object.
</p>


<h3>Usage</h3>

<pre><code class="language-R">build_mmm(
  observations,
  n_clusters,
  transition_probs,
  initial_probs,
  formula = NULL,
  data = NULL,
  coefficients = NULL,
  cluster_names = NULL,
  ...
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr style="vertical-align: top;">
<td><code>observations</code></td>
<td>
<p>An <code>stslist</code> object (see <code>seqdef</code>) containing
the sequences.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>n_clusters</code></td>
<td>
<p>A scalar giving the number of clusters/submodels
(not used if starting values for model parameters are given with
<code>initial_probs</code> and <code>transition_probs</code>).</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>transition_probs</code></td>
<td>
<p>A list of matrices of transition
probabilities for submodels of each cluster.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>initial_probs</code></td>
<td>
<p>A list which contains vectors of initial state
probabilities for submodels of each cluster.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>formula</code></td>
<td>
<p>Optional formula of class <code>formula</code> for the
mixture probabilities. Left side omitted.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>data</code></td>
<td>
<p>A data frame containing the variables used in the formula.
Ignored if no formula is provided.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>coefficients</code></td>
<td>
<p>An optional <code class="reqn">k x l</code> matrix of regression coefficients for
time-constant covariates for mixture probabilities, where <code class="reqn">l</code> is the number
of clusters and <code class="reqn">k</code> is the number of covariates. A logit-link is used for
mixture probabilities. The first column is set to zero.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>cluster_names</code></td>
<td>
<p>A vector of optional names for the clusters.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>...</code></td>
<td>
<p>Additional arguments to <code>simulate_transition_probs</code>.</p>
</td>
</tr>
</table>
<h3>Value</h3>

<p>Object of class <code>mhmm</code> with following elements:
</p>

<dl>
<dt><code>observations</code></dt>
<dd>
<p>State sequence object or a list of such containing the data.</p>
</dd>
<dt><code>transition_probs</code></dt>
<dd>
<p>A matrix of transition probabilities.</p>
</dd>
<dt><code>emission_probs</code></dt>
<dd>
<p>A matrix or a list of matrices of emission probabilities.</p>
</dd>
<dt><code>initial_probs</code></dt>
<dd>
<p>A vector of initial probabilities.</p>
</dd>
<dt><code>coefficients</code></dt>
<dd>
<p>A matrix of parameter coefficients for covariates (covariates in rows, clusters in columns).</p>
</dd>
<dt><code>X</code></dt>
<dd>
<p>Covariate values for each subject.</p>
</dd>
<dt><code>cluster_names</code></dt>
<dd>
<p>Names for clusters.</p>
</dd>
<dt><code>state_names</code></dt>
<dd>
<p>Names for hidden states.</p>
</dd>
<dt><code>symbol_names</code></dt>
<dd>
<p>Names for observed states.</p>
</dd>
<dt><code>channel_names</code></dt>
<dd>
<p>Names for channels of sequence data</p>
</dd>
<dt><code>length_of_sequences</code></dt>
<dd>
<p>(Maximum) length of sequences.</p>
</dd>
<dt><code>n_sequences</code></dt>
<dd>
<p>Number of sequences.</p>
</dd>
<dt><code>n_symbols</code></dt>
<dd>
<p>Number of observed states (in each channel).</p>
</dd>
<dt><code>n_states</code></dt>
<dd>
<p>Number of hidden states.</p>
</dd>
<dt><code>n_channels</code></dt>
<dd>
<p>Number of channels.</p>
</dd>
<dt><code>n_covariates</code></dt>
<dd>
<p>Number of covariates.</p>
</dd>
<dt><code>n_clusters</code></dt>
<dd>
<p>Number of clusters.</p>
</dd>
</dl>
<h3>See Also</h3>

<p><code>fit_model</code> for estimating model parameters;
<code>summary.mhmm</code> for a summary of a mixture model;
<code>separate_mhmm</code> for organizing an <code>mhmm</code> object into a list of
separate <code>hmm</code> objects; and <code>plot.mhmm</code> for plotting
mixture models.
</p>


<h3>Examples</h3>

<pre><code class="language-R">

# Define sequence data
data("mvad", package = "TraMineR")
mvad_alphabet &lt;- c(
  "employment", "FE", "HE", "joblessness", "school",
  "training"
)
mvad_labels &lt;- c(
  "employment", "further education", "higher education",
  "joblessness", "school", "training"
)
mvad_scodes &lt;- c("EM", "FE", "HE", "JL", "SC", "TR")
mvad_seq &lt;- seqdef(mvad, 17:86,
  alphabet = mvad_alphabet, states = mvad_scodes,
  labels = mvad_labels, xtstep = 6
)

# Initialize the MMM
set.seed(123)
mmm_mvad &lt;- build_mmm(
  observations = mvad_seq,
  n_clusters = 2,
  formula = ~male, data = mvad
)

## Not run: 
# Estimate model parameters
mmm_mvad &lt;- fit_model(mmm_mvad)$model

# Plot model (both clusters in the same plot)
require(igraph)
plot(mmm_mvad,
  interactive = FALSE,
  # Modify legend position and properties
  with.legend = "right", legend.prop = 0.3, cex.legend = 1.2,
  # Define vertex layout
  layout = layout_as_star,
  # Modify edge properties
  edge.label = NA, edge.arrow.size = 0.8, edge.curved = 0.2,
  # Modify vertex label positions (initial probabilities)
  vertex.label.pos = c("left", "right", "right", "left", "left", "right")
)

# Summary of the MMM
summary(mmm_mvad)

## End(Not run)
</code></pre>


</div>