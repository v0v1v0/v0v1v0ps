<div class="container">

<table style="width: 100%;"><tr>
<td>proportion_topics</td>
<td style="text-align: right;">R Documentation</td>
</tr></table>
<h2>Compute the topic or sentiment proportion time series</h2>

<h3>Description</h3>

<p>Aggregate the topical or sentiment proportions at the document
level into time series.
</p>


<h3>Usage</h3>

<pre><code class="language-R">proportion_topics(
  x,
  period = c("year", "quarter", "month", "day", "identity"),
  rolling_window = 1,
  complete = TRUE,
  plot = c(FALSE, TRUE, "silent"),
  plot_ridgelines = TRUE,
  as.xts = TRUE,
  ...
)

plot_proportion_topics(
  x,
  period = c("year", "quarter", "month", "day"),
  rolling_window = 1,
  complete = TRUE,
  plot_ridgelines = TRUE,
  ...
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr style="vertical-align: top;">
<td><code>x</code></td>
<td>
<p>a <code>LDA()</code>, <code>JST()</code> or <code>rJST()</code> model populated with internal dates
and/or internal sentiment.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>period</code></td>
<td>
<p>the sampling period within which the sentiment of documents
will be averaged. <code>period = "identity"</code> is a special case that will return
document-level variables before the aggregation happens. Useful to rapidly
compute topical sentiment at the document level.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>rolling_window</code></td>
<td>
<p>if greater than 1, determines the rolling window to
compute a moving average of sentiment. The rolling window is based on the
period unit and rely on actual dates (i.e, is not affected by unequally
spaced data points).</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>complete</code></td>
<td>
<p>if FALSE, only compute proportions at the upper level of the
topic model hierarchy (topics for rJST and sentiment for JST). No
effect on LDA models.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>plot</code></td>
<td>
<p>if <code>TRUE</code>, prints a plot of the time series and attaches it as an
attribute to the returned object. If <code>'silent'</code>, do not print the plot but
still attaches it as an attribute.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>plot_ridgelines</code></td>
<td>
<p>if <code>TRUE</code>, time series are plotted as ridgelines.
Requires <code>ggridges</code> package installed. If <code>FALSE</code>, the plot will use only
standards <code>ggplot2</code> functions. If the argument is missing and the package
<code>ggridges</code> is not installed, this will quietly switch to a <code>ggplot2</code>
output.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>as.xts</code></td>
<td>
<p>if <code>TRUE</code>, returns an xts::xts object. Otherwise, returns a
data.frame.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>...</code></td>
<td>
<p>other arguments passed on to <code>zoo::rollapply()</code> or <code>mean()</code> and
<code>sd()</code>.</p>
</td>
</tr>
</table>
<h3>Value</h3>

<p>A time series of proportions, stored as an xts::xts object or as a
data.frame.
</p>


<h3>See Also</h3>

<p>sentopics_sentiment sentopics_date
</p>
<p>Other series functions: 
<code>sentiment_breakdown()</code>,
<code>sentiment_series()</code>,
<code>sentiment_topics()</code>
</p>


<h3>Examples</h3>

<pre><code class="language-R">lda &lt;- LDA(ECB_press_conferences_tokens)
lda &lt;- fit(lda, 100)
proportion_topics(lda)

# plot shortcut
plot_proportion_topics(lda, period = "month", rolling_window = 3)
# with or without ridgelines
plot_proportion_topics(lda, period = "month", plot_ridgelines = FALSE)

# also available for rJST and JST models
jst &lt;- JST(ECB_press_conferences_tokens, lexicon = LoughranMcDonald)
jst &lt;- fit(jst, 100)
# including both layers
proportion_topics(jst)
# or not
proportion_topics(jst, complete = FALSE)
</code></pre>


</div>