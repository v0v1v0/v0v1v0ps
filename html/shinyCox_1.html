<div class="container">

<table style="width: 100%;"><tr>
<td>cox_KM_plots</td>
<td style="text-align: right;">R Documentation</td>
</tr></table>
<h2>Generate Cox-model predicted Kaplan-Meier plots</h2>

<h3>Description</h3>

<p>The main purpose of this function is to be used to create plots within the
shiny app created by <code>shine_coxph()</code>. For this reason the argument it takes,
<code>KM.hat</code>, is created through a process delineated in the example. This can
make the function more complicated if you want to use it outside of the shiny
app, although it is fully possible to do so.
</p>


<h3>Usage</h3>

<pre><code class="language-R">cox_KM_plots(KM.hat, clrs = NULL, confint, ylab = "Prob")
</code></pre>


<h3>Arguments</h3>

<table>
<tr style="vertical-align: top;">
<td><code>KM.hat</code></td>
<td>
<p>Time and survival probability created by <code>predict_one_coxfit()</code></p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>clrs</code></td>
<td>
<p>color of lines</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>confint</code></td>
<td>
<p>logical value to determine if confidence intervals should be
plotted</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>ylab</code></td>
<td>
<p>text label for y-axis</p>
</td>
</tr>
</table>
<h3>Value</h3>

<p>Plot of predicted survival curve(s)
</p>


<h3>Examples</h3>

<pre><code class="language-R">
library(survival)
# First colon is split into three treatment arms to compare predicted
# survival across arms
split_colon &lt;- split(colon, colon$rx)

colon_arm1 &lt;- split_colon$Obs
colon_arm2 &lt;- split_colon$Lev
colon_arm3 &lt;- split_colon$`Lev+5FU`

# One coxph model is fit for each treatment

colon1ph &lt;- coxph(Surv(time, status) ~sex +  age + obstruct + nodes,
                  colon_arm1, x = TRUE, model = TRUE)

colon2ph &lt;- coxph(Surv(time, status) ~ sex + age + obstruct + nodes,
                  colon_arm2, x = TRUE, model = TRUE)

colon3ph &lt;- coxph(Surv(time, status) ~ sex + age + obstruct + nodes,
                  colon_arm3, x = TRUE, model = TRUE)

# Creating list of models
cox.fit.list &lt;- vector("list", 3)
cox.fit.list[[1]] &lt;- prep_coxfit(colon1ph)
cox.fit.list[[2]] &lt;- prep_coxfit(colon2ph)
cox.fit.list[[3]] &lt;- prep_coxfit(colon3ph)

# Creating new data row for predictions
new.data &lt;- colon[1, ]
# Creating KM.hat object
n.models=length(cox.fit.list)
KM.hat=vector('list',n.models)
lp=rep(NA,n.models)
names(KM.hat)=names(cox.fit.list)
for (i in 1:n.models)
{
 km.hat=predict_one_coxfit(cox.fit.list[[i]],new.data)
 lp[i]=attr(km.hat,'lp')
 sfit=list(time=km.hat$time,surv=km.hat$surv)
 class(sfit)='survfit'
 KM.hat[[i]]=sfit
}
# Plot
cox_KM_plots(KM.hat)


</code></pre>


</div>