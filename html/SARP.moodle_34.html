<div class="container">

<table style="width: 100%;"><tr>
<td>libre.moodle</td>
<td style="text-align: right;">R Documentation</td>
</tr></table>
<h2>
Créer une question libre (« cloze », texte à compléter)
</h2>

<h3>Description</h3>

<p>Cette fonction permet de créer une question dont le format est libre,
qui se présente sous forme d'un texte à trous — format dit « cloze ».
</p>


<h3>Usage</h3>

<pre><code class="language-R">question_libre.moodle( texte.intro, textes.avant, texte.final,
                       reponses, notes = NULL, types = NULL,
                       commentaires = NULL,
                       titre = "Question libre",
                       commentaire.global = NA,
                       penalite = NA, note.question = NA, idnum = NA,
                       temps,
                       fichier.xml = get( "fichier.xml",
                                          envir = SARP.Moodle.env ) )
</code></pre>


<h3>Arguments</h3>

<table>
<tr style="vertical-align: top;">
<td><code>texte.intro</code></td>
<td>
<p> L'introduction de la question (une chaîne de caractères). Cet
énoncé peut contenir n'importe quel caractère (codage en UTF-8) et
n'importe quelles balises HTML. Il se trouvera au tout début de la question. </p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>textes.avant</code></td>
<td>
<p> Un vecteur de chaîne de caractères. À chaque
élément de ce vecteur sera associé un champ de réponse, qui sera
<em>précédé</em> du texte contenu dans cette chaîne de caractères. Ces
textes peuvent contenir n'importe quel caractère (codage en UTF-8) et
n'importe quelles balises HTML. Le nombre d'éléments du vecteur
doit être égal au nombre d'éléments de <code>reponses</code>. </p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>texte.final</code></td>
<td>
<p> Le texte qui doit se placer après le dernier champ
de réponse de la question. Il peut contenir n'importe quel caractère (codage en UTF-8) et
n'importe quelles balises HTML. </p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>reponses</code></td>
<td>
<p> Une liste dont chaque élément décrit la ou les
réponses attendues pour chaque « trou » du texte. Le nombre d'éléments
de cette liste définit le nombre de champs réponses dans la question
et doit être égal à la longueur du vecteur <code>textes.avant</code>.
Consultez les détails pour plus d'information. </p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>notes</code></td>
<td>
<p> Le vecteur des notes associées à chaque réponse. S'il
est fourni, il doit être de même longueur que <code>reponses</code>.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>types</code></td>
<td>
<p> Le vecteur des types de champ réponse. S'il est fourni,
il doit être de même longueur que <code>reponses</code>. Les types possibles
sont les textes <code>NUMERICAL</code> (par défaut), <code>MULTICHOICE</code>,
<code>MULTICHOICE_V</code>, <code>MULTICHOICE_H</code>, <code>MULTICHOICE_S</code>,
<code>MULTICHOICE_VS</code>, <code>MULTICHOICE_HS</code>, <code>MULTIRESPONSE</code>,
<code>MULTIRESPONSE_S</code>, <code>MULTIRESPONSE_H</code>,
<code>MULTIRESPONSE_S</code>, <code>SHORTANSWER</code> et <code>SHORTANSWER_C</code>.
Consultez les détails pour plus d'information.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>commentaires</code></td>
<td>
<p> Une liste de commentaires associés aux réponses
de chaque champ réponse. Si elle est fournie, elle doit être de même
longueur que <code>reponses</code>. Consultez les détails pour plus
d'information.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>titre</code></td>
<td>
<p> L'intitulé de la question, en HTML. </p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>commentaire.global, penalite, note.question, idnum</code></td>
<td>
<p>Options
communes à toutes les questions Moodle, voyez
<code>debut_question.moodle</code>.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>temps</code></td>
<td>
<p> Le temps conseillé pour répondre à la question, en
minutes. </p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>fichier.xml</code></td>
<td>
<p> Le fichier correspondant au questionnaire qui
contiendra cette question (par défaut, le dernier créé).  </p>
</td>
</tr>
</table>
<h3>Details</h3>

<p> Cette fonction construit, à partir des éléments fournis, une
question de type « cloze » : un texte à trous, les réponses étant à
entrer dans les trous ou à choisir dans une liste. C'est donc une suite
de « champs réponses », séparés par des textes.
</p>
<p>Chaque champ réponse est défini par la ou les réponses possibles, son
type, sa note et éventuellement les commentaires renvoyés à l'étudiant
en fonction de ses réponses. Ces informations sont obtenues à partir
des paramètres ci-dessus, le <em>i</em>-ème élément étant utilisé pour
le <em>i</em>-ème champ réponse.
</p>
<p>Le type <code>NUMERICAL</code> correspond à un champ attendant une réponse
numérique — c'est l'équivalent d'une question numérique. Une ou
plusieurs réponses sont possibles, qui seront de bonnes réponses, mais
pas forcément donnant toute tous les points. Les réponses sont à
fournir sous la forme d'une liste comportant un vecteur des valeurs,
nommé <code>Valeur</code> et un vecteur des tolérances associées, nommé
<code>Tolerance</code>.
</p>
<p>Les types <code>MULTICHOICE</code>, <code>MULTICHOICE_V</code>,
<code>MULTICHOICE_H</code>, <code>MULTICHOICE_S</code>, <code>MULTICHOICE_VS</code>,
<code>MULTICHOICE_HS</code>, <code>MULTIRESPONSE</code>, <code>MULTIRESPONSE_S</code>,
<code>MULTIRESPONSE_S</code>, <code>MULTIRESPONSE_HS</code>, <code>SHORTANSWER</code> et
<code>SHORTANSWER_C</code> correspondent à un champ permettant de choisir
(cocher) une ou plusieurs réponses dans une liste prédéfinie — c'est
l'équivalent d'un QCM. Tous ces types fonctionnent de façon similaire,
seuls la façon d'afficher la question et le nombre de réponses
sélectionnables varient (voyez le tableau récapitulatif ci-dessous).
Dans tous les cas, <code>reponses</code> doit contenir pour ces champs une
liste de deux éléments, l'un contenant le vecteur des textes des
réponses (élément nommé <code>Textes</code>), le second indiquant pour chaque
texte s'il correspond à une réponse correcte (<code>TRUE</code>) ou non
(<code>FALSE</code>). S'il y a plusieurs réponses correctes, chacune donne
une fraction égale des points. Pour préciser la note de chaque réponse,
placez dans la liste un élément nommé <code>Notes</code>, contenant le
vecteur des notes de chaque réponse (ces notes doivent être exprimées
en pourcentage de la note, arrondi à l'entier le plus proche, parmi les
valeurs autorisées par Moodle) ; dans ce cas, l'élément <code>Correct</code>
est ignoré et peut être omis.  Les commentaires de chaque réponse sont
à donner dans un vecteur de même longueur que <code>reponses$Textes</code>;
utilisez <code>NA</code> pour une réponse sans commentaire.
</p>

<table>
<tr>
<td style="text-align: right;">Code </td>
<td style="text-align: center;"> Disposition </td>
<td style="text-align: center;"> Remarque </td>
</tr>
<tr>
<td style="text-align: right;">
   <code>MULTICHOICE</code> </td>
<td style="text-align: center;"> Menu déroulant </td>
<td style="text-align: center;"> Une seule réponse
   possible </td>
</tr>
<tr>
<td style="text-align: right;">
   <code>MULTICHOICE_V</code> </td>
<td style="text-align: center;"> Série de boutons radio verticaux </td>
<td style="text-align: center;"> Une seule
   réponse </td>
</tr>
<tr>
<td style="text-align: right;">
   <code>MULTICHOICE_H</code> </td>
<td style="text-align: center;"> Série de boutons radio horizontaux </td>
<td style="text-align: center;"> Une seule
   réponse </td>
</tr>
<tr>
<td style="text-align: right;">
   <code>MULTIRESPONSE</code> </td>
<td style="text-align: center;"> Série de cases à cocher verticales </td>
<td style="text-align: center;"> Plusieurs
   réponse possibles </td>
</tr>
<tr>
<td style="text-align: right;">
   <code>MULTICHOICE_H</code> </td>
<td style="text-align: center;"> Série de cases à cocher horizontales </td>
<td style="text-align: center;"> Plusieurs
   réponses possibles </td>
</tr>
<tr>
<td style="text-align: right;">
   <code>SHORTANSWER</code> </td>
<td style="text-align: center;"> Champ de texte libre </td>
<td style="text-align: center;"> sensible à
 la casse </td>
</tr>
<tr>
<td style="text-align: right;">
   <code>SHORTANSWER_C</code> </td>
<td style="text-align: center;"> Champ de texte libre </td>
<td style="text-align: center;"> insensible à
   la casse </td>
</tr>
<tr>
<td style="text-align: right;">
 </td>
</tr>
</table>
<p>Les variantes avec le suffixe S conduisent à un ordre des réponses tiré
au sort par Moodle lors de l'affichage de la question.
</p>
<p>Une fois le texte complet de la question créé, au format « cloze », à
partir de ces éléments, la question est créée grâce à la fonction
<code>question.moodle.</code>
</p>


<h3>Value</h3>

<p>Aucune valeur n'est renvoyée par cette fonction.
</p>


<h3>Author(s)</h3>

<p>Emmanuel Curis <a href="mailto:emmanuel.curis@parisdescartes.fr">emmanuel.curis@parisdescartes.fr</a>
</p>


<h3>See Also</h3>

<p><code>numerique.moodle</code>, <code>qcm.moodle</code>,
<code>qroc.moodle</code>, <code>question_ouverte.moodle</code>, <code>vrai_faux.moodle</code>
</p>


<h3>Examples</h3>

<pre><code class="language-R">## Not run: 
# Commencer un nouveau questionnaire
q &lt;- debuter_xml.moodle( "exemple.libre" )

# Catégorie : exemples
categorie.moodle( "Exemples SARP/Question libre" )

# Une question Moodle libre avec champs numériques
question_libre.moodle( "Indiquez les chiffres du nombre 1974.",
                       list( "Unit&amp;eacute; : ", " &amp;mdash; dizaine : ",
                             " &amp;mdash; centaine : ", " &amp;mdash; milliers : " ), ".",
                       reponses = list( 4, 7, 9, 1 ) )

# Avec un champ numérique et des champs à choix multiples
question_libre.moodle( "&lt;cite&gt;Le Corbeau et le Renard&lt;/cite&gt;.",
                       list( "&lt;i&gt;Ma&amp;icirc;tre ",
                             " sur son arbre perch&amp;eacute;&lt;br /&gt;Tenait en son bec un ",
                             ".&lt;br /&gt;Ma&amp;icirc;tre ",
                             paste0( "&lt;/i&gt;par l'odeur all&amp;eacute;ch&amp;eacute;&lt;br /&gt;...",
                                     "&lt;br /&gt;est un po&amp;egrave;me compos&amp;eacute; en " ) ),
                       " par le po&amp;egrave;te Jean de la Fontaine.",
                       types = c( "MULTICHOICE", "MULTICHOICE_H",
                                  "SHORTANSWER", "NUMERICAL" ),
                       reponses = list( list( "Textes"  = c( "Renard", "Goupil",
                                                             "Corbeau", "Corneille" ),
                                              "Correct" = c( FALSE, FALSE, TRUE, FALSE ) ),
                                        list( "Textes"  = c( "Fromage", "Camembert",
                                                             "Bleu", "Livre" ), 
                                              "Correct" = c( TRUE, FALSE, FALSE, FALSE ) ),
                                        list( "Textes"  = c( "Renard", "Goupil",
                                                             "Corbeau", "Corneille" ),
                                              "Correct" = c( TRUE, FALSE, FALSE, FALSE ) ),
                                        1668 ) )

# On termine le questionnaire
finir_xml.moodle( )

# Importez le fichier exemple.libre.xml dans Moodle pour voir le résultat...
print(
"Importez le fichier exemple.libre.xml dans Moodle pour voir le r\u00e9sultat..." )

## End(Not run)
</code></pre>


</div>