<div class="container">

<table style="width: 100%;"><tr>
<td>xtfrm2</td>
<td style="text-align: right;">R Documentation</td>
</tr></table>
<h2>Sort Strings</h2>

<h3>Description</h3>

<p>The <code>sort</code> method for objects of class <code>character</code>
(<code>sort.character</code>) uses the locale-sensitive Unicode collation
algorithm to arrange strings in a vector with regards to a
chosen lexicographic order.
</p>
<p><code>xtfrm2</code> and [DEPRECATED] <code>xtfrm</code> generate an integer vector
that sort in the same way as its input, and hence can be used
in conjunction with <code>order</code> or <code>rank</code>.
</p>


<h3>Usage</h3>

<pre><code class="language-R">xtfrm2(x, ...)

## Default S3 method:
xtfrm2(x, ...)

## S3 method for class 'character'
xtfrm2(
  x,
  ...,
  locale = NULL,
  strength = 3L,
  alternate_shifted = FALSE,
  french = FALSE,
  uppercase_first = NA,
  case_level = FALSE,
  normalisation = FALSE,
  numeric = FALSE
)

xtfrm(x)

## Default S3 method:
xtfrm(x)

## S3 method for class 'character'
xtfrm(x)

## S3 method for class 'character'
sort(
  x,
  ...,
  decreasing = FALSE,
  na.last = NA,
  locale = NULL,
  strength = 3L,
  alternate_shifted = FALSE,
  french = FALSE,
  uppercase_first = NA,
  case_level = FALSE,
  normalisation = FALSE,
  numeric = FALSE
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr style="vertical-align: top;">
<td><code>x</code></td>
<td>
<p>character vector whose elements are to be sorted</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>...</code></td>
<td>
<p>further arguments passed to other methods</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>locale</code></td>
<td>
<p><code>NULL</code> or <code>""</code> for the default locale
(see <code>stri_locale_get</code>)
or a single string with a locale identifier,
see <code>stri_locale_list</code></p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>strength</code></td>
<td>
<p>see <code>stri_opts_collator</code></p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>alternate_shifted</code></td>
<td>
<p>see <code>stri_opts_collator</code></p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>french</code></td>
<td>
<p>see <code>stri_opts_collator</code></p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>uppercase_first</code></td>
<td>
<p>see <code>stri_opts_collator</code></p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>case_level</code></td>
<td>
<p>see <code>stri_opts_collator</code></p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>normalisation</code></td>
<td>
<p>see <code>stri_opts_collator</code></p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>numeric</code></td>
<td>
<p>see <code>stri_opts_collator</code></p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>decreasing</code></td>
<td>
<p>single logical value; if <code>FALSE</code>, the ordering
is nondecreasing (weakly increasing)</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>na.last</code></td>
<td>
<p>single logical value; if <code>TRUE</code>, then missing values
are placed at the end; if <code>FALSE</code>, they are put at the beginning;
if <code>NA</code>, then they are removed from the output whatsoever.</p>
</td>
</tr>
</table>
<h3>Details</h3>

<p>What 'xtfrm' stands for the current author does not know,
but would appreciate someone's enlightening him.
</p>


<h3>Value</h3>

<p><code>sort.character</code> returns a character vector, with only
the <code>names</code> attribute preserved. Note that the output vector
may be shorter than the input one.
</p>
<p><code>xtfrm2.character</code> and <code>xtfrm.character</code> return an integer vector;
most attributes are preserved.
</p>


<h3>Differences from Base R</h3>

<p>Replacements for the default S3 methods <code>sort</code>
and <code>xtfrm</code> for character vectors
implemented with <code>stri_sort</code>
and <code>stri_rank</code>.
</p>

<ul>
<li>
<p> Collation in different locales is difficult and non-portable across
platforms
<b>[fixed here – using services provided by ICU]</b>
</p>
</li>
<li>
<p> Overloading <code>xtfrm.character</code> has no effect in R, because S3
method dispatch is done internally with hard-coded support for
character arguments. Thus, we needed to replace the generic
<code>xtfrm</code> with the one that calls <code>UseMethod</code>
<b>[fixed here]</b>
</p>
</li>
<li> <p><code>xtfrm</code> does not support customisation of the linear ordering
relation it is based upon
<b>[fixed by introducing <code>...</code> argument to the new
generic, <code>xtfrm2</code>]</b>
</p>
</li>
<li>
<p> Neither <code>order</code>, <code>rank</code>, nor
<code>sort.list</code> is a generic, therefore
they should have to be rewritten from scratch to allow the inclusion of
our patches; interestingly, <code>order</code> even calls <code>xtfrm</code>,
but only for classed objects
<b>[not fixed here – see Examples for a workaround]</b>
</p>
</li>
<li> <p><code>xtfrm</code> for objects of type <code>character</code>
does not preserve the names attribute (but does so for <code>numeric</code>)
<b>[fixed here]</b>
</p>
</li>
<li> <p><code>sort</code> seems to preserve only the names attribute
which makes sense if <code>na.last</code> is <code>NA</code>, because the resulting
vector might be shorter
<b>[not fixed here as it would break compatibility with other
sorting methods]</b>
</p>
</li>
<li>
<p> Note that <code>sort</code> by default removes missing values whatsoever,
whereas <code>order</code> has <code>na.last=TRUE</code>
<b>[not fixed here as it would break compatibility with other
sorting methods]</b>
</p>
</li>
</ul>
<h3>Author(s)</h3>

<p><a href="https://www.gagolewski.com/">Marek Gagolewski</a>
</p>


<h3>See Also</h3>

<p>The official online manual of <span class="pkg">stringx</span> at <a href="https://stringx.gagolewski.com/">https://stringx.gagolewski.com/</a>
</p>
<p>Related function(s): <code>strcoll</code>
</p>


<h3>Examples</h3>

<pre><code class="language-R">x &lt;- c("a1", "a100", "a101", "a1000", "a10", "a10", "a11", "a99", "a10", "a1")
base::sort.default(x)   # lexicographic sort
sort(x, numeric=TRUE)   # calls stringx:::sort.character
xtfrm2(x, numeric=TRUE)  # calls stringx:::xtfrm2.character

rank(xtfrm2(x, numeric=TRUE), ties.method="average")  # ranks with averaged ties
order(xtfrm2(x, numeric=TRUE))    # ordering permutation
x[order(xtfrm2(x, numeric=TRUE))] # equivalent to sort()

# order a data frame w.r.t. decreasing ids and increasing vals
d &lt;- data.frame(vals=round(runif(length(x)), 1), ids=x)
d[order(-xtfrm2(d[["ids"]], numeric=TRUE), d[["vals"]]), ]


</code></pre>


</div>