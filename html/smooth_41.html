<div class="container">

<table style="width: 100%;"><tr>
<td>oes</td>
<td style="text-align: right;">R Documentation</td>
</tr></table>
<h2>Occurrence ETS model</h2>

<h3>Description</h3>

<p>Function returns the occurrence part of iETS model with the specified
probability update and model types.
</p>


<h3>Usage</h3>

<pre><code class="language-R">oes(y, model = "MNN", persistence = NULL, initial = "o",
  initialSeason = NULL, phi = NULL, occurrence = c("fixed", "general",
  "odds-ratio", "inverse-odds-ratio", "direct", "auto", "none"),
  ic = c("AICc", "AIC", "BIC", "BICc"), h = 10, holdout = FALSE,
  bounds = c("usual", "admissible", "none"), silent = c("all", "graph",
  "legend", "output", "none"), xreg = NULL, regressors = c("use",
  "select"), initialX = NULL, ...)
</code></pre>


<h3>Arguments</h3>

<table>
<tr style="vertical-align: top;">
<td><code>y</code></td>
<td>
<p>Either numeric vector or time series vector.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>model</code></td>
<td>
<p>The type of ETS model used for the estimation. Normally this should
be <code>"MNN"</code> or any other pure multiplicative or additive model. The model
selection is available here (although it's not fast), so you can use, for example,
<code>"YYN"</code> and <code>"XXN"</code> for selecting between the pure multiplicative and
pure additive models respectively. Using mixed models is possible, but not
recommended.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>persistence</code></td>
<td>
<p>Persistence vector <code class="reqn">g</code>, containing smoothing
parameters. If <code>NULL</code>, then estimated.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>initial</code></td>
<td>
<p>Can be either character or a vector of initial states. If it
is character, then it can be <code>"optimal"</code>, meaning that the initial
states are optimised, or <code>"backcasting"</code>, meaning that the initials are
produced using backcasting procedure.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>initialSeason</code></td>
<td>
<p>The vector of the initial seasonal components. If <code>NULL</code>,
then it is estimated.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>phi</code></td>
<td>
<p>The value of the dampening parameter. Used only for damped-trend models.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>occurrence</code></td>
<td>
<p>The type of model used in probability estimation. Can be
<code>"none"</code> - none,
<code>"fixed"</code> - constant probability,
<code>"odds-ratio"</code> - the Odds-ratio model with b=1 in Beta distribution,
<code>"inverse-odds-ratio"</code> - the model with a=1 in Beta distribution,
<code>"direct"</code> - the TSB-like (Teunter et al., 2011) probability update
mechanism a+b=1,
<code>"auto"</code> - the automatically selected type of occurrence model,
<code>"general"</code> - the general Beta model with two parameters. This will call
<code>oesg()</code> function with two similar ETS models and the same provided
parameters (initials and smoothing).</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>ic</code></td>
<td>
<p>The information criteria to use in case of model selection.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>h</code></td>
<td>
<p>The forecast horizon.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>holdout</code></td>
<td>
<p>If <code>TRUE</code>, holdout sample of size <code>h</code> is taken from
the end of the data.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>bounds</code></td>
<td>
<p>What type of bounds to use in the model estimation. The first
letter can be used instead of the whole word.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>silent</code></td>
<td>
<p>If <code>silent="none"</code>, then nothing is silent, everything is
printed out and drawn. <code>silent="all"</code> means that nothing is produced or
drawn (except for warnings). In case of <code>silent="graph"</code>, no graph is
produced. If <code>silent="legend"</code>, then legend of the graph is skipped.
And finally <code>silent="output"</code> means that nothing is printed out in the
console, but the graph is produced. <code>silent</code> also accepts <code>TRUE</code>
and <code>FALSE</code>. In this case <code>silent=TRUE</code> is equivalent to
<code>silent="all"</code>, while <code>silent=FALSE</code> is equivalent to
<code>silent="none"</code>. The parameter also accepts first letter of words ("n",
"a", "g", "l", "o").</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>xreg</code></td>
<td>
<p>The vector (either numeric or time series) or the matrix (or
data.frame) of exogenous variables that should be included in the model. If
matrix included than columns should contain variables and rows - observations.
Note that <code>xreg</code> should have number of observations equal either to
in-sample or to the whole series. If the number of observations in
<code>xreg</code> is equal to in-sample, then values for the holdout sample are
produced using es function.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>regressors</code></td>
<td>
<p>The variable defines what to do with the provided xreg:
<code>"use"</code> means that all of the data should be used, while
<code>"select"</code> means that a selection using <code>ic</code> should be done.
<code>"combine"</code> will be available at some point in future...</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>initialX</code></td>
<td>
<p>The vector of initial parameters for exogenous variables.
Ignored if <code>xreg</code> is NULL.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>...</code></td>
<td>
<p>The parameters passed to the optimiser, such as <code>maxeval</code>,
<code>xtol_rel</code>, <code>algorithm</code> and <code>print_level</code>. The description of
these is printed out by <code>nloptr.print.options()</code> function from the <code>nloptr</code>
package. The default values in the oes function are <code>maxeval=500</code>,
<code>xtol_rel=1E-8</code>, <code>algorithm="NLOPT_LN_NELDERMEAD"</code> and <code>print_level=0</code>.</p>
</td>
</tr>
</table>
<h3>Details</h3>

<p>The function estimates probability of demand occurrence, using the selected
ETS state space models.
</p>
<p>For the details about the model and its implementation, see the respective
vignette: <code>vignette("oes","smooth")</code>
</p>


<h3>Value</h3>

<p>The object of class "occurrence" is returned. It contains following list of
values:
</p>

<ul>
<li> <p><code>model</code> - the type of the estimated ETS model;
</p>
</li>
<li> <p><code>timeElapsed</code> - the time elapsed for the construction of the model;
</p>
</li>
<li> <p><code>fitted</code> - the fitted values for the probability;
</p>
</li>
<li> <p><code>fittedModel</code> - the fitted values of the underlying ETS model, where applicable
(only for occurrence=c("o","i","d"));
</p>
</li>
<li> <p><code>forecast</code> - the forecast of the probability for <code>h</code> observations ahead;
</p>
</li>
<li> <p><code>forecastModel</code> - the forecast of the underlying ETS model, where applicable
(only for occurrence=c("o","i","d"));
</p>
</li>
<li> <p><code>lower</code> - the lower bound of the interval if <code>interval!="none"</code>;
</p>
</li>
<li> <p><code>upper</code> - the upper bound of the interval if <code>interval!="none"</code>;
</p>
</li>
<li> <p><code>lowerModel</code> - the lower bound of the interval of the underlying ETS model
if <code>interval!="none"</code>;
</p>
</li>
<li> <p><code>upperModel</code> - the upper bound of the interval of the underlying ETS model
if <code>interval!="none"</code>;
</p>
</li>
<li> <p><code>states</code> - the values of the state vector;
</p>
</li>
<li> <p><code>logLik</code> - the log-likelihood value of the model;
</p>
</li>
<li> <p><code>nParam</code> - the number of parameters in the model (the matrix is returned);
</p>
</li>
<li> <p><code>residuals</code> - the residuals of the model;
</p>
</li>
<li> <p><code>y</code> - actual values of occurrence (zeros and ones).
</p>
</li>
<li> <p><code>persistence</code> - the vector of smoothing parameters;
</p>
</li>
<li> <p><code>phi</code> - the value of the damped trend parameter;
</p>
</li>
<li> <p><code>initial</code> - initial values of the state vector;
</p>
</li>
<li> <p><code>initialSeason</code> - the matrix of initials seasonal states;
</p>
</li>
<li> <p><code>occurrence</code> - the type of the occurrence model;
</p>
</li>
<li> <p><code>updateX</code> - boolean, defining, if the states of exogenous variables were
estimated as well.
</p>
</li>
<li> <p><code>initialX</code> - initial values for parameters of exogenous variables.
</p>
</li>
<li> <p><code>persistenceX</code> - persistence vector g for exogenous variables.
</p>
</li>
<li> <p><code>transitionX</code> - transition matrix F for exogenous variables.
</p>
</li>
<li> <p><code>accuracy</code> - The error measures for the forecast (in case of <code>holdout=TRUE</code>).
</p>
</li>
<li> <p><code>B</code> - the vector of all the estimated parameters (in case of "odds-ratio",
"inverse-odds-ratio" and "direct" models).
</p>
</li>
</ul>
<h3>Author(s)</h3>

<p>Ivan Svetunkov, <a href="mailto:ivan@svetunkov.ru">ivan@svetunkov.ru</a>
</p>


<h3>References</h3>


<ul>
<li>
<p> Svetunkov Ivan and Boylan John E. (2017). Multiplicative
State-Space Models for Intermittent Time Series. Working Paper of
Department of Management Science, Lancaster University, 2017:4 , 1-43.
</p>
</li>
<li>
<p> Teunter R., Syntetos A., Babai Z. (2011). Intermittent demand:
Linking forecasting to inventory obsolescence. European Journal of
Operational Research, 214, 606-615.
</p>
</li>
<li>
<p> Croston, J. (1972) Forecasting and stock control for intermittent
demands. Operational Research Quarterly, 23(3), 289-303.
</p>
</li>
<li>
<p> Syntetos, A., Boylan J. (2005) The accuracy of intermittent demand
estimates. International Journal of Forecasting, 21(2), 303-314.
</p>
</li>
</ul>
<h3>See Also</h3>

<p><code>adam, oesg, es</code>
</p>


<h3>Examples</h3>

<pre><code class="language-R">
y &lt;- rpois(100,0.1)
oes(y, occurrence="auto")

oes(y, occurrence="f")

</code></pre>


</div>