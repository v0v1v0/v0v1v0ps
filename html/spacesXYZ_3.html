<div class="container">

<table style="width: 100%;"><tr>
<td>adapt</td>
<td style="text-align: right;">R Documentation</td>
</tr></table>
<h2>
Chromatic Adaptation Functions
</h2>

<h3>Description</h3>

<p>Adapt XYZ, xyY, Lab, or Luv from a source viewing enviroment with a given illuminant,
to a target viewing environment with a different illuminant.
</p>


<h3>Usage</h3>

<pre><code class="language-R">## S3 method for class 'CAT'
adaptXYZ( x, XYZ.src )

## S3 method for class 'CAT'
adaptxyY( x, xyY.src )
## S3 method for class 'CAT'
adaptLab( x, Lab.src )
## S3 method for class 'CAT'
adaptLuv( x, Luv.src )
</code></pre>


<h3>Arguments</h3>

<table>
<tr style="vertical-align: top;">
<td><code>x</code></td>
<td>

<p>a <b>CAT</b> object as returned from <code>CAT()</code>
</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>XYZ.src</code></td>
<td>

<p>an Nx3 matrix, or a vector that can be converted to such a matrix, by rows.
Each row has an XYZ in the source viewing environment.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>xyY.src</code></td>
<td>

<p>an Nx3 matrix, or a vector that can be converted to such a matrix, by rows.
Each row has an xyY in the source viewing environment.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>Lab.src</code></td>
<td>

<p>an Nx3 matrix, or a vector that can be converted to such a matrix, by rows.
Each row has an Lab in the source viewing environment.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>Luv.src</code></td>
<td>

<p>an Nx3 matrix, or a vector that can be converted to such a matrix, by rows.
Each row has an Luv in the source viewing environment.</p>
</td>
</tr>
</table>
<h3>Details</h3>

<p><code>adaptXYZ()</code> is the most fundamental of the group;
it simply multiplies each of the input XYZs by <code>x$M</code>.
</p>
<p><code>adaptxyY()</code> converts xyY.src to XYZ,
calls <code>adaptXYZ()</code>,
and then converts back to xyY.tgt.
And it does an additional check:
if the xy of xyY.src is equal to the xy of <code>x$source.xyY</code>,
then the xy of the returned xyY.tgt is set to be the xy of <code>x$target.xyY</code>.
</p>
<p><code>adaptLab()</code> and <code>adaptLuv()</code> work in a similar way.
When <code>Lab.src</code> is transformed to XYZ, the whitepoint is set to <code>x$source.XYZ</code>.
And when the adapted XYZ is transformed to adapted Lab, the whitepoint is set to <code>target.XYZ</code>.
</p>


<h3>Value</h3>

<p><code>adaptXYZ()</code> returns an Nx3 matrix with adapted XYZ.  
Each row has an XYZ in the target viewing environment.
<br><code>adaptxyY()</code> returns an Nx3 matrix with adapted xyY.
Each row has an xyY in the target viewing environment.
</p>
<p><code>adaptLab()</code> and <code>adaptLuv()</code> return adapted Lab and Luv respectively.
</p>


<h3>References</h3>

<p>Hunt, R. W. G.
<b>The Reproduction of Colour</b>.  6th Edition.
John Wiley &amp; Sons.
2004.
</p>
<p>International Color Consortium.
ICC.1:2001-04.
File Format for Color Profiles.
2001.
</p>
<p>Lindbloom, Bruce.
Chromatic Adaptation.
<a href="http://brucelindbloom.com/Eqn_ChromAdapt.html">http://brucelindbloom.com/Eqn_ChromAdapt.html</a>
</p>
<p>Wikipedia.
CIECAM02.
<a href="https://en.wikipedia.org/wiki/CIECAM02">https://en.wikipedia.org/wiki/CIECAM02</a>
</p>


<h3>See Also</h3>

<p><code>CAT()</code>,
<code>standardXYZ()</code>
</p>


<h3>Examples</h3>

<pre><code class="language-R"># try the Bradford method
bCAT = CAT( 'D50', 'D65', method='bradford' )

adaptXYZ( bCAT, c(1,1,0.5) )
##               X         Y         Z
##  [1,] 0.9641191 0.9921559 0.6567701


adaptLab( bCAT, c(50,20,-10) )
##              L        a         b
##  [1,] 49.97396 20.84287 -10.19661      # as expected, there is a change

adaptLab( bCAT, c(40,0,0) )
##        L a b
##  [1,] 40 0 0   # but adaptLab() always preserves neutrals


adaptLuv( bCAT, c(40,0,0) )
##        L u v
##  [1,] 40 0 0   # and adaptLuv() also preserves neutrals



# try the scaling method - now XYZ are scaled independently
sCAT = CAT( 'D50', 'D65', method='scaling' )

adaptLab( sCAT, c(50,20,-10) )
##        L  a   b
##  [1,] 50 20 -10    with sCAT, adaptLab() is now the identity for *all* colors


adaptLuv( sCAT, c(50,-20,10) )
##        L         u        v
##  [1,] 50 -18.32244 11.29946    but adaptLuv() is NOT the identity for all colors
</code></pre>


</div>