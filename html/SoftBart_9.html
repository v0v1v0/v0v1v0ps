<div class="container">

<table style="width: 100%;"><tr>
<td>posterior_probs</td>
<td style="text-align: right;">R Documentation</td>
</tr></table>
<h2>BART Posterior Inclusion Probabilities</h2>

<h3>Description</h3>

<p>Computes the posterior inclusion probabilities (PIPs) for the fitted 
SoftBART model, as well as variable importances and the median probability
model (MPM).
</p>


<h3>Usage</h3>

<pre><code class="language-R">posterior_probs(fit)
</code></pre>


<h3>Arguments</h3>

<table><tr style="vertical-align: top;">
<td><code>fit</code></td>
<td>
<p>An object of class <code>softbart</code>, <code>softbart_regression</code>, or
<code>softbart_probit</code>.</p>
</td>
</tr></table>
<h3>Value</h3>

<p>A list containing the following:
</p>

<ul>
<li> <p><code>varimp</code>: a vector containing the average number of times a predictor
was used in a splitting rule.
</p>
</li>
<li> <p><code>post_probs</code>: the posterior inclusion probabilities for each predictor.
</p>
</li>
<li> <p><code>median_probability_model</code>: a vector containing the indicies of the
variables included in at least 50 percent of the samples.
</p>
</li>
</ul>
<h3>Examples</h3>

<pre><code class="language-R">## NOTE: SET NUMBER OF BURN IN AND SAMPLE ITERATIONS HIGHER IN PRACTICE

num_burn &lt;- 10 ## Should be ~ 5000
num_save &lt;- 10 ## Should be ~ 5000

set.seed(1234)
f_fried &lt;- function(x) 10 * sin(pi * x[,1] * x[,2]) + 20 * (x[,3] - 0.5)^2 + 
  10 * x[,4] + 5 * x[,5]

gen_data &lt;- function(n_train, n_test, P, sigma) {
  X &lt;- matrix(runif(n_train * P), nrow = n_train)
  mu &lt;- f_fried(X)
  X_test &lt;- matrix(runif(n_test * P), nrow = n_test)
  mu_test &lt;- f_fried(X_test)
  Y &lt;- mu + sigma * rnorm(n_train)
  Y_test &lt;- mu_test + sigma * rnorm(n_test)
  
  return(list(X = X, Y = Y, mu = mu, X_test = X_test, Y_test = Y_test, mu_test = mu_test))
}

## Simiulate dataset
sim_data &lt;- gen_data(250, 100, 1000, 1)

## Fit the model
fit &lt;- softbart(X = sim_data$X, Y = sim_data$Y, X_test = sim_data$X_test, 
                hypers = Hypers(sim_data$X, sim_data$Y, num_tree = 50, temperature = 1),
                opts = Opts(num_burn = num_burn, num_save = num_save, update_tau = TRUE))
                
## Variable selection

post_probs &lt;- posterior_probs(fit)
plot(post_probs$post_probs)
print(post_probs$median_probability_model)


</code></pre>


</div>