<div class="container">

<table style="width: 100%;"><tr>
<td>getPitchHps</td>
<td style="text-align: right;">R Documentation</td>
</tr></table>
<h2>Harmonic product spectrum</h2>

<h3>Description</h3>

<p>Internal soundgen function.
</p>


<h3>Usage</h3>

<pre><code class="language-R">getPitchHps(
  frame,
  freqs,
  bin,
  hpsThres,
  hpsNum,
  hpsNorm,
  hpsPenalty,
  pitchFloor,
  pitchCeiling
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr style="vertical-align: top;">
<td><code>frame</code></td>
<td>
<p>the abs spectrum of a frame, as returned by
<code>fft</code></p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>freqs</code></td>
<td>
<p>frequency per bin of spectrogram</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>bin</code></td>
<td>
<p>spectrogram bin width, Hz</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>hpsThres</code></td>
<td>
<p>voicing threshold (unitless, ~0 to 1)</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>hpsNum</code></td>
<td>
<p>the number of times the spectrum is downsampled</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>hpsNorm</code></td>
<td>
<p>the amount of inflation of hps pitch certainty (0 = none)</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>hpsPenalty</code></td>
<td>
<p>the amount of penalizing hps candidates in low frequencies
(0 = none)</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>pitchFloor, pitchCeiling</code></td>
<td>
<p>absolute bounds for pitch candidates (Hz)</p>
</td>
</tr>
</table>
<h3>Details</h3>

<p>Estimates pitch per frame using the harmonic product spectrum. Algorithm:
downsample the spectrum repeatedly padding with 0 to the original length,
then multiply the resulting scaled spectra. This has the effect of
emphasizing f0, which should hopefully become the highest spectral peak. See
https://cnx.org/contents/i5AAkZCP@2/Pitch-Detection-Algorithms
</p>


<h3>Value</h3>

<p>Returns either NULL or a dataframe of pitch candidates.
</p>


</div>