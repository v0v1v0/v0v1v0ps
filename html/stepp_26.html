<div class="container">

<table style="width: 100%;"><tr>
<td>stepp.KM</td>
<td style="text-align: right;">R Documentation</td>
</tr></table>
<h2>
The constructor to create the stmodelKM object
</h2>

<h3>Description</h3>

<p>This is the constructor function for the stmodelKM object.  This object sets up the data with 
a stepp model using the Kaplan-Meier method for analysis.<br></p>
<p>The model explores the treatment-covariate interactions in survival data arising 
from two treatment arms of a clinical trial. The treatment effects are measured using survival 
functions at a specified time point estimated from the Kaplan-Meier method and the hazard ratio 
based on observed-minus-expected estimation. A permutation distribution approach to inference 
is implemented, based on permuting the covariate values within each treatment group. 
The statistical significance of observed heterogeneity of treatment effects is calculated using 
permutation tests:<br><br>
1) for the maximum difference between each subpopulation effect and the overall population 
treatment effect or supremum based test statistic; <br>
2) for the difference between each subpopulation effect and the overall population treatment 
effect, which resembles the chi-square statistic. 
</p>


<h3>Usage</h3>

<pre><code class="language-R">	stepp.KM(coltrt, survTime, censor, trts, timePoint)
</code></pre>


<h3>Arguments</h3>

<table>
<tr style="vertical-align: top;">
<td><code>coltrt</code></td>
<td>
<p>the treatment variable</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>survTime</code></td>
<td>
<p>the time to event variable</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>censor</code></td>
<td>
<p>the censor variable</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>trts</code></td>
<td>
<p>a vector containing the codes for the 2 treatment arms, 1st and 2nd treatment groups, respectively</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>timePoint</code></td>
<td>
<p>timepoint to estimate survival</p>
</td>
</tr>
</table>
<h3>Value</h3>

<p>It returns the stmodelKM object.
</p>


<h3>Author(s)</h3>

<p>Wai-Ki Yip
</p>


<h3>References</h3>

<p>Bonetti M, Gelber RD. Patterns of treatment effects in subsets of patients in clinical trials. Biostatistics 2004; 5(3):465-481.
</p>
<p>Bonetti M, Zahrieh D, Cole BF, Gelber RD. A small sample study of the STEPP approach to assessing treatment-covariate interactions in survival data. Statistics in Medicine 2009; 28(8):1255-68. 
</p>


<h3>See Also</h3>

<p><code>stwin</code>,     <code>stsubpop</code>,  <code>stmodelKM</code>, 
<code>stmodelCI</code>, <code>stmodelGLM</code>, 
<code>steppes</code>,   <code>stmodel</code>, 
<code>stepp.win</code>,        <code>stepp.subpop</code>,     
<code>stepp.CI</code>,         <code>stepp.GLM</code>,
<code>stepp.test</code>,       <code>estimate</code>,         <code>generate</code>
</p>


<h3>Examples</h3>

<pre><code class="language-R">#GENERATE TREATMENT VARIABLE:
N &lt;- 1000
Txassign &lt;- sample(c(1,2), N, replace=TRUE, prob=c(1/2, 1/2))
n1 &lt;- length(Txassign[Txassign==1])
n2 &lt;- N - n1
#GENERATE A COVARIATE:
covariate &lt;- rnorm(N, 55, 7)
#GENERATE SURVIVAL AND CENSORING VARIABLES ASSUMING A TREATMENT COVARIATE INTERACTION:
Entry &lt;- sort( runif(N, 0, 5) )
SurvT1 &lt;- .5
beta0 &lt;-  -65 / 75
beta1 &lt;- 2 / 75
Surv &lt;- rep(0, N)
lambda1 &lt;- -log(SurvT1) / 4
Surv[Txassign==1] &lt;- rexp(n1, lambda1)
Surv[Txassign==2] &lt;- rexp(n2, (lambda1*(beta0+beta1*covariate[Txassign==2])))
EventTimes &lt;- rep(0, N)
EventTimes &lt;- Entry + Surv
censor &lt;- rep(0, N)
time &lt;- rep(0,N)
for ( i in 1:N )
   {
     censor[i] &lt;- ifelse( EventTimes[i] &lt;= 7, 1, 0 )
     time[i] &lt;- ifelse( EventTimes[i] &lt; 7, Surv[i], 7 - Entry[i] ) 
   }

modKM &lt;- stepp.KM( coltrt=Txassign, survTime=time, censor=censor, trts=c(1,2), timePoint=4)

</code></pre>


</div>