<div class="container">

<table style="width: 100%;"><tr>
<td>gapply</td>
<td style="text-align: right;">R Documentation</td>
</tr></table>
<h2> Apply Functions Over Vertex Neighborhoods </h2>

<h3>Description</h3>

<p>Returns a vector or array or list of values obtained by applying a function to vertex neighborhoods of a given order.
</p>


<h3>Usage</h3>

<pre><code class="language-R">gapply(X, MARGIN, STATS, FUN, ..., mode = "digraph", diag = FALSE, 
    distance = 1, thresh = 0, simplify = TRUE)
</code></pre>


<h3>Arguments</h3>

<table>
<tr style="vertical-align: top;">
<td><code>X</code></td>
<td>
<p> one or more input graphs. </p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>MARGIN</code></td>
<td>
<p> a vector giving the “margin” of <code>X</code> to be used in calculating neighborhoods.  1 indicates rows (out-neighbors), 2 indicates columns (in-neighbors), and c(1,2) indicates rows and columns (total neighborhood). </p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>STATS</code></td>
<td>
<p> the vector or matrix of vertex statistics to be used. </p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>FUN</code></td>
<td>
<p> the function to be applied.  In the case of operators, the function name must be quoted. </p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>...</code></td>
<td>
<p> additional arguments to <code>FUN</code>. </p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>mode</code></td>
<td>
 <p><code>"graph"</code> if <code>X</code> is a simple graph, else <code>"digraph"</code>. </p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>diag</code></td>
<td>
<p> boolean; are the diagonals of <code>X</code> meaningful? </p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>distance</code></td>
<td>
<p> the maximum geodesic distance at which neighborhoods are to be taken.  1 signifies first-order neighborhoods, 2 signifies second-order neighborhoods, etc. </p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>thresh</code></td>
<td>
<p> the threshold to be used in dichotomizing <code>X</code>. </p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>simplify</code></td>
<td>
<p> boolean; should we attempt to coerce output to a vector if possible? </p>
</td>
</tr>
</table>
<h3>Details</h3>

<p>For each vertex in <code>X</code>, <code>gapply</code> first identifies all members of the relevant neighborhood (as determined by <code>MARGIN</code> and <code>distance</code>) and pulls the rows of <code>STATS</code> associated with each.  <code>FUN</code> is then applied to this collection of values.  This provides a very quick and easy way to answer questions like:
</p>

<ul>
<li>
<p> How many persons are in each ego's 3rd-order neighborhood?
</p>
</li>
<li>
<p> What fraction of each ego's alters are female?
</p>
</li>
<li>
<p> What is the mean income for each ego's trading partners?
</p>
</li>
<li>
<p> etc.
</p>
</li>
</ul>
<p>With clever use of <code>FUN</code> and <code>STATS</code>, a wide range of functionality can be obtained.
</p>


<h3>Value</h3>

<p>The result of the iterated application of <code>FUN</code> to each vertex neighborhood's <code>STATS</code>.
</p>


<h3>Author(s)</h3>

<p> Carter T. Butts <a href="mailto:buttsc@uci.edu">buttsc@uci.edu</a></p>


<h3>See Also</h3>

 <p><code>apply</code>, <code>sapply</code> </p>


<h3>Examples</h3>

<pre><code class="language-R">#Generate a random graph
g&lt;-rgraph(6)

#Calculate the degree of g using gapply
all(gapply(g,1,rep(1,6),sum)==degree(g,cmode="outdegree"))
all(gapply(g,2,rep(1,6),sum)==degree(g,cmode="indegree"))
all(gapply(g,c(1,2),rep(1,6),sum)==degree(symmetrize(g),cmode="freeman")/2)

#Find first and second order neighborhood means on some variable
gapply(g,c(1,2),1:6,mean)
gapply(g,c(1,2),1:6,mean,distance=2)

</code></pre>


</div>