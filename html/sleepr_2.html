<div class="container">

<table style="width: 100%;"><tr>
<td>curate_dead_animals</td>
<td style="text-align: right;">R Documentation</td>
</tr></table>
<h2>Remove – irrelevant – data after individual have died</h2>

<h3>Description</h3>

<p>This function detects when individuals have died based on their first (very) long bout of immobility.
Following data (which may include spurious artefact of movement) are removed.
</p>


<h3>Usage</h3>

<pre><code class="language-R">curate_dead_animals(data, moving_var = moving, time_window = hours(24),
  prop_immobile = 0.01, resolution = 24)
</code></pre>


<h3>Arguments</h3>

<table>
<tr style="vertical-align: top;">
<td><code>data</code></td>
<td>
<p>data.table containing behavioural variable from or one multiple animals.
When it has a key, unique values, are assumed to represent unique individuals (e.g. in a behavr table).
Otherwise, it analysis the data as coming from a single animal. <code>data</code> must have a column <code>t</code> representing time.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>moving_var</code></td>
<td>
<p>logical variable in <code>data</code> used to define the moving (alive) state (default is <code>moving</code>)</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>time_window</code></td>
<td>
<p>window during which to define death (default is one day)</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>prop_immobile</code></td>
<td>
<p>proportion of immobility that counts as "dead" during time_window (see details)</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>resolution</code></td>
<td>
<p>how much scanning windows overlap. Expressed as a factor (see details).</p>
</td>
</tr>
</table>
<h3>Details</h3>

<p>This function scans the time series looking for "death" in the right (future) data, within <code>time_window</code>.
Death is defined as <code>mean(moving_var) &lt; prop_immobile</code> within a time window.
Moving window start every <code>time_window/resolution</code>. <code>resolution = 1</code> is fast but means no overlap.
The default would score an animal as dead it does not move more than <em>one percent of the time</em> for at least <em>one day</em>.
All data following a "death" event are removed.
</p>


<h3>Value</h3>

<p>an object of the same type as <code>data</code> (i.e. data.table::data.table or behavr::behavr).
</p>


<h3>See Also</h3>


<ul><li> <p>sleep_annotation – to score movement and slepe
</p>
</li></ul>
<h3>Examples</h3>

<pre><code class="language-R">dt1 &lt;- toy_activity_data()
#all movement after day 3 is set at 0
dt1[t &gt; days(3), moving := FALSE]
# one artefact of movement is detected at day 3.5
dt1[t == days(3.5), moving := TRUE]

dt2 &lt;- curate_dead_animals(dt1)
dt3 &lt;- curate_dead_animals(dt1,prop_immobile = 0)
## Not run: 
library(ggplot2)
ggplot(data=dt1[,test:=1],aes(t, as.numeric(moving))) +
  geom_line(data=dt1[,test:=1]) +
  geom_line(data=dt2[, test:=2])+
  geom_line(data=dt3[, test:=3])+
  facet_grid(test ~ .)+
  scale_x_time()

## End(Not run)
</code></pre>


</div>