<div class="container">

<table style="width: 100%;"><tr>
<td>hagelloch</td>
<td style="text-align: right;">R Documentation</td>
</tr></table>
<h2>1861 Measles Epidemic in the City of Hagelloch, Germany</h2>

<h3>Description</h3>

<p>Data on the 188 cases in the measles outbreak among children in the
German city of Hagelloch (near Tübingen) 1861. The data were
originally collected by Dr. Albert Pfeilsticker (1863) and augmented and
re-analysed by Dr. Heike Oesterle (1992).
This dataset is used to illustrate the <code>twinSIR</code> model class in
<code>vignette("twinSIR")</code>.
</p>


<h3>Usage</h3>

<pre><code class="language-R">data("hagelloch")
</code></pre>


<h3>Format</h3>

<p>Loading <code>data("hagelloch")</code> gives two objects:
<code>hagelloch</code> and <code>hagelloch.df</code>.
The latter is the original <code>data.frame</code> of 188 rows
with individual information for each infected child.
<code>hagelloch</code> has been generated from <code>hagelloch.df</code>
via <code>as.epidata</code> (see the Examples below) to obtain an
<code>"epidata"</code> object for use with <code>twinSIR</code>.
It contains the entire SIR event history of the outbreak
(but not all of the covariates).
</p>
<p>The covariate information in <code>hagelloch.df</code> is as follows:
</p>

<dl>
<dt>PN:</dt>
<dd>
<p>patient number</p>
</dd>
<dt>NAME:</dt>
<dd>
<p>patient name (as a factor)</p>
</dd>
<dt>FN:</dt>
<dd>
<p>family index</p>
</dd>
<dt>HN:</dt>
<dd>
<p>house number</p>
</dd>
<dt>AGE:</dt>
<dd>
<p>age in years</p>
</dd>
<dt>SEX:</dt>
<dd>
<p>gender of the individual (factor: male, female)</p>
</dd>
<dt>PRO:</dt>
<dd>
<p><code>Date</code> of prodromes</p>
</dd>
<dt>ERU:</dt>
<dd>
<p><code>Date</code> of rash</p>
</dd>
<dt>CL:</dt>
<dd>
<p>class (factor: preschool, 1st class, 2nd class)</p>
</dd>
<dt>DEAD:</dt>
<dd>
<p><code>Date</code> of death (with missings)</p>
</dd>
<dt>IFTO:</dt>
<dd>
<p>number of patient who is the putative source of infection (0 = unknown)</p>
</dd>
<dt>SI:</dt>
<dd>
<p>serial interval = number of days between dates of prodromes of infection source and infected person</p>
</dd>
<dt>C:</dt>
<dd>
<p>complications (factor: no complications, bronchopneumonia, severe bronchitis, lobar pneumonia, pseudocroup, cerebral edema)</p>
</dd>
<dt>PR:</dt>
<dd>
<p>duration of prodromes in days</p>
</dd>
<dt>CA:</dt>
<dd>
<p>number of cases in family</p>
</dd>
<dt>NI:</dt>
<dd>
<p>number of initial cases</p>
</dd>
<dt>GE:</dt>
<dd>
<p>generation number of the case</p>
</dd>
<dt>TD:</dt>
<dd>
<p>day of max. fever (days after rush)</p>
</dd>
<dt>TM:</dt>
<dd>
<p>max. fever (degree Celsius)</p>
</dd>
<dt>x.loc:</dt>
<dd>
<p>x coordinate of house (in meters). Scaling in metres
is obtained by multiplying the original coordinates by 2.5 (see details
in Neal and Roberts (2004))</p>
</dd>
<dt>y.loc:</dt>
<dd>
<p>y coordinate of house (in meters). See also the above
description of <code>x.loc</code>.</p>
</dd>
<dt>tPRO:</dt>
<dd>
<p>Time of prodromes (first symptoms) in days after the start of the
epidemic (30 Oct 1861).</p>
</dd>
<dt>tERU:</dt>
<dd>
<p>Time upon which the rash first appears.</p>
</dd>
<dt>tDEAD:</dt>
<dd>
<p>Time of death, if available.</p>
</dd>
<dt>tR:</dt>
<dd>
<p>Time at which the infectious period of the individual is
assumed to end. This unknown time is calculated as
</p>
<p style="text-align: center;"><code class="reqn">tR_i = \min(tDEAD_i, tERU_i+d_0),</code>
</p>

<p>where – as in Section 3.1 of Neal and Roberts (2004) – we use
<code class="reqn">d_0=3</code>.</p>
</dd>
<dt>tI:</dt>
<dd>
<p>Time at which the individual is assumed to become
infectious. Actually this time is unknown, but we use
</p>
<p style="text-align: center;"><code class="reqn">tI_i = tPRO_i - d_1,</code>
</p>
 
<p>where <code class="reqn">d_1=1</code> as in Neal and Roberts (2004).</p>
</dd>
</dl>
<p>The time variables describe the transitions of the individual in an
Susceptible-Infectious-Recovered (SIR) model.  Note that in
order to avoid ties in the event times resulting from daily
interval censoring, the times have been jittered uniformly within the
respective day. The time point 0.5 would correspond to noon of 30 Oct 1861.
</p>
<p>The <code>hagelloch</code> <code>"epidata"</code> object only retains some of
the above covariates to save space. Apart from the usual
<code>"epidata"</code> event columns, <code>hagelloch</code> contains a number of
extra variables representing distance- and covariate-based weights for
the force of infection:
</p>

<dl>
<dt>household:</dt>
<dd>
<p>the number of currently infectious children in the same
household (including the child itself if it is currently infectious).</p>
</dd>
<dt>nothousehold:</dt>
<dd>
<p>the number of currently infectious children
outside the household.</p>
</dd>
<dt>c1, c2:</dt>
<dd>
<p>the number of children infectious during the respective
time block and being members of class 1 and 2, respectively; but
the value is 0 if the individual of the row is not herself a
member of the respective class.</p>
</dd>
</dl>
<p>Such epidemic covariates can been computed by specifying suitable
<code>f</code> and <code>w</code> arguments in <code>as.epidata</code> at
conversion (see the code below), or at a later step via the
<code>update</code>-method for <code>"epidata"</code>.
</p>


<h3>Source</h3>

<p>Thanks to Peter J. Neal, University of Manchester, for providing us
with these data, which he again became from Niels Becker, Australian
National University. To cite the data, the main references are Pfeilsticker
(1863) and Oesterle (1992). 
</p>


<h3>References</h3>

<p>Pfeilsticker, A. (1863). Beiträge zur Pathologie der Masern mit
besonderer Berücksichtigung der statistischen Verhältnisse,
M.D. Thesis, Eberhard-Karls-Universität Tübingen.
Available as <a href="https://archive.org/details/beitrgezurpatho00pfeigoog">https://archive.org/details/beitrgezurpatho00pfeigoog</a>.
</p>
<p>Oesterle, H. (1992). Statistische Reanalyse einer Masernepidemie 1861
in Hagelloch, M.D. Thesis, Eberhard-Karls-Universitäat
Tübingen.
</p>
<p>Neal, P. J. and Roberts, G. O (2004). Statistical inference and model
selection for the 1861 Hagelloch measles epidemic, Biostatistics
5(2):249-261
</p>


<h3>See Also</h3>

<p>data class: <code>epidata</code>
</p>
<p>point process model: <code>twinSIR</code>
</p>
<p>illustration with <code>hagelloch</code>: <code>vignette("twinSIR")</code>
</p>


<h3>Examples</h3>

<pre><code class="language-R">data("hagelloch")
head(hagelloch.df)   # original data documented in Oesterle (1992)
head(as.data.frame(hagelloch))   # "epidata" event history format

## How the "epidata" 'hagelloch' was created from 'hagelloch.df'
stopifnot(all.equal(hagelloch,
  as.epidata(
    hagelloch.df, t0 = 0, tI.col = "tI", tR.col = "tR",
    id.col = "PN", coords.cols = c("x.loc", "y.loc"),
    f = list(
        household    = function(u) u == 0,
        nothousehold = function(u) u &gt; 0
    ),
    w = list(
        c1 = function (CL.i, CL.j) CL.i == "1st class" &amp; CL.j == CL.i,
        c2 = function (CL.i, CL.j) CL.i == "2nd class" &amp; CL.j == CL.i
    ),
    keep.cols = c("SEX", "AGE", "CL"))
))


### Basic plots produced from hagelloch.df

# Show case locations as in Neal &amp; Roberts (different scaling) using
# the data.frame (promoted to a SpatialPointsDataFrame)
coordinates(hagelloch.df) &lt;- c("x.loc","y.loc")
plot(hagelloch.df, xlab="x [m]", ylab="x [m]", pch=15, axes=TRUE,
     cex=sqrt(multiplicity(hagelloch.df)))

# Epicurve
hist(as.numeric(hagelloch.df$tI), xlab="Time (days)", ylab="Cases", main="")


### "epidata" summary and plot methods

(s &lt;- summary(hagelloch))
head(s$byID)
plot(s)

## Not run: 
  # Show a dynamic illustration of the spread of the infection
  animate(hagelloch, time.spacing=0.1, sleep=1/100,
          legend.opts=list(x="topleft"))

## End(Not run)
</code></pre>


</div>