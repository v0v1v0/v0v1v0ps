<div class="container">

<table style="width: 100%;"><tr>
<td>Signal RGB Calculation</td>
<td style="text-align: right;">R Documentation</td>
</tr></table>
<h2>Convert XYZ or Linear RGB to Signal RGB</h2>

<h3>Description</h3>

<p>Convert XYZ or Linear RGB to Signal RGB, multiple RGB spaces are available</p>


<h3>Usage</h3>

<pre><code class="language-R">RGBfromXYZ( XYZ, space='sRGB', which='scene', TF=NULL, maxSignal=1 ) 

SignalRGBfromLinearRGB( RGB, space='sRGB', which='scene', TF=NULL, maxSignal=1 )
</code></pre>


<h3>Arguments</h3>

<table>
<tr style="vertical-align: top;">
<td><code>XYZ</code></td>
<td>
<p>a numeric Nx3 matrix with CIE XYZ coordinates in the rows, or a vector that can be converted to such a matrix, by row.
The XYZ are assumed to be viewed under the white-point of the given RGB <code>space</code>.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>RGB</code></td>
<td>
<p>a numeric Nx3 matrix with linear RGB coordinates in the rows,
or a vector that can be converted to such a matrix, by row.
The RGB may be outside the corresponding domain box (either scene or display), see <b>Details</b>.
</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>space</code></td>
<td>
<p>the name of an installed RGB space.
The name matching is partial and case-insensitive.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>which</code></td>
<td>
<p>either <code>'scene'</code> or <code>'display'</code>.
For <code>RGBfromXYZ()</code> <code>which</code> describes the input XYZ.
For <code>SignalRGBfromLinearRGB()</code> <code>which</code> describes the input RGB.

</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>TF</code></td>
<td>
<p>if not <code>NULL</code>, <code>TF</code> is a <code>TransferFunction</code>
that overrides the appropriate transfer function of <code>space</code>.
<code>TF</code> can also be a positive number.
If <code>TF=1</code>, then <code>TF</code> is set to <code>identity.TF</code>,
so the returned RGB values are actually linear, and they are not clamped to the appropriate domain box
(see <b>Value</b>).
If <code>TF!=1</code> it is used to create either
<code>power.EOTF()</code> or <code>power.OETF()</code> as approriate.
If <code>TF</code> is not <code>NULL</code> in <code>SignalRGBfromLinearRGB()</code>, then <code>space</code> is ignored.
</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>maxSignal</code></td>
<td>
<p>maximum value of non-linear <code>RGB</code>.
Other common values are 100, 255, 1023, 4095, and 65535.
Even when 1, they are still taken to be non-linear Signal values.</p>
</td>
</tr>
</table>
<h3>Details</h3>

<p>In <code>RGBfromXYZ()</code>, the conversion is done in 2 steps:
</p>

<ul>
<li>
<p> XYZ    →   linear RGB using the appropriate 3x3 matrix for the given <code>space</code> and <code>which</code>
</p>
</li>
<li>
<p> linear RGB    →   signal RGB using <code>SignalRGBfromLinearRGB()</code> and all other the given arguments
</p>
</li>
</ul>
<h3>Value</h3>

<p>a <code>data.frame</code> with N rows and these columns
</p>
<table>
<tr style="vertical-align: top;">
<td><code>RGB</code></td>
<td>
<p>signal RGB.
If <code>TF</code> is not the identity, all input linear RGB values are clamped to the appropriate domain box,
which implies that the signal RGBs are inside the cube <code>[0,maxSignal]</code>^<code class="reqn">3</code>.
Values are not rounded.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>OutOfGamut</code></td>
<td>
<p>logical vector, TRUE means the input linear RGB was outside the domain box before clamping it.</p>
</td>
</tr>
</table>
<p>In case of error, the functions return NULL.
</p>


<h3>References</h3>

<p>Wikipedia. <b>RGB color space</b>.
<a href="https://en.wikipedia.org/wiki/RGB_color_space">https://en.wikipedia.org/wiki/RGB_color_space</a>
</p>


<h3>See Also</h3>

<p><code>XYZfromRGB()</code>,
<code>LinearRGBfromSignalRGB()</code>,
<code>installRGB()</code>,
<code>identity.TF</code>
</p>


<h3>Examples</h3>

<pre><code class="language-R">RGBfromXYZ( c(80.310897,90.306510,84.613450, 100,100,100)/100, max=255 )
##       RGB.R    RGB.G    RGB.B OutOfGamut
##  1 230.1676 249.4122 225.2472      FALSE
##  2 255.0000 249.1125 244.4704       TRUE
</code></pre>


</div>