<div class="container">

<table style="width: 100%;"><tr>
<td>metaReactive</td>
<td style="text-align: right;">R Documentation</td>
</tr></table>
<h2>Create a meta-reactive expression</h2>

<h3>Description</h3>

<p>Create a <code>reactive()</code> that, when invoked with meta-mode activated
(i.e. called within <code>withMetaMode()</code> or <code>expandChain()</code>), returns a
code expression (instead of evaluating that expression and returning the value).
</p>


<h3>Usage</h3>

<pre><code class="language-R">metaReactive(
  expr,
  env = parent.frame(),
  quoted = FALSE,
  varname = NULL,
  domain = shiny::getDefaultReactiveDomain(),
  inline = FALSE,
  localize = "auto",
  bindToReturn = FALSE
)

metaReactive2(
  expr,
  env = parent.frame(),
  quoted = FALSE,
  varname = NULL,
  domain = shiny::getDefaultReactiveDomain(),
  inline = FALSE
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr style="vertical-align: top;">
<td><code>expr</code></td>
<td>
<p>An expression (quoted or unquoted).</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>env</code></td>
<td>
<p>The parent environment for the reactive expression. By default,
this is the calling environment, the same as when defining an ordinary
non-reactive expression. If <code>x</code> is a quosure and <code>quoted</code> is <code>TRUE</code>,
then <code>env</code> is ignored.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>quoted</code></td>
<td>
<p>If it is <code>TRUE</code>, then the <code>quote()</code>ed value of <code>x</code>
will be used when <code>x</code> is evaluated. If <code>x</code> is a quosure and you
would like to use its expression as a value for <code>x</code>, then you must set
<code>quoted</code> to <code>TRUE</code>.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>varname</code></td>
<td>
<p>An R variable name that this object prefers to be named when
its code is extracted into an R script. (See also: <code>expandChain()</code>)</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>domain</code></td>
<td>
<p>See domains.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>inline</code></td>
<td>
<p>If <code>TRUE</code>, during code expansion, do not declare a variable for
this object; instead, inline the code into every call site. Use this to avoid
introducing variables for very simple expressions. (See also: <code>expandChain()</code>)</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>localize</code></td>
<td>
<p>Whether or not to wrap the returned expression in <code>local()</code>.
The default, <code>"auto"</code>, only wraps expressions with a top-level <code>return()</code>
statement (i.e., return statements in anonymized functions are ignored).</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>bindToReturn</code></td>
<td>
<p>For non-<code>localize</code>d expressions, should an assignment
of a meta expression be applied to the <em>last child</em> of the top-level <code style="white-space: pre;">⁠\{⁠</code> call?</p>
</td>
</tr>
</table>
<h3>Details</h3>

<p>If you wish to capture specific code inside of <code>expr</code> (e.g. ignore code
that has no meaning outside shiny, like <code>req()</code>), use <code>metaReactive2()</code> in combination
with <code>metaExpr()</code>. When using <code>metaReactive2()</code>, <code>expr</code> must return a <code>metaExpr()</code>.
</p>
<p>If <code>varname</code> is unspecified, srcrefs are used in attempt to infer the name
bound to the meta-reactive object. In order for this inference to work, the
<code>keep.source</code> option must be <code>TRUE</code> and <code>expr</code> must begin with <code style="white-space: pre;">⁠\{⁠</code>.
</p>


<h3>Value</h3>

<p>A function that, when called in meta mode (i.e. inside
<code>expandChain()</code>), will return the code in quoted form. When called outside
meta mode, it acts the same as a regular <code>shiny::reactive()</code> expression
call.
</p>


<h3>See Also</h3>

<p><code>metaExpr()</code>, <code>..</code>
</p>


<h3>Examples</h3>

<pre><code class="language-R">
library(shiny)
options(shiny.suppressMissingContextError = TRUE)

input &lt;- list(x = 1)

y &lt;- metaReactive({
  req(input$x)
  a &lt;- ..(input$x) + 1
  b &lt;- a + 1
  c + 1
})

withMetaMode(y())
expandChain(y())

y &lt;- metaReactive2({
  req(input$x)

  metaExpr({
    a &lt;- ..(input$x) + 1
    b &lt;- a + 1
    c + 1
  }, bindToReturn = TRUE)
})

expandChain(y())

</code></pre>


</div>