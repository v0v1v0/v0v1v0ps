<div class="container">

<table style="width: 100%;"><tr>
<td>get_query_from_token</td>
<td style="text-align: right;">R Documentation</td>
</tr></table>
<h2>Get Query From Token</h2>

<h3>Description</h3>

<p>Uses Flipside ShroomDK to access a Query Token (Run ID). This function is for pagination and multiple requests.
It is best suited for debugging and testing new queries. Consider 'auto_paginate_query()' for queries already known to work as expected.
Note: To reduce payload it returns a list of outputs (separating column names from rows). See 'clean_query()' for converting result to a data frame.
</p>


<h3>Usage</h3>

<pre><code class="language-R">get_query_from_token(
  query_run_id,
  api_key,
  page_number = 1,
  page_size = 1000,
  result_format = "csv",
  api_url = "https://api-v2.flipsidecrypto.xyz/json-rpc"
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr style="vertical-align: top;">
<td><code>query_run_id</code></td>
<td>
<p>queryRunId from 'create_query_token()', for token stored as 'x', use 'x$result$queryRequest$queryRunId'</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>api_key</code></td>
<td>
<p>Flipside Crypto ShroomDK API Key</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>page_number</code></td>
<td>
<p>Results are cached, max 30MB of data per page.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>page_size</code></td>
<td>
<p>Default 1000. Paginate via page_number.  May return error if page_size causes data to exceed 30MB.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>result_format</code></td>
<td>
<p>Default to csv. Options: csv and json.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>api_url</code></td>
<td>
<p>default to https://api-v2.flipsidecrypto.xyz/json-rpc but upgradeable for user.</p>
</td>
</tr>
</table>
<h3>Value</h3>

<p>returns a list of jsonrpc, id, and result. Within result are:
columnNames, columnTypes, rows, page, sql, format, originalQueryRun, redirectedToQueryRun
use 'clean_query()' to transform this into a data frame.
</p>


<h3>Examples</h3>

<pre><code class="language-R">## Not run: 
query &lt;- create_query_token("SELECT * FROM ETHEREUM.CORE.FACT_TRANSACTIONS LIMIT 1000", api_key)
fact_transactions &lt;- get_query_from_token(query$result$queryRequest$queryRunId, api_key, 1, 1000)

## End(Not run)
</code></pre>


</div>