<div class="container">

<table style="width: 100%;"><tr>
<td>MapQuery</td>
<td style="text-align: right;">R Documentation</td>
</tr></table>
<h2>Map query cells to a reference</h2>

<h3>Description</h3>

<p>This is a convenience wrapper function around the following three functions
that are often run together when mapping query data to a reference:
<code>TransferData</code>, <code>IntegrateEmbeddings</code>,
<code>ProjectUMAP</code>. Note that by default, the <code>weight.reduction</code>
parameter for all functions will be set to the dimension reduction method
used in the <code>FindTransferAnchors</code> function call used to construct
the anchor object, and the <code>dims</code> parameter will be the same dimensions
used to find anchors.
</p>


<h3>Usage</h3>

<pre><code class="language-R">MapQuery(
  anchorset,
  query,
  reference,
  refdata = NULL,
  new.reduction.name = NULL,
  reference.reduction = NULL,
  reference.dims = NULL,
  query.dims = NULL,
  store.weights = FALSE,
  reduction.model = NULL,
  transferdata.args = list(),
  integrateembeddings.args = list(),
  projectumap.args = list(),
  verbose = TRUE
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr style="vertical-align: top;">
<td><code>anchorset</code></td>
<td>
<p>An AnchorSet object</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>query</code></td>
<td>
<p>Query object used in anchorset construction</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>reference</code></td>
<td>
<p>Reference object used in anchorset construction</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>refdata</code></td>
<td>
<p>Data to transfer. This can be specified in one of two ways:
</p>

<ul>
<li>
<p>The reference data itself as either a vector where the names
correspond to the reference cells, or a matrix, where the column names
correspond to the reference cells.
</p>
</li>
<li>
<p>The name of the metadata field or assay from the reference object
provided. This requires the reference parameter to be specified. If pulling
assay data in this manner, it will pull the data from the data slot. To
transfer data from other slots, please pull the data explicitly with
<code>GetAssayData</code> and provide that matrix here.
</p>
</li>
</ul>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>new.reduction.name</code></td>
<td>
<p>Name for new integrated dimensional reduction.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>reference.reduction</code></td>
<td>
<p>Name of reduction to use from the reference for
neighbor finding</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>reference.dims</code></td>
<td>
<p>Dimensions (columns) to use from reference</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>query.dims</code></td>
<td>
<p>Dimensions (columns) to use from query</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>store.weights</code></td>
<td>
<p>Determine if the weight and anchor matrices are stored.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>reduction.model</code></td>
<td>
<p><code>DimReduc</code> object that contains the umap model</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>transferdata.args</code></td>
<td>
<p>A named list of additional arguments to
<code>TransferData</code></p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>integrateembeddings.args</code></td>
<td>
<p>A named list of additional arguments to
<code>IntegrateEmbeddings</code></p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>projectumap.args</code></td>
<td>
<p>A named list of additional arguments to
<code>ProjectUMAP</code></p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>verbose</code></td>
<td>
<p>Print progress bars and output</p>
</td>
</tr>
</table>
<h3>Value</h3>

<p>Returns a modified query Seurat object containing:#'
</p>

<ul>
<li>
<p>New Assays corresponding to the features transferred and/or their
corresponding prediction scores from <code>TransferData</code>
</p>
</li>
<li>
<p>An integrated reduction from <code>IntegrateEmbeddings</code>
</p>
</li>
<li>
<p>A projected UMAP reduction of the query cells projected into the
reference UMAP using <code>ProjectUMAP</code>
</p>
</li>
</ul>
</div>