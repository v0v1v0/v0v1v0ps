<div class="container">

<table style="width: 100%;"><tr>
<td>flowbet</td>
<td style="text-align: right;">R Documentation</td>
</tr></table>
<h2>
Calculate Flow Betweenness Scores of Network Positions
</h2>

<h3>Description</h3>

<p><code>flowbet</code> takes one or more graphs (<code>dat</code>) and returns the flow betweenness scores of positions (selected by <code>nodes</code>) within the graphs indicated by <code>g</code>.  Depending on the specified mode, flow betweenness on directed or undirected geodesics will be returned; this function is compatible with <code>centralization</code>, and will return the theoretical maximum absolute deviation (from maximum) conditional on size (which is used by <code>centralization</code> to normalize the observed centralization score).
</p>


<h3>Usage</h3>

<pre><code class="language-R">flowbet(dat, g = 1, nodes = NULL, gmode = "digraph", diag = FALSE,
    tmaxdev = FALSE, cmode = "rawflow", rescale = FALSE, 
    ignore.eval = FALSE)
</code></pre>


<h3>Arguments</h3>

<table>
<tr style="vertical-align: top;">
<td><code>dat</code></td>
<td>

<p>one or more input graphs.
</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>g</code></td>
<td>

<p>integer indicating the index of the graph for which centralities are to be calculated (or a vector thereof).  By default, <code>g</code>=1.
</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>nodes</code></td>
<td>

<p>vector indicating which nodes are to be included in the calculation.  By default, all nodes are included.
</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>gmode</code></td>
<td>

<p>string indicating the type of graph being evaluated.  <code>digraph</code> indicates that edges should be interpreted as directed (with flows summed over directed dyads); <code>graph</code> indicates that edges are undirected (with only undirected pairs considered).  <code>gmode</code> is set to <code>digraph</code> by default. 
</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>diag</code></td>
<td>

<p>boolean indicating whether or not the diagonal should be treated as valid data.  Set this true if and only if the data can contain loops.  <code>diag</code> is <code>FALSE</code> by default.
</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>tmaxdev</code></td>
<td>

<p>boolean indicating whether or not the theoretical maximum absolute deviation from the maximum nodal centrality should be returned.  By default, <code>tmaxdev</code>==<code>FALSE</code>.
</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>cmode</code></td>
<td>

<p>one of <code>rawflow</code>, <code>normflow</code>, or <code>fracflow</code> (see below).
</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>rescale</code></td>
<td>

<p>if true, centrality scores are rescaled such that they sum to 1.
</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>ignore.eval</code></td>
<td>

<p>logical; ignore edge values when computing maximum flow (alternately, edge values will be assumed to carry capacity information)?
</p>
</td>
</tr>
</table>
<h3>Details</h3>

<p>The (“raw,” or unnormalized) flow betweenness of a vertex, <code class="reqn">v \in V(G)</code>, is defined by Freeman et al. (1991) as
</p>
<p style="text-align: center;"><code class="reqn">
C_F(v) = \sum_{i,j : i \neq j, i \neq v, j \neq v} \left(f(i,j,G) - f(i,j,G\setminus v)\right),</code>
</p>

<p>where <code class="reqn">f(i,j,G)</code> is the maximum flow from <code class="reqn">i</code> to <code class="reqn">j</code> within <code class="reqn">G</code> (under the assumption of infinite vertex capacities, finite edge capacities, and non-simultaneity of pairwise flows).  Intuitively, unnormalized flow betweenness is simply the total maximum flow (aggregated across all pairs of third parties) mediated by <code class="reqn">v</code>.
</p>
<p>The above flow betweenness measure is computed by <code>flowbet</code> when <code>cmode=="rawflow"</code>.  In some cases, it may be desirable to normalize the raw flow betweenness by the total maximum flow among third parties (including <code class="reqn">v</code>); this leads to the following normalized flow betweenness measure:
</p>
<p style="text-align: center;"><code class="reqn">
C'_F(v) = \frac{\sum_{i,j : i \neq j, i \neq v, j \neq v} \left(f(i,j,G) - f(i,j,G\setminus v)\right)}{\sum_{i,j : i \neq j, i \neq v, j \neq v} f(i,j,G)}.</code>
</p>

<p>This variant can be selected by setting <code>cmode=="normflow"</code>.
</p>
<p>Finally, it may be noted that the above normalization (from Freeman et al. (1991)) is rather different from that used in the definition of shortest-path betweenness, which normalizes within (rather than across) third-party dyads.  A third flow betweenness variant has been suggested by Koschutzki et al. (2005) based on a normalization of this type:
</p>
<p style="text-align: center;"><code class="reqn">
C''_F(v) = \sum_{i,j : i \neq j, i \neq v, j \neq v} \frac{ \left(f(i,j,G) - f(i,j,G\setminus v)\right)}{f(i,j,G)}</code>
</p>

<p>where 0/0 flow ratios are treated as 0 (as in shortest-path betweenness).  Setting <code>cmode=="fracflow"</code> selects this variant.
</p>


<h3>Value</h3>

<p>A vector of centrality scores.
</p>


<h3>Author(s)</h3>

<p>Carter T. Butts <a href="mailto:buttsc@uci.edu">buttsc@uci.edu</a>
</p>


<h3>References</h3>

<p>Freeman, L.C.; Borgatti, S.P.; and White, D.R.  (1991).  “Centrality in Valued Graphs: A Measure of Betweenness Based on Network Flow.”  <em>Social Networks</em>, 13(2), 141-154.
</p>
<p>Koschutzki, D.; Lehmann, K.A.; Peeters, L.; Richter, S.; Tenfelde-Podehl, D.; Zlotowski, O.  (2005).  “Centrality Indices.”  In U. Brandes and T. Erlebach (eds.), <em>Network Analysis: Methodological Foundations.</em>  Berlin: Springer.
</p>


<h3>See Also</h3>

<p><code>betweenness</code>, <code>maxflow</code>
</p>


<h3>Examples</h3>

<pre><code class="language-R">g&lt;-rgraph(10)                                     #Draw a random graph
flowbet(g)                                        #Raw flow betweenness
flowbet(g,cmode="normflow")                       #Normalized flow betweenness

g&lt;-g*matrix(rpois(100,4),10,10)                   #Add capacity constraints
flowbet(g)                                        #Note the difference!
</code></pre>


</div>