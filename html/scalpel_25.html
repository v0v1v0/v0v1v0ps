<div class="container">

<table style="width: 100%;"><tr>
<td>scalpelStep1</td>
<td style="text-align: right;">R Documentation</td>
</tr></table>
<h2>Perform Step 1 of SCALPEL.</h2>

<h3>Description</h3>

<p>This step involves constructing a spatial component dictionary. We apply a simple image segmentation
procedure to each frame of the video in order to derive a dictionary of preliminary dictionary elements.
Ideally, this dictionary is a superset of the true spatial components.
</p>


<h3>Usage</h3>

<pre><code class="language-R">scalpelStep1(
  step0Output,
  minSize = 25,
  maxSize = 500,
  maxWidth = 30,
  maxHeight = 30,
  thresholdVec = NULL
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr style="vertical-align: top;">
<td><code>step0Output</code></td>
<td>
<p>An object of class <code>scalpel</code> or <code>scalpelStep0</code>, which result from running the
<code>scalpel</code> or <code>scalpelStep0</code> functions, respectively.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>minSize, maxSize</code></td>
<td>
<p>The minimum and maximum size, respectively, for a preliminary dictionary element with default values
of 25 and 500, respectively.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>maxWidth, maxHeight</code></td>
<td>
<p>The maximum width and height, respectively, for a preliminary dictionary element with default values of 30.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>thresholdVec</code></td>
<td>
<p>Optional advanced user argument: A vector with the desired thresholds to use for image segmentation. If not specified, the default is to
use the negative of the minimum of the processed Y data (i.e., <code>step0Output$highThreshold</code>), the negative of the 0.1% quantile of the processed Y data
(i.e., <code>step0Output$lowThreshold</code>), and the mean of these. These automatically chosen thresholds can also be updated using <code>updateThreshold</code>.</p>
</td>
</tr>
</table>
<h3>Details</h3>

<p>Several files containing data from this step and a summary of the step are saved in
"outputFolder/Step1_version" where <code>version</code> is a 5-digit unique identifier that is automatically generated.
</p>


<h3>Value</h3>

<p>An object of class <code>scalpelStep1</code>, which can be summarized using <code>summary</code>, used to run SCALPEL Step 2 using <code>scalpelStep2</code>,
or can be used with the plotting function <code>plotCandidateFrame</code>.
</p>

<ul>
<li>
<p><code>Azero</code>: A matrix containing the preliminary dictionary elements, where the ith column of <code>Azero</code>
is a vector of 1's and 0's, indicating whether each pixel is contained in the ith preliminary dictionary element.
</p>
</li>
<li>
<p><code>AzeroFrames</code>: A vector whose ith element gives the video frame from which the preliminary dictionary element
in the ith column of <code>Azero</code> was derived.
</p>
</li>
<li>
<p><code>AzeroThreshold</code>: A vector whose ith element gives the threshold used to obtain the preliminary dictionary element
in the ith column of <code>Azero</code>.
</p>
</li>
<li>
<p><code>pixelsUse</code>: A vector with the pixels (i.e., indices of the rows of <code>Azero</code>) that are contained in at
least one preliminary dictionary element.
</p>
</li>
<li>
<p><code>version</code>: A 5-digit unique identifier for the output folder name that is automatically generated in this step.
</p>
</li>
<li>
<p>Other elements: As specified by the user or returned from a previous step.
</p>
</li>
</ul>
<h3>See Also</h3>

<p>The entire SCALPEL pipeline can be implemented using the <code>scalpel</code> function. The
other steps in the pipeline can be run using the <code>scalpelStep0</code>, <code>scalpelStep2</code>, <code>scalpelStep3</code> functions.
Results from this step can be summarized using <code>summary</code>, loaded at a later time using <code>getScalpelStep1</code>, and plotted
using <code>plotCandidateFrame</code>.
</p>


<h3>Examples</h3>

<pre><code class="language-R">## Not run: 
### many of the functions in this package are interconnected so the
### easiest way to learn to use the package is by working through the vignette,
### which is available at ajpete.com/software

#assumes you have run the example for the "scalpelStep0" function

#run Step 1 of SCALPEL
Step1Out = scalpelStep1(step0Output = Step0Out)
summary(Step1Out)

## End(Not run)
</code></pre>


</div>