<div class="container">

<table style="width: 100%;"><tr>
<td>attributions</td>
<td style="text-align: right;">R Documentation</td>
</tr></table>
<h2>Retrieve top-down model sentiment attributions</h2>

<h3>Description</h3>

<p>Computes the attributions to predictions for a (given) number of dates at all possible sentiment dimensions,
based on the coefficients associated to each sentiment measure, as estimated in the provided model object.
</p>


<h3>Usage</h3>

<pre><code class="language-R">attributions(
  model,
  sento_measures,
  do.lags = TRUE,
  do.normalize = FALSE,
  refDates = NULL,
  factor = NULL
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr style="vertical-align: top;">
<td><code>model</code></td>
<td>
<p>a <code>sento_model</code> or a <code>sento_modelIter</code> object created with <code>sento_model</code>.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>sento_measures</code></td>
<td>
<p>the <code>sento_measures</code> object, as created with <code>sento_measures</code>, used to estimate
the model from the first argument (make sure this is the case!).</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>do.lags</code></td>
<td>
<p>a <code>logical</code>, <code>TRUE</code> also computes the attribution to each time lag. For large time lags,
this is time-consuming.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>do.normalize</code></td>
<td>
<p>a <code>logical</code>, <code>TRUE</code> divides each element of every attribution vector at a given date by its
L2-norm at that date, normalizing the values between -1 and 1. The document attributions are not normalized.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>refDates</code></td>
<td>
<p>the dates (as <code>"yyyy-mm-dd"</code>) at which attribution is to be performed. These should be between the latest
date available in the input <code>sento_measures</code> object and the first estimation sample date (that is, <code>model$dates[1]</code>
if <code>model</code> is a <code>sento_model</code> object). All dates should also be in <code>get_dates(sento_measures)</code>. If
<code>NULL</code> (default), attribution is calculated for all in-sample dates. Ignored if <code>model</code> is a <code>sento_modelIter</code>
object, for which attribution is calculated for all out-of-sample prediction dates.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>factor</code></td>
<td>
<p>the factor level as a single <code>character</code> vector to calculate attribution
for in case of (a) multinomial model(s). Ignored for linear and binomial models.</p>
</td>
</tr>
</table>
<h3>Details</h3>

<p>See <code>sento_model</code> for an elaborate modeling example including the calculation and plotting of
attributions. The attribution for logistic models is represented in terms of log odds. For binomial models, it is
calculated with respect to the last factor level or factor column. A <code>NULL</code> value for document-level attribution
on a given date means no documents are directly implicated in the associated prediction.
</p>


<h3>Value</h3>

<p>A <code>list</code> of class <code>attributions</code>, with <code>"documents"</code>, <code>"lags"</code>, <code>"lexicons"</code>,
<code>"features"</code> and <code>"time"</code> as attribution dimensions. The last four dimensions are
<code>data.table</code>s having a <code>"date"</code> column and the other columns the different components of the dimension, with
the attributions as values. Document-level attribution is further decomposed into a <code>data.table</code> per date, with
<code>"id"</code>, <code>"date"</code> and <code>"attrib"</code> columns. If <code>do.lags = FALSE</code>, the <code>"lags"</code> element is set
to <code>NULL</code>.
</p>


<h3>Author(s)</h3>

<p>Samuel Borms, Keven Bluteau
</p>


<h3>See Also</h3>

<p><code>sento_model</code>
</p>


</div>