<div class="container">

<table style="width: 100%;"><tr>
<td>riskyCells</td>
<td style="text-align: right;">R Documentation</td>
</tr></table>
<h2>riskyCells</h2>

<h3>Description</h3>

<p>Allows to compute risky (unweighted) combinations of key variables either
up to a specified dimension or using identification level. This mimics the
approach taken in mu-argus.
</p>


<h3>Usage</h3>

<pre><code class="language-R">riskyCells(obj, useIdentificationLevel = FALSE, threshold, ...)
</code></pre>


<h3>Arguments</h3>

<table>
<tr style="vertical-align: top;">
<td><code>obj</code></td>
<td>
<p>a <code>data.frame</code>, <code>data.table</code> or an sdcMicroObj object</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>useIdentificationLevel</code></td>
<td>
<p>(logical) specifies if tabulation should be
done up to a specific dimension (<code>useIdentificationLevel = FALSE</code> using
argument <code>maxDim</code>) or taking identification levels
(<code>useIdentificationLevel = FALSE</code> using argument <code>level</code>) into account.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>threshold</code></td>
<td>
<p>a numeric vector specifiying the thresholds at which cells
are considered to be unsafe. In case a tabulation is done up to a specific
level (<code>useIdentificationLevel = FALSE</code>), the thresholds may be specified
differently for each dimension. In the other case, the same threshold is
used for all tables.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>...</code></td>
<td>
<p>see possible arguments below
</p>

<ul>
<li> <p><code>keyVars</code>: index or variable-names within <code>obj</code> that should be used for
tabulation. In case <code>obj</code> is a sdcMicroObj object, this argument is
not used and the pre-defined key-variables are used.
</p>
</li>
<li> <p><code>level</code>: in case <code>useIdentificationLevel = TRUE</code>, this numeric vector
specifies the importance of the key variables. The construction of output
tables follows the implementation in mu-argus, see e.g
<a href="https://github.com/sdcTools/manuals/raw/master/mu-argus/MUmanual5.1.pdf">mu-argus</a>.
The length of this numeric vector must match the number of key variables.
</p>
</li>
<li> <p><code>maxDim</code>: in case <code>useIdentificationLevel = FALSE</code>, this number specifies
maximal number of variables to tablulate.
</p>
</li>
</ul>
</td>
</tr>
</table>
<h3>Value</h3>

<p>a <code>data.table</code> showing the number of unsafe cells, thresholds for
any combination of the key variables. If the input was a sdcMicroObj
object and some modifications have been already applied to the categorical
key variables, the resulting output contains the number of unsafe cells
both for the original and the modified data.
</p>


<h3>Author(s)</h3>

<p>Bernhard Meindl
</p>


<h3>Examples</h3>

<pre><code class="language-R">## data.frame method / all combinations up to maxDim
# riskyCells(
#  obj = testdata2,
#  keyVars = 1:5,
#  threshold = c(50, 25, 10, 5),
#  useIdentificationLevel = FALSE,
#  maxDim = 4
# )
#riskyCells(
#  obj  = testdata2,
#  keyVars = 1:5,
#  threshold = 10,
#  useIdentificationLevel = FALSE,
#  maxDim = 3
#)
#
### data.frame method / using identification levels
#riskyCells(
#  obj = testdata2,
#  keyVars = 1:6,
#  threshold = 20,
#  useIdentificationLevel = TRUE,
#  level = c(1, 1, 2, 3, 3, 5)
#)
#riskyCells(
#  obj = testdata2,
#  keyVars = c(1, 3, 4, 6),
#  threshold = 10,
#  useIdentificationLevel = TRUE,
#  level = c(1, 2, 2, 4)
#)
#
### sdcMicroObj-method / all combinations up to maxDim
#testdata2[1:6] &lt;- lapply(1:6, function(x) {
#  testdata2[[x]] &lt;- as.factor(testdata2[[x]])
#})
#
#sdc &lt;- createSdcObj(
#  dat = testdata2,
#  keyVars = c("urbrur", "roof", "walls", "water", "electcon", "relat", "sex"),
#  numVars = c("expend", "income", "savings"),
#  w = "sampling_weight")
#
#r0 &lt;- riskyCells(
#  obj = sdc,
#  useIdentificationLevel=FALSE,
# threshold = c(20, 10, 5),
# maxDim = 3
#)
#
### in case key-variables have been modified, we get counts for
### original and modified data
#sdc &lt;- groupAndRename(
#  obj = sdc,
#  var = "roof",
#  before = c("5", "6", "9"),
#  after = "5+"
#)
#r1 &lt;- riskyCells(
#  obj = sdc,
#  useIdentificationLevel = FALSE,
#  threshold = c(10, 5, 3),
#  maxDim = 3
#)
#
### sdcMicroObj-method / using identification levels
#riskyCells(
#  obj = sdc,
#  useIdentificationLevel = TRUE,
#  threshold = 10,
#  level = c(1, 1, 3, 4, 5, 5, 5)
#)
</code></pre>


</div>