<div class="container">

<table style="width: 100%;"><tr>
<td>data.wide2long</td>
<td style="text-align: right;">R Documentation</td>
</tr></table>
<h2>
Converting a Data Frame from Wide Format in a Long Format
</h2>

<h3>Description</h3>

<p>Converts a data frame in wide format into long format.
</p>


<h3>Usage</h3>

<pre><code class="language-R">data.wide2long(dat, id=NULL, X=NULL, Q=NULL)
</code></pre>


<h3>Arguments</h3>

<table>
<tr style="vertical-align: top;">
<td><code>dat</code></td>
<td>

<p>Data frame with item responses and a person identifier if
<code>id !=NULL</code>.
</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>id</code></td>
<td>

<p>An optional string with the variable name of the person identifier.
</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>X</code></td>
<td>
<p>Data frame with person covariates for inclusion in the
data frame of long format
</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>Q</code></td>
<td>
<p>Data frame with item predictors. Item labels must be included
as a column named by <code>"item"</code>.
</p>
</td>
</tr>
</table>
<h3>Value</h3>

<p>Data frame in long format
</p>


<h3>Examples</h3>

<pre><code class="language-R">## Not run: 
#############################################################################
# EXAMPLE 1: data.pisaRead
#############################################################################
miceadds::library_install("lme4")

data(data.pisaRead)
dat &lt;- data.pisaRead$data
Q &lt;- data.pisaRead$item   # item predictors

# define items
items &lt;- colnames(dat)[ substring( colnames(dat), 1, 1 )=="R" ]
dat1 &lt;- dat[, c( "idstud", items ) ]
# matrix with person predictors
X &lt;- dat[, c("idschool", "hisei", "female", "migra") ]

# create dataset in long format
dat.long &lt;- sirt::data.wide2long( dat=dat1, id="idstud", X=X, Q=Q )

#***
# Model 1: Rasch model
mod1 &lt;- lme4::glmer( resp ~ 0 + ( 1 | idstud ) + as.factor(item), data=dat.long,
            family="binomial", verbose=TRUE)
summary(mod1)

#***
# Model 2: Rasch model and inclusion of person predictors
mod2 &lt;- lme4::glmer( resp ~ 0 + ( 1 | idstud ) + as.factor(item) + female + hisei + migra,
           data=dat.long, family="binomial", verbose=TRUE)
summary(mod2)

#***
# Model 3: LLTM
mod3 &lt;- lme4::glmer(resp ~ (1|idstud) + as.factor(ItemFormat) + as.factor(TextType),
            data=dat.long, family="binomial", verbose=TRUE)
summary(mod3)

#############################################################################
# EXAMPLE 2: Rasch model in lme4
#############################################################################

set.seed(765)
N &lt;- 1000  # number of persons
I &lt;- 10    # number of items
b &lt;- seq(-2,2,length=I)
dat &lt;- sirt::sim.raschtype( stats::rnorm(N,sd=1.2), b=b )
dat.long &lt;- sirt::data.wide2long( dat=dat )
#***
# estimate Rasch model with lmer
library(lme4)
mod1 &lt;- lme4::glmer( resp ~ 0 + as.factor( item ) + ( 1 | id_index), data=dat.long,
             verbose=TRUE, family="binomial")
summary(mod1)
  ##   Random effects:
  ##    Groups   Name        Variance Std.Dev.
  ##    id_index (Intercept) 1.454    1.206
  ##   Number of obs: 10000, groups: id_index, 1000
  ##
  ##   Fixed effects:
  ##                        Estimate Std. Error z value Pr(&gt;|z|)
  ##   as.factor(item)I0001  2.16365    0.10541  20.527  &lt; 2e-16 ***
  ##   as.factor(item)I0002  1.66437    0.09400  17.706  &lt; 2e-16 ***
  ##   as.factor(item)I0003  1.21816    0.08700  14.002  &lt; 2e-16 ***
  ##   as.factor(item)I0004  0.68611    0.08184   8.383  &lt; 2e-16 ***
  ##   [...]

## End(Not run)
</code></pre>


</div>