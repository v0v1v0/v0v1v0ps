<div class="container">

<table style="width: 100%;"><tr>
<td>sas_collectcode</td>
<td style="text-align: right;">R Documentation</td>
</tr></table>
<h2>
Create a knitr chunk hook for accumlating code.
</h2>

<h3>Description</h3>

<p>This wrapper function calls <code>knitr::knit_hooks$set()</code> to
define a chunk hook.  When the chunk hook is later invoked, this
writes the contents of the current chunk to the end of a SAS
<code>autoexec.sas</code> file.
</p>
<p>This may be used with any of the SAS language engines.
</p>


<h3>Usage</h3>

<pre><code class="language-R">sas_collectcode()
</code></pre>


<h3>Details</h3>

<p>This function is automatically invoked when the SASmarkdown
library is attached.  Normally a user will not need to call
this function, instead using <code>collectcode=TRUE</code> as a 
chunk option - see the example below.
</p>
<p>When knitr calls SAS, each code chunk is processed as a separate
SAS batch job.  Where code in one chunk depends upon the results
from a prevous chunk, code needs to be repeated and re-evaluated.
</p>
<p>This function creates a knitr chunk hook that signals when one
chunk's code should be saved for re-use later.  The code ends up
in a temporary SAS <code>autoexec.sas</code> file.
</p>


<h3>Value</h3>

<p>There are no return values, chunk hook creation is a side effect here.
</p>


<h3>Note</h3>

<p>If there is already an ‘<span class="file">autoexec.sas</span>’ in the directory where
the source document is located, collected code will be added to it,
and the original file will be restored after your document is processed.
</p>


<h3>Author(s)</h3>

<p>Doug Hemken
</p>


<h3>See Also</h3>

<p><code>SASmarkdown-package</code>
</p>


<h3>Examples</h3>

<pre><code class="language-R">sas_collectcode()
## Not run: 
indoc &lt;- '
---
title: "Linking SASmarkdown Code Chunks"
author: "Doug Hemken"
output: html_document
---
# An R console example
## In a first code chunk, set up with
```{r}
library(SASmarkdown)
```
## Then mark SAS code chunks with
```{sas, collectcode=TRUE}
data class;
  set sashelp.class;
  bmi = 703*weight/height**2;
  run;
```

## A later chunk that depends on the first.
```{sas}
proc means;
  var bmi;
  run;
```
'
if (!is.null(SASmarkdown::find_sas())) {
  # To run this example, remove tempdir().
  fmd &lt;- file.path(tempdir(), "test.md")
  fhtml &lt;- file.path(tempdir(), "test.html")

  knitr::knit(text=indoc, output=fmd)
  rmarkdown::render(fmd, "html_document", fhtml)
}

## End(Not run)
</code></pre>


</div>