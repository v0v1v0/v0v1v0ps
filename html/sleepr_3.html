<div class="container">

<table style="width: 100%;"><tr>
<td>motion_detectors</td>
<td style="text-align: right;">R Documentation</td>
</tr></table>
<h2>Motion detector for Ethocope data</h2>

<h3>Description</h3>

<p>Defines whether a <em>single animal</em> is moving according to:
</p>


<h3>Usage</h3>

<pre><code class="language-R">max_velocity_detector(data, time_window_length,
  velocity_correction_coef = 0.003, masking_duration = 6)

max_velocity_detector_legacy(data, velocity_threshold = 0.006)

virtual_beam_cross_detector(data, time_window_length)
</code></pre>


<h3>Arguments</h3>

<table>
<tr style="vertical-align: top;">
<td><code>data</code></td>
<td>
<p>data.table::data.table containing behavioural variables of <em>a single animal</em> (no id).
It must have the columns <code>xy_dist_log10x1000</code>(for computing subpixel velocity),
<code>x</code>(beam cross), <code>t</code> and <code>has_interacted</code> (whether a stimulus was delivered).</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>time_window_length</code></td>
<td>
<p>number of seconds to be used by the motion classifier.
This corresponds to the sampling period of the output data.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>velocity_correction_coef</code></td>
<td>
<p>an empirical coefficient to correct velocity with respect
to variable framerate.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>masking_duration</code></td>
<td>
<p>number of seconds during which any movement is ignored (velocity is set to 0) after
a stimulus is delivered (a.k.a. interaction).</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>velocity_threshold</code></td>
<td>
<p>uncorrected velocity above which an animal is classified as ‘moving’ (for the legacy version).</p>
</td>
</tr>
</table>
<h3>Details</h3>


<ul>
<li>
<p> Validated and corrected subpixel velocity (max_velocity_detector), the most rigorous
</p>
</li>
<li>
<p> Uncorrected subpixel velocity (max_velocity_detector_legacy)
</p>
</li>
<li>
<p> Crossing a virtual beam in the middle of the region of interest (virtual_beam_cross_detector)
</p>
</li>
</ul>
<p>max_velocity_detector is the default movement classification for real-time ethoscope experiments.
It is benchmarked against human-generated ground truth.
</p>
<p>These functions are <em>rarely called directly</em>, but typically used is in the context of sleep_annotation.
</p>


<h3>Value</h3>

<p>an object of the same type as <code>data</code> (i.e. data.table::data.table or behavr::behavr)  with additional columns:
</p>

<ul>
<li> <p><code>moving</code> Logical, TRUE iff. motion was detected.
</p>
</li>
<li> <p><code>beam_crosses</code> The number of beam crosses
(when the animal crosses x = 0.5 – that is the midpoint of the region of interest) within the time window
</p>
</li>
<li> <p><code>max_velocity</code> The maximal velocity within the time window.
The resulting data is sampled at a period equals to <code>time_window_length</code>.
</p>
</li>
</ul>
<h3>See Also</h3>


<ul><li> <p>sleep_annotation – which requieres a motion detector
</p>
</li></ul>
</div>