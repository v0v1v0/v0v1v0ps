<div class="container">

<table style="width: 100%;"><tr>
<td>recover.B</td>
<td style="text-align: right;">R Documentation</td>
</tr></table>
<h2>
Recover an estimate of the treatment effect at time t in Study B
</h2>

<h3>Description</h3>

<p>Recover an estimate of the treatment effect at time t in Study B
</p>


<h3>Usage</h3>

<pre><code class="language-R">recover.B(Axzero, Adeltazero, Aszero, Axone, Adeltaone, Asone, Bxzero, Bdeltazero, 
Bszero, Bxone, Bdeltaone, Bsone, t, landmark, extrapolate = T, transform = F)
</code></pre>


<h3>Arguments</h3>

<table>
<tr style="vertical-align: top;">
<td><code>Axzero</code></td>
<td>


<p>observed event times in the control group in  Study A
</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>Adeltazero</code></td>
<td>


<p>event/censoring indicators in the control group in Study A
</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>Aszero</code></td>
<td>


<p>surrogate marker values in the control group in Study A, NA for individuals not observable at the time the surrogate marker was measured
</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>Axone</code></td>
<td>


<p>observed event times in the treatment group in  Study A
</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>Adeltaone</code></td>
<td>


<p>event/censoring indicators in the treatment group in Study A
</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>Asone</code></td>
<td>


<p>surrogate marker values in the treatment group in Study A, NA for individuals not observable at the time the surrogate marker was measured
</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>Bxzero</code></td>
<td>


<p>observed event times in the control group in  Study B
</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>Bdeltazero</code></td>
<td>


<p>event/censoring indicators in the control group in Study B
</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>Bszero</code></td>
<td>


<p>surrogate marker values in the control group in Study B, NA for individuals not observable at the time the surrogate marker was measured
</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>Bxone</code></td>
<td>


<p>observed event times in the treatment group in  Study B
</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>Bdeltaone</code></td>
<td>


<p>event/censoring indicators in the treatment group in  Study B
</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>Bsone</code></td>
<td>


<p>surrogate marker values in the treatment group in Study B, NA for individuals not observable at the time the surrogate marker was measured
</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>t</code></td>
<td>


<p>time of interest
</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>landmark</code></td>
<td>


<p>landmark time of interest, t0
</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>extrapolate</code></td>
<td>


<p>TRUE or FALSE; indicates whether local constant extrapolation should be used, default is TRUE
</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>transform</code></td>
<td>


<p>TRUE or FALSE; indicates whether a transformation should be used, default is FALSE
</p>
</td>
</tr>
</table>
<h3>Details</h3>

<p>Assume there are two randomized studies of a treatment effect, a prior study (Study A) and a current study (Study B). Study A was completed up to some time t, while Study B was stopped at time <code class="reqn">t_0&lt;t</code>. In both studies, a surrogate marker was measured at time <code class="reqn">t_0</code> for individuals still observable at <code class="reqn">t_0</code>. Let <code class="reqn">G</code> be the binary treatment indicator with <code class="reqn">G=1</code> for treatment and <code class="reqn">G=0</code> for control and we assume throughout that subjects are randomly assigned to a treatment group at baseline. Let <code class="reqn">T_K^{(1)}</code> and <code class="reqn">T_K^{(0)}</code> denote the time of the primary outcome of interest, death for example, under the treatment and under the control, respectively, in Study K. Let <code class="reqn">S_K^{(1)}</code> and <code class="reqn">S_K^{(0)}</code> denote the surrogate marker measured at time <code class="reqn">t_0</code> under the treatment and the control, respectively, in Study K.
</p>
<p>The treatment effect quantity of interest, <code class="reqn">\Delta_K(t)</code>, is the difference in survival rates by time <code class="reqn">t</code> under treatment versus control,
</p>
<p style="text-align: center;"><code class="reqn"> \Delta_K(t)=E\{ I(T_K^{(1)}&gt;t)\} - E\{I(T_K^{(0)}&gt;t)\} = P(T_K^{(1)}&gt;t) - P(T_K^{(0)}&gt;t)</code>
</p>

<p>where <code class="reqn">t&gt;t_0</code>. Here, we recover an estimate of <code class="reqn">\Delta_B(t)</code> using Study B information (which stopped follow-up at time <code class="reqn">t_0&lt;t</code>) and Study A information (which has follow-up information through time t). The estimate is obtained as </p>
<p style="text-align: center;"><code class="reqn">\hat{\Delta}_{EB}(t,t_0)/ \hat{R}_{SA}(t,t_0)</code>
</p>

<p>where <code class="reqn">\hat{\Delta}_{EB}(t,t_0)</code> is the early treatment effect estimate in Study B, described in the early.delta.test documention, and <code class="reqn">\hat{R}_{SA}(t,t_0)</code> is the proportion of treatment effect explained by the surrogate marker information at <code class="reqn">t_0</code> in Study A. This proportion is calculated as <code class="reqn">\hat{R}_{SA}(t,t_0) =\hat{\Delta}_{EA}(t,t_0)/\hat{\Delta}_A(t)</code>
where </p>
<p style="text-align: center;"><code class="reqn">\hat{\Delta}_A(t)=n_{A1}^{-1}\sum_{i=1}^{n_{A1}}\frac{I(X_{Ai}^{(1)}&gt;t)}{\hat{W}_{A1}^C(t)}-n_{A0}^{-1}\sum_{i=1}^{n_{A0}}\frac{I(X_{Ai}^{(0)}&gt;t)}{\hat{W}_{A0}^C(t)},</code>
</p>

<p>and <code class="reqn">\hat{\Delta}_{EA}(t,t_0)</code> is parallel to <code class="reqn">\hat{\Delta}_{EB}(t,t_0)</code> except replacing
<code class="reqn">n_{A0}^{-1} \sum_{i=1}^{n_{A0}} \hat{r}_A^{(0)}(t|S_{Ai}^{(0)}, t_0) \frac{I(X_{Ai}^{(0)} &gt; t_0)}{\hat{W}_{A0}^C(t_0)}</code>
by <code class="reqn">n_{A0}^{-1}\sum_{i=1}^{n_{A0}}\hat{W}_{A0}^C(t)^{-1}I(X_{Ai}^{(0)}&gt;t),</code> and <code class="reqn">\hat{W}^C_{Ag}(\cdot)</code> is the Kaplan-Meier estimator of the survival function for <code class="reqn">C_{A}^{(g)}</code> for <code class="reqn">g=0,1</code>.  
</p>
<p>Perturbation resampling is used to provide a standard error estimate for the estimate of <code class="reqn">\Delta_B(t)</code> and a confidence interval.
</p>


<h3>Value</h3>

<table>
<tr style="vertical-align: top;">
<td><code>recovered.deltaB</code></td>
<td>
<p>The recovered estimate of <code class="reqn">\Delta_B(t)</code>.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>sd.recovered.deltaB</code></td>
<td>
<p>The standard error estimate of the recovered estimate of <code class="reqn">\Delta_B(t)</code>.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>conf.quantile.recovered.deltaB</code></td>
<td>
<p>A confidence interval for the recovered estimate of <code class="reqn">\Delta_B(t)</code>.</p>
</td>
</tr>
</table>
<h3>Author(s)</h3>


<p>Layla Parast
</p>


<h3>References</h3>

<p>Parast L, Cai T, Tian L (2019). Using a Surrogate Marker for Early Testing of a Treatment Effect. Biometrics, In press.
</p>
<p>Parast L, Cai T and Tian L (2017). Evaluating Surrogate Marker Information using Censored Data. Statistics in Medicine, 36(11): 1767-1782.
</p>


<h3>Examples</h3>

<pre><code class="language-R">
data(dataA)
data(dataB)
recover.B(Axzero = dataA$x0, Adeltazero = dataA$delta0, Aszero = dataA$s0, Axone 
= dataA$x1, Adeltaone = dataA$delta1, Asone = dataA$s1, Bxzero = dataB$x0, Bdeltazero
= dataB$delta0, Bszero = dataB$s0, Bxone = dataB$x1, Bdeltaone = dataB$delta1, Bsone 
= dataB$s1, t=1, landmark=0.5,  extrapolate = TRUE)

recover.B(Axzero = dataA$x0, Adeltazero = dataA$delta0, Aszero = dataA$s0, Axone 
= dataA$x1, Adeltaone = dataA$delta1, Asone = dataA$s1, Bxzero = dataB$x0, Bdeltazero
= dataB$delta0, Bszero = dataB$s0, Bxone = dataB$x1, Bdeltaone = dataB$delta1, Bsone 
= dataB$s1, t=0.75, landmark=0.5,  extrapolate = TRUE)


</code></pre>


</div>