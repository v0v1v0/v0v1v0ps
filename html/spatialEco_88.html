<div class="container">

<table style="width: 100%;"><tr>
<td>raster.deviation</td>
<td style="text-align: right;">R Documentation</td>
</tr></table>
<h2>Raster local deviation from the global trend</h2>

<h3>Description</h3>

<p>Calculates the local deviation from the raster, a specified global statistic 
or a polynomial trend of the raster.
</p>


<h3>Usage</h3>

<pre><code class="language-R">raster.deviation(
  x,
  type = c("trend", "min", "max", "mean", "median"),
  s = 3,
  degree = 1,
  global = FALSE
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr style="vertical-align: top;">
<td><code>x</code></td>
<td>
<p>A terra SpatRaster object</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>type</code></td>
<td>
<p>The global statistic to represent the local deviation
options are: "trend", "min", "max", "mean", "median"</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>s</code></td>
<td>
<p>Size of matrix (focal window), not used with type="trend"</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>degree</code></td>
<td>
<p>The polynomial degree if type is trend, default is 1st order.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>global</code></td>
<td>
<p>Use single global value for deviation or cell-level values 
(FALSE/TRUE). Argument is ignored for type="trend"</p>
</td>
</tr>
</table>
<h3>Details</h3>

<p>The deviation from the trend is derived as [y-hat - y] where; y-hat is the 
Nth-order polynomial. Whereas the deviation from a global statistic is [y - y-hat] 
where; y-hat is the local (focal) statistic. The global = TRUE argument allows 
one to evaluate the local deviation from the global statistic [stat(x) - y-hat] 
where; stat(x) is the global value of the specified statistic and y-hat is the 
specified focal statistic.
</p>


<h3>Value</h3>

<p>A SpatRaster class object representing local deviation from the raster or the 
specified global statistic
</p>


<h3>Author(s)</h3>

<p>Jeffrey S. Evans  &lt;jeffrey_evans@tnc.org&gt;
</p>


<h3>References</h3>

<p>Magee, Lonnie (1998). Nonlocal Behavior in Polynomial Regressions. The American 
Statistician. American Statistical Association. 52(1):20-22
</p>
<p>Fan, J. (1996). Local Polynomial Modelling and Its Applications: From linear  
regression to nonlinear regression. Monographs on Statistics and Applied 
Probability. Chapman and  Hall/CRC. ISBN 0-412-98321-4
</p>


<h3>Examples</h3>

<pre><code class="language-R">library(terra)
elev &lt;- rast(system.file("extdata/elev.tif", package="spatialEco"))

# local deviation from first-order trend, global mean and raw value
r.dev.trend &lt;- raster.deviation(elev, type="trend", degree=1) 
r.dev.mean &lt;- raster.deviation(elev, type="mean", s=5)
r.gdev.mean &lt;- raster.deviation(elev, type="mean", s=5, global=TRUE)

opar &lt;- par(no.readonly=TRUE)
par(mfrow=c(2,2))
  plot(elev, main="original")
  plot(r.dev.trend, main="dev from trend")
  plot(r.dev.mean, main="dev of mean from raw values")
  plot(r.gdev.mean, main="local dev from global mean")
par(opar)

</code></pre>


</div>