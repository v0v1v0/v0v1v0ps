<div class="container">

<table style="width: 100%;"><tr>
<td>dom_optimal_allocation</td>
<td style="text-align: right;">R Documentation</td>
</tr></table>
<h2>Optimal sample size allocation</h2>

<h3>Description</h3>

<p>The function computes optimal sample size allocation over strata and domain for population.
</p>


<h3>Usage</h3>

<pre><code class="language-R">dom_optimal_allocation(
  id,
  Dom,
  H,
  Y,
  Rh = NULL,
  deffh = NULL,
  indicator,
  sup_w,
  sup_cv,
  min_size = 3,
  correction_before = FALSE,
  dataset = NULL
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr style="vertical-align: top;">
<td><code>id</code></td>
<td>
<p>Variable for unit ID codes. One dimensional object convertible to one-column <code>data.table</code> or variable name as character, column number.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>Dom</code></td>
<td>
<p>Optional variables used to define population domains. If supplied, values are calculated for each domain. An object convertible to <code>data.table</code> or variable names as character vector, column numbers.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>H</code></td>
<td>
<p>The unit stratum variable. One dimensional object convertible to one-column <code>data.table</code> or variable name as character, column number.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>Y</code></td>
<td>
<p>Variable of interest. Object convertible to <code>data.table</code> or variable names as character, column numbers.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>Rh</code></td>
<td>
<p>The expected response rate in each stratum (optional). If not defined, it is assumed to be 1 in each stratum (full-response). Object convertible to one-column <code>data.table</code>, variable name as character, or column number.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>deffh</code></td>
<td>
<p>The expected design effect for the estimate of variable (optional). If not defined, it is assumed to be 1 for each variable in each stratum. If is defined, then variables is defined the same arrangement as <code>Yh</code>. Object convertible to <code>data.table</code>, variable name as character vector, or column numbers.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>indicator</code></td>
<td>
<p>Variable for detection fully surveyed units. Object convertible to <code>data.table</code> or variable names as character, column numbers.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>sup_w</code></td>
<td>
<p>Variable for weight limit in domain of stratum. Object convertible to <code>data.table</code> or variable names as character, column numbers.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>sup_cv</code></td>
<td>
<p>Variable for maximum coeficient of variation (CV) in percentage for domain. Object convertible to <code>data.table</code> or variable names as character, column numbers.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>min_size</code></td>
<td>
<p>A numeric value for sample size.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>correction_before</code></td>
<td>
<p>by default FALSE; correction of sample size is made before ending, if true, correction of sample size is made at the end.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>dataset</code></td>
<td>
<p>Optional survey data object convertible to <code>data.table</code> with one row for each stratum.</p>
</td>
</tr>
</table>
<h3>Value</h3>

<p>A list with eights data objects:<br></p>
<table>
<tr style="vertical-align: top;">
<td><code>data</code></td>
<td>
<p>An object as <code>data.table</code>, with variables:
<code>id</code> - variable with unit ID codes, <br><code>Dom</code> - optional variables used to define population domains, <br><code>H</code> - the unit stratum variable, <br><code>Y</code> - variable of interest, <br><code>Rh</code> - the expected response rate in each stratum, <br><code>deffh</code> - the expected design effect, <br><code>indicator</code> - variable for full surveys, <br><code>sup_w</code> - variable for weight limit in domain of stratum, <br><code>sup_cv</code> - Variable for maximum coeficient of variation, <br><code>poph</code> - population size, <br><code>nh</code> - sample size . </p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>nh_larger_then_Nh</code></td>
<td>
<p>An object as <code>data.table</code>, with variables: <br><code>H</code> - the stratum variable, <br><code>nh</code> - sample size,
<code>poph</code> - population size.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>dom_strata_size</code></td>
<td>
<p>An object as <code>data.table</code>, with variables: <br><code>H</code> - the unit stratum variable, <br><code>Dom</code> - optional variables used to define population domains, <br><code>sup_w</code> - variable for weight limit in domain of stratum, <br><code>poph</code> - population size, <br><code>nh</code> - sample size, <br><code>sample100</code> - sample size for fully surveyed units, <br><code>design_weights</code> - design weigts. </p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>dom_size</code></td>
<td>
<p>An object as <code>data.table</code>, with variables: <br><code>Dom</code> - optional variables used to define population domains, <br><code>poph</code> - population size, <br><code>nh</code> - sample size, <br><code>sample100</code> - sample size for fully surveyed units, <br><code>design_weights</code> - design weigts. </p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>size</code></td>
<td>
<p>An object as <code>data.table</code>, with variables: <br><code>poph</code> - population size, <br><code>nh</code> - sample size, <br><code>sample100</code> - sample size for fully surveyed units. </p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>dom_strata_expected_precision</code></td>
<td>
<p>An object as <code>data.table</code>, with variables: <br><code>H</code> - stratum, <br><code>variable</code> - the name of variable of interest, <br><code>estim</code> - total value, <br><code>deffh</code> - the expected design effect, <br><code>s2h</code> - population variance <code class="reqn">S^2</code>, <br><code>nh</code> - sample size, <br><code>Rh</code> - the expected response rate, <br><code>deffh</code> - the expected design effect, <br><code>poph</code> - population size, <br><code>nrh</code> - expected number of respondents, <br><code>var</code> - expected variance, <br><code>se</code> - expected standard error, <br><code>cv</code> - expected coeficient of variance.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>dom_expected_precision</code></td>
<td>
<p>An object as <code>data.table</code>, with variables: <br><code>Dom</code> - domain, <br><code>variable</code> - the name of variable of interest, <br><code>poph</code> - the population size, <br><code>nh</code> - sample size, <br><code>nrh</code> - expected number of respondents, <br><code>estim</code> - total value, <br><code>var</code> - the expected variance, <br><code>se</code> - the expected standart error, <br><code>cv</code> - the expected coeficient of variance.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code> total_expected_precision</code></td>
<td>
<p>An object as <code>data.table</code>, with variables: <br><code>variable</code> - the name of variable of interest, <br><code>poph</code> - the population size, <br><code>nh</code> - sample size, <br><code>nrh</code> - expected number of respondents, <br><code>estim</code> - total value, <br><code>var</code> - the expected variance, <br><code>se</code> - the expected standart error, <br><code>cv</code> - the expected coeficient of variance.</p>
</td>
</tr>
</table>
<h3>See Also</h3>

<p><code>expsize</code>, <code>optsize</code>, <code>prop_dom_optimal_allocation</code>
</p>


<h3>Examples</h3>

<pre><code class="language-R">library("laeken")
library("data.table")
data("ses")
data &lt;- data.table(ses)
data[, H := paste(location, NACE1, size, sep = "_")]
data[, id := .I]
data[, full := 0]
data[, sup_cv := 10]
data[, sup_w := 20]
#vars &lt;- dom_optimal_allocation(id = "id", dom = "sex",
#                                H = "H", Y = "earnings",
#                                indicator = "full",
#                                sup_w = "sup_w",
#                                sup_cv = "sup_cv",
#                                min_size = 3,
#                                correction_before = FALSE,
#                                dataset = data)
#                                dataset=data)
#vars
</code></pre>


</div>