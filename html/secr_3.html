<div class="container">

<table style="width: 100%;"><tr>
<td>addSightings</td>
<td style="text-align: right;">R Documentation</td>
</tr></table>
<h2>Mark-resight Data</h2>

<h3>Description</h3>

<p>Add sighting data on unmarked individuals and/or unidentified marked
individuals to an existing capthist object. 
</p>


<h3>Usage</h3>

<pre><code class="language-R">
addSightings(capthist, unmarked = NULL, nonID = NULL, uncertain = NULL, verify = TRUE,
    ...)

</code></pre>


<h3>Arguments</h3>

<table>
<tr style="vertical-align: top;">
<td><code>capthist</code></td>
<td>
<p>secr capthist object</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>unmarked</code></td>
<td>
<p>matrix or list of matrices of sightings of unmarked animals, Tu, or file name (see Details)</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>nonID</code></td>
<td>
<p>matrix or list of matrices of unidentified sightings of marked animals, Tm, or file name (see Details)</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>uncertain</code></td>
<td>
<p>matrix or list of matrices of uncertain sightings, Tn, or file name (see Details)</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>verify</code></td>
<td>
<p> logical; if TRUE then the resulting capthist object is
checked with <code>verify</code></p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>...</code></td>
<td>
<p>other arguments passed to <code>read.table</code> </p>
</td>
</tr>
</table>
<h3>Details</h3>

<p>The capthist object for mark-resight analysis comprises distinct marking and sighting occasions, defined in the markocc attribute of <code>traps(capthist)</code>. Add this attribute to <code>traps(capthist)</code> with <code>markocc</code> before using 'addSightings'. See also <code>read.traps</code> and <code>read.capthist</code>.
</p>
<p>Mark-resight data may be binary (detector type ‘proximity’) or counts (detector types ‘count’, 'polygon' or 'transect'). The detector type is an attribute of <code>traps(capthist)</code>. Values in <code>unmarked</code> and <code>nonID</code> should be whole numbers, and may be greater than 1 even for binary proximity detectors because multiple animals may be detected simultaneously at one place.
</p>
<p>Arguments <code>unmarked</code>, <code>nonID</code>, <code>uncertain</code> provide data for attributes
‘Tu’, ‘Tm’, ‘Tn’ respectively. They may take several forms
</p>

<ul>
<li>
<p> a single integer, the sum of all counts*
</p>
</li>
<li>
<p> a matrix of the count on each occasion at each detector (dimensions K x S, where K is the number of detectors and S is the total number of occasions). Columns corresponding to marking occasions should be all-zero.
</p>
</li>
<li>
<p> for multi-session data, a list with components as above
</p>
</li>
<li>
<p> a character value with the name of a text file containing the data; the file will be read with <code>read.table</code>. The ... argument allows some control over how the file is read. The data format comprises at least S+1 columns. The first is a session identifier used to split the file when the data span multiple sessions; it should be constant for a single-session capthist. The remaining S columns contain the counts for occasions 1:S, one row per detector. Further columns may be present; they are ignored at present.    
</p>
</li>
</ul>
<p>* although this is convenient, the full matrix of counts provides more flexibility (e.g., when you wish to subset by occasion), and enables modelling of variation across detectors and occasions.
</p>


<h3>Value</h3>

<p>A capthist object with the same structure as the input, but with new sighting-related attributes Tu (sightings of unmarked animals) and/or Tm (unidentified sightings of marked animals). Input values, including NULL, overwrite existing values.
</p>


<h3>Warning</h3>

<p>** Mark-resight data formats and models are experimental and subject to change **</p>


<h3>See Also</h3>

<p><code>markocc</code>, 
<code>read.capthist</code>, 
<code>read.traps</code>, 
<code>sim.resight</code>,
<code>Tm</code>,
<code>Tu</code>,
<code>Tn</code>,
<a href="https://www.otago.ac.nz/density/pdfs/secr-markresight.pdf">secr-markresight.pdf</a> 
</p>


<h3>Examples</h3>

<pre><code class="language-R">
## construct capthist object MRCH from text files provided in 
## 'extdata' folder, assigning attribute 'markocc' and add unmarked
## and marked sightings from respective textfiles

datadir &lt;- system.file("extdata", package = "secr")
captfile &lt;- paste0(datadir, '/MRCHcapt.txt')
trapfile &lt;- paste0(datadir, '/MRCHtrap.txt')
Tufile &lt;- paste0(datadir, '/Tu.txt')
Tmfile &lt;- paste0(datadir, '/Tm.txt')

MRCH &lt;- read.capthist(captfile, trapfile, detector = c("multi", 
    rep("proximity",4)), markocc = c(1,0,0,0,0))
MRCH1 &lt;- addSightings(MRCH, Tufile, Tmfile)

## alternatively (ignoring marked, not ID sightings)

MRCH &lt;- read.capthist(captfile, trapfile, detector = c("multi", 
    rep("proximity",4)), markocc = c(1,0,0,0,0))
Tu &lt;- read.table(Tufile)[,-1]  # drop session column
MRCH2 &lt;- addSightings(MRCH, unmarked = Tu)
summary(MRCH2)

</code></pre>


</div>