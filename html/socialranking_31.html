<div class="container">

<table style="width: 100%;"><tr>
<td>powerRelationMatrix</td>
<td style="text-align: right;">R Documentation</td>
</tr></table>
<h2>Create relation matrix</h2>

<h3>Description</h3>

<p>For a given <code>PowerRelation</code> object create a <code>relations::relation()</code> object.
</p>


<h3>Usage</h3>

<pre><code class="language-R">powerRelationMatrix(
  powerRelation,
  domainNames = c("pretty", "numericPrec", "numeric")
)

## S3 method for class 'PowerRelation'
as.relation(x, ...)
</code></pre>


<h3>Arguments</h3>

<table>
<tr style="vertical-align: top;">
<td><code>powerRelation</code></td>
<td>
<p>A <code>PowerRelation</code> object created by <code>PowerRelation()</code> or <code>as.PowerRelation()</code></p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>domainNames</code></td>
<td>
<p>How should the row and column names be formatted?
</p>

<ul>
<li> <p><code>pretty</code>: Coalitions such as c(1,2) are formatted as 12. To ensure that it's correctly sorted alphabetically, every name is preceded by a certain amount of the invisible Unicode character \u200b
</p>
</li>
<li> <p><code>numericPrec</code>: Coalitions such as c(1,2) are formatted as 1{12}, the number in front of the curly brace marking its sorted spot. While less pretty, it won't use Unicode characters.
</p>
</li>
<li> <p><code>numeric</code>: Drop coalition names, only count from 1 upwards. Each number corresponds to the index in TODO <code>powerRelation$rankingCoalitions</code>
</p>
</li>
<li> <p><code style="white-space: pre;">⁠function(x)⁠</code>: A custom function that is passed a number from <code>1</code> through <code>length(powerRelation$rankingCoalitions)</code>. Must return a <code>character</code> object.
</p>
</li>
</ul>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>x</code></td>
<td>
<p>A <code>PowerRelation</code> object</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>...</code></td>
<td>
<p>Further parameters (ignored)</p>
</td>
</tr>
</table>
<h3>Details</h3>

<p>Turn a <code>PowerRelation</code> object into a <code>relations::relation()</code> object. The incidence matrix can be viewed with
<code>relations::relation_incidence()</code>.
</p>
<p>The columns and rows of a <code>PowerRelation</code> object are ordered by TODO <code>powerRelation$rankingCoalitions</code>.
The <code>relations</code> package automatically sorts the columns and rows by their domain names, which is the reason the
parameter <code>domainNames</code> is included. This way we ensure that the columns and rows are sorted by
the order of the power relation.
</p>


<h3>Value</h3>

<p><code>relations::relation()</code> object to the corresponding power relation.
</p>


<h3>Cycles</h3>

<p>A <code>PowerRelation</code> object is defined as being transitive. If a power relation includes a cycle,
meaning that the same coalition appears twice in the ranking, all coalitions within that cycle will be considered
to be indifferent from one another.
</p>
<p>For example, given the power relation <code class="reqn">1 \succ 2 \succ 3 \succ 1 \succ 12</code>,
the relation is somewhat equivalent to <code class="reqn">1 \sim 2 \sim 3 \succ 12</code>. There is no way
to check for cycles in the incidence matrix only.
</p>
<p>Call <code>transitiveClosure()</code> to remove cycles in a <code>PowerRelation</code> object.
</p>


<h3>See Also</h3>

<p><code>relations::as.relation()</code>
</p>


<h3>Examples</h3>

<pre><code class="language-R">pr &lt;- as.PowerRelation("12 &gt; 1 &gt; 2")
relation &lt;- powerRelationMatrix(pr)

# do relation stuff
# Incidence matrix
# 111
# 011
# 001
relations::relation_incidence(relation)

# all TRUE
stopifnot(all(
  relations::relation_is_acyclic(relation),
  relations::relation_is_antisymmetric(relation),
  relations::relation_is_linear_order(relation),
  relations::relation_is_complete(relation),
  relations::relation_is_reflexive(relation),
  relations::relation_is_transitive(relation)
))


# a power relation where coalitions {1} and {2} are indifferent
pr &lt;- as.PowerRelation("12 &gt; (1 ~ 2)")
relation &lt;- powerRelationMatrix(pr)

# Incidence matrix
# 111
# 011
# 011
relations::relation_incidence(relation)

# FALSE
stopifnot(!any(
  relations::relation_is_acyclic(relation),
  relations::relation_is_antisymmetric(relation),
  relations::relation_is_linear_order(relation)
))
# TRUE
stopifnot(all(
  relations::relation_is_complete(relation),
  relations::relation_is_reflexive(relation),
  relations::relation_is_transitive(relation)
))


# a pr with cycles
pr &lt;- suppressWarnings(as.PowerRelation("12 &gt; 1 &gt; 2 &gt; 1"))
relation &lt;- powerRelationMatrix(pr)

# Incidence matrix
# 1111
# 0111
# 0111
# 0111
relations::relation_incidence(relation)

# custom naming convention
relation &lt;- powerRelationMatrix(
  pr,
  function(x) paste0(letters[x], ":", paste(pr$rankingCoalitions[[x]], collapse = "|"))
)

relations::relation_incidence(relation)
# Incidences:
#       a:1|2 b:1 c:2 d:1
# a:1|2     1   1   1   1
# b:1       0   1   1   1
# c:2       0   1   1   1
# d:1       0   1   1   1

</code></pre>


</div>