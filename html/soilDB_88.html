<div class="container">

<table style="width: 100%;"><tr>
<td>fetchNASIS</td>
<td style="text-align: right;">R Documentation</td>
</tr></table>
<h2>Get a pedon or component data <code>SoilProfileCollection</code> from NASIS</h2>

<h3>Description</h3>

<p>Fetch commonly used site/pedon/horizon or mapunit component data from NASIS,
returned as a <code>SoilProfileCollection</code> object.
</p>
<p>This function imports data from NASIS into R as a <code>SoilProfileCollection</code> object.
It "flattens" NASIS pedon and component tables, including their child tables, into several
more manageable data frames. Primarily these functions access the local NASIS database using
an ODBC connection. The <code>dsn</code> argument allows you to specify a path or <code>DBIConnection</code>
to an SQLite database. The argument <code>from = "pedon_report"</code>, data can be read
from the NASIS Report 'fetchNASIS', from either text file or URL (specified as <code>url</code>). The primary purpose
of <code>fetchNASIS(from = "pedon_report")</code> is importing datasets larger than 8000+
pedons/components.
</p>
<p>The value of <code>nullFragsAreZero</code> will have a significant impact on the
rock fragment fractions returned by fetchNASIS. Set <code>nullFragsAreZero = FALSE</code> in those cases where there are many data-gaps and NULL rock
fragment values should be interpreted as NULL. Set
<code>nullFragsAreZero = TRUE</code> in those cases where NULL rock
fragment values should be interpreted as 0.
</p>
<p>This function attempts to do most of the boilerplate work when extracting
site/pedon/horizon or component data from a local NASIS database. Pedon IDs
that are missing horizon data, or have errors in their horizonation are printed on the
console. Pedons with combination horizons (e.g. B/C) are erroneously marked
as errors due to the way in which they are stored in NASIS as two
overlapping horizon records.
</p>
<p>Tutorials:
</p>

<ul>
<li> <p><a href="http://ncss-tech.github.io/soilDB/articles/fetchNASIS.html">fetchNASIS Columns</a>
</p>
</li>
<li> <p><a href="http://ncss-tech.github.io/AQP/soilDB/fetchNASIS-mini-tutorial.html">fetchNASIS Pedons Tutorial</a>
</p>
</li>
<li> <p><a href="http://ncss-tech.github.io/AQP/soilDB/NASIS-component-data.html">fetchNASIS Components Tutorial</a>
</p>
</li>
</ul>
<h3>Usage</h3>

<pre><code class="language-R">fetchNASIS(
  from = "pedons",
  url = NULL,
  SS = TRUE,
  rmHzErrors = FALSE,
  nullFragsAreZero = TRUE,
  soilColorState = "moist",
  mixColors = TRUE,
  lab = FALSE,
  fill = FALSE,
  dropAdditional = TRUE,
  dropNonRepresentative = TRUE,
  duplicates = FALSE,
  stringsAsFactors = NULL,
  dsn = NULL
)

get_concentrations_from_NASIS_db(
  SS = TRUE,
  stringsAsFactors = NULL,
  dsn = NULL
)

get_phfmp_from_NASIS_db(SS = TRUE, stringsAsFactors = NULL, dsn = NULL)
</code></pre>


<h3>Arguments</h3>

<table>
<tr style="vertical-align: top;">
<td><code>from</code></td>
<td>
<p>determines what objects should fetched? Default: <code>'pedons'</code>. Alternately, <code>'components'</code>, or <code>'pedon_report'</code>.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>url</code></td>
<td>
<p>string specifying the url for the NASIS pedon_report (default:
<code>NULL</code>)</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>SS</code></td>
<td>
<p>fetch data from the currently loaded selected set in NASIS or from
the entire local database (default: <code>TRUE</code>)</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>rmHzErrors</code></td>
<td>
<p>should pedons with horizon depth errors be removed from
the results? (default: <code>FALSE</code>)</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>nullFragsAreZero</code></td>
<td>
<p>should fragment volumes of <code>NULL</code> be interpreted as <code>0</code>?
(default: <code>TRUE</code>), see details</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>soilColorState</code></td>
<td>
<p>Used only for <code>from = 'pedons'</code>; which colors should be used to generate the convenience field <code>soil_color</code>? (<code>'moist'</code> or <code>'dry'</code>)</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>mixColors</code></td>
<td>
<p>should mixed colors be calculated (Default: <code>TRUE</code>) where multiple colors are populated for the same moisture state in a horizon? <code>FALSE</code> takes the dominant color for each horizon moist/dry state.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>lab</code></td>
<td>
<p>should the <code>phlabresults</code> child table be fetched with site/pedon/horizon data (default: <code>FALSE</code>)</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>fill</code></td>
<td>
<p>include pedon or component records without horizon data in result? (default: <code>FALSE</code>)</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>dropAdditional</code></td>
<td>
<p>Used only for <code>from='components'</code> with <code>duplicates = TRUE</code>. Prevent "duplication" of <code>mustatus == "additional"</code>  mapunits? Default: <code>TRUE</code></p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>dropNonRepresentative</code></td>
<td>
<p>Used only for <code>from='components'</code> with <code>duplicates = TRUE</code>. Prevent "duplication" of non-representative data mapunits? Default: <code>TRUE</code></p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>duplicates</code></td>
<td>
<p>Used only for <code>from='components'</code>. Duplicate components for all instances of use (i.e. one for each legend data mapunit is used on; optionally for additional mapunits, and/or non-representative data mapunits?). This will include columns from <code>get_component_correlation_data_from_NASIS_db()</code> that identify which legend(s) a component is used on.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>stringsAsFactors</code></td>
<td>
<p>deprecated</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>dsn</code></td>
<td>
<p>Optional: path to local SQLite database containing NASIS table structure; default: <code>NULL</code></p>
</td>
</tr>
</table>
<h3>Value</h3>

<p>a <code>SoilProfileCollection</code> object
</p>


<h3>Author(s)</h3>

<p>D. E. Beaudette, J. M. Skovlin, S.M. Roecker, A.G. Brown
</p>


<h3>See Also</h3>

<p><code>get_component_data_from_NASIS()</code>
</p>


</div>