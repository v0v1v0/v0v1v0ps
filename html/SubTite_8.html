<div class="container">

<table style="width: 100%;"><tr>
<td>SimTrial</td>
<td style="text-align: right;">R Documentation</td>
</tr></table>
<h2>Simulates a Sub-TITE trial design</h2>

<h3>Description</h3>

<p>Simulates replicates from a Sub-TITE trial with user specified true toxicity time distributions for different doses and subgroups and returns average summary statistics of the trial.
</p>


<h3>Usage</h3>

<pre><code class="language-R">SimTrial(
  nSims,
  Nmax,
  T1,
  Target,
  Dose,
  DoseStart,
  Upper,
  Accrue,
  groupprob,
  meanmu,
  meanslope,
  MeanInts,
  MeanSlopes,
  VarInt,
  VarSlope,
  phetero,
  Family,
  SimTruth,
  NSep,
  NBorrow,
  cohort,
  FULL
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr style="vertical-align: top;">
<td><code>nSims</code></td>
<td>
<p>Number of Trials to Simulate.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>Nmax</code></td>
<td>
<p>Maximum Number of Patients to enroll in the trial.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>T1</code></td>
<td>
<p>Reference time for toxicity.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>Target</code></td>
<td>
<p>Target cumulative toxicity probability (or subgroup specific vector) at time T1.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>Dose</code></td>
<td>
<p>Standardized vector of doses to try.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>DoseStart</code></td>
<td>
<p>Dose (or vector of Doses) to enroll the first patient in each subgroup at.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>Upper</code></td>
<td>
<p>Cutoff values used to determine if accrual in a subgroup should be suspended.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>Accrue</code></td>
<td>
<p>Expected montly patient accrual rate.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>groupprob</code></td>
<td>
<p>Probability vector of subgroup assignment.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>meanmu</code></td>
<td>
<p>Prior mean of the baseline intercept parameter.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>meanslope</code></td>
<td>
<p>Prior mean of the baseline slope parameter.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>MeanInts</code></td>
<td>
<p>G-1 length vector of subgroup specific prior intercept means.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>MeanSlopes</code></td>
<td>
<p>G-1 length vector of subgroup specific prior slope means.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>VarInt</code></td>
<td>
<p>Prior Variance of Intercept Parameters.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>VarSlope</code></td>
<td>
<p>Prior Variance of Slope Parameters.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>phetero</code></td>
<td>
<p>Prior probability of clustering</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>Family</code></td>
<td>
<p>What distribution Family to simulate from. Options include: Exponential,Gamma, Lognormal, Uniform, Weibull.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>SimTruth</code></td>
<td>
<p>List of 2 #Groups by #Doses matrices containing the true parameter values needed for simulating from different true time to toxicity distributions. When a Uniform distribution is chosen, the user will instead supply the true toxicity probabilities for each dose/subgroup combination in both list entries. For a gamma distribution, the user will supply a matrix for the shape parameters for each dose and subgroup, and a second matrix for the rate parameters of each dose and subgroup.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>NSep</code></td>
<td>
<p>Number of patients to assign based on no borrowing.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>NBorrow</code></td>
<td>
<p>Number of patients to assign based on no clustering</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>cohort</code></td>
<td>
<p>Number of patients to enroll before escalating.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>FULL</code></td>
<td>
<p>Do we have to fully evaluate a cohort before escalating?</p>
</td>
</tr>
</table>
<h3>Value</h3>

<p>A list with first entry corresponding to summaries of the operating characteristics of the design including
</p>


<h3>Examples</h3>

<pre><code class="language-R">##Note: nSims  should be set larger than the example below.
nSims=1
###TRIAL PARAMETERS###
##Specify reference toxicity time and target
T1=6
Target=.3
##Number of Groups
##Specify upper bound for determining if the lowest dose is too toxic in a subgroup
Upper=c(.95,.95)
#' ##Standardized Dose Values and starting dose index
Dose=sort(rnorm(5))
DoseStart=1
##Maximum Sample Size
Nmax=25
##Number of patients to run separately
NSep=0
##Number of patients to borrow, but NOT cluster
NBorrow=0
##Number of patients to fully evaluate or TREAT before ESCALATING
cohort=3
##Do we fully evaluate a cohort before escalating?
FULL=0
#HYPERPARAMETERS#
##Hypermeans for baseline terms
meanmu=2.21
meanslope=-.57
##Hypervectors for subgroup specific terms
MeanInts = c(0,.46)
MeanSlopes = c(0,.04)
##Hypervariances
VarInt=5
VarSlope=1
######SIMULATION TRUTH####
##True Accrual Rate
Accrue=2
##True Distribution of subgroups
groupprob=c(.5,.5)
##True Group Toxicity probabilities at each dose level
GroupProb =matrix(c(.05,.3,.6,.7,.8,.01,.02,.13,.27,.5),nrow=2,byrow=TRUE)
##True Simulation distribution
Family="Uniform"
SimTruth = as.list(c(0,0))
SimTruth[[1]]=GroupProb
SimTruth[[2]]=GroupProb
phetero=.9
RESULTS=SimTrial(nSims,Nmax,T1,Target,Dose,DoseStart,
              Upper,Accrue,groupprob,meanmu,meanslope,
              MeanInts,MeanSlopes,VarInt,VarSlope,phetero,
              Family,SimTruth,NSep,NBorrow,cohort,FULL)
              RESULTS[[1]]
</code></pre>


</div>