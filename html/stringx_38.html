<div class="container">

<table style="width: 100%;"><tr>
<td>sub2</td>
<td style="text-align: right;">R Documentation</td>
</tr></table>
<h2>Replace Pattern Occurrences</h2>

<h3>Description</h3>

<p><code>sub2</code> replaces the first pattern occurrence in each string
with a given replacement string.
<code>gsub2</code> replaces all (i.e., 'globally') pattern matches.
</p>


<h3>Usage</h3>

<pre><code class="language-R">sub2(x, pattern, replacement, ..., ignore_case = FALSE, fixed = FALSE)

gsub2(x, pattern, replacement, ..., ignore_case = FALSE, fixed = FALSE)

sub(
  pattern,
  replacement,
  x,
  ...,
  ignore.case = FALSE,
  fixed = FALSE,
  perl = FALSE,
  useBytes = FALSE
)

gsub(
  pattern,
  replacement,
  x,
  ...,
  ignore.case = FALSE,
  fixed = FALSE,
  perl = FALSE,
  useBytes = FALSE
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr style="vertical-align: top;">
<td><code>x</code></td>
<td>
<p>character vector with strings whose chunks are to be modified</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>pattern</code></td>
<td>
<p>character vector of nonempty search patterns</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>replacement</code></td>
<td>
<p>character vector with the corresponding replacement
strings; in <code>sub2</code> and <code>gsub2</code>, back-references
(whenever <code>fixed=FALSE</code>)
are indicated by <code>$0</code>..<code>$99</code> and <code>$&lt;name&gt;</code>,
whereas the base-R compatible <code>sub</code> and <code>gsub</code>,
only allow <code>\1</code>..<code>\9</code></p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>...</code></td>
<td>
<p>further arguments to <code>stri_replace_first</code>
or <code>stri_replace_all</code>,
e.g., <code>locale</code>, <code>dotall</code></p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>ignore_case, ignore.case</code></td>
<td>
<p>single logical value; indicates whether matching
should be case-insensitive</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>fixed</code></td>
<td>
<p>single logical value;
<code>FALSE</code> for matching with regular expressions
(see about_search_regex);
<code>TRUE</code> for fixed pattern matching
(about_search_fixed);
<code>NA</code> for the Unicode collation algorithm
(about_search_coll)</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>perl, useBytes</code></td>
<td>
<p>not used (with a warning if
attempting to do so) [DEPRECATED]</p>
</td>
</tr>
</table>
<h3>Details</h3>

<p>Not to be confused with <code>substr</code>.
</p>
<p>These functions are fully vectorised with respect to <code>x</code>,
<code>pattern</code>, and <code>replacement</code>.
</p>
<p><code>gsub2</code> uses <code>vectorise_all=TRUE</code> because of the attribute
preservation rules, <code>stri_replace_all</code> should be
called directly if different behaviour is needed.
</p>
<p>The [DEPRECATED] <code>sub</code> and [DEPRECATED] <code>gsub</code> simply call
<code>sub2</code> and <code>gsub2</code>
which have a cleaned-up argument list. Additionally,
if <code>fixed=FALSE</code>, the back-references in <code>replacement</code> strings
are converted to these accepted by the <span class="pkg">ICU</span> regex engine.
</p>


<h3>Value</h3>

<p>Both functions return a character vector.
They preserve the attributes of the longest inputs (unless they are
dropped due to coercion).
</p>


<h3>Differences from Base R</h3>

<p>Replacements for base <code>sub</code> and <code>gsub</code>
implemented with <code>stri_replace_first</code>
and <code>stri_replace_all</code>, respectively.
</p>

<ul>
<li>
<p> there are inconsistencies between the argument order and naming
in <code>grepl</code>, <code>strsplit</code>,
and <code>startsWith</code> (amongst others); e.g.,
where the needle can precede the haystack, the use of the forward
pipe operator, <code>|&gt;</code>, is less convenient
<b>[fixed here]</b>
</p>
</li>
<li>
<p> base R implementation is not portable as it is based on
the system PCRE or TRE library
(e.g., some Unicode classes may not be available or matching thereof
can depend on the current <code>LC_CTYPE</code> category
<b>[fixed here]</b>
</p>
</li>
<li>
<p> not suitable for natural language processing
<b>[fixed here â€“ use <code>fixed=NA</code>]</b>
</p>
</li>
<li>
<p> two different regular expression libraries are used
(and historically, ERE was used in place of TRE)
<b>[here, <span class="pkg">ICU</span> Java-like regular expression engine
is only available, hence the <code>perl</code> argument has no meaning]</b>
</p>
</li>
<li>
<p> not vectorised w.r.t. <code>pattern</code> and <code>replacement</code>
<b>[fixed here]</b>
</p>
</li>
<li>
<p> only 9 (unnamed) back-references can be referred to in the
replacement strings
<b>[fixed in <code>sub2</code> and <code>gsub2</code>]</b>
</p>
</li>
<li> <p><code>perl=TRUE</code> supports <code>\U</code>, <code>\L</code>, and <code>\E</code>
in the replacement strings
<b>[not available here]</b>
</p>
</li>
</ul>
<h3>Author(s)</h3>

<p><a href="https://www.gagolewski.com/">Marek Gagolewski</a>
</p>


<h3>See Also</h3>

<p>The official online manual of <span class="pkg">stringx</span> at <a href="https://stringx.gagolewski.com/">https://stringx.gagolewski.com/</a>
</p>
<p>Related function(s): <code>paste</code>, <code>nchar</code>,
<code>grepl2</code>, <code>gregexpr2</code>, <code>gregextr2</code>
<code>strsplit</code>, <code>gsubstr</code>
</p>
<p><code>trimws</code> for removing whitespaces (amongst others)
from the start or end of strings
</p>


<h3>Examples</h3>

<pre><code class="language-R">"change \U0001f602 me \U0001f603" |&gt; gsub2("\\p{L}+", "O_O")

x &lt;- c("mario", "Mario", "M\u00E1rio", "M\u00C1RIO", "Mar\u00EDa", "Rosario", NA)
sub2(x, "mario", "M\u00E1rio", fixed=NA, strength=1L)
sub2(x, "mario", "Mario", fixed=NA, strength=2L)

x &lt;- "abcdefghijklmnopqrstuvwxyz"
p &lt;- "(.)(.)(.)(.)(.)(.)(.)(.)(.)(.)(.)(.)(.)"
base::sub(p, "\\1\\9", x)
base::gsub(p, "\\1\\9", x)
base::gsub(p, "\\1\\9", x, perl=TRUE)
base::gsub(p, "\\1\\13", x)
sub2(x, p, "$1$13")
gsub2(x, p, "$1$13")


</code></pre>


</div>