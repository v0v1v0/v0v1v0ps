<div class="container">

<table style="width: 100%;"><tr>
<td>sf2raster</td>
<td style="text-align: right;">R Documentation</td>
</tr></table>
<h2>Convert simple features object into regularly spaced raster</h2>

<h3>Description</h3>

<p>This function takes in an <code>sf</code> spatial object (polygon or point) and returns a regularly spaced RasterLayer. Reverse translation option allows users to create an <code>sf</code> polygon object from the regularly spaced RasterLayer. This function can also conver the <code>sf</code> object into a cartogram with a user-specified variable name.
</p>


<h3>Usage</h3>

<pre><code class="language-R">sf2raster(
  polyz_from = NULL,
  pointz_from = NULL,
  input_variable = NULL,
  reverse = FALSE,
  poly_to = NULL,
  return_output = NULL,
  return_field = NULL,
  aggregate_function = list(function(x) mean(x, na.rm = TRUE)),
  reverse_function = list(function(x) mean(x, na.rm = TRUE)),
  grid_dim = c(1000, 1000),
  cartogram = FALSE,
  carto_var = NULL,
  message_out = TRUE,
  return_list = FALSE
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr style="vertical-align: top;">
<td><code>polyz_from</code></td>
<td>
<p>Source polygon layer. <code>sf</code> object.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>pointz_from</code></td>
<td>
<p>Source point layer. <code>sf</code> object.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>input_variable</code></td>
<td>
<p>Name of input variable from source layer. Character string.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>reverse</code></td>
<td>
<p>Reverse translation from raster layer to <code>sf</code> polygon object (polygon features only). Default is <code>FALSE</code>.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>poly_to</code></td>
<td>
<p>Destination polygon layer for reverse conversion. Must be specified if <code>reverse=TRUE</code>. <code>sf</code> object.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>return_output</code></td>
<td>
<p>Return output for reverse conversion. Must be specified if <code>reverse=TRUE</code>.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>return_field</code></td>
<td>
<p>Return field for reverse conversion. Must be specified if <code>reverse=TRUE</code>.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>aggregate_function</code></td>
<td>
<p>Aggregation function to be applied to variables specified in <code>input_variable</code>. Must take as an input a numeric vector <code>x</code>. Function or list of functions. Default is <code>mean</code>.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>reverse_function</code></td>
<td>
<p>Aggregation function for reverse conversion. Must be specified if <code>reverse=TRUE</code>. Function or list of functions. Default is <code>mean</code>.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>grid_dim</code></td>
<td>
<p>Dimensions of raster grid. Numerical vector of length 2 (number of rows, number of columns). Default is <code>c(1000,1000)</code>.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>cartogram</code></td>
<td>
<p>Cartogram transformation. Logical. Default is <code>FALSE</code>.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>carto_var</code></td>
<td>
<p>Input variable for cartogram transformation. Must be specified if <code>cartogram=TRUE</code>. Character string.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>message_out</code></td>
<td>
<p>Print informational messages. Logical. Default is <code>TRUE</code>.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>return_list</code></td>
<td>
<p>Return full set of results, including input polygons, centroids and field raster. Default is <code>FALSE</code>. Logical.</p>
</td>
</tr>
</table>
<h3>Value</h3>

<p>If <code>return_list=FALSE</code> (default) and <code>reverse=FALSE</code> (default), returns <code>RasterLayer</code> object, with cell values corresponding to <code>input_variable</code>.
</p>
<p>If <code>return_list=TRUE</code> and input layer is polygon, returns a list containing
</p>

<ul>
<li>
<p> "return_output". Output raster, with values corresponding to <code>input_variable</code>. <code>RasterLayer</code> object.
</p>
</li>
<li>
<p> "return_centroid". Raster of centroids, with values corresponding to <code>input_variable</code>. <code>RasterLayer</code> object.
</p>
</li>
<li>
<p> "poly_to". Source polygons, with columns corresponding to <code>input_variable</code> and auto-generated numerical ID <code>Field</code>. <code>sf</code> object.
</p>
</li>
<li>
<p> "return_field". Output raster, with values corresponding to auto-generated numerical ID <code>Field</code>. <code>RasterLayer</code> object.</p>
</li>
</ul>
<p>If <code>return_list=TRUE</code> and  input layer is points, returns a list containing
</p>

<ul>
<li>
<p> "return_output". Output raster, with values corresponding to <code>input_variable</code>. <code>RasterLayer</code> object.
</p>
</li>
<li>
<p> "return_point". Source points, with column corresponding to <code>input_variable</code>.
</p>
</li>
</ul>
<p>If <code>reverse=TRUE</code>, returns an <code>sf</code> polygon layer, with columns corresponding to <code>input_variable</code> and auto-generated numerical ID <code>Field</code>.
</p>


<h3>Examples</h3>

<pre><code class="language-R"># Rasterization of polygon layer.
## Not run: 
data(clea_deu2009)
out_1 &lt;- sf2raster(polyz_from = utm_select(clea_deu2009),
                   input_variable = "to1")
terra::plot(out_1)

## End(Not run)
# Rasterization of point layer
## Not run: 
data(clea_deu2009_pt)
out_2 &lt;- sf2raster(pointz_from = utm_select(clea_deu2009_pt),
                   input_variable = "to1",
                   grid_dim = c(25,25))
terra::plot(out_2)

## End(Not run)
# Cartogram (vote turnout scaled by number of valid votes)
## Not run: 
out_3 &lt;- sf2raster(polyz_from = utm_select(clea_deu2009),
                   input_variable = "to1",
                   cartogram = TRUE,
                   carto_var = "vv1")
terra::plot(out_3)

## End(Not run)
# Polygonization of cartogram raster
## Not run: 
out_4a &lt;- sf2raster(polyz_from = utm_select(clea_deu2009),
                    input_variable = "to1",
                    cartogram = TRUE,
                    carto_var = "vv1",
                    return_list = TRUE)
out_4 &lt;- sf2raster(reverse = TRUE,
                   poly_to = out_4a$poly_to,
                   return_output = out_4a$return_output,
                   return_field = out_4a$return_field)
terra::plot(out_4)

## End(Not run)
</code></pre>


</div>