<div class="container">

<table style="width: 100%;"><tr>
<td>maskInvarFeatures</td>
<td style="text-align: right;">R Documentation</td>
</tr></table>
<h2>Identify pseudo-invariant features from a satellite scene</h2>

<h3>Description</h3>

<p>Identify pseudo-invariant features from a satellite scene based on a 
vis, near infravis and short-wave infravis band.
</p>


<h3>Usage</h3>

<pre><code class="language-R">## S4 method for signature 'Satellite'
maskInvarFeatures(x)

## S4 method for signature 'RasterStack'
maskInvarFeatures(x, quant = 0.01, id_vis = 1L, id_nir = 2L, id_swir = 3L)

## S4 method for signature 'RasterLayer'
maskInvarFeatures(x, nir, swir, quant = 0.01)
</code></pre>


<h3>Arguments</h3>

<table>
<tr style="vertical-align: top;">
<td><code>x</code></td>
<td>
<p>A Satellite object or a <code>raster::RasterLayer</code> providing the 
sensor's vis band.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>quant</code></td>
<td>
<p>A value v = [0...1] which is used to define the percentage
threshold values (thv) for invariant features (nir/vis ratio &lt; thv, 
swir band values &gt; 1-thv).</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>id_vis</code></td>
<td>
<p>Index of the visible band.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>id_nir</code></td>
<td>
<p>Index of the near infravis band.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>id_swir</code></td>
<td>
<p>Index of the short-wave infravis band.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>nir</code></td>
<td>
<p>A <code>raster::RasterLayer</code> containing the sensor's nir band.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>swir</code></td>
<td>
<p>A <code>raster::RasterLayer</code> containing the sensor's swir band.</p>
</td>
</tr>
</table>
<h3>Details</h3>

<p>Invariant features are identified as pixels which belong to the 
group of (i) the n lowest VIS/NIR ratios and of (ii) the highest n
SWIR values. The value of n is given by the parameter quant = [0...1].
</p>


<h3>Value</h3>

<p>If x is a Satellite object, a Satellite object with added layer; <br>
if x is a <code>raster::RasterLayer</code> object, a a <code>raster::RasterLayer</code> 
object with added layers (1 indicates invariant pixels, 0 otherwise).
</p>


<h3>References</h3>

<p>This function is taken and only slightly modified from the PIF
function by Sarah C. Goslee (2011). Analyzing Remote Sensing Data in R: The 
landsat Package. Journal of Statistical Software,43(4), 1-25, 
<a href="https://doi.org/10.18637/jss.v043.i04">doi:10.18637/jss.v043.i04</a>.
</p>
<p>The underlying theory has been published by Schott RJ, Salvaggio C and 
Volchok WJ (1988) Radiometric scene normalization using pseudoinvariant 
features. Remote Sensing of Environment 26/1, 
<a href="https://doi.org/10.1016/0034-4257%2888%2990116-2">doi:10.1016/0034-4257(88)90116-2</a>.
</p>


<h3>Examples</h3>

<pre><code class="language-R">path &lt;- system.file("extdata", package = "satellite")
files &lt;- list.files(path, pattern = glob2rx("LC08*.TIF"), full.names = TRUE)
sat &lt;- satellite(files)
sat &lt;- maskInvarFeatures(sat)

maskInvarFeatures(x = getSatDataLayer(sat, "B004n"), 
                  nir = getSatDataLayer(sat, "B005n"), 
                  swir = getSatDataLayer(sat, "B007n"))

## when dealing with a 'RasterStack'
rst &lt;- stack(files[c(6, 7, 9)])
maskInvarFeatures(rst)

</code></pre>


</div>