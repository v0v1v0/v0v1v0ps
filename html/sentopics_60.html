<div class="container">

<table style="width: 100%;"><tr>
<td>sentiment_breakdown</td>
<td style="text-align: right;">R Documentation</td>
</tr></table>
<h2>Breakdown the sentiment into topical components</h2>

<h3>Description</h3>

<p>Break down the sentiment series obtained with
<code>sentiment_series()</code> into topical components. Sentiment is broken down at
the document level using estimated topic proportions, then processed to
create a time series and its components.
</p>


<h3>Usage</h3>

<pre><code class="language-R">sentiment_breakdown(
  x,
  period = c("year", "quarter", "month", "day", "identity"),
  rolling_window = 1,
  scale = TRUE,
  scaling_period = c("1900-01-01", "2099-12-31"),
  plot = c(FALSE, TRUE, "silent"),
  as.xts = TRUE,
  ...
)

plot_sentiment_breakdown(
  x,
  period = c("year", "quarter", "month", "day"),
  rolling_window = 1,
  scale = TRUE,
  scaling_period = c("1900-01-01", "2099-12-31"),
  ...
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr style="vertical-align: top;">
<td><code>x</code></td>
<td>
<p>a <code>LDA()</code> or <code>rJST()</code> model populated with internal dates and/or
internal sentiment.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>period</code></td>
<td>
<p>the sampling period within which the sentiment of documents
will be averaged. <code>period = "identity"</code> is a special case that will return
document-level variables before the aggregation happens. Useful to rapidly
compute topical sentiment at the document level.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>rolling_window</code></td>
<td>
<p>if greater than 1, determines the rolling window to
compute a moving average of sentiment. The rolling window is based on the
period unit and rely on actual dates (i.e, is not affected by unequally
spaced data points).</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>scale</code></td>
<td>
<p>if <code>TRUE</code>, the resulting time series will be scaled to a mean of
zero and a standard deviation of 1. This argument also has the side effect
of attaching scaled sentiment values as <em>docvars</em> to the input object with
the <code style="white-space: pre;">⁠_scaled⁠</code> suffix.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>scaling_period</code></td>
<td>
<p>the date range over which the scaling should be
applied. Particularly useful to normalize only the beginning of the time
series.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>plot</code></td>
<td>
<p>if <code>TRUE</code>, prints a plot of the time series and attaches it as an
attribute to the returned object. If <code>'silent'</code>, do not print the plot but
still attaches it as an attribute.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>as.xts</code></td>
<td>
<p>if <code>TRUE</code>, returns an xts::xts object. Otherwise, returns a
data.frame.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>...</code></td>
<td>
<p>other arguments passed on to <code>zoo::rollapply()</code> or <code>mean()</code> and
<code>sd()</code>.</p>
</td>
</tr>
</table>
<h3>Details</h3>

<p>The sentiment is broken down at the sentiment level assuming the
following composition: </p>
<p style="text-align: center;"><code class="reqn">s = \sum^K_{i=1} s_i \times \theta_i</code>
</p>
<p>, where
<code class="reqn">s_i</code> is the sentiment of topic i and <code class="reqn">theta_i</code> the proportion of
topic i in a given document. For an LDA model, the sentiment of each topic
is considered equal to the document sentiment (i.e. <code class="reqn">s_i = s \forall i
  \in K</code>). The topical sentiment attention, defined by <code class="reqn">s*_i = s_i \times
  \theta_i</code> represent the effective sentiment conveyed by a topic in a
document. The topical sentiment attention of all documents in a period are
averaged to compute the breakdown of the sentiment time series.
</p>


<h3>Value</h3>

<p>A time series of sentiment, stored as an xts::xts object or as a
data.frame.
</p>


<h3>See Also</h3>

<p>sentopics_sentiment sentopics_date
</p>
<p>Other series functions: 
<code>proportion_topics()</code>,
<code>sentiment_series()</code>,
<code>sentiment_topics()</code>
</p>


<h3>Examples</h3>

<pre><code class="language-R">lda &lt;- LDA(ECB_press_conferences_tokens)
lda &lt;- fit(lda, 100)
sentiment_breakdown(lda)

# plot shortcut
plot_sentiment_breakdown(lda)

# also available for rJST models (with topic-level sentiment)
rjst &lt;- rJST(ECB_press_conferences_tokens, lexicon = LoughranMcDonald)
rjst &lt;- fit(rjst, 100)
sentopics_sentiment(rjst, override = TRUE)
plot_sentiment_breakdown(rjst)
</code></pre>


</div>