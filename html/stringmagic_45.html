<div class="container">

<table style="width: 100%;"><tr>
<td>timer_magic</td>
<td style="text-align: right;">R Documentation</td>
</tr></table>
<h2>Sets up a timer that can be used within <code style="white-space: pre;">⁠_magic⁠</code> functions</h2>

<h3>Description</h3>

<p>Sets up a timer which can later be summoned by <code>string_magic()</code> functions via
the <code>.timer</code>, <code>.timer_lap</code> and <code>.timer_total</code> variables. Useful to report
timings within functions with the function <code>cat_magic()</code> or <code>message_magic()</code>.
</p>


<h3>Usage</h3>

<pre><code class="language-R">timer_magic()
</code></pre>


<h3>Details</h3>

<p>This functions sets up a timer with <code>base::Sys.time()</code>. This timer can then be tracked
and modified with the <code>.timer</code>, <code>.timer_lap</code> and <code>.timer_total</code> variables within
<code>cat_magic()</code> or <code>message_magic()</code>.
</p>
<p>Note that the timer is precise at +/- 1ms, hence it should <strong>not</strong> be used to time
algorithms with very short execution times.
</p>
<p>It works by saving the current system time in R options (<code>stringmagic_timer</code> and <code>stringmagic_timer_origin</code>).
Hence, since it uses options, it should not be used in parallel processes.
</p>


<h3>Value</h3>

<p>This function does not return anything and is only intended to be used in
conjunction with future calls of <code>string_magic()</code>.
</p>


<h3>Author(s)</h3>

<p>Laurent Berge
</p>


<h3>See Also</h3>

<p>Other tools with aliases: 
<code>string_clean_alias()</code>,
<code>string_magic()</code>,
<code>string_magic_alias()</code>,
<code>string_ops_alias()</code>,
<code>string_vec_alias()</code>
</p>


<h3>Examples</h3>

<pre><code class="language-R">
# simple example where we time the execution of some elements in a function
# we trigger the message conditionally on the value of the argument `debug`.
rnorm_crossprod = function(n, mean = 0, sd = 1, debug = FALSE){
  # we set the timer
  timer_magic()
  # we compute some stuff
  x = rnorm(n, mean, sd)
  # we can report the time with .timer
  message_magic("{15 align ! Generation}: {.timer}", .trigger = debug)
  
  res = x %*% x
  message_magic("{15 align ! Product}: {.timer}",
                "{15 align ! Total}: {.timer_total}", 
                .sep = "\n", .trigger = debug)
  res
}

rnorm_crossprod(1e5, TRUE)


</code></pre>


</div>