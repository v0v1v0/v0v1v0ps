<div class="container">

<table style="width: 100%;"><tr>
<td>dbl_run</td>
<td style="text-align: right;">R Documentation</td>
</tr></table>
<h2>Dynamic Bayesian Logit</h2>

<h3>Description</h3>

<p>Dynamic Bayesian Logit
</p>


<h3>Usage</h3>

<pre><code class="language-R">dbl_run(
  formula,
  data,
  r = NULL,
  rd = NULL,
  lambda = NULL,
  weight = NULL,
  kappa = 0.95,
  init_r = 0,
  init_rd = 1
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr style="vertical-align: top;">
<td><code>formula</code></td>
<td>
<p>formula which specifies the model. Unlike other algorithms
in the packages (glicko_run, glicko2_run, bbt_run), this method doesn't allow
players nested in teams with <code>player(player | team)</code> and user should matchup
in formula using <code>player(player)</code>. DBL allows user specify multiple parameters
also in interaction with others.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>data</code></td>
<td>
<p>data.frame which contains columns specified in formula, and
optional columns defined by <code>lambda</code>, <code>weight</code>.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>r</code></td>
<td>
<p>named vector of initial players ratings estimates. If not specified
then <code>r</code> will be created automatically for parameters specified in <code>formula</code>
with initial value <code>init_r</code>.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>rd</code></td>
<td>
<p>rd named vector of initial rating deviation estimates. If not specified
then <code>rd</code> will be created automatically for parameters specified in <code>formula</code>
with initial value <code>init_rd</code>.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>lambda</code></td>
<td>
<p>name of the column in <code>data</code> containing lambda values or one
constant value (eg. <code>lambda = colname</code> or <code>lambda = 0.5</code>).
Lambda impact prior variance, and uncertainty of the matchup result. The
higher lambda, the higher prior variance and more uncertain result of the
matchup. Higher lambda flattens chances of winning.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>weight</code></td>
<td>
<p>name of the column in <code>data</code> containing weights values or
one constant (eg. <code>weight = colname</code> or <code>weight = 0.5</code>).
Weights increasing (weight &gt; 1) or decreasing (weight &lt; 1) update change.
Higher weight increasing impact of event result on rating estimate.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>kappa</code></td>
<td>
<p>controls <code>rd</code> shrinkage not to be greater than <code>rd*(1 - kappa)</code>.
<code>kappa=1</code> means that  <code>rd</code> will not be decreased.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>init_r</code></td>
<td>
<p>initial values for <code>r</code> if not provided.
Default (<code>glicko = 1500</code>, <code>glicko2 = 1500</code>, <code>bbt = 25</code>,
<code>dbl = 0</code>)</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>init_rd</code></td>
<td>
<p>initial values for <code>rd</code> if not provided.
Default (<code>glicko = 350</code>, <code>glicko2 = 350</code>, <code>bbt = 25/3</code>, <code>dbl = 1</code>)</p>
</td>
</tr>
</table>
<h3>Value</h3>

<p>A "rating" object is returned:
</p>

<ul>
<li> <p><code>final_r</code> named vector containing players ratings.
</p>
</li>
<li> <p><code>final_rd</code> named vector containing players ratings deviations.
</p>
</li>
<li> <p><code>r</code> data.frame with evolution of the ratings and ratings deviations
estimated at each event.
</p>
</li>
<li> <p><code>pairs</code> pairwise combinations of players in analysed events with
prior probability and result of a challenge.
</p>
</li>
<li> <p><code>class</code> of the object.
</p>
</li>
<li> <p><code>method</code> type of algorithm used.
</p>
</li>
<li> <p><code>settings</code> arguments specified in function call.
</p>
</li>
</ul>
<h3>Examples</h3>

<pre><code class="language-R"># the simplest example

data &lt;- data.frame(
  id = c(1, 1, 1, 1),
  name = c("A", "B", "C", "D"),
  rank = c(3, 4, 1, 2),
  gate = c(1, 2, 3, 4),
  factor1 = c("a", "a", "b", "b"),
  factor2 = c("a", "b", "a", "b")
)

dbl &lt;- dbl_run(
  data = data,
  formula = rank | id ~ player(name)
)

dbl &lt;- dbl_run(
  data = data,
  formula = rank | id ~ player(name) + gate * factor1
)
</code></pre>


</div>