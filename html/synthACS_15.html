<div class="container">

<table style="width: 100%;"><tr>
<td>all_geog_optimize_microdata</td>
<td style="text-align: right;">R Documentation</td>
</tr></table>
<h2>Optimize the selection of a micro data population for a set of geographies.</h2>

<h3>Description</h3>

<p>Optimize the candidate micro datasets such that the lowest loss against the 
macro dataset constraints are obtained. Loss is defined here as total absolute error (TAE)
and constraints are defined by the <code>constraint_list_list</code>. Optimization is done by
simulated annealing and geographies are run in parallel.
</p>


<h3>Usage</h3>

<pre><code class="language-R">all_geog_optimize_microdata(
  macro_micro,
  prob_name = "p",
  constraint_list_list,
  p_accept = 0.4,
  max_iter = 10000L,
  seed = sample.int(10000L, size = 1, replace = FALSE),
  leave_cores = 1L,
  verbose = TRUE
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr style="vertical-align: top;">
<td><code>macro_micro</code></td>
<td>
<p>The geographical dataset of macro and micro data. Should be of class 
<code>"macro_micro"</code>.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>prob_name</code></td>
<td>
<p>It is assumed that observations are weighted and do not have an equal probability
of occurance. This string specifies the variable within each dataset that contains the probability
of selection.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>constraint_list_list</code></td>
<td>
<p>A list of constraint lists. See <code>add_constraint</code>, 
<code>all_geogs_add_constraint</code></p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>p_accept</code></td>
<td>
<p>The acceptance probability for the Metropolis acceptance criteria.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>max_iter</code></td>
<td>
<p>The maximum number of allowable iterations. Defaults to <code>10000L</code></p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>seed</code></td>
<td>
<p>A seed for reproducibility. See <code>set.seed</code></p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>leave_cores</code></td>
<td>
<p>An <code>integer</code> for the number of cores you wish to leave open for other
processing.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>verbose</code></td>
<td>
<p>Logical. Do you wish to see verbose output? Defaults to <code>TRUE</code></p>
</td>
</tr>
</table>
<h3>See Also</h3>

<p><code>optimize_microdata</code>
</p>


<h3>Examples</h3>

<pre><code class="language-R">## Not run: 
 # assumes that micro_synthetic and cll already exist in your environment
 # see: examples for derive_synth_datasets() and all_geogs_add_constraint()
 optimized_la &lt;- all_geog_optimize_microdata(micro_synthetic, prob_name= "p", 
     constraint_list_list= cll, p_accept= 0.01, max_iter= 1000L)

## End(Not run)
</code></pre>


</div>