<div class="container">

<table style="width: 100%;"><tr>
<td>filter_sites_by_md</td>
<td style="text-align: right;">R Documentation</td>
</tr></table>
<h2>Filter the sites by metadata variable values</h2>

<h3>Description</h3>

<p><code>filter_sites_by_md</code> function takes logical expressions for the metadata
variables (i.e. <code>pl_sens_meth == 'HR'</code>), and list the sites that met
the criteria from those supplied
</p>


<h3>Usage</h3>

<pre><code class="language-R">filter_sites_by_md(sites, metadata, ..., .join = c("and", "or"))
</code></pre>


<h3>Arguments</h3>

<table>
<tr style="vertical-align: top;">
<td><code>sites</code></td>
<td>
<p>character vector with the sites codes to filter, generally the
result of <code>sfn_sites_in_folder</code></p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>metadata</code></td>
<td>
<p>metadata tbl object, usually the result of
<code>read_sfn_metadata</code></p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>...</code></td>
<td>
<p>Logical expressions for the metadata variables, as in
<code>filter</code>.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>.join</code></td>
<td>
<p>Character indicating how to filter the sites, see details.</p>
</td>
</tr>
</table>
<h3>Details</h3>

<p><code>.join</code> argument indicates how sites must be filtered between metadata
classes. <code>'and'</code> indicates only sites meeting all conditions for all
metadata classes are returned. <code>'or'</code> indicates all sites meeting any
condition between classes are returned. For two or more filters of the same
metadata class, they are combined as 'and'.
</p>


<h3>Value</h3>

<p>A character vector with the sites fulfilling the premises
</p>


<h3>Examples</h3>

<pre><code class="language-R"># Let's access the data in "folder". This typically is the folder where the
# sapflow data at the desired unit level is (i.e. "RData/plant"), but in this
# example we will create a temporal folder with some data to test the function
folder &lt;- tempdir()
save(ARG_TRE, file = file.path(folder, 'ARG_TRE.RData'))
save(ARG_MAZ, file = file.path(folder, 'ARG_MAZ.RData'))
save(AUS_CAN_ST2_MIX, file = file.path(folder, 'AUS_CAN_ST2_MIX.RData'))

# we need the metadata and the site names
metadata &lt;- read_sfn_metadata(folder = folder, .write_cache = TRUE)
sites &lt;- sfn_sites_in_folder(folder)

# Filter by Heat Ratio method
filter_sites_by_md(
  pl_sens_meth == 'HR', sites = sites, metadata = metadata
)

# Both, Heat Ratio and Heat Dissipation
filter_sites_by_md(
  pl_sens_meth %in% c('HR', 'HD'),
  sites = sites, metadata = metadata
)

# more complex, Heat Ratio method AND Woodland/Shrubland biome
filter_sites_by_md(
  pl_sens_meth == 'HR',
  si_biome == 'Woodland/Shrubland',
  sites = sites, metadata = metadata,
  .join = 'and' # default
)

# join = 'or' returns sites that meet any condition
filter_sites_by_md(
  pl_sens_meth == 'HR',
  si_biome == 'Woodland/Shrubland',
  sites = sites, metadata = metadata,
  .join = 'or'
)

</code></pre>


</div>