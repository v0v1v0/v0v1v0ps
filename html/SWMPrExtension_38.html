<div class="container">

<table style="width: 100%;"><tr>
<td>res_sk_map</td>
<td style="text-align: right;">R Documentation</td>
</tr></table>
<h2>Local Reserve Map With Seasonal Kendall Results</h2>

<h3>Description</h3>

<p>Create a stylized reserve-level map of seasonal kendall results for use with the reserve level reporting template
</p>


<h3>Usage</h3>

<pre><code class="language-R">res_sk_map(
  nerr_site_id,
  stations,
  sk_result = NULL,
  bbox,
  shp,
  station_labs = TRUE,
  lab_loc = NULL,
  bg_map = NULL,
  zoom = NULL,
  maptype = "stamen_toner_lite"
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr style="vertical-align: top;">
<td><code>nerr_site_id</code></td>
<td>
<p>chr string of the reserve to make, first three characters used by NERRS</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>stations</code></td>
<td>
<p>chr string of the reserve stations to include in the map</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>sk_result</code></td>
<td>
<p>vector of values denoting direction and significance of seasonal kendall results. Result should be <code>c('inc', 'dec', 'insig', 'insuff')</code> for significant positive, significant negative, no significant results, and insufficient data to calculate result.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>bbox</code></td>
<td>
<p>a bounding box associated with the reserve. Should be in the format of c(xmin, ymin, xmax, ymax).</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>shp</code></td>
<td>
<p>sf data frame (preferred) or SpatialPolygons object</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>station_labs</code></td>
<td>
<p>logical, should stations be labeled? Defaults to <code>TRUE</code></p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>lab_loc</code></td>
<td>
<p>chr vector of 'R' and 'L', one letter for each station. if no <code>lab_loc</code> is specified then labels will default to the left.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>bg_map</code></td>
<td>
<p>a georeferenced <code>ggmap</code> or <code>ggplot</code> object used as a background map, generally provided by a call to <code>base_map</code>. If <code>bg_map</code> is specified, <code>maptype</code> and <code>zoom</code> are ignored.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>zoom</code></td>
<td>
<p>Zoom level for the base map created when <code>bg_map</code> is not specified.  An integer value, 5 - 15, with higher numbers providing  more detail.  If not provided, a zoom level is autoscaled based on <code>bbox</code> parameters.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>maptype</code></td>
<td>
<p>Background map type from Stadia Maps (formerly Stamen)
(<a href="https://docs.stadiamaps.com/">https://docs.stadiamaps.com/</a>); one of c("stamen_terrain",
"stamen_toner", "stamen_toner_lite", "stamen_watercolor", "alidade_smooth",
"alidade_smooth_dark", "outdoors", "stamen_terrain_background",
"stamen_toner_background", "stamen_terrain_labels", "stamen_terrain_lines",
"stamen_toner_labels", "stamen_toner_lines").</p>
</td>
</tr>
</table>
<h3>Details</h3>

<p>Creates a stylized, reserve-level base map for displaying seasonal kendall results from <code>sk_seasonal</code>. The user can specify the reserve and stations to plot. The user can also specify a bounding box. For multi-component reserves, the user should specify a bounding box that highlights the component of interest.
</p>
<p>To display seasonal trends, the user must specify <code>c('inc', 'dec', 'insig', 'insuff')</code> for each station listed in the <code>stations</code> argument.
</p>


<h3>Value</h3>

<p>returns a <code>ggplot</code> object.
</p>


<h3>Author(s)</h3>

<p>Julie Padilla, Dave Eslinger
</p>


<h3>Examples</h3>

<pre><code class="language-R">## A compact reserve

### set plotting parameters
stations &lt;- sampling_stations[(sampling_stations$NERR.Site.ID == 'elk'
     &amp; sampling_stations$Status == 'Active'
     &amp; sampling_stations$isSWMP == "P"), ]$Station.Code
     to_match &lt;- c('wq')
stns &lt;- stations[grep(paste(to_match, collapse = '|'), stations)]
shp_fl &lt;- elk_spatial
bounding_elk &lt;- c(-121.8005, 36.7779, -121.6966, 36.8799)
trnds &lt;- c('inc', 'dec', 'insuff', 'insig')

### Low zoom and default maptype plot (for CRAN testing, not recommended)
#    Lower zoom number gives coarser text and fewer features
(x_low &lt;- res_sk_map('elk', stations = stns, sk_result = trnds,
                 bbox = bounding_elk, shp = shp_fl,
                 zoom = 10))



### Default zoom and maptype
x_def &lt;- res_sk_map('elk', stations = stns, sk_result = trnds,
                 bbox = bounding_elk, shp = shp_fl)

### Higher zoom number gives more details, but those may not be visible
x_14 &lt;- res_sk_map('elk', stations = stns, sk_result = trnds,
                 bbox = bounding_elk, shp = shp_fl,
                 zoom = 14)

### Different maptypes may be used.
x_terrain &lt;- res_sk_map('elk', stations = stns, sk_result = trnds,
                 bbox = bounding_elk, shp = shp_fl,
                 maptype = 'stamen_terrain')
### A multicomponent reserve (showing two different bounding boxes)

#  set plotting parameters
stations &lt;- sampling_stations[(sampling_stations$NERR.Site.ID == 'cbm'
         &amp; sampling_stations$Status == 'Active'
         &amp; sampling_stations$isSWMP == "P"), ]$Station.Code
         to_match &lt;- c('wq')
stns &lt;- stations[grep(paste(to_match, collapse = '|'), stations)]
shp_fl &lt;- cbm_spatial
bounding_cbm_1 &lt;- c(-77.393, 38.277, -75.553, 39.741)
bounding_cbm_2 &lt;- c(-76.8,  38.7, -76.62,  38.85)
trnds &lt;- c('inc', 'insuff', 'dec', 'insig')

#   plot
y &lt;- res_sk_map('cbm', stations = stns, sk_result = trnds,
                 bbox = bounding_cbm_1, shp = shp_fl)

z &lt;- res_sk_map('cbm', stations = stns, sk_result = trnds,
                 bbox = bounding_cbm_2, shp = shp_fl)

</code></pre>


</div>