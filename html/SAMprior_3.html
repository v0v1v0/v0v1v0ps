<div class="container">

<table style="width: 100%;"><tr>
<td>get_OC</td>
<td style="text-align: right;">R Documentation</td>
</tr></table>
<h2>Generating Operating Characteristics of SAM Priors</h2>

<h3>Description</h3>

<p>The <code>get_OC</code> function is designed to generate the operating
characteristics of SAM priors (<em>Yang, et al., 2023</em>), including the
relative bias, relative mean squared error, and type I error and power
under a two-arm comparative trial design. As an option, the operating
characteristic of robust MAP priors (<em>Schmidli, et al., 2014</em>)
can also be generated for comparison.
</p>


<h3>Usage</h3>

<pre><code class="language-R">get_OC(
  if.prior,
  theta.h,
  method.w,
  prior.odds,
  nf.prior,
  delta,
  n,
  n.t,
  decision,
  ntrial,
  if.MAP,
  weight,
  theta,
  theta.t,
  ...
)

## S3 method for class 'betaMix'
get_OC(
  if.prior,
  theta.h,
  method.w,
  prior.odds,
  nf.prior,
  delta,
  n,
  n.t,
  decision,
  ntrial,
  if.MAP,
  weight,
  theta,
  theta.t,
  ...
)

## S3 method for class 'normMix'
get_OC(
  if.prior,
  theta.h,
  method.w,
  prior.odds,
  nf.prior,
  delta,
  n,
  n.t,
  decision,
  ntrial,
  if.MAP,
  weight,
  theta,
  theta.t,
  ...,
  sigma
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr style="vertical-align: top;">
<td><code>if.prior</code></td>
<td>
<p>Informative prior constructed from historical data,
represented (approximately) as a mixture of conjugate distributions.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>theta.h</code></td>
<td>
<p>Estimate of the treatment effect based on historical data.
If missing, the default value is set to be the posterior mean estimate from
<code>if.prior</code>.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>method.w</code></td>
<td>
<p>Methods used to determine the mixture weight for SAM priors.
The default method is LRT (Likelihood Ratio Test), the alternative option can
be PPR (Posterior Probability Ratio). See <code>SAM_weight</code> for more
details.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>prior.odds</code></td>
<td>
<p>The prior probability of <code class="reqn">H_0</code> being true compared to
the prior probability of <code class="reqn">H_1</code> being true using PPR method. The default
value is 1. See <code>SAM_weight</code> for more details.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>nf.prior</code></td>
<td>
<p>Non-informative prior used for constructing the SAM prior
and robust MAP prior.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>delta</code></td>
<td>
<p>Clinically significant difference used for the SAM prior.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>n</code></td>
<td>
<p>Sample size for the control arm.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>n.t</code></td>
<td>
<p>Sample size for the treatment arm.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>decision</code></td>
<td>
<p>Decision rule to compare the treatment with the control;
see <code>decision2S</code>.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>ntrial</code></td>
<td>
<p>Number of trials simulated.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>if.MAP</code></td>
<td>
<p>Whether to simulate the operating characteristics of the
robust MAP prior for comparison, the default value is <code>FALSE</code>.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>weight</code></td>
<td>
<p>Weight assigned to the informative prior component
(<code class="reqn">0 \leq</code> <code>weight</code> <code class="reqn">\leq 1</code>) for the robust MAP prior,
the default value is 0.5.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>theta</code></td>
<td>
<p>A vector of the response rate (binary endpoints) or mean
(continuous endpoints) for the control arm.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>theta.t</code></td>
<td>
<p>A vector of the response rate (binary endpoints) or mean
(continuous endpoints) for the treatment arm.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>...</code></td>
<td>
<p>Additional parameters for continuous endpoints.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>sigma</code></td>
<td>
<p>Variance to simulate the continuous endpoint under normality
assumption.</p>
</td>
</tr>
</table>
<h3>Details</h3>

<p>The <code>get_OC</code> function is designed to generate the operating
characteristics of SAM priors, including the relative bias, relative
mean squared error, and type I error, and power under a two-arm
comparative trial design. As an option, the operating characteristics of
robust MAP priors (<em>Schmidli, et al., 2014</em>) can also be generated for
comparison.
</p>
<p>The relative bias is defined as the difference between the bias of a method
and the bias of using a non-informative prior. The relative mean squared
error is the difference between the mean squared error (MSE) of a method and
the MES of using a non-informative prior.
</p>
<p>To evaluate type I error and power, the determination of whether the
treatment is superior to the control is calculated based on function
<code>decision2S</code>.
</p>


<h3>Value</h3>

<p>Returns dataframe that contains the relative bias, relative MSE,
type I error, and power for both SAM priors, as well as robust MAP priors.
Additionally, the mixture weight of the SAM prior is also displayed.
</p>


<h3>Methods (by class)</h3>


<ul>
<li> <p><code>get_OC(betaMix)</code>: The function is designed to generate the operating
characteristics of SAM priors for binary endpoints.
</p>
</li>
<li> <p><code>get_OC(normMix)</code>: The function is designed to generate the operating
characteristics of SAM priors for continuous endpoints.
</p>
</li>
</ul>
<h3>References</h3>

<p>Yang P, Zhao Y, Nie L, Vallejo J, Yuan Y.
SAM: Self-adapting mixture prior to dynamically borrow information from
historical data in clinical trials. <em>Biometrics</em> 2023; 00, 1â€“12.
https://doi.org/10.1111/biom.13927
</p>
<p>Schmidli H, Gsteiger S, Roychoudhury S, O'Hagan A, Spiegelhalter D, Neuenschwander B.
Robust meta-analytic-predictive priors in clinical trials with historical control information.
<em>Biometrics</em> 2014; 70(4):1023-1032.
</p>


<h3>Examples</h3>

<pre><code class="language-R">set.seed(123)
## Example of a binary endpoint
## Consider a randomized comparative trial designed to borrow information
## from historical data on the control. We assumed a non-informative prior
## beta(1, 1) and an informative prior beta(30, 50) after incorporating
## the historical data. The treatment is regarded as superior to the control
## if Pr(RR.t &gt; RR.c | data) &gt; 0.95, where RR.t and RR.c are response rates
##  of the treatment and control, respectively. The operating characteristics
##  were assessed under the scenarios of (RR.c, RR.t) = (0.3, 0.36) and (0.3, 0.56).
## OC &lt;- get_OC(## Informative prior constructed based on historical data
##              if.prior = mixbeta(c(1, 30, 50)),
##              ## Non-informative prior used for constructing the SAM prior
##              nf.prior = mixbeta(c(1,1,1)),
##              delta    = 0.2,  ## Clinically significant difference
##              n = 35,          ## Sample size for the control arm
##              n.t = 70,        ## Sample size for the treatment arm
##              ## Decision rule to compare the whether treatment is superior
##              ## than the control
##              decision = decision2S(0.95, 0, lower.tail=FALSE),
##              ntrial   = 1000,  ## Number of trials simulated
##              ## Weight assigned to the informative component for MAP prior
##              weight = 0.5,
##              ## A vector of response rate for the control arm
##              theta    = c(0.3, 0.36),
##              ## A vector of response rate for the treatment arm
##              theta.t  = c(0.3, 0.56))
## OC

## Example of continuous endpoint
## Consider a randomized comparative trial designed to borrow information
## from historical data on the control. We assumed a non-informative prior
## N(0, 1e4) and an informative prior N(0.5, 2) after incorporating
## the historical data. The treatment is regarded as superior to the control
## if Pr(mean.t &gt; mean.c | data) &gt; 0.95, where mean.t and mean.c are mean
##  of the treatment and control, respectively. The operating characteristics
##  were assessed under the scenarios of (mean.c, mean.t) = (0.1, 0.1) and
## (0.5, 1.0).
sigma      &lt;- 2
prior.mean &lt;- 0.5
prior.se   &lt;- sigma/sqrt(100)
## OC &lt;- get_OC(## Informative prior constructed based on historical data
##              if.prior = mixnorm(c(1, prior.mean, prior.se)),
##              ## Non-informative prior used for constructing the SAM prior
##              nf.prior = mixnorm(c(1, 0, 1e4)),
##              delta    = 0.2 * sigma,  ## Clinically significant difference
##              n = 100,                 ## Sample size for the control arm
##              n.t = 200,               ## Sample size for the treatment arm
##              ## Decision rule to compare the whether treatment is superior
##              ## than the control
##              decision = decision2S(0.95, 0, lower.tail=FALSE),
##              ntrial   = 1000,  ## Number of trials simulated
##              ## A vector of mean for the control arm
##              theta    = c(0.1, 0.5),
##              ## A vector of mean for the treatment arm
##              theta.t  = c(0.1, 1.0),
##              sigma = sigma)
## OC

</code></pre>


</div>