<div class="container">

<table style="width: 100%;"><tr>
<td>branch</td>
<td style="text-align: right;">R Documentation</td>
</tr></table>
<h2>Fork the Trajectory Path</h2>

<h3>Description</h3>

<p>Activity for defining a fork with <code>N</code> alternative sub-trajectories.
</p>


<h3>Usage</h3>

<pre><code class="language-R">branch(.trj, option, continue, ..., tag)
</code></pre>


<h3>Arguments</h3>

<table>
<tr style="vertical-align: top;">
<td><code>.trj</code></td>
<td>
<p>the trajectory object.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>option</code></td>
<td>
<p>a callable object (a function) which must return an integer between
<code>0</code> and <code>N</code>. A return value equal to <code>0</code> skips the branch and
continues to the next activity. A returning value between <code>1</code> to <code>N</code>
makes the arrival to follow the corresponding sub-trajectory.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>continue</code></td>
<td>
<p>a vector of <code>N</code> booleans that indicate whether the arrival
must continue to the main trajectory after each sub-trajectory or not (if only
one value is provided, it will be recycled to match the number of sub-trajectories).</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>...</code></td>
<td>
<p><code>N</code> trajectory objects (or a list of <code>N</code> trajectory objects)
describing each sub-trajectory.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>tag</code></td>
<td>
<p>activity tag name to perform named rollbacks (see
<code>rollback</code>) or just to better identify your activities.</p>
</td>
</tr>
</table>
<h3>Value</h3>

<p>Returns the trajectory object.
</p>


<h3>Examples</h3>

<pre><code class="language-R">env &lt;- simmer()

traj &lt;- trajectory() %&gt;%
  set_global("path", 1, mod="+", init=-1) %&gt;%
  log_(function() paste("Path", get_global(env, "path"), "selected")) %&gt;%
  branch(
    function() get_global(env, "path"), continue=c(TRUE, FALSE),
    trajectory() %&gt;%
      log_("following path 1"),
    trajectory() %&gt;%
      log_("following path 2")) %&gt;%
  log_("continuing after the branch (path 0)")

env %&gt;%
  add_generator("dummy", traj, at(0:2)) %&gt;%
  run() %&gt;% invisible

</code></pre>


</div>