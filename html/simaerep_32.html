<div class="container">

<table style="width: 100%;"><tr>
<td>simaerep_inframe</td>
<td style="text-align: right;">R Documentation</td>
</tr></table>
<h2>simulate in dataframe</h2>

<h3>Description</h3>

<p>simulate in dataframe
</p>


<h3>Usage</h3>

<pre><code class="language-R">simaerep_inframe(
  df_visit,
  r = 1000,
  under_only = FALSE,
  visit_med75 = FALSE,
  check = TRUE,
  param_site_aggr = list(method = "med75_adj", min_pat_pool = 0.2),
  param_eval_sites = list(method = "BH"),
  env = parent.frame()
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr style="vertical-align: top;">
<td><code>df_visit</code></td>
<td>
<p>Data frame with columns: study_id, site_number, patnum, visit,
n_ae.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>r</code></td>
<td>
<p>Integer or tbl_object, number of repetitions for bootstrap
simulation. Pass a tbl object referring to a table with one column and as
many rows as desired repetitions. Default: 1000.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>under_only</code></td>
<td>
<p>Logical, compute under-reporting probabilities only.
Supersedes under_only parameter passed to <code>eval_sites()</code> and <code>sim_sites()</code>.
Default: TRUE.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>visit_med75</code></td>
<td>
<p>Logical, should evaluation point visit_med75 be used.
Default: TRUE.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>check</code></td>
<td>
<p>Logical, perform data check and attempt repair with
<code>check_df_visit()</code>. Computationally expensive on large data sets. Default:
TRUE.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>param_site_aggr</code></td>
<td>
<p>List of parameters passed to <code>site_aggr()</code>. Default:
list(method = "med75_adj", min_pat_pool = 0.2).</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>param_eval_sites</code></td>
<td>
<p>List of parameters passed to <code>eval_sites()</code>. Default:
list(method = "BH").</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>env</code></td>
<td>
<p>Optional, provide environment of original visit data. Default:
parent.frame().</p>
</td>
</tr>
</table>
<h3>Examples</h3>

<pre><code class="language-R">df_visit &lt;- sim_test_data_study(
 n_pat = 100,
 n_sites = 5,
 frac_site_with_ur = 0.4,
 ur_rate = 0.6
)
df_visit$study_id &lt;- "A"

simaerep_inframe(df_visit)
simaerep_inframe(df_visit, visit_med75 = TRUE)$df_eval

# Database
con &lt;- DBI::dbConnect(duckdb::duckdb(), dbdir = ":memory:")
df_r &lt;- tibble::tibble(rep = seq(1, 1000))

dplyr::copy_to(con, df_visit, "visit")
dplyr::copy_to(con, df_r, "r")

tbl_visit &lt;- dplyr::tbl(con, "visit")
tbl_r &lt;- dplyr::tbl(con, "r")

simaerep_inframe(tbl_visit, r = tbl_r)$df_eval
simaerep_inframe(tbl_visit, r = tbl_r, visit_med75 = TRUE)$df_eval

DBI::dbDisconnect(con)

</code></pre>


</div>