<div class="container">

<table style="width: 100%;"><tr>
<td>test_app</td>
<td style="text-align: right;">R Documentation</td>
</tr></table>
<h2>Test Shiny applications with <span class="pkg">testthat</span>
</h2>

<h3>Description</h3>

<p>This is a helper method that wraps around <code>testthat::test_dir()</code> to test
your Shiny application or Shiny runtime document.  This is similar to how
<code>testthat::test_check()</code> tests your R package but for your app.
</p>


<h3>Usage</h3>

<pre><code class="language-R">test_app(
  app_dir = missing_arg(),
  ...,
  name = missing_arg(),
  check_setup = TRUE,
  reporter = testthat::get_reporter(),
  stop_on_failure = missing_arg()
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr style="vertical-align: top;">
<td><code>app_dir</code></td>
<td>
<p>The base directory for the Shiny application.
</p>

<ul>
<li>
<p> If <code>app_dir</code> is missing and <code>test_app()</code> is called within the
<code>./tests/testthat.R</code> file, the parent directory (<code>"../"</code>) is used.
</p>
</li>
<li>
<p> Otherwise, the default path of <code>"."</code> is used.
</p>
</li>
</ul>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>...</code></td>
<td>
<p>Parameters passed to <code>testthat::test_dir()</code></p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>name</code></td>
<td>
<p>Name to display in the middle of the test name. This value is only used
when calling <code>test_app()</code> inside of <span class="pkg">testhat</span> test. The final testing context will
have the format of <code>"{test_context} - {name} - {app_test_context}"</code>.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>check_setup</code></td>
<td>
<p>If <code>TRUE</code>, the app will be checked for the presence of
<code>./tests/testthat/setup-shinytest2.R</code>. This file must contain a call to
<code>load_app_env()</code>.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>reporter</code></td>
<td>
<p>Reporter to pass through to <code>testthat::test_dir()</code>.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>stop_on_failure</code></td>
<td>
<p>If missing, the default value of <code>TRUE</code> will be used. However, if missing and currently testing, <code>FALSE</code> will be used to seamlessly integrate the app reporter to <code>reporter</code>.</p>
</td>
</tr>
</table>
<h3>Details</h3>

<p>Example usage:
</p>
<div class="sourceCode r"><pre>## Interactive usage
# Test Shiny app in current working directory
shinytest2::test_app()

# Test Shiny app in another directory
path_to_app &lt;- "path/to/app"
shinytest2::test_app(path_to_app)

## File: ./tests/testthat.R
# Will find Shiny app in "../"
shinytest2::test_app()

## File: ./tests/testthat/test-shinytest2.R
# Test a shiny application within your own {testthat} code
test_that("Testing a Shiny app in a package", {
  shinytest2::test_app(path_to_app)
})
</pre></div>


<h3>Uploading files</h3>

<p>When testing an application, all non-temp files that are uploaded should be
located in the <code>./tests/testthat</code> directory. This allows for tests to be more
portable and self contained.
</p>
<p>When recording a test with <code>record_test()</code>, for every uploaded file that is
located outside of <code>./tests/testthat</code>, a warning will be thrown. Once the
file path has be fixed, you may remove the warning statement.
</p>


<h3>Different ways to test</h3>

<p><code>test_app()</code> is an opinionated testing function that will only execute
<span class="pkg">testthat</span> tests in the <code>./tests/testthat</code> folder. If (for some rare
reason) you have other non-<span class="pkg">testthat</span> tests to execute, you can call
<code>shiny::runTests()</code>. This method will generically run all test runners and
their associated tests.
</p>
<div class="sourceCode r"><pre># Execute a single Shiny app's {testthat} file such as `./tests/testthat/test-shinytest2.R`
test_app(filter = "shinytest2")

# Execute all {testthat} tests
test_app()

# Execute all tests for all test runners
shiny::runTests()
</pre></div>


<h3>See Also</h3>


<ul>
<li> <p><code>record_test()</code> to create tests to record against your Shiny application.
</p>
</li>
<li> <p><code>testthat::snapshot_review()</code> and <code>testthat::snapshot_accept()</code> if
you want to compare or update snapshots after testing.
</p>
</li>
<li> <p><code>load_app_env()</code> to load the Shiny application's helper files.
This is only necessary if you want access to the values while testing.
</p>
</li>
</ul>
</div>