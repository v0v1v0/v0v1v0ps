<div class="container">

<table style="width: 100%;"><tr>
<td>diffBar</td>
<td style="text-align: right;">R Documentation</td>
</tr></table>
<h2>Adjust bar chart where bars lie to the left/right or bottom/top of a given nullvalue</h2>

<h3>Description</h3>

<p>Adjusts the horizontal (XML attribute 'x') or vertical (XML attribute 'y') position as well as width/height of bar segments (XML elements of type 'rect') and optionally value labels (XML elements of type 'text'). Positions are calculated relative to a given frame (XML element of type 'rect'), a nullvalue and the position of a data value within the minimum and maximum of a given scale. Bar segments and, optionally, value labels with values lower than the nullvalue are positioned to the left (in horizontal alignment) or to the bottom (in vertical alignment) of the scaled nullvalue, higher values on the opposite side.<br>
For further description see <code>stackedBar</code>.
</p>


<h3>Usage</h3>

<pre><code class="language-R">diffBar(
  svg,
  frame_name,
  group_name,
  scale_real,
  values,
  nullvalue = 0,
  alignment = "horizontal",
  has_labels = TRUE,
  label_position = "center",
  decimals = 0,
  display_limits = c(0, 0)
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr style="vertical-align: top;">
<td><code>svg</code></td>
<td>
<p>XML document with SVG content</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>frame_name</code></td>
<td>
<p>Name (attribute 'id') of frame (XML element 'rect') for positioning bar segments (and value labels).</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>group_name</code></td>
<td>
<p>Name (attribute 'id') of group (XML element 'g') containing either bar segments (and value labels) or further groups, containing bar segments (and value labels) themselves.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>scale_real</code></td>
<td>
<p>Numeric vector (e.g. <code>c(0,100)</code>) of arbitrary length. Only minimum and maximum are used for scaling of values.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>values</code></td>
<td>
<p>Either a numeric vector, a numeric matrix or a dataframe with only numeric columns.<br>
If a vector is given, it corresponds to one bar (group of bar segments and, optionally, value labels).<br>
If a matrix or dataframe is given, rows define the value set for several (stacked) bars grouped together.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>nullvalue</code></td>
<td>
<p>Value that defines the "center" of the bar segments (for left/right or bottom/top positioning)</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>alignment</code></td>
<td>
<p>Character value. Accepts 'horizontal' (default) or 'vertical'. See details.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>has_labels</code></td>
<td>
<p>Are there value labels (of XML type 'text') to adjust? (default TRUE)</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>label_position</code></td>
<td>
<p>Character value. Accepts 'start', 'center' (default) and 'end'. This refers to the underlying bar segments.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>decimals</code></td>
<td>
<p>Integer value defining the number of decimal digits of value labels (default 0). It is possible to set the rounding of the labels to rounding away from zero by <code>options("svgtools.roundAwayFromZero" = TRUE)</code>.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>display_limits</code></td>
<td>
<p>Interval for (small) values, that lead to suppression of the corresponding value labels. If only one value x is given, it is turned into the interval c(-x,x). (default 0 = no suppression)</p>
</td>
</tr>
</table>
<h3>Details</h3>

<p>See <code>stackedBar</code>.
</p>


<h3>Value</h3>

<p>XML document with SVG content
</p>


<h3>Examples</h3>

<pre><code class="language-R">#read SVG file
fpath &lt;- system.file("extdata", "fig7.svg", package="svgtools")
svg &lt;- read_svg(file = fpath)

#adjust bars
df &lt;- data.frame(diff_negative = c(NA,NA,-0.7,NA,-0.33), 
                 diff_positive = c(0.4,0.55,NA,0.02,NA))
svg &lt;- diffBar(svg = svg, frame_name = "frame", group_name = "group", 
               scale_real = c(-1,1), values = df, nullvalue = 0, 
               label_position = "end", decimals = 1, display_limits = 0.1)
</code></pre>


</div>