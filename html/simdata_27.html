<div class="container">

<table style="width: 100%;"><tr>
<td>simdesign</td>
<td style="text-align: right;">R Documentation</td>
</tr></table>
<h2>Design specification for simulating datasets</h2>

<h3>Description</h3>

<p>Stores information necessary to simulate and visualize datasets based
on underlying distribution <code>Z</code>.
</p>


<h3>Usage</h3>

<pre><code class="language-R">simdesign(
  generator,
  transform_initial = base::identity,
  n_var_final = -1,
  types_final = NULL,
  names_final = NULL,
  prefix_final = "v",
  process_final = list(),
  name = "Simulation design",
  check_and_infer = TRUE,
  ...
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr style="vertical-align: top;">
<td><code>generator</code></td>
<td>
<p>Function which generates data from the underlying base distribution. It is
assumed it takes the number of simulated observations <code>n_obs</code> as first
argument, as all random generation functions in the <span class="pkg">stats</span> and
<span class="pkg">extraDistr</span> do. Furthermore, it is expected to return a two-dimensional
array as output (matrix or data.frame). Alternatively an R object derived
from the <code>simdata::simdesign</code> class. See details.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>transform_initial</code></td>
<td>
<p>Function which specifies the transformation of the underlying
dataset <code>Z</code> to final dataset <code>X</code>. See details.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>n_var_final</code></td>
<td>
<p>Integer, number of columns in final datamatrix <code>X</code>. Can be inferred when
<code>check_and_infer</code> is TRUE.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>types_final</code></td>
<td>
<p>Optional vector of length equal to <code>n_var_final</code> (set by the user or
inferred) and hence number of columns of final dataset <code>X</code>.
Allowed entries are "logical", "factor" and "numeric".
Stores the type of the columns of <code>X</code>.
If not specified by, inferred if <code>check_and_infer</code> is set to TRUE.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>names_final</code></td>
<td>
<p>NULL or character vector with variable names for final dataset <code>X</code>.
Length needs to equal the number of columns of <code>X</code>.
Overrides other naming options. See details.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>prefix_final</code></td>
<td>
<p>NULL or prefix attached to variables in final dataset <code>X</code>. Overriden
by <code>names_final</code> argument. Set to NULL if no prefixes should
be added. See details.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>process_final</code></td>
<td>
<p>List of lists specifying post-processing functions applied to final
datamatrix <code>X</code> before returning it. See <code>do_processing</code>.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>name</code></td>
<td>
<p>Character, optional name of the simulation design.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>check_and_infer</code></td>
<td>
<p>If TRUE, then the simulation design is tested by simulating 5 observations
using <code>simulate_data</code>. If everything works without error,
the variables <code>n_var_final</code> and <code>types_final</code> will be inferred
from the results if not already set correctly by the user.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>...</code></td>
<td>
<p>Further arguments are directly stored in the list object to be passed to
<code>simulate_data</code>.</p>
</td>
</tr>
</table>
<h3>Details</h3>

<p>The <code>simdesign</code> class should be used in the following workflow:
</p>

<ol>
<li>
<p> Specify a design template which will be used in subsequent data
generating / visualization steps.
</p>
</li>
<li>
<p> Sample / visualize datamatrix following template (possibly
multiple times) using <code>simulate_data</code>.
</p>
</li>
<li>
<p> Use sampled datamatrix for simulation study.
</p>
</li>
</ol>
<p>For more details on generators and transformations, please see the
documentation of <code>simulate_data</code>.
</p>
<p>For details on post-processing, please see the documentation of
<code>do_processing</code>.
</p>


<h3>Value</h3>

<p>List object with class attribute "simdesign" (S3 class) containing
the following entries (if no further information given, entries are
directly saved from user input):
</p>

<dl>
<dt><code>generator</code></dt>
<dd></dd>
<dt><code>name</code></dt>
<dd></dd>
<dt><code>transform_initial</code></dt>
<dd></dd>
<dt><code>n_var_final</code></dt>
<dd></dd>
<dt><code>types_final</code></dt>
<dd></dd>
<dt><code>names_final</code></dt>
<dd></dd>
<dt><code>process_final</code></dt>
<dd></dd>
<dt><code style="white-space: pre;">⁠entries for further information as passed by the user⁠</code></dt>
<dd></dd>
</dl>
<h3>Naming of variables</h3>

<p>If <code>check_and_infer</code> is set to TRUE, the following procedure determines
the names of the variables:
</p>

<ol>
<li>
<p> use <code>names_final</code> if specified and of correct length
</p>
</li>
<li>
<p> otherwise, use the names of <code>transform_initial</code> if present and of
correct length
</p>
</li>
<li>
<p> otherwise, use <code>prefix_final</code> to prefix the variable number if
not NULL
</p>
</li>
<li>
<p> otherwise, use names from dataset as generated by the <code>generator</code>
function
</p>
</li>
</ol>
<h3>Simulation Templates</h3>

<p>This class is intended to be used as a template for simulation designs
which are based on specific underlying distributions. All such a template
needs to define is the <code>generator</code> function and its construction and
pass it to this function along with the other arguments. See
<code>simdesign_mvtnorm</code> for an example.
</p>


<h3>See Also</h3>

<p><code>simdesign_mvtnorm</code>,
<code>simulate_data</code>,
<code>simulate_data_conditional</code>
</p>


<h3>Examples</h3>

<pre><code class="language-R">generator &lt;- function(n) mvtnorm::rmvnorm(n, mean = 0)
sim_design &lt;- simdesign(generator)
simulate_data(sim_design, 10, seed = 19)

</code></pre>


</div>