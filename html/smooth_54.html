<div class="container">

<table style="width: 100%;"><tr>
<td>sim.es</td>
<td style="text-align: right;">R Documentation</td>
</tr></table>
<h2>Simulate Exponential Smoothing</h2>

<h3>Description</h3>

<p>Function generates data using ETS with Single Source of Error as a data
generating process.
</p>


<h3>Usage</h3>

<pre><code class="language-R">sim.es(model = "ANN", obs = 10, nsim = 1, frequency = 1,
  persistence = NULL, phi = 1, initial = NULL, initialSeason = NULL,
  bounds = c("usual", "admissible", "restricted"), randomizer = c("rnorm",
  "rlnorm", "rt", "rlaplace", "rs"), probability = 1, ...)
</code></pre>


<h3>Arguments</h3>

<table>
<tr style="vertical-align: top;">
<td><code>model</code></td>
<td>
<p>Type of ETS model according to [Hyndman et. al., 2008]
taxonomy. Can consist of 3 or 4 chars: <code>ANN</code>, <code>AAN</code>, <code>AAdN</code>,
<code>AAA</code>, <code>AAdA</code>, <code>MAdM</code> etc.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>obs</code></td>
<td>
<p>Number of observations in each generated time series.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>nsim</code></td>
<td>
<p>Number of series to generate (number of simulations to do).</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>frequency</code></td>
<td>
<p>Frequency of generated data. In cases of seasonal models
must be greater than 1.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>persistence</code></td>
<td>
<p>Persistence vector, which includes all the smoothing
parameters. Must correspond to the chosen model. The maximum length is 3:
level, trend and seasonal smoothing parameters. If <code>NULL</code>, values are
generated.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>phi</code></td>
<td>
<p>Value of damping parameter. If trend is not chosen in the model,
the parameter is ignored.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>initial</code></td>
<td>
<p>Vector of initial states of level and trend. The maximum
length is 2. If <code>NULL</code>, values are generated.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>initialSeason</code></td>
<td>
<p>Vector of initial states for seasonal coefficients.
Should have length equal to <code>frequency</code> parameter. If <code>NULL</code>,
values are generated.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>bounds</code></td>
<td>
<p>Type of bounds to use for persistence vector if values are
generated. <code>"usual"</code> - bounds from p.156 by Hyndman et. al., 2008.
<code>"restricted"</code> - similar to <code>"usual"</code> but with upper bound equal
to 0.3. <code>"admissible"</code> - bounds from tables 10.1 and 10.2 of Hyndman
et. al., 2008. Using first letter of the type of bounds also works. These
bounds are also used for multiplicative models, but the models are much
more restrictive, so weird results might be obtained. Be careful!</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>randomizer</code></td>
<td>
<p>Type of random number generator function used for error
term. Defaults are: <code>rnorm</code>, <code>rt</code>, <code>rlaplace</code> and <code>rs</code>.
<code>rlnorm</code> should be used for multiplicative models (e.g. ETS(M,N,N)).
But any function from Distributions will do the trick if the
appropriate parameters are passed. For example <code>rpois</code> with
<code>lambda=2</code> can be used as well, but might result in weird values.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>probability</code></td>
<td>
<p>Probability of occurrence, used for intermittent data
generation. This can be a vector, implying that probability varies in time
(in TSB or Croston style).</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>...</code></td>
<td>
<p>Additional parameters passed to the chosen randomizer. All the
parameters should be passed in the order they are used in chosen randomizer.
For example, passing just <code>sd=0.5</code> to <code>rnorm</code> function will lead
to the call <code>rnorm(obs, mean=0.5, sd=1)</code>.  ATTENTION! When generating
the multiplicative errors some tuning might be needed to obtain meaningful
data. <code>sd=0.1</code> is usually already a high value for such models. ALSO
NOTE: In case of multiplicative error model, the randomizer will generate
<code>1+e_t</code> error, not <code>e_t</code>. This means that the mean should
typically be equal to 1, not zero.</p>
</td>
</tr>
</table>
<h3>Details</h3>

<p>For the information about the function, see the vignette:
<code>vignette("simulate","smooth")</code>
</p>


<h3>Value</h3>

<p>List of the following values is returned:
</p>

<ul>
<li> <p><code>model</code> - Name of ETS model.
</p>
</li>
<li> <p><code>data</code> - Time series vector (or matrix if <code>nsim&gt;1</code>) of the generated
series.
</p>
</li>
<li> <p><code>states</code> - Matrix (or array if <code>nsim&gt;1</code>) of states. States are in
columns, time is in rows.
</p>
</li>
<li> <p><code>persistence</code> - Vector (or matrix if <code>nsim&gt;1</code>) of smoothing
parameters used in the simulation.
</p>
</li>
<li> <p><code>phi</code> - Value of damping parameter used in time series generation.
</p>
</li>
<li> <p><code>initial</code> - Vector (or matrix) of initial values.
</p>
</li>
<li> <p><code>initialSeason</code> - Vector (or matrix) of initial seasonal coefficients.
</p>
</li>
<li> <p><code>probability</code> - vector of probabilities used in the simulation.
</p>
</li>
<li> <p><code>intermittent</code> - type of the intermittent model used.
</p>
</li>
<li> <p><code>residuals</code> - Error terms used in the simulation. Either vector or matrix,
depending on <code>nsim</code>.
</p>
</li>
<li> <p><code>occurrence</code> - Values of occurrence variable. Once again, can be either
a vector or a matrix...
</p>
</li>
<li> <p><code>logLik</code> - Log-likelihood of the constructed model.
</p>
</li>
</ul>
<h3>Author(s)</h3>

<p>Ivan Svetunkov, <a href="mailto:ivan@svetunkov.ru">ivan@svetunkov.ru</a>
</p>


<h3>References</h3>


<ul>
<li>
<p> Snyder, R. D., 1985. Recursive Estimation of Dynamic Linear Models.
Journal of the Royal Statistical Society, Series B (Methodological) 47 (2), 272-276.
</p>
</li>
<li>
<p> Hyndman, R.J., Koehler, A.B., Ord, J.K., and Snyder, R.D. (2008)
Forecasting with exponential smoothing: the state space approach,
Springer-Verlag. <a href="https://doi.org/10.1007/978-3-540-71918-2">doi:10.1007/978-3-540-71918-2</a>.
</p>
</li>
</ul>
<h3>See Also</h3>

<p><code>es, ts, Distributions</code>
</p>


<h3>Examples</h3>

<pre><code class="language-R">
# Create 40 observations of quarterly data using AAA model with errors from normal distribution
ETSAAA &lt;- sim.es(model="AAA",frequency=4,obs=40,randomizer="rnorm",mean=0,sd=100)

# Create 50 series of quarterly data using AAA model
# with 40 observations each with errors from normal distribution
ETSAAA &lt;- sim.es(model="AAA",frequency=4,obs=40,randomizer="rnorm",mean=0,sd=100,nsim=50)

# Create 50 series of quarterly data using AAdA model
# with 40 observations each with errors from normal distribution
# and smoothing parameters lying in the "admissible" range.
ETSAAA &lt;- sim.es(model="AAA",phi=0.9,frequency=4,obs=40,bounds="admissible",
                  randomizer="rnorm",mean=0,sd=100,nsim=50)

# Create 60 observations of monthly data using ANN model
# with errors from beta distribution
ETSANN &lt;- sim.es(model="ANN",persistence=c(1.5),frequency=12,obs=60,
                  randomizer="rbeta",shape1=1.5,shape2=1.5)
plot(ETSANN$states)

# Create 60 observations of monthly data using MAM model
# with errors from uniform distribution
ETSMAM &lt;- sim.es(model="MAM",persistence=c(0.3,0.2,0.1),initial=c(2000,50),
           phi=0.8,frequency=12,obs=60,randomizer="runif",min=-0.5,max=0.5)

# Create 80 observations of quarterly data using MMM model
# with predefined initial values and errors from the normal distribution
ETSMMM &lt;- sim.es(model="MMM",persistence=c(0.1,0.1,0.1),initial=c(2000,1),
           initialSeason=c(1.1,1.05,0.9,.95),frequency=4,obs=80,mean=0,sd=0.01)

# Generate intermittent data using AAdN
iETSAAdN &lt;- sim.es("AAdN",obs=30,frequency=1,probability=0.1,initial=c(3,0),phi=0.8)

# Generate iETS(MNN) with TSB style probabilities
oETSMNN &lt;- sim.oes("MNN",obs=50,occurrence="d",persistence=0.2,initial=1,
                   randomizer="rlnorm",meanlog=0,sdlog=0.3)
iETSMNN &lt;- sim.es("MNN",obs=50,frequency=12,persistence=0.2,initial=4,
                  probability=oETSMNN$probability)

</code></pre>


</div>