<div class="container">

<table style="width: 100%;"><tr>
<td>saveFiles</td>
<td style="text-align: right;">R Documentation</td>
</tr></table>
<h2>Save objects using <code>.saveObjects</code> in <code>params</code> slot of <code>simInit</code>
</h2>

<h3>Description</h3>

<p>In the <code>simInit()</code> call, a parameter called <code>.saveObjects</code> can be provided in
each module.
This must be a character string vector of all object names to save. These objects will
then be saved whenever a call to <code>saveFiles</code> is made.
</p>


<h3>Usage</h3>

<pre><code class="language-R">saveFiles(sim)
</code></pre>


<h3>Arguments</h3>

<table><tr style="vertical-align: top;">
<td><code>sim</code></td>
<td>
<p>A <code>simList</code> simulation object.</p>
</td>
</tr></table>
<h3>Details</h3>

<p>The file names will be equal to the object name plus <code>time(sim)</code> is
appended at the end.
The files are saved as <code>.rds</code> files, meaning, only one object gets
saved per file.
</p>
<p>For objects saved using this function, the module developer must create save
events that schedule a call to <code>saveFiles</code>.
</p>
<p>If this function is used outside of a module, it will save all files in the
<code>outputs(sim)</code> that are scheduled to be saved at the current time in the <code>simList.</code>
</p>
<p>There are several ways to save objects using <code>SpaDES</code>.
</p>


<h3>Value</h3>

<p>(invisibly) the modified <code>sim</code> object.
invoked for side effect of saving the simulation to file.
</p>


<h3>Model-level saving</h3>

<p>Using the <code>outputs</code> slot in the <code>simInit()</code> call.
See example in <code>simInit()</code>.
This can be convenient because it gives overall control of many modules at a
time, and it gets automatically scheduled during the <code>simInit()</code> call.
</p>


<h3>Module-level saving</h3>

<p>Using the <code>saveFiles</code> function inside a module.
This must be accompanied by a <code>.saveObjects</code> vector or list element in the
<code>params</code> slot in the <code>simList()</code>.
Usually a module developer will create this method for future users of their module.
</p>


<h3>Custom saving</h3>

<p>A module developer can save any object at any time inside their module, using
standard R functions for saving R objects (e.g., <code>save</code> or <code>saveRDS</code>).
This is the least modular approach, as it will happen whether a module user
wants it or not.
</p>


<h3>Note</h3>

<p>It is not possible to schedule separate saving events for each object
that is listed in the <code>.saveObjects</code>.
</p>


<h3>Author(s)</h3>

<p>Eliot McIntire and Alex Chubaty
</p>


<h3>Examples</h3>

<pre><code class="language-R">
if (requireNamespace("SpaDES.tools", quietly = TRUE) &amp;&amp;
    requireNamespace("NLMR", quietly = TRUE)) {
## This will save the "caribou" object at the save interval of 1 unit of time
## in the outputPath location
  outputPath &lt;- file.path(tempdir(), "test_save")
  times &lt;- list(start = 0, end = 1, "month")

  modules &lt;- list("randomLandscapes", "caribouMovement")
  paths &lt;- list(
    modulePath = getSampleModules(tempdir()),
    outputPath = outputPath
  )
 opts &lt;- options("spades.moduleCodeChecks" = FALSE,
                 "spades.useRequire" = FALSE) # not necessary for example

  ## save multiple outputs
  parameters &lt;- list(
    .globals = list(stackName = "landscape"),
    caribouMovement = list(
      .saveObjects = c("caribou", "habitatQuality"),
      .saveInitialTime = 1, .saveInterval = 1
    ),
    randomLandscapes = list(.plots = NA, nx = 20, ny = 20))

  mySim &lt;- simInit(times = times, params = parameters, modules = modules,
                 paths = paths)

  spades(mySim, .plotInitialTime = NA) # plotting not relevant for this example
  dir(outputPath)
  # remove the files
  file.remove(dir(outputPath, full.names = TRUE))

  options(opts) # clean up

}
</code></pre>


</div>