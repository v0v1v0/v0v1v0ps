<div class="container">

<table style="width: 100%;"><tr>
<td>brierscore</td>
<td style="text-align: right;">R Documentation</td>
</tr></table>
<h2>
Calculate Brier Scores And Decompositions
</h2>

<h3>Description</h3>

<p>Calculate Brier scores, average Brier scores by a grouping variable, and
Brier score decompositions for two-alternative forecasts.
</p>


<h3>Usage</h3>

<pre><code class="language-R">brierscore(object, data, group = NULL, decomp = FALSE, bounds = NULL,
           reverse = FALSE, wt = NULL, decompControl = list())
</code></pre>


<h3>Arguments</h3>

<table>
<tr style="vertical-align: top;">
<td><code>object</code></td>
<td>
<p>an object of class "formula", of the form
<code>outcome ~ forecast</code>.  See <code>calcscore()</code> documentation for further details.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>data</code></td>
<td>
<p>an optional data frame or list containing the
variables in the formula.  If not found in <code>data</code>, the
variables are taken from the environment from which
<code>calcscore</code> is called.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>group</code></td>
<td>
<p>the name of a grouping variable within <code>data</code>, which
is used to calculate average Brier score by group.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>decomp</code></td>
<td>
<p>if <code>TRUE</code>, Brier score decompositions are
calculated.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>bounds</code></td>
<td>
<p>a vector of length 2 corresponding to the desired
minimum and maximum Brier score, respectively.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>reverse</code></td>
<td>
<p>if <code>FALSE</code> (default), smaller scores imply better
forecasts.  If <code>TRUE</code>, larger scores imply better forecasts.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>wt</code></td>
<td>
<p>a vector of weights for computing a weighted Brier score. If <code>NULL</code>, the weights are set to 1/n, where n is the number of forecasts (this corresponds to a simple average Brier score).</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>decompControl</code></td>
<td>
<p>a list of additional settings for the Brier
decomposition. See options below.</p>
</td>
</tr>
</table>
<h3>Details</h3>

<p>If <code>decomp=TRUE</code> or <code>group</code> is supplied, the function returns
a list (see value section).  Otherwise, the function returns a numeric
vector containing the Brier score associated with each forecast.
</p>
<p>Some <code>decompControl</code> arguments are specifically designed for forecasting tournaments and may not be useful in other situations. Possible arguments for <code>decompControl</code> include:
</p>

<dl>
<dt>wt</dt>
<dd>
<p>A vector of weights, for performing a weighted Brier
decomposition (could also use the simple <code>wt</code> argument).</p>
</dd>
<dt>qid</dt>
<dd>
<p>A vector of question ids, for use with the <code>qtype</code> argument.</p>
</dd>
<dt>bin</dt>
<dd>
<p>If <code>TRUE</code> (default), forecasts are binned prior to decomposition. If <code>FALSE</code>, the original forecasts are maintained.</p>
</dd>
<dt>qtype</dt>
<dd>
<p>A data frame with columns <code>qid</code>, <code>ord</code>, <code>squo</code>. For each unique question id in the <code>qid</code> argument above, this describes whether or not the question is ordinal (1=yes,0=no) and whether or not the question has a "status quo" interpretation (1=yes,0=no).</p>
</dd>
<dt>scale</dt>
<dd>
<p>Should Brier components be rescaled, such that 1 is
always best and 0 is always worst? Defaults to <code>FALSE</code>.</p>
</dd>
<dt>roundto</dt>
<dd>
<p>To what value should forecasts be rounded (necessary
for Murphy decomposition)? Defaults to
.1, meaning that forecasts are rounded to the nearest .1.</p>
</dd>
<dt>binstyle</dt>
<dd>
<p>Method for ensuring that each forecast sums to 1. If
equal to 1 (default), the smallest forecast is one minus the sum of
the other forecasts. If equal to 2, the forecast furthest from its
rounded value is one minus the sum of other forecasts.</p>
</dd>
<dt>resamples</dt>
<dd>
<p>Desired number of Brier resamples (useful for questions with inconsistent alternatives). Defaults to 0; see Merkle &amp; Hartman reference for more detail.</p>
</dd>
</dl>
<h3>Value</h3>

<p>Depending on input arguments, <code>brierscore</code> may return an object of
class <code>numeric</code> containing raw Brier scores.  It may also return
a list containing the objects below.
</p>
<table>
<tr style="vertical-align: top;">
<td><code>rawscores</code></td>
<td>
<p>an object of class <code>numeric</code> containing raw Brier
scores for each forecast.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>brieravg</code></td>
<td>
<p>an object of class <code>numeric</code> containing average Brier
scores for each unique value of <code>group</code>. If <code>wt</code> was
supplied, this is a weighted sum. Otherwise, it is a simple average
(equal weights summing to 1).</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>decomp</code></td>
<td>
<p>an object of class <code>matrix</code> containing Brier score
decompositions and mean Brier scores for each unique value of <code>group</code>.</p>
</td>
</tr>
</table>
<h3>Author(s)</h3>

<p>Ed Merkle
</p>


<h3>References</h3>

<p>Brier, G. W. (1950).  Verification of forecasts expressed in terms of
probability.  <em>Monthly Weather Review, 78</em>,  1-3.
</p>
<p>Merkle, E. C. &amp; Hartman, R. (2018). Weighted Brier score decompositions
for topically heterogenous forecasting tournaments. <em>Working paper</em>.
</p>
<p>Murphy, A. H. (1973).  A new vector partition of the probability score.
<em>Journal of Applied Meteorology, 12</em>, 595-600.
</p>
<p>Yates, J. F. (1982).  External correspondence: Decompositions of the
mean probability score.  <em>Organizational Behavior and Human
Performance, 30</em>, 132-156.
</p>
<p>Young, R. M. B. (2010). Decomposition of the Brier score for weighted
forecast-verification pairs. <em>Quarterly Journal of the Royal
Meteorological Society, 136</em>, 1364-1370.
</p>


<h3>See Also</h3>

<p><code>calcscore</code>
</p>


<h3>Examples</h3>

<pre><code class="language-R">data("WorldEvents")
## Raw Brier scores
brier1 &lt;- brierscore(answer ~ forecast, data=WorldEvents)
## Raw Brier scores plus group means and decompositions
brier2 &lt;- brierscore(answer ~ forecast, data=WorldEvents,
                     group="forecaster", decomp=TRUE)
## Obtain Brier scores via calcscore
brier3 &lt;- calcscore(answer ~ forecast, data=WorldEvents,
                    param=2, fam="pow")
all.equal(brier1, brier3)
</code></pre>


</div>