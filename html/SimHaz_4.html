<div class="container">

<table style="width: 100%;"><tr>
<td>getpower.method2</td>
<td style="text-align: right;">R Documentation</td>
</tr></table>
<h2>
Calculate power for the Cox proportional hazard model with
time-dependent exposure using method 2
</h2>

<h3>Description</h3>


<p>This functions runs nSim (Number of simulations, specified by the user) Monte Carlo simulations, each time calling tdSim.method2 internally. The function returns a data frame of scenario-specific input parameters- and also output statistical power. The user has the option to append the output to a file with file name specified in the input parameters list.
</p>


<h3>Usage</h3>

<pre><code class="language-R">getpower.method2(nSim = 500, N, duration = 24, scenario, lambda12,
  lambda23 = NULL, lambda13, HR = NULL, exp.prop, rateC, min.futime, 
  min.postexp.futime, output.fn, simu.plot = FALSE)
</code></pre>


<h3>Arguments</h3>

<table>
<tr style="vertical-align: top;">
<td><code>nSim</code></td>
<td>

<p>Number of simulations.
</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>N</code></td>
<td>

<p>Number of subjects to be screened.
</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>duration</code></td>
<td>

<p>Length of the study in months; the default value is 24 (months).
</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>scenario</code></td>
<td>

<p>Any text string inputted by the user as an option to name a scenario that is being simulated. The use can simply put " " if he/she decides to not name the scenario.
</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>lambda12</code></td>
<td>

<p>Lambda12 parameter to control time to exposure.
</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>lambda23</code></td>
<td>

<p>Lambda23 parameter to control time to event after exposure.
</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>lambda13</code></td>
<td>

<p>Lambda13 parameter to control time to event in the control group.
</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>HR</code></td>
<td>

<p>Hazard Ratio. This input is optional. If HR is set and lambda23 is not set, lambda23 = lambda13*HR.
</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>exp.prop</code></td>
<td>

<p>A numeric value between 0 and 1 (not include 0 and 1) that represents the proportion of subjects that are assigned with an exposure.
</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>rateC</code></td>
<td>

<p>Rate of the exponential distribution to generate censoring times.
</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>min.futime</code></td>
<td>

<p>A numeric value that represents minimum follow-up time (in months). The default value is 0, which means no minimum follow-up time is considered. If it has a positive value, this argument will help exclude subjects that only spend a short amount of time in the study.
</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>min.postexp.futime</code></td>
<td>

<p>A numeric value that represents minimum post-exposure follow-up time (in months). The default value is 0, which means no minimum post-exposure follow-up time is considered. If it has a positive value, this argument will help exclude subjects that only spend a short amount of time in the study after their exposure.
</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>output.fn</code></td>
<td>

<p>A .csv filename to write in the output. If the filename does not exist, the function will create a new .csv file for the output.
</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>simu.plot</code></td>
<td>

<p>A logical value indicating whether or not to output an incidence plot.The default value is FALSE.
</p>
</td>
</tr>
</table>
<h3>Details</h3>

<p>The function calculates power based on the Cox regression model, which calls the coxph function from the survival library using the the simulated data from tdSim.method2.
</p>


<h3>Value</h3>

<p>A data.frame object with columns corresponding to
</p>
<table>
<tr style="vertical-align: top;">
<td><code>i_scenario</code></td>
<td>
<p>Scenario name specified by the user</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>i_N</code></td>
<td>
<p>Number of subjects needs to be screened, specified by the user</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>i_min.futime</code></td>
<td>
<p>Minimum follow-up time to be considered, specified by the user</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>i_min.postexp.futime</code></td>
<td>
<p>Minimum post-exposure follow-up time to be
considered, specified by the user</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>i_exp.prop</code></td>
<td>
<p>Exposure rate specified by the user</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>i_lambda12</code></td>
<td>
<p>Lambda12 parameter to control time to exposure</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>i_lambda23</code></td>
<td>
<p>Lambda23 parameter to control time to event after exposure</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>i_lambda13</code></td>
<td>
<p>Lambda13 parameter to control time to event in the control group</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>i_rateC</code></td>
<td>
<p>Rate of the exponential distribution to generate censoring times.
Calculated from median time to censoring, which is specified by the user.
i_beta  Input value of regression coefficient (log hazard ratio)</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>N_eff</code></td>
<td>
<p>Simulated number of evaluable subjects, which is the resulting number of
subjects with or without considering minimum follow-up time and/or minimum post-exposure follow-up time</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>N_effexp_p</code></td>
<td>
<p>Simulated proportion of exposed subjects with or without
considering minimum follow-up time and/or minimum
post-exposure follow-up time</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>bhat</code></td>
<td>
<p>Simulated value of regression coefficient (log hazard ratio)</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>HR</code></td>
<td>
<p>Simulated value of hazard ratio</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>d</code></td>
<td>
<p>Simulated number of events in total</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>d_c</code></td>
<td>
<p>Simulated number of events in control group</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>d_exp</code></td>
<td>
<p>Simulated number of events in exposed group</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>mst_c</code></td>
<td>
<p>Simulated median survival time in control group</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>mst_exp</code></td>
<td>
<p>Simulated median survival time in exposed group</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>pow</code></td>
<td>
<p>Simulated statistical power from the Cox regression model on data with
time-dependent exposure</p>
</td>
</tr>
</table>
<h3>Author(s)</h3>

<p>Danyi Xiong, Teeranan Pokaprakarn, Hiroto Udagawa, Nusrat Rabbee <br>
Maintainer: Nusrat Rabbee &lt;rabbee@berkeley.edu&gt;
</p>


<h3>Examples</h3>

<pre><code class="language-R"># We recommend setting nSim to at least 500. It is set to 10 in the example to
# reduce run time for CRAN submission.

# Run 10 simulations. Each time simulate a dataset of 600 subjects

ret &lt;- getpower.method2(nSim=10, N=600, duration=24, scenario="test",
  lambda12=1.3, lambda23=0.04, lambda13=0.03, HR=NULL,exp.prop=0.2, rateC=0.05,
  min.futime=4, min.postexp.futime=4,output.fn="database.csv", simu.plot=FALSE) 
</code></pre>


</div>