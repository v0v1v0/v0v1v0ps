<div class="container">

<table style="width: 100%;"><tr>
<td>dive</td>
<td style="text-align: right;">R Documentation</td>
</tr></table>
<h2>Define a Dive Profile</h2>

<h3>Description</h3>

<p>Define a dive profile.
</p>


<h3>Usage</h3>

<pre><code class="language-R">  dive(..., begin=0, end=0, tanklist=NULL)
</code></pre>


<h3>Arguments</h3>

<table>
<tr style="vertical-align: top;">
<td><code>...</code></td>
<td>

<p>Any number of arguments, specifying a sequence of events
that make up the dive. The arguments may specify depths,
time spent at each depth, ascent or descent rates,
and gas switches. See Details.
</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>begin, end</code></td>
<td>

<p>The depths at the start and finish of the dive (normally zero
indicating that the dive starts and finishes at the surface)
or <code>NA</code>.
</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>tanklist</code></td>
<td>

<p>Optional list of the gases contained in each tank,
for a dive with multiple tanks.
</p>
</td>
</tr>
</table>
<h3>Details</h3>

<p>This function creates 
an object of class <code>"dive"</code> which represents a scuba dive.
The dive profile is assumed to be piecewise linear, that is,
the graph of depth against time is a broken straight line. 
Dives are assumed to start and finish at the surface.
</p>
<p>The arguments <code>...</code> specify a succession of events
that make up the dive. Each argument can be
</p>

<dl>
<dt>a vector of length 2</dt>
<dd>
<p>interpreted as <code>c(depth, duration)</code>
where <code>depth</code> gives the depth in metres
and <code>duration</code> the length of stay at this depth, in minutes.
</p>
</dd>
<dt>a single number</dt>
<dd>
<p>interpreted as a waypoint depth in metres. 
The diver will ascend or descend to this depth, at the
current default rate of ascent or descent.
</p>
</dd>
<dt>an object of class <code>"gas"</code>
</dt>
<dd>
<p>specifying a breathing gas. Such objects are
created by the functions <code>nitrox</code> and <code>trimix</code>.
The diver switches to this gas.
</p>
</dd>
<dt>an argument of the form <code>tank=n</code>
</dt>
<dd>
<p>specifying
a switch to another tank or cylinder of breathing gas.
This is available only when the tanks used in the dive
have been specified by the argument <code>tanklist</code>.
The value <code>n</code> should be a valid index for this list
(either a serial number in the tank list or a character string
matching one of the names in the tank list).
</p>
</dd>
<dt>an ascent/descent rate object</dt>
<dd>
<p>created by the functions <code>ascent</code> or
<code>descent</code>. This resets the default
rate of ascent or descent.
</p>
</dd>
<dt>a data frame with 2 columns</dt>
<dd>
<p>containing a dive profile, usually uploaded from a dive computer. The
first column should contain the <em>elapsed</em> times, and the second
column contains the depths (in metres) measured at these times.
The column of elapsed times can be either a character vector
containing times in minutes-and-seconds format <code>mm:ss</code>,
or an integer vector containing elapsed times in <b>seconds</b>,
or a vector of class <code>difftime</code>
representing elapsed times in any time unit.
In this case you probably want to set the arguments
<code>begin=NA</code> and <code>end=NA</code>.
</p>
</dd>
<dt>an object of class <code>"dive"</code>
</dt>
<dd>
<p>representing a dive profile. This allows the user to paste
dive profiles together.
</p>
</dd>
</dl>
<p>Dives are assumed to start and finish at the surface. This can be changed
by specifying values for <code>begin</code> and <code>end</code>. See the
section on Start and End of Dive.
</p>
<p>Initially the descent rate is set to 30 metres per minute,
the ascent rate is 18 metres per minute, and the breathing gas is
air. These settings may be changed during the dive
by the <code>...</code> arguments.
</p>
<p>A dive object may include
periods spent at the surface (depth zero) and may therefore represent
a succession of dives separated by surface intervals. 
</p>
<p>Once an object of class <code>"dive"</code> has been created,
it can be plotted and printed (using <code>plot.dive</code>
and <code>print.dive</code>). The nitrogen saturation can be
computed using <code>haldane</code> and the
cumulative oxygen toxicity using <code>oxtox</code>.
</p>


<h3>Value</h3>

<p>An object of class <code>"dive"</code> describing the dive profile
and the breathing gases used.
</p>


<h3>Start and End of Dive</h3>

<p>To make it easy to specify simple dive profiles,
the algorithm fills in some information.
If the diving depths specified in the arguments <code>...</code> do not
start at the surface (depth zero), then by default, the algorithm
assumes that the dive did start at the surface, and it
adds an extra dive segment at the beginning of the dive.
The diver is assumed to descend from the surface, at the standard
descent rate, to the first depth specified.
Thus <code>dive(c(10,25))</code> means that the diver will first descend
from the surface to 10 metres at a rate of 30 metres per minute,
remain there for 25 minutes, then ascend to the surface
at a rate of 18 metres per minute.
</p>
<p>To change this behaviour, set a different value for the argument <code>begin</code>.
If the dive really started at a nonzero depth, e.g. a dry habitat at 3 metres,
set <code>begin=3</code>. If one of the arguments <code>...</code> is a
data frame uploaded from a dive computer, then set <code>begin=NA</code>,
so that that the dive will start at the first depth
specified in this data frame.
</p>
<p>Similarly, if the last depth specified by the arguments <code>...</code>
is a depth below the surface (depth greater than zero), then by
default the diver is assumed to ascend from this last depth to
the surface, at the standard ascent rate. To suppress this altogether,
set <code>end=NA</code>. To specify a different final depth for the dive,
set a different value for <code>end</code>.
</p>


<h3>Modifying a dive object</h3>

<p>The depths and elapsed times at each waypoint during the dive
can be extracted and changed using <code>depths.dive</code>
and <code>times.dive</code>. 
</p>
<p>Dives can be cut into pieces using <code>chop.dive</code>
and pasted together using <code>dive</code>.
</p>
<p>It is possible to alter the <em>breathing gases</em> used in a dive <code>d</code>,
yielding a new dive object. 
This makes it possible to study the effect of conducting the same
dive profile with different breathing gases.
You can change the specification of the breathing gas (or gases) by
<code>tanklist(d) &lt;- value</code>.
In a multiple-tank dive you can change the periods when each tank was used,
by <code>whichtank(d) &lt;- value</code>.
</p>


<h3>Warnings</h3>

<p>Not suitable for representing altitude dives. 
</p>


<h3>Author(s)</h3>

<p>Adrian Baddeley <a href="mailto:Adrian.Baddeley@curtin.edu.au">Adrian.Baddeley@curtin.edu.au</a>.</p>


<h3>See Also</h3>

<p><code>nitrox</code>,
<code>ascent</code>,
<code>descent</code>,
<code>haldane</code>,
<code>plot.dive</code>,
<code>times.dive</code>,
<code>durations.dive</code>,
<code>depths.dive</code>,
<code>chop.dive</code>,
<code>tanklist</code>,
<code>whichtank</code>.
</p>


<h3>Examples</h3>

<pre><code class="language-R">  # Dive to 25 m for 20 min followed by safety stop at 5 metres for 3 min
  d &lt;- dive(c(25,20),c(5,3))
  plot(d)

  # Bounce dive to 20 metres
  d &lt;- dive(20)

  # Two dives separated by a one-hour surface interval
  d &lt;- dive(c(30,15),c(9,2),c(5,5),c(0,60),c(12,60),c(5,5))

  # ASCENT RATES
  # Ascent rate 18 m/min below 9 metres, 6m/min above 9 metres
  d &lt;- dive(c(30, 12), ascent(18), 9, ascent(6), c(5,3))

  # UPLOADED DIVE PROFILE
  data(baron)
  pro &lt;- baron[, 1:2]
  d &lt;- dive(pro)
  d &lt;- dive(pro, begin=NA, end=NA)
  plot(d)

  # GAS USE
  # 30-metre dive on Nitrox 32
  d &lt;- dive(nitrox(0.32), c(30,20), c(5,5))

  # GAS SWITCHING
  # Dive to 18 m for 30 min on air,
  # switch to Nitrox 36, ascend to 5 metres, safety stop
  d &lt;- dive(c(18, 30), nitrox(0.36), c(5,3))
  # Same as above, but ascend to 5 m on air, then switch gas
  d &lt;- dive(c(18, 30), 5, nitrox(0.36), c(5,3))

  # SWITCHING TO SPECIFIC TANKS
  d &lt;- dive(tanklist=list(main=air, deco=nitrox(0.50)),
            tank="main", c(30, 20), 5, tank="deco", c(5,10))

  # Descend to 5 metres on pure oxygen, switch to Trimix,
  # descend to 30 metres, remain 40 minutes, ascend to 6 metres,
  # switch to pure oxygen, ascend to 5 metres, decompress 10 minutes,
  # surface and continue breathing pure oxygen for 10 minutes

  d &lt;- dive(tanklist=list(travel=trimix(0.15, 0.5), deco=nitrox(1)),
            tank="deco", 5, tank="travel", c(30,40), 6, tank="deco",
            c(5,10), c(0,10))

</code></pre>


</div>