<div class="container">

<table style="width: 100%;"><tr>
<td>get_similar_stories</td>
<td style="text-align: right;">R Documentation</td>
</tr></table>
<h2>Find similar stories to a given story</h2>

<h3>Description</h3>

<p><a href="https://lifecycle.r-lib.org/articles/stages.html#maturing"><img src="../help/figures/lifecycle-maturing.svg" alt="[Maturing]"></a>
</p>
<p><code>get_similar_stories</code> calculates the top <code>n</code> most thematically
similar stories to a given story.
</p>


<h3>Usage</h3>

<pre><code class="language-R">get_similar_stories(
  query_story,
  background_collection = NULL,
  top_n = 10,
  weights = list(choice = 3, major = 2, minor = 1),
  explicit = TRUE,
  min_freq = 1,
  blacklist = NULL,
  metric = c("hgt", "tfidf")
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr style="vertical-align: top;">
<td><code>query_story</code></td>
<td>
<p>A <code>Story()</code> class object defining a story of interest.
Thematically similar stories to this one will be returned.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>background_collection</code></td>
<td>
<p>A <code>Collection()</code> class object the stories in
which to search for similar stories to the <code>query_story</code> input story.
</p>
<p>If <code>NULL</code>, the collection of all stories in the actively loaded
<abbr><span class="acronym">LTO</span></abbr> version is used.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>top_n</code></td>
<td>
<p>Maximum number of similar stories to report. The default is
<code>top_n=10</code>.
</p>
<p>If <code>Inf</code>, all stories in the background collection are reported.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>weights</code></td>
<td>
<p>A list assigning nonnegative weights to choice, major, and
minor theme levels. The default weighting
<code>list(choice = 3, major = 2, minor = 1)</code> counts each <em>choice</em> usage
three times, each <em>major</em> theme usage twice, and each <em>minor</em>
theme usage once. Use the uniform weighting
<code>list(choice = 1, major = 1, minor = 1)</code> weights theme usages equally
regardless of level. At least one weight must be positive.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>explicit</code></td>
<td>
<p>Set to <code>FALSE</code> to include ancestor themes of the explicit
thematic annotations.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>min_freq</code></td>
<td>
<p>Drop themes occurring less than this number of times from
the analysis. The default <code>min_freq=1</code> results in no themes are discarded.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>blacklist</code></td>
<td>
<p>A <code>Themeset()</code> class object. A themeset containing themes
to be dropped from the analysis.
</p>
<p>If <code>NULL</code>, no themes are filtered.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>metric</code></td>
<td>
<p>A character vector specifying the choice of weighting to use
in the <em>cosine similarity</em> measure used to evaluate story thematic
similarity.
Use <code>metric = "hgt"</code> for hypergeometric test P-value weights and
<code>metric = "tfidf"</code> for TF-IDF weights.
</p>
<p>The default specification of <code>metric = c("hgt", "tfidf")</code> results in
hypergeometric test P-values being used as weights.</p>
</td>
</tr>
</table>
<h3>Value</h3>

<p>Returns a <code>tibble</code> with <code>top_n</code> rows (stories)
and 5 columns:
</p>

<table>
<tr>
<td style="text-align: left;">
<code>story_id</code>: </td>
<td style="text-align: left;"> <code>n</code>-th most thematically similar story to the query
story</td>
</tr>
<tr>
<td style="text-align: left;">
<code>title</code>: </td>
<td style="text-align: left;"> Reference story title</td>
</tr>
<tr>
<td style="text-align: left;">
<code>description</code>: </td>
<td style="text-align: left;"> Reference story description</td>
</tr>
<tr>
<td style="text-align: left;">
<code>score</code>: </td>
<td style="text-align: left;"> Cosine similarity score with hypergeometric test weights
(if <code>metric = "hgt"</code>) or TF-IDF weights (if <code>metric = "tfidf"</code>).</td>
</tr>
<tr>
<td style="text-align: left;">
<code>common_themes</code>: </td>
<td style="text-align: left;"> List of themes common to both the query and
reference story</td>
</tr>
<tr>
<td style="text-align: left;">
</td>
</tr>
</table>
<h3>References</h3>

<p>Paul Sheridan, Mikael Onsjö, Claudia Becerra, Sergio Jimenez, Georg Dueñas
(2019). <em>An Ontology-Based Recommender System with an Application to
the Star Trek Television Franchise</em>. <em>Future Internet</em>, 11(9), 182.
DOI: <a href="https://doi.org/10.3390/fi11090182">doi:10.3390/fi11090182</a>
</p>


<h3>Examples</h3>

<pre><code class="language-R">## Not run: 
# Retrieve the top 10 most similar stories to the classic "The Twilight
# Zone" series episode "Nightmare at 20,000 Feet" (1959):
set_lto("demo")
query_story &lt;- Story$new(story_id = "tz1959e5x03")
result_tbl &lt;- get_similar_stories(query_story)
result_tbl

# Retrieve the top 10 most similar stories to the classic "The Twilight 
# Zone" series episode "Nightmare at 20,000 Feet" (1959) without taking
# minor themes into account:
set_lto("demo")
query_story &lt;- Story$new(story_id = "tz1959e5x03")
result_tbl &lt;- get_similar_stories(query_story, weights = list(choice = 3, major = 2, minor = 0))
result_tbl

# Retrieve the top 10 most similar stories to the classic "The Twilight 
# Zone" series episode "Nightmare at 20,000 Feet" (1959) when implicitly
# featured themes are included in the similarity calculation:
set_lto("demo")
query_story &lt;- Story$new(story_id = "tz1959e5x03")
result_tbl &lt;- get_similar_stories(query_story, explicit = FALSE)
result_tbl

## End(Not run)
</code></pre>


</div>