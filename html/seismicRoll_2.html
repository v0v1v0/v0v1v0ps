<div class="container">

<table style="width: 100%;"><tr>
<td>findOutliers</td>
<td style="text-align: right;">R Documentation</td>
</tr></table>
<h2>Outlier Detection with a Rolling Hampel Filter</h2>

<h3>Description</h3>

<p>A wrapper for the roll_hampel() function that counts outliers using either a user specified threshold
value or a threshold value based on the statistics of the incoming data.
</p>


<h3>Usage</h3>

<pre><code class="language-R">findOutliers(
  x,
  n = 41,
  thresholdMin = 10,
  selectivity = NA,
  increment = 1,
  fixedThreshold = TRUE
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr style="vertical-align: top;">
<td><code>x</code></td>
<td>
<p>an <span style="font-family: Courier New, Courier; color: #666666;"><b>R</b></span> numeric vector</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>n</code></td>
<td>
<p>integer window size</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>thresholdMin</code></td>
<td>
<p>initial value for outlier detection</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>selectivity</code></td>
<td>
<p>value between [0-1] used in determining outliers, or <code>NA</code> if <code>fixedThreshold=TRUE</code>.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>increment</code></td>
<td>
<p>integer shift to use when sliding the window to the next location</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>fixedThreshold</code></td>
<td>
<p>logical specifying whether outlier detection uses <code>selectivity</code>  (see below)</p>
</td>
</tr>
</table>
<h3>Details</h3>

<p>The <code>thresholdMin</code> level is similar to a sigma value for normally distributed data.
Hampel filter values above 6 indicate a data value that is extremely unlikely
to be part of a normal distribution  (~ 1/500 million) and therefore very likely to be an outlier. By
choosing a relatively large value for <code>thresholdMin</code> we make it less likely that we
will generate false positives. False positives can include high frequency environmental noise.
</p>
<p>With the default setting of <code>fixedThreshold=TRUE</code> any value above the threshold is considered an outlier
and the <code>selectivity</code> is ignored.
</p>
<p>The <code>selectivity</code> is a value between 0 and 1 and is used to generate an appropriate 
threshold for outlier detection based on the statistics of the incoming data. A lower value
for <code>selectivity</code> will result in more outliers while a value closer to 1.0 will result in 
fewer. If <code>fixedThreshold=TRUE</code>, <code>selectivity</code> may have a value of <code>NA</code>.
</p>
<p>When the user specifies <code>fixedThreshold=FALSE</code>, the <code>thresholdMin</code> and <code>selectivity</code>
parameters work like squelch and volume on a CB radio: <code>thresholdMin</code> sets a noise threshold 
below which you don't want anything returned while <code>selectivity</code> adjusts the number of points defined as outliers
by setting a new threshold defined by the maximum value of <code>roll_hampel</code> multiplied by <code>selectivity</code>.
</p>
<p><code>n</code>, the windowSize, is a parameter that is passed to <code>roll_hampel()</code>.
</p>
<p><b>The default value of <code>increment=1</code> should not be changed.</b> Outliers are defined
as individual points that stand apart from their neighbors. Applying the Hampel filter to
every other point by using <code>increment</code> &gt; 1 will invariably miss some of the outliers.
</p>


<h3>Value</h3>

<p>A vector of indices associated with outliers in the incoming data <code>x</code>.
</p>


<h3>See Also</h3>

<p><code>roll_hampel</code>
</p>


<h3>Examples</h3>

<pre><code class="language-R"># Noisy sinusoid with outliers
a &lt;- jitter(sin(0.1*seq(1e4)),amount=0.2)
indices &lt;- sample(seq(1e4),20)
a[indices] &lt;- a[indices]*10

# Outlier detection should identify many of these altered indices
sort(indices)
findOutliers(a)
</code></pre>


</div>