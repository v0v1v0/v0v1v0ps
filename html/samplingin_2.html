<div class="container">

<table style="width: 100%;"><tr>
<td>doSampling</td>
<td style="text-align: right;">R Documentation</td>
</tr></table>
<h2>Select Samples Given its Parameters</h2>

<h3>Description</h3>

<p>Samples selection using systematic or PPS (Probability Proportional to Size) sampling method.
</p>


<h3>Usage</h3>

<pre><code class="language-R">doSampling(
  pop,
  alloc,
  nsample,
  type,
  strata = NULL,
  ident = c("kdprov", "kdkab"),
  implicitby = NULL,
  method = "systematic",
  auxVar = NA,
  seed = 1,
  predetermined_rn = NULL,
  is_secondary = FALSE,
  verbose = TRUE
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr style="vertical-align: top;">
<td><code>pop</code></td>
<td>
<p>pop dataframe</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>alloc</code></td>
<td>
<p>allocation dataframe</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>nsample</code></td>
<td>
<p>variable on alloc df as allocation sample</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>type</code></td>
<td>
<p>type value for sample classification ('U' = Primary Samples, 'P' = Secondary Samples)</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>strata</code></td>
<td>
<p>strata variable, must available on both pop and alloc dataframe</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>ident</code></td>
<td>
<p>group by on allocation dataframe</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>implicitby</code></td>
<td>
<p>variable used as implicit stratification</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>method</code></td>
<td>
<p>method of sampling : <code>"systematic"</code> (the default), <code>"srs"</code> or <code>"pps"</code></p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>auxVar</code></td>
<td>
<p>auxiliary variable for pps sampling (<code>method = "pps"</code>)</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>seed</code></td>
<td>
<p>seed</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>predetermined_rn</code></td>
<td>
<p>predetermined random number variable on allocation dataframe, the default value is NULL, random number will be generated randomly</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>is_secondary</code></td>
<td>
<p>if the value is <code>TRUE</code>, it will maintains existing primary samples and selects units that have not been selected as samples (<code>FALSE</code> as default)</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>verbose</code></td>
<td>
<p>verbose (<code>TRUE</code> as default)</p>
</td>
</tr>
</table>
<h3>Value</h3>

<p>list of population data (<code>"pop"</code>), selected samples (<code>"sampledf"</code>), and details of sampling process (<code>"details"</code>)
</p>


<h3>Examples</h3>

<pre><code class="language-R">

library(samplingin)
library(magrittr)
library(dplyr)

# Simple Random Sampling (SRS)
dtSampling_srs = doSampling(
   pop         = pop_dt
   , alloc     = alokasi_dt
   , nsample   = "n_primary"
   , type      = "U"
   , ident     = c("kdprov")
   , method    = "srs"
   , auxVar    = "Total"
   , seed      = 7892
)

# Population data with flag sample
pop_dt = dtSampling_srs$pop

# Selected Samples
dsampel = dtSampling_srs$sampledf

# Details of sampling process
rincian = dtSampling_srs$details

# PPS Sampling
dtSampling_pps = doSampling(
   pop         = pop_dt
   , alloc     = alokasi_dt
   , nsample   = "n_primary"
   , type      = "U"
   , ident     = c("kdprov")
   , method    = "pps"
   , auxVar    = "Total"
   , seed      = 1234
)

# Population data with flag sample
pop_dt = dtSampling_pps$pop

# Selected Samples
dsampel = dtSampling_pps$sampledf

# Details of sampling process
rincian = dtSampling_pps$details

# Systematic Sampling
dtSampling_sys = doSampling(
   pop         = pop_dt
   , alloc     = alokasi_dt
   , nsample   = "n_primary"
   , type      = "U"
   , ident     = c("kdprov")
   , method    = "systematic"
   , seed      = 4321
)

# Population data with flag sample
pop_dt = dtSampling_sys$pop

# Selected Samples
dsampel = dtSampling_sys$sampledf

# Details of sampling process
rincian = dtSampling_sys$details

# Systematic Sampling (Secondary Samples)

alokasi_dt_p = alokasi_dt %&gt;%
   mutate(n_secondary = 2 * n_primary)

dtSampling_sys_p = doSampling(
   pop           = dtSampling_sys$pop
   , alloc       = alokasi_dt_p
   , nsample     = "n_secondary"
   , type        = "P"
   , ident       = c("kdprov")
   , method      = "systematic"
   , seed        = 6789
   , is_secondary = TRUE
)

# Population data with flag sample
pop_dt = dtSampling_sys_p$pop

# Selected Samples
dsampel = dtSampling_sys_p$sampledf

# Details of sampling process
rincian = dtSampling_sys_p$details

# Systematic Sampling with predetermined random number (predetermined_rn parameter)

alokasi_dt_rn = alokasi_dt %&gt;% rowwise() %&gt;% mutate(ar = runif(n(),0,1)) %&gt;% ungroup

dtSampling_sys = doSampling(
   pop         = pop_dt
   , alloc     = alokasi_dt_rn
   , nsample   = "n_primary"
   , type      = "U"
   , ident     = c("kdprov")
   , method    = "systematic"
   , predetermined_rn = "ar"
   , seed      = 4321
)

# Population data with flag sample
pop_dt = dtSampling_sys$pop

# Selected Samples
dsampel = dtSampling_sys$sampledf

# Details of sampling process
rincian = dtSampling_sys$details

</code></pre>


</div>