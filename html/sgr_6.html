<div class="container">

<table style="width: 100%;"><tr>
<td>partition.replacement</td>
<td style="text-align: right;">R Documentation</td>
</tr></table>
<h2>
Internal function.
</h2>

<h3>Description</h3>

<p>This function allows to set different replacement distributions for different subsets of cells in the data matrix.
</p>


<h3>Usage</h3>

<pre><code class="language-R">partition.replacement(Dx, PM, Q = NULL, Pparm = NULL,
        fake.model = NULL,p = NULL)
</code></pre>


<h3>Arguments</h3>

<table>
<tr style="vertical-align: top;">
<td><code>Dx</code></td>
<td>
<p>Data frame or matrix to be replaced.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>PM</code></td>
<td>
<p>Partition matrix with size <code>dim(Dx)</code>. See details.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>Q</code></td>
<td>
<p>Max value in the discrete r.v. range: <code class="reqn">1, \ldots, Q</code>.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>Pparm</code></td>
<td>
<p>List of replacement parameters for each class in the replacement partition. See details.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>fake.model</code></td>
<td>
<p>A character string indicating the model for the conditional replacement distribution, see <code>model.fake.par</code>.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>p</code></td>
<td>
<p>Overall probability of replacement. Must be a matrix with <code class="reqn">P</code> rows and  two columns. See details.
</p>
</td>
</tr>
</table>
<h3>Details</h3>

<p><code>PM</code> has size <code>dim(Dx)</code> and contains a
numeric code for each distinct class in the partition.
If a cell of the partition matrix <code>PM</code> contains 
<code>0</code>, then the corresponding <code>Dx</code> cell value is not modified (no replacements condition class).
</p>
<p><code>Pparm</code> is a list containing three elements. Each element is a <code class="reqn">P\times 2</code> matrix where <code class="reqn">P</code> is the total number of classes in the partition (see examples for further details). 
</p>
<p><code>p</code>: Overall probability of replacement: <code>p[,1]</code> indicates the faking good probability, <code>p[,2]</code> indicates the faking bad probability.
</p>
<p><code>gam</code>:  Gamma parameter: <code>gam[,1]</code> and <code>gam[,2]</code>
indicate the faking good and the faking bad parameters for the
lower bound <code>a</code>.
</p>
<p><code>del</code>: Delta parameter: <code>del[,1]</code> and <code>del[,2]</code> 
indicate the faking good and the faking bad parameters for the
upper bound <code>b</code>.
</p>
<p>Note that it is possible to define a faking model using the <code>fake.model</code> assignment. In such cases the user must specify also the overall probability of replacement using parameter <code>p</code>. 
</p>


<h3>Value</h3>

<p>Returns the fake data matrix. 
</p>


<h3>Author(s)</h3>

<p>Massimiliano Pastore
</p>


<h3>See Also</h3>

<p><code>rdatarepl</code>, <code>replacement.matrix</code>
</p>


<h3>Examples</h3>

<pre><code class="language-R">require(MASS)
set.seed(20130207)
R &lt;- matrix(c(1,.3,.3,1),2,2)
Dx &lt;- rdatagen(n=20,R=R,Q=5)$data

## partition matrix
PM &lt;- matrix(0,nrow(Dx),ncol(Dx))
PM[3:10,2] &lt;- 1
PM[3:10,1] &lt;- 1
partition.replacement(Dx,PM) # warning! zero replacements

## using fake.model
partition.replacement(Dx,PM,fake.model="uninformative",p=matrix(c(.3,.2),ncol=2))

###
p &lt;- c(.5,0)
gam &lt;- c(1,1)
del &lt;- c(1,1)
Pparm &lt;- list(p=p,gam=gam,del=del)
partition.replacement(Dx,PM,Pparm=Pparm) 

### another partition
PM[11:15,2] &lt;- 2
(Pparm &lt;- list(p=matrix(c(0,.5,.5,0),2,2),
      gam=matrix(c(1,4,1,4),2,2),del=matrix(c(1,2,1,2),2,2)))
partition.replacement(Dx,PM,Pparm=Pparm) 


</code></pre>


</div>