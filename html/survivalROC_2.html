<div class="container">

<table style="width: 100%;"><tr>
<td>survivalROC</td>
<td style="text-align: right;">R Documentation</td>
</tr></table>
<h2>Time-dependent ROC curve estimation from censored survival data</h2>

<h3>Description</h3>

<p>This function creates time-dependent ROC curve from censored survival
data using the Kaplan-Meier (KM) or Nearest Neighbor Estimation (NNE)
method of Heagerty, Lumley and Pepe, 2000</p>


<h3>Usage</h3>

<pre><code class="language-R">survivalROC(Stime, status, marker, entry = NULL, predict.time, cut.values =
NULL, method = "NNE", lambda = NULL, span = NULL, window =
"symmetric")
</code></pre>


<h3>Arguments</h3>

<table>
<tr style="vertical-align: top;">
<td><code>Stime</code></td>
<td>
<p>Event time or censoring time for subjects</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>status</code></td>
<td>
<p>Indicator of status, 1 if death or event, 0 otherwise </p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>marker</code></td>
<td>
<p>Predictor or marker value</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>entry</code></td>
<td>
<p>Entry time for the subjects</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>predict.time</code></td>
<td>
<p>Time point of the ROC curve</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>cut.values</code></td>
<td>
<p>marker values to use as a cut-off for
calculation of sensitivity and specificity</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>method</code></td>
<td>
<p>Method for fitting joint distribution of (marker,t), either
of KM or NNE, the default method is NNE</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>lambda</code></td>
<td>
<p>smoothing parameter for NNE</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>span</code></td>
<td>
<p>Span for the NNE, need either lambda or span for NNE</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>window</code></td>
<td>
<p>window for NNE, either of symmetric or asymmetric</p>
</td>
</tr>
</table>
<h3>Details</h3>

<p> Suppose we have censored survival data along with a baseline
marker value and  we want to see how well the marker predicts the 
survival time for the subjects in the dataset. In particular,
suppose we have survival times in days and  we want to see how well the
marker predicts the one-year survival (predict.time=365 days). This
function roc.KM.calc(), returns the unique marker values, TP (True
Positive), FP (False Positive),  Kaplan-Meier survival
estimate  corresponding to the  time point of interest (predict.time)
and AUC (Area Under (ROC) Curve) at the time point of interest. 
</p>


<h3>Value</h3>

<p>Returns a list of the following items:
</p>
<table>
<tr style="vertical-align: top;">
<td><code>cut.values</code></td>
<td>
<p>unique marker values for calculation of TP and FP</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>TP</code></td>
<td>
<p>True Positive corresponding to the cut offs in marker</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>FP</code></td>
<td>
<p>False Positive corresponding to the cut offs in marker</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>predict.time</code></td>
<td>
<p>time point of interest</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>Survival</code></td>
<td>
<p>Kaplan-Meier survival estimate at predict.time</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>AUC</code></td>
<td>
<p>Area Under (ROC) Curve at time predict.time</p>
</td>
</tr>
</table>
<h3>Author(s)</h3>

<p>Patrick J. Heagerty </p>


<h3>References</h3>

<p>Heagerty, P.J., Lumley, T., Pepe, M. S. (2000)
Time-dependent ROC Curves for Censored Survival Data and a Diagnostic
Marker <em>Biometrics</em>, <b>56</b>, 337 â€“ 344</p>


<h3>Examples</h3>

<pre><code class="language-R">data(mayo)
nobs &lt;- NROW(mayo)
cutoff &lt;- 365
  ## MAYOSCORE 4, METHOD = NNE
  Mayo4.1= survivalROC(Stime=mayo$time,  
    status=mayo$censor,      
    marker = mayo$mayoscore4,     
    predict.time = cutoff,span = 0.25*nobs^(-0.20) )
  plot(Mayo4.1$FP, Mayo4.1$TP, type="l", xlim=c(0,1), ylim=c(0,1),   
  xlab=paste( "FP", "\n", "AUC = ",round(Mayo4.1$AUC,3)), 
  ylab="TP",main="Mayoscore 4, Method = NNE \n  Year = 1")
  abline(0,1)

  ## MAYOSCORE 4, METHOD = KM
  Mayo4.2= survivalROC(Stime=mayo$time,  
    status=mayo$censor,      
    marker = mayo$mayoscore4,     
    predict.time =  cutoff, method="KM")
  plot(Mayo4.2$FP, Mayo4.2$TP, type="l", xlim=c(0,1), ylim=c(0,1),   
  xlab=paste( "FP", "\n", "AUC = ",round(Mayo4.2$AUC,3)), 
  ylab="TP",main="Mayoscore 4, Method = KM \n Year = 1")
  abline(0,1)
  </code></pre>


</div>