<div class="container">

<table style="width: 100%;"><tr>
<td>simGG.simtvc</td>
<td style="text-align: right;">R Documentation</td>
</tr></table>
<h2>Plot simulated time-interactive hazard ratios or stratified time-interactive
hazard rates from Cox Proportional Hazards Models</h2>

<h3>Description</h3>

<p><code>simGG.simtvc</code> uses ggplot2 to plot the simulated hazards from a
<code>simtvc</code> class object created by <code>coxsimtvc</code> using
ggplot2.
</p>


<h3>Usage</h3>

<pre><code class="language-R">## S3 method for class 'simtvc'
simGG(
  obj,
  from = NULL,
  to = NULL,
  xlab = NULL,
  ylab = NULL,
  title = NULL,
  method = "auto",
  spalette = "Set1",
  legend = "legend",
  leg.name = "",
  lsize = 1,
  psize = 1,
  alpha = 0.2,
  type = "ribbons",
  ...
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr style="vertical-align: top;">
<td><code>obj</code></td>
<td>
<p>a <code>simtvc</code> class object</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>from</code></td>
<td>
<p>numeric time to start the plot from.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>to</code></td>
<td>
<p>numeric time to plot to.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>xlab</code></td>
<td>
<p>a label for the plot's x-axis.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>ylab</code></td>
<td>
<p>a label of the plot's y-axis. The default uses the value of
<code>qi</code>.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>title</code></td>
<td>
<p>the plot's main title.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>method</code></td>
<td>
<p>what type of smoothing method to use to summarize the center
of the simulation distribution.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>spalette</code></td>
<td>
<p>colour palette for when there are multiple sets of
comparisons to plot. Default palette is <code>"Set1"</code>. See
<code>scale_colour_brewer</code>.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>legend</code></td>
<td>
<p>specifies what type of legend to include (if applicable).
The default is <code>legend = "legend"</code>. To hide the legend use
<code>legend = FALSE</code>. See the <code>discrete_scale</code> for more details.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>leg.name</code></td>
<td>
<p>name of the legend (if applicable).</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>lsize</code></td>
<td>
<p>size of the smoothing line. Default is 1. See
<code>ggplot2</code>.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>psize</code></td>
<td>
<p>size of the plotted simulation points. Default is
<code>psize = 1</code>. See <code>ggplot2</code>.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>alpha</code></td>
<td>
<p>numeric. Alpha (e.g. transparency) for the points, lines, or
ribbons. Default is <code>alpha = 0.2</code>. See <code>ggplot2</code>. Note, if
<code>type = "lines"</code> or <code>type = "points"</code> then <code>alpah</code> sets the
maximum value per line or point at the center of the distribution. Lines or
points further from the center are more transparent the further they get
from the middle.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>type</code></td>
<td>
<p>character string. Specifies how to plot the simulations. Can be
<code>points</code>, <code>lines</code>, or <code>ribbons</code>. If points then each
simulation value will be plotted. If <code>lines</code> is chosen then each
simulation is plotted using a different line. Note: any simulation with a
value along its length that is outside of the specified central interval
will be dropped. This is to create a smooth plot. If <code>type = "ribbons"</code>
a plot will be created with shaded areas ('ribbons') for the minimum and
maximum simulation values (i.e. the middle interval set with <code>qi</code> in
<code>coxsimSpline</code>) as well as the central 50 percent of this area.
It also plots a line for the median value of the full area, so values in
<code>method</code> are ignored. One of the key advantages of using ribbons
rather than points is that it creates plots with smaller file sizes.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>...</code></td>
<td>
<p>Additional arguments. (Currently ignored.)</p>
</td>
</tr>
</table>
<h3>Details</h3>

<p>Plots either a time-interactive hazard ratios, first differences,
and relative hazards, or the hazard rates for multiple strata. Currently the
strata legend labels need to be changed manually (see <code>revalue</code>
in the plyr package) in the <code>simtvc</code> object with the
<code>strata</code> component. Also, currently the x-axis tick marks and break
labels must be adjusted manually for non-linear functions of time.
Note: A dotted line is created at y = 1 (0 for first difference), i.e. no
effect, for time-varying hazard ratio graphs. No line is created for hazard
rates.
</p>


<h3>Value</h3>

<p>a <code>gg</code> <code>ggplot</code> class object
</p>


<h3>References</h3>

<p>Gandrud, Christopher. 2015. simPH: An R Package for Illustrating
Estimates from Cox Proportional Hazard Models Including for Interactive and
Nonlinear Effects. Journal of Statistical Software. 65(3)1-20.
</p>
<p>Licht, Amanda A. 2011. ”Change Comes with Time: Substantive
Interpretation of Nonproportional Hazards in Event History Analysis.”
Political Analysis 19: 227-43.
</p>


<h3>Examples</h3>

<pre><code class="language-R">## Not run: 
# Load Golub &amp; Steunenberg (2007) Data
data("GolubEUPData")

# Load survival package
library(survival)

# Expand data
GolubEUPData &lt;- SurvExpand(GolubEUPData, GroupVar = 'caseno',
                     Time = 'begin', Time2 = 'end', event = 'event')

# Create time interactions
BaseVars &lt;- c('qmv', 'backlog', 'coop', 'codec', 'qmvpostsea', 'thatcher')
GolubEUPData &lt;- tvc(GolubEUPData, b = BaseVars, tvar = 'end', tfun = 'log')

# Run Cox PH Model
M1 &lt;- coxph(Surv(begin, end, event) ~ qmv + qmvpostsea + qmvpostteu +
                coop + codec + eu9 + eu10 + eu12 + eu15 + thatcher +
                agenda + backlog + qmv_log + qmvpostsea_log + coop_log +
                codec_log + thatcher_log + backlog_log,
            data = GolubEUPData, ties = "efron")

# Create simtvc object for Relative Hazard
Sim1 &lt;- coxsimtvc(obj = M1, b = "qmv", btvc = "qmv_log",
                   tfun = "log", from = 80, to = 2000,
                   Xj = 1, by = 15, ci = 0.99, nsim = 100)

# Create plot
simGG(Sim1, legend = FALSE)

# Create simtvc object for First Difference
Sim2 &lt;- coxsimtvc(obj = M1, b = "qmv", btvc = "qmv_log",
                 qi = "First Difference", Xj = 1,
                 tfun = "log", from = 80, to = 2000,
                 by = 15, ci = 0.95)

# Create simtvc object for Hazard Ratio
Sim3 &lt;- coxsimtvc(obj = M1, b = "backlog", btvc = "backlog_log",
                  qi = "Hazard Ratio", Xj = c(191, 229),
                  Xl = c(0, 0),
                  tfun = "log", from = 100, to = 2000,
                  by = 15, ci = 0.99)

# Create plots
simGG(Sim2, type = 'points')
simGG(Sim3, leg.name = "Comparision", from = 1200, type = 'lines')

## End(Not run)

</code></pre>


</div>