<div class="container">

<table style="width: 100%;"><tr>
<td>predict_profile</td>
<td style="text-align: right;">R Documentation</td>
</tr></table>
<h2>Instance Level Profile as Ceteris Paribus for Survival Models</h2>

<h3>Description</h3>

<p>This function calculates Ceteris Paribus Profiles for a specific observation with the possibility to take the time dimension into account.
</p>


<h3>Usage</h3>

<pre><code class="language-R">predict_profile(
  explainer,
  new_observation,
  variables = NULL,
  categorical_variables = NULL,
  ...,
  type = "ceteris_paribus",
  output_type = "survival",
  variable_splits_type = "uniform",
  center = FALSE
)

## S3 method for class 'surv_explainer'
predict_profile(
  explainer,
  new_observation,
  variables = NULL,
  categorical_variables = NULL,
  ...,
  type = "ceteris_paribus",
  output_type = "survival",
  variable_splits_type = "uniform",
  center = FALSE
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr style="vertical-align: top;">
<td><code>explainer</code></td>
<td>
<p>an explainer object - model preprocessed by the <code>explain()</code> function</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>new_observation</code></td>
<td>
<p>a new observation for which the prediction need to be explained</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>variables</code></td>
<td>
<p>a character vector containing names of variables to be explained</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>categorical_variables</code></td>
<td>
<p>a character vector of names of additional variables which should be treated as categorical (factors are automatically treated as categorical variables). If it contains variable names not present in the <code>variables</code> argument, they will be added at the end.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>...</code></td>
<td>
<p>additional parameters passed to <code>DALEX::predict_profile</code> if <code>output_type =="risk"</code></p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>type</code></td>
<td>
<p>character, only <code>"ceteris_paribus"</code> is implemented</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>output_type</code></td>
<td>
<p>either <code>"survival"</code>, <code>"chf"</code> or <code>"risk"</code> the type of survival model output that should be considered for explanations. If <code>"survival"</code> the explanations are based on the survival function. If <code>"chf"</code> the explanations are based on the cumulative hazard function. Otherwise the scalar risk predictions are used by the <code>DALEX::predict_profile</code> function.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>variable_splits_type</code></td>
<td>
<p>character, decides how variable grids should be calculated. Use <code>"quantiles"</code> for percentiles or <code>"uniform"</code> (default) to get uniform grid of points.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>center</code></td>
<td>
<p>logical, should profiles be centered around the average prediction</p>
</td>
</tr>
</table>
<h3>Value</h3>

<p>An object of class <code>c("predict_profile_survival", "surv_ceteris_paribus")</code>. It is a list with the final result in the <code>result</code> element.
</p>


<h3>Examples</h3>

<pre><code class="language-R">
library(survival)
library(survex)

cph &lt;- coxph(Surv(time, status) ~ ., data = veteran, model = TRUE, x = TRUE, y = TRUE)
rsf_src &lt;- randomForestSRC::rfsrc(Surv(time, status) ~ ., data = veteran)

cph_exp &lt;- explain(cph)
rsf_src_exp &lt;- explain(rsf_src)

cph_predict_profile &lt;- predict_profile(cph_exp, veteran[2, -c(3, 4)],
    variables = c("trt", "celltype", "karno", "age"),
    categorical_variables = "trt"
)
plot(cph_predict_profile, facet_ncol = 2)


rsf_predict_profile &lt;- predict_profile(rsf_src_exp, veteran[5, -c(3, 4)], variables = "karno")
plot(cph_predict_profile, numerical_plot_type = "contours")


</code></pre>


</div>