<div class="container">

<table style="width: 100%;"><tr>
<td>calculate_representation</td>
<td style="text-align: right;">R Documentation</td>
</tr></table>
<h2>Compare sample representation within sraster strata</h2>

<h3>Description</h3>

<p>Compare sample representation within sraster strata
</p>


<h3>Usage</h3>

<pre><code class="language-R">calculate_representation(sraster, existing, drop = NULL, plot = FALSE)
</code></pre>


<h3>Arguments</h3>

<table>
<tr style="vertical-align: top;">
<td><code>sraster</code></td>
<td>
<p>spatRaster. Stratification raster.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>existing</code></td>
<td>
<p>sf 'POINT'.  Existing plot network.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>drop</code></td>
<td>
<p>Numeric. Numeric value between 0-1 representing the <code>sraster</code> frequency
(<code>srasterFreq</code>) below which strata will be dropped from comparison (e.g..
This parameter can be useful for when comparing stratum where percent coverage of strata
may be ~ 0 percent and should be dropped. This could occur when mapping multiple stratifications.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>plot</code></td>
<td>
<p>Logical. Plot frequency of strata coverage and sampling coverage
for <code>sraster</code> and <code>existing</code>. Will return a list if <code>TRUE</code>.</p>
</td>
</tr>
</table>
<h3>Details</h3>

<p>Calculate how sraster strata are represented in existing samples
</p>


<h3>Value</h3>

<p>Returns a tibble where:
</p>

<ul>
<li>
<p>strata - <code>sraster</code> strata ID.
</p>
</li>
<li>
<p>srasterFreq - <code>sraster</code> coverage frequency.
</p>
</li>
<li>
<p>sampleFreq - Sampling frequency within <code>sraster</code> strata.
</p>
</li>
<li>
<p>diffFreq - Difference between <code>srasterFreq</code> &amp; <code>sampleFreq</code>. Positive values indicate over representation.
</p>
</li>
<li>
<p>nSamp - Number of samples within each strata in <code>existing</code>.
</p>
</li>
<li>
<p>need - <code>srasterFreq * sum(nSamp)</code>. Total theoretical number of required samples to be representative of strata coverage.
This values is rounded. It is important for the user to consider <code>diffFreq</code>. A small difference - e.g. 1 
in <code>sampleFreq</code> vs. <code>srasterFreq</code> frequency could make the algorithm allocate or remove samples that could likely be ignored.
</p>
</li>
</ul>
<h3>Author(s)</h3>

<p>Tristan R.H. Goodbody, Martin Queinnec
</p>


<h3>See Also</h3>

<p>Other calculate functions: 
<code>calculate_allocation()</code>,
<code>calculate_allocation_existing()</code>,
<code>calculate_coobs()</code>,
<code>calculate_distance()</code>,
<code>calculate_pcomp()</code>,
<code>calculate_pop()</code>,
<code>calculate_sampsize()</code>
</p>


<h3>Examples</h3>

<pre><code class="language-R">### --- generate example stratification ---###

#--- load ALS metrics from sgsR internal data ---#
r &lt;- system.file("extdata", "mraster.tif", package = "sgsR")

#--- read ALS metrics using the terra package ---#
mraster &lt;- terra::rast(r)

#--- perform stratification ---#
sraster &lt;- strat_kmeans(
  mraster = mraster$zq90,
  nStrata = 6
)

### --- create existing sample network ---###

#--- simple random sampling ---#
existing &lt;- sample_srs(
  raster = mraster$zq90,
  nSamp = 100
)

#--- calculate representation ---#

calculate_representation(
  sraster = sraster,
  existing = existing
)
</code></pre>


</div>