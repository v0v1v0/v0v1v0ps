<div class="container">

<table style="width: 100%;"><tr>
<td>sim_survey</td>
<td style="text-align: right;">R Documentation</td>
</tr></table>
<h2>Simulate stratified-random survey</h2>

<h3>Description</h3>

<p>Simulate stratified-random survey
</p>


<h3>Usage</h3>

<pre><code class="language-R">sim_survey(
  sim,
  n_sims = 1,
  q = sim_logistic(),
  trawl_dim = c(1.5, 0.02),
  resample_cells = FALSE,
  binom_error = TRUE,
  min_sets = 2,
  set_den = 2/1000,
  lengths_cap = 500,
  ages_cap = 10,
  age_sampling = "stratified",
  age_length_group = 1,
  age_space_group = "division",
  custom_sets = NULL,
  light = TRUE
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr style="vertical-align: top;">
<td><code>sim</code></td>
<td>
<p>Simulation from <code>sim_distribution</code></p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>n_sims</code></td>
<td>
<p>Number of surveys to simulate over the simulated population. Note: requesting
a large number of simulations may max out your RAM. Use
<code>sim_survey_parallel</code> if many simulations are required.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>q</code></td>
<td>
<p>Closure, such as <code>sim_logistic</code>, for simulating catchability at age
(returned values must be between 0 and 1)</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>trawl_dim</code></td>
<td>
<p>Trawl width and distance (same units as grid)</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>resample_cells</code></td>
<td>
<p>Allow resampling of sampling units (grid cells)? Setting to TRUE may introduce bias
because depletion is imposed at the cell level.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>binom_error</code></td>
<td>
<p>Impose binomial error? Setting to FALSE may introduce bias in stratified estimates
at older ages because of more frequent rounding to zero.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>min_sets</code></td>
<td>
<p>Minimum number of sets per strat</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>set_den</code></td>
<td>
<p>Set density (number of sets per grid unit squared). WARNING:
may return an error if <code>set_den</code> is high and
<code>resample_cells = FALSE</code> because the number of sets allocated may
exceed the number of cells in a strata.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>lengths_cap</code></td>
<td>
<p>Maximum number of lengths measured per set</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>ages_cap</code></td>
<td>
<p>If <code>age_sampling = "stratified"</code>, this cap represents the maximum
number of ages to sample per length group (defined using the <code>age_length_group</code>
argument) per division or strat (defined using the <code>age_space_group</code> argument)
per year. If <code>age_sampling = "random"</code>, it is the maximum number of ages to sample
from measured fish per set.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>age_sampling</code></td>
<td>
<p>Should age sampling be "stratified" (default) or "random"?</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>age_length_group</code></td>
<td>
<p>Numeric value indicating the size of the length bins for stratified
age sampling. Ignored if <code>age_sampling = "random"</code>.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>age_space_group</code></td>
<td>
<p>Should age sampling occur at the "division" (default), "strat" or "set" spatial scale?
That is, age sampling can be spread across each "division", "strat" or "set"
in each year to a maximum number within each length bin (cap is defined using
the <code>age_cap</code> argument). Ignored if <code>age_sampling = "random"</code>.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>custom_sets</code></td>
<td>
<p>Supply an object of the same structure as returned by <code>sim_sets</code> which
specifies a custom series of set locations to be sampled. Set locations are
automated if <code>custom_sets = NULL</code>.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>light</code></td>
<td>
<p>Drop some objects from the output to keep object size low?</p>
</td>
</tr>
</table>
<h3>Value</h3>

<p>A list including rounded population simulation, set locations and details
and sampling details. Note that that N = "true" population, I = population available
to the survey, n = number caught by survey.
</p>


<h3>Examples</h3>

<pre><code class="language-R">

sim &lt;- sim_abundance(ages = 1:5, years = 1:5) %&gt;%
           sim_distribution(grid = make_grid(res = c(20, 20))) %&gt;%
           sim_survey(n_sims = 5, q = sim_logistic(k = 2, x0 = 3))
plot_survey(sim, which_year = 3, which_sim = 1)


</code></pre>


</div>