<div class="container">

<table style="width: 100%;"><tr>
<td>run_strat</td>
<td style="text-align: right;">R Documentation</td>
</tr></table>
<h2>Run stratified analysis on simulated data</h2>

<h3>Description</h3>

<p>Run stratified analysis on simulated data
</p>


<h3>Usage</h3>

<pre><code class="language-R">run_strat(
  sim,
  length_group = "inherit",
  alk_scale = "division",
  strat_data_fun = strat_data,
  strat_means_fun = strat_means
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr style="vertical-align: top;">
<td><code>sim</code></td>
<td>
<p>Simulation from <code>sim_survey</code></p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>length_group</code></td>
<td>
<p>Size of the length frequency bins for both abundance at length calculations
and age-length-key construction. By default this value is inherited from
the value defined in <code>sim_abundance</code> from the closure supplied to
<code>sim_length</code> ("inherit"). A numeric value can also be supplied, however,
a mismatch in length groupings will cause issues with <code>strat_error</code>
as true vs. estimated length groupings will be mismatched.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>alk_scale</code></td>
<td>
<p>Spatial scale at which to construct and apply age-length-keys:
"division" or "strat".</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>strat_data_fun</code></td>
<td>
<p>Function for preparing data for stratified analysis (e.g. <code>strat_data</code>)</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>strat_means_fun</code></td>
<td>
<p>Function for calculating stratified means (e.g. <code>strat_means</code>)</p>
</td>
</tr>
</table>
<h3>Details</h3>

<p>The <code>"strat_data_fun"</code> and <code>"strat_means_fun"</code> allow the use of custom
<code>strat_data</code> and  <code>strat_means</code> functions.
</p>


<h3>Value</h3>

<p>Adds stratified analysis results for the total population (<code>"total_strat"</code>)
and the population aggregated by length group and age (<code>"length_strat"</code> and
<code>"age_strat"</code>, respectively) to the <code>sim</code> list.
</p>


<h3>Examples</h3>

<pre><code class="language-R">

sim &lt;- sim_abundance(ages = 1:5, years = 1:5,
                     R = sim_R(log_mean = log(1e+7)),
                     growth = sim_vonB(length_group = 1)) %&gt;%
           sim_distribution(grid = make_grid(res = c(20, 20)),
                            ays_covar = sim_ays_covar(sd = 1)) %&gt;%
           sim_survey(n_sims = 1, q = sim_logistic(k = 2, x0 = 3)) %&gt;%
           run_strat()


</code></pre>


</div>