<div class="container">

<table style="width: 100%;"><tr>
<td>getRough</td>
<td style="text-align: right;">R Documentation</td>
</tr></table>
<h2>Calculate roughness from modulation spectrum</h2>

<h3>Description</h3>

<p>Internal soundgen function
</p>


<h3>Usage</h3>

<pre><code class="language-R">getRough(m, roughRange = c(30, 150), roughMean = NULL, roughSD = NULL)
</code></pre>


<h3>Arguments</h3>

<table>
<tr style="vertical-align: top;">
<td><code>m</code></td>
<td>
<p>numeric matrix of non-negative values with colnames giving temporal
modulation frequency</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>roughRange</code></td>
<td>
<p>the range of temporal modulation frequencies that
constitute the "roughness" zone, Hz</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>roughMean, roughSD</code></td>
<td>
<p>the mean (Hz) and standard deviation (semitones) of
a lognormal distribution used to weight roughness estimates. If either is
null, roughness is calculated simply as the proportion of spectrum within
<code>roughRange</code>. If both <code>roughMean</code> and <code>roughRange</code> are
defined, weights outside <code>roughRange</code> are set to 0; a very large SD (a
flat weighting function) gives the same result as just <code>roughRange</code>
without any weighting (see examples)</p>
</td>
</tr>
</table>
<h3>Details</h3>

<p>Helper function for calculating roughness - the proportion of energy /
amplitude in the roughness range
</p>


<h3>Value</h3>

<p>Returns roughness in percent.
</p>


<h3>Examples</h3>

<pre><code class="language-R">m = modulationSpectrum(soundgen(jitterDep = 2, addSilence = 0),
  samplingRate = 16000)$original
# proportion within roughRange
plot(soundgen:::getRough(m, roughRange = c(30, Inf))[, 1:2])
plot(soundgen:::getRough(m, roughRange = c(30, 150))[, 1:2])

# lognormal weighting function instead of roughRange
plot(soundgen:::getRough(m, roughRange = NULL,
  roughMean = 75, roughSD = 1)[, 1:2])  # narrow
plot(soundgen:::getRough(m, roughRange = NULL,
  roughMean = 75, roughSD = 5000)[, 1:2])  # very broad

# lognormal weighting function truncated at roughRange
plot(soundgen:::getRough(m, roughRange = c(30, 150),
  roughMean = 75, roughSD = 3)[, 1:2])
plot(soundgen:::getRough(m, roughRange = c(30, 150),
  roughMean = 75, roughSD = 5000)[, 1:2])
# approaches proportion in roughRange as SD --&gt; Inf

# a nice plot weighting by amplitude
r2 = soundgen:::getRough(m)
plot(r2$freq, r2$rough, cex = r2$amp ^ 2 + .25)
sum(r2$rough)  # simple sum across all bands
sum(r2$rough * r2$amp / sum(r2$amp))  # amplitude-weighted mean
# log-amplitude-weighted mean
sum(r2$rough * log(r2$amp+1e-6) / sum(log(r2$amp+1e-6)))
</code></pre>


</div>