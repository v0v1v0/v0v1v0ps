<div class="container">

<table style="width: 100%;"><tr>
<td>align.wave</td>
<td style="text-align: right;">R Documentation</td>
</tr></table>
<h2>Automatic placement of calls at beggining of sound window</h2>

<h3>Description</h3>

<p>Recreate each <code>".wav"</code> file on a given folder while placing calls at the beginning of sound window. New <code>".wav"</code> files will be stored on a new folder, which is automatically created.
</p>


<h3>Usage</h3>

<pre><code class="language-R">align.wave(
  wav.at = NULL,
  wav.to = "Aligned",
  time.length = 1,
  time.perc = 0.005,
  flim = NULL,
  dBlevel = 25,
  f = 44100,
  wl = 512,
  ovlp = 70
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr style="vertical-align: top;">
<td><code>wav.at</code></td>
<td>
<p>filepath to the folder where <code>".wav"</code> files are stored. Should be presented between quotation marks. By default: <code>wav.at = NULL</code> (i.e. user must specify the filepath to <code>".wav"</code> files)</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>wav.to</code></td>
<td>
<p>name of the folder where new <code>".wav"</code> files will be stored. Should be presented between quotation marks. By default: <code>wav.to = "Aligned"</code></p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>time.length</code></td>
<td>
<p>intended length for the time (X-axis) in seconds. Should be a value that encompasses all sounds in the study. By default: <code>time.length = 1</code></p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>time.perc</code></td>
<td>
<p>slight time gap (in percentage) relative to the intended length that encompass all sounds in the study (i.e. <code>time.length</code>). Intervals are added before and after the minimum and maximum time coordinates (X-values) from the selected curve of relative amplitude (<code>dBlevel</code>). By default: <code>time.perc = 0.005</code> (i.e. 0.5%)</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>flim</code></td>
<td>
<p>modifications of the frequency limits (Y-axis) to focus on acoustic units. Useful for recordings with low signal-to-noise ratio. Vector with two values in kHz. By default: <code>flim = NULL</code></p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>dBlevel</code></td>
<td>
<p>absolute amplitude value to be used as relative amplitude contour, which will serve as reference for call placement. By default: <code>dBlevel = 25</code></p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>f</code></td>
<td>
<p>sampling frequency of <code>".wav"</code> files (in Hz). By default: <code>f = 44100</code></p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>wl</code></td>
<td>
<p>length of the window for the analysis. By default: <code>wl = 512</code></p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>ovlp</code></td>
<td>
<p>overlap between two successive windows (in %) for increased spectrogram resolution. By default: <code>ovlp = 70</code></p>
</td>
</tr>
</table>
<h3>Author(s)</h3>

<p>Pedro Rocha
</p>


<h3>References</h3>

<p>MacLeod, N., Krieger, J. &amp; Jones, K. E. (2013). Geometric morphometric approaches to acoustic signal analysis in mammalian biology. <em>Hystrix, the Italian Journal of Mammalogy, 24</em>(1), 110-125.
</p>
<p>Rocha, P. &amp; Romano, P. (2021) The shape of sound: A new <code>R</code> package that crosses the bridge between Bioacoustics and Geometric Morphometrics. <em>Methods in Ecology and Evolution, 12</em>(6), 1115-1121.
</p>


<h3>See Also</h3>

<p><code>eigensound</code>
</p>
<p>Useful links:
</p>

<ul>
<li>
<p><a href="https://github.com/p-rocha/SoundShape">https://github.com/p-rocha/SoundShape</a>
</p>
</li>
<li>
<p>Report bugs at <a href="https://github.com/p-rocha/SoundShape/issues">https://github.com/p-rocha/SoundShape/issues</a></p>
</li>
</ul>
<h3>Examples</h3>

<pre><code class="language-R">
library(seewave)
library(tuneR)

# Create temporary folder to store ".wav" files
wav.at &lt;- file.path(base::tempdir(), "align.wave")
if(!dir.exists(wav.at)) dir.create(wav.at)

# Create temporary folder to store results
store.at &lt;- file.path(base::tempdir(), "align.wave-output")
if(!dir.exists(store.at)) dir.create(store.at)

# Select acoustic units to be analyzed
data(cuvieri)
spectro(cuvieri, flim = c(0,3)) # Visualize sound data that will be used

# Cut acoustic units from original Wave
cut.cuvieri1 &lt;- cutw(cuvieri, f=44100, from=0, to=0.5, output = "Wave")
cut.cuvieri2 &lt;- cutw(cuvieri, f=44100, from=0.7, to=1.2, output = "Wave")
cut.cuvieri3 &lt;- cutw(cuvieri, f=44100, from=1.4, to=1.9, output = "Wave")

# Export ".wav" files containing selected acoustic units and store on previosly created folder
writeWave(cut.cuvieri1, filename = file.path(wav.at, "cut.cuvieri1.wav"), extensible = FALSE)
writeWave(cut.cuvieri2, filename = file.path(wav.at, "cut.cuvieri2.wav"), extensible = FALSE)
writeWave(cut.cuvieri3, filename = file.path(wav.at, "cut.cuvieri3.wav"), extensible = FALSE)

# Align acoustic units selected at 1% of time lenght
align.wave(wav.at = wav.at, wav.to = "Aligned",
           time.length = 0.5, time.perc = 0.01, dBlevel = 25)

# Verify alignment using eigensound function featuring analysis.type = "twoDshape"
eigensound(analysis.type = "twoDshape", wav.at = file.path(wav.at, "Aligned"), store.at = store.at,
           flim=c(0, 3), tlim=c(0,0.5), dBlevel = 25, plot.exp = TRUE, plot.as = "jpeg")
# To see jpeg files created, check folder specified by store.at



</code></pre>


</div>