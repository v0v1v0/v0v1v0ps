<div class="container">

<table style="width: 100%;"><tr>
<td>profanity_by</td>
<td style="text-align: right;">R Documentation</td>
</tr></table>
<h2>Profanity Rate By Groups</h2>

<h3>Description</h3>

<p>Approximate the profanity of text by grouping variable(s).  For a
full description of the profanity detection algorithm see 
<code>profanity</code>.  See <code>profanity</code>
for more details about the algorithm, the profanity/valence shifter keys
that can be passed into the function, and other arguments that can be passed.
</p>


<h3>Usage</h3>

<pre><code class="language-R">profanity_by(text.var, by = NULL, group.names, ...)
</code></pre>


<h3>Arguments</h3>

<table>
<tr style="vertical-align: top;">
<td><code>text.var</code></td>
<td>
<p>The text variable.  Also takes a <code>profanityr</code> or
<code>profanity_by</code> object.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>by</code></td>
<td>
<p>The grouping variable(s).  Default <code>NULL</code> uses the original
row/element indices; if you used a column of 12 rows for <code>text.var</code>
these 12 rows will be used as the grouping variable.  Also takes a single
grouping variable or a list of 1 or more grouping variables.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>group.names</code></td>
<td>
<p>A vector of names that corresponds to group.  Generally
for internal use.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>...</code></td>
<td>
<p>Other arguments passed to <code>profanity</code>.</p>
</td>
</tr>
</table>
<h3>Value</h3>

<p>Returns a <span class="pkg">data.table</span> with grouping variables plus:
</p>

<ul>
<li>
<p>  element_id - The id number of the original vector passed to <code>profanity</code>
</p>
</li>
<li>
<p>  sentence_id - The id number of the sentences within each <code>element_id</code>
</p>
</li>
<li>
<p>  word_count - Word count <code>sum</code>med by grouping variable
</p>
</li>
<li>
<p>  profanity_count - The number of profanities used by grouping variable
</p>
</li>
<li>
<p>  sd - Standard deviation (<code>sd</code>) of the sentence level profanity rate by grouping variable
</p>
</li>
<li>
<p>  ave_profanity - Profanity rate
</p>
</li>
</ul>
<h3>Chaining</h3>

<p>See the  <code>sentiment_by</code> for details about <span class="pkg">sentimentr</span> chaining.
</p>


<h3>See Also</h3>

<p>Other profanity functions: 
<code>profanity()</code>
</p>


<h3>Examples</h3>

<pre><code class="language-R">## Not run: 
bw &lt;- sample(lexicon::profanity_alvarez, 4)
mytext &lt;- c(
   sprintf('do you like this %s?  It is %s. But I hate really bad dogs', bw[1], bw[2]),
   'I am the best friend.',
   NA,
   sprintf('I %s hate this %s', bw[3], bw[4]),
   "Do you really like it?  I'm not happy"
)

## works on a character vector but not the preferred method avoiding the 
## repeated cost of doing sentence boundary disambiguation every time 
## `profanity` is run
profanity(mytext)
profanity_by(mytext)

## preferred method avoiding paying the cost 
mytext &lt;- get_sentences(mytext)

profanity_by(mytext)
get_sentences(profanity_by(mytext))

(myprofanity &lt;- profanity_by(mytext))
stats::setNames(get_sentences(profanity_by(mytext)),
    round(myprofanity[["ave_profanity"]], 3))

brady &lt;- get_sentences(crowdflower_deflategate)
library(data.table)
bp &lt;- profanity_by(brady)
crowdflower_deflategate[bp[ave_profanity &gt; 0,]$element_id, ]

vulgars &lt;- bp[["ave_profanity"]] &gt; 0
stats::setNames(get_sentences(bp)[vulgars],
    round(bp[["ave_profanity"]][vulgars], 3))
    
bt &lt;- data.table(crowdflower_deflategate)[, 
    source := ifelse(grepl('^RT', text), 'retweet', 'OP')][,
    belichick := grepl('\\bb[A-Za-z]+l[A-Za-z]*ch', text, ignore.case = TRUE)][]

prof_bel &lt;- with(bt, profanity_by(text, by = list(source, belichick)))

plot(prof_bel)

## End(Not run)
</code></pre>


</div>