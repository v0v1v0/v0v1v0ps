<div class="container">

<table style="width: 100%;"><tr>
<td>dltEpipolarDistance</td>
<td style="text-align: right;">R Documentation</td>
</tr></table>
<h2>Finds the distance between a point and a self-epipolar line</h2>

<h3>Description</h3>

<p>Given the same point in two camera views, this function finds the distance between the point in the second camera view and a epipolar line in the second view, as determined from the point in the first view. The option is also available to return the mean reciprocal epipolar distance.
</p>


<h3>Usage</h3>

<pre><code class="language-R">dltEpipolarDistance(p1, p2, cal.coeff, reciprocal = FALSE)
</code></pre>


<h3>Arguments</h3>

<table>
<tr style="vertical-align: top;">
<td><code>p1</code></td>
<td>
<p>an x,y vector or two-column matrix of a point or points in the camera view corresponding to the first column of <code>cal.coeff</code>. This point will be used to generate an epipolar line in the second view.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>p2</code></td>
<td>
<p>an x,y vector or two-column matrix of a point or points in a second camera view, corresponding to the second column of <code>cal.coeff</code>. The distance will be measured from this point to the epipolar line of <code>p1</code>.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>cal.coeff</code></td>
<td>
<p>a two-column matrix of DLT calibration coefficients, where each column corresponds to the views from which <code>p1</code> and <code>p2</code> were taken, respectively.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>reciprocal</code></td>
<td>
<p>a logical indicating whether epipolar distance should be calculated reciprocally and then averaged.</p>
</td>
</tr>
</table>
<h3>Details</h3>

<p>In a stereo camera setup, a point in one camera view must fall somewhere along a line in a second camera view. This line is called its epipolar line. Due to error in manually selecting the same point in two camera views and error in the calibration, the epipolar line of the point in the first view will not intersect exactly with the same point in the second view. This distance between a point and the epipolar line of the same point in another view is the epipolar distance (or error).
</p>
<p>The epipolar distance can be calculated between the point in the second view and the epipolar line of the point in the first view or between the point in the first view and the epipolar line of the point in the second view; the choice is arbitrary. This function performs the former. If a user would like to perform the latter, simply switch <code>p1</code> with <code>p2</code> <em>and</em> reverse the column order of <code>cal.coeff</code> (see "Examples"). Another possibility is to perform both distance calculations and return an average (mean reciprocal epipolar distance). This can be done by setting <code>reciprocal</code> to <code>TRUE</code>.
</p>
<p>Although a stereo camera system may consist of more than two cameras, the coefficients of only two cameras should be input to <code>dltEpipolarDistance()</code>. Only the coefficients of the two camera views for which epipolar distances are being calculated are relevant. Currently, this function only works with the 11-parameter DLT model.
</p>
<p>A few options for input of <code>p1</code> and <code>p2</code> are available. If a single point is input for both, the epipolar distance is calculated for these two points. If a matrix of points is input for both (of the same dimensions), the epipolar distance is calculated pair-wise - points in the same row are treated as the same point. Lastly, if a single point is input as <code>p1</code> and a matrix is input as <code>p2</code>, the epipolar distance is calculated for <code>p1</code> relative to all points in <code>p2</code> (see "Examples").
</p>


<h3>Value</h3>

<p>a vector of the epipolar distance(s).
</p>


<h3>Author(s)</h3>

<p>Aaron Olsen</p>


<h3>References</h3>

<p>For a general overview of DLT: <a href="http://kwon3d.com/theory/dlt/dlt.html">http://kwon3d.com/theory/dlt/dlt.html</a>
</p>


<h3>See Also</h3>

<p><code>dltCalibrateCameras</code>, <code>dltEpipolarLine</code>, <code>dltNearestPointOnEpipolar</code>, 
</p>
<p><code>dltMatchCurvePoints</code>
</p>


<h3>Examples</h3>

<pre><code class="language-R">## FIND THE FILE DIRECTORY FOR EXTRA R PACKAGE FILES
fdir &lt;- paste0(path.package("StereoMorph"), "/extdata/")

## SET FILE PATH TO CALIBRATION COEFFICIENTS IN TWO CAMERA STEREO SETUP
cc_file &lt;- paste0(fdir, "cal_coeffs.txt")

## LOAD COEFFICIENTS
cal.coeff &lt;- as.matrix(read.table(file=cc_file))

## GET LANDMARKS IN FIRST CAMERA VIEW
lm_files &lt;- paste0(fdir, c("lm_2d_a1_v1.txt", "lm_2d_a1_v2.txt"))

## READ LANDMARKS INTO MATRIX
lm.array &lt;- readLandmarksToArray(file=lm_files, row.names=1)

## FIND EPIPOLAR DISTANCE BETWEEN TWO SINGLE LANDMARKS
## EPIPOLAR DISTANCE (ERROR) IS AROUND 7 PIXELS
## IDENTIFYING THE EXACT SAME POINT IN TWO VIEWS MANUALLY IS CHALLENGING...
dltEpipolarDistance(p1=lm.array[1, , 1], p2=lm.array[1, , 2], cal.coeff=cal.coeff)

## FIND EPIPOLAR DISTANCE USING EPIPOLAR FROM SECOND VIEW INSTEAD
dltEpipolarDistance(p1=lm.array[1, , 2], p2=lm.array[1, , 1], cal.coeff=cal.coeff[, 2:1])

## FIND MEAN RECIPROCAL EPIPOLAR DISTANCE BETWEEN TWO SINGLE LANDMARKS
## THIS IS THE AVERAGE OF THE PREVIOUS TWO DISTANCES
dltEpipolarDistance(p1=lm.array[1, , 1], p2=lm.array[1, , 2], cal.coeff=cal.coeff, 
  reciprocal=TRUE)

## FIND EPIPOLAR DISTANCES BETWEEN ALL LANDMARKS
## PROCEEDS PAIRWISE BECAUSE p1 AND p2 HAVE THE SAME DIMENSIONS
dltEpipolarDistance(p1=lm.array[, , 1], p2=lm.array[, , 2], cal.coeff=cal.coeff)

## FIND EPIPOLAR DISTANCES BETWEEN FIRST LANDMARK AND ALL LANDMARKS
## HERE THE EPIPOLAR DISTANCES ARE HIGH BECAUSE ONLY THE FIRST LANDMARK
##  CORRESPONDS
## THE REMAINING POINTS ARE NOT THE SAME LANDMARK
dltEpipolarDistance(p1=lm.array[1, , 1], p2=lm.array[, , 2], cal.coeff=cal.coeff)

</code></pre>


</div>