<div class="container">

<table style="width: 100%;"><tr>
<td>Group_nstud</td>
<td style="text-align: right;">R Documentation</td>
</tr></table>
<h2>Aggregate the students number data by class at the municipality and province level</h2>

<h3>Description</h3>

<p>This function creates two dataframes with the number of students, classes and students by class, aggregated at the province and municipality level
</p>


<h3>Usage</h3>

<pre><code class="language-R">Group_nstud(
  data = NULL,
  Year = 2023,
  check = TRUE,
  verbose = TRUE,
  check_registry = "Any",
  InnerAreas = TRUE,
  ord_InnerAreas = FALSE,
  check_ggplot = FALSE,
  missing_to_1 = FALSE,
  input_Registry = NULL,
  input_InnerAreas = NULL,
  input_Prov_shp = NULL,
  input_School2mun = NULL,
  input_AdmUnNames = NULL,
  autoAbort = FALSE,
  ...
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr style="vertical-align: top;">
<td><code>data</code></td>
<td>
<p>Either an object of class <code>list</code>, obtained as output of the <code>Get_nstud</code> function,
or an object of class class <code>tbl_df</code>, <code>tbl</code> and <code>data.frame</code>, obtained as output of the <code>Util_nstud_wide</code> function,
if <code>NULL</code>, the function will download it automatically but it will not be saved in the global environment. <code>NULL</code> by default.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>Year</code></td>
<td>
<p>Numeric or character value. The reference school year, if either of the <code>input_</code> arguments must be retrieved.
Available in the formats: <code>2022</code>, <code>"2022/2023"</code>, <code>"202223"</code>, <code>"20222023"</code>. <code>2023</code> by default</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>check</code></td>
<td>
<p>Logical. If <code>TRUE</code>, the function runs the test of the students number availability across all school included in the school registries (see <code>Util_Check_nstud_availability</code>). <code>TRUE</code> by default</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>verbose</code></td>
<td>
<p>Logical. If <code>TRUE</code>, the user keeps track of the main underlying operations. <code>TRUE</code> by default.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>check_registry</code></td>
<td>
<p>Character. If <code>check == TRUE</code>, the school registries included in the <code>input_School2mun</code> object (see <code>Get_School2mun</code>) whose availability has to be checked. Either <code>"Registry_from_buildings"</code> (buildings section), <code>"Registry_from_registry"</code> (registry section), <code>"Any"</code> or <code>"Both"</code>. <code>"Any"</code> by default.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>InnerAreas</code></td>
<td>
<p>Logical. If <code>check == TRUE</code>, Whether it must be checked if municipalities belong to Inner areas or not. <code>TRUE</code> by default.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>ord_InnerAreas</code></td>
<td>
<p>Logical. If <code>check == TRUE</code> and <code>InnerAreas == TRUE</code>, whether the Inner areas classification should be treated as an ordinal variable rather than as a categorical one (see <code>Get_InnerAreas</code> for the classification).
<code>FALSE</code> by default.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>check_ggplot</code></td>
<td>
<p>Logical. If <code>check == TRUE</code>, whether to display or not a static map of the availability of the students number by province; see also <code>Util_Check_nstud_availability</code>. <code>TRUE</code> by default.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>missing_to_1</code></td>
<td>
<p>Logical. Only needed if <code>data</code> is not provided in wide format. Whether the number of classes should be imputed to 1 when it is missing; see <code>Util_nstud_wide</code>. <code>FALSE</code> by default.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>input_Registry</code></td>
<td>
<p>Object of class <code>tbl_df</code>, <code>tbl</code> and <code>data.frame</code>, obtained as output of the function <code>Get_Registry</code>
If <code>check == TRUE</code>, the school registry (the properly said one, from the registry section).
If <code>NULL</code>, it will be downloaded automatically, but not saved in the global environment.
<code>NULL</code> by default</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>input_InnerAreas</code></td>
<td>
<p>Object of class <code>tbl_df</code>, <code>tbl</code> and <code>data.frame</code>.
The classification of peripheral municipalities, obtained as output of the <code>Get_InnerAreas</code> function.
Needed only if <code>check == TRUE</code> and <code>InnerAreas == TRUE</code>.
If <code>NULL</code>, it will be downloaded automatically, but not saved in the global environment.
<code>NULL</code> by default</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>input_Prov_shp</code></td>
<td>
<p>Object of class <code>sf</code>, <code>tbl_df</code>, <code>tbl</code>, <code>data.frame</code>. The relevant shapefile of Italian municipalities, if both the <code>check</code> and <code>check_ggplot</code> options are chosen.
If <code>NULL</code> it is downloaded automatically but not saved in the global environment. <code>NULL</code> by default.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>input_School2mun</code></td>
<td>
<p>Object of class <code>list</code> with elements of class <code>tbl_df</code>, <code>tbl</code> and <code>data.frame</code>, obtained as output of the function <code>Get_School2mun</code>.
The mapping from school codes to municipality (and province) codes. Needed only if 'check == TRUE'.
If <code>NULL</code>, it will be downloaded automatically, but not saved in the global environment. <code>NULL</code> by default.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>input_AdmUnNames</code></td>
<td>
<p>Object of class <code>tbl_df</code>, <code>tbl</code> and <code>data.frame</code>, obtained as output of the function <code>Get_AdmUnNames</code>
The ISTAT file including all the codes and the names of the administrative units for the year in scope.
Only needed if <code>check == TRUE</code> and the argument <code>input_School2mun</code> is <code>NULL</code>.
If <code>NULL</code>, it will be downloaded automatically, but not saved in the global environment. <code>NULL</code> by default.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>autoAbort</code></td>
<td>
<p>Logical. In case any data must be retrieved, whether to automatically abort the operation and return NULL in case of missing internet connection or server response errors. <code>FALSE</code> by default.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>...</code></td>
<td>
<p>Additional arguments to the function <code>Util_nstud_wide</code> if <code>data</code> is not provided.</p>
</td>
</tr>
</table>
<h3>Details</h3>

<p>Numerical variables are summarised by the mean; Boolean variables are summarised by the mean as well, thus they become frequency indicators.
Qualitative values, if included, are summarised by the mode. Summary measures do not include NAs.
</p>


<h3>Value</h3>

<p>An object of class <code>list</code> including:
</p>

<ul>
<li> <p><code>$Municipality_data</code>:
object of class <code>tbl_df</code>, <code>tbl</code> and <code>data.frame</code>, the output dataframe detailed at the municipality level
</p>
</li>
<li> <p><code>$Province_data</code>: object of class 'tbl_df', 'tbl' and 'data.frame', the output dataframe detailad at the province level
</p>
</li>
</ul>
<h3>Examples</h3>

<pre><code class="language-R">Year &lt;- 2023

nstud23_aggr &lt;- Group_nstud(data = example_input_nstud23, Year = Year,
                           input_Registry = example_input_Registry23,
                           InnerAreas = FALSE,
                           input_School2mun = example_School2mun23)

summary(nstud23_aggr$Municipality_data[,c(46,47,48)])

summary(nstud23_aggr$Province_data[,c(44,45,46)])


</code></pre>


</div>