<div class="container">

<table style="width: 100%;"><tr>
<td>survSpearman</td>
<td style="text-align: right;">R Documentation</td>
</tr></table>
<h2>Computes Spearman's Correlation for Bivariate Survival Data.</h2>

<h3>Description</h3>

<p>Computes non-parametric estimates of Spearman's rank correlation for bivariate survival data. Two correlations are returned: a highest rank correlation that can be interpreted as Spearman's correlation after assigning a highest rank to observations beyond a specified region, and a restricted correlation that estimates Spearman's correlation within the specified region.
</p>


<h3>Usage</h3>

<pre><code class="language-R">survSpearman(X = NULL, Y = NULL, deltaX = NULL, deltaY = NULL, data = NULL,
tauX = Inf, tauY = Inf, bivarSurf = NULL)
</code></pre>


<h3>Arguments</h3>

<table>
<tr style="vertical-align: top;">
<td><code>X</code></td>
<td>
<p>Time to event or censoring for variable <code>X</code>. It indicates time to event if argument <code>deltaX</code>=1 and time to censoring if argument <code>deltaX</code>=0.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>Y</code></td>
<td>
<p>Time to event or censoring for variable <code>Y</code>. It indicates time to event if argument <code>deltaY</code>=1 and time to censoring if argument <code>deltaY</code>=0.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>deltaX</code></td>
<td>
<p>Event indicator for variable <code>X</code>. <code>deltaX=1</code> if the event is observed and <code>0</code> if it is censored.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>deltaY</code></td>
<td>
<p>Event indicator for variable <code>Y</code>. <code>deltaY=1</code> if the event is observed and <code>0</code> if it is censored.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>data</code></td>
<td>
<p>Data frame containing variables (arguments) <code>X</code>, <code>Y</code>, <code>deltaX</code>, and <code>deltaY</code>.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>tauX</code></td>
<td>
<p>The <code>X</code> value that defines the restricted region for <code>X</code> variable.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>tauY</code></td>
<td>
<p>The <code>Y</code> value that defines the restricted region for <code>Y</code> variable.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>bivarSurf</code></td>
<td>
<p>A matrix containing the marginal and joint survival probabilities. The first column is the marginal survival probability corresponding to variable <code>X</code>. The first row is the marginal survival probability corresponding to variable <code>Y</code>. The rest of the matrix contains the joint survival probabilities. The row names of <code>bivarSurf</code> are ordered <code>X</code>-values. The column names of <code>bivarSurf</code> are ordered <code>Y</code>-values. Element <code>bivarSurf[1,1]</code> equals 1. Its row and column name is <code>'0'</code> (see the documentation for the return value <code>DabrowskaEst</code> in function <code>survDabrowska</code>).</p>
</td>
</tr>
</table>
<h3>Details</h3>

<p>The function computes the highest rank and restricted Spearman's correlations with bivariate survival data. The data can be supplied in three ways: 1) as vectors <code>X</code>, <code>Y</code>, <code>deltaX</code>, and <code>deltaY</code>; 2) as data frame <code>data</code> that contains the variables mentioned in 1); and 3) as matrix <code>bivarSurf</code> containing marginal and joint survival probabilities. If <code>bivarSurf</code> is not <code>NULL</code> then 1) and 2) are ignored. If <code>bivarSurf</code> is <code>NULL</code> and <code>data</code> is not then 2) is used. If <code>bivarSurf</code> and <code>data</code> are <code>NULL</code> then 1) is used. The highest rank correlation is the Spearman's correlation that can be interpreted as Spearman's rank correlation computed after assigning the highest rank to the events outside of <code>tauX</code> and <code>tauY</code>. The restricted Spearman's correlation is Spearman's correlation computed within the restricted region defined by <code>tauX</code> and <code>tauY</code>. Note that given <code>tauX</code> and <code>tauY</code> the survival probability is estimated using the values that are just above the latest observed event times within that region, what we call an effective restricted region. This means that if, for example, <code>tauX</code> is greater than the latest observed event time for <code>X</code> variable and <code>tauY</code> is greater than the latest observed event time for <code>Y</code> variable, then <code>tauX</code> and <code>tauY</code> do not affect the correlation values since the effective restricted region remains the same (as defined by the maximum observed event or censoring event times). The method of Dabrowska can result in negative probability mass for some points. This may result in zero or negative probability of failure in the restricted region, in which case the restricted Spearman's correlation cannot be computed and NA value is returned. This only happens when the sample size is small and censoring is heavy.
</p>


<h3>Value</h3>

<p>The function returns the following list of values. <code>'Restricted region set by user'</code> is a character vector of two user-specified restricted region values, <code>tauX</code> and <code>tauY</code>. <code>'Effective restricted region'</code> is character vector of two values that define the effective restricted region, the values that are just above the latest observed event times within the user-specified restricted region. <code>'Correlation'</code> is a numeric vector of two correlation values: the highest rank Spearman's correlation (<code>'HighestRank'</code>) and the restricted region Spearman's correlation (<code>'Restricted'</code>), where the restricted region is defined by the values in <code>'Effective restricted region'</code>.
</p>


<h3>Author(s)</h3>

<p>Svetlana K Eden, <a href="mailto:svetlanaeden@gmail.com">svetlanaeden@gmail.com</a>
</p>


<h3>References</h3>

<p>Dabrowska, D. M. (1988) Kaplan–Meier estimate on the plane. The Annals of Statistics 16, 1475–1489.
</p>
<p>Eden, S.K., Li, C., Shepherd B.E. (2021). Non-parametric Estimation of Spearman's Rank Correlation with Bivariate Survival Data. Biometrics (under revision).
</p>


<h3>Examples</h3>

<pre><code class="language-R">### Compute correlation from data
X &lt;- c(0.5, 0.6, 0.7, 0.8)
Y &lt;- c(0.44, 0.77, 0.88, 0.99)
deltaX &lt;- c(1, 0, 1, 1)
deltaY &lt;- c(1, 1, 1, 1)
survSpearman(X, Y, deltaX, deltaY)
survSpearman(X, Y, deltaX, deltaY, tauX = 100, tauY = 100)
survSpearman(X, Y, deltaX, deltaY, tauX = 100, tauY = 0.99)
survSpearman(X, Y, deltaX, deltaY, tauX = 0.8, tauY = 0.99)

### Compute correlation from survival surface
someSurf &lt;- survDabrowska(X, Y, deltaX, deltaY)$DabrowskaEst
survSpearman(tauY = 0.9, bivarSurf = someSurf)

</code></pre>


</div>