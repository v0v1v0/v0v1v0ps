<div class="container">

<table style="width: 100%;"><tr>
<td>get_ranPars</td>
<td style="text-align: right;">R Documentation</td>
</tr></table>
<h2>
Operations on lists of parameters
</h2>

<h3>Description</h3>

<p><code>get_fittedPars</code> returns estimated parameters. 
</p>
<p><code>get_ranPars</code> returns various subsets of random-effect parameters (correlation or variance parameters), as controlled by its <code>which</code> argument. 
It is one of several extractors for fixed or estimated parameters of  different classes of parameters, for which a quick guide is
</p>
<p><code>get_ranPars</code>: for random-effect parameters, excluding residual dispersion (with a subtlety for <code>corrFamily</code> models: see Details);<br><code>VarCorr</code>: alternative extractor for random-effect (co)variance and optionally residual variance, in a data frame format;<br><code>residVar</code>: for residual variance parameters, family dispersion parameters, or information about residual variance models;<br><code>get_residVar</code>: alternative extractor of residual variances with different features inherited from <code>get_predVar</code>;<br><code>get_inits_from_fit</code>: extracts estimated parameters from a fit, in a different format from <code>get_fittedPars</code>.<br></p>
<p><code>remove_from_parlist</code> removes elements from a list of parameters, and from its <code>type</code> attribute. 
</p>


<h3>Usage</h3>

<pre><code class="language-R">get_fittedPars(object, partial_rC="rm", phiPars=TRUE)
get_ranPars(object, which=NULL, verbose=TRUE, 
            lambda_names = "Group.Term", ...)
remove_from_parlist(parlist, removand=NULL, rm_names=names(unlist(removand)))
</code></pre>


<h3>Arguments</h3>

<table>
<tr style="vertical-align: top;">
<td><code>object</code></td>
<td>
<p>An object of class <code>HLfit</code>, as returned by the fitting functions in <code>spaMM</code>.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>partial_rC</code></td>
<td>
<p>Controls handling of partially-fixed random coefficients. The default as set by <code>"rm"</code> is to remove the fixed values as for other parameters. But alternative option <code>"keep"</code> will keep the fixed value, and <code>NA</code> will replace it by a NA.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>phiPars</code></td>
<td>
<p>Boolean: whether to include the parameters of any residual-dispersion model for <code class="reqn">phi</code> (se <code>phi-resid.model</code>) in the <code>rdisPars</code> element of the returned list.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>which</code></td>
<td>
<p>NULL or character string. Use <code>which="corrPars"</code> to get the correlation parameters. Use <code>which="lambda"</code> to get variances. see Details for the meaning of this for heteroscedastic models, and Value for other possible <code>which</code> values.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>...</code></td>
<td>
<p>Other arguments that may be needed by some method.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>verbose</code></td>
<td>
<p>Boolean: Whether to print some notes.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>parlist</code></td>
<td>
<p>A list of parameters. see Details.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>removand</code></td>
<td>
<p>Optional. A list of parameters to be removed from <code>parlist</code>.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>rm_names</code></td>
<td>
<p>Names of parameters to be removed from <code>parlist</code>. Mandatory if <code>removand</code> is not given.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>lambda_names</code></td>
<td>
<p>By default the names of the <code>lambda</code> vector are built from the Group (RHS of random effect term of the for (LHS|RHS)) and Term (variable from LHS). By setting a non-default value of <code>lambda_names</code> the names will be integer indices of the random-effect term in the model formula (currently, for <code>which="ranef_var"</code> or NULL.</p>
</td>
</tr>
</table>
<h3>Details</h3>

<p>For heteroscedastic random effects, such as conditional autoregressive models, the variance parameter “lambda” refers to a common scaling coefficient. For other random-effect models, “lambda” typically refers to the single variance parameter.
</p>
<p><code>remove_from_parlist</code> is designed to manipulate structured lists of parameters, such as a list with elements <code>phi</code>, <code>lambda</code>, and <code>corrPars</code>, the latter being itself a list structured as the return value of <code>get_ranPars(.,which="corrPars")</code>. <code>parlist</code> may have an attribute <code>type</code>, also with elements <code>phi</code>, <code>lambda</code>, and <code>corrPars</code>... If given, <code>removand</code> must have the same structure (but typically not all the elements of <code>parlist</code>); otherwise, <code>rm_names</code> must have elements which match names of <code>unlist(names(parlist))</code>. 
</p>
<p>If a corrFamily parameter is fixed through the formula term, as in <code>ARp(1|time, p=3, fixed=c(p2=0))</code>, the fixed parameter is not considered a model parameter and <code>get_ranPars</code> will not extract it from the object. However, the parameter will be extracted if it has been fixed through <code>fitme</code>'s <code>fixed</code> argument rather than through the formula term (see example in <code>ARp</code>).
</p>


<h3>Value</h3>

<p><code>get_fittedPars</code> returns a list of model parameters, with possible elements: <code>beta</code> (fixed-effect coefficients); <code>lambda</code>, <code>phi</code>, <code>ranCoefs</code> and <code>corrPars</code> (same meaning as in <code>fixed</code> parameters); <code>hyper</code>, for <code>multIMRF</code> models;  
the residual-dispersion parameters <code>beta_prec</code>, <code>NB_shape</code> and <code>COMP_nu</code> when they are single scalars; 
and <code>rdisPars</code> for more complex residual-dispersion parameters. See the specific <code>resid.model</code> and <code>phi-resid.model</code> documentations for the <code>rdisPars</code> format, dependent on the nature of the residual-dispersion parameter being modelized. Use <code>residVar(., which="fam_parm")</code> to extract the vector of fitted values of the dispersion parameter. 
</p>
<p><code>get_ranPars(.,which="corrPars")</code> returns a (possibly nested) list of correlation parameters (or NULL if there is no such parameter). Top-level elements correspond to the different random effects. The list has a <code>"type"</code> attribute having the same nested-list structure and describing whether and how the parameters where fitted: <code>"fix"</code> means they where fixed, not fitted; <code>"var"</code> means they were fitted by <code>HLfit</code>'s specific algorithms; <code>"outer"</code> means they were fitted by a generic optimization method. 
</p>
<p><code>get_ranPars(.,which="lambda")</code> returns a vector of variance values, one per random effect, including both fixed, “outer”- and “inner”-optimized ones. The variances of random-coefficients terms with correlation parameters are not included.
</p>
<p><code>get_ranPars(.,which="outer_lambda")</code> returns only “outer”-optimized variance parameters, ignoring those fitted by <code>HLfit</code>'s specific algorithms. 
</p>
<p><code>get_ranPars(.,which=NULL)</code> (the default) is not fully defined. It returns a list including the results of <code>which="lambda"</code> and <code>which="corrPars"</code>, but possibly other elements too. 
</p>
<p><code>get_ranPars(.,which="fitted")</code> is designed to provide fitted parameters with respect to which an information matrix is to be calculated (using <span class="pkg">numDeriv</span>. It excludes fixed values, and has no <code>type</code> attribute. 
</p>
<p><code>get_ranPars(. which="ranef_var")</code> (experimental) returns a list with elements
</p>

<dl>
<dt><code>Var</code></dt>
<dd>
<p>same as <code>get_ranPars(.,which="lambda")</code></p>
</dd>
<dt><code>lembda_est</code></dt>
<dd>
<p>A vector of variance values, one for each level of each random effect</p>
</dd>
<dt><code>outer</code></dt>
<dd>
<p>A vector or outer-optimized variance values, as returned by <code>get_ranPars(.,which="outer_lambda")</code></p>
</dd>
<dt>...</dt>
<dd>
<p>Other elements, subject to change in later versions.</p>
</dd>
</dl>
<p><code>remove_from_parlist</code> returns a list of model parameters with given elements removed, and likewise for its (optional) <code>type</code> attribute. See Details for context of application.
</p>


<h3>See Also</h3>

<p>See <code>get_fittedPars</code>, <code>VarCorr</code>, <code>residVar</code>, <code>get_residVar</code>, or <code>get_inits_from_fit</code> as described in the quick guide above. 
</p>


<h3>Examples</h3>

<pre><code class="language-R">data("wafers")
m1 &lt;- HLfit(y ~X1+X2+(1|batch), resid.model = ~ 1, data=wafers, method="ML")
get_ranPars(m1,which="corrPars") # NULL since no correlated random effect     

parlist1 &lt;- list(lambda=1,phi=2,corrPars=list("1"=list(rho=3,nu=4),"2"=list(rho=5)))
parlist2 &lt;- list(lambda=NA,corrPars=list("1"=list(rho=NA))) # values of elements do not matter
remove_from_parlist(parlist1,parlist2) ## same result as:
remove_from_parlist(parlist1,rm_names = names(unlist(parlist2)))
</code></pre>


</div>