<div class="container">

<table style="width: 100%;"><tr>
<td>RegLogServer</td>
<td style="text-align: right;">R Documentation</td>
</tr></table>
<h2>Login and registration moduleServer</h2>

<h3>Description</h3>

<p>RegLogServer is an R6 class to use for handling the whole
backend of login and registration component of your shinyApp.
</p>


<h3>Public fields</h3>

<div class="r6-fields">

<dl>
<dt><code>is_logged</code></dt>
<dd>
<p>reactiveVal containing logical indicating if the user
is logged in</p>
</dd>
<dt><code>user_id</code></dt>
<dd>
<p>reactiveVal containing character specifying the logged
user name. If the user is not logged in, it will consist
of uuid generated with <code>uuid::UUIDgenerate</code></p>
</dd>
<dt><code>user_mail</code></dt>
<dd>
<p>reactiveVal cantaining character string specifying the
logged user mail. When not logged in, it contains NULL.</p>
</dd>
<dt><code>account_id</code></dt>
<dd>
<p>reactiveVal caintaining integer specifying the logged
user account's id number: for SQL database it is equal to the value
contained withing <code>id</code> variable. For googlesheets database it is equal to
the row number - 1 (the header). If not logged, it contains NULL.</p>
</dd>
<dt><code>mail_message</code></dt>
<dd>
<p>reactiveVal containing most recent RegLogConnectorMessage
received from mailConnector</p>
</dd>
<dt><code>message</code></dt>
<dd>
<p>reactiveVal containing most recent RegLogConnectorMessage
received from dbConnector or generated by RegLogServer itself.</p>
</dd>
<dt><code>module_id</code></dt>
<dd>
<p>character storing ID for reglog_system module.</p>
</dd>
<dt><code>dbConnector</code></dt>
<dd>
<p><code>RegLogConnector</code> object used for communication with the
database. Build-in children classes are <code>RegLogDBIConnector</code> and
<code>RegLogGsheetConnector</code>.</p>
</dd>
<dt><code>mailConnector</code></dt>
<dd>
<p><code>RegLogConnector</code> object used for sending emails.
Built-in children classes are <code>RegLogEmayiliConnector</code> and
<code>RegLogGmailrConnector</code>.</p>
</dd>
<dt><code>log</code></dt>
<dd>
<p>list containing all messages send and received.</p>
</dd>
<dt><code>UI_list_login</code></dt>
<dd>
<p>reactiveVal holding the tagList of whole login UI.</p>
</dd>
<dt><code>UI_list_resetPass</code></dt>
<dd>
<p>reactiveVal holding the tagList of whole resetPass UI.</p>
</dd>
<dt><code>UI_list_credsEdit</code></dt>
<dd>
<p>reactiveVal holding the tagList of whole credentioals
edit UI.</p>
</dd>
<dt><code>UI_list_register</code></dt>
<dd>
<p>reactiveVal holding the tagList of whole register UI.</p>
</dd>
</dl>
</div>


<h3>Methods</h3>



<h4>Public methods</h4>


<ul>
<li> <p><a href="#method-RegLogServer-new"><code>RegLogServer$new()</code></a>
</p>
</li>
<li> <p><a href="#method-RegLogServer-logout"><code>RegLogServer$logout()</code></a>
</p>
</li>
<li> <p><a href="#method-RegLogServer-get_logs"><code>RegLogServer$get_logs()</code></a>
</p>
</li>
<li> <p><a href="#method-RegLogServer-clone"><code>RegLogServer$clone()</code></a>
</p>
</li>
</ul>
<hr>
<a id="method-RegLogServer-new"></a>



<h4>Method <code>new()</code>
</h4>

<p>Initialize 'ReglogServer' moduleServer
</p>


<h5>Usage</h5>

<div class="r"><pre>RegLogServer$new(
  dbConnector,
  mailConnector,
  app_name = basename(getwd()),
  app_address = NULL,
  lang = "en",
  custom_txts = NULL,
  use_modals = TRUE,
  module_id = "login_system"
)</pre></div>



<h5>Arguments</h5>

<div class="arguments">

<dl>
<dt><code>dbConnector</code></dt>
<dd>
<p>object of class <code>RegLogConnector</code> handling the reads
from and writes to database.
Two available in the package are <code>RegLogDBIConnector</code> and <code>RegLogGsheetsConnector</code>.
See their documentation for more information about usage and creation of
custom dbConnectors.</p>
</dd>
<dt><code>mailConnector</code></dt>
<dd>
<p>object of class <code>RegLogConnector</code> handling the email
sending to the user for register confirmation and password reset.
Two available in the package are <code>RegLogEmayiliConnector</code> and
<code>RegLogGmailrConnector</code>. See their documentation for more information
about usage and creation of custom mailConnectors.</p>
</dd>
<dt><code>app_name</code></dt>
<dd>
<p>Name of the app to refer during correspondence to users.
Defaults to the name of working directory.</p>
</dd>
<dt><code>app_address</code></dt>
<dd>
<p>URL to refer to during correspondence to users. If left
at NULL, the URL will be parsed from <code>session$clientData</code>.</p>
</dd>
<dt><code>lang</code></dt>
<dd>
<p>character specyfiyng which language to use for all texts
generated in the UI. Defaults to 'en' for English. Currently 'pl' for
Polish is also supported.</p>
</dd>
<dt><code>custom_txts</code></dt>
<dd>
<p>named list containing character strings with custom
messages. Defaults to NULL, so all built-in strings will be used.</p>
</dd>
<dt><code>use_modals</code></dt>
<dd>
<p>either logical indicating if all (<code>TRUE</code>) or none (<code>FALSE</code>)
modalDialogs should be shown or character vector indicating which modals
should be shown. For more information see details.</p>
</dd>
<dt><code>module_id</code></dt>
<dd>
<p>Character declaring the id of the module. Defaults to 'login_system'.
Recommended to keep it that way, unless it would cause any namespace issues.</p>
</dd>
</dl>
</div>


<hr>
<a id="method-RegLogServer-logout"></a>



<h4>Method <code>logout()</code>
</h4>

<p>Method logging out logged user
</p>


<h5>Usage</h5>

<div class="r"><pre>RegLogServer$logout()</pre></div>


<hr>
<a id="method-RegLogServer-get_logs"></a>



<h4>Method <code>get_logs()</code>
</h4>

<p>Method to receive all saved logs from the object in the form
of single data.frame
</p>


<h5>Usage</h5>

<div class="r"><pre>RegLogServer$get_logs()</pre></div>



<h5>Returns</h5>

<p>data.frame
</p>


<hr>
<a id="method-RegLogServer-clone"></a>



<h4>Method <code>clone()</code>
</h4>

<p>The objects of this class are cloneable with this method.
</p>


<h5>Usage</h5>

<div class="r"><pre>RegLogServer$clone(deep = FALSE)</pre></div>



<h5>Arguments</h5>

<div class="arguments">

<dl>
<dt><code>deep</code></dt>
<dd>
<p>Whether to make a deep clone.</p>
</dd>
</dl>
</div>




<h3>Examples</h3>

<pre><code class="language-R"># Run only in interactive session #

if (interactive()) {
  
  library(shiny.reglog)
  
  # for exemplary setup temporary SQLite database will be created
  library("DBI")
  library("RSQLite")
  temp_sqlite &lt;- tempfile(fileext = ".sqlite")
  conn &lt;- DBI::dbConnect(RSQLite::SQLite(),
                         dbname = temp_sqlite)
  DBI_tables_create(conn)
  DBI::dbDisconnect(conn)
  
  # create minimalistic UI
  ui &lt;- navbarPage(
    title = "RegLog system",
    tabPanel("Register", RegLog_register_UI("custom_id")),
    tabPanel("Login", RegLog_login_UI("custom_id")),
    tabPanel("Credentials edit", RegLog_credsEdit_UI("custom_id")),
    tabPanel("Password reset", RegLog_resetPass_UI("custom_id"))
  )
  
  # create server logic
  server &lt;- function(input, output, session) {
    
    # create dbConnector with connection to the temporary SQLite database
    dbConnector &lt;- RegLogDBIConnector$new(
      driver = RSQLite::SQLite(),
      dbname = temp_sqlite)
    
    # create mockup mailConnector
    mailConnector &lt;- RegLogConnector$new()
    
    # create RegLogServer
    RegLog &lt;- RegLogServer$new(
      dbConnector = dbConnector,
      mailConnector = mailConnector,
      ## all arguments below are optional! ##
      app_name = "RegLog example",
      app_address = "https://reglogexample.com",
      lang = "en",
      # custom texts as a named list with strings
      custom_txts = list(
        user_id = "Name of the user",
        register_success_t= "Congratulations - you have been registered in 
                             successfully with RegLog system!"),
      # use modals as a named list of FALSE to inhibit specific modal
      use_modals = list(
        login_success = FALSE),
      # custom module id - provide the same to the UI elements!
      module_id = "custom_id")
  }
  
  shinyApp(ui, server)
}
</code></pre>


</div>