<div class="container">

<table style="width: 100%;"><tr>
<td>sits_get_data</td>
<td style="text-align: right;">R Documentation</td>
</tr></table>
<h2>Get time series from data cubes and cloud services</h2>

<h3>Description</h3>

<p>Retrieve a set of time series from a data cube or from
a time series service. Data cubes and puts it in a "sits tibble".
Sits tibbles are the main structures of sits package.
They contain both the satellite image time series and their metadata.
</p>


<h3>Usage</h3>

<pre><code class="language-R">sits_get_data(
  cube,
  samples,
  ...,
  start_date = NULL,
  end_date = NULL,
  label = "NoClass",
  bands = NULL,
  crs = "EPSG:4326",
  impute_fn = impute_linear(),
  label_attr = NULL,
  n_sam_pol = 30L,
  pol_avg = FALSE,
  pol_id = NULL,
  sampling_type = "random",
  multicores = 2L,
  progress = TRUE
)

## Default S3 method:
sits_get_data(cube, samples, ...)

## S3 method for class 'csv'
sits_get_data(
  cube,
  samples,
  ...,
  bands = NULL,
  crs = "EPSG:4326",
  impute_fn = impute_linear(),
  multicores = 2,
  progress = FALSE
)

## S3 method for class 'shp'
sits_get_data(
  cube,
  samples,
  ...,
  label = "NoClass",
  start_date = NULL,
  end_date = NULL,
  bands = NULL,
  impute_fn = impute_linear(),
  label_attr = NULL,
  n_sam_pol = 30,
  pol_avg = FALSE,
  pol_id = NULL,
  sampling_type = "random",
  multicores = 2,
  progress = FALSE
)

## S3 method for class 'sf'
sits_get_data(
  cube,
  samples,
  ...,
  start_date = NULL,
  end_date = NULL,
  bands = NULL,
  impute_fn = impute_linear(),
  label = "NoClass",
  label_attr = NULL,
  n_sam_pol = 30,
  pol_avg = FALSE,
  pol_id = NULL,
  sampling_type = "random",
  multicores = 2,
  progress = FALSE
)

## S3 method for class 'sits'
sits_get_data(
  cube,
  samples,
  ...,
  bands = NULL,
  crs = "EPSG:4326",
  impute_fn = impute_linear(),
  multicores = 2,
  progress = FALSE
)

## S3 method for class 'data.frame'
sits_get_data(
  cube,
  samples,
  ...,
  start_date = NULL,
  end_date = NULL,
  bands = NULL,
  label = "NoClass",
  crs = "EPSG:4326",
  impute_fn = impute_linear(),
  multicores = 2,
  progress = FALSE
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr style="vertical-align: top;">
<td><code>cube</code></td>
<td>
<p>Data cube from where data is to be retrieved.
(tibble of class "raster_cube").</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>samples</code></td>
<td>
<p>Location of the samples to be retrieved.
Either a tibble of class "sits", an "sf" object,
the name of a shapefile or csv file, or
a data.frame with columns "longitude" and "latitude".</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>...</code></td>
<td>
<p>Specific parameters for specific cases.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>start_date</code></td>
<td>
<p>Start of the interval for the time series - optional
(Date in "YYYY-MM-DD" format).</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>end_date</code></td>
<td>
<p>End of the interval for the time series - optional
(Date in "YYYY-MM-DD" format).</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>label</code></td>
<td>
<p>Label to be assigned to the time series (optional)
(character vector of length 1).</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>bands</code></td>
<td>
<p>Bands to be retrieved - optional
(character vector).</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>crs</code></td>
<td>
<p>Default crs for the samples
(character vector of length 1).</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>impute_fn</code></td>
<td>
<p>Imputation function to remove NA.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>label_attr</code></td>
<td>
<p>Attribute in the shapefile or sf object to be used
as a polygon label.
(character vector of length 1).</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>n_sam_pol</code></td>
<td>
<p>Number of samples per polygon to be read
for POLYGON or MULTIPOLYGON shapefiles or sf objects
(single integer).</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>pol_avg</code></td>
<td>
<p>Logical: summarize samples for each polygon?</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>pol_id</code></td>
<td>
<p>ID attribute for polygons
(character vector of length 1)</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>sampling_type</code></td>
<td>
<p>Spatial sampling type: random, hexagonal,
regular, or Fibonacci.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>multicores</code></td>
<td>
<p>Number of threads to process the time series
(integer, with min = 1 and max = 2048).</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>progress</code></td>
<td>
<p>Logical: show progress bar?</p>
</td>
</tr>
</table>
<h3>Value</h3>

<p>A tibble of class "sits" with set of time series
&lt;longitude, latitude, start_date, end_date, label, cube, time_series&gt;.
</p>


<h3>Note</h3>

<p>There are four ways of specifying data to be retrieved using the
<code>samples</code> parameter:
(a) CSV file: a CSV file with columns
<code>longitude</code>, <code>latitude</code>,
<code>start_date</code>, <code>end_date</code> and <code>label</code> for each sample;
(b) SHP file: a shapefile in POINT or POLYGON geometry
containing the location of the samples and an attribute to be
used as label. Also, provide start and end date for the time series;
(c) sits object: A sits tibble;
(d) sf object: An <code>link[sf]{sf}</code> object with POINT or POLYGON geometry;
(e) data.frame: A data.frame with with mandatory columns
<code>longitude</code> and <code>latitude</code>.
</p>


<h3>Author(s)</h3>

<p>Gilberto Camara
</p>


<h3>Examples</h3>

<pre><code class="language-R">if (sits_run_examples()) {
    # reading a lat/long from a local cube
    # create a cube from local files
    data_dir &lt;- system.file("extdata/raster/mod13q1", package = "sits")
    raster_cube &lt;- sits_cube(
        source = "BDC",
        collection = "MOD13Q1-6.1",
        data_dir = data_dir
    )
    samples &lt;- tibble::tibble(longitude = -55.66738, latitude = -11.76990)
    point_ndvi &lt;- sits_get_data(raster_cube, samples)
    #
    # reading samples from a cube based on a  CSV file
    csv_file &lt;- system.file("extdata/samples/samples_sinop_crop.csv",
        package = "sits"
    )
    points &lt;- sits_get_data(cube = raster_cube, samples = csv_file)

    # reading a shapefile from BDC (Brazil Data Cube)
    bdc_cube &lt;- sits_cube(
            source = "BDC",
            collection = "CBERS-WFI-16D",
            bands = c("NDVI", "EVI"),
            tiles = c("007004", "007005"),
            start_date = "2018-09-01",
            end_date = "2018-10-28"
    )
    # define a shapefile to be read from the cube
    shp_file &lt;- system.file("extdata/shapefiles/bdc-test/samples.shp",
            package = "sits"
    )
    # get samples from the BDC based on the shapefile
    time_series_bdc &lt;- sits_get_data(
        cube = bdc_cube,
        samples = shp_file
    )
}

</code></pre>


</div>