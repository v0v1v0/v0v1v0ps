<div class="container">

<table style="width: 100%;"><tr>
<td>getX</td>
<td style="text-align: right;">R Documentation</td>
</tr></table>
<h2>Get Model Design Matrix</h2>

<h3>Description</h3>

<p>Return the design matrix for a fitted model, with some
additional options.
</p>


<h3>Usage</h3>

<pre><code class="language-R">getX(
  mod,
  data = NULL,
  contrasts = NULL,
  add.data = FALSE,
  centre = FALSE,
  scale = FALSE,
  as.df = FALSE,
  merge = FALSE,
  env = NULL
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr style="vertical-align: top;">
<td><code>mod</code></td>
<td>
<p>A fitted model object, or a list or nested list of such objects.
Can also be a model formula(s) or character vector(s) of term names (in
which case <code>data</code> must be supplied).</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>data</code></td>
<td>
<p>An optional dataset, used to refit the model(s) and/or construct
the design matrix.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>contrasts</code></td>
<td>
<p>Optional, a named list of contrasts to apply to factors (see
the <code>contrasts.arg</code> argument of <code>model.matrix()</code> for specification). These
will override any existing contrasts in the data or model call.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>add.data</code></td>
<td>
<p>Logical, whether to append data not specified in the model
formula (with factors converted to dummy variables).</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>centre, scale</code></td>
<td>
<p>Logical, whether to mean-centre and/or scale terms by
standard deviations (for interactions, this is carried out prior to
construction of product terms). Alternatively, a numeric vector of
means/standard deviations (or other statistics) can be supplied, whose
names must match term names.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>as.df</code></td>
<td>
<p>Logical, whether to return the matrix as a data frame (without
modifying names).</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>merge</code></td>
<td>
<p>Logical. If <code>TRUE</code>, and <code>mod</code> is a list or nested list, a single
matrix containing all terms is returned (variables must be the same
length).</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>env</code></td>
<td>
<p>Environment in which to look for model data (if none supplied).
Defaults to the <code>formula()</code> environment.</p>
</td>
</tr>
</table>
<h3>Details</h3>

<p>This is primarily a convenience function to enable more flexible
construction of design matrices, usually for internal use and for further
processing. Use cases include processing and/or return of terms which may
not be present in a typical design matrix (e.g. constituents of product
terms, dummy variables).
</p>


<h3>Value</h3>

<p>A matrix or data frame of model(s) terms, or a list or nested list of
same.
</p>


<h3>See Also</h3>

<p><code>model.matrix()</code>
</p>


<h3>Examples</h3>

<pre><code class="language-R"># Model design matrix (original)
m &lt;- shipley.growth[[3]]
x1 &lt;- model.matrix(m)
x2 &lt;- getX(m)
stopifnot(all.equal(x1, x2, check.attributes = FALSE))

# Using formula or term names (supply data)
d &lt;- shipley
x1 &lt;- getX(formula(m), data = d)
x2 &lt;- getX(names(lme4::fixef(m)), data = d)
stopifnot(all.equal(x1, x2))

# Scaled terms
head(getX(m, centre = TRUE, scale = TRUE))

# Combined matrix for SEM
head(getX(shipley.sem, merge = TRUE))
head(getX(shipley.sem, merge = TRUE, add.data = TRUE))  # add other variables
</code></pre>


</div>