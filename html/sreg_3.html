<div class="container">

<table style="width: 100%;"><tr>
<td>sreg</td>
<td style="text-align: right;">R Documentation</td>
</tr></table>
<h2>Estimate Average Treatment Effects (ATEs) and Corresponding Standard Errors</h2>

<h3>Description</h3>

<p>Estimate the ATE(s) and the corresponding standard error(s) for a (collection of) treatment(s) relative to a control.
</p>


<h3>Usage</h3>

<pre><code class="language-R">sreg(Y, S = NULL, D, G.id = NULL, Ng = NULL, X = NULL, HC1 = TRUE)
</code></pre>


<h3>Arguments</h3>

<table>
<tr style="vertical-align: top;">
<td><code>Y</code></td>
<td>
<p>a numeric <code class="reqn">n \times 1</code> <code>vector/matrix/data.frame/tibble</code> of the observed outcomes</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>S</code></td>
<td>
<p>a numeric <code class="reqn">n \times 1</code> <code>vector/matrix/data.frame/tibble</code> of strata indicators indexed by <code class="reqn">\{1, 2, 3, \ldots\}</code>;  if <code>NULL</code> then the estimation is performed assuming no stratification</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>D</code></td>
<td>
<p>a numeric <code class="reqn">n \times 1</code> <code>vector/matrix/data.frame/tibble</code> of treatments indexed by <code class="reqn">\{0, 1, 2, \ldots\}</code>, where <code class="reqn">\code{D} = 0</code> denotes the control</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>G.id</code></td>
<td>
<p>a numeric <code class="reqn">n \times 1</code> <code>vector/matrix/data.frame/tibble</code> of cluster indicators; if <code>NULL</code> then estimation is performed assuming treatment is assigned at the individual level</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>Ng</code></td>
<td>
<p>a numeric <code class="reqn">n \times 1</code> <code>vector/matrix/data.frame/tibble</code> of cluster sizes; if <code>NULL</code> then <code>Ng</code> is assumed to be equal to the number of available observations in every cluster</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>X</code></td>
<td>
<p>a <code>matrix/data.frame/tibble</code> with columns representing the covariate values for every observation; if <code>NULL</code> then the estimator without linear adjustments is applied. (Note: <code>sreg</code> cannot use individual-level covariates for covariate adjustment in cluster-randomized experiments. Any individual-level covariates will be aggregated to their cluster-level averages)</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>HC1</code></td>
<td>
<p>a <code>TRUE/FALSE</code> logical argument indicating whether the small sample correction should be applied to the variance estimator</p>
</td>
</tr>
</table>
<h3>Value</h3>

<p>An object of class <code>sreg</code> that is a list containing the following elements:
</p>

<ul>
<li> <p><code>tau.hat</code>: a <code class="reqn">1 \times |\mathcal A|</code> <code>vector</code> of ATE estimates, where <code class="reqn">|\mathcal A|</code> represents the number of treatments
</p>
</li>
<li> <p><code>se.rob</code>: a <code class="reqn">1 \times |\mathcal A|</code> <code>vector</code> of standard errors estimates, where <code class="reqn">|\mathcal A|</code> represents the number of treatments
</p>
</li>
<li> <p><code>t.stat</code>: a <code class="reqn">1 \times |\mathcal A|</code> <code>vector</code> of <code class="reqn">t</code>-statistics, where <code class="reqn">|\mathcal A|</code> represents the number of treatments
</p>
</li>
<li> <p><code>p.value</code>: a <code class="reqn">1 \times |\mathcal A|</code> <code>vector</code> of corresponding <code class="reqn">p</code>-values, where <code class="reqn">|\mathcal A|</code> represents the number of treatments
</p>
</li>
<li> <p><code>CI.left</code>: a <code class="reqn">1 \times |\mathcal A|</code> <code>vector</code> of the left bounds of the 95% as. confidence interval
</p>
</li>
<li> <p><code>CI.right</code>: a <code class="reqn">1 \times |\mathcal A|</code> <code>vector</code> of the right bounds of the 95% as. confidence interval
</p>
</li>
<li> <p><code>data</code>: an original data of the form <code>data.frame(Y, S, D, G.id, Ng, X)</code>
</p>
</li>
<li> <p><code>lin.adj</code>: a <code>data.frame</code> representing the covariates that were used in implementing linear adjustments
</p>
</li>
</ul>
<h3>Author(s)</h3>

<p><strong>Authors</strong>:
</p>
<p>Juri Trifonov <a href="mailto:jutrifonov@uchicago.edu">jutrifonov@uchicago.edu</a>
</p>
<p>Yuehao Bai <a href="mailto:yuehao.bai@usc.edu">yuehao.bai@usc.edu</a>
</p>
<p>Azeem Shaikh <a href="mailto:amshaikh@uchicago.edu">amshaikh@uchicago.edu</a>
</p>
<p>Max Tabord-Meehan <a href="mailto:maxtm@uchicago.edu">maxtm@uchicago.edu</a>
</p>
<p><strong>Maintainer</strong>:
</p>
<p>Juri Trifonov <a href="mailto:jutrifonov@uchicago.edu">jutrifonov@uchicago.edu</a>
</p>


<h3>References</h3>

<p>Bugni, F. A., Canay, I. A., and Shaikh, A. M. (2018). Inference Under Covariate-Adaptive Randomization. <em>Journal of the American Statistical Association</em>, 113(524), 1784â€“1796, <a href="https://doi.org/10.1080/01621459.2017.1375934">doi:10.1080/01621459.2017.1375934</a>.
</p>
<p>Bugni, F., Canay, I., Shaikh, A., and Tabord-Meehan, M. (2024+). Inference for Cluster Randomized Experiments with Non-ignorable Cluster Sizes. <em>Forthcoming in the Journal of Political Economy: Microeconomics</em>, <a href="https://doi.org/10.48550/arXiv.2204.08356">doi:10.48550/arXiv.2204.08356</a>.
</p>
<p>Jiang, L., Linton, O. B., Tang, H., and Zhang, Y. (2023+). Improving Estimation Efficiency via Regression-Adjustment in Covariate-Adaptive Randomizations with Imperfect Compliance. <em>Forthcoming in Review of Economics and Statistics</em>, <a href="https://doi.org/10.48550/arXiv.2204.08356">doi:10.48550/arXiv.2204.08356</a>.
</p>


<h3>Examples</h3>

<pre><code class="language-R">library("sreg")
library("dplyr")
library("haven")
### Example 1. Simulated Data.
data &lt;- sreg.rgen(n = 1000, tau.vec = c(0), n.strata = 4, cluster = FALSE)
Y &lt;- data$Y
S &lt;- data$S
D &lt;- data$D
X &lt;- data.frame("x_1" = data$x_1, "x_2" = data$x_2)
result &lt;- sreg(Y, S, D, G.id = NULL, Ng = NULL, X)
print(result)
### Example 2. Empirical Data.
?AEJapp
data("AEJapp")
data &lt;- AEJapp
head(data)
Y &lt;- data$gradesq34
D &lt;- data$treatment
S &lt;- data$class_level
data.clean &lt;- data.frame(Y, D, S)
data.clean &lt;- data.clean %&gt;%
  mutate(D = ifelse(D == 3, 0, D))
Y &lt;- data.clean$Y
D &lt;- data.clean$D
S &lt;- data.clean$S
table(D = data.clean$D, S = data.clean$S)
result &lt;- sreg(Y, S, D)
print(result)
pills &lt;- data$pills_taken
age &lt;- data$age_months
data.clean &lt;- data.frame(Y, D, S, pills, age)
data.clean &lt;- data.clean %&gt;%
  mutate(D = ifelse(D == 3, 0, D))
Y &lt;- data.clean$Y
D &lt;- data.clean$D
S &lt;- data.clean$S
X &lt;- data.frame("pills" = data.clean$pills, "age" = data.clean$age)
result &lt;- sreg(Y, S, D, G.id = NULL, X = X)
print(result)
</code></pre>


</div>