<div class="container">

<table style="width: 100%;"><tr>
<td>scores_quantiles</td>
<td style="text-align: right;">R Documentation</td>
</tr></table>
<h2>Quantile and interval scores</h2>

<h3>Description</h3>

<p>Compute quantile and interval scores, for  
given quantile predictions
</p>


<h3>Usage</h3>

<pre><code class="language-R">qs_quantiles(y, x, alpha)

ints_quantiles(y, x_lower, x_upper, target_coverage)

qs_sample(y, dat, alpha, w = NULL, type = 7, show_messages = TRUE)

ints_sample(y, dat, target_coverage, w = NULL, type = 7, show_messages = TRUE)
</code></pre>


<h3>Arguments</h3>

<table>
<tr style="vertical-align: top;">
<td><code>y</code></td>
<td>
<p>vector of observations</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>x</code></td>
<td>
<p>vector of quantile predictions</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>alpha</code></td>
<td>
<p>quantile level of interest</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>x_lower, x_upper</code></td>
<td>
<p>vector of quantile predictions (lower and upper endpoints of prediction intervals)</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>target_coverage</code></td>
<td>
<p>target (i.e., nominal) coverage level of prediction interval</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>dat</code></td>
<td>
<p>vector or matrix (depending on <code>y</code>; see details)
of simulation draws from forecast distribution.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>w</code></td>
<td>
<p>vector of observation weights (currently ignored)</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>type</code></td>
<td>
<p>integer between 1 and 9 that is passed on to stats function quantile (specifies algorithm for 
empirical quantile estimation; defaults to 7)</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>show_messages</code></td>
<td>
<p>logical; display of messages (does not affect warnings and errors).</p>
</td>
</tr>
</table>
<h3>Details</h3>

<p>For a vector <code>y</code> of length n, <code>dat</code> should be given as a matrix
with n rows. If <code>y</code> has length 1, then <code>dat</code> may be a vector.
</p>


<h3>Value</h3>

<p>A vector of score values. Smaller values indicate better forecasts. Note that 
the interval score refers to the central prediction interval at level <code>target_coverage</code>.
</p>


<h3>References</h3>

<p>Quantile score
</p>
<p>Koenker, R. and G. Bassett (1978): ‘Regression quantiles’, Econometrica 46, 33-50. <a href="https://doi.org/10.2307/1913643">doi:10.2307/1913643</a>
</p>
<p>Interval score
</p>
<p>Gneiting, T. and A.E. Raftery (2007):
‘Strictly proper scoring rules, prediction and estimation’,
Journal of the American Statistical Association 102, 359-378. <a href="https://doi.org/10.1198/016214506000001437">doi:10.1198/016214506000001437</a>
</p>


<h3>See Also</h3>

<p>The syntax of <code>qs_sample</code> and <code>ints_sample</code> is analogous to the functions documented on <code>scores_sample_univ</code>.
</p>


<h3>Examples</h3>

<pre><code class="language-R"># Example 1: Illustrate that interval score is proportional to sum of two quantile scores
target_coverage &lt;- .8
# corresponding quantile levels
alpha_1 &lt;- .5*(1-target_coverage)
alpha_2 &lt;- 1-.5*(1-target_coverage)
# compute interval score
ints_quantiles(y = 1, x_lower = qnorm(alpha_1), 
x_upper = qnorm(alpha_2), target_coverage = target_coverage)
# compute sum of quantile scores (scaled by 2/(1-target_coverage))
(2/(1-target_coverage))*(qs_quantiles(y = 1, x = qnorm(alpha_1), alpha = alpha_1) + 
qs_quantiles(y = 1, x = qnorm(alpha_2), alpha = alpha_2))

# Example 2: Compare exact to simulated quantile forecast from standard normal distribution
qs_quantiles(y = 1, x = qnorm(.1), alpha = .1)
qs_sample(y = 1, dat = rnorm(500), alpha = .1)
</code></pre>


</div>