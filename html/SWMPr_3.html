<div class="container">

<table style="width: 100%;"><tr>
<td>aggreswmp</td>
<td style="text-align: right;">R Documentation</td>
</tr></table>
<h2>Aggregate swmpr data</h2>

<h3>Description</h3>

<p>Aggregate swmpr data by specified time period and method
</p>


<h3>Usage</h3>

<pre><code class="language-R">aggreswmp(swmpr_in, ...)

## S3 method for class 'swmpr'
aggreswmp(
  swmpr_in,
  by,
  FUN = function(x) mean(x, na.rm = TRUE),
  params = NULL,
  aggs_out = FALSE,
  plot = FALSE,
  na.action = na.pass,
  ...
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr style="vertical-align: top;">
<td><code>swmpr_in</code></td>
<td>
<p>input swmpr object</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>...</code></td>
<td>
<p>additional arguments passed to other methods</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>by</code></td>
<td>
<p>chr string of time period for aggregation one of <code>'years'</code>, <code>'quarters'</code>, <code>'months'</code>, <code>'weeks'</code>, <code>'days'</code>, or <code>'hours'</code></p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>FUN</code></td>
<td>
<p>aggregation function, default <code>mean</code> with <code>na.rm = TRUE</code></p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>params</code></td>
<td>
<p>names of parameters to aggregate, default all</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>aggs_out</code></td>
<td>
<p>logical indicating if <code>data.frame</code> is returned of raw data with datetimestamp formatted as aggregation period, default <code>FALSE</code></p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>plot</code></td>
<td>
<p>logical to return a plot of the summarized data, default <code>FALSE</code></p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>na.action</code></td>
<td>
<p>function for treating missing data, default <code>na.pass</code>.  See the documentation for <code>aggregate</code> for options.</p>
</td>
</tr>
</table>
<h3>Details</h3>

<p>The function aggregates parameter data for a swmpr object by set periods of observation and a user-supplied function. It is most useful for aggregating noisy data to evaluate trends on longer time scales, or to simply reduce the size of a dataset. Data can be aggregated by <code>'years'</code>, <code>'quarters'</code>, <code>'months'</code>, <code>'weeks'</code>, <code>'days'</code>, or <code>'hours'</code> for the supplied function, which defaults to the <code>mean</code>. A swmpr object is returned for the aggregated data, although the datetimestamp vector will be converted to a date object if the aggregation period is a day or longer. Days are assigned to the date vector if the aggregation period is a week or longer based on the round method for <code>IDate</code> objects. This approach was used to facilitate plotting using predefined methods for Date and POSIX objects.
</p>
<p>The method of treating NA values for the user-supplied function should be noted since this may greatly affect the quantity of data that are returned (see the examples). Finally, the default argument for <code>na.action</code> is set to <code>na.pass</code> for swmpr objects to preserve the time series of the input data.
</p>


<h3>Value</h3>

<p>Returns an aggregated swmpr object. QAQC columns are removed if included with input object.  If <code>aggs_out = TRUE</code>, the original <code>swmpr</code> object is returned with the <code>datetimestamp</code> column formatted for the first day of the aggregation period from <code>by</code>.  A <code>ggplot</code> object of boxplot summaries is returned if <code>plot = TRUE</code>.
</p>


<h3>See Also</h3>

<p><code>aggregate</code>
</p>


<h3>Examples</h3>

<pre><code class="language-R">## Not run: 
## get data, prep
data(apacpwq)
dat &lt;- apacpwq
swmpr_in &lt;- subset(qaqc(dat), rem_cols = TRUE)

## get mean DO by quarters
aggreswmp(swmpr_in, 'quarters', params = c('do_mgl'))

## get a plot instead
aggreswmp(swmpr_in, 'quarters', params = c('do_mgl'), plot = T)

## plots with other variables
p &lt;- aggreswmp(swmpr_in, 'months', params = c('do_mgl', 'temp', 'sal'), plot = T)
p
library(ggplot2)
p + geom_boxplot(aes(fill = var)) + theme(legend.position = 'none')

## get variance of DO by years, remove NA when calculating variance
## omit NA data in output
fun_in &lt;- function(x)  var(x, na.rm = TRUE)
aggreswmp(swmpr_in, FUN = fun_in, 'years') 

## End(Not run)
</code></pre>


</div>