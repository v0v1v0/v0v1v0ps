<div class="container">

<table style="width: 100%;"><tr>
<td>sim_comp_pop</td>
<td style="text-align: right;">R Documentation</td>
</tr></table>
<h2>Calculation component</h2>

<h3>Description</h3>

<p>One of the components which can be added to a <code>sim_setup</code>. These functions can be used for adding new variables to the data.
</p>


<h3>Usage</h3>

<pre><code class="language-R">sim_comp_pop(simSetup, fun = comp_var(), by = "")

sim_comp_sample(simSetup, fun = comp_var(), by = "")

sim_comp_agg(simSetup, fun = comp_var(), by = "")
</code></pre>


<h3>Arguments</h3>

<table>
<tr style="vertical-align: top;">
<td><code>simSetup</code></td>
<td>
<p>a <code>sim_setup</code>.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>fun</code></td>
<td>
<p>a function, see details.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>by</code></td>
<td>
<p>names of variables as character; identifying groups for which fun is applied.</p>
</td>
</tr>
</table>
<h3>Details</h3>

<p>Potentially you can define a function for computation yourself. Take care that it only has one argument, named <code>dat</code>, and returns a <code>data.frame</code>. Use <code>comp_var</code> for simple data manipulation. Functions added with <code>sim_comp_pop</code> are applied before sampling; <code>sim_comp_sample</code> after sampling. Functions added with <code>sim_comp_agg</code> after aggregation.
</p>


<h3>See Also</h3>

<p><code>comp_var</code>, <code>sim_gen</code>, <code>sim_agg</code>, <code>sim_sample</code>, <code>sim_comp_N</code>, <code>sim_comp_n</code>, <code>sim_comp_popMean</code>, <code>sim_comp_popVar</code>
</p>


<h3>Examples</h3>

<pre><code class="language-R"># Standard behavior
sim_base() %&gt;% sim_gen_x() %&gt;% sim_comp_N()

# Custom data modifications
## Add predicted values of a linear model
library(saeSim)

comp_lm &lt;- function(dat) {
  dat$linearPredictor &lt;- predict(lm(y ~ x, data = dat))
  dat
}

sim_base_lm() %&gt;% sim_comp_pop(comp_lm)

# or if applied after sampling
sim_base_lm() %&gt;% sim_sample() %&gt;% sim_comp_pop(comp_lm)
</code></pre>


</div>