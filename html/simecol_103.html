<div class="container">

<table style="width: 100%;"><tr>
<td>p.constrain</td>
<td style="text-align: right;">R Documentation</td>
</tr></table>
<h2>Transform Data Between Unconstrained and Box-constrained Scale</h2>

<h3>Description</h3>

<p>These functions can be used to transform a vector of data or
parameters between unconstrained [-Inf, Inf] and box-constrained
representation (interval [lower, upper]).
</p>


<h3>Usage</h3>

<pre><code class="language-R">p.constrain(p, lower = -Inf, upper = Inf, f = 1)
p.unconstrain(p, lower = -Inf, upper = Inf, f = 1)
</code></pre>


<h3>Arguments</h3>

<table>
<tr style="vertical-align: top;">
<td><code>p</code></td>
<td>
<p>vector of data (e.g. model parameters),</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>lower, upper</code></td>
<td>
<p>vectors with lower resp. upper bounds used for 
transformation,
</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>f</code></td>
<td>
<p>optional scaling factor.</p>
</td>
</tr>
</table>
<h3>Details</h3>

<p>These functions are employed by <code>fitOdeModel</code>
<code>ssqOdeModel</code> in order to be able to use the unconstrained
optimizers of <code>optim</code> for constrained optimization.
</p>
<p>The transformation functions are
</p>
<p style="text-align: center;"><code class="reqn">p' = \tan(\pi/2 \cdot (2 p - upper - lower) / (upper - lower)) \cdot 1/f</code>
</p>
  
<p>and its inverse
</p>
<p style="text-align: center;"><code class="reqn">p = (upper + lower)/2 + (upper - lower) \cdot \arctan(f \cdot p')/\pi</code>
</p>
<p>.
</p>


<h3>Value</h3>

<p>vector with transformed (resp. back-transformed) values.
</p>


<h3>References</h3>

<p>This trick seems to be quite common, but in most cases it is preferred
to apply optimizers that can handle constraints internally.
</p>
<p>Reichert, T. (1998) AQUASIM 2.0 User Manual.  Computer Program for the
Identification and Simulation of Aquatic Systems. Swiss Federal
Institute for Environmental Science and Technology (EAWAG), CH - 8600
Duebendorf Switzerland,
<a href="https://www.eawag.ch/de/abteilung/siam/software/">https://www.eawag.ch/de/abteilung/siam/software/</a>.
</p>


<h3>See Also</h3>

<p><code>fitOdeModel</code>, <code>ssqOdeModel</code></p>


<h3>Examples</h3>

<pre><code class="language-R">xx &lt;- seq(-100, 100, 2)
plot(xx, yy&lt;-p.constrain(xx, -20, 45), type="l")
points(p.unconstrain(yy, -20, 45), yy, col="red")
</code></pre>


</div>