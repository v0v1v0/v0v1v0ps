<div class="container">

<table style="width: 100%;"><tr>
<td>aggregate.sento_measures</td>
<td style="text-align: right;">R Documentation</td>
</tr></table>
<h2>Aggregate sentiment measures</h2>

<h3>Description</h3>

<p>Aggregates sentiment measures by combining across provided lexicons, features, and time weighting
schemes dimensions. For <code>do.global = FALSE</code>, the combination occurs by taking the mean of the relevant
measures. For <code>do.global = TRUE</code>, this function aggregates all sentiment measures into a weighted global textual
sentiment measure for each of the dimensions.
</p>


<h3>Usage</h3>

<pre><code class="language-R">## S3 method for class 'sento_measures'
aggregate(
  x,
  features = NULL,
  lexicons = NULL,
  time = NULL,
  do.global = FALSE,
  do.keep = FALSE,
  ...
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr style="vertical-align: top;">
<td><code>x</code></td>
<td>
<p>a <code>sento_measures</code> object created using <code>sento_measures</code>.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>features</code></td>
<td>
<p>a <code>list</code> with unique features to aggregate at given name, e.g., <br><code>list(feat12 = c("feat1", "feat2"))</code>. See <code>x$features</code> for the exact names to use. Use <code>NULL</code>
(default) to apply no merging across this dimension. If <code>do.global = TRUE</code>, should be a <code>numeric</code> vector of
weights, of size <code>length(x$features)</code>, in the same order. A value of <code>NULL</code> means equally weighted.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>lexicons</code></td>
<td>
<p>a <code>list</code> with unique lexicons to aggregate at given name, e.g., <br><code>list(lex12 = c("lex1", "lex2"))</code>. See <code>x$lexicons</code> for the exact names to use. Use <code>NULL</code>
(default) to apply no merging across this dimension. If <code>do.global = TRUE</code>, should be a <code>numeric</code> vector of
weights, of size <code>length(x$lexicons)</code>, in the same order. A value of <code>NULL</code> means equally weighted.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>time</code></td>
<td>
<p>a <code>list</code> with unique time weighting schemes to aggregate at given name, e.g., <br><code>list(tw12 = c("tw1", "tw2"))</code>. See <code>x$time</code> for the exact names to use. Use <code>NULL</code> (default)
to apply no merging across this dimension. If <code>do.global = TRUE</code>, should be a <code>numeric</code> vector of
weights, of size <code>length(x$time)</code>, in the same order. A value of <code>NULL</code> means equally weighted.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>do.global</code></td>
<td>
<p>a <code>logical</code> indicating if the sentiment measures should be aggregated into weighted
global sentiment indices.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>do.keep</code></td>
<td>
<p>a <code>logical</code> indicating if the original sentiment measures should be kept (i.e., the aggregated
sentiment measures will be added to the current sentiment measures as additional indices if <code>do.keep = TRUE</code>).</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>...</code></td>
<td>
<p>not used.</p>
</td>
</tr>
</table>
<h3>Details</h3>

<p>If <code>do.global = TRUE</code>, the measures are constructed from weights that indicate the importance (and sign)
along each component from the <code>lexicons</code>, <code>features</code>, and <code>time</code> dimensions. There is no restriction in
terms of allowed weights. For example, the global index based on the supplied lexicon weights (<code>"globLex"</code>) is obtained
first by multiplying every sentiment measure with its corresponding weight (meaning, the weight given to the lexicon the
sentiment is computed with), then by taking the average per date.
</p>


<h3>Value</h3>

<p>If <code>do.global = FALSE</code>, a modified <code>sento_measures</code> object, with the aggregated sentiment
measures, including updated information and statistics, but the original sentiment scores <code>data.table</code>
untouched.
</p>
<p>If <code>do.global = TRUE</code>, a <code>data.table</code> with the different types of weighted global sentiment measures,
named <code>"globLex"</code>, <code>"globFeat"</code>, <code>"globTime"</code> and <code>"global"</code>, with <code>"date"</code> as the first
column. The last measure is an average of the the three other measures.
</p>


<h3>Author(s)</h3>

<p>Samuel Borms
</p>


<h3>Examples</h3>

<pre><code class="language-R">data("usnews", package = "sentometrics")
data("list_lexicons", package = "sentometrics")
data("list_valence_shifters", package = "sentometrics")

# construct a sento_measures object to start with
corpus &lt;- sento_corpus(corpusdf = usnews)
corpusSample &lt;- quanteda::corpus_sample(corpus, size = 500)
l &lt;- sento_lexicons(list_lexicons[c("LM_en", "HENRY_en")],
                    list_valence_shifters[["en"]])
ctr &lt;- ctr_agg(howTime = c("equal_weight", "linear"),
               by = "year", lag = 3)
sento_measures &lt;- sento_measures(corpusSample, l, ctr)

# aggregation across specified components
smAgg &lt;- aggregate(sento_measures,
                   time = list(W = c("equal_weight", "linear")),
                   features = list(journals = c("wsj", "wapo")),
                   do.keep = TRUE)

# aggregation in full
dims &lt;- get_dimensions(sento_measures)
smFull &lt;- aggregate(sento_measures,
                    lexicons = list(L = dims[["lexicons"]]),
                    time = list(T = dims[["time"]]),
                    features = list(F = dims[["features"]]))

# "global" aggregation
smGlobal &lt;- aggregate(sento_measures, do.global = TRUE,
                      lexicons = c(0.3, 0.1),
                      features = c(1, -0.5, 0.3, 1.2),
                      time = NULL)

## Not run: 
# aggregation won't work, but produces informative error message
aggregate(sento_measures,
          time = list(W = c("equal_weight", "almon1")),
          lexicons = list(LEX = c("LM_en")),
          features = list(journals = c("notInHere", "wapo")))
## End(Not run)

</code></pre>


</div>