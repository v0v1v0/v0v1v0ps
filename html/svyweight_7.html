<div class="container">

<table style="width: 100%;"><tr>
<td>impute_w8margin</td>
<td style="text-align: right;">R Documentation</td>
</tr></table>
<h2>Impute NAs in w8margin Object</h2>

<h3>Description</h3>

<p>Imputes NA values in a weight target (in <code>w8margin</code> form), based
on the observed distribution of the variable in a dataset.
</p>


<h3>Usage</h3>

<pre><code class="language-R">impute_w8margin(w8margin, observed, weights = NULL, rebase = TRUE)
</code></pre>


<h3>Arguments</h3>

<table>
<tr style="vertical-align: top;">
<td><code>w8margin</code></td>
<td>
<p>w8margin object, with NA values that should be imputed based
on observed data.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>observed</code></td>
<td>
<p>factor or character vector, containing observed data used
for imputing targets.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>weights</code></td>
<td>
<p>numeric vector of weights, the same length as <code>observed</code>, to
be used when computing the distribution of the observed variable. NULL is
equivalent to a vector where all elements are 1, and indicates the data is
unweighted.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>rebase</code></td>
<td>
<p>logical, indicating whether non-NA weight targets should be adjusted
so that the total target sample size is unchanged (<code>rebase = TRUE</code>), or
whether non-NA weight targets should remain the same and total target sample size
increases.</p>
</td>
</tr>
</table>
<h3>Details</h3>

<p>Any NA target frequencies in <code>w8margin</code> are imputed using the
percentage distribution in <code>observed</code>, from <code>svytable(~observed, Ntotal = 1, ...)</code>.
The percentage is multiplied by the desired target sample size. For example,
if has a target of NA and a desired total sample of 1500, and the
observed frequency of the weighting variable is 0%, the imputed target will
be (10% * 1500). If a <code>weights</code> argument is provided, then weighted
percentage distributions are used; this may be useful when design weights are
present, or when first raking on variables with complete targets.
</p>
<p>If <code>rebase == TRUE</code> (the default), targets for non-NA categories
are scaled down so that the total target frequency (<code>sum(w8margin$Freq, na.rm = TRUE)</code>)
remains constant, after imputing new category targets. If <code>rebase == FALSE</code>,
targets for non-NA categories remain constant, and the total target frequency
will increase.
</p>
<p>There is an important theoretical distinction between missing <em>targets</em>
for conceptually valid categories, versus missing observed data due to
non-response or refusal. It is only conceptually appropriate to impute targets
if the targets themselves are missing. When handling missing observed data,
multiple imputation techniques (such as <code>mice::mice()</code>) will often
produce better results, except when missingness is closely related to
weighting variable (technically referred to as "missing not at random").
</p>


<h3>Value</h3>

<p>A w8margin object, where NA target frequencies have been replaced using
the observed distribution of the weighting variable.
</p>


<h3>Examples</h3>

<pre><code class="language-R">turnout_w8margin &lt;- as.w8margin(
    c(voted = .715, `did not vote` = .285, ineligible = NA), 
    varname = "turnout2013", 
    na.allow = TRUE,
    samplesize = 1500)
impute_w8margin(turnout_w8margin, observed = gles17$turnout2013)
</code></pre>


</div>