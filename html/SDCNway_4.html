<div class="container">

<table style="width: 100%;"><tr>
<td>sdc_extabs</td>
<td style="text-align: right;">R Documentation</td>
</tr></table>
<h2>Calculate risk measures through exhaustive tabulations, Mu-Argus, and other 
methods.</h2>

<h3>Description</h3>

<p>This function primarily uses the exhaustive tabulation method to quantify 
disclosure risk. It tabulates cell counts for different combinations of 
variables provided by the user. Using these counts, this function identifies
variable categories and records which are considered high risk for
disclosure. File-level re-identification risk measures are also provided, 
e.g., Mu-Argus (Polettini 2003) and the risk metrics promosed in El Emam 
(2011).
</p>


<h3>Usage</h3>

<pre><code class="language-R">sdc_extabs(
  data,
  ID = NULL,
  weight = NULL,
  varpool = names(data),
  forcelist = character(0),
  forcenum = 1,
  missingdef = list(),
  mindim = 1,
  maxdim = 2,
  threshold = NULL,
  wgtthreshold = NULL,
  condition = NULL,
  output_filename = NULL,
  tau1 = 0.2,
  tau2 = 0.2,
  include_mu_argus = TRUE
)

## S3 method for class 'sdc_extabs'
print(x, cutoff = 50, summary_outfile = NULL, ...)

## S3 method for class 'sdc_extabs'
plot(x, plotpath = NULL, plotvar1 = character(0), plotvar2 = character(0), ...)
</code></pre>


<h3>Arguments</h3>

<table>
<tr style="vertical-align: top;">
<td><code>data</code></td>
<td>
<p>Data frame containing the data for which we are to measure 
disclosure risk. Unexpected behavior may result if any column name begins
with a period.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>ID</code></td>
<td>
<p>Name of column which identifies records. If NULL (default), an
ID column named .ROW_NUMBER is created and used in reports.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>weight</code></td>
<td>
<p>Column name for sampling weights. NULL or empty if none.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>varpool</code></td>
<td>
<p>Vector of column names over which to form tables.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>forcelist</code></td>
<td>
<p>Vector of variable names. Some are included in all 
tabulations. Optional.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>forcenum</code></td>
<td>
<p>Number of variables in <code>forcelist</code> that are mandatory for 
all tabulations. That is, all tabulations will have a number of variables
from forcelist exactly equal to <code>forcenum</code>.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>missingdef</code></td>
<td>
<p>A named list specifying missing values. The names
correspond to column names in <code>data</code>.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>mindim</code></td>
<td>
<p>Integer specifying the minimum number of <code>varpool</code> variables 
(including <code>forcelist</code> variables) that can be used to form tables.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>maxdim</code></td>
<td>
<p>Integer specifying the maximum number of <code>varpool</code> variables
(including ]codeforcelist variables) that can be used to form tables.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>threshold</code></td>
<td>
<p>Threshold to determine the number of violations in terms of 
cell counts. If the number of cases in a cell is less than <code>threshold</code>, 
the cell is flagged as a violation. If threshold is NULL and wgthreshold is
not NULL, then only a weighted threshold will be used. If both are NULL,
threshold will be set to 3 and the weighted threshold will not be used.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>wgtthreshold</code></td>
<td>
<p>Threshold to determine violations in terms of weighted
cell counts. If NULL, a weighted threshold will not be used.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>condition</code></td>
<td>
<p>Character string describing how weighted and unweighted
thresholds are combined when both are used. If used, it must be "and" or 
"or" (case insensitive). This parameter is ignored if <code>weight</code> is NULL.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>output_filename</code></td>
<td>
<p>Name of the csv file to save the data set with 
violation counts and Mu-Argus scores attached. NULL if no output file is to
be saved.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>tau1</code></td>
<td>
<p>A threshold to compute the risk measure, pRa. See User Manual for
more details.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>tau2</code></td>
<td>
<p>A threshold to compute the risk measure, jRa. This parameter is 
ignored if <code>weight</code> is NULL. See User Manual for more details.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>include_mu_argus</code></td>
<td>
<p>Flag indicating whether Mu-Argus and El-Emam 
metrics should be calculated.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>x</code></td>
<td>
<p>An object of class <code>sdc_extabs</code>, as returned by the 
<code>sdc_extabs</code> function.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>cutoff</code></td>
<td>
<p>The number of variable categories with the highest percentage 
of cell violations for each table dimension. Default is
50.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>summary_outfile</code></td>
<td>
<p>Name of summary output .txt file. If not NULL, console
output is copied to the file. Default is NULL (no logging of output).
Errors and warnings are not diverted (consider running in batch mode if
logging of errors and warnings is needed).</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>...</code></td>
<td>
<p>Currently unused. For NextMethod compatibility.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>plotpath</code></td>
<td>
<p>Directory to save plots. Plots are saved as <em>jpeg</em> files 
(quality = 100%). If the directory does not exist, it is first created.
If <code>plotpath</code> is NULL (default), plots are not saved.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>plotvar1</code></td>
<td>
<p>A vector of names of discrete variables for boxplots. If 
none, boxplots are not produced.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>plotvar2</code></td>
<td>
<p>A vector of names of continuous variables for scatterplots. 
If none, scatterplots are not produced.</p>
</td>
</tr>
</table>
<h3>Details</h3>

<p>If a specified missing value contains
only whitespace, it will match any element with only whitespace. NA values
in data are treated as missing regardless of <code>missingdef</code>. If you do not
want NA values to be treated as missing, please recode them before
passing the data to this function.
</p>
<p>Note that if a weight variable is not provided, the number of statistics
and plots that are produced is significantly reduced.
</p>


<h3>Value</h3>

<p>An object of type <code>sdc_extabs</code>. Internally, a named list of 
statistics.
</p>

<dl>
<dt><em>tabulation</em></dt>
<dd>
<p>Cell counts and violation flags. Represented as
a list with each element corresponding to a <code>varpool</code> combination.</p>
</dd>
<dt><em>data_with_statistics</em></dt>
<dd>
<p>The original data with new 
columns showing statistics such as violation counts and Mu-Argus 
score for each record.</p>
</dd>
<dt><em>recoded_data_with_statistics</em></dt>
<dd>
<p>Same as 
<code>data_with_statistics</code> but with missing value recodes.</p>
</dd>
<dt><em>mu_argus_summary</em></dt>
<dd>
<p>Summary table of Mu-Argus by cell count. For
this summary, all variables in <code>varpool</code> are used to define a cell. If
weight is NULL, then this summary is omitted.</p>
</dd>
<dt><em>el_emam_measures</em></dt>
<dd>
<p>List of file-level re-identification risk 
measures.</p>
</dd>
<dt><em>percent_violations_by_var_and_level</em></dt>
<dd>
<p>Table with percent of
records that are in violation for each variable/category.</p>
</dd>
<dt><em>percent_violations_by_dim_var_and_level</em></dt>
<dd>
<p>Table with percent 
of cells that are in violation for each dimension/variable/category.</p>
</dd>
<dt><em>options</em></dt>
<dd>
<p>Options provided to <code>sdc_extabs</code> by the user, 
such as <code>missingdef</code>, <code>mindim</code>, etc.</p>
</dd>
</dl>
<h3>Methods (by generic)</h3>


<ul>
<li> <p><code>print</code>: S3 print method for <code>sdc_extabs</code> objects
</p>
<p>Prints a nicely formatted version of the percent record violations by 
variable/category and percent cell violations by dimension/variable/category
</p>
</li>
<li> <p><code>plot</code>: S3 plot method for <code>sdc_extabs</code> objects
</p>
<p>Produces boxplots and scatterplots of violation counts and mu-argus scores.
</p>
</li>
</ul>
<h3>References</h3>

<p>El Emam K (2011).
“Methods for the de-identification of electronic health records for genomic research.”
<em>Genome medicine</em>, <b>3</b>(4), 25.
doi: <a href="https://doi.org/10.1186/gm239">10.1186/gm239</a>, <a href="https://doi.org/10.1186/gm239">https://doi.org/10.1186/gm239</a>.
</p>
<p>Polettini S (2003).
“Some remarks on the individual risk methodology.”
<em>Joint ECE/EUROSTAT Work Session on Data Confidentiality, Luxembourg</em>.
<a href="https://www.unece.org/fileadmin/DAM/stats/documents/ece/ces/2003/04/confidentiality/wp.18.s.e.pdf">https://www.unece.org/fileadmin/DAM/stats/documents/ece/ces/2003/04/confidentiality/wp.18.s.e.pdf</a>.
</p>


<h3>Examples</h3>

<pre><code class="language-R">data(exampledata)
vars &lt;- c("BIB1201", "BIC0501", "BID0101", "BIE0601", "BORNUSA", "CENREG",
          "DAGE3", "DRACE3", "EDUC3", "GENDER")
results &lt;- sdc_extabs(exampledata, 
                      ID="CASEID",
                      weight="WEIGHT", 
                      varpool=vars,
                      mindim=2,
                      maxdim=3,
                      missingdef=list(BIE0601=5),
                      wgtthreshold=3000,
                      condition="or")
print(results, cutoff=15)
plot(results, plotvar1="BORNUSA", plotvar2="WEIGHT")
</code></pre>


</div>