<div class="container">

<table style="width: 100%;"><tr>
<td>strview_search</td>
<td style="text-align: right;">R Documentation</td>
</tr></table>
<h2>strview_search</h2>

<h3>Description</h3>

<p>strview_searchByGeo: Search for and download the meta information
of street view images via Mapillary API (See detials) based on coordinates
of a spatial point with a given distance or a bounding box.
</p>
<p>strview_search_nnb: Search for the nearest (within 10m buffer)
available street view images and download meta information
via Mapillary API (See detials) given coordinates of a spatial point.
</p>
<p>strview_search_osm: Search for street view images by
sampling locations along the OSM road lines and download meta information
via Mapillary API (See detials) given a bounding box.
</p>
<p>strview_search_multi: Search for and download the meta information
of street view images via Mapillary API (See detials) based on multiple coordinates
</p>


<h3>Usage</h3>

<pre><code class="language-R">strview_searchByGeo(
  x,
  y,
  r,
  epsg,
  bbox,
  token = "",
  limit = 10,
  fields = c(),
  ...
)

strview_search_nnb(x, y, epsg, token = "", fields = c(), ...)

strview_search_osm(bbox, epsg, token, fields = c(), size, ...)

strview_search_multi(viewpoints, epsg, token, fields = c(), ...)
</code></pre>


<h3>Arguments</h3>

<table>
<tr style="vertical-align: top;">
<td><code>x</code></td>
<td>
<p>numeric, indicating Longtitude degree of the center point.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>y</code></td>
<td>
<p>numeric, indicating latitude degree of the center point.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>r</code></td>
<td>
<p>numeric, indicating search distance (meter or feet) for LiDAR data.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>epsg</code></td>
<td>
<p>numeric, the EPSG code specifying the coordinate reference system.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>bbox</code></td>
<td>
<p>vector, a bounding box defining the geographical area for downloading data.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>token</code></td>
<td>
<p>character, API token of Mapillary.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>limit</code></td>
<td>
<p>numeric, indicating the number of returns. The maximum is 2000.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>fields</code></td>
<td>
<p>vector, a vector of fields indicates the information of images
to be retrieved (See details). 'is_pano', 'thumb_256_url', 'height', 'width',
'computed_geometry', 'computed_altitude', and 'detections' are retrieved
as a default setting.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>...</code></td>
<td>
<p>indicating filters (see details)</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>size</code></td>
<td>
<p>numeric, (approximate) number of locations sampled on OSM spatial lines
(this is for strview_search_osm only).</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>viewpoints</code></td>
<td>
<p>sf or matrix, indicating multiple degress-based coordinates
for searching available street views (this is for strview_search_multi only).</p>
</td>
</tr>
</table>
<h3>Details</h3>

<p>strview_search
</p>
<p>To request an API token of Mapillary,
please create your access token at https://mapillary.com/developer.
For 'fields', one can review all available fields in this package
by calling streetscape::field_list().
</p>


<h3>Value</h3>

<p>For strview_searchByGeo(), a StreetscapeDataFrame returned combining
a dataframe of the image information.
</p>
<p>For strview_search_nnb(), a StreetscapeDataFrame with one-row dataframe
will be returned if there is any available images near to the given point
</p>
<p>For strview_search_osm(), a StreetscapeDataFrame that combines the information
of street views from all sampled points along the OSM lines within
the specified bounding box.
</p>
<p>For strview_search_multi(), a StreetscapeDataFrame that combines the information
of street views based on the coordinates of multiple spatial points
</p>


<h3>Note</h3>

<p>If there is no street view images within the search area,
the function only returns an integer 0.
</p>


<h3>See Also</h3>

<p><code>available_field()</code> <code>available_filter()</code> <code>see_streetscape_class()</code>
</p>


<h3>Examples</h3>

<pre><code class="language-R">
bbox &lt;- c(-83.751812,42.272984,-83.741255,42.279716)
if (isTRUE(file.exists("streetscape_token.sysdata"))) {
 data &lt;- streetscape::strview_searchByGeo(bbox = bbox,
                                          epsg = 2253,
                                          token = "",
                                          is_pano = TRUE)
 data &lt;- streetscape::strview_searchByGeo(x = -83.741289,
                                          y = 42.270146,
                                          r = 100,
                                          epsg = 2253,
                                          token = "",
                                          is_pano = TRUE)
}



if (isTRUE(file.exists("streetscape_token.sysdata"))) {
 data &lt;- streetscape::strview_search_nnb(
         x = -83.743460634278,
         y = 42.277848830294,
         epsg = 2253,
         token = '')
}


bbox &lt;- c(-83.752041,42.274896,-83.740711,42.281945)
if (isTRUE(file.exists("streetscape_token.sysdata"))) {
 data &lt;- streetscape::strview_search_osm(
         bbox = bbox,
         epsg = 2253,
         token = '',
         size = 100)
}


x &lt;- c(-83.752041, -83.740711)
y &lt;- c(42.274896, 42.281945)
viewpoints &lt;- cbind(x, y)
if (isTRUE(file.exists("streetscape_token.sysdata"))) {
 data &lt;- streetscape::strview_search_multi(
         viewpoints = viewpoints,
         epsg = 2253,
         token = '')
}


</code></pre>


</div>