<div class="container">

<table style="width: 100%;"><tr>
<td>simecol-package</td>
<td style="text-align: right;">R Documentation</td>
</tr></table>
<h2>
Simulation of Ecological (and Other) Dynamic Systems
</h2>

<h3>Description</h3>

<p>An object oriented framework to simulate
  ecological (and other) dynamic systems. It can be used for
  differential equations, individual-based (or agent-based) and other
  models as well. It supports structuring of simulation scenarios (to avoid copy
  and paste) and aims to improve readability and re-usability of code.
</p>


<h3>Details</h3>

<p>The DESCRIPTION file:
</p>

<table>
<tr>
<td style="text-align: left;">
Package: </td>
<td style="text-align: left;"> simecol</td>
</tr>
<tr>
<td style="text-align: left;">
Version: </td>
<td style="text-align: left;"> 0.8-14</td>
</tr>
<tr>
<td style="text-align: left;">
Title: </td>
<td style="text-align: left;"> Simulation of Ecological (and Other) Dynamic Systems</td>
</tr>
<tr>
<td style="text-align: left;">
Authors@R: </td>
<td style="text-align: left;"> c(person("Thomas","Petzoldt", role = c("aut", "cre"),
                     email = "thomas.petzoldt@tu-dresden.de",
					 comment = c(ORCID = "0000-0002-4951-6468")))</td>
</tr>
<tr>
<td style="text-align: left;">
Author: </td>
<td style="text-align: left;"> Thomas Petzoldt [aut, cre] (&lt;https://orcid.org/0000-0002-4951-6468&gt;)</td>
</tr>
<tr>
<td style="text-align: left;">
Depends: </td>
<td style="text-align: left;"> R (&gt;= 3.2), deSolve, methods</td>
</tr>
<tr>
<td style="text-align: left;">
Imports: </td>
<td style="text-align: left;"> graphics, grDevices, stats, utils, minqa</td>
</tr>
<tr>
<td style="text-align: left;">
Suggests: </td>
<td style="text-align: left;"> tcltk, FME, lattice</td>
</tr>
<tr>
<td style="text-align: left;">
LazyLoad: </td>
<td style="text-align: left;"> yes</td>
</tr>
<tr>
<td style="text-align: left;">
Maintainer: </td>
<td style="text-align: left;"> Thomas Petzoldt &lt;thomas.petzoldt@tu-dresden.de&gt;</td>
</tr>
<tr>
<td style="text-align: left;">
Description: </td>
<td style="text-align: left;"> An object oriented framework to simulate
  ecological (and other) dynamic systems. It can be used for
  differential equations, individual-based (or agent-based) and other
  models as well. It supports structuring of simulation scenarios (to avoid copy
  and paste) and aims to improve readability and re-usability of code.</td>
</tr>
<tr>
<td style="text-align: left;">
License: </td>
<td style="text-align: left;"> GPL (&gt;= 2)</td>
</tr>
<tr>
<td style="text-align: left;">
URL: </td>
<td style="text-align: left;"> http://www.simecol.de/</td>
</tr>
<tr>
<td style="text-align: left;">
</td>
</tr>
</table>
<p>The <span class="pkg">simecol</span> package is intended to give users (scientists and
students) an interactive environment to implement, distribute,
simulate and document ecological and other dynamic models without the
need to write long simulation programs. An object oriented framework
using the S4 class system provides a consistent but still flexible
approach to implement simulation models of different types:
</p>

<ul>
<li>
<p> differential equation (ODE, PDE) models (class <code>odeModel</code>),
</p>
</li>
<li>
<p> grid-oriented individual-based models (class <code>gridModel</code>), and
</p>
</li>
<li>
<p> particle diffusion-type models (class <code>rwalkModel</code>),
</p>
</li>
<li>
<p> individual-based models (class <code>indbasedModel</code>),
</p>
</li>
<li>
<p> other model types by deriving a user specified subclass from
<code>simObj</code>.
</p>
</li>
</ul>
<p>Each simulation model is implemented as S4 object (superclass <code>simObj</code>)
with the following slots:
</p>

<ul>
<li> <p><code>main = function(time, init, parms, ...)</code>: a function
holding the main equations of the model,
</p>
</li>
<li> <p><code>equations</code>: an optional non-nested list holding
arbitrary sub-equations (sub-models) of the model. Sub-equations
can be interdependent and can be called directly from within
<code>main</code> or <code>initfunc</code>.
</p>
</li>
<li> <p><code>parms</code>: a list (or vector for some classes) with
constant model parameters,
</p>
</li>
<li>  <p><code>times</code>: vector of time steps or vector with three
named values <code>from</code>, <code>to</code>, <code>by</code> specifying the
simulation time steps. The from-to-by form can be edited with
<code>editParms</code>.
</p>
</li>
<li> <p><code>init</code>: initial state (start values) of the
simulation. This is typically a named vector (state variables in
<code>odeModel</code>s) or matrix (e.g. initial grid of
<code>gridModel</code>s).
</p>
</li>
<li> <p><code>inputs</code>: time dependend or spatially resolved external
inputs can be specified as data frame or matrix (more
efficient). Performance optimized versions of <code>approx</code> (see
<code>approxTime</code>) are available.
</p>
</li>
<li> <p><code>solver</code>: a function or a character string specifying the
numerical algorithm used, e.g. <code>"lsoda"</code>, <code>"rk4"</code> or
<code>"euler"</code> from package <code>deSolve</code>). In contrast to
<code>"euler"</code> that can be used for difference equations
(i.e. <code>main</code> returns derivatives), <code>"iterator"</code> is
intended for models where main returns the new state (i.e for
individual-based models).  It is also possible to reference own
algorithms (solvers) that are defined in the user workspace or to
assign solver functions directly.
</p>
</li>
<li> <p><code>observer</code>: optional slot which determines the data
stored during the simulation. A user-provided <code>observer</code>
function can also be used to write logging information to the
screen or to the hard-disk, to perform run-time visualisation, or
statistical analysis during the simulation.
</p>
<p>The <code>observer</code>-mechanism works only with
<code>iteration</code> solvers. It is not available for
<code>odeModel</code>s.
</p>
</li>
<li> <p><code>out</code>: this slot holds the simulation results after a
simulation run as data frame (if the return value of <code>main</code>
is a vector) or as list (otherwise). The type of data stored in
<code>out</code> can be manipulated by providing a user-definded
<code>observer</code> function.
</p>
</li>
<li> <p><code>initfunc</code>: this slot can hold an optional function which
is called automatically when a new object is created by <code>new</code>
or when it is re-initialized by <code>initialize</code> or <code>sim</code>.
</p>
</li>
</ul>
<p><code>simObj</code> model objects should be defined and created using the
common S4 mechanisms (<code>new</code>).
</p>
<p>Normally, a <code>simObj</code> object can contain all data needed to run
simulations simply by entering the model object via <code>source()</code> or
<code>data()</code> and then to run and plot the model with
<code>plot(sim(obj))</code>.
</p>
<p>Accessor functions (with names identical to the slot names) are
provided to get or set model parameters, time steps, initial values,
inputs, the solver, the main and sub-equations, an observer or an
initfunc and to extract the model outputs.  It is also possible to
modify the components of the simecol objects directly, e.g. the model
equations of a model <code>lv</code> with <code>lv@main</code>, but this is
normally not recommended as there is no guarantee that this will work in a
compatible way in future versions.
</p>
<p>Models of different type are provided as data and some more in source
code (see directory examples).
</p>
<p>The examples can be used as a starting point to write own
<code>simObj</code> objects and to distribute them to whomever you wish.
</p>
<p>The package is supplemented with several utility functions
(e.g. <code>seedfill</code> or <code>neighbours</code>), which can
be used independently from <code>simObj</code> objects.
</p>


<h3>Author(s)</h3>

<p>Thomas Petzoldt [aut, cre] (&lt;https://orcid.org/0000-0002-4951-6468&gt;)
</p>


<h3>References</h3>

<p>Petzoldt, T. and K. Rinke (2007) <span class="pkg">simecol</span>: An Object-Oriented
Framework for Ecological Modeling in <span style="font-family: Courier New, Courier; color: #666666;"><b>R</b></span>. <em>Journal of Statistical
Software</em>, <b>22</b>(9). doi: <a href="https://doi.org/10.18637/jss.v022.i09">10.18637/jss.v022.i09</a>
</p>


<h3>See Also</h3>

<p><code>CA</code>,
<code>chemostat</code>,
<code>conway</code>,
<code>diffusion</code>,
<code>lv</code>,
<code>lv3</code>,
<code>upca</code>.
</p>


<h3>Examples</h3>

<pre><code class="language-R">## (1) Quick Start Examples ====================================================

data(lv)        # load basic Lotka-Volterra model

## Not run: 
require("tcltk")
lv &lt;- editParms(lv)

## End(Not run)
parms(lv)
main(lv)
lv &lt;- sim(lv)
plot(lv)
results &lt;- out(lv)

## Not run: 
data(conway)    # Conway's game of life
init(conway) &lt;- matrix(0, 10, 10)
times(conway) &lt;-  1:100
conway &lt;- editInit(conway) # enter some "1"
sim(conway, animate=TRUE, delay=100)

## End(Not run)

## (2) Define and run your own  simecol model ==========================

lv &lt;- new("odeModel",
  main = function (time, init, parms) {
    with(as.list(c(init, parms)), {
      dn1 &lt;-   k1 * N1 - k2 * N1 * N2
      dn2 &lt;- - k3 * N2 + k2 * N1 * N2
      list(c(dn1, dn2))
    })
  },
  parms  = c(k1 = 0.2, k2 = 0.2, k3 = 0.2),
  times  = c(from = 0, to = 100, by = 0.5),
  init   = c(N1 = 0.5, N2 = 1),
  solver = "lsoda"
)

lv &lt;- sim(lv)
plot(lv)

## (3) The same in matrix notation; this allows generalization      ====
##     to multi-species interaction models with &gt; 2 species.        ====

LVPP &lt;- new("odeModel",
  main = function(t, n, parms) {
    with(parms, {
      dn &lt;- r * n  + n * (A %*% n)
      list(c(dn))
    })
  },
  parms = list(
    # growth/death rates
    r = c(k1 = 0.2, k3 = -0.2),
    # interaction matrix
    A = matrix(c(0.0, -0.2,
                 0.2,  0.0),
                 nrow = 2, ncol = 2, byrow=TRUE)
  ),
  times  = c(from = 0, to = 100, by = 0.5),
  init   = c(N1 = 0.5, N2 = 1),
  solver = "lsoda"
)

plot(sim(LVPP))

</code></pre>


</div>