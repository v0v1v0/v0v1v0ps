<div class="container">

<table style="width: 100%;"><tr>
<td>shap.prep.interaction</td>
<td style="text-align: right;">R Documentation</td>
</tr></table>
<h2>Prepare the interaction SHAP values from predict.xgb.Booster</h2>

<h3>Description</h3>

<p><code>shap.prep.interaction</code> just runs <code>shap_int &lt;- predict(xgb_mod, (X_train), predinteraction = TRUE)</code>, thus it may not be necessary.
Read more about the xgboost predict function at <code>xgboost::predict.xgb.Booster</code>. Note that this functionality is unavailable for LightGBM models.
</p>


<h3>Usage</h3>

<pre><code class="language-R">shap.prep.interaction(xgb_model, X_train)
</code></pre>


<h3>Arguments</h3>

<table>
<tr style="vertical-align: top;">
<td><code>xgb_model</code></td>
<td>
<p>a xgboost model object</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>X_train</code></td>
<td>
<p>the dataset of predictors used for the xgboost model</p>
</td>
</tr>
</table>
<h3>Value</h3>

<p>a 3-dimention array: #obs x #features x #features
</p>


<h3>Examples</h3>

<pre><code class="language-R"># To get the interaction SHAP dataset for plotting:
# fit the xgboost model

# options("Ncup" = 1)
mod1 = xgboost::xgboost(
  data = as.matrix(iris[,-5]), label = iris$Species,
  gamma = 0, eta = 1, lambda = 0, nrounds = 1, verbose = FALSE, nthread = 1)
# Use either:
data_int &lt;- shap.prep.interaction(xgb_mod = mod1,
                                  X_train = as.matrix(iris[,-5]))
# or:
shap_int &lt;- predict(mod1, as.matrix(iris[,-5]),
                    predinteraction = TRUE)

# **SHAP interaction effect plot **
shap.plot.dependence(data_long = shap_long_iris,
                           data_int = shap_int_iris,
                           x="Petal.Length",
                           y = "Petal.Width",
                           color_feature = "Petal.Width")
</code></pre>


</div>