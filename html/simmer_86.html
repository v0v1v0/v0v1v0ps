<div class="container">

<table style="width: 100%;"><tr>
<td>clone</td>
<td style="text-align: right;">R Documentation</td>
</tr></table>
<h2>Clone/Synchronize Arrivals</h2>

<h3>Description</h3>

<p>Activities for defining a parallel fork and removing the copies. <code>clone</code>
replicates an arrival <code>n</code> times (the original one + <code>n-1</code> copies).
<code>synchronize</code> removes all but one clone for each set of clones.
</p>


<h3>Usage</h3>

<pre><code class="language-R">clone(.trj, n, ..., tag)

synchronize(.trj, wait = TRUE, mon_all = FALSE, ..., tag)
</code></pre>


<h3>Arguments</h3>

<table>
<tr style="vertical-align: top;">
<td><code>.trj</code></td>
<td>
<p>the trajectory object.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>n</code></td>
<td>
<p>number of clones, accepts either a numeric or a callable object
(a function) which must return a numeric.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>...</code></td>
<td>
<p>a number of optional parallel sub-trajectories (or a list of
sub-trajectories). Each clone will follow a different sub-trajectory if available.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>tag</code></td>
<td>
<p>activity tag name to perform named rollbacks (see
<code>rollback</code>) or just to better identify your activities.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>wait</code></td>
<td>
<p>if <code>FALSE</code>, all clones but the first to arrive are removed.
if <code>TRUE</code> (default), all clones but the last to arrive are removed.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>mon_all</code></td>
<td>
<p>if <code>TRUE</code>, <code>get_mon_arrivals</code> will show one
line per clone.</p>
</td>
</tr>
</table>
<h3>Value</h3>

<p>Returns the trajectory object.
</p>


<h3>Examples</h3>

<pre><code class="language-R">## clone and wait for the others
traj &lt;- trajectory() %&gt;%
  clone(
    n = 3,
    trajectory() %&gt;%
      log_("clone 0 (original)") %&gt;%
      timeout(1),
    trajectory() %&gt;%
      log_("clone 1") %&gt;%
      timeout(2),
    trajectory() %&gt;%
      log_("clone 2") %&gt;%
      timeout(3)) %&gt;%
  log_("sync reached") %&gt;%
  synchronize(wait = TRUE) %&gt;%
  log_("leaving")

simmer() %&gt;%
  add_generator("arrival", traj, at(0)) %&gt;%
  run() %&gt;% invisible

## more clones that trajectories available
traj &lt;- trajectory() %&gt;%
  clone(
    n = 5,
    trajectory() %&gt;%
      log_("clone 0 (original)") %&gt;%
      timeout(1)) %&gt;%
  log_("sync reached") %&gt;%
  synchronize(wait = TRUE) %&gt;%
  log_("leaving")

simmer() %&gt;%
  add_generator("arrival", traj, at(0)) %&gt;%
  run() %&gt;% invisible

## clone and continue without waiting
traj &lt;- trajectory() %&gt;%
  clone(
    n = 3,
    trajectory() %&gt;%
      log_("clone 0 (original)") %&gt;%
      timeout(1),
    trajectory() %&gt;%
      log_("clone 1") %&gt;%
      timeout(2),
    trajectory() %&gt;%
      log_("clone 2") %&gt;%
      timeout(3)) %&gt;%
  log_("sync reached") %&gt;%
  synchronize(wait = FALSE) %&gt;%
  log_("leaving")

simmer() %&gt;%
  add_generator("arrival", traj, at(0)) %&gt;%
  run() %&gt;% invisible

</code></pre>


</div>