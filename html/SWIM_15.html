<div class="container">

<table style="width: 100%;"><tr>
<td>plot_cdf</td>
<td style="text-align: right;">R Documentation</td>
</tr></table>
<h2>Plotting the Distribution Functions of a Stressed Model</h2>

<h3>Description</h3>

<p>Plots the empirical distribution function of a stressed SWIM model
component (random variable) or KDE distribution function of a stressed
SWIMw model component under the scenario weights.
</p>


<h3>Usage</h3>

<pre><code class="language-R">plot_cdf(
  object,
  xCol = 1,
  wCol = "all",
  base = FALSE,
  n = 500,
  x_limits,
  y_limits,
  displ = TRUE
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr style="vertical-align: top;">
<td><code>object</code></td>
<td>
<p>A <code>SWIM</code> or <code>SWIMw</code> object.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>xCol</code></td>
<td>
<p>Numeric or character, (name of) the column of the underlying data
of the <code>object</code> (<code>default = 1</code>).</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>wCol</code></td>
<td>
<p>Vector, the columns of the scenario weights 
of the <code>object</code> corresponding to different 
stresses (<code>default = "all"</code>).</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>base</code></td>
<td>
<p>Logical, if <code>TRUE</code>, statistics under the baseline 
are also returned (<code>default = "FALSE"</code>).</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>n</code></td>
<td>
<p>Integer, the number of points used to plot
<code>stat_ecdf</code> in <code>ggplot</code> (<code>default
= 500</code>).</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>x_limits</code></td>
<td>
<p>Vector, the limits of the x-axis of the plot, the
value for <code>xlim</code> in the <code>coord_cartesian</code>
function in <code>ggplot</code>.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>y_limits</code></td>
<td>
<p>Vector, the limits of the y-axis of the plot, the
value for <code>ylim</code> in the <code>coord_cartesian</code>
function in <code>ggplot</code>.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>displ</code></td>
<td>
<p>Logical, if <code>TRUE</code> the plot is displayed,
otherwise the data.frame for customised plotting with
<code>ggplot</code> is returned (<code>default = TRUE</code>).</p>
</td>
</tr>
</table>
<h3>Value</h3>

<p>If <code>displ = TRUE</code>, a plot displaying the empirical or KDE
distribution function of the stochastic model under the
scenario weights.
</p>
<p>If <code>displ = FALSE</code>, a data.frame for customised plotting with
<code>ggplot</code>. The data.frame contains the columns: the column,
<code>xCol</code>, of the data of the stressed model,
<code>stress</code> (the stresses) and <code>value</code> (the values). <br>
Denote by <code>res</code> the return of the function call, then
<code>ggplot</code> can be called via:
</p>
<p style="text-align: center;"><code class="reqn">ggplot(res, aes(x = res[ ,1], w = value))</code>
</p>

<p style="text-align: center;"><code class="reqn"> + stat_{ecdf}(aes(color = factor(stress)), n = n).</code>
</p>

<p>Note that the ggplot2 default of <code>stat_ecdf</code> does not
take <code>weight</code> as an aesthetic. We use the workaround
by Nicolas Woloszko, see Note below.
</p>


<h3>Note</h3>

<p>This function is based on the ggplot <code>stat_ecdf</code>
function. However, the <code>stat_ecdf</code> does not allow for
specifying <code>weights</code>, thus the function is based on
the workaround by Nicolas Woloszko, see
<a href="https://github.com/NicolasWoloszko/stat_ecdf_weighted">https://github.com/NicolasWoloszko/stat_ecdf_weighted</a>.
</p>


<h3>Author(s)</h3>

<p>Silvana M. Pesenti, Zhuomin Mao
</p>


<h3>See Also</h3>

<p>See <code>cdf</code> for the empirical or KDE distribution function
of a stressed model and <code>quantile_stressed</code> for
sample quantiles of a stressed model.
</p>


<h3>Examples</h3>

<pre><code class="language-R">## example with a stress on VaR
set.seed(0)
x &lt;- as.data.frame(cbind(
  "normal" = rnorm(10 ^ 5),
  "gamma" = rgamma(10 ^ 5, shape = 2)))
res1 &lt;- stress(type = "VaR", x = x,
  alpha = c(0.75, 0.95), q_ratio = 1.15)
plot_cdf(res1, xCol = 1, wCol = 1:2, base = TRUE)
plot_cdf(res1, xCol = 1, wCol = 1:2, base = TRUE,
  x_limits = c(0, 5), y_limits = c(0.5, 1))

</code></pre>


</div>