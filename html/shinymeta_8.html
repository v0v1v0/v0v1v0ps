<div class="container">

<table style="width: 100%;"><tr>
<td>formatCode</td>
<td style="text-align: right;">R Documentation</td>
</tr></table>
<h2>Deparse and format shinymeta expressions</h2>

<h3>Description</h3>

<p>Turn unevaluated shinymeta expressions into (formatted or styled) text.
</p>


<h3>Usage</h3>

<pre><code class="language-R">formatCode(code, width = 500L, formatter = styleText, ...)

styleText(code, ...)

deparseCode(code, width = 500L)
</code></pre>


<h3>Arguments</h3>

<table>
<tr style="vertical-align: top;">
<td><code>code</code></td>
<td>
<p>Either an unevaluated expression or a deparsed code string.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>width</code></td>
<td>
<p>The <code>width.cutoff</code> to use when <code>deparse()</code>-ing the <code>code</code> expression.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>formatter</code></td>
<td>
<p>a function that accepts deparsed code (a character string)
as the first argument.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>...</code></td>
<td>
<p>arguments passed along to the <code>formatter</code> function.</p>
</td>
</tr>
</table>
<h3>Details</h3>

<p>Before any formatting takes place, the unevaluated expression is
deparsed into a string via <code>deparseCode()</code>, which ensures that
shinymeta comment strings (i.e., literal strings that appear on their own line,
and begin with one or more <code style="white-space: pre;">⁠#⁠</code> characters.) are turned into comments and
superfluous <code style="white-space: pre;">⁠\{⁠</code> are removed. After deparsing, the <code>formatCode()</code> function then
calls the <code>formatter</code> function on the deparsed string to format (aka style) the code string.
The default <code>formatter</code>, <code>styleText()</code>, uses <code>styler::style_text()</code> with a couple differences:
</p>

<ul>
<li>
<p> Pipe operators (<code style="white-space: pre;">⁠%&gt;%⁠</code>) are <em>always</em> followed by a line break.
</p>
</li>
<li>
<p> If the token appearing after a line-break is a comma/operator, the line-break is removed.
</p>
</li>
</ul>
<h3>Value</h3>

<p>Single-element character vector with formatted code
</p>


<h3>Examples</h3>

<pre><code class="language-R">
options(shiny.suppressMissingContextError = TRUE)

x &lt;- metaReactive({
  "# Here's a comment"
  sample(5) %&gt;% sum()
})

code &lt;- expandChain(x())

deparseCode(code)
formatCode(code)
formatCode(code, formatter = styler::style_text)
</code></pre>


</div>