<div class="container">

<table style="width: 100%;"><tr>
<td>make_spatial_fold</td>
<td style="text-align: right;">R Documentation</td>
</tr></table>
<h2>Makes one training and one testing spatial folds</h2>

<h3>Description</h3>

<p>Used internally by <code>make_spatial_folds()</code> and <code>rf_evaluate()</code>. Uses the coordinates of a point <code>xy.i</code> to generate two spatially independent data folds from the data frame <code>xy</code>. It does so by growing a rectangular buffer from <code>xy.i</code> until a number of records defined by <code>training.fraction</code> is inside the buffer. The indices of these records are then stored as "training" in the output list. The indices of the remaining records outside of the buffer are stored as "testing". These training and testing records can be then used to evaluate a model on independent data via cross-validation.
</p>


<h3>Usage</h3>

<pre><code class="language-R">make_spatial_fold(
  data = NULL,
  dependent.variable.name = NULL,
  xy.i = NULL,
  xy = NULL,
  distance.step.x = NULL,
  distance.step.y = NULL,
  training.fraction = 0.8
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr style="vertical-align: top;">
<td><code>data</code></td>
<td>
<p>Data frame with a response variable and a set of predictors. Default: <code>NULL</code></p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>dependent.variable.name</code></td>
<td>
<p>Character string with the name of the response variable. Must be in the column names of <code>data</code>. Default: <code>NULL</code></p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>xy.i</code></td>
<td>
<p>One row data frame with at least three columns: "x" (longitude), "y" (latitude), and "id" (integer, id of the record). Can be a row of <code>xy</code>. Default: <code>NULL</code>.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>xy</code></td>
<td>
<p>A data frame with at least three columns: "x" (longitude), "y" (latitude), and "id" (integer, index of the record). Default: <code>NULL</code>.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>distance.step.x</code></td>
<td>
<p>Numeric, distance step used during the growth in the x axis of the buffers defining the training folds. Default: <code>NULL</code> (1/1000th the range of the x coordinates).</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>distance.step.y</code></td>
<td>
<p>Numeric, distance step used during the growth in the y axis of the buffers defining the training folds. Default: <code>NULL</code> (1/1000th the range of the y coordinates).</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>training.fraction</code></td>
<td>
<p>Numeric, fraction of the data to be included in the training fold, Default: <code>0.8</code>.</p>
</td>
</tr>
</table>
<h3>Value</h3>

<p>A list with two slots named <code>training</code> and <code>testing</code> with the former having the indices of the training records selected from <code>xy</code>, and the latter having the indices of the testing records.
</p>


<h3>See Also</h3>

<p><code>make_spatial_folds()</code>, <code>rf_evaluate()</code>
</p>


<h3>Examples</h3>

<pre><code class="language-R">if(interactive()){

 #loading example data
 data(plant_richness_df)

 #getting case coordinates
 xy &lt;- plant_richness_df[, 1:3]
 colnames(xy) &lt;- c("id", "x", "y")

 #building a spatial fold centered in the first pair of coordinates
 out &lt;- make_spatial_fold(
   xy.i = xy[1, ],
   xy = xy,
   training.fraction = 0.6
 )

 #indices of the training and testing folds
 out$training
 out$testing

 #plotting the data
 plot(xy[ c("x", "y")], type = "n", xlab = "", ylab = "")
 #plots training points
 points(xy[out$training, c("x", "y")], col = "red4", pch = 15)
 #plots testing points
 points(xy[out$testing, c("x", "y")], col = "blue4", pch = 15)
 #plots xy.i
 points(xy[1, c("x", "y")], col = "black", pch = 15, cex = 2)

}
</code></pre>


</div>