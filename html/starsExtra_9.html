<div class="container">

<table style="width: 100%;"><tr>
<td>flowlength</td>
<td style="text-align: right;">R Documentation</td>
</tr></table>
<h2>Calculate flow length</h2>

<h3>Description</h3>

<p>Calculates flow length for each pixel in a Digital Elevation Model (DEM) raster. Inputs and output are rasters of class <code>stars</code>, single-band (i.e., only '"x"' and '"y"' dimensions), with one attribute.
</p>


<h3>Usage</h3>

<pre><code class="language-R">flowlength(elev, veg, progress = TRUE)
</code></pre>


<h3>Arguments</h3>

<table>
<tr style="vertical-align: top;">
<td><code>elev</code></td>
<td>
<p>A numeric <code>stars</code> raster representing a Digital Elevation Model (DEM).</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>veg</code></td>
<td>
<p>A matching logical <code>stars</code> raster representing vegetation presence. <code>TRUE</code> values represent vegetated cells where flow is absorbed (i.e. sinks), <code>FALSE</code> values represent cells where flow is unobstructed.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>progress</code></td>
<td>
<p>Display progress bar? The default is <code>TRUE</code></p>
</td>
</tr>
</table>
<h3>Value</h3>

<p>A numeric <code>stars</code> raster where each cell value is flow length, in resolution units.
</p>


<h3>References</h3>

<p>The algorithm is described in:
</p>
<p>Mayor, A. G., Bautista, S., Small, E. E., Dixon, M., &amp; Bellot, J. (2008). Measurement of the connectivity of runoff source areas as determined by vegetation pattern and topography: A tool for assessing potential water and soil losses in drylands. Water Resources Research, 44(10).
</p>


<h3>Examples</h3>

<pre><code class="language-R"># Example from Fig. 2 in Mayor et al. 2008

elev = rbind(
  c(8, 8, 8, 8, 9, 8, 9),
  c(7, 7, 7, 7, 9, 7, 7),
  c(6, 6, 6, 6, 6, 5, 7),
  c(4, 5, 5, 3, 5, 4, 7),
  c(4, 5, 4, 5, 4, 6, 5),
  c(3, 3, 3, 3, 2, 3, 3),
  c(2, 2, 2, 3, 4, 1, 3)
)
veg = rbind(
  c(TRUE,  TRUE,  TRUE,  TRUE,  FALSE, FALSE, TRUE),
  c(TRUE,  TRUE,  TRUE,  TRUE,  TRUE,  FALSE, FALSE),
  c(FALSE, FALSE, FALSE, FALSE, FALSE, FALSE, FALSE),
  c(FALSE, TRUE,  FALSE, FALSE, FALSE, FALSE, TRUE),
  c(TRUE,  TRUE,  FALSE, FALSE, FALSE, FALSE, FALSE),
  c(TRUE,  TRUE,  TRUE,  FALSE, FALSE, FALSE, FALSE),
  c(FALSE, TRUE,  TRUE,  FALSE, FALSE, TRUE,  TRUE)
)
elev = matrix_to_stars(elev)
veg = matrix_to_stars(veg)

# Calculate flow length
fl = flowlength(elev, veg, progress = FALSE)

# Plot
plot(
  round(elev, 1), text_values = TRUE, breaks = "equal", 
  col = terrain.colors(6), main = "input (elevation)"
)
plot(
  veg*1, text_values = TRUE, breaks = "equal", 
  col = rev(terrain.colors(2)), main = "input (vegetation)"
)
plot(
  round(fl, 1), text_values = TRUE, breaks = "equal", 
  col = terrain.colors(6), main = "output (flowlength)"
)

# Larger example
data(carmel)
elev = carmel
elev[is.na(elev)] = 0
veg = elev &gt; 100
fl = flowlength(elev, veg, progress = FALSE)
plot(fl, breaks = "equal", col = hcl.colors(11), main = "flowlength (m)")

</code></pre>


</div>