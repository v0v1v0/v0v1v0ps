<div class="container">

<table style="width: 100%;"><tr>
<td>R2conquest</td>
<td style="text-align: right;">R Documentation</td>
</tr></table>
<h2>
Running ConQuest From Within <span style="font-family: Courier New, Courier; color: #666666;"><b>R</b></span>
</h2>

<h3>Description</h3>

<p>The function <code>R2conquest</code> runs the IRT software ConQuest
(Wu, Adams, Wilson &amp; Haldane, 2007) from within <span style="font-family: Courier New, Courier; color: #666666;"><b>R</b></span>.
</p>
<p>Other functions are utility functions for reading item parameters, plausible
values or person-item maps.
</p>


<h3>Usage</h3>

<pre><code class="language-R">R2conquest(dat, path.conquest, conquest.name="console", converge=0.001,
    deviancechange=1e-04, iter=800, nodes=20, minnode=-6, maxnode=6,
    show.conquestoutput=FALSE, name="rasch", pid=1:(nrow(dat)), wgt=NULL, X=NULL,
    set.constraints=NULL, model="item", regression=NULL,
    itemcodes=seq(0,max(dat,na.rm=TRUE)), constraints=NULL, digits=5, onlysyntax=FALSE,
    qmatrix=NULL, import.regression=NULL, anchor.regression=NULL,
    anchor.covariance=NULL, pv=TRUE, designmatrix=NULL, only.calibration=FALSE,
    init_parameters=NULL, n_plausible=10,  persons.elim=TRUE, est.wle=TRUE,
    save.bat=TRUE, use.bat=FALSE, read.output=TRUE, ignore.pid=FALSE)

## S3 method for class 'R2conquest'
summary(object, ...)

# read all terms in a show file or only some terms
read.show(showfile)
read.show.term(showfile, term)

# read regression parameters in a show file
read.show.regression(showfile)

# read unidimensional plausible values form a pv file
read.pv(pvfile, npv=5)
# read multidimensional plausible values
read.multidimpv(pvfile, ndim, npv=5)

# read person-item map
read.pimap(showfile)
</code></pre>


<h3>Arguments</h3>

<table>
<tr style="vertical-align: top;">
<td><code>dat</code></td>
<td>

<p>Data frame of item responses
</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>path.conquest</code></td>
<td>

<p>Directory where the ConQuest executable file is located
</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>conquest.name</code></td>
<td>

<p>Name of the ConQuest executable.
</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>converge</code></td>
<td>

<p>Maximal change in parameters
</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>deviancechange</code></td>
<td>

<p>Maximal change in deviance
</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>iter</code></td>
<td>

<p>Maximum number of iterations
</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>nodes</code></td>
<td>

<p>Number of nodes for integration
</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>minnode</code></td>
<td>
<p>Minimum value of discrete grid of <code class="reqn">\theta</code> nodes</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>maxnode</code></td>
<td>
<p>Maximum value of discrete grid of <code class="reqn">\theta</code> nodes</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>show.conquestoutput</code></td>
<td>

<p>Show ConQuest run log file on console?
</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>name</code></td>
<td>

<p>Name of the output files. The default is <code>'rasch'</code>.
</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>pid</code></td>
<td>

<p>Person identifier
</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>wgt</code></td>
<td>

<p>Vector of person weights
</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>X</code></td>
<td>

<p>Matrix of covariates for the latent regression model
(e.g. gender, socioeconomic status, ..) or
for the item design (e.g. raters, booklets, ...)
</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>set.constraints</code></td>
<td>

<p>This is the set.constraints in ConQuest. It can be
<code>"cases"</code> (constraint for persons), <code>"items"</code>
or <code>"none"</code>
</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>model</code></td>
<td>

<p>Definition model statement. It can be for example
<code>"item+item*step"</code> or <code>"item+booklet+rater"</code>
</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>regression</code></td>
<td>

<p>The ConQuest regression statement (for example <code>"gender+status"</code>)
</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>itemcodes</code></td>
<td>

<p>Vector of valid codes for item responses. E.g. for partial credit
data with at most 3 points it must be <code>c(0,1,2,3)</code>.
</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>constraints</code></td>
<td>

<p>Matrix of item parameter constraints. 1st column: Item names,
2nd column: Item parameters. It only works correctly
for dichotomous data.
</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>digits</code></td>
<td>

<p>Number of digits for covariates in the latent regression model
</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>onlysyntax</code></td>
<td>

<p>Should only be ConQuest syntax generated?
</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>qmatrix</code></td>
<td>

<p>Matrix of item loadings on dimensions in a multidimensional
IRT model
</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>import.regression</code></td>
<td>

<p>Name of an file with initial covariance parameters
(follow the ConQuest specification rules!)
</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>anchor.regression</code></td>
<td>

<p>Name of an file with anchored regression parameters
</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>anchor.covariance</code></td>
<td>

<p>Name of an file with anchored covariance parameters
(follow the ConQuest specification rules!)
</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>pv</code></td>
<td>

<p>Draw plausible values?
</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>designmatrix</code></td>
<td>

<p>Design matrix for item parameters (see the ConQuest manual)
</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>only.calibration</code></td>
<td>

<p>Estimate only item parameters and not person parameters
(no WLEs or plausible values are estimated)?
</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>init_parameters</code></td>
<td>

<p>Name of an file with initial item parameters (follow the
ConQuest specification rules!)
</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>n_plausible</code></td>
<td>

<p>Number of plausible values
</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>persons.elim</code></td>
<td>

<p>Eliminate persons with only missing item responses?
</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>est.wle</code></td>
<td>

<p>Estimate weighted likelihood estimate?
</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>save.bat</code></td>
<td>

<p>Save bat file?
</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>use.bat</code></td>
<td>

<p>Run ConQuest from within <span style="font-family: Courier New, Courier; color: #666666;"><b>R</b></span> due a direct call via the <code>system</code>
command (<code>use.bat=FALSE</code>) or via a <code>system</code> call
of a bat file in the working directory (<code>use.bat=TRUE</code>)
</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>read.output</code></td>
<td>

<p>Should ConQuest output files be processed? Default is <code>TRUE</code>.
</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>ignore.pid</code></td>
<td>
<p>Logical indicating whether person identifiers (<code>pid</code>)
should be processed in ConQuest input syntax.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>object</code></td>
<td>

<p>Object of class <code>R2conquest</code>
</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>showfile</code></td>
<td>

<p>A ConQuest show file (<code>shw</code> file)
</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>term</code></td>
<td>

<p>Name of the term to be extracted in the show file
</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>pvfile</code></td>
<td>
<p>File with plausible values</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>ndim</code></td>
<td>
<p>Number of dimensions</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>npv</code></td>
<td>
<p>Number of plausible values</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>...</code></td>
<td>
<p>Further arguments to be passed</p>
</td>
</tr>
</table>
<h3>Details</h3>

<p>Consult the ConQuest manual (Wu et al., 2007) for specification
details.
</p>


<h3>Value</h3>

<p>A list with several entries
</p>
<table>
<tr style="vertical-align: top;">
<td><code>item</code></td>
<td>
<p>Data frame with item parameters and item statistics</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>person</code></td>
<td>
<p>Data frame with person parameters</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>shw.itemparameter</code></td>
<td>
<p>ConQuest output table for item parameters</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>shw.regrparameter</code></td>
<td>
<p>ConQuest output table for regression parameters</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>...</code></td>
<td>
<p>More values</p>
</td>
</tr>
</table>
<h3>References</h3>

<p>Wu, M. L., Adams, R. J., Wilson, M. R. &amp; Haldane, S. (2007).
<em>ACER ConQuest Version 2.0</em>. Mulgrave.
https://shop.acer.edu.au/acer-shop/group/CON3.
</p>


<h3>See Also</h3>

<p>See also the <span class="pkg">eat</span> package (<a href="https://r-forge.r-project.org/projects/eat/">https://r-forge.r-project.org/projects/eat/</a>)
for elaborate functionality of using ConQuest from within <span style="font-family: Courier New, Courier; color: #666666;"><b>R</b></span>. See also
the <span class="pkg">conquestr</span> package for another <span style="font-family: Courier New, Courier; color: #666666;"><b>R</b></span> wrapper to the ConQuest software
(at least version 4 of ConQuest has to be installed).
</p>
<p>See also the <span class="pkg">TAM</span> package for similar (and even extended)
functionality for specifying item response models.
</p>


<h3>Examples</h3>

<pre><code class="language-R">## Not run: 
# define ConQuest path
path.conquest &lt;- "C:/Conquest/"

#############################################################################
# EXAMPLE 1: Dichotomous data (data.pisaMath)
#############################################################################
library(sirt)
data(data.pisaMath)
dat &lt;- data.pisaMath$data

# select items
items &lt;- colnames(dat)[ which( substring( colnames(dat), 1, 1)=="M" ) ]

#***
# Model 11: Rasch model
mod11 &lt;- sirt::R2conquest(dat=dat[,items], path.conquest=path.conquest,
             pid=dat$idstud, name="mod11")
summary(mod11)
# read show file
shw11 &lt;- sirt::read.show( "mod11.shw" )
# read person-item map
pi11 &lt;- sirt::read.pimap(showfile="mod11.shw")

#***
# Model 12: Rasch model with fixed item difficulties (from Model 1)
mod12 &lt;- sirt::R2conquest(dat=dat[,items], path.conquest=path.conquest,
             pid=dat$idstud, constraints=mod11$item[, c("item","itemdiff")],
             name="mod12")
summary(mod12)

#***
# Model 13: Latent regression model with predictors female, hisei and migra
mod13a &lt;- sirt::R2conquest(dat=dat[,items], path.conquest=path.conquest,
             pid=dat$idstud, X=dat[, c("female", "hisei", "migra") ],
             name="mod13a")
summary(mod13a)

# latent regression with a subset of predictors
mod13b &lt;- sirt::R2conquest(dat=dat[,items], path.conquest=path.conquest,
             pid=dat$idstud, X=dat[, c("female", "hisei", "migra") ],
             regression="hisei migra", name="mod13b")

#***
# Model 14: Differential item functioning (female)
mod14 &lt;- sirt::R2conquest(dat=dat[,items], path.conquest=path.conquest,
             pid=dat$idstud, X=dat[, c("female"), drop=FALSE],
             model="item+female+item*female",  regression="",  name="mod14")

#############################################################################
# EXAMPLE 2: Polytomous data (data.Students)
#############################################################################
library(CDM)
data(data.Students)
dat &lt;- data.Students

# select items
items &lt;- grep.vec( "act", colnames(dat) )$x

#***
# Model 21: Partial credit model
mod21 &lt;- sirt::R2conquest(dat=dat[,items], path.conquest=path.conquest,
              model="item+item*step",  name="mod21")

#***
# Model 22: Rating scale model
mod22 &lt;- sirt::R2conquest(dat=dat[,items], path.conquest=path.conquest,
              model="item+step", name="mod22")

#***
# Model 23: Multidimensional model
items &lt;- grep.vec( c("act", "sc" ), colnames(dat),  "OR" )$x
qmatrix &lt;- matrix( 0, nrow=length(items), 2 )
qmatrix[1:5,1] &lt;- 1
qmatrix[6:9,2] &lt;- 1
mod23 &lt;- sirt::R2conquest(dat=dat[,items], path.conquest=path.conquest,
            model="item+item*step", qmatrix=qmatrix, name="mod23")

#############################################################################
# EXAMPLE 3: Multi facet models (data.ratings1)
#############################################################################
library(sirt)
data(data.ratings1)
dat &lt;- data.ratings1

items &lt;- paste0("k",1:5)

# use numeric rater ID's
raters &lt;- as.numeric( substring( paste( dat$rater ), 3 ) )

#***
# Model 31: Rater model 'item+item*step+rater'
mod31 &lt;- sirt::R2conquest(dat=dat[,items], path.conquest=path.conquest,
              itemcodes=0:3, model="item+item*step+rater",
              pid=dat$idstud, X=data.frame("rater"=raters),
              regression="", name="mod31")

#***
# Model 32: Rater model 'item+item*step+rater+item*rater'
mod32 &lt;- sirt::R2conquest(dat=dat[,items], path.conquest=path.conquest,
              model="item+item*step+rater+item*rater",
              pid=dat$idstud, X=data.frame("rater"=raters),
              regression="", name="mod32")

## End(Not run)
</code></pre>


</div>