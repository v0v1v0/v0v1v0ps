<div class="container">

<table style="width: 100%;"><tr>
<td>tolerance.nb</td>
<td style="text-align: right;">R Documentation</td>
</tr></table>
<h2> Function to construct edges based on a tolerance angle and a maximum distance </h2>

<h3>Description</h3>

<p>This function creates an object of class <code>nb</code> (defined in the library spdep) containing a connexion diagram. The edges between sites are based on a tolerance angle and a maximum distance. The angle is directional; its direction is always from the bottow to the top of the screen.
</p>


<h3>Usage</h3>

<pre><code class="language-R">tolerance.nb(coords, unit.angle = "degrees", max.dist, tolerance, rot.angle,
 plot.sites=FALSE)
</code></pre>


<h3>Arguments</h3>

<table>
<tr style="vertical-align: top;">
<td><code>coords</code></td>
<td>
<p> A matrix or a data frame containing the X and Y coordinates of the study sites. </p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>unit.angle</code></td>
<td>
<p> Character. The measurement units in which angles are defined: either "degrees" (default) or "radians". </p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>max.dist</code></td>
<td>
<p> Numeric. The maximum distance of an edge linking two sites together. </p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>tolerance</code></td>
<td>
<p> Numeric. The tolerance angle in which a site can influence another site. The angle is measured vertically and from bottom to top of the pictures after rotation of the points.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>rot.angle</code></td>
<td>
<p> Numeric, optional. An angle at which a set of coordinates should be rotated before creating the connexion diagram. The set of coordinates is rotated counterclockwise. Negative values will produce a clockwise rotation.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>plot.sites</code></td>
<td>
<p> Logical (<code>TRUE</code>, <code>FALSE</code>) determining if the site should be plotted in a graphic window. This graph allows one to make sure the points are rotated in a correct direction.</p>
</td>
</tr>
</table>
<h3>Details</h3>

<p>Even though this function creates a connexion diagram based on a tolerance angle going from the bottom to the top of the screen, the resulting object is symmetric, meaning that a site influences another and vice versa. The final object does not represent a directional connexion network. 
</p>


<h3>Value</h3>

<p>The function returns an object of class <code>nb</code> with a list of integer vectors  corresponding to neighbour region numbers.
</p>


<h3>Warning</h3>

<p>This function was not design to handle a large number of rows in <code>coords</code>.
To use this function for a set of coordinates with more than 1500 entries is memory intensive.
</p>


<h3>Author(s)</h3>

<p> F. Guillaume Blanchet </p>


<h3>See Also</h3>

  <p><code>dnearneigh</code>, <code>cell2nb</code>, <code>graphneigh</code>, <code>tri2nb</code>, <code>knn2nb</code> </p>


<h3>Examples</h3>

<pre><code class="language-R">set.seed(1)
ex.data&lt;-cbind(runif(50),rexp(50))

### Construct object of class nb with a tolerance angle of 30 degrees
### and a maximum distance of 2 m.
nb.ex&lt;-tolerance.nb(ex.data, unit.angle = "degrees", max.dist=1,
 tolerance = 30)

### Construct object of class nb with a tolerance angle of 30 degrees
### and a maximum distance of 2 m. The coordinates are rotated at an angle
### of 45 degrees counterclockwise.
nb.ex2&lt;-tolerance.nb(ex.data, unit.angle = "degrees", max.dist=1,
 tolerance = 30, rot.angle = 45)

### Construct object of class nb with a tolerance angle of pi/8 radians
### and a maximum distance of 1.5 m. The coordinates are rotated at
### an angle of pi/4 radians clockwise.
nb.ex3&lt;-tolerance.nb(ex.data, unit.angle = "radians", max.dist=1.5,
 tolerance = pi/8, rot.angle = -pi*2/3)

par(mfrow=c(1,3))
plot(nb.ex,ex.data,asp=1)
plot(nb.ex2,ex.data,asp=1)
plot(nb.ex3,ex.data,asp=1)
</code></pre>


</div>