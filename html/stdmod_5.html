<div class="container">

<table style="width: 100%;"><tr>
<td>cond_effect</td>
<td style="text-align: right;">R Documentation</td>
</tr></table>
<h2>Conditional Effects</h2>

<h3>Description</h3>

<p>Compute the conditional effects in a moderated regression model.
</p>


<h3>Usage</h3>

<pre><code class="language-R">cond_effect(
  output,
  x = NULL,
  w = NULL,
  w_method = c("sd", "percentile"),
  w_percentiles = c(0.16, 0.5, 0.84),
  w_sd_to_percentiles = NA,
  w_from_mean_in_sd = 1,
  w_values = NULL
)

cond_effect_boot(
  output,
  x = NULL,
  w = NULL,
  ...,
  conf = 0.95,
  nboot = 100,
  boot_args = NULL,
  save_boot_est = TRUE,
  full_output = FALSE,
  do_boot = TRUE
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr style="vertical-align: top;">
<td><code>output</code></td>
<td>
<p>The output from <code>stats::lm()</code>. It can also accept the output
from
<code>std_selected()</code> or <code>std_selected_boot()</code>.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>x</code></td>
<td>
<p>The focal variable (independent variable), that is, the
variable with its effect on the outcome variable (dependent)
being moderated. It must be a numeric variable.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>w</code></td>
<td>
<p>The moderator. Both numeric variables and categorical variables
(character or factor) are supported.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>w_method</code></td>
<td>
<p>How to define "low", "medium", and "high" for the moderator
levels.
Default is in terms of mean and
standard deviation (SD) of the moderator, <code>"sd"</code>:
"low", "medium", and "high" are one SD below mean,
mean, and one SD above mean, respectively.
If equal to
<code>"percentile"</code>, then percentiles of the moderator in
the
dataset are used: "low", "medium", and "high" are
16th, 50th (median), and 84th percentiles, respectively.
Ignored if <code>w</code> is categorical.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>w_percentiles</code></td>
<td>
<p>If <code>w_method</code> is <code>"percentile"</code>, then this
argument
specifies the three percentiles to be used,
divided by 100.
It must be a
vector of two numbers. The default is
<code>c(.16, .50, .84)</code>,
the 16th, 50th, and 84th percentiles,
which corresponds approximately
to one SD below and above mean in a
normal distribution, respectively.
Ignored if <code>w</code> is categorical.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>w_sd_to_percentiles</code></td>
<td>
<p>If <code>w_method</code> is <code>"percentile"</code> and
this argument is
set to a number, this number will be
used to
to determine the percentiles to be used.
The
lower percentile is the percentile in a
normal
distribution
that is <code>w_sd_to_percentiles</code> SD below
the mean.
The upper percentile is the percentile in
a normal
distribution that is <code>w_sd_to_percentiles</code>
SD
above the mean. Therefore, if
<code>w_sd_to_percentiles</code> is set to 1, then the
lower
and upper percentiles are 16th and 84th,
respectively. Default is <code>NA</code>.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>w_from_mean_in_sd</code></td>
<td>
<p>How many SD from mean is used to define
"low" and
"high" for the moderator. Default is 1.
Ignored if <code>w</code> is categorical.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>w_values</code></td>
<td>
<p>The values of <code>w</code> to
be used. Default is <code>NULL</code>. If a
numeric vector is supplied, these
values will be used to compute the
conditional effects. Other arguments
on generating levels are ignored.
Note that, if <code>w</code> has been standardized
or centered, these values are for
the standardized or centered <code>w</code>.
The values will always be sorted.
This argument is ignored if <code>w</code> is
categorical.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>...</code></td>
<td>
<p>Arguments to be passed to <code>cond_effect()</code>.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>conf</code></td>
<td>
<p>The level of confidence for the confidence interval.
Default is .95, to get 95% confidence intervals.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>nboot</code></td>
<td>
<p>The number of bootstrap samples. Default is 100.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>boot_args</code></td>
<td>
<p>A named list of arguments to be passed to <code>boot::boot()</code>.
Default is <code>NULL</code>.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>save_boot_est</code></td>
<td>
<p>If <code>TRUE</code>, the default, the bootstrap estimates will
be saved in the element
<code>boot_est</code> of the output.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>full_output</code></td>
<td>
<p>Whether the full output from <code>boot::boot()</code> will be
returned.
Default is <code>FALSE</code>. If <code>TRUE</code>, the full output from
<code>boot::boot()</code> will be saved in the element <code>boot_out</code>
of the output.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>do_boot</code></td>
<td>
<p>Whether bootstrapping confidence intervals will be formed.
Default is <code>TRUE</code>. If <code>FALSE</code>, all arguments related to
bootstrapping will be ignored.</p>
</td>
</tr>
</table>
<h3>Details</h3>

<p><code>cond_effect()</code> uses the centering approach to find the conditional
effect of the focal variable. For each level of the moderator, the value for
this level is subtracted from the moderator scores, and the model is
fitted to the modified data.
The coefficient of the focal variable is then the conditional effect of the
focal variable when the moderator's score is equal this value.
</p>
<p><code>cond_effect_boot()</code> function is a wrapper of <code>cond_effect()</code>.
It calls <code>cond_effect()</code>
once for each bootstrap sample, and then computes the nonparametric
bootstrap percentile confidence intervals (Cheung, Cheung, Lau, Hui,
&amp; Vong, 2022). If the output object is the output of <code>std_selected()</code>
or <code>std_selected_boot()</code>, in which mean-centering and/or standardization
have been conducted, they will be repeated in each bootstrap sample.
Therefore, like <code>std_selected_boot()</code>, it can be used for form
nonparametric bootstrap confidence intervals for standardized
effects, though <code>cond_effect_boot()</code> does this for the standardized
conditional effects.
</p>
<p>This function ignores bootstrapping done by <code>std_selected_boot()</code>. It will
do its own bootstrapping.
</p>
<p>If <code>do_boot</code> is <code>FALSE</code>, then the object it returns is identical to that
by <code>cond_effect()</code>.
</p>
<p>This function intentionally does not have an argument for setting the seed
for
random number. Users are recommended to set the seed, e.g., using
<code>set.seed()</code>
before calling it, to ensure reproducibility.
</p>


<h3>Value</h3>

<p><code>cond_effect()</code> returns a data-frame-like object of the conditional effects.
The class is
<code>cond_effect</code> and the print method will print additional information of
the conditional effects. Additional information is stored in the
following attributes:
</p>

<ul>
<li> <p><code>call</code>: The original call.
</p>
</li>
<li> <p><code>output</code>: The <code>output</code> object, such as the output from <code>lm()</code>.
</p>
</li>
<li> <p><code>x</code>, <code>y</code>, and <code>w</code>: The three variables used to compute the conditional
effects: focal variable (<code>x</code>), outcome variable (<code>y</code>),
and the moderator (<code>w</code>).
</p>
</li>
<li> <p><code>w_method</code>: The method used to determine the values of the moderator
at the selected levels.
</p>
</li>
<li> <p><code>w_percentiles</code> The percentiles to use if <code>w_method</code> = <code>"percentile"</code>.
</p>
</li>
<li> <p><code>w_sd_to_percentiles</code>: If not equal to <code>NA</code>, this is a scalar, the
number of standard deviation from the mean used to
determine the percentiles for the "low" and "high"
levels of the moderator.
</p>
</li>
<li> <p><code>w_from_mean_in_sd</code>: The number of SD above or below the mean, for
determining the "low" and "high" levels of the
moderator if <code>w_method</code> is <code>"sd"</code>.
</p>
</li>
<li> <p><code>w_empirical_percentiles</code>: The actual percentile levels in the dataset
for the selected
levels of the moderator. A numeric vector.
</p>
</li>
<li> <p><code>w_empirical_z</code>: The actual distance from the mean, in SD, of each
selected level of the moderator. A numeric vector.
</p>
</li>
<li> <p><code>y_standardized</code>, <code>x_standardized</code>, and <code>w_standardized</code>: Each of them
is a logical scalar, indicating whether the outcome
variable, focal variable, and moderator are standardized.
</p>
</li>
</ul>
<p><code>cond_effect_boot()</code> also returns a data-frame-like object of the
conditional effects of the class
<code>cond_effect</code>, with additional information from the bootstrapping stored
in these attributes:
</p>

<ul>
<li> <p><code>boot_ci</code>: A data frame of the bootstrap confidence intervals of the
conditional effects.
</p>
</li>
<li> <p><code>nboot</code>: The number of bootstrap samples requested.
</p>
</li>
<li> <p><code>conf</code>: The level of confidence, in proportion.
</p>
</li>
<li> <p><code>boot_est</code>: A matrix of the bootstrap estimates of the conditional effects.
The number of rows equal to <code>nboot</code>, and the number of columns
equal to the number of levels of the moderator.
</p>
</li>
<li> <p><code>cond_effect_boot_call</code>: The call to <code>cond_effect_boot()</code>.
</p>
</li>
<li> <p><code>boot_out</code>: If available, the original output from <code>boot::boot()</code>.
</p>
</li>
</ul>
<h3>Functions</h3>


<ul><li> <p><code>cond_effect_boot()</code>: A wrapper of <code>cond_effect()</code> that forms
nonparametric bootstrap confidence intervals.
</p>
</li></ul>
<h3>Author(s)</h3>

<p>Shu Fai Cheung <a href="https://orcid.org/0000-0002-9871-9448">https://orcid.org/0000-0002-9871-9448</a>
</p>


<h3>Examples</h3>

<pre><code class="language-R">
# Load a sample data set

dat &lt;- test_x_1_w_1_v_1_cat1_n_500

# Do a moderated regression by lm
lm_raw &lt;- lm(dv ~ iv*mod + v1 + cat1, dat)
summary(lm_raw)
cond_effect(lm_raw, x = iv, w = mod)

lm_std &lt;- std_selected(lm_raw, to_standardize = ~ iv + mod)
cond_effect(lm_std, x = iv, w = mod)

# Categorical moderator
lm_cat &lt;- lm(dv ~ iv*cat1 + v1, dat)
summary(lm_cat)
cond_effect(lm_cat, x = iv, w = cat1)


# Load a sample data set

dat &lt;- test_x_1_w_1_v_1_cat1_n_500

# Do a moderated regression by lm
lm_raw &lt;- lm(dv ~ iv*mod + v1 + cat1, dat)
summary(lm_raw)

lm_std &lt;- std_selected(lm_raw, to_standardize = ~ iv + mod)
cond_effect(lm_std, x = iv, w = mod)

# Form nonparametric bootstrap confidence intervals
# Use 2000 or even 5000 for nboot in real research
out &lt;- cond_effect_boot(lm_std, x = iv, w = mod, nboot = 50)
out

</code></pre>


</div>