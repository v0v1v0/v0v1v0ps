<div class="container">

<table style="width: 100%;"><tr>
<td>Linear RGB and XYZ Calculation</td>
<td style="text-align: right;">R Documentation</td>
</tr></table>
<h2>Convert Signal RGB coordinates to XYZ, or Linear RGB</h2>

<h3>Description</h3>

<p>Convert signal RGB coordinates to XYZ, or to linear RGB</p>


<h3>Usage</h3>

<pre><code class="language-R">XYZfromRGB( RGB, space='sRGB', which='scene', TF=NULL, maxSignal=1 ) 

LinearRGBfromSignalRGB( RGB, space='sRGB', which='scene', TF=NULL, maxSignal=1 ) 
</code></pre>


<h3>Arguments</h3>

<table>
<tr style="vertical-align: top;">
<td><code>RGB</code></td>
<td>
<p> a numeric Nx3 matrix with non-linear signal RGB coordinates in the rows, or a vector that can be converted to such a matrix, by row.
These should be in the appropriate cube <code>[0,maxSignal]</code><code class="reqn">^3</code>.
</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>space</code></td>
<td>
<p>the name of an installed RGB space.
The name matching is partial and case-insensitive.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>which</code></td>
<td>
<p>either <code>'scene'</code> or <code>'display'</code>.
For <code>XYZfromRGB()</code> <code>which</code> describes the output XYZ.
For <code>LinearRGBfromSignalRGB()</code> <code>which</code> describes the output RGB.
Usually the OOTF for the space is the identity and so <code>'scene'</code> and <code>'display'</code> are the same.
</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>TF</code></td>
<td>
<p>if not <code>NULL</code>, <code>TF</code> is a <code>TransferFunction</code>
that overrides the appropriate transfer function of <code>space</code>.
<br><code>TF</code> can also be a positive number.
If <code>TF=1</code>, then <code>TF</code> is set to <code>identity.TF</code>,
so the returned RGB values are not clamped (see <b>Value</b>).
If <code>TF!=1</code> it is used to create either
<code>power.EOTF()</code> or <code>power.OETF()</code> as approriate.
If <code>TF</code> is not <code>NULL</code> in <code>LinearRGBfromSignalRGB()</code>, then <code>space</code> is ignored.
</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>maxSignal</code></td>
<td>
<p>maximum value of the input signal <code>RGB</code>.
Other common values are 100, 255, 1023, 4095, and 65535.
Even when 1, they are still taken to be non-linear signal values.</p>
</td>
</tr>
</table>
<h3>Details</h3>

<p>In <code>XYZfromRGB()</code>, the conversion is done in 2 steps:
</p>

<ul>
<li>
<p> signal RGB    →   linear RGB using <code>LinearRGBfromSignalRGB()</code> and all other the given arguments
</p>
</li>
<li>
<p> linear RGB    →   XYZ using the appropriate 3x3 matrix for the given <code>space</code> and <code>which</code>
</p>
</li>
</ul>
<h3>Value</h3>

<p><code>XYZfromRGB()</code> returns a <code>data.frame</code> with N rows and these columns:
</p>
<table>
<tr style="vertical-align: top;">
<td><code>XYZ</code></td>
<td>
<p>the calculated XYZ vectors.
These are for viewing under the white point of the given RGB space.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>OutOfGamut</code></td>
<td>
<p>a logical vector. TRUE means the input signal RGB is outside the cube <code>[0,maxSignal]</code><code class="reqn">^3</code>.
If <code>TF</code> is not <code>identity.TF</code>, 
then the input signal RGBs are clamped to this cube before further calculations.</p>
</td>
</tr>
</table>
<p><code>LinearRGBfromSignalRGB()</code> returns a <code>data.frame</code> with N rows and these columns:
</p>
<table>
<tr style="vertical-align: top;">
<td><code>RGB</code></td>
<td>
<p>the calculated linear RGB vectors, either scene linear or display linear.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>OutOfGamut</code></td>
<td>
<p>a logical vector. TRUE means the input signal RGB is outside the cube <code>[0,maxSignal]</code><code class="reqn">^3</code>.
If <code>TF</code> is not <code>identity.TF</code>, then the signal RGBs are clamped to this cube before linearizing.</p>
</td>
</tr>
</table>
<p>In case of error, both functions return NULL.
</p>


<h3>References</h3>

<p>Wikipedia. <b>RGB color space</b>.
<a href="https://en.wikipedia.org/wiki/RGB_color_space">https://en.wikipedia.org/wiki/RGB_color_space</a>
</p>


<h3>See Also</h3>

<p><code>RGBfromXYZ()</code>,
<code>SignalRGBfromLinearRGB()</code>,
<code>installRGB()</code>
</p>


<h3>Examples</h3>

<pre><code class="language-R">XYZfromRGB( c(128,200,255, 0,0,0,  255,255,255), max=255 )$XYZ * 100
##              X         Y        Z
##  [1,] 47.60334  53.11601 102.3549
##  [2,]  0.00000   0.00000   0.0000
##  [3,] 95.04559 100.00000 108.9058


XYZfromRGB( c(128,200,255, 0,0,0,  255,255,255), space='Adobe', max=255 )$XYZ   * 100
##              X         Y        Z
##  [1,] 42.36398  50.82876 103.8704
##  [2,]  0.00000   0.00000   0.0000
##  [3,] 95.04559 100.00000 108.9058
</code></pre>


</div>