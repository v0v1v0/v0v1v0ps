<div class="container">

<table style="width: 100%;"><tr>
<td>sf_run_bulk_operation</td>
<td style="text-align: right;">R Documentation</td>
</tr></table>
<h2>Run Bulk Operation</h2>

<h3>Description</h3>

<p><a href="https://lifecycle.r-lib.org/articles/stages.html#stable"><img src="../help/figures/lifecycle-stable.svg" alt="[Stable]"></a>
</p>
<p>This function is a convenience wrapper for submitting bulk API jobs
</p>


<h3>Usage</h3>

<pre><code class="language-R">sf_run_bulk_operation(
  input_data,
  object_name,
  operation = c("insert", "delete", "upsert", "update", "hardDelete"),
  external_id_fieldname = NULL,
  guess_types = TRUE,
  api_type = c("Bulk 1.0", "Bulk 2.0"),
  batch_size = NULL,
  interval_seconds = 3,
  max_attempts = 200,
  wait_for_results = TRUE,
  record_types = c("successfulResults", "failedResults", "unprocessedRecords"),
  combine_record_types = TRUE,
  control = list(...),
  ...,
  verbose = FALSE
)

sf_bulk_operation(
  input_data,
  object_name,
  operation = c("insert", "delete", "upsert", "update", "hardDelete"),
  external_id_fieldname = NULL,
  guess_types = TRUE,
  api_type = c("Bulk 1.0", "Bulk 2.0"),
  batch_size = NULL,
  interval_seconds = 3,
  max_attempts = 200,
  wait_for_results = TRUE,
  record_types = c("successfulResults", "failedResults", "unprocessedRecords"),
  combine_record_types = TRUE,
  control = list(...),
  ...,
  verbose = FALSE
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr style="vertical-align: top;">
<td><code>input_data</code></td>
<td>
<p><code>named vector</code>, <code>matrix</code>, <code>data.frame</code>, or
<code>tbl_df</code>; data can be coerced into CSV file for submitting as batch request</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>object_name</code></td>
<td>
<p><code>character</code>; the name of the Salesforce object that the
function is operating against (e.g. "Account", "Contact", "CustomObject__c").</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>operation</code></td>
<td>
<p><code>character</code>; string defining the type of operation being performed</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>external_id_fieldname</code></td>
<td>
<p><code>character</code>; string identifying a custom field on the
object that has been set as an "External ID" field. This field is used to reference
objects during upserts to determine if the record already exists in Salesforce or not.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>guess_types</code></td>
<td>
<p><code>logical</code>; indicating whether or not to use <code>col_guess()</code>
to try and cast the data returned in the recordset. If <code>TRUE</code> then
<code>col_guess()</code> is used, if <code>FALSE</code> then all fields will be returned
as character. This is helpful when <code>col_guess()</code> will mangle field values
in Salesforce that you'd like to preserve during translation into a <code>tbl_df</code>,
like numeric looking values that must be preserved as strings ("48.0").</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>api_type</code></td>
<td>
<p><code>character</code>; one of <code>"REST"</code>, <code>"SOAP"</code>,
<code>"Bulk 1.0"</code>, or <code>"Bulk 2.0"</code> indicating which API to use when
making the request.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>batch_size</code></td>
<td>
<p><code>integer</code>; the number of individual records to be included in a
single batch uploaded to the Bulk APIs (1.0 or 2.0).</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>interval_seconds</code></td>
<td>
<p><code>integer</code>; defines the seconds between attempts to check
for job completion.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>max_attempts</code></td>
<td>
<p><code>integer</code>; defines then max number attempts to check for job
completion before stopping.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>wait_for_results</code></td>
<td>
<p><code>logical</code>; indicating whether to wait for the operation to complete
so that the batch results of individual records can be obtained</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>record_types</code></td>
<td>
<p><code>character</code>; one or more types of records to retrieve
from the results of running the specified job</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>combine_record_types</code></td>
<td>
<p><code>logical</code>; indicating for Bulk 2.0 jobs whether the
successfulResults, failedResults, and unprocessedRecords should be stacked
together by binding the rows</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>control</code></td>
<td>
<p><code>list</code>; a list of parameters for controlling the behavior of
the API call being used. For more information of what parameters are available
look at the documentation for <code>sf_control</code>.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>...</code></td>
<td>
<p>other arguments passed on to <code>sf_control</code> or <code>sf_create_job_bulk</code>
to specify the <code>content_type</code>, <code>concurrency_mode</code>, and/or <code>column_delimiter</code>.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>verbose</code></td>
<td>
<p><code>logical</code>; an indicator of whether to print additional
detail for each API call, which is useful for debugging. More specifically, when
set to <code>TRUE</code> the URL, header, and body will be printed for each request,
along with additional diagnostic information where available.</p>
</td>
</tr>
</table>
<h3>Value</h3>

<p>A <code>tbl_df</code> of the results of the bulk job
</p>


<h3>Note</h3>

<p>With Bulk 2.0 the order of records in the response is not guaranteed to
match the ordering of records in the original job data.
</p>


<h3>See Also</h3>

<p><a href="https://developer.salesforce.com/docs/atlas.en-us.api_asynch.meta/api_asynch">Salesforce Documentation</a>
</p>


<h3>Examples</h3>

<pre><code class="language-R">## Not run: 
n &lt;- 20
new_contacts &lt;- tibble(FirstName = rep("Test", n), 
                       LastName = paste0("Contact", 1:n))
# insert new records into the Contact object
inserts &lt;- sf_bulk_operation(input_data = new_contacts, 
                             object_name = "Contact", 
                             operation = "insert")

## End(Not run)
</code></pre>


</div>