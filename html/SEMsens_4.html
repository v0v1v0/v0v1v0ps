<div class="container">

<table style="width: 100%;"><tr>
<td>sa.aco</td>
<td style="text-align: right;">R Documentation</td>
</tr></table>
<h2>Sensitivity Analysis for Structural Equation Modeling Using Ant
Colony Optimization (ACO)</h2>

<h3>Description</h3>

<p>This function can perform sensitivity analysis for
structural equation modeling using ant colony optimization (ACO).
</p>


<h3>Usage</h3>

<pre><code class="language-R">sa.aco(
  data = NULL,
  sample.cov,
  sample.nobs,
  model,
  sens.model,
  opt.fun,
  d = NULL,
  paths = NULL,
  verbose = TRUE,
  max.value = Inf,
  max.iter = 1000,
  e = 1e-10,
  n.of.ants = 10,
  k = 100,
  q = 1e-04,
  sig.level = 0.05,
  rate.of.conv = 0.1,
  measurement = FALSE,
  xi = 0.5,
  seed = NULL,
  ...
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr style="vertical-align: top;">
<td><code>data</code></td>
<td>
<p>The data set used for analysis.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>sample.cov</code></td>
<td>
<p>covariance matrix for SEM analysis
when data are not available.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>sample.nobs</code></td>
<td>
<p>Number of observations for covariance matrix.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>model</code></td>
<td>
<p>The analytic model of interest.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>sens.model</code></td>
<td>
<p>Sensitivity analysis model template for
structural equation modeling
with a phantom variable. This is the model of interest
with a phantom variable and sensitivity parameters added.
See examples provided.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>opt.fun</code></td>
<td>
<p>Customized or preset optimization function.
The argument can be customized as a function, e.g., opt.fun =
quote(new.par$pvalue[paths]-old.par$pvalue[paths]), where new.par and old.par
are the parameter estimates from the sensitivity analysis and analytic models,
respectively.
When opt.fun is
1, the optimization function is the average departure of new estimate
from the old estimate divided by the old estimate
y &lt;-  mean(abs(new.par$est[paths] -
old.par$est[paths]))/mean(abs(old.par$est[paths])); When opt.fun is
2, the optimization function is the standard deviation of deviance
divided by the old estimate
y &lt;-  stats::sd(new.par$est[paths] - old.par$est[paths])/
mean(abs(old.par$est[paths]));
When opt.fun is 3, the optimization function is the average
p value changed or
y &lt;-  mean(abs(new.par$pvalue[paths] - old.par$pvalue[paths]));
When opt.fun is 4, the optimization function is the average distance
from significance level or y &lt;-  mean(abs(new.par$pvalue[paths] -
rep(sig.level,length(paths))));
When opt.fun is 5, we assess the change of RMSEA or
y &lt;-  abs(unname(lavaan::fitmeasures(new.out)["rmsea"]) -
unname(lavaan::fitmeasures(old.out)["rmsea"]));
When opt.fun is 6, we optimize how close RMSEA is to 0.05 or
y &lt;-  1/abs(unname(lavaan::fitmeasures(new.out)["rmsea"]) - 0.05).</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>d</code></td>
<td>
<p>Domains for initial sampling, default is c(-1 ,1) for all
sensitivity analysis parameters. It can
be specified as a list of ranges. For example,
d = list(-0.8, 0.8, -0.9, 0.9) for two
sampling domains with the first from -0.8 to 0.8 and
the second from -0.9 to 0.9.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>paths</code></td>
<td>
<p>Paths in the model to be evaluated in a sensitivity analysis. If not
specified, all paths will be evaluated. It can be specified in a
numeric format or in a model format. For example, if we evaluate the changes (in p value
or parameter estimation) for paths in an analytic model, we may specify
paths in a model format, e.g.,
paths = 'm ~ x
y ~ x + m'.
Or, alternatively, as specify paths = c(1:3) if these paths present in line 1 to 3 in the
sensitivity analysis model results.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>verbose</code></td>
<td>
<p>Print out evaluation process if TRUE, default is TRUE.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>max.value</code></td>
<td>
<p>Maximal value of optimization when used as
the stopping criterion. Default is infinite.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>max.iter</code></td>
<td>
<p>Maximal number of function evaluations when used as
the stopping criterion.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>e</code></td>
<td>
<p>Maximum error value used when solution quality used as
the stopping criterion, default is 1e-10.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>n.of.ants</code></td>
<td>
<p>Number of ants used in each iteration after the initialization
of k converged sensitivity analysis models, default value is 10.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>k</code></td>
<td>
<p>Size of the solution archive, default is 100.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>q</code></td>
<td>
<p>Locality of the search (0,1), default is 0.0001.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>sig.level</code></td>
<td>
<p>Significance level, default value is 0.05.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>rate.of.conv</code></td>
<td>
<p>The convergence rate threshold for sensitivity analysis models,
default is .10.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>measurement</code></td>
<td>
<p>Logical. If TRUE, the argument paths will
include measurement paths in the lavaanify format. Default is FALSE.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>xi</code></td>
<td>
<p>Convergence pressure (0, Inf), suggested: (0,1), default is 0.5.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>seed</code></td>
<td>
<p>Random seed if specified, default is NULL.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>...</code></td>
<td>
<p>Additional arguments from the lavaan package.</p>
</td>
</tr>
</table>
<h3>Value</h3>

<p>Sensitivity analysis results, including the number of evaluations (n.eval),
number of iterations (n.iter), the maximum value of the objective function (max.y) and
associated sensitivity parameters values (phantom.coef), analytic model (old.model),
its results (old.model.par) and fit measures (old.model.fit),
sensitivity analysis model (sens.model), its fit measures (sens.fit),
outcome of the objective function (outcome), sensitivity parameters across all
converged evaluations (sens.pars),
sensitivity analysis model results (model.results),
analytic model results (old.out),
and the first converged sensitivity analysis model results (sens.out).
</p>


<h3>References</h3>

<p>Leite, W., &amp; Shen, Z., Marcoulides, K., Fish, C., &amp; Harring, J. (accepted).
Using ant colony optimization for sensitivity analysis in structural equation modeling.
Structural Equation Modeling: A Multidisciplinary Journal.
</p>
<p>Socha, K., &amp; Dorigo, M. (2008). Ant colony optimization for
continuous domains. <em>European Journal of Operational Research,
185</em>(3), 1155-1173. &lt;doi:10.1016/j.ejor.2006.06.046&gt;
</p>
<p>Harring, J. R., McNeish, D. M., &amp; Hancock, G. R. (2017).
Using phantom variables in structural equation modeling to
assess model sensitivity to external misspecification.
<em>Psychological Methods, 22</em>(4), 616-631.
&lt;doi:10.1080/10705511.2018.1506925&gt;
</p>
<p>We thank Dr. Krzysztof Socha for providing us the
ACO code for continuous domains (http://iridia.ulb.ac.be/supp/IridiaSupp2008-001/)
that the current function is based on.
</p>


<h3>Examples</h3>

<pre><code class="language-R">library(lavaan)
# Generate data, this is optional as lavaan also takes variance covariance matrix
sim.model &lt;- ' x =~ x1 + 0.8*x2 + 1.2*x3
               y =~ y1 + 0.5*y2 + 1.5*y3
               m ~ 0.5*x
               y ~ 0.5*x + 0.8*m'
set.seed(10)
data &lt;- simulateData(sim.model, sample.nobs = 1000L)
# standardize dataset
data = data.frame(apply(data,2,scale))

# Step 1: Set up the analytic model of interest
model &lt;- 'x =~ x1 + x2 + x3
          y =~ y1 + y2 + y3
          m ~ x
          y ~ x + m'

# Step 2: Set up the sensitivity analysis model.
#         The sensitivity parameters are phantom1, phantom2, and phantom3 in this example.
sens.model = 'x =~ x1 + x2 + x3
              y =~ y1 + y2 + y3
              m ~ x
              y ~ x + m
              x ~ phantom1*phantom
              m ~ phantom2*phantom
              y ~ phantom3*phantom
              phantom =~ 0 # added for mean of zero
              phantom ~~ 1*phantom' # added for unit variance

# Step 3: Set up the paths of interest to be evaluated in sensitivity analysis.
# Suppose we are interested in all direct and indirect paths.
  paths &lt;- 'm ~ x
            y ~ x + m'

# Step 4: Perform sensitivity analysis
my.sa &lt;- sa.aco(data, model = model, sens.model = sens.model,
                opt.fun = 3, k = 5, #p-value
                paths = paths,
                max.iter = 10)
#Note, please specify larger numbers for k (e.g., 100) and max.iter (e.g., 1000)

# Step 5: Summarize sensitivity analysis results.
# See sens.tables function for explanation of results.
tables &lt;- sens.tables(my.sa)


</code></pre>


</div>