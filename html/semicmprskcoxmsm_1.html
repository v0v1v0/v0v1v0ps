<div class="container">

<table style="width: 100%;"><tr>
<td>bayesian_boot_irrd</td>
<td style="text-align: right;">R Documentation</td>
</tr></table>
<h2>
Obtaining Bayesian Bootstrap Sample for Individual Risk Difference and Risk Ratio.
</h2>

<h3>Description</h3>

<p><code>bayesian_boot_irrd</code> provides the bootstrap sample for individual risk difference and risk ratio, it can be used for further inferences.
</p>


<h3>Usage</h3>

<pre><code class="language-R">bayesian_boot_irrd(dat2,B,sigma_2_0, EM_initial, varlist, t1_star,t)
</code></pre>


<h3>Arguments</h3>

<table>
<tr style="vertical-align: top;">
<td><code>dat2</code></td>
<td>

<p>The dataset, includes non-terminal events, terminal events as well as event indicator.
</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>B</code></td>
<td>

<p>Number of bootstraps that the user want to run, typically we use B = 500.
</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>sigma_2_0</code></td>
<td>

<p>Initial value for sigma_2 for the general Markov model
</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>EM_initial</code></td>
<td>

<p>Initial value for the EM algorithm, the output of <code>OUT_em_weights</code>.
</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>varlist</code></td>
<td>

<p>Confounder list for the propensity score model.
</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>t1_star</code></td>
<td>

<p>Fixed non-terminal event time for estimating risk difference/ratio for terminal event following the non-terminal event.
</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>t</code></td>
<td>

<p>Fixed time point of interest to compare the individual risk difference / ratio.
</p>
</td>
</tr>
</table>
<h3>Details</h3>

<p>For each  bootstrap sample:
</p>
<p>1. Generate <code class="reqn">n</code> standard exponential (mean and variance 1) random variates : <code class="reqn">u_1, u_2,..., u_n</code>;
</p>
<p>2. The weights for the Bayesian bootstrap are: <code class="reqn">w_{i}^{boot} = u_i / \bar{u}</code>, where <code class="reqn">\bar{u} = n^{-1}\sum_{i=1}^{n} u_i</code>;
</p>
<p>3. Calculate the propensity score and IP weights <code class="reqn">w_{i}^{IPW}</code> based on Bayesian bootstrap weighted data, and assigned the weights for fitting the MSM general Markov model as <code class="reqn">w_i = w_{i}^{boot} * w_{i}^{IPW}</code>.
</p>
<p>4. After obtaining <code class="reqn">\hat{\theta}</code> and <code class="reqn">\hat{b}_i</code>, for each individual i, calculate the IRR and IRD by plugging <code class="reqn">\hat{\theta}, \hat{b}_i</code> and a=0, a=1 separately at time t.
</p>
<p>The 95% prediction intervals (PI) cam be obtained by the normal approximation using bootstrap standard error.
</p>


<h3>Value</h3>

<table>
<tr style="vertical-align: top;">
<td><code>RD1_boot</code></td>
<td>

<p>A n times B matrix as the Bayesian bootstrap sample for each data point. The sample is for individual risk difference for time to non-terminal event at time t.
</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>RD2_boot</code></td>
<td>

<p>A n times B matrix as the Bayesian bootstrap sample for each data point. The sample is for individual risk difference for time to terminal event without non-terminal event at time t.
</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>RD3_boot</code></td>
<td>

<p>A n times B matrix as the Bayesian bootstrap sample for each data point. The sample is for individual risk difference for time to terminal event following non-terminal event by t1_start at time t.
</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>RR1_boot</code></td>
<td>

<p>A n times B matrix as the Bayesian bootstrap sample for each data point. The sample is for individual risk ratio for time to non-terminal event at time t.
</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>RR2_boot</code></td>
<td>

<p>A n times B matrix as the Bayesian bootstrap sample for each data point. The sample is for individual risk ratio for time to terminal event without non-terminal event at time t.
</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>RR3_boot</code></td>
<td>

<p>A n times B matrix as the Bayesian bootstrap sample for each data point. The sample is for individual risk ratio for time to terminal event following non-terminal event by t1_start at time t.
</p>
</td>
</tr>
</table>
</div>