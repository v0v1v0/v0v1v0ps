<div class="container">

<table style="width: 100%;"><tr>
<td>new_property</td>
<td style="text-align: right;">R Documentation</td>
</tr></table>
<h2>Define a new property</h2>

<h3>Description</h3>

<p>A property defines a named component of an object. Properties are
typically used to store (meta) data about an object, and are often
limited to a data of a specific <code>class</code>.
</p>
<p>By specifying a <code>getter</code> and/or <code>setter</code>, you can make the property
"dynamic" so that it's computed when accessed or has some non-standard
behaviour when modified.
</p>


<h3>Usage</h3>

<pre><code class="language-R">new_property(
  class = class_any,
  getter = NULL,
  setter = NULL,
  validator = NULL,
  default = NULL,
  name = NULL
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr style="vertical-align: top;">
<td><code>class</code></td>
<td>
<p>Class that the property must be an instance of.
See <code>as_class()</code> for details.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>getter</code></td>
<td>
<p>An optional function used to get the value. The function
should take <code>self</code> as its sole argument and return the value. If you
supply a <code>getter</code>, you are responsible for ensuring that it returns
an object of the correct <code>class</code>; it will not be validated automatically.
</p>
<p>If a property has a getter but doesn't have a setter, it is read only.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>setter</code></td>
<td>
<p>An optional function used to set the value. The function
should take <code>self</code> and <code>value</code> and return a modified object.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>validator</code></td>
<td>
<p>A function taking a single argument, <code>value</code>, the value
to validate.
</p>
<p>The job of a validator is to determine whether the property value is valid.
It should return <code>NULL</code> if the object is valid, or if it's not valid,
a single string describing the problem. The message should not include the
name of the property as this will be automatically appended to the
beginning of the message.
</p>
<p>The validator will be called after the <code>class</code> has been verified, so
your code can assume that <code>value</code> has known type.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>default</code></td>
<td>
<p>When an object is created and the property is not supplied,
what should it default to? If <code>NULL</code>, defaults to the "empty" instance
of <code>class</code>.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>name</code></td>
<td>
<p>Property name, primarily used for error messages. Used
primrarily for testing as it is set automatically when using a list of
properties.</p>
</td>
</tr>
</table>
<h3>Value</h3>

<p>An S7 property, i.e. a list with class <code>S7_property</code>.
</p>


<h3>Examples</h3>

<pre><code class="language-R"># Simple properties store data inside an object
pizza &lt;- new_class("pizza", properties = list(
  slices = new_property(class_numeric, default = 10)
))
my_pizza &lt;- pizza(slices = 6)
my_pizza@slices
my_pizza@slices &lt;- 5
my_pizza@slices

your_pizza &lt;- pizza()
your_pizza@slices

# Dynamic properties can compute on demand
clock &lt;- new_class("clock", properties = list(
  now = new_property(getter = function(self) Sys.time())
))
my_clock &lt;- clock()
my_clock@now; Sys.sleep(1)
my_clock@now
# This property is read only
try(my_clock@now &lt;- 10)

# These can be useful if you want to deprecate a property
person &lt;- new_class("person", properties = list(
  first_name = class_character,
  firstName = new_property(
     getter = function(self) {
       warning("@firstName is deprecated; please use @first_name instead", call. = FALSE)
       self@first_name
     },
     setter = function(self, value) {
       warning("@firstName is deprecated; please use @first_name instead", call. = FALSE)
       self@first_name &lt;- value
       self
     }
   )
))
hadley &lt;- person(first_name = "Hadley")
hadley@firstName
hadley@firstName &lt;- "John"
hadley@first_name
</code></pre>


</div>