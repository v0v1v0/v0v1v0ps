<div class="container">

<table style="width: 100%;"><tr>
<td>confusion</td>
<td style="text-align: right;">R Documentation</td>
</tr></table>
<h2>Performance calculation for soft classification</h2>

<h3>Description</h3>

<p>These performance measures can be used with prediction and reference being continuous class
memberships in [0, 1].
</p>
<p>Calculate the soft confusion matrix
</p>


<h3>Usage</h3>

<pre><code class="language-R">confusion(r = stop("missing reference"), p = stop("missing prediction"),
  groups = NULL, operator = "prd", drop = FALSE, .checked = FALSE)

confmat(r = stop("missing reference"), p = stop("missing prediction"), ...)

sens(r = stop("missing reference"), p = stop("missing prediction"),
  groups = NULL, operator = "prd", op.dev = dev(match.fun(operator)),
  op.postproc = postproc(match.fun(operator)), eps = 1e-08, drop = FALSE,
  .checked = FALSE)

spec(r = stop("missing reference"), p = stop("missing prediction"), ...)

ppv(r = stop("missing reference"), p = stop("missing prediction"), ...,
  .checked = FALSE)

npv(r = stop("missing reference"), p = stop("missing prediction"), ...,
  .checked = FALSE)
</code></pre>


<h3>Arguments</h3>

<table>
<tr style="vertical-align: top;">
<td><code>r</code></td>
<td>
<p>vector, matrix, or array with reference.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>p</code></td>
<td>
<p>vector, matrix, or array with predictions</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>groups</code></td>
<td>
<p>grouping variable for the averaging by <code>rowsum</code>. If <code>NULL</code>,
all samples (rows) are averaged.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>operator</code></td>
<td>
<p>the <code>operators</code> to be used</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>drop</code></td>
<td>
<p>should the results possibly be returned as vector instead of 1d array? (Note that
levels of <code>groups</code> are never dropped, you need to do that e.g. by
<code>factor</code>.)</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>.checked</code></td>
<td>
<p>for internal use: the inputs are guaranteed to be of same size and shape. If
<code>TRUE</code>, <code>confusion</code> omits input checking</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>...</code></td>
<td>
<p>handed to <code>sens</code></p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>op.dev</code></td>
<td>
<p>does the operator measure deviation?</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>op.postproc</code></td>
<td>
<p>if a post-processing function is needed after averaging, it can be given
here. See the example.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>eps</code></td>
<td>
<p>limit below which denominator is considered 0</p>
</td>
</tr>
</table>
<h3>Details</h3>

<p>The rows of <code>r</code> and <code>p</code> are considered the samples, columns will usually hold the
classes, and further dimensions are preserved but ignored.
</p>
<p><code>r</code> must have the same number of rows and columns as <code>p</code>, all other dimensions may be
filled by recycling.
</p>
<p><code>spec</code>, <code>ppv</code>, and <code>npv</code> use the symmetry between the performance measures as
described in the article and call <code>sens</code>.
</p>


<h3>Value</h3>

<p>numeric of size (ngroups x <code>dim (p) [-1]</code>) with the respective performance measure
</p>


<h3>Author(s)</h3>

<p>Claudia Beleites
</p>


<h3>References</h3>

<p>see the literature in <code>citation ("softclassval")</code>
</p>


<h3>See Also</h3>

<p>Operators: <code>prd</code>
</p>
<p>For the complete confusion matrix, <code>confmat</code>
</p>


<h3>Examples</h3>

<pre><code class="language-R">
ref &lt;- softclassval:::ref
ref

pred &lt;- softclassval:::pred
pred

## Single elements or diagonal of confusion matrix
confusion (r = ref, p = pred)

## complete confusion matrix
cm &lt;- confmat (r = softclassval:::ref, p = pred) [1,,]
cm

## Sensitivity-Specificity matrix:
cm / rowSums (cm)

## Matrix with predictive values:
cm / rep (colSums (cm), each = nrow (cm))

## sensitivities
sens (r = ref, p = pred)

## specificities
spec (r = ref, p = pred)

## predictive values
ppv (r = ref, p = pred)
npv (r = ref, p = pred)
</code></pre>


</div>