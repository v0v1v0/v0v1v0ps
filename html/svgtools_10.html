<div class="container">

<table style="width: 100%;"><tr>
<td>stackedBar</td>
<td style="text-align: right;">R Documentation</td>
</tr></table>
<h2>Adjust (stacked) bar chart to values on a given scale</h2>

<h3>Description</h3>

<p>Adjusts the horizontal (XML attribute 'x') or vertical (XML attribute 'y') position as well as width/height of bar segments (XML elements of type 'rect') and optionally value labels (XML elements of type 'text'). Positions are calculated relative to a given frame (XML element of type 'rect') and the position of a data value within the minimum and maximum of a given scale. This process is called scaling.<br>
In preparation, it is necessary to name a group (set attribute 'id' of XML element of type 'g') of bar segments (and value labels). Bar segments (and value labels) need to be of the same amount as there are data values for adjustment.<br>
It is possible to group several such groups together. Only the outer group needs to be named in that case, for convenience.
</p>


<h3>Usage</h3>

<pre><code class="language-R">stackedBar(
  svg,
  frame_name,
  group_name,
  scale_real,
  values,
  alignment = "horizontal",
  has_labels = TRUE,
  label_position = "center",
  decimals = 0,
  display_limits = 0,
  ...
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr style="vertical-align: top;">
<td><code>svg</code></td>
<td>
<p>XML document with SVG content</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>frame_name</code></td>
<td>
<p>Name (attribute 'id') of frame (XML element 'rect') for positioning bar segments (and value labels).</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>group_name</code></td>
<td>
<p>Name (attribute 'id') of group (XML element 'g') containing either bar segments (and value labels) or further groups, containing bar segments (and value labels) themselves.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>scale_real</code></td>
<td>
<p>Numeric vector (e.g. <code>c(0,100)</code>) of arbitrary length. Only minimum and maximum are used for scaling of values.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>values</code></td>
<td>
<p>Either a numeric vector, a numeric matrix or a dataframe with only numeric columns.<br>
If a vector is given, it corresponds to one bar (group of bar segments and, optionally, value labels).<br>
If a matrix or dataframe is given, rows define the value set for several (stacked) bars grouped together.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>alignment</code></td>
<td>
<p>Character value. Accepts 'horizontal' (default) or 'vertical'. See details.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>has_labels</code></td>
<td>
<p>Are there value labels (of XML type 'text') to adjust? (default TRUE)</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>label_position</code></td>
<td>
<p>Character value. Accepts 'start', 'center' (default) and 'end'. This refers to the underlying bar segments.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>decimals</code></td>
<td>
<p>Integer value defining the number of decimal digits of value labels (default 0). It is possible to set the rounding of the labels to rounding away from zero by <code>options("svgtools.roundAwayFromZero" = TRUE)</code>.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>display_limits</code></td>
<td>
<p>Interval for (small) values, that lead to suppression of the corresponding value labels. If only one value x is given, it is turned into the interval c(-x,x). (default 0 = no suppression)</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>...</code></td>
<td>
<p>Further arguments used internally by <code>referenceBar</code>, <code>diffBar</code> and <code>percentileBar</code>.</p>
</td>
</tr>
</table>
<h3>Details</h3>

<p>'Horizontal' alignment refers to adjustment of the x-coordinates of elements, 'vertical' alignment to adjustment of the y-coordinates.<br>
Bar segments and, optionally, value labels may be grouped together in any order in the SVG file. The function will automatically use XML elements from left to right (with <code>alignment='horizontal'</code>) or bottom to top (with <code>alignment='vertical'</code>) according to their x/y-coordinates.<br>
Furthermore, the SVG file order of several bars grouped together in an outer group is irrelevant. The function will automatically use bars (that is, groups of bar segments and, optionally, value labels) from top to bottom (with <code>alignment='horizontal'</code>) or left to right (with <code>alignment='vertical'</code>) according to the lowest x/y-coordinate of any element.<br>
Bar segments and value labels (if any) are automatically hidden (XML attribute 'diplay' is set to 'none'), when a value of 0 or NA is provided. Subsequent calls to the function with non-zero or non-NA values make such elements reappear in the output.
</p>


<h3>Value</h3>

<p>XML document with SVG content
</p>


<h3>Examples</h3>

<pre><code class="language-R">#read SVG file
fpath &lt;- system.file("extdata", "fig3.svg", package="svgtools")
svg &lt;- read_svg(file = fpath)

#adjust bars
svg &lt;- stackedBar(svg = svg, frame_name = "frame", group_name = "overall",
                  scale_real = c(0,160), values = c(9.97,42.42,105.71), 
                  alignment = "vertical", has_labels = TRUE, 
                  label_position = "end", decimals = 0, display_limits = 10)
df.subgroups &lt;- matrix(1:9*8, nrow=3)
svg &lt;- stackedBar(svg = svg, frame_name = "frame", group_name = "subgroups", 
                  scale_real = c(0,160), values = df.subgroups, 
                  alignment = "vertical", display_limits = 10)
</code></pre>


</div>