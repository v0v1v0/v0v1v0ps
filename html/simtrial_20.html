<div class="container">

<table style="width: 100%;"><tr>
<td>mb</td>
<td style="text-align: right;">R Documentation</td>
</tr></table>
<h2>Magirr and Burman weighting function</h2>

<h3>Description</h3>

<p>Magirr and Burman weighting function
</p>


<h3>Usage</h3>

<pre><code class="language-R">mb(delay = 4, w_max = Inf)
</code></pre>


<h3>Arguments</h3>

<table>
<tr style="vertical-align: top;">
<td><code>delay</code></td>
<td>
<p>The initial delay period where weights increase;
after this, weights are constant at the final weight in the delay period.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>w_max</code></td>
<td>
<p>Maximum weight to be returned.
Set <code>delay = Inf</code>, <code>w_max = 2</code> to be consistent with recommendation of
Magirr (2021).</p>
</td>
</tr>
</table>
<h3>Details</h3>

<p>Magirr and Burman (2019) proposed a weighted logrank test to have better
power than the logrank test when the treatment effect is delayed,
but to still maintain good power under a proportional hazards assumption.
In Magirr (2021), (the equivalent of) a maximum weight was proposed
as opposed to a fixed time duration over which weights would increase.
The weights for some early interval specified by the user are the inverse
of the combined treatment group empirical survival distribution; see details.
After this initial period, weights are constant at the maximum of the
previous weights. Another advantage of the test is that under strong
null hypothesis that the underlying survival in the control group is
greater than or equal to underlying survival in the experimental group,
Type I error is controlled as the specified level.
</p>
<p>We define <code class="reqn">t^*</code> to be the input variable <code>delay</code>.
This specifies an initial period during which weights increase.
We also set a maximum weight <code class="reqn">w_{\max}</code>.
To define specific weights, we let <code class="reqn">S(t)</code> denote the Kaplan-Meier
survival estimate at time <code class="reqn">t</code> for the combined data
(control plus experimental treatment groups).
The weight at time <code class="reqn">t</code> is then defined as
</p>
<p style="text-align: center;"><code class="reqn">w(t)=\min(w_{\max}, S(\min(t, t^*))^{-1}).</code>
</p>



<h3>Value</h3>

<p>A list of parameters of the Magirr and Burman weighting function
</p>


<h3>References</h3>

<p>Magirr, Dominic, and Carl‐Fredrik Burman. 2019.
"Modestly weighted logrank tests."
<em>Statistics in Medicine</em> 38 (20): 3782–3790.
</p>
<p>Magirr, Dominic. 2021.
"Non‐proportional hazards in immuno‐oncology: Is an old perspective needed?"
<em>Pharmaceutical Statistics</em> 20 (3): 512–527.
</p>


<h3>Examples</h3>

<pre><code class="language-R">sim_pw_surv(n = 200) |&gt;
  cut_data_by_event(100) |&gt;
  wlr(weight = mb(delay = 8, w_max = Inf))
</code></pre>


</div>