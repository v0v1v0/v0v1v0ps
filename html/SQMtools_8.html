<div class="container">

<table style="width: 100%;"><tr>
<td>loadSQMlite</td>
<td style="text-align: right;">R Documentation</td>
</tr></table>
<h2>Load tables generated by <code>sqm2tables.py</code>, <code>sqmreads2tables.py</code> or <code>combine-sqm-tables.py</code> into R.</h2>

<h3>Description</h3>

<p>This function takes the path to the output directory generated by <code>sqm2tables.py</code>, <code>sqmreads2tables.py</code> or <code>combine-sqm-tables.py</code> a SQMlite object.
The SQMlite object will contain taxonomic and functional profiles, but no detailed information on ORFs, contigs or bins. However, it will also have a much smaller memory footprint.
A SQMlite object can be used for plotting and exporting, but it can not be subsetted.
</p>


<h3>Usage</h3>

<pre><code class="language-R">loadSQMlite(tables_path, tax_mode = "allfilter")
</code></pre>


<h3>Arguments</h3>

<table>
<tr style="vertical-align: top;">
<td><code>tables_path</code></td>
<td>
<p>character, tables directory generated by <code>sqm2table.py</code>, <code>sqmreads2tables.py</code> or <code>combine-sqm-tables.py</code>.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>tax_mode</code></td>
<td>
<p>character, which taxonomic classification should be loaded? SqueezeMeta applies the identity thresholds described in <a href="https://www.ncbi.nlm.nih.gov/pmc/articles/PMC4005636/">Luo <em>et al.</em>, 2014</a>. Use <code>allfilter</code> for applying the minimum identity threshold to all taxa (default), <code>prokfilter</code> for applying the threshold to Bacteria and Archaea, but not to Eukaryotes, and <code>nofilter</code> for applying no thresholds at all.</p>
</td>
</tr>
</table>
<h3>Value</h3>

<p>SQMlite object containing the parsed tables.
</p>


<h3>The SQMlite object structure</h3>


<p>The SQMlite object is a nested list which contains the following information:
</p>

<table>
<tr>
<td style="text-align: left;">
<b>lvl1</b>         </td>
<td style="text-align: left;"> <b>lvl2</b>               </td>
<td style="text-align: left;"> <b>lvl3</b>          </td>
<td style="text-align: left;"> <b>type</b>             </td>
<td style="text-align: left;"> <b>rows/names</b> </td>
<td style="text-align: left;"> <b>columns</b> </td>
<td style="text-align: left;"> <b>data</b>        </td>
</tr>
<tr>
<td style="text-align: left;">
<b>$taxa</b>        </td>
<td style="text-align: left;"> <b>$superkingdom</b>      </td>
<td style="text-align: left;"> <b>$abund</b>        </td>
<td style="text-align: left;"> <em>numeric matrix</em>   </td>
<td style="text-align: left;"> superkingdoms     </td>
<td style="text-align: left;"> samples        </td>
<td style="text-align: left;"> abundances         </td>
</tr>
<tr>
<td style="text-align: left;">
                    </td>
<td style="text-align: left;">                           </td>
<td style="text-align: left;"> <b>$percent</b>      </td>
<td style="text-align: left;"> <em>numeric matrix</em>   </td>
<td style="text-align: left;"> superkingdoms     </td>
<td style="text-align: left;"> samples        </td>
<td style="text-align: left;"> percentages        </td>
</tr>
<tr>
<td style="text-align: left;">
                    </td>
<td style="text-align: left;"> <b>$phylum</b>            </td>
<td style="text-align: left;"> <b>$abund</b>        </td>
<td style="text-align: left;"> <em>numeric matrix</em>   </td>
<td style="text-align: left;"> phyla             </td>
<td style="text-align: left;"> samples        </td>
<td style="text-align: left;"> abundances         </td>
</tr>
<tr>
<td style="text-align: left;">
                    </td>
<td style="text-align: left;">                           </td>
<td style="text-align: left;"> <b>$percent</b>      </td>
<td style="text-align: left;"> <em>numeric matrix</em>   </td>
<td style="text-align: left;"> phyla             </td>
<td style="text-align: left;"> samples        </td>
<td style="text-align: left;"> percentages        </td>
</tr>
<tr>
<td style="text-align: left;">
                    </td>
<td style="text-align: left;"> <b>$class</b>             </td>
<td style="text-align: left;"> <b>$abund</b>        </td>
<td style="text-align: left;"> <em>numeric matrix</em>   </td>
<td style="text-align: left;"> classes           </td>
<td style="text-align: left;"> samples        </td>
<td style="text-align: left;"> abundances         </td>
</tr>
<tr>
<td style="text-align: left;">
                    </td>
<td style="text-align: left;">                           </td>
<td style="text-align: left;"> <b>$percent</b>      </td>
<td style="text-align: left;"> <em>numeric matrix</em>   </td>
<td style="text-align: left;"> classes           </td>
<td style="text-align: left;"> samples        </td>
<td style="text-align: left;"> percentages        </td>
</tr>
<tr>
<td style="text-align: left;">
                    </td>
<td style="text-align: left;"> <b>$order</b>             </td>
<td style="text-align: left;"> <b>$abund</b>        </td>
<td style="text-align: left;"> <em>numeric matrix</em>   </td>
<td style="text-align: left;"> orders            </td>
<td style="text-align: left;"> samples        </td>
<td style="text-align: left;"> abundances         </td>
</tr>
<tr>
<td style="text-align: left;">
                    </td>
<td style="text-align: left;">                           </td>
<td style="text-align: left;"> <b>$percent</b>      </td>
<td style="text-align: left;"> <em>numeric matrix</em>   </td>
<td style="text-align: left;"> orders            </td>
<td style="text-align: left;"> samples        </td>
<td style="text-align: left;"> percentages        </td>
</tr>
<tr>
<td style="text-align: left;">
                    </td>
<td style="text-align: left;"> <b>$family</b>            </td>
<td style="text-align: left;"> <b>$abund</b>        </td>
<td style="text-align: left;"> <em>numeric matrix</em>   </td>
<td style="text-align: left;"> families          </td>
<td style="text-align: left;"> samples        </td>
<td style="text-align: left;"> abundances         </td>
</tr>
<tr>
<td style="text-align: left;">
                    </td>
<td style="text-align: left;">                           </td>
<td style="text-align: left;"> <b>$percent</b>      </td>
<td style="text-align: left;"> <em>numeric matrix</em>   </td>
<td style="text-align: left;"> families          </td>
<td style="text-align: left;"> samples        </td>
<td style="text-align: left;"> percentages        </td>
</tr>
<tr>
<td style="text-align: left;">
                    </td>
<td style="text-align: left;"> <b>$genus</b>             </td>
<td style="text-align: left;"> <b>$abund</b>        </td>
<td style="text-align: left;"> <em>numeric matrix</em>   </td>
<td style="text-align: left;"> genera            </td>
<td style="text-align: left;"> samples        </td>
<td style="text-align: left;"> abundances         </td>
</tr>
<tr>
<td style="text-align: left;">
                    </td>
<td style="text-align: left;">                           </td>
<td style="text-align: left;"> <b>$percent</b>      </td>
<td style="text-align: left;"> <em>numeric matrix</em>   </td>
<td style="text-align: left;"> genera            </td>
<td style="text-align: left;"> samples        </td>
<td style="text-align: left;"> percentages        </td>
</tr>
<tr>
<td style="text-align: left;">
                    </td>
<td style="text-align: left;"> <b>$species</b>           </td>
<td style="text-align: left;"> <b>$abund</b>        </td>
<td style="text-align: left;"> <em>numeric matrix</em>   </td>
<td style="text-align: left;"> species           </td>
<td style="text-align: left;"> samples        </td>
<td style="text-align: left;"> abundances         </td>
</tr>
<tr>
<td style="text-align: left;">
                    </td>
<td style="text-align: left;">                           </td>
<td style="text-align: left;"> <b>$percent</b>      </td>
<td style="text-align: left;"> <em>numeric matrix</em>   </td>
<td style="text-align: left;"> species           </td>
<td style="text-align: left;"> samples        </td>
<td style="text-align: left;"> percentages        </td>
</tr>
<tr>
<td style="text-align: left;">
<b>$functions</b>   </td>
<td style="text-align: left;"> <b>$KEGG</b>              </td>
<td style="text-align: left;"> <b>$abund</b>        </td>
<td style="text-align: left;"> <em>numeric matrix</em>   </td>
<td style="text-align: left;"> KEGG ids          </td>
<td style="text-align: left;"> samples        </td>
<td style="text-align: left;"> abundances (reads) </td>
</tr>
<tr>
<td style="text-align: left;">
                    </td>
<td style="text-align: left;">                           </td>
<td style="text-align: left;"> <b>$bases</b>        </td>
<td style="text-align: left;"> <em>numeric matrix</em>   </td>
<td style="text-align: left;"> KEGG ids          </td>
<td style="text-align: left;"> samples        </td>
<td style="text-align: left;"> abundances (bases) </td>
</tr>
<tr>
<td style="text-align: left;">
                    </td>
<td style="text-align: left;">                           </td>
<td style="text-align: left;"> <b>$tpm</b>          </td>
<td style="text-align: left;"> <em>numeric matrix</em>   </td>
<td style="text-align: left;"> KEGG ids          </td>
<td style="text-align: left;"> samples        </td>
<td style="text-align: left;"> tpm                </td>
</tr>
<tr>
<td style="text-align: left;">
                    </td>
<td style="text-align: left;">                           </td>
<td style="text-align: left;"> <b>$copy_number</b>  </td>
<td style="text-align: left;"> <em>numeric matrix</em>   </td>
<td style="text-align: left;"> KEGG ids          </td>
<td style="text-align: left;"> samples        </td>
<td style="text-align: left;"> avg. copies        </td>
</tr>
<tr>
<td style="text-align: left;">
                    </td>
<td style="text-align: left;"> <b>$COG</b>               </td>
<td style="text-align: left;"> <b>$abund</b>        </td>
<td style="text-align: left;"> <em>numeric matrix</em>   </td>
<td style="text-align: left;"> COG ids           </td>
<td style="text-align: left;"> samples        </td>
<td style="text-align: left;"> abundances (reads) </td>
</tr>
<tr>
<td style="text-align: left;">
                    </td>
<td style="text-align: left;">                           </td>
<td style="text-align: left;"> <b>$bases</b>        </td>
<td style="text-align: left;"> <em>numeric matrix</em>   </td>
<td style="text-align: left;"> COG ids           </td>
<td style="text-align: left;"> samples        </td>
<td style="text-align: left;"> abundances (bases) </td>
</tr>
<tr>
<td style="text-align: left;">
                    </td>
<td style="text-align: left;">                           </td>
<td style="text-align: left;"> <b>$tpm</b>          </td>
<td style="text-align: left;"> <em>numeric matrix</em>   </td>
<td style="text-align: left;"> COG ids           </td>
<td style="text-align: left;"> samples        </td>
<td style="text-align: left;"> tpm                </td>
</tr>
<tr>
<td style="text-align: left;">
                    </td>
<td style="text-align: left;">                           </td>
<td style="text-align: left;"> <b>$copy_number</b>  </td>
<td style="text-align: left;"> <em>numeric matrix</em>   </td>
<td style="text-align: left;"> COG ids           </td>
<td style="text-align: left;"> samples        </td>
<td style="text-align: left;"> avg. copies        </td>
</tr>
<tr>
<td style="text-align: left;">
                    </td>
<td style="text-align: left;"> <b>$PFAM</b>              </td>
<td style="text-align: left;"> <b>$abund</b>        </td>
<td style="text-align: left;"> <em>numeric matrix</em>   </td>
<td style="text-align: left;"> PFAM ids          </td>
<td style="text-align: left;"> samples        </td>
<td style="text-align: left;"> abundances (reads) </td>
</tr>
<tr>
<td style="text-align: left;">
                    </td>
<td style="text-align: left;">                           </td>
<td style="text-align: left;"> <b>$bases</b>        </td>
<td style="text-align: left;"> <em>numeric matrix</em>   </td>
<td style="text-align: left;"> PFAM ids          </td>
<td style="text-align: left;"> samples        </td>
<td style="text-align: left;"> abundances (bases) </td>
</tr>
<tr>
<td style="text-align: left;">
                    </td>
<td style="text-align: left;">                           </td>
<td style="text-align: left;"> <b>$tpm</b>          </td>
<td style="text-align: left;"> <em>numeric matrix</em>   </td>
<td style="text-align: left;"> PFAM ids          </td>
<td style="text-align: left;"> samples        </td>
<td style="text-align: left;"> tpm                </td>
</tr>
<tr>
<td style="text-align: left;">
                    </td>
<td style="text-align: left;">                           </td>
<td style="text-align: left;"> <b>$copy_number</b>  </td>
<td style="text-align: left;"> <em>numeric matrix</em>   </td>
<td style="text-align: left;"> PFAM ids          </td>
<td style="text-align: left;"> samples        </td>
<td style="text-align: left;"> avg. copies        </td>
</tr>
<tr>
<td style="text-align: left;">
<b>$total_reads</b> </td>
<td style="text-align: left;">                           </td>
<td style="text-align: left;">                      </td>
<td style="text-align: left;"> <em>numeric vector</em>   </td>
<td style="text-align: left;"> samples           </td>
<td style="text-align: left;"> (n/a)          </td>
<td style="text-align: left;"> total reads        </td>
</tr>
<tr>
<td style="text-align: left;">
<b>$misc</b>        </td>
<td style="text-align: left;"> <b>$project_name</b>      </td>
<td style="text-align: left;">                      </td>
<td style="text-align: left;"> <em>character vector</em> </td>
<td style="text-align: left;"> (empty)           </td>
<td style="text-align: left;"> (n/a)          </td>
<td style="text-align: left;"> project name       </td>
</tr>
<tr>
<td style="text-align: left;">
                    </td>
<td style="text-align: left;"> <b>$samples</b>           </td>
<td style="text-align: left;">                      </td>
<td style="text-align: left;"> <em>character vector</em> </td>
<td style="text-align: left;"> (empty)           </td>
<td style="text-align: left;"> (n/a)          </td>
<td style="text-align: left;"> samples            </td>
</tr>
<tr>
<td style="text-align: left;">
                    </td>
<td style="text-align: left;"> <b>$tax_names_long</b>    </td>
<td style="text-align: left;"> <b>$superkingdom</b> </td>
<td style="text-align: left;"> <em>character vector</em> </td>
<td style="text-align: left;"> short names       </td>
<td style="text-align: left;"> (n/a)          </td>
<td style="text-align: left;"> full names         </td>
</tr>
<tr>
<td style="text-align: left;">
                    </td>
<td style="text-align: left;">                           </td>
<td style="text-align: left;"> <b>$phylum</b>       </td>
<td style="text-align: left;"> <em>character vector</em> </td>
<td style="text-align: left;"> short names       </td>
<td style="text-align: left;"> (n/a)          </td>
<td style="text-align: left;"> full names         </td>
</tr>
<tr>
<td style="text-align: left;">
                    </td>
<td style="text-align: left;">                           </td>
<td style="text-align: left;"> <b>$class</b>        </td>
<td style="text-align: left;"> <em>character vector</em> </td>
<td style="text-align: left;"> short names       </td>
<td style="text-align: left;"> (n/a)          </td>
<td style="text-align: left;"> full names         </td>
</tr>
<tr>
<td style="text-align: left;">
                    </td>
<td style="text-align: left;">                           </td>
<td style="text-align: left;"> <b>$order</b>        </td>
<td style="text-align: left;"> <em>character vector</em> </td>
<td style="text-align: left;"> short names       </td>
<td style="text-align: left;"> (n/a)          </td>
<td style="text-align: left;"> full names         </td>
</tr>
<tr>
<td style="text-align: left;">
                    </td>
<td style="text-align: left;">                           </td>
<td style="text-align: left;"> <b>$family</b>       </td>
<td style="text-align: left;"> <em>character vector</em> </td>
<td style="text-align: left;"> short names       </td>
<td style="text-align: left;"> (n/a)          </td>
<td style="text-align: left;"> full names         </td>
</tr>
<tr>
<td style="text-align: left;">
                    </td>
<td style="text-align: left;">                           </td>
<td style="text-align: left;"> <b>$genus</b>        </td>
<td style="text-align: left;"> <em>character vector</em> </td>
<td style="text-align: left;"> short names       </td>
<td style="text-align: left;"> (n/a)          </td>
<td style="text-align: left;"> full names         </td>
</tr>
<tr>
<td style="text-align: left;">
                    </td>
<td style="text-align: left;">                           </td>
<td style="text-align: left;"> <b>$species</b>      </td>
<td style="text-align: left;"> <em>character vector</em> </td>
<td style="text-align: left;"> short names       </td>
<td style="text-align: left;"> (n/a)          </td>
<td style="text-align: left;"> full names         </td>
</tr>
<tr>
<td style="text-align: left;">
                    </td>
<td style="text-align: left;"> <b>$tax_names_short</b>   </td>
<td style="text-align: left;">                      </td>
<td style="text-align: left;"> <em>character vector</em> </td>
<td style="text-align: left;"> full names        </td>
<td style="text-align: left;"> (n/a)          </td>
<td style="text-align: left;"> short names        </td>
</tr>
<tr>
<td style="text-align: left;">
                    </td>
<td style="text-align: left;"> <b>$KEGG_names</b>        </td>
<td style="text-align: left;">                      </td>
<td style="text-align: left;"> <em>character vector</em> </td>
<td style="text-align: left;"> KEGG ids          </td>
<td style="text-align: left;"> (n/a)          </td>
<td style="text-align: left;"> KEGG names         </td>
</tr>
<tr>
<td style="text-align: left;">
                    </td>
<td style="text-align: left;"> <b>$KEGG_paths</b>        </td>
<td style="text-align: left;">                      </td>
<td style="text-align: left;"> <em>character vector</em> </td>
<td style="text-align: left;"> KEGG ids          </td>
<td style="text-align: left;"> (n/a)          </td>
<td style="text-align: left;"> KEGG hiararchy     </td>
</tr>
<tr>
<td style="text-align: left;">
                    </td>
<td style="text-align: left;"> <b>$COG_names</b>         </td>
<td style="text-align: left;">                      </td>
<td style="text-align: left;"> <em>character vector</em> </td>
<td style="text-align: left;"> COG ids           </td>
<td style="text-align: left;"> (n/a)          </td>
<td style="text-align: left;"> COG names          </td>
</tr>
<tr>
<td style="text-align: left;">
                    </td>
<td style="text-align: left;"> <b>$COG_paths</b>         </td>
<td style="text-align: left;">                      </td>
<td style="text-align: left;"> <em>character vector</em> </td>
<td style="text-align: left;"> COG ids           </td>
<td style="text-align: left;"> (n/a)          </td>
<td style="text-align: left;"> COG hierarchy      </td>
</tr>
<tr>
<td style="text-align: left;">
                    </td>
<td style="text-align: left;"> <b>$ext_annot_sources</b> </td>
<td style="text-align: left;">                      </td>
<td style="text-align: left;"> <em>character vector</em> </td>
<td style="text-align: left;"> (empty)           </td>
<td style="text-align: left;"> (n/a)          </td>
<td style="text-align: left;"> external databases </td>
</tr>
<tr>
<td style="text-align: left;">
</td>
</tr>
</table>
<p>If external databases for functional classification were provided to SqueezeMeta or SqueezeMeta_reads via the <code>-extdb</code> argument, the corresponding abundance, tpm and copy number profiles will be present in <code>SQM$functions</code> (e.g. results for the CAZy database would be present in <code>SQM$functions$CAZy</code>). Additionally, the extended names of the features present in the external database will be present in <code>SQM$misc</code> (e.g. <code>SQM$misc$CAZy_names</code>). Note that results generated by SqueezeMeta_reads will contain only read abundances, but not bases, tpm or copy number estimations.

</p>


<h3>See Also</h3>

<p><code>plotBars</code> and <code>plotFunctions</code> will plot the most abundant taxa and functions in a SQMlite object. <code>exportKrona</code> will generate Krona charts reporting the taxonomy in a SQMlite object.
</p>


<h3>Examples</h3>

<pre><code class="language-R">## Not run: 
## (outside R)
## Run SqueezeMeta on the test data.
/path/to/SqueezeMeta/scripts/SqueezeMeta.pl -p Hadza -f raw -m coassembly -s test.samples
## Generate the tabular outputs!
/path/to/SqueezeMeta/utils/sqm2tables.py Hadza Hadza/results/tables
## Now go into R.
library(SQMtools)
Hadza = loadSQMlite("Hadza/results/tables")
# Where Hadza is the path to the SqueezeMeta output directory.
# Note that this is not the whole SQM project, just the directory containing the tables.
# It would also work with tables generated by sqmreads2tables.py, or combine-sqm-tables.py
plotTaxonomy(Hadza)
plotFunctions(Hadza)
exportKrona(Hadza, 'myKronaTest.html')

## End(Not run)
</code></pre>


</div>