<div class="container">

<table style="width: 100%;"><tr>
<td>harcode</td>
<td style="text-align: right;">R Documentation</td>
</tr></table>
<h2>Derive an SDTM variable with a hardcoded value</h2>

<h3>Description</h3>


<ul>
<li> <p><code>hardcode_no_ct()</code> maps a hardcoded value to a target SDTM variable that has
no terminology restrictions.
</p>
</li>
<li> <p><code>hardcode_ct()</code> maps a hardcoded value to a target SDTM variable with
controlled terminology recoding.
</p>
</li>
</ul>
<h3>Usage</h3>

<pre><code class="language-R">hardcode_no_ct(
  tgt_dat = NULL,
  tgt_val,
  raw_dat,
  raw_var,
  tgt_var,
  id_vars = oak_id_vars()
)

hardcode_ct(
  tgt_dat = NULL,
  tgt_val,
  raw_dat,
  raw_var,
  tgt_var,
  ct_spec,
  ct_clst,
  id_vars = oak_id_vars()
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr style="vertical-align: top;">
<td><code>tgt_dat</code></td>
<td>
<p>Target dataset: a data frame to be merged against <code>raw_dat</code> by
the variables indicated in <code>id_vars</code>. This parameter is optional, see
section Value for how the output changes depending on this argument value.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>tgt_val</code></td>
<td>
<p>The target SDTM value to be hardcoded into the variable
indicated in <code>tgt_var</code>.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>raw_dat</code></td>
<td>
<p>The raw dataset (dataframe); must include the
variables passed in <code>id_vars</code> and <code>raw_var</code>.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>raw_var</code></td>
<td>
<p>The raw variable: a single string indicating the name of the
raw variable in <code>raw_dat</code>.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>tgt_var</code></td>
<td>
<p>The target SDTM variable: a single string indicating the name
of variable to be derived.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>id_vars</code></td>
<td>
<p>Key variables to be used in the join between the raw dataset
(<code>raw_dat</code>) and the target data set (<code>raw_dat</code>).</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>ct_spec</code></td>
<td>
<p>Study controlled terminology specification: a dataframe with a
minimal set of columns, see <code>ct_spec_vars()</code> for details. This parameter is
optional, if left as <code>NULL</code> no controlled terminology recoding is applied.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>ct_clst</code></td>
<td>
<p>A codelist code indicating which subset of the controlled
terminology to apply in the derivation. This parameter is optional, if left
as <code>NULL</code>, all possible recodings in <code>ct_spec</code> are attempted.</p>
</td>
</tr>
</table>
<h3>Value</h3>

<p>The returned data set depends on the value of <code>tgt_dat</code>:
</p>

<ul>
<li>
<p> If no target dataset is supplied, meaning that <code>tgt_dat</code> defaults to
<code>NULL</code>, then the returned data set is <code>raw_dat</code>, selected for the variables
indicated in <code>id_vars</code>, and a new extra column: the derived variable, as
indicated in <code>tgt_var</code>.
</p>
</li>
<li>
<p> If the target dataset is provided, then it is merged with the raw data set
<code>raw_dat</code> by the variables indicated in <code>id_vars</code>, with a new column: the
derived variable, as indicated in <code>tgt_var</code>.
</p>
</li>
</ul>
<h3>Examples</h3>

<pre><code class="language-R">md1 &lt;-
  tibble::tribble(
    ~oak_id, ~raw_source, ~patient_number, ~MDRAW,
    1L,      "MD1",       101L,            "BABY ASPIRIN",
    2L,      "MD1",       102L,            "CORTISPORIN",
    3L,      "MD1",       103L,            NA_character_,
    4L,      "MD1",       104L,            "DIPHENHYDRAMINE HCL"
  )

# Derive a new variable `CMCAT` by overwriting `MDRAW` with the
# hardcoded value "GENERAL CONCOMITANT MEDICATIONS".
hardcode_no_ct(
  tgt_val = "GENERAL CONCOMITANT MEDICATIONS",
  raw_dat = md1,
  raw_var = "MDRAW",
  tgt_var = "CMCAT"
)

cm_inter &lt;-
  tibble::tribble(
    ~oak_id, ~raw_source, ~patient_number, ~CMTRT,                ~CMINDC,
    1L,      "MD1",       101L,            "BABY ASPIRIN",        NA,
    2L,      "MD1",       102L,            "CORTISPORIN",         "NAUSEA",
    3L,      "MD1",       103L,            "ASPIRIN",             "ANEMIA",
    4L,      "MD1",       104L,            "DIPHENHYDRAMINE HCL", "NAUSEA",
    5L,      "MD1",       105L,            "PARACETAMOL",         "PYREXIA"
  )

# Derive a new variable `CMCAT` by overwriting `MDRAW` with the
# hardcoded value "GENERAL CONCOMITANT MEDICATIONS" with a prior join to
# `target_dataset`.
hardcode_no_ct(
  tgt_dat = cm_inter,
  tgt_val = "GENERAL CONCOMITANT MEDICATIONS",
  raw_dat = md1,
  raw_var = "MDRAW",
  tgt_var = "CMCAT"
)

# Controlled terminology specification
(ct_spec &lt;- read_ct_spec_example("ct-01-cm"))

# Hardcoding of `CMCAT` with the value `"GENERAL CONCOMITANT MEDICATIONS"`
# involving terminology recoding. `NA` values in `MDRAW` are preserved in
# `CMCAT`.
hardcode_ct(
  tgt_dat = cm_inter,
  tgt_var = "CMCAT",
  raw_dat = md1,
  raw_var = "MDRAW",
  tgt_val = "GENERAL CONCOMITANT MEDICATIONS",
  ct_spec = ct_spec,
  ct_clst = "C66729"
)

</code></pre>


</div>