<div class="container">

<table style="width: 100%;"><tr>
<td>derive_seq</td>
<td style="text-align: right;">R Documentation</td>
</tr></table>
<h2>Derive the sequence number (<code>--SEQ</code>) variable</h2>

<h3>Description</h3>

<p><code>derive_seq()</code> creates a new identifier variable: the sequence number
(<code>--SEQ</code>).
</p>
<p>This function adds a newly derived variable to <code>tgt_dat</code>, namely the sequence
number (<code>--SEQ</code>) whose name is the one provided in <code>tgt_var</code>. An integer
sequence is generated that uniquely identifies each record within the domain.
</p>
<p>Prior to the derivation of <code>tgt_var</code>, the data frame <code>tgt_dat</code> is sorted
according to grouping variables indicated in <code>rec_vars</code>.
</p>


<h3>Usage</h3>

<pre><code class="language-R">derive_seq(
  tgt_dat,
  tgt_var,
  rec_vars,
  sbj_vars = sdtm.oak::sbj_vars(),
  start_at = 1L
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr style="vertical-align: top;">
<td><code>tgt_dat</code></td>
<td>
<p>The target dataset, a data frame.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>tgt_var</code></td>
<td>
<p>The target SDTM variable: a single string indicating the name
of the sequence number (<code>--SEQ</code>) variable, e.g. <code>"DSSEQ"</code>. Note that
supplying a name not ending in <code>"SEQ"</code> will raise a warning.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>rec_vars</code></td>
<td>
<p>A character vector of record-level identifier variables.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>sbj_vars</code></td>
<td>
<p>A character vector of subject-level identifier variables.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>start_at</code></td>
<td>
<p>The sequence numbering starts at this value (default is <code>1</code>).</p>
</td>
</tr>
</table>
<h3>Value</h3>

<p>Returns the data frame supplied in <code>tgt_dat</code> with the newly derived
variable, i.e. the sequence number (<code>--SEQ</code>), whose name is that passed in
<code>tgt_var</code>. This variable is of type integer.
</p>


<h3>Examples</h3>

<pre><code class="language-R"># A VS raw data set example
(vs &lt;- read_domain_example("vs"))

# Derivation of VSSEQ
rec_vars &lt;- c("STUDYID", "USUBJID", "VSTESTCD", "VSDTC", "VSTPTNUM")
derive_seq(tgt_dat = vs, tgt_var = "VSSEQ", rec_vars = rec_vars)

# An APSC raw data set example
(apsc &lt;- read_domain_example("apsc"))

# Derivation of APSEQ
derive_seq(
  tgt_dat = apsc,
  tgt_var = "APSEQ",
  rec_vars = c("STUDYID", "RSUBJID", "SCTESTCD"),
  sbj_vars = c("STUDYID", "RSUBJID")
)
</code></pre>


</div>