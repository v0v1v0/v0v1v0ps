<div class="container">

<table style="width: 100%;"><tr>
<td>airdas_chop_condition</td>
<td style="text-align: right;">R Documentation</td>
</tr></table>
<h2>Chop AirDAS data - condition</h2>

<h3>Description</h3>

<p>Chop AirDAS data into a new effort segment every time a condition changes
</p>


<h3>Usage</h3>

<pre><code class="language-R">airdas_chop_condition(x, ...)

## S3 method for class 'data.frame'
airdas_chop_condition(x, ...)

## S3 method for class 'airdas_df'
airdas_chop_condition(
  x,
  conditions,
  seg.min.km = 0.1,
  distance.method = NULL,
  num.cores = NULL,
  ...
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr style="vertical-align: top;">
<td><code>x</code></td>
<td>
<p><code>airdas_df</code> object, 
or a data frame that can be coerced to a <code>airdas_df</code> object. 
This data must be filtered for 'OnEffort' events; 
see the Details section below</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>...</code></td>
<td>
<p>ignored</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>conditions</code></td>
<td>
<p>the conditions that trigger a new segment; 
see <code>airdas_effort</code></p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>seg.min.km</code></td>
<td>
<p>numeric; minimum allowable segment length (in kilometers).
Default is 0.1. See the Details section below for more information</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>distance.method</code></td>
<td>
<p>character; see <code>airdas_effort</code>.
Default is <code>NULL</code> since these distances should have already been
calculated in <code>airdas_effort</code></p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>num.cores</code></td>
<td>
<p>See <code>airdas_effort</code></p>
</td>
</tr>
</table>
<h3>Details</h3>

<p>WARNING - do not call this function directly!
It is exported for documentation purposes, but is intended for internal package use only.
</p>
<p>This function is intended to only be called by <code>airdas_effort</code> 
when the "condition" method is specified. 
Thus, <code>x</code> must be filtered for events (rows) where either
the 'OnEffort' column is <code>TRUE</code> or the 'Event' column is either "E" or "O"; 
see <code>airdas_effort</code> for more details. 
This function chops each continuous effort section (henceforth 'effort sections') 
in <code>x</code> into modeling segments (henceforth 'segments') by 
creating a new segment every time a condition changes. 
Each effort section runs from a T/R event to its corresponding E/O event. 
After chopping, <code>airdas_segdata</code> is called 
(with <code>segdata.method = "maxdist"</code>)
to get relevant segdata information for each segment.
</p>
<p>Changes in the one of the conditions specified in the <code>conditions</code>
argument triggers a new segment.
An exception is when multiple condition changes happen at
the same location, such as a 'TVPAW' series of events.
When this happens, no segments of length zero are created;
rather, a single segment is created that includes all of the condition changes
(i.e. all of the events in the event series) that happened during
the series of events (i.e. at the same location).
Note that this combining of events at the same Lat/Lon happens
even if <code>seg.min.km = 0</code>.
</p>
<p>In addition, (almost) all segments whose length is less than <code>seg.min.km</code>
are combined with the segment immediately following them to ensure that the length
of (almost) all segments is at least <code>seg.min.km</code>.
This allows users to account for situations where multiple conditions,
such as Beaufort and a viewing condition, change in rapid succession, say &lt;0.1 km apart.
When segments are combined, a message is printed, and the condition that was
recorded for the maximum distance within the new segment is reported.
See <code>airdas_segdata</code>, <code>segdata.method = "maxdist"</code>, for more details
about how the segdata information is determined.
The only exception to this rule is if the short segment ends in an "E" or an "O" event,
meaning it is the last segment of the effort section.
Since in this case there is no 'next' segment,
this short segment is left as-is.
</p>
<p>If the column <code>dist_from_prev</code> does not exist, the distance between
subsequent events is calculated as described in <code>airdas_effort</code>
</p>


<h3>Value</h3>

<p>List of two data frames:
</p>

<ul>
<li> <p><code>x</code>, with columns added for the corresponding unique segment code and number
</p>
</li>
<li>
<p> segdata: data frame with one row for each segment, and columns with
relevant data (see <code>airdas_effort</code> for specifics)
</p>
</li>
</ul>
</div>