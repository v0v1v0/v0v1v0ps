<div class="container">

<table style="width: 100%;"><tr>
<td>caralloc</td>
<td style="text-align: right;">R Documentation</td>
</tr></table>
<h2>
Sequential Allocation Using Covariate Adaptive Randomization
</h2>

<h3>Description</h3>

<p>Performs the sequential allocation for the covariate-adjusted randomization (CAR) method of allocating observations in a randomized experiment. 
</p>


<h3>Usage</h3>

<pre><code class="language-R">caralloc(xmat, carwt, p, tol)
</code></pre>


<h3>Arguments</h3>

<table>
<tr style="vertical-align: top;">
<td><code>xmat</code></td>
<td>

<p>matrix or data frame of covariates for prospective enrollees in the experiment.
</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>carwt</code></td>
<td>

<p>vector of weights
</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>p</code></td>
<td>

<p>probability the next unit should be allocated to the experiment arm that currently has fewer observations. For CAR, use 0.5 &lt; p &lt; 1.
</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>tol</code></td>
<td>

<p>tolerance for deviation from equal allocation. For CAR, set tol to be a small value, say 0.01. For CAIM, set tol to be the imbalance tolerance (d).
</p>
</td>
</tr>
</table>
<h3>Value</h3>

<p>Vector with the allocation to treatment (denoted by 1) and control (denoted by 0)
</p>


<h3>Author(s)</h3>

<p>Xiaoshu Zhu <a href="mailto:xiaoshuzhu@westat.com">xiaoshuzhu@westat.com</a> and Sharon Lohr
</p>


<h3>References</h3>

<p>Lohr, S. and X. Zhu (2015). Randomized Sequential Individual Assignment in Social Experiments: Evaluating the Design Options Prospectively. Sociological Methods and Research. [Advance online publication: December 27, 2015] doi: 10.1177/0049124115621332.
</p>
<p>Pocock, S. J. and R. Simon (1975). Sequential Treatment Assignment with Balancing for Prognostic Factors in A Controlled Clinical Trial. Biometrics 31: 103-115.
</p>


<h3>Examples</h3>

<pre><code class="language-R">sampsize &lt;- 200
percent &lt;- c(0.5,0.8,0.2,0.4)
carwt &lt;- c(.4,.3,.2,.1)

set.seed(5798)

xmat &lt;- matrix(rbinom(sampsize*length(percent),1,rep(percent,sampsize)),
              nrow=sampsize,ncol=length(percent),byrow=TRUE)
colnames(xmat) = c("C1","C2","C3","C4")
strat_factor = xmat[,1]*4 + xmat[,2]*2 + xmat[,4] + 1

caralloc(xmat,carwt,1,3)
</code></pre>


</div>