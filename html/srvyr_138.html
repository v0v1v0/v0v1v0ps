<div class="container">

<table style="width: 100%;"><tr>
<td>survey_ratio</td>
<td style="text-align: right;">R Documentation</td>
</tr></table>
<h2>Calculate the ratio and its variation using survey methods</h2>

<h3>Description</h3>

<p>Calculate ratios from complex survey data. A wrapper
around <code>svyratio</code>. <code>survey_ratio</code>
should always be called from <code>summarise</code>.
</p>


<h3>Usage</h3>

<pre><code class="language-R">survey_ratio(
  numerator,
  denominator,
  na.rm = FALSE,
  vartype = c("se", "ci", "var", "cv"),
  level = 0.95,
  deff = FALSE,
  df = NULL,
  ...
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr style="vertical-align: top;">
<td><code>numerator</code></td>
<td>
<p>The numerator of the ratio</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>denominator</code></td>
<td>
<p>The denominator of the ratio</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>na.rm</code></td>
<td>
<p>A logical value to indicate whether missing values should be dropped</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>vartype</code></td>
<td>
<p>Report variability as one or more of: standard error ("se", default),
confidence interval ("ci"), variance ("var") or coefficient of variation
("cv").</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>level</code></td>
<td>
<p>A single number or vector of numbers indicating the confidence level</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>deff</code></td>
<td>
<p>A logical value to indicate whether the design effect should be returned.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>df</code></td>
<td>
<p>(For vartype = "ci" only) A numeric value indicating the degrees of freedom
for t-distribution. The default (NULL) uses <code>degf</code>,
but Inf is the usual survey package's default (except in
<code>svyciprop</code>.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>...</code></td>
<td>
<p>Ignored</p>
</td>
</tr>
</table>
<h3>Examples</h3>

<pre><code class="language-R">library(survey)
data(api)

dstrata &lt;- apistrat %&gt;%
  as_survey_design(strata = stype, weights = pw)

dstrata %&gt;%
  summarise(enroll = survey_ratio(api00, api99, vartype = c("ci", "cv")))

dstrata %&gt;%
  group_by(awards) %&gt;%
  summarise(api00 = survey_ratio(api00, api99))

# level takes a vector for multiple levels of confidence intervals
dstrata %&gt;%
  summarise(enroll = survey_ratio(api99, api00, vartype = "ci", level = c(0.95, 0.65)))

# Note that the default degrees of freedom in srvyr is different from
# survey, so your confidence intervals might not exactly match. To
# replicate survey's behavior, use df = Inf
dstrata %&gt;%
  summarise(srvyr_default = survey_total(api99, vartype = "ci"),
            survey_defualt = survey_total(api99, vartype = "ci", df = Inf))

comparison &lt;- survey::svytotal(~api99, dstrata)
confint(comparison) # survey's default
confint(comparison, df = survey::degf(dstrata)) # srvyr's default

</code></pre>


</div>