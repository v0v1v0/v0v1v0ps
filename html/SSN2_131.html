<div class="container">

<table style="width: 100%;"><tr>
<td>ssn_split_predpts</td>
<td style="text-align: right;">R Documentation</td>
</tr></table>
<h2>Split a prediction dataset in an <code>SSN</code> object</h2>

<h3>Description</h3>

<p>The <code>splitPrediction</code> function is used to
split prediction sets in an <code>SSN</code> object into smaller
prediction sets. It returns a <code>SSN</code> object with additional
prediction sets based on equal interval splits, a factor,
integer, character or logical column stored within the prediction
set, or a logical expression.
</p>


<h3>Usage</h3>

<pre><code class="language-R">ssn_split_predpts(
  ssn,
  predpts,
  size_predpts,
  by,
  subset,
  id_predpts,
  keep = TRUE,
  drop_levels = FALSE,
  overwrite = FALSE
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr style="vertical-align: top;">
<td><code>ssn</code></td>
<td>
<p>An <code>SSN</code> object.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>predpts</code></td>
<td>
<p>A character string representing the name of the
prediction dataset.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>size_predpts</code></td>
<td>
<p>numeric value representing the size of the new
prediction sets. The existing prediction set is split equally to
produce multiple prediction sets of this size</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>by</code></td>
<td>
<p>character string representing the column name of type
factor, integer, character or logical that the split will be
based on</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>subset</code></td>
<td>
<p>logical expression indicating which elements or rows
to keep; missing values are taken as <code>FALSE</code></p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>id_predpts</code></td>
<td>
<p>character string representing the new prediction
dataset name. This value is only specified when the subset method is
used</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>keep</code></td>
<td>
<p>logical value indicating whether the original
prediction dataset should be retained in the <code>SSN</code>
object. Default is <code>TRUE</code></p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>drop_levels</code></td>
<td>
<p>logical value indicating whether empty factor
levels should be dropped in the <code>by</code> column when the new
prediction dataset(s) are created. Default is <code>FALSE</code></p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>overwrite</code></td>
<td>
<p>logical indicating whether the new prediction
dataset geopackage should be deleted in the .ssn directory if it
already exists. Default = <code>FALSE</code></p>
</td>
</tr>
</table>
<h3>Details</h3>

<p>Three methods have been provided to split prediction sets:
size, by, and subset. The
size method is used to split the existing prediction
set into multiple equally-sized prediction sets using the <code>size_predpts</code> argument. Note that the
final prediction set may be smaller in size than the others if
the total number of predictions is not evenly divisible by
<code>size_predpts</code>. The by method is used if the prediction
set is to be split into multiple new prediction sets based on an
existing column of type factor, integer, character, or
logical specified using the argument <code>by</code>. The subset method is used to create one new
prediction set based on a logical expression defined in <code>subset</code>.
</p>
<p>When more than one prediction dataset is created the prediction
dataset names will be appended with a hyphen and prediction
dataset number if more than one prediction dataset is
created. For example, when "preds" is split using
<code>size_predpts</code>, the new names will be "preds-1", "preds-2", and
so forth.
</p>
<p>When <code>keep=FALSE</code>, the prediction dataset is removed from
the <code>SSN</code> object stored in memory, but is not deleted from
the .ssn directory specified in <code>ssn$path</code>.
</p>
<p>Note that, only one
method may be specified when the <code>ssn_split_predpts</code>
function is called. The distance matrices for the new prediction
datasets must be created using the <code>ssn_create_distmat</code> before
predictions can be made.
</p>


<h3>Value</h3>

<p>returns the <code>SSN</code> specified in <code>ssn</code>, with one or more new prediction
sets. Geopackages of the new prediction sets are written to the
.ssn directory designated in ssn$path.
</p>


<h3>Examples</h3>

<pre><code class="language-R">## Import SSN object
copy_lsn_to_temp() ## Only needed for this example
ssn &lt;- ssn_import(paste0(tempdir(), "/MiddleFork04.ssn"),
  predpts = c("pred1km", "CapeHorn"),
  overwrite = TRUE
)

## Split predictions based on 'size' method
ssn1 &lt;- ssn_split_predpts(ssn, "CapeHorn",
  size_predpts = 200,
  keep = FALSE, overwrite = TRUE
)
names(ssn1$preds)
nrow(ssn1$preds[["CapeHorn-1"]])

## Split predictions using 'by' method
ssn$preds$pred1km$net.fac &lt;- as.factor(ssn$preds$pred1km$netID)
ssn2 &lt;- ssn_split_predpts(ssn, "pred1km",
  by = "net.fac",
  overwrite = TRUE
)
names(ssn2$preds)

## Split predictions using 'subset' method
ssn3 &lt;- ssn_split_predpts(ssn, "pred1km",
  subset = ratio &gt; 0.5,
  id_predpts = "RATIO_05", overwrite = TRUE
)
names(ssn3$preds)
</code></pre>


</div>