<div class="container">

<table style="width: 100%;"><tr>
<td>ovb_bounds</td>
<td style="text-align: right;">R Documentation</td>
</tr></table>
<h2>Bounds on the strength of unobserved confounders using observed covariates</h2>

<h3>Description</h3>

<p>Bounds on the strength of unobserved confounders using observed covariates, as in Cinelli and Hazlett (2020). The main generic function is <code>ovb_bounds</code>, which can compute both the bounds on the strength of confounding as well as the adjusted estimates, standard errors, t-values and confidence intervals.
</p>
<p>Other functions that compute only the bounds on the strength of confounding are also provided. These functions may be useful when computing benchmarks for using only summary statistics from papers you see in print.
</p>


<h3>Usage</h3>

<pre><code class="language-R">ovb_bounds(...)

## S3 method for class 'lm'
ovb_bounds(
  model,
  treatment,
  benchmark_covariates = NULL,
  kd = 1,
  ky = kd,
  reduce = TRUE,
  bound = c("partial r2", "partial r2 no D", "total r2"),
  adjusted_estimates = TRUE,
  alpha = 0.05,
  h0 = 0,
  ...
)

## S3 method for class 'fixest'
ovb_bounds(
  model,
  treatment,
  benchmark_covariates = NULL,
  kd = 1,
  ky = kd,
  reduce = TRUE,
  bound = c("partial r2", "partial r2 no D", "total r2"),
  adjusted_estimates = TRUE,
  alpha = 0.05,
  h0 = 0,
  message = T,
  ...
)

ovb_partial_r2_bound(...)

## S3 method for class 'numeric'
ovb_partial_r2_bound(
  r2dxj.x,
  r2yxj.dx,
  kd = 1,
  ky = kd,
  bound_label = "manual",
  ...
)

## S3 method for class 'lm'
ovb_partial_r2_bound(
  model,
  treatment,
  benchmark_covariates = NULL,
  kd = 1,
  ky = kd,
  adjusted_estimates = TRUE,
  alpha = 0.05,
  ...
)

## S3 method for class 'fixest'
ovb_partial_r2_bound(
  model,
  treatment,
  benchmark_covariates = NULL,
  kd = 1,
  ky = kd,
  adjusted_estimates = TRUE,
  alpha = 0.05,
  ...
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr style="vertical-align: top;">
<td><code>...</code></td>
<td>
<p>arguments passed to other methods.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>model</code></td>
<td>
<p>An <code>lm</code> or <code>fixest</code> object with the outcome regression.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>treatment</code></td>
<td>
<p>A character vector with the name of the treatment variable
of the model.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>benchmark_covariates</code></td>
<td>
<p>The user has two options: (i)  character vector of the names of covariates that will be used to bound the plausible strength of the unobserved confounders. Each variable will be considered separately; (ii) a named list with character vector names of covariates that will be used, <em>as a group</em>, to bound the plausible strength of the unobserved confounders. The names of the list will be used for the benchmark labels. Note: for factor variables with more than two levels, you need to provide the name of each level as encoded in the <code>fixest</code> model (the columns of <code>model.matrix</code>).</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>kd</code></td>
<td>
<p>numeric vector. Parameterizes how many times stronger the confounder is related to the treatment in comparison to the observed benchmark covariate.
Default value is <code>1</code> (confounder is as strong as benchmark covariate).</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>ky</code></td>
<td>
<p>numeric vector. Parameterizes how many times stronger the confounder is related to the outcome in comparison to the observed benchmark covariate.
Default value is the same as <code>kd</code>.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>reduce</code></td>
<td>
<p>should the bias adjustment reduce or increase the
absolute value of the estimated coefficient? Default is <code>TRUE</code>.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>bound</code></td>
<td>
<p>type of bounding procedure. Currently only <code>"partial r2"</code> is implemented.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>adjusted_estimates</code></td>
<td>
<p>should the bounder also compute the adjusted estimates? Default is <code>TRUE</code>.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>alpha</code></td>
<td>
<p>significance level for computing the adjusted confidence intervals. Default is 0.05.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>h0</code></td>
<td>
<p>Null hypothesis for computation of the t-value. Default is zero.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>message</code></td>
<td>
<p>should messages be printed? Default = TRUE.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>r2dxj.x</code></td>
<td>
<p>partial R2 of covariate Xj with the treatment D (after partialling out the effect of the remaining covariates X, excluding Xj).</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>r2yxj.dx</code></td>
<td>
<p>partial R2 of covariate Xj with the outcome Y (after partialling out the effect of the remaining covariates X, excluding Xj).</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>bound_label</code></td>
<td>
<p>label to bounds provided manually in <code>r2dz.x</code> and <code>r2yz.dx</code>.</p>
</td>
</tr>
</table>
<h3>Details</h3>

<p>Currently it implements only the bounds based on partial R2. Other bounds will be implemented soon.
</p>


<h3>Value</h3>

<p>The function <code>ovb_bounds</code> returns a <code>data.frame</code> with the bounds on the strength of the unobserved confounder
as well with the adjusted point estimates, standard errors and t-values (optional, controlled by argument <code>adjusted_estimates = TRUE</code>).
</p>
<p>The function 'ovb_partial_r2_bound()' returns only <code>data.frame</code> with the bounds on the strength of the unobserved confounder. Adjusted estimates, standard
errors and t-values (among other quantities) need to be computed manually by the user using those bounds with the functions <code>adjusted_estimate</code>, <code>adjusted_se</code> and <code>adjusted_t</code>.
</p>


<h3>References</h3>

<p>Cinelli, C. and Hazlett, C. (2020), "Making Sense of Sensitivity: Extending Omitted Variable Bias." Journal of the Royal Statistical Society, Series B (Statistical Methodology).
</p>
<p>Cinelli, C. and Hazlett, C. (2020), "Making Sense of Sensitivity: Extending Omitted Variable Bias." Journal of the Royal Statistical Society, Series B (Statistical Methodology).
</p>
<p>Cinelli, C. and Hazlett, C. (2020), "Making Sense of Sensitivity: Extending Omitted Variable Bias." Journal of the Royal Statistical Society, Series B (Statistical Methodology).
</p>


<h3>Examples</h3>

<pre><code class="language-R">
# runs regression model
model &lt;- lm(peacefactor ~ directlyharmed + age + farmer_dar + herder_dar +
             pastvoted + hhsize_darfur + female + village, data = darfur)

# bounds on the strength of confounders 1, 2, or 3 times as strong as female
# and 1,2, or 3 times as strong as pastvoted
ovb_bounds(model, treatment = "directlyharmed",
          benchmark_covariates = c("female", "pastvoted"),
          kd = 1:3)


# run regression model
model &lt;- fixest::feols(peacefactor ~ directlyharmed + age + farmer_dar + herder_dar +
             pastvoted + hhsize_darfur + female + village, data = darfur)

# bounds on the strength of confounders 1, 2, or 3 times as strong as female
# and 1,2, or 3 times as strong as pastvoted
ovb_bounds(model, treatment = "directlyharmed",
          benchmark_covariates = c("female", "pastvoted"),
          kd = 1:3)


#########################################################
## Let's construct bounds from summary statistics only ##
#########################################################
# Suppose you didn't have access to the data, but only to
# the treatment and outcome regression tables.
# You can still compute the bounds.

# Use the t statistic of female in the outcome regression
# to compute the partial R2 of female with the outcome.
r2yxj.dx &lt;- partial_r2(t_statistic = -9.789, dof = 783)

# Use the t-value of female in the *treatment* regression
# to compute the partial R2 of female with the treatment
r2dxj.x &lt;- partial_r2(t_statistic = -2.680, dof = 783)

# Compute manually bounds on the strength of confounders 1, 2, or 3
# times as strong as female
bounds &lt;- ovb_partial_r2_bound(r2dxj.x = r2dxj.x,
                              r2yxj.dx = r2yxj.dx,
                              kd = 1:3,
                              ky = 1:3,
                              bound_label = paste(1:3, "x", "female"))
# Compute manually adjusted estimates
bound.values &lt;- adjusted_estimate(estimate = 0.0973,
                                 se = 0.0232,
                                 dof = 783,
                                 r2dz.x = bounds$r2dz.x,
                                 r2yz.dx = bounds$r2yz.dx)

# Plot contours and bounds
ovb_contour_plot(estimate = 0.0973,
                se = 0.0232,
                dof = 783)
add_bound_to_contour(bounds, bound_value = bound.values)


</code></pre>


</div>