<div class="container">

<table style="width: 100%;"><tr>
<td>persistEval</td>
<td style="text-align: right;">R Documentation</td>
</tr></table>
<h2>Evaluate an expression, restarting on error</h2>

<h3>Description</h3>

<p>A pair of functions paralleling <code>eval()</code> and <code>evalq()</code> that make
multiple attempts at evaluating an expression, retrying on error up
to a specified number of attempts, and optionally evaluating
another expression before restarting.
</p>


<h3>Usage</h3>

<pre><code class="language-R">persistEval(
  expr,
  retries = NVL(getOption("eval.retries"), 5),
  beforeRetry,
  envir = parent.frame(),
  enclos = if (is.list(envir) || is.pairlist(envir)) parent.frame() else baseenv(),
  verbose = FALSE
)

persistEvalQ(
  expr,
  retries = NVL(getOption("eval.retries"), 5),
  beforeRetry,
  envir = parent.frame(),
  enclos = if (is.list(envir) || is.pairlist(envir)) parent.frame() else baseenv(),
  verbose = FALSE
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr style="vertical-align: top;">
<td><code>expr</code></td>
<td>
<p>an expression to be retried; note the difference
between <code>eval()</code> and <code>evalq()</code>.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>retries</code></td>
<td>
<p>number of retries to make; defaults to
<code>"eval.retries"</code> option, or 5.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>beforeRetry</code></td>
<td>
<p>if given, an expression that will be evaluated
before each retry if the initial attempt fails; it is evaluated
in the same environment and with the same quoting semantics as
<code>expr</code>, but its errors are not handled.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>envir, enclos</code></td>
<td>
<p>see <code>eval()</code>.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>verbose</code></td>
<td>
<p>Whether to output retries.</p>
</td>
</tr>
</table>
<h3>Value</h3>

<p>Results of evaluating <code>expr</code>, including side-effects such
as variable assignments, if successful in <code>retries</code> retries.
</p>


<h3>Note</h3>

<p>If <code>expr</code> returns a <code>"try-error"</code> object (returned by
<code>try()</code>), it will be treated as an error. This behavior may
change in the future.
</p>


<h3>Examples</h3>

<pre><code class="language-R">x &lt;- 0
persistEvalQ({if((x&lt;-x+1)&lt;3) stop("x &lt; 3") else x},
             beforeRetry = {cat("Will try incrementing...\n")})

x &lt;- 0
e &lt;- quote(if((x&lt;-x+1)&lt;3) stop("x &lt; 3") else x)
persistEval(e,
            beforeRetry = quote(cat("Will try incrementing...\n")))
</code></pre>


</div>