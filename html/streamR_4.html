<div class="container">

<table style="width: 100%;"><tr>
<td>filterStream</td>
<td style="text-align: right;">R Documentation</td>
</tr></table>
<h2>Connect to Twitter Streaming API and return public statuses that 
match one or more filter predicates.</h2>

<h3>Description</h3>

<p><code>filterStream</code> opens a connection to Twitter's Streaming API
that will return public statuses that match one or more filter predicates.
Tweets can be filtered by keywords, users, language, and location. The output
can be saved as an object in memory or written to a text file.
</p>


<h3>Usage</h3>

<pre><code class="language-R">filterStream(file.name = NULL, track = NULL, follow = NULL,
  locations = NULL, language = NULL, timeout = 0, tweets = NULL,
  oauth = NULL, verbose = TRUE)
</code></pre>


<h3>Arguments</h3>

<table>
<tr style="vertical-align: top;">
<td><code>file.name</code></td>
<td>
<p>string, name of the file where tweets will be written. 
"" indicates output to the console, which can be redirected to an R object (see examples).
If the file already exists, tweets will be appended (not overwritten).</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>track</code></td>
<td>
<p>string or string vector containing keywords to track.
See the <code>track</code> parameter information in the Streaming API documentation for details.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>follow</code></td>
<td>
<p>string or numeric, vector of Twitter user IDs, indicating the users whose public
statuses should be delivered on the stream. See the <code>follow</code> parameter information
in the Streaming API documentation for details.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>locations</code></td>
<td>
<p>numeric, a vector of longitude, latitude pairs (with the southwest corner
coming first) specifying sets of bounding boxes to filter public statuses by. 
See the <code>locations</code> parameter information in the Streaming API documentation for details.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>language</code></td>
<td>
<p>string or string vector containing a list of BCP 47 language identifiers.
If not <code>NULL</code> (default), function will only return tweets that have been detected
as being written in the specified languages. Note that this parameter can only be used
in combination with any of the other filter parameters. See documentation for details.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>timeout</code></td>
<td>
<p>numeric, maximum length of time (in seconds) of connection to stream.
The connection will be automatically closed after this period. For example, setting
<code>timeout</code> to 10800 will keep the connection open for 3 hours. The default is 0,
which will keep the connection open permanently.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>tweets</code></td>
<td>
<p>numeric, maximum number of tweets to be collected when function is called.
After that number of tweets have been captured, function will stop. If set to <code>NULL</code>
(default), the connection will be open for the number of seconds specified in <code>timeout</code>
parameter.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>oauth</code></td>
<td>
<p>an object of class <code>oauth</code> that contains the access token
to the user's twitter session OR a list with details to create a new access token.
See examples for more details.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>verbose</code></td>
<td>
<p>logical, default is <code>TRUE</code>, which generates some output to the
R console with information about the capturing process.</p>
</td>
</tr>
</table>
<h3>Details</h3>

<p><code>filterStream</code> provides access to the statuses/filter Twitter stream.
</p>
<p>It will return public statuses that
match the keywords given in the <code>track</code> argument, published by the users
specified in the <code>follow</code> argument, written in the language specified
in the <code>language</code> argument, and sent within the location bounding
boxes declared in the <code>locations</code> argument.
</p>
<p>Note that location bounding boxes do not act as filters for other filter
parameters. In the fourth example below, we capture all tweets containing the term
rstats (even non-geolocated tweets) OR coming from the New York City area. For more
information on how the Streaming API request parameters work, check the
documentation at: <a href="https://developer.twitter.com/en/docs/tweets/filter-realtime/guides/basic-stream-parameters">https://developer.twitter.com/en/docs/tweets/filter-realtime/guides/basic-stream-parameters</a>.
</p>
<p>Also note that the <code>language</code> parameter needs to be used in combination
with another filter option (either keywords or location).
</p>
<p>If any of these arguments is left empty (e.g. no user filter is specified),
the function will return all public statuses that match the other filters.
At least one predicate parameter must be specified.
</p>
<p>Note that when no file name is provided, tweets are written to a temporary file, 
which is loaded in memory as a string vector when the connection to the stream
is closed.
</p>
<p>The total number of actual tweets that are captured might be lower than the number 
of tweets requested because blank lines, deletion notices, and incomplete
tweets are included in the count of tweets downloaded.
</p>


<h3>Author(s)</h3>

<p>Pablo Barbera <a href="mailto:pablo.barbera@nyu.edu">pablo.barbera@nyu.edu</a>
</p>


<h3>See Also</h3>

<p><code>sampleStream</code>, <code>userStream</code>, <code>parseTweets</code>
</p>


<h3>Examples</h3>

<pre><code class="language-R">## Not run: 
 
## An example of an authenticated request using the ROAuth package, 
## where consumerkey and consumer secret are fictitious. 
## You can obtain your own at dev.twitter.com
  library(ROAuth)
  requestURL &lt;- "https://api.twitter.com/oauth/request_token"
  accessURL &lt;- "https://api.twitter.com/oauth/access_token"
  authURL &lt;- "https://api.twitter.com/oauth/authorize"
  consumerKey &lt;- "xxxxxyyyyyzzzzzz"
  consumerSecret &lt;- "xxxxxxyyyyyzzzzzzz111111222222"
  my_oauth &lt;- OAuthFactory$new(consumerKey=consumerKey,
    consumerSecret=consumerSecret, requestURL=requestURL,
    accessURL=accessURL, authURL=authURL)
  my_oauth$handshake(cainfo = system.file("CurlSSL", "cacert.pem", package = "RCurl"))

## Alternatively, it is also possible to create a token without the handshake:
 my_oauth &lt;- list(consumer_key = "CONSUMER_KEY",
   consumer_secret = "CONSUMER_SECRET",
   access_token="ACCESS_TOKEN",
   access_token_secret = "ACCESS_TOKEN_SECRET")

## capture 10 tweets mentioning the "Rstats" hashtag
  filterStream( file.name="tweets_rstats.json", 
     track="rstats", tweets=10, oauth=my_oauth )

## capture tweets published by Twitter's official account      
  filterStream( file.name="tweets_twitter.json", 
     follow="783214", timeout=600, oauth=my_oauth )

## capture tweets sent from New York City in Spanish only, and saving as an object in memory
  tweets &lt;- filterStream( file.name="", language="es",
      locations=c(-74,40,-73,41), timeout=600, oauth=my_oauth )  

## capture tweets mentioning the "rstats" hashtag or sent from New York City
  filterStream( file="tweets_rstats.json", track="rstats",
      locations=c(-74,40,-73,41), timeout=600, oauth=my_oauth )


## End(Not run)

</code></pre>


</div>