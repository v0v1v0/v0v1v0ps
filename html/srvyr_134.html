<div class="container">

<table style="width: 100%;"><tr>
<td>survey_old_quantile</td>
<td style="text-align: right;">R Documentation</td>
</tr></table>
<h2>Calculate the quantile and its variation using survey methods</h2>

<h3>Description</h3>

<p>Calculate quantiles from complex survey data. A wrapper
around <code>oldsvyquantile</code>, which is a version of the function
from before version 4.1 of the survey package, available for backwards compatibility.
<code>survey_old_quantile</code> and <code>survey_old_median</code> should always be
called from <code>summarise</code>. See Thomas Lumley's blogpost
&lt;https://notstatschat.rbind.io/2021/07/20/what-s-new-in-the-survey-package/&gt;
for more details.
</p>


<h3>Usage</h3>

<pre><code class="language-R">survey_old_quantile(
  x,
  quantiles,
  na.rm = FALSE,
  vartype = c("se", "ci", "var", "cv"),
  level = 0.95,
  q_method = "linear",
  f = 1,
  interval_type = c("Wald", "score", "betaWald", "probability", "quantile"),
  ties = c("discrete", "rounded"),
  df = NULL,
  ...
)

survey_old_median(
  x,
  na.rm = FALSE,
  vartype = c("se", "ci"),
  level = 0.95,
  q_method = "linear",
  f = 1,
  interval_type = c("Wald", "score", "betaWald", "probability", "quantile"),
  ties = c("discrete", "rounded"),
  df = NULL,
  ...
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr style="vertical-align: top;">
<td><code>x</code></td>
<td>
<p>A variable or expression</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>quantiles</code></td>
<td>
<p>A vector of quantiles to calculate</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>na.rm</code></td>
<td>
<p>A logical value to indicate whether missing values should be dropped</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>vartype</code></td>
<td>
<p>NULL to report no variability (default), otherwise one or more of:
standard error ("se") confidence interval ("ci") (variance and coefficient
of variation not available).</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>level</code></td>
<td>
<p>A single number indicating the confidence level (only one level allowed)</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>q_method</code></td>
<td>
<p>See "method" in <code>approxfun</code></p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>f</code></td>
<td>
<p>See <code>approxfun</code></p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>interval_type</code></td>
<td>
<p>See <code>oldsvyquantile</code></p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>ties</code></td>
<td>
<p>See <code>oldsvyquantile</code></p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>df</code></td>
<td>
<p>A number indicating the degrees of freedom for t-distribution. The
default, Inf uses the normal distribution (matches the survey package).
Also, has no effect for <code>type = "betaWald"</code>.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>...</code></td>
<td>
<p>Ignored</p>
</td>
</tr>
</table>
<h3>Examples</h3>

<pre><code class="language-R">library(survey)
data(api)

dstrata &lt;- apistrat %&gt;%
  as_survey_design(strata = stype, weights = pw)

dstrata %&gt;%
  summarise(api99 = survey_old_quantile(api99, c(0.25, 0.5, 0.75)),
            api00 = survey_old_median(api00, vartype = c("ci")))

dstrata %&gt;%
  group_by(awards) %&gt;%
  summarise(api00 = survey_old_median(api00))

</code></pre>


</div>