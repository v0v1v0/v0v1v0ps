<div class="container">

<table style="width: 100%;"><tr>
<td>subpop</td>
<td style="text-align: right;">R Documentation</td>
</tr></table>
<h2>Inference on Most and Least Affected Groups</h2>

<h3>Description</h3>

<p><code>subpop</code> conducts set inference on the groups of most and least
affected. When <code>subgroup = NULL</code>, output is for whole sample. Otherwise
the results are subgroup. The output of <code>subpop</code> is a list
containing six components: <code>cs_most</code>, <code>cs_least</code>, <code>u</code>,
<code>subgroup</code>, <code>most</code> and <code>least</code>. As the names
indicate, <code>cs_most</code> and <code>cs_least</code> denote the confidence sets for
the most and least affected units. <code>u</code> stores the u-th most and least
affected index. <code>subgroup</code> stores the indicators for subpopulations.
<code>most</code> and <code>least</code> store the data of the most and
least affected groups. The confidence sets can be visualized using the
<code>plot.subpop</code> command while the two groups can be tabulated via
the <code>summary.subpop</code> command.
</p>


<h3>Usage</h3>

<pre><code class="language-R">subpop(
  fm,
  data,
  method = c("ols", "logit", "probit", "QR"),
  var_type = c("binary", "continuous", "categorical"),
  var,
  compare,
  subgroup = NULL,
  samp_weight = NULL,
  taus = c(5:95)/100,
  u = 0.1,
  alpha = 0.1,
  b = 500,
  seed = 1,
  parallel = FALSE,
  ncores = detectCores(),
  boot_type = c("nonpar", "weighted")
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr style="vertical-align: top;">
<td><code>fm</code></td>
<td>
<p>Regression formula</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>data</code></td>
<td>
<p>The data in use</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>method</code></td>
<td>
<p>Models to be used for estimating partial effects. Four
options: <code>"logit"</code> (binary response),
<code>"probit"</code> (binary response), <code>"ols"</code>
(interactive linear with additive errors), <code>"QR"</code>
(linear model with non-additive errors). Default is
<code>"ols"</code>.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>var_type</code></td>
<td>
<p>The type of parameter in interest. Three options:
<code>"binary"</code>, <code>"categorical"</code>,
<code>"continuous"</code>. Default is <code>"binary"</code>.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>var</code></td>
<td>
<p>Variable T in interset. Should be a character.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>compare</code></td>
<td>
<p>If parameter in interest is categorical, then user needs
to specify which two category to compare with. Should be
a 1 by 2 character vector. For example, if the two levels
to compare with is 1 and 3, then <code>c=("1", "3")</code>,
which will calculate partial effect from 1 to 3. To use
this option, users first need to specify <code>var</code> as a
factor variable.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>subgroup</code></td>
<td>
<p>Subgroup in interest. Default is <code>NULL</code>.
Specifcation should be a logical variable. For example,
suppose data contains indicator variable for women
(female if 1, male if 0). If users are interested in
women SPE, then users should specify
<code>subgroup = data[, "female"] == 1</code>.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>samp_weight</code></td>
<td>
<p>Sampling weight of data. Input should be a n by 1 vector,
where n denotes sample size. Default is <code>NULL</code>.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>taus</code></td>
<td>
<p>Indexes for quantile regression.
Default is <code>c(5:95)/100</code>.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>u</code></td>
<td>
<p>Percentile of most and least affected. Default is set to
be 0.1.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>alpha</code></td>
<td>
<p>Size for confidence interval. Shoule be between 0 and 1.
Default is 0.1</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>b</code></td>
<td>
<p>Number of bootstrap draws. Default is set to be 500.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>seed</code></td>
<td>
<p>Pseudo-number generation for reproduction. Default is 1.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>parallel</code></td>
<td>
<p>Whether the user wants to use parallel computation.
The default is <code>FALSE</code> and only 1 CPU will be used.
The other option is <code>TRUE</code>, and user can specify
the number of CPUs in the <code>ncores</code> option.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>ncores</code></td>
<td>
<p>Number of cores for computation. Default is set to be
<code>detectCores()</code>, which is a function from package
<code>parallel</code> that detects the number of CPUs on the
current host. For large dataset, parallel computing is
highly recommended since bootstrap is time-consuming.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>boot_type</code></td>
<td>
<p>Type of bootstrap. Default is <code>"nonpar"</code>, and the
package implements nonparametric bootstrap. The
alternative is <code>"weighted"</code>, and the package
implements weighted bootstrap.</p>
</td>
</tr>
</table>
<h3>Examples</h3>

<pre><code class="language-R">data("mortgage")
### Regression Specification
fm &lt;- deny ~ black + p_irat + hse_inc + ccred + mcred + pubrec +
   ltv_med + ltv_high + denpmi + selfemp + single + hischl
### Issue the subpop command
set_b &lt;- subpop(fm, data = mortgage, method = "logit", var = "black",
u = 0.1, alpha = 0.1, b = 50)

</code></pre>


</div>