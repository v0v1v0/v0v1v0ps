<div class="container">

<table style="width: 100%;"><tr>
<td>process_outcome_model</td>
<td style="text-align: right;">R Documentation</td>
</tr></table>
<h2>Generate an ITS extrapolation simulation.</h2>

<h3>Description</h3>

<p>This is the primary function to use to use this approach on a given dataset.
</p>


<h3>Usage</h3>

<pre><code class="language-R">process_outcome_model(
  outcomename,
  dat,
  t0,
  R = 400,
  summarize = FALSE,
  smooth = FALSE,
  smoother = NULL,
  fit_model = fit_model_default,
  covariates = NULL,
  plug_in = FALSE,
  ...
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr style="vertical-align: top;">
<td><code>outcomename</code></td>
<td>
<p>Name of column in dat containing the time series.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>dat</code></td>
<td>
<p>Dataframe with a 'month' column for time.  'month' is assumed to
be a sequence of integer values.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>t0</code></td>
<td>
<p>Last pre-policy timepoint</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>R</code></td>
<td>
<p>Number of simulated pre-policy extrapolations to generate.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>summarize</code></td>
<td>
<p>Summarise the series? (TRUE/FALSE)</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>smooth</code></td>
<td>
<p>Smooth the series? (TRUE/FALSE)</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>smoother</code></td>
<td>
<p>Function to smooth residuals, if smoothing set to TRUE.  If
NULL, will dynamically make a model smoother based on the fit_model method
if covariates are passed.  Otherwise it will use the simple smoother on the
outcomes.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>fit_model</code></td>
<td>
<p>The function used to fit the model to simulate from. (This
model could be a seasonality model. Default is simple linear model with no
covariates.)</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>covariates</code></td>
<td>
<p>Vector of covariate names of all covariates used in the
passed model function fit_model.  If null, will attempt to get list of
covariates form the "lags" attribute of the passed 'fit_model'.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>plug_in</code></td>
<td>
<p>Use the estimated parameters as fixed and do not include extra
uncertainty of parameter estimation in the simulation. (Not recommended as
it destroys inference.)</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>...</code></td>
<td>
<p>Extra arguments to be passed to 'extrapolate_model()'</p>
</td>
</tr>
</table>
<h3>Details</h3>

<p>Take a given outcome variable, fit an ITS model, use it to extrapolate R
plusible trajectories, and then using these trajectories, generate final
impact results by averaging (if summarize is set to TRUE).
</p>
<p>This function is basically a wrapper for 'extrapolate_model()' with some
extra calls to 'make_model_smoother()' to prepare, in the case of smoothing,
and adding on a summary trend via 'generate_Ybars()' in the case of
summarizing.
</p>


<h3>Value</h3>

<p>If summarize=TRUE, A dataframe with several columns of interest and
one row per month of data. The columns are Ymin and Ymax, the limits of the
envelope, 'range', the range of the envelope, 'SE', the standard deviation
of the trajectories at that time point, 'Ysmooth' the median smoothed value
at that time point (if smoothing), 'Ystar' the median unsmoothed value at
that time point (regardless of smooth flag), 'Y', the observed outcome,
'Ysmooth1', the smoothed observed outcomes, and 'Ybar' the predicted
outcome given the model with no autoregressive aspect.
</p>
<p>If summarize=FALSE, a dataframe of all the raw series generated.
</p>


<h3>See Also</h3>

<p>The core internal function that this method is a wrapper for is <code>extrapolate_model</code>.
</p>


<h3>Examples</h3>

<pre><code class="language-R">data( "mecklenberg" )
t0 = 0
envelope = process_outcome_model( "pbail", mecklenberg, 
                                  t0=t0, R = 10, 
                                  summarize = TRUE, smooth=FALSE )
make_envelope_graph(envelope, t0=t0, ylab = "Proportion given bail") +
  ggplot2::labs( title="Sample ITS plot")
</code></pre>


</div>