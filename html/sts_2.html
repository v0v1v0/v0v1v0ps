<div class="container">

<table style="width: 100%;"><tr>
<td>esthcpp</td>
<td style="text-align: right;">R Documentation</td>
</tr></table>
<h2>Estimate Hessian Matrix</h2>

<h3>Description</h3>

<p>Estimates the Hessian matrix needed for the Variational E-step in C++
</p>


<h3>Usage</h3>

<pre><code class="language-R">esthcpp(alpha_d, kappa_t, kappa_s, Sigma_Inv, doc, V, mv)
</code></pre>


<h3>Arguments</h3>

<table>
<tr style="vertical-align: top;">
<td><code>alpha_d</code></td>
<td>
<p>the estimated alpha variables for the given document</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>kappa_t</code></td>
<td>
<p>the estimated kappa_t coefficients</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>kappa_s</code></td>
<td>
<p>the estimated kappa_s coefficients</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>Sigma_Inv</code></td>
<td>
<p>the inverse covariance matrix</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>doc</code></td>
<td>
<p>the sparse matrix representation of the document, with two rows, and columns equal to the number of unique
vocabulary words in the document.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>V</code></td>
<td>
<p>the size of the vocabulary</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>mv</code></td>
<td>
<p>the baseline log-transformed occurrence rate of each word in the corpus</p>
</td>
</tr>
</table>
<h3>Value</h3>

<p>The Hessian matrix
</p>


<h3>Examples</h3>

<pre><code class="language-R">
library("tm"); library("stm"); library("sts")
temp&lt;-textProcessor(documents=gadarian$open.ended.response,
metadata=gadarian, verbose = FALSE)
out &lt;- prepDocuments(temp$documents, temp$vocab, temp$meta, verbose = FALSE)
X &lt;- model.matrix(~1+out$meta$treatment + out$meta$pid_rep + 
out$meta$treatment * out$meta$pid_rep)[,-1]
X_seed &lt;- as.matrix(out$meta$treatment)
sts_estimate &lt;- sts(X, X_seed, out, numTopics = 3, maxIter = 10)
# for document #1: 
hessian &lt;- esthcpp(alpha_d = sts_estimate$alpha[1,], kappa_t=sts_estimate$kappa$kappa_t, 
kappa_s=sts_estimate$kappa$kappa_s, Sigma_Inv = sts_estimate$sigma_inv, 
doc = out$documents[[1]], V=length(sts_estimate$vocab), mv = sts_estimate$mv)

</code></pre>


</div>