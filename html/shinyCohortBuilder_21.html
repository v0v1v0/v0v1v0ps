<div class="container">

<table style="width: 100%;"><tr>
<td>.save_observer</td>
<td style="text-align: right;">R Documentation</td>
</tr></table>
<h2>Save observer to user session</h2>

<h3>Description</h3>

<p>The method used to store created observers (used to implement extra filter logic).
The saved observer are then destroyed when filtering step is removed which prevents
duplicated execution of accumulated observers.
</p>


<h3>Usage</h3>

<pre><code class="language-R">.save_observer(observer, id, session)
</code></pre>


<h3>Arguments</h3>

<table>
<tr style="vertical-align: top;">
<td><code>observer</code></td>
<td>
<p>An 'observe' or 'observeEvent' to be saved.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>id</code></td>
<td>
<p>Id of the observer. Preferably prefixed with step_id.
The saved observer is saved as ‘session$userData$observers[[’&lt;id&gt;-observer']]' object.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>session</code></td>
<td>
<p>Shiny session object.</p>
</td>
</tr>
</table>
<h3>Value</h3>

<p>No return value, used for side effect which is saving the observer to
'session$userData' object.
</p>


<h3>Examples</h3>

<pre><code class="language-R">if (interactive()) {
  library(shiny)
  library(shinyCohortBuilder)

  ui &lt;- fluidPage(
    numericInput("power", "Power", min = 0, max = 10, value = 1, step = 1),
    numericInput("value", "Value", min = 0, max = 100, value = 2, step = 0.1),
    actionButton("add", "Observe the selected power"),
    actionButton("rm", "Stop observing the selected power")
  )

  server &lt;- function(input, output, session) {
    observeEvent(input$add, {
      .save_observer(
        observeEvent(input$value, {
           print(input$value ^ input$power)
        }),
        as.character(input$power),
        session = session
      )
    }, ignoreInit = TRUE)

    observeEvent(input$rm, {
      id &lt;- paste0(input$power, "-observer")
      session$userData$observers[[id]]$destroy()
      session$userData$observers[[id]] &lt;- NULL
    }, ignoreInit = TRUE)
  }

  shinyApp(ui, server)
}
</code></pre>


</div>