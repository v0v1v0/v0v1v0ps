<div class="container">

<table style="width: 100%;"><tr>
<td>odeModel</td>
<td style="text-align: right;">R Documentation</td>
</tr></table>
<h2>Generating-functions (Constructors) to Create Objects of
Classes ‘odeModel’, ‘rwalkModel’ and ‘gridModel’.</h2>

<h3>Description</h3>

<p>These functions can be used to create <code>simObj</code> instances without
using <code>new</code> explicitly.
</p>


<h3>Usage</h3>

<pre><code class="language-R">odeModel(obj = NULL, main = NULL,
        equations = NULL, times = c(from = 0, to = 10, by = 1),
        init = numeric(0), parms = numeric(0),
        inputs = NULL, solver = "rk4", initfunc = NULL)

gridModel(obj = NULL, main = NULL,
        equations = NULL, times = c(from=0, to=10, by=1),
        init = matrix(0), parms = list(),
        inputs = NULL, solver = "iteration", initfunc = NULL)

rwalkModel(obj = NULL, main = NULL, 
        equations = NULL, times = c(from = 0, to = 10, by = 1),
        init = NULL, parms = list(),
        inputs = NULL, solver = "iteration", initfunc = NULL)
        
indbasedModel(obj = NULL, main = NULL, 
        equations = NULL, times = c(from = 0, to = 10, by = 1),
        init = NULL, parms = list(),
        inputs = NULL, solver = "iteration", initfunc = NULL)        
</code></pre>


<h3>Arguments</h3>

<table>
<tr style="vertical-align: top;">
<td><code>obj</code></td>
<td>
<p>Unnamed arguments are regarded as objects of the corresponding
class. If <code>obj</code> is omitted, the new object is created from scratch.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>main</code></td>
<td>
<p>The main equations of the model.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>equations</code></td>
<td>
<p>The sub-models (sub-equations and of the model).</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>times</code></td>
<td>
<p>A vector of time steps or a vector with three
named values <code>from</code>, <code>to</code>, <code>by</code> specifying the
simulation time steps. The ‘from-to-by’ form can be edited with
<code>editParms</code>.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>init</code></td>
<td>
<p>Initial values (start values) of the
state variable given as named vector.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>parms</code></td>
<td>
<p>A vector or list (depending on the respective class) of constant
parameters.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>inputs</code></td>
<td>
<p>Optional time-dependend input
variables (matrix or data frame).</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>solver</code></td>
<td>
<p>The solver used to integrate the model.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>initfunc</code></td>
<td>
<p>The function is called by the <code>initialize</code> mechanism
and allows direct access and manipulation of all slots
of the object in creation</p>
</td>
</tr>
</table>
<h3>Details</h3>

<p>These functions provide an alternative way to create
<code>simObj</code> instances in addition to the standard S4 <code>new</code>
mechanism. The functions are provided mainly for compatibility with older
versions of <span class="pkg">simecol</span>.
</p>
<p>See <code>simecol-package</code> and the examples for details about the
slots.
</p>


<h3>Value</h3>

<p>The function returns an S4 object of type <code>odeModel</code>,
<code>rwalkModel</code>, <code>gridModel</code>
</p>


<h3>See Also</h3>

<p><code>new</code>,
<code>simecol-package</code>
</p>


<h3>Examples</h3>

<pre><code class="language-R">## (1) Define and run your own simecol model with new ==================

lv &lt;- new("odeModel", 
  main = function (time, init, parms) {
    with(as.list(c(init, parms)), {
      dn1 &lt;-   k1 * N1 - k2 * N1 * N2
      dn2 &lt;- - k3 * N2 + k2 * N1 * N2
      list(c(dn1, dn2))
    })
  },
  parms  = c(k1 = 0.2, k2 = 0.2, k3 = 0.2),
  times  = c(from = 0, to = 100, by = 0.5),
  init   = c(N1 = 0.5, N2 = 1),
  solver = "lsoda"
)

## ... or use the generating function ----------------------------------

lv &lt;- odeModel( 
  main = function (time, init, parms) {
    with(as.list(c(init, parms)), {
      dn1 &lt;-   k1 * N1 - k2 * N1 * N2
      dn2 &lt;- - k3 * N2 + k2 * N1 * N2
      list(c(dn1, dn2))
    })
  },
  parms  = c(k1 = 0.2, k2 = 0.2, k3 = 0.2),
  times  = c(from = 0, to = 100, by = 0.5),
  init   = c(N1 = 0.5, N2 = 1),
  solver = "lsoda"
)

lv &lt;- sim(lv)
plot(lv)

## (2) Conway's Game of Life ==========================================

set.seed(23)  # to make it reproducible

conway &lt;- new("gridModel",
  main = function(time, x, parms) {
    nb     &lt;- eightneighbours(x)
    surviv &lt;- (x &gt;  0 &amp; (nb %in% parms$srv))
    gener  &lt;- (x == 0 &amp; (nb %in% parms$gen))
    x      &lt;- (surviv + gener) &gt; 0
    return(x)
  },
  parms  = list(srv = c(2, 3), gen = 3),
  times  = 1:17,
  init   = matrix(round(runif(1000)), ncol=40),
  solver = "iteration"
)

sim(conway, animate=TRUE)

</code></pre>


</div>