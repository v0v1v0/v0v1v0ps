<div class="container">

<table style="width: 100%;"><tr>
<td>mat2listw</td>
<td style="text-align: right;">R Documentation</td>
</tr></table>
<h2>Convert a square spatial weights matrix to a weights list object</h2>

<h3>Description</h3>

<p>The function converts a square spatial weights matrix, 
optionally a sparse matrix to a weights list 
object, optionally adding region IDs from the row names of the matrix, as a 
sequence of numbers 1:nrow(x), or as given as an argument. The style can be imposed by rebuilting the weights list object internally.
</p>


<h3>Usage</h3>

<pre><code class="language-R">mat2listw(x, row.names = NULL, style=NULL, zero.policy = NULL)
</code></pre>


<h3>Arguments</h3>

<table>
<tr style="vertical-align: top;">
<td><code>x</code></td>
<td>
<p>A square non-negative matrix with no NAs representing spatial 
weights; may be a matrix of class “sparseMatrix”</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>row.names</code></td>
<td>
<p>row names to use for region IDs</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>style</code></td>
<td>
<p>default NULL, missing, set to "M" and warning given; if not "M", passed to <code>nb2listw</code> to re-build the object</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>zero.policy</code></td>
<td>
<p>default NULL, use global option value; if FALSE stop with error for any empty neighbour sets, if TRUE permit the weights list to be formed with zero-length weights vectors</p>
</td>
</tr>
</table>
<h3>Value</h3>

<p>A <code>listw</code> object with the following members:
</p>
<table>
<tr style="vertical-align: top;">
<td><code>style</code></td>
<td>
<p>"M", meaning matrix style, underlying style unknown, or assigned style argument in rebuilt object</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>neighbours</code></td>
<td>
<p>the derived neighbours list</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>weights</code></td>
<td>
<p>the weights for the neighbours derived from the matrix</p>
</td>
</tr>
</table>
<h3>Author(s)</h3>

<p>Roger Bivand <a href="mailto:Roger.Bivand@nhh.no">Roger.Bivand@nhh.no</a></p>


<h3>See Also</h3>

<p><code>nb2listw</code>, <code>nb2mat</code></p>


<h3>Examples</h3>

<pre><code class="language-R">columbus &lt;- st_read(system.file("shapes/columbus.gpkg", package="spData")[1], quiet=TRUE)
col005 &lt;- dnearneigh(st_coordinates(st_centroid(st_geometry(columbus),
 of_largest_polygon=TRUE)), 0, 0.5, as.character(columbus$NEIGNO))
summary(col005)
col005.w.mat &lt;- nb2mat(col005, style="W", zero.policy=TRUE)
try(col005.w.b &lt;- mat2listw(col005.w.mat, style="W"))
col005.w.b &lt;- mat2listw(col005.w.mat, style="W", zero.policy=TRUE)
summary(col005.w.b$neighbours)
diffnb(col005, col005.w.b$neighbours)
col005.w.mat.3T &lt;- kronecker(diag(3), col005.w.mat)
col005.w.b.3T &lt;- mat2listw(col005.w.mat.3T, style="W", zero.policy=TRUE)
summary(col005.w.b.3T$neighbours)
run &lt;- FALSE
if (require("spatialreg", quiet=TRUE)) run &lt;- TRUE
if (run) {
W &lt;- as(nb2listw(col005, style="W", zero.policy=TRUE), "CsparseMatrix")
try(col005.spM &lt;- mat2listw(W))
col005.spM &lt;- mat2listw(W, style="W", zero.policy=TRUE)
summary(col005.spM$neighbours)
}
if (run) {
diffnb(col005, col005.spM$neighbours)
}
if (run &amp;&amp; require("Matrix", quiet=TRUE)) {
IW &lt;- kronecker(Diagonal(3), W)
col005.spM.3T &lt;- mat2listw(as(IW, "CsparseMatrix"), style="W", zero.policy=TRUE)
summary(col005.spM.3T$neighbours)
}
</code></pre>


</div>