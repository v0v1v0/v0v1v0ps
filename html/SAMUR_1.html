<div class="container">

<table style="width: 100%;"><tr>
<td>samur</td>
<td style="text-align: right;">R Documentation</td>
</tr></table>
<h2>
Stochastic Augmentation of Matched Datasets Using Restriction Methods
</h2>

<h3>Description</h3>

<p>This function generates multiple subsets of the data in which the distribution of covariates is balanced across treatment groups. It works by binning the output of a base matching algorithm into a multidimensional histogram, and drawing - without replacement - from the full data set according to the histogram. This leads to higher data coverage across multiple matched subsets without duplication of cases within each subset.
</p>


<h3>Usage</h3>

<pre><code class="language-R">samur(
  formula, data
  , matched.subset = 1:nrow(data)
  , nsmp = 100
  , use.quantile = TRUE, breaks = 10
  , replace = length(unique(matched.subset)) &lt; length(matched.subset)
  )
## S3 method for class 'samur'
print(x, ...)
</code></pre>


<h3>Arguments</h3>

<table>
<tr style="vertical-align: top;">
<td><code>formula</code></td>
<td>
<p>Formula expression used to describe the treatment variable (lhs) and covariates used during matching (rhs).</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>data</code></td>
<td>
<p>Data frame containing the treatment variables and matched covariates as specified in the <code>formula</code>.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>matched.subset</code></td>
<td>
<p>An integer vector representing the indexes of a subset of <code>data</code> that is the output of a base matching algorithm. It cannot contain duplicate values.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>nsmp</code></td>
<td>
<p>Number of stochastically matched subsets to generate.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>use.quantile</code></td>
<td>
<p>Should numeric covariates be binned using quantiles (<code>TRUE</code>) or not.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>breaks</code></td>
<td>
<p>number of breaks to use in binning numeric covariates.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>replace</code></td>
<td>
<p>Boolean flag indicating whether or not to perform sampling with replacement.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>x</code></td>
<td>
<p>An object of class <code>samur</code>, typically the output of function <code>samur</code>.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>...</code></td>
<td>
<p>Arguments passed to/from other methods.</p>
</td>
</tr>
</table>
<h3>Value</h3>

<p>An object of class <code>samur</code>, a matrix of size <code>length(matched.subset)</code> by <code>nsmp</code>, where each column is a matched subset wihtout case duplication. It also has the following attributes:
</p>
<table>
<tr style="vertical-align: top;">
<td><code>call</code></td>
<td>
<p>Copy of function call.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>formula</code></td>
<td>
<p>Formula passed to the function.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>mdg</code></td>
<td>
<p>Multi-dimensional grid used for binning the matched data subsets.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>mdh</code></td>
<td>
<p>Multi-dimensional histogram resulting frm binning <code>data[matched.subset, ]</code> according to the grid specified in <code>mdg</code>.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>data</code></td>
<td>
<p>Copy of data frame passed to the function.</p>
</td>
</tr>
</table>
<h3>Author(s)</h3>

<p>Mansour T.A. Sharabiani, Alireza S. Mahani</p>


<h3>See Also</h3>

<p><code>summary.samur</code>
</p>


<h3>Examples</h3>

<pre><code class="language-R">## Not run: 
library(SAMUR)
library(Matching)
data(lalonde)
myformula &lt;- treat ~ age + educ
myglm &lt;- glm(myformula, lalonde, family="binomial")
X &lt;- myglm$fitted.values
# using M=1 and replace=F to ensure no duplication
bimatch &lt;- Match(Tr = lalonde$treat, X = myglm$fitted.values
  , M = 1, replace = F, caliper = 0.25)
idx &lt;- c(bimatch$index.control, bimatch$index.treated)
my.samur &lt;- samur(formula = myformula, data = lalonde
  , matched.subset = idx, nsmp = 100
  , breaks = 10, use.quantile = TRUE)
summary(my.samur, nboots = 500)

## End(Not run)
</code></pre>


</div>