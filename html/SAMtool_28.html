<div class="container">

<table style="width: 100%;"><tr>
<td>HCR_segment</td>
<td style="text-align: right;">R Documentation</td>
</tr></table>
<h2>Segmented harvest control rules</h2>

<h3>Description</h3>

<p>A linear segmented output control rule where the target F (used for the TAC recommendation)
is a function of an operational control point (OCP) such as spawning depletion or spawning biomass.
The segments of the HCR are specified by arguments <code>OCP</code> and <code>relF</code>. Beyond the range of <code>OCP</code>, the response will be flat.
HCR_ramp uses <code>HCR_segment</code> with two control points.
</p>


<h3>Usage</h3>

<pre><code class="language-R">HCR_segment(
  Assessment,
  reps = 1,
  OCP_type = c("SSB_SSB0", "SSB_SSBMSY", "SSB_dSSB0", "F_FMSY", "F_F01", "F_FSPR"),
  Ftarget_type = c("FMSY", "F01", "Fmax", "FSPR", "abs"),
  OCP = c(0.1, 0.4),
  relF = c(0, 1),
  SPR_OCP,
  SPR_targ,
  ...
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr style="vertical-align: top;">
<td><code>Assessment</code></td>
<td>
<p>An object of class Assessment with estimates of
FMSY or UMSY, vulnerable biomass, and spawning biomass depletion in terminal year.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>reps</code></td>
<td>
<p>The number of stochastic samples of the TAC recommendation.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>OCP_type</code></td>
<td>
<p>The type of operational control points (OCPs) for the harvest control rule used to determine the reduction in F.
See below.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>Ftarget_type</code></td>
<td>
<p>The type of F used for the target fishing mortality rate. See below.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>OCP</code></td>
<td>
<p>Numeric vector of operational control points for the HCR (in increasing order).</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>relF</code></td>
<td>
<p>Numeric vector of Ftarget corresponding to the values in <code>OCP</code>.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>SPR_OCP</code></td>
<td>
<p>The value of spawning potential ratio for the OCP if <code>OCP_type = "F_FSPR"</code>. By default, 0.4 (F40%).</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>SPR_targ</code></td>
<td>
<p>The target value of spawning potential ratio if <code>Ftarget_type = "FSPR"</code>. By default, 0.4 (F40%).</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>...</code></td>
<td>
<p>Miscellaneous arguments.</p>
</td>
</tr>
</table>
<h3>Details</h3>

<p>The catch advice is calculated using the catch equation of the corresponding
assessment. See <code>Assessment@forecast$catch_eq</code>, a function that returns the catch advice for a specified <code>Ftarget</code>.
</p>
<p><em>Operational control points (OCP_type)</em>
</p>
<p>The following are the available options for harvest control rule inputs, and the source of those values
in the Assessment object:
</p>

<ul>
<li> <p><strong>Default</strong> <code>"SSB_SSB0"</code>: Spawning depletion. Uses the last value in  <code>Assessment@SSB_SSB0</code> vector.
</p>
</li>
<li> <p><code>"SSB_SSBMSY"</code>: Spawning biomass relative to MSY. Uses the last value in <code>Assessment@SSB_SSBMSY</code> vector.
</p>
</li>
<li> <p><code>"SSB_dSSB0"</code>: Dynamic depletion (SSB relative to the historical reconstructed biomass with F = 0). Uses the last value in
<code>Assessment@SSB/Assessment@TMB_report$dynamic_SSB0</code>.
</p>
</li>
<li> <p><code>"F_FMSY"</code>: Fishing mortality relative to MSY. Uses the last value in <code>Assessment@F_FMSY</code>.
</p>
</li>
<li> <p><code>"F_F01"</code>: Fishing mortality relative to F_0.1 (yield per recruit), calculated from the data frame in
<code>Assessment@forecast[["per_recruit"]]</code>.
</p>
</li>
<li> <p><code>"F_FSPR"</code>: Fishing mortality relative to F_SPR% (the F that produces the spawning potential ratio specified in
<code>"SPR_OCP"</code>, calculated from the data frame in <code>Assessment@forecast[["per_recruit"]]</code>.
</p>
</li>
</ul>
<p><em>Fishing mortality target (Ftarget_type)</em>
</p>
<p>The type of F for which the corresponding catch is calculated in the HCR is specified here. The source of those values
in the Assessment object is specified:
</p>

<ul>
<li> <p><strong>Default</strong> <code>"FMSY"</code>: Fishing mortality relative to MSY. Uses the value in <code>Assessment@FMSY</code>.
</p>
</li>
<li> <p><code>"F01"</code>: Fishing mortality relative to F_0.1 (yield per recruit), calculated from the data frame in
<code>Assessment@forecast[["per_recruit"]]</code>.
</p>
</li>
<li> <p><code>"Fmax"</code>: Fishing mortality relative to F_max (maximizing yield per recruit), calculated from the data frame in
<code>Assessment@forecast[["per_recruit"]]</code>.
</p>
</li>
<li> <p><code>"FSPR"</code>: Fishing mortality relative to F_SPR% (the F that produces the spawning potential ratio specified in
<code>"SPR_targ"</code>, calculated from data frame in <code>Assessment@forecast[["per_recruit"]]</code>.
</p>
</li>
<li> <p><code>"abs"</code>: Fishing mortality is independent of any model output and is explicitly specified in <code>relF</code>.
</p>
</li>
</ul>
<h3>Value</h3>

<p>An object of class MSEtool::Rec with the TAC recommendation.
</p>


<h3>Author(s)</h3>

<p>Q. Huynh
</p>


<h3>Examples</h3>

<pre><code class="language-R"># This is an MP with a 40-10 harvest control rule (using FMSY)
DD_40_10 &lt;- make_MP(DD_TMB, HCR_segment, OCP_type = "SSB_SSB0", OCP = c(0.1, 0.4), relF = c(0, 1)) 
#' 
# This is an MP with a 40-10 harvest control rule with a maximum F of 0.1
DD_40_10 &lt;- make_MP(DD_TMB, HCR_segment, OCP_type = "SSB_SSB0", 
                    Ftarget_type = "abs", OCP = c(0.1, 0.4), relF = c(0, 0.1)) 
</code></pre>


</div>