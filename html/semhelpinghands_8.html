<div class="container">

<table style="width: 100%;"><tr>
<td>ptable_to_syntax</td>
<td style="text-align: right;">R Documentation</td>
</tr></table>
<h2>Convert a 'lavaan' Parameter
Table to a 'lavaan' Model Syntax</h2>

<h3>Description</h3>

<p>It tries to generate a
'lavaan' model syntax from a
<code>lavaan</code> parameter table.
</p>


<h3>Usage</h3>

<pre><code class="language-R">ptable_to_syntax(object, allow_incomplete = FALSE)

compare_ptables(object1, object2)
</code></pre>


<h3>Arguments</h3>

<table>
<tr style="vertical-align: top;">
<td><code>object</code></td>
<td>
<p>If set to a <code>lavaan</code>
object, such
as the output of <code>lavaan::sem()</code>
or <code>lavaan::cfa()</code>, the parameter
table will be extracted
from it by <code>lavaan::parameterTable()</code>.
If set to a parameter table, it will
be used to generate the model syntax.
It can also the output of
<code>lavaan::lavParseModelString()</code> with
<code>as.data.frame. = TRUE</code>, if
<code>allow_incomplete</code> is set to <code>TRUE</code>.
Note that <code>allow_incomplete</code> is set
to <code>FALSE</code> by default because
<code>lavaan::lavParseModelString()</code> only
parses the model syntax and there is
no guarantee that the model defined
is valid.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>allow_incomplete</code></td>
<td>
<p>Whether
incomplete parameter table formed
by <code>lavaan::lavParseModelString()</code>
with <code>as.data.frame. = TRUE</code> is
allowed. Default if <code>FALSE</code>.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>object1</code></td>
<td>
<p>The first <code>lavaan</code>
parameter table, to be compared with
<code>object2</code>. If it is set to a
<code>lavaan</code> object (e.g., the output
of <code>lavaan::sem()</code> or
<code>lavaan::cfa()</code>), then the
parameter table will be extracted
from it.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>object2</code></td>
<td>
<p>The second <code>lavaan</code>
parameter table, to be compared with
<code>object1</code>. If it is set to a
<code>lavaan</code> object (e.g., the output
of <code>lavaan::sem()</code> or
<code>lavaan::cfa()</code>), then the
parameter table will be extracted
from it.</p>
</td>
</tr>
</table>
<h3>Details</h3>

<p>This function tries to convert
a <code>lavaan</code> parameter table to a
text representation of the <code>lavaan</code>
model specified in model syntax.
</p>
<p>When users call <code>lavaan::sem()</code>,
in addition to the model syntax,
other arguments not stored in the
syntax are also used to produce
the final model (e.g.,
<code>meanstructure</code>, <code>fixed.x</code>, and
<code>std.lv</code>). To produce exactly the
same model, these arguments are also
needed to be specified, which is
difficult to generate using only
the parameter table.
</p>
<p>Therefore, the model syntax produced
will state all aspects of a model
explicitly, even for those aspects
that usually can be omitted due to
the default values of these arguments.
This approach requires users to call
<code>lavaan::lavaan()</code> directly, instead
of its wrappers (e.g, <code>lavaan::sem()</code>),
to produce the same parameter table.
</p>
<p>The model syntax produced this way
is more difficult to read. However,
it ensures that original model can
be reproduced, without the need to
know the arguments to set.
</p>
<p>Due to the nearly unlimited possibilities
in the form of a model, it is
recommended to compare the model
generated by the model syntax with
the original parameter table using
<code>compare_ptables()</code>. It
only compares the forms of the
two models, including user starting
values, if any. It does not compare
parameter estimates and standard
errors.
</p>


<h4>Raw Specification From <code>lavaan::lavParseModelString()</code>
</h4>

<p>There may be cases in which the
parameter table is the "incomplete"
table generated by <code>lavaan::lavParseModelString()</code>,
with <code>as.data.frame. = TRUE</code>.
This table is "incomplete" because
it is formed merely by parsing the
model syntax. There is no guarantee
that the model is valid.
</p>
<p>The function <code>ptable_to_syntax()</code>
has basic support for this kind
of tables but it is disabled by
default. To process an incomplete
parameter table formed by
<code>lavaan::lavParseModelString()</code>,
set <code>allow_incomplete</code> to <code>TRUE</code>.
</p>



<h4>Limitations</h4>

<p>The function <code>ptable_to_syntax()</code>
does not yet support the following
models:
</p>

<ul>
<li>
<p> Multiple-group models.
</p>
</li>
<li>
<p> Multilevel models.
</p>
</li>
<li>
<p> Models with categorical variables.
</p>
</li>
<li>
<p> Models with user-specified lower or
upper bounds.
</p>
</li>
<li>
<p> Models with the operator <code style="white-space: pre;">⁠&lt;~⁠</code>.
</p>
</li>
<li>
<p> Models with constraints imposed by
<code>equal()</code>.
</p>
</li>
<li>
<p> Models with labels having spaces.
</p>
</li>
<li>
<p> Models with labels having syntax
operators (e.g., <code>~</code>, <code style="white-space: pre;">⁠=~⁠</code>, etc.).
</p>
</li>
</ul>
<h3>Value</h3>

<p><code>ptable_to_syntax()</code> returns a
length-one character vector that stores
the generated <code>lavaan</code> model syntax.
</p>
<p><code>compare_ptables()</code> returns a
length-one logical vector. <code>TRUE</code>
if the two models are identical
in form. <code>FALSE</code> if they are
not identical.
</p>


<h3>Functions</h3>


<ul>
<li> <p><code>ptable_to_syntax()</code>: Convert
a lavaan parameter a lavaan model
syntax.
</p>
</li>
<li> <p><code>compare_ptables()</code>: Compare two lavaan parameter tables.
</p>
</li>
</ul>
<h3>Author(s)</h3>

<p>Shu Fai Cheung <a href="https://orcid.org/0000-0002-9871-9448">https://orcid.org/0000-0002-9871-9448</a>.
This function is inspired by
a discussion at the Google Group
<a href="https://groups.google.com/g/lavaan/c/1ueFiue9qLM/m/cJhxDoqeBAAJ">https://groups.google.com/g/lavaan/c/1ueFiue9qLM/m/cJhxDoqeBAAJ</a>.
</p>


<h3>See Also</h3>

<p><code>lavaan::lavaan()</code>, <code>lavaan::parameterTable()</code>
</p>


<h3>Examples</h3>

<pre><code class="language-R">
library(lavaan)

mod &lt;-
"
visual  =~ x3 + x1 + x2
textual =~ x4 + x6 + x5
speed   =~ x7 + x8 + x9 + start(0.1) * x6
visual ~ a*textual
speed ~ b*visual
ab := a * b
"

fit &lt;- sem(mod, data = HolzingerSwineford1939)

mod_chk &lt;- ptable_to_syntax(fit)
cat(mod_chk, sep = "\n")
# Need to call lavaan() directly
fit_chk &lt;- lavaan(mod_chk, data = HolzingerSwineford1939)
fit_chk
fit
# Compare the parameter table:
(ptable1 &lt;- parameterTable(fit))
(ptable2 &lt;- parameterTable(fit_chk))
compare_ptables(ptable1, ptable2)


</code></pre>


</div>