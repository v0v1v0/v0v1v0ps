<div class="container">

<table style="width: 100%;"><tr>
<td>install_sentiment.ai</td>
<td style="text-align: right;">R Documentation</td>
</tr></table>
<h2>setup</h2>

<h3>Description</h3>

<p>Install and Setup sentiment.ai package
</p>


<h3>Usage</h3>

<pre><code class="language-R">install_sentiment.ai(
  envname = "r-sentiment-ai",
  method = c("auto", "virtualenv", "conda"),
  gpu = FALSE,
  python_version = "3.8.10",
  modules = list(numpy = "1.19.5", sentencepiece = "0.1.95", tensorflow = "2.4.1",
    tensorflow_hub = "0.12.0", `tensorflow-text` = "2.4.3"),
  fresh_install = TRUE,
  restart_session = TRUE,
  ...
)

init_sentiment.ai(
  model = c("en.large", "multi.large", "en", "multi"),
  envname = "r-sentiment-ai",
  method = c("auto", "virtualenv", "conda"),
  silent = FALSE
)

check_sentiment.ai(...)
</code></pre>


<h3>Arguments</h3>

<table>
<tr style="vertical-align: top;">
<td><code>envname</code></td>
<td>
<p>The name, or full path, of the environment in which Python
packages are to be installed. When <code>NULL</code> (the default), the active
environment as set by the <code>RETICULATE_PYTHON_ENV</code> variable will be used;
if that is unset, then the <code>r-reticulate</code> environment will be used.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>method</code></td>
<td>
<p>Installation method. By default, "auto" automatically finds a
method that will work in the local environment. Change the default to
force a specific installation method. Note that the "virtualenv"
method may not available on Windows due to a tensorflow issue. Note
also that since this command runs without privilege the "system"
method is available only on Windows.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>gpu</code></td>
<td>
<p>Whether GPU should be enabled when installing TensorFlow</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>python_version</code></td>
<td>
<p>The requested Python version. Ignored when attempting
to install with a Python virtual environment.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>modules</code></td>
<td>
<p>A list of modules needed for installing tensorflow. See
details for more information. Only change this argument if you know
what you are doing!</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>fresh_install</code></td>
<td>
<p>Whether to create the Python environment prior to
installing the modules or to install everything in an existing
environment (if one exists). Only change this argument if you know what
you are doing! If the environment does not already exist, will create
the environment first.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>restart_session</code></td>
<td>
<p>Whether to restart the R session after finishing
installation. Only works on Rstudio.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>...</code></td>
<td>
<p>Additional arguments passed to <code>conda_install()</code>
or <code>virtualenv_install()</code>.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>model</code></td>
<td>
<p>path to tensorflow hub embedding model. default is both universal
sentence encoder en (default) and multi.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>silent</code></td>
<td>
<p>logical - do you want to suppress console logging? Can't affect tensorflow/GPU/python/c++ output, unfortunately.</p>
</td>
</tr>
</table>
<h3>Details</h3>

<p>Sets up environment specific for sentiment.ai. The packages that it currently
needs are as follows:</p>

<table>
<tr>
<td style="text-align: left;">
   Module </td>
<td style="text-align: center;"> Version </td>
</tr>
<tr>
<td style="text-align: left;">
   python </td>
<td style="text-align: center;"> 3.8.10 </td>
</tr>
<tr>
<td style="text-align: left;">
   numpy </td>
<td style="text-align: center;"> 1.19.5 </td>
</tr>
<tr>
<td style="text-align: left;">
   tensorflow </td>
<td style="text-align: center;"> 2.4.1 </td>
</tr>
<tr>
<td style="text-align: left;">
   tensorflow_hub </td>
<td style="text-align: center;"> 0.12.0 </td>
</tr>
<tr>
<td style="text-align: left;">
   tensorflow-text </td>
<td style="text-align: center;"> 2.4.3 </td>
</tr>
<tr>
<td style="text-align: left;">
   sentencepiece </td>
<td style="text-align: center;"> 0.1.95 </td>
</tr>
<tr>
<td style="text-align: left;">
</td>
</tr>
</table>
<p>Please do not change these unless you know what you are doing.
</p>
<p>Note that it installs with like <code>tensorflow::install_tensorflow</code> and
<code>pip = TRUE</code>
</p>


<h3>Value</h3>

<p>NULL this function simply installs the required python dependencies and default scoring models and pre-calculated embedding vectors.
</p>
<p>python function to embed text can be returned, but is not necessary.
<code>embed_text()</code> does this for you.
</p>
<p>NULL this function checks if <code>init_sentiment.ai()</code> has been called
successfully, if not, it is called.
</p>


<h3>Note</h3>

<p>Setting environments with <code>reticulate</code> is notoriously difficult. If the
RETICULATE_PYTHON environment is set, then reticulate will not let you change
the Python binary used (or the Python environment) using <code>use_condaenv</code>
<strong>or</strong> <code>use_virtualenv</code>. This environment can be accidentally set in
the following ways:
</p>

<ol>
<li>
<p> If RETICULATE_PYTHON is in your .Renviron file or bash/zsh rc files. This is
the most obvious place that this environment will be set.
</p>
</li>
<li>
<p> Using Project Options or Global Options under "Python&gt;Python Interpreter".
If this is set, then reticulate will almost always use this version of Python
and will not let you change.
</p>
</li>
<li>
<p> If you have already loaded reticulate and have run <code>py_config</code>. Once a Python
version/environment is instantiated, you will not be able to change it and
will have to restart R.
</p>
</li>
<li>
<p> If you are in <strong>any</strong> project, at all! Currently (as of <code>reticulate</code> version
1.22), every project automatically sets the RETICULATE_PYTHON environment
variable, either through the Global or Project Options or by using heuristics.
If you are in an RStudio project, you <strong>must</strong> update Global/Project Options
with the specific version/environment of Python that you want to use, or
you will not be able to change it!
</p>
</li>
</ol>
<p>Manually setting the environment variable to NULL (using
<code>Sys.unsetenv("RETICULATE_PYTHON")</code>, updating your Project/Global options going
Tools&gt;Project Options or Tools&gt;Global Options and then select Python in the
left menu bar and click the "Select" button to manually set the Python
interpreter, and/or restarting your R session <strong>might</strong> fix the problem.
</p>
<p>We know this is a pain, and we would like to fix this for you, but we are
dependent on the RStudio/reticulate team to update how they determine the
allowable Python versions/environments.
</p>


<h3>Examples</h3>

<pre><code class="language-R">## Not run: 
install_sentiment.ai(envname = "r-sentiment-ai",
                     method  = "conda",
                     python_version = "3.8.10")
init_sentiment.ai(model   = "en.large",
                  envname = "r-sentiment-ai")
check_sentiment.ai()

# if you run into an issue, follow the instructions/see the note and retry!

## End(Not run)
</code></pre>


</div>