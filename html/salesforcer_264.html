<div class="container">

<table style="width: 100%;"><tr>
<td>sf_update_attachment</td>
<td style="text-align: right;">R Documentation</td>
</tr></table>
<h2>Update Attachments</h2>

<h3>Description</h3>

<p><a href="https://lifecycle.r-lib.org/articles/stages.html#experimental"><img src="../help/figures/lifecycle-experimental.svg" alt="[Experimental]"></a>
</p>
<p>This function will allow you to update attachments (and other blob data, such as
Documents) by providing the Id of the attachment record and the file paths
(absolute or relative) to media that you would like to upload to Salesforce
along with other supported metadata for this operation (<code>Name</code>,
<code>Body</code>, <code>IsPrivate</code>, and <code>OwnerId</code>).
</p>


<h3>Usage</h3>

<pre><code class="language-R">sf_update_attachment(
  attachment_input_data,
  object_name = c("Attachment"),
  api_type = c("SOAP", "REST", "Bulk 1.0", "Bulk 2.0"),
  control = list(...),
  ...,
  verbose = FALSE
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr style="vertical-align: top;">
<td><code>attachment_input_data</code></td>
<td>
<p><code>named vector</code>, <code>matrix</code>,
<code>data.frame</code>, or <code>tbl_df</code>; data can be coerced into a
<code>data.frame</code>. The input must contain a column entitled 'Body' with an
absolute or relative file path (unless creating a Document using a Url)
along with other required fields depending on the object.If performing an
<code>update</code> operation, then one column or field of the input must be
the <code>Id</code> of the record to modify.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>object_name</code></td>
<td>
<p><code>character</code>; the name of the Salesforce object that the
function is operating against (e.g. "Account", "Contact", "CustomObject__c").</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>api_type</code></td>
<td>
<p><code>character</code>; one of <code>"REST"</code>, <code>"SOAP"</code>,
<code>"Bulk 1.0"</code>, or <code>"Bulk 2.0"</code> indicating which API to use when
making the request.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>control</code></td>
<td>
<p><code>list</code>; a list of parameters for controlling the behavior of
the API call being used. For more information of what parameters are available
look at the documentation for <code>sf_control</code>.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>...</code></td>
<td>
<p>arguments passed to <code>sf_control</code> or further downstream
to <code>sf_bulk_operation</code></p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>verbose</code></td>
<td>
<p><code>logical</code>; an indicator of whether to print additional
detail for each API call, which is useful for debugging. More specifically, when
set to <code>TRUE</code> the URL, header, and body will be printed for each request,
along with additional diagnostic information where available.</p>
</td>
</tr>
</table>
<h3>Value</h3>

<p><code>tbl_df</code> with details of the created records
</p>


<h3>Salesforce Documentation</h3>


<ul>
<li> <p><a href="https://developer.salesforce.com/docs/atlas.en-us.api.meta/api/sforce_api_objects_attachment.htm">Attachment Object (SOAP)</a>
</p>
</li>
<li> <p><a href="https://developer.salesforce.com/docs/atlas.en-us.api.meta/api/sforce_api_objects_document.htm">Document Object (SOAP)</a>
</p>
</li>
<li> <p><a href="https://developer.salesforce.com/docs/atlas.en-us.api_rest.meta/api_rest/dome_sobject_insert_update_blob.htm">Insert or Update Blob Data</a>
</p>
</li>
</ul>
<h3>Note</h3>

<p>The length of any file name can’t exceed 512 bytes (per Bulk 1.0 API).
The SOAP API create call restricts these files to a maximum size of 25 MB. For a file
attached to a Solution, the limit is 1.5 MB. The maximum email attachment size is 3 MB.
You can only create or update documents to a maximum size of 5 MB. The REST API
allows you to insert or update blob data limited to 50 MB of text data or 37.5 MB
of base64–encoded data.
</p>


<h3>See Also</h3>

<p>Other Attachment functions: 
<code>check_and_encode_files()</code>,
<code>sf_create_attachment()</code>,
<code>sf_delete_attachment()</code>,
<code>sf_download_attachment()</code>
</p>


<h3>Examples</h3>

<pre><code class="language-R">## Not run: 
# upload a PDF to a particular record as an Attachment
file_path &lt;- system.file("extdata",
                         "data-wrangling-cheatsheet.pdf",
                         package = "salesforcer")
parent_record_id &lt;- "0036A000002C6MmQAK" # replace with your own ParentId!
attachment_details &lt;- tibble(Body = file_path, ParentId = parent_record_id)
create_result &lt;- sf_create_attachment(attachment_details)

# download, zip, and re-upload the PDF
pdf_path &lt;- sf_download_attachment(sf_id = create_result$id[1])
zipped_path &lt;- paste0(pdf_path, ".zip")
zip(zipped_path, pdf_path)
attachment_details &lt;- tibble(Id = create_result$id, Body = zipped_path)
update_result &lt;- sf_update_attachment(attachment_details)

## End(Not run)
</code></pre>


</div>