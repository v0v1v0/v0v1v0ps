<div class="container">

<table style="width: 100%;"><tr>
<td>edhw</td>
<td style="text-align: right;">R Documentation</td>
</tr></table>
<h2>
Wrapper function for manipulation of the EDH dataset
</h2>

<h3>Description</h3>

<p>A function to obtain variable data and perform transformations on the <code>EDH</code> dataset.
</p>


<h3>Usage</h3>

<pre><code class="language-R">edhw(x = "EDH", vars, as = c("df", "list"), type = c("long", "wide", "narrow"), 
     split, select, addID, limit, id, na.rm, ldf, province, gender, rp, ...)
</code></pre>


<h3>Arguments</h3>

<table>
<tr style="vertical-align: top;">
<td><code>x</code></td>
<td>

<p>a list object name with fragments of the <code>EDH</code> dataset (optional)
</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>vars</code></td>
<td>

<p>vector of variables of interest from <code>x</code>; if <code>x=NULL</code>, the entire <code>EDH</code> dataset is taken (optional)
</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>as</code></td>
<td>

<p>format to return the output; either as a <code>"list"</code> or a data frame <code>"df"</code> object.
</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>type</code></td>
<td>

<p>type format of data frame; either <code>"long"</code> or <code>"wide"</code> (<code>"narrow"</code> not yet implemented)
</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>split</code></td>
<td>

<p>divide the data into groups by id? (optional and logical)
</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>select</code></td>
<td>

<p>vector with <code>"people"</code> variables (optional)
</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>addID</code></td>
<td>

<p>add identification to the output? (optional and logical)
</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>limit</code></td>
<td>

<p>integer or vector to limit the returned output. Ignored if <code>id</code> is specified (optional)
</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>id</code></td>
<td>

<p>select only <code>hd_nr</code> records (optional, integer or character)
</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>na.rm</code></td>
<td>

<p>remove entries with NA data? (optional and logical)
</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>ldf</code></td>
<td>

<p>is <code>x</code> list of data frames? (optional and logical)
</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>province</code></td>
<td>

<p>name or abbreviation of Roman province in <code>EDH</code> as in <code>rp</code> dataset
</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>gender</code></td>
<td>

<p>gender of people in <code>EDH</code>: <code>male</code> or <code>female</code>
</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>rp</code></td>
<td>

<p>customized list of Roman provinces as in <code>rp</code> dataset
</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>...</code></td>
<td>

<p>optional arguments if needed.
</p>
</td>
</tr>
</table>
<h3>Details</h3>

<p>This is an interface to extract attribute variables from the <code>EDH</code> dataset attached to this package either as a built-in dataset or as external data. 
EDH dataset is a built-in data set of Latin epigraphy retrieved from the Epigraphic Database Heidelberg API repository where epigraphs or inscriptions 
in this dataset are recorded in a list object of 84701 items (until 10-11-2020) with at least one of the following 47 (or more) attribute names in the list:
</p>
<p><code>"ID"</code>, <code>"commentary"</code>, <code>"fotos"</code>, <code>"country"</code>, 
<code>"depth"</code>, <code>"diplomatic_text"</code>, <code>"edh_geography_uri"</code>, <code>"findspot"</code>, 
<code>"findspot_ancient"</code>, <code>"findspot_modern"</code>, <code>"geography"</code>, <code>"height"</code>, <code>"id"</code>, 
<code>"language"</code>, <code>"last_update"</code>, <code>"letter_size"</code>, <code>"literature"</code>, 
<code>"material"</code>, <code>"military"</code>, <code>"modern_region"</code>, <code>"not_after"</code>, 
<code>"not_before"</code>, <code>"people"</code> (which is a list with: <code>"person_id"</code>, <code>"nomen"</code>, <code>"cognomen"</code>, 
<code>"praenomen"</code>, <code>"name"</code>, <code>"gender"</code>, <code>"status"</code>, <code>"tribus"</code>, 
<code>"origo"</code>, <code>"occupation"</code>, <code>"age: years"</code>, <code>"age: months"</code>, <code>"age: days"</code>), 
<code>"present_location"</code>, <code>"province_label"</code>, <code>"religion"</code>,  <br><code>"responsible_individual"</code>, 
<code>"social_economic_legal_history"</code>, <code>"transcription"</code>, <br><code>"trismegistos_uri"</code>, 
<code>"type_of_inscription"</code>, <code>"type_of_monument"</code>, <code>"uri"</code>, <code>"width"</code>, <br><code>"work_status"</code>, and <code>"year_of_find"</code>. 
</p>
<p>The input in <code>x</code>, however, can be fragments of the <code>EDH</code> dataset or from 
the Epigraphic Database Heidelberg API obtained by functions <code>get.edh</code> or <code>get.edhw</code>
with the "<code>rjson</code>" format, or transformed data organized, for example, by provinces. 
When <code>x</code> is explicit, it must be at least a list object with a comparable structure to the <code>EDH</code> dataset. 
Argument <code>ldf</code> is a flag when the input in <code>x</code> is a created list of data frames that are 
organised by variables rather than by records as in the <code>EDH</code> dataset. 
The return of the output is either <code>as</code> a list with <code>list</code> or by default as a data frame with option <code>df</code>.
</p>
<p>The extraction from <code>EDH</code> is typically through argument <code>vars</code> in the function, and in case that <code>vars</code> is missing, then it takes all entries in <code>x</code>. 
Ad hoc arguments are the <code>EDH</code> entries <code>province</code> and <code>gender</code> for entering a Roman province 
and people's gender in <code>x</code> as a data frame; otherwise, these arguments are ignored. 
When <code>province</code> is used, it is possible to refer to a customized list of provinces with argument "<code>rp</code>"; 
otherwise, dataset <code>rp</code> is the default where names and abbreviations are accepted. 
</p>
<p>By default, this wrapper returns a list object with or without a numerical ‘ID’ identification provided by the <code>addID</code> argument. 
When the output is a data frame, the ordering of the variables is alphabetically and, if desired, it is possible to remove missing data 
from the output by activating <code>na.rm</code> and work with complete cases.
</p>
<p>Arguments <code>id</code> and <code>limit</code> serve to reduce the returned output either to some Epigraphic Database number or to numbers, 
which are specified by <code>hd_nr</code>, or else by limiting the amount of the returned output. 
<code>limit</code> here is like the <code>limit</code> argument of function <code>get.edh</code>, but in 
this case the offset can be specified as a sequence. 
While <code>limit</code> is a faster way to get to entries in the <code>EDH</code> dataset, argument <code>id</code> is for 
referring to precisely one or more <code>hd_nr</code>s in the Epigraphic Database Heidelberg API.
</p>
<p>Component <code>"people"</code> is a separated list in the <code>EDH</code> dataset, and it should be considered as 
a separate case from the rest of the variables. 
In the case that the output is a data frame, the default output is a ‘long’ <code>type</code> table; that is records can 
appear in different rows and each variable is assigned into a single column, and with this option is possible to 
<code>select</code> <code>"people"</code> variables like gender and origin. 
When choosing people variables with <code>select</code> and a data frame output, then <code>"people"</code> attribute must be in <code>vars</code>.
</p>
<p>By setting <code>"wide"</code> in <code>type</code>, it is possible to place the different people from a single entry 
column by column in the data frame and each record has a single row. Finally, argument <code>split</code> allows for 
dividing the data in the data frame into groups by ‘id’, which corresponds to the HD number of inscription 
in the <code>EDH</code> dataset. 
</p>


<h3>Value</h3>

<p>A list or a data frame with a long or wide format, depending on the input arguments. 
</p>
<p>Argument <code>province</code> with no <code>vars</code> returns a list of lists.
</p>


<h3>Warning </h3>

<p><code>EDH</code> is a built-in dataset in the development and legacy version of the package but, 
because of its size, re not part of the CRAN distribution. Functions <code>edhw</code> and <code>edhwpd</code> 
download <code>EDH</code> from another repository in References. 
</p>


<h3>Note</h3>

<p><code>Warning</code> messages are given for the <code>EDH</code> dataset as the input, and when choosing 
the <code>province</code> argument alone. 
</p>


<h3>Author(s)</h3>

<p>Antonio Rivero Ostoic
</p>


<h3>References</h3>

<p><em>Epigraphic Database Heidelberg – Data Reuse Options</em>, (Online; retrieved on 16 June 2019). URL https://edh-www.adw.uni-heidelberg.de/data
</p>
<p>https://edh-www.adw.uni-heidelberg.de/data/api (database retrieved on November 2020)
</p>
<p>https://github.com/sdam-au/sdam/tree/master/data
</p>
<p>https://github.com/mplex/cedhar/tree/master/pkg/sdam/data
</p>


<h3>See Also</h3>

<p><code>get.edh</code>, <code>get.edhw</code>, <code>rp</code>, <code>edhwpd</code>, <code>prex</code>, 
<code>plot.dates</code>, <code>cln</code>, <code>rjson</code>
</p>


<h3>Examples</h3>

<pre><code class="language-R">## Not run: 
# load dataset
data(EDH)

# make a list for three variables in 'EDH' for first 4 entries
edhw(vars=c("type_of_inscription", "not_after", "not_before"), limit=4 )

# as before, but also select 'gender' from 'people'
edhw(vars=c("people", "not_after", "not_before"), select="gender", limit=4 )
## End(Not run)
</code></pre>


</div>