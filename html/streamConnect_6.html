<div class="container">

<table style="width: 100%;"><tr>
<td>publish_DSD_via_Socket</td>
<td style="text-align: right;">R Documentation</td>
</tr></table>
<h2>Publish a Data Stream using a Socket</h2>

<h3>Description</h3>

<p>Creates a socket server connection to send steam data.
</p>


<h3>Usage</h3>

<pre><code class="language-R">publish_DSD_via_Socket(dsd, port, blocksize = 1024L, background = TRUE, ...)
</code></pre>


<h3>Arguments</h3>

<table>
<tr style="vertical-align: top;">
<td><code>dsd</code></td>
<td>
<p>A DSD object.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>port</code></td>
<td>
<p>port used to serve the DSD.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>blocksize</code></td>
<td>
<p>number of data points pushed on the buffer at once.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>background</code></td>
<td>
<p>logical; start a background process?</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>...</code></td>
<td>
<p>further arguments are passed on to <code>socketConnection()</code>.</p>
</td>
</tr>
</table>
<h3>Details</h3>

<p>Creates a server socket with <code>socketConnection()</code>
and then uses a <code>stream::write_stream()</code> to write data to a socket connection.
This method does not provide a header for the data.
</p>


<h3>Value</h3>

<p>a processx::process object created with <code>callr::r_bg()</code> which runs the plumber server
in the background. The process can be stopped with <code>rp$kill()</code> or by killing the process
using the operating system with the appropriate PID. <code>rp$get_result()</code> can
be used to check for errors in the server process (e.g., when it terminates
unexpectedly).
</p>


<h3>See Also</h3>

<p>Other Socket: 
<code>DSD_ReadSocket()</code>
</p>
<p>Other dsd: 
<code>DSD_ReadSocket()</code>,
<code>DSD_ReadWebService()</code>,
<code>publish_DSD_via_WebService()</code>
</p>


<h3>Examples</h3>

<pre><code class="language-R"># find a free port
port &lt;- httpuv::randomPort()
port

# create a background DSD process sending data to the port
rp1 &lt;- DSD_Gaussians(k = 3, d = 3) %&gt;% publish_DSD_via_Socket(port = port)
rp1

# connect to the port (retry waits for the socket to establish)
con &lt;- retry(socketConnection(port = port, open = 'r'))
dsd &lt;- retry(DSD_ReadStream(con, col.names = c("x", "y", "z", ".class")))

get_points(dsd, n = 10)

plot(dsd)

# close connection
close_stream(dsd)

# end the DSD process. Note: that closing the connection above
# may already kill the process.
rp1$kill()
rp1
</code></pre>


</div>