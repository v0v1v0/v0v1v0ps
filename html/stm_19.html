<div class="container">

<table style="width: 100%;"><tr>
<td>textProcessor</td>
<td style="text-align: right;">R Documentation</td>
</tr></table>
<h2>Process a vector of raw texts</h2>

<h3>Description</h3>

<p>Function that takes in a vector of raw texts (in a variety of languages) and
performs basic operations.  This function is essentially a wrapper <span class="pkg">tm</span>
package where various user specified options can be selected.
</p>


<h3>Usage</h3>

<pre><code class="language-R">textProcessor(
  documents,
  metadata = NULL,
  lowercase = TRUE,
  removestopwords = TRUE,
  removenumbers = TRUE,
  removepunctuation = TRUE,
  ucp = FALSE,
  stem = TRUE,
  wordLengths = c(3, Inf),
  sparselevel = 1,
  language = "en",
  verbose = TRUE,
  onlycharacter = FALSE,
  striphtml = FALSE,
  customstopwords = NULL,
  custompunctuation = NULL,
  v1 = FALSE
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr style="vertical-align: top;">
<td><code>documents</code></td>
<td>
<p>The documents to be processed.  A character vector where
each entry is the full text of a document (if passed as a different type
it will attempt to convert to a character vector).</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>metadata</code></td>
<td>
<p>Additional data about the documents.  Specifically a
<code>data.frame</code> or <code>matrix</code> object with number of rows equal to the
number of documents and one column per meta-data type. The column names are
used to label the metadata.  The metadata do not affect the text processing,
but providing the metadata object insures that if documents are dropped the
corresponding metadata rows are dropped as well.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>lowercase</code></td>
<td>
<p>Whether all words should be converted to lower case.
Defaults to TRUE.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>removestopwords</code></td>
<td>
<p>Whether stop words should be removed using the SMART
stopword list (in English) or the snowball stopword lists (for all other
languages). Defaults to TRUE.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>removenumbers</code></td>
<td>
<p>Whether numbers should be removed. Defaults to TRUE.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>removepunctuation</code></td>
<td>
<p>whether punctuation should be removed.  Defaults to
TRUE.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>ucp</code></td>
<td>
<p>When TRUE passes <code>ucp=TRUE</code> to <code>tm::removePunctuation</code> which
removes a more general set of punctuation (the Unicode general category P).  Defaults
to <code>FALSE</code>.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>stem</code></td>
<td>
<p>Whether or not to stem words. Defaults to TRUE</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>wordLengths</code></td>
<td>
<p>From the <span class="pkg">tm</span> package. An integer vector of length 2.
Words shorter than the minimum word length <code>wordLengths[1]</code> or longer
than the maximum word length <code>wordLengths[2]</code> are discarded. Defaults
to <code>c(3, Inf)</code>, i.e., a minimum word length of 3 characters.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>sparselevel</code></td>
<td>
<p>Removes terms where at least sparselevel proportion of
the entries are 0. Defaults to 1 which effectively turns the feature off.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>language</code></td>
<td>
<p>Language used for processing. Defaults to English. <code>tm</code>
uses the <code>SnowballC</code> stemmer which as of version 0.5 supports "danish
dutch english finnish french german hungarian italian norwegian portuguese
romanian russian spanish swedish turkish".  These can be specified as any on
of the above strings or by the three-letter ISO-639 codes.  You can also set
language to "na" if you want to leave it deliberately unspecified (see
documentation in <code>tm</code>) Note that languages listed here may not all have 
accompanying stopwords.  However if you have your own stopword list you can use
customstopwords below.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>verbose</code></td>
<td>
<p>If true prints information as it processes.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>onlycharacter</code></td>
<td>
<p>When TRUE, runs a regular expression substitution to
replace all non-alphanumeric characters. These characters can crash
textProcessor for some operating systems.  May remove foreign characters
depending on encoding. Defaults to FALSE.  Defaults to FALSE. Runs before
call to tm package.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>striphtml</code></td>
<td>
<p>When TRUE, runs a regular expression substitution to strip
html contained within &lt;&gt;.  Defaults to FALSE. Runs before call to tm
package.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>customstopwords</code></td>
<td>
<p>A character vector containing words to be removed.
Defaults to NULL which does not remove any additional words.  This function
is primarily for easy removal of application specific stopwords.  Note that
as with standard stopwords these are removed after converting everything to
lower case but before removing numbers, punctuation or stemming.  Thus words
to be removed should be all lower case but otherwise complete.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>custompunctuation</code></td>
<td>
<p>A character vector containing any characters to be
removed immediately after standard punctuation removal. This function exists 
primarily for easy removal of application specific punctuation not caught by
the punctuation filter (although see also the <code>ucp</code> argument to turn on
a stronger punctuation filter). This can in theory be used to remove any 
characters you don't want in the text for some reason. In practice what this
function does is collapse the character vector to one string and put square
brackets around it in order to make a pattern that can be matched and replaced
with <code>gsub</code> at the punctuation removal stage.  If the <code>custompunctuation</code>
vector is length 1 and the first element is a left square bracket, the function
assumes that you have passed a regular expression and passes that directly
along to <code>gsub</code>.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>v1</code></td>
<td>
<p>A logical which defaults to <code>FALSE</code>.  If set to <code>TRUE</code> it
will use the ordering of operations we used in Version 1.0 of the package.</p>
</td>
</tr>
</table>
<h3>Details</h3>

<p>This function is designed to provide a convenient and quick way to process a
relatively small volume texts for analysis with the package. It is designed
to quickly ingest data in a simple form like a spreadsheet where each
document sits in a single cell. If you have texts more complicated than a 
spreadsheet, we recommend you check out the excellent <span class="pkg">readtext</span> package. 
</p>
<p>The processor always strips extra white space but all other processing
options are optional.  Stemming uses the snowball stemmers and supports a
wide variety of languages.  Words in the vocabulary can be dropped due to
sparsity and stop word removal.  If a document no longer contains any words
it is dropped from the output.  Specifying meta-data is a convenient way to
make sure the appropriate rows are dropped from the corresponding metadata
file.
</p>
<p>When the option <code>sparseLevel</code> is set to a number other than 1,
infrequently appearing words are removed.  When a term is removed from the
vocabulary a message will print to the screen (as long as <code>verbose</code> has
not been set to <code>FALSE</code>).  The message indicates the number of terms
removed (that is, the number of vocabulary entries) as well as the number of
tokens removed (appearances of individual words).  The function
<code>prepDocuments</code> provides additional methods to prune infrequent
words.  In general the functionality there should be preferred.
</p>
<p>We emphasize that this function is a convenience wrapper around the
excellent <span class="pkg">tm</span> package functionality without which it wouldn't be
possible.
</p>


<h3>Value</h3>

<table>
<tr style="vertical-align: top;">
<td><code>documents</code></td>
<td>
<p>A list containing the documents in the stm format.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>vocab </code></td>
<td>
<p>Character vector of vocabulary.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>meta</code></td>
<td>
<p>Data frame or
matrix containing the user-supplied metadata for the retained documents.</p>
</td>
</tr>
</table>
<h3>References</h3>

<p>Ingo Feinerer and Kurt Hornik (2013). tm: Text Mining Package. R
package version 0.5-9.1.
</p>
<p>Ingo Feinerer, Kurt Hornik, and David Meyer (2008). Text Mining
Infrastructure in R. <em>Journal of Statistical Software</em> 25(5): 1-54.
</p>


<h3>See Also</h3>

<p><code>readCorpus</code>
</p>


<h3>Examples</h3>

<pre><code class="language-R">


head(gadarian)
#Process the data for analysis.
temp&lt;-textProcessor(documents=gadarian$open.ended.response,metadata=gadarian)
meta&lt;-temp$meta
vocab&lt;-temp$vocab
docs&lt;-temp$documents
out &lt;- prepDocuments(docs, vocab, meta)
docs&lt;-out$documents
vocab&lt;-out$vocab
meta &lt;-out$meta


#Example of custom punctuation removal.
docs &lt;- c("co.rr?ec!t")
textProcessor(docs,custompunctuation=c(".","?","!"),
              removepunctuation = FALSE)$vocab
#note that the above should now say "correct"
 
</code></pre>


</div>