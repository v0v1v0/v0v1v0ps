<div class="container">

<table style="width: 100%;"><tr>
<td>designSafeZ</td>
<td style="text-align: right;">R Documentation</td>
</tr></table>
<h2>Designs a Safe Z Experiment</h2>

<h3>Description</h3>

<p>A designed experiment requires (1) a sample size nPlan to plan for, and (2) the parameter of the safe test, i.e.,
phiS. Provided with a clinically relevant minimal mean difference meanDiffMin, this function outputs
phiS = meanDiffMin as the safe test defining parameter in accordance to the GROW criterion.
If a tolerable type II error, i.e., beta, is provided then nPlan can be sampled. The sampled nPlan is then
the smallest nPlan for which meanDiffMin can be found with power at least 1 - beta under optional stopping.
</p>


<h3>Usage</h3>

<pre><code class="language-R">designSafeZ(
  meanDiffMin = NULL,
  beta = NULL,
  nPlan = NULL,
  alpha = 0.05,
  h0 = 0,
  alternative = c("twoSided", "greater", "less"),
  sigma = 1,
  kappa = sigma,
  tol = 1e-05,
  testType = c("oneSample", "paired", "twoSample"),
  ratio = 1,
  parameter = NULL,
  nSim = 1000L,
  nBoot = 1000L,
  pb = TRUE,
  grow = TRUE,
  ...
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr style="vertical-align: top;">
<td><code>meanDiffMin</code></td>
<td>
<p>numeric that defines the minimal relevant mean difference, the smallest population mean
that we would like to detect.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>beta</code></td>
<td>
<p>numeric in (0, 1) that specifies the tolerable type II error control necessary to calculate both "n"
and "phiS". Note that 1-beta defines the power.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>nPlan</code></td>
<td>
<p>optional numeric vector of length at most 2. When provided, it is used to find the safe test
defining parameter phiS. Note that if the purpose is to plan based on nPlan alone, then both meanDiffMin
and beta should be set to NULL.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>alpha</code></td>
<td>
<p>numeric in (0, 1) that specifies the tolerable type I error control –independent on n– that the
designed test has to adhere to. Note that it also defines the rejection rule e10 &gt; 1/alpha.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>h0</code></td>
<td>
<p>numeric, represents the null hypothesis, default h0=0.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>alternative</code></td>
<td>
<p>a character string specifying the alternative hypothesis must be one of "twoSided" (default),
"greater" or "less".</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>sigma</code></td>
<td>
<p>numeric &gt; 0 representing the assumed population standard deviation used for the test.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>kappa</code></td>
<td>
<p>the true population standard deviation. Default kappa=sigma.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>tol</code></td>
<td>
<p>a number that defines the stepsizes between the lowParam and highParam.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>testType</code></td>
<td>
<p>either one of "oneSample", "paired", "twoSample".</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>ratio</code></td>
<td>
<p>numeric &gt; 0 representing the randomisation ratio of condition 2 over condition 1. If testType
is not equal to "twoSample", or if nPlan is of length(1) then ratio=1.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>parameter</code></td>
<td>
<p>optional test defining parameter. Default set to <code>NULL</code>.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>nSim</code></td>
<td>
<p>integer &gt; 0, the number of simulations needed to compute power or the number of samples paths
for the safe z test under continuous monitoring.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>nBoot</code></td>
<td>
<p>integer &gt; 0 representing the number of bootstrap samples to assess the accuracy of
approximation of the power, the number of samples for the safe z test under continuous monitoring,
or for the computation of the logarithm of the implied target.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>pb</code></td>
<td>
<p>logical, if <code>TRUE</code>, then show progress bar.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>grow</code></td>
<td>
<p>logical, default set to <code>TRUE</code> so the grow safe test is used in the design.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>...</code></td>
<td>
<p>further arguments to be passed to or from methods.</p>
</td>
</tr>
</table>
<h3>Value</h3>

<p>Returns a safeDesign object that includes:
</p>

<dl>
<dt>nPlan</dt>
<dd>
<p>the sample size(s) to plan for. Computed based on beta and meanDiffMin, or provided by the user
if known.</p>
</dd>
<dt>parameter</dt>
<dd>
<p>the safe test defining parameter. Here phiS.</p>
</dd>
<dt>esMin</dt>
<dd>
<p>the minimally clinically relevant effect size provided by the user.</p>
</dd>
<dt>alpha</dt>
<dd>
<p>the tolerable type I error provided by the user.</p>
</dd>
<dt>beta</dt>
<dd>
<p>the tolerable type II error specified by the user.</p>
</dd>
<dt>alternative</dt>
<dd>
<p>any of "twoSided", "greater", "less" provided by the user.</p>
</dd>
<dt>testType</dt>
<dd>
<p>any of "oneSample", "paired", "twoSample" effectively provided by the user.</p>
</dd>
<dt>paired</dt>
<dd>
<p>logical, <code>TRUE</code> if "paired", <code>FALSE</code> otherwise.</p>
</dd>
<dt>sigma</dt>
<dd>
<p>the assumed population standard deviation used for the test provided by the user.</p>
</dd>
<dt>kappa</dt>
<dd>
<p>the true population standard deviation, typically, sigma=kappa.</p>
</dd>
<dt>ratio</dt>
<dd>
<p>default is 1. Different from 1, whenever testType equals "twoSample", then it defines
ratio between the planned randomisation of condition 2 over condition 1.</p>
</dd>
<dt>tol</dt>
<dd>
<p>the step size between parameter values in the candidate space.</p>
</dd>
<dt>pilot</dt>
<dd>
<p>logical, specifying whether it's a pilot design.</p>
</dd>
<dt>call</dt>
<dd>
<p>the expression with which this function is called.</p>
</dd>
</dl>
<h3>References</h3>

<p>Grunwald, de Heide and Koolen (2019) "Safe Testing" &lt;arXiv:1906.07801&gt;
</p>


<h3>Examples</h3>

<pre><code class="language-R">designObj &lt;- designSafeZ(meanDiffMin=0.8, alpha=0.08, beta=0.01, alternative="greater")

#nPlan known:
designObj &lt;- designSafeZ(nPlan = 100, alpha=0.05)

</code></pre>


</div>