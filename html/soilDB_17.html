<div class="container">

<table style="width: 100%;"><tr>
<td>fetchOSD</td>
<td style="text-align: right;">R Documentation</td>
</tr></table>
<h2>Get Official Series Descriptions and summaries from SoilWeb API</h2>

<h3>Description</h3>

<p>This function fetches a variety of data associated with named soil series, extracted from the USDA-NRCS Official Series Description text files and detailed soil survey (SSURGO). These data are updated quarterly and made available via SoilWeb. Set <code>extended = TRUE</code> and see the <code>soilweb.metadata</code> list element for information on when the source data were last updated.
</p>


<h3>Usage</h3>

<pre><code class="language-R">fetchOSD(soils, colorState = "moist", extended = FALSE)
</code></pre>


<h3>Arguments</h3>

<table>
<tr style="vertical-align: top;">
<td><code>soils</code></td>
<td>
<p>a character vector of named soil series; case-insensitive</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>colorState</code></td>
<td>
<p>color state for horizon soil color visualization: "moist" or "dry"</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>extended</code></td>
<td>
<p>if <code>TRUE</code> additional soil series summary data are returned, see details</p>
</td>
</tr>
</table>
<h3>Details</h3>



<ul>
<li>
<p><a href="https://ncss-tech.github.io/AQP/soilDB/soil-series-query-functions.html">overview of all soil series query functions</a>
</p>
</li>
<li>
<p><a href="https://ncss-tech.github.io/AQP/soilDB/competing-series.html">competing soil series</a>
</p>
</li>
<li>
<p><a href="https://ncss-tech.github.io/AQP/soilDB/siblings.html">siblings</a>
</p>
</li>
</ul>
<p>The standard set of "site" and "horizon" data are returned as a <code>SoilProfileCollection</code> object (<code>extended = FALSE</code>). The "extended" suite of summary data can be requested by setting <code>extended = TRUE</code>. The resulting object will be a <code>list</code> with the following elements:
</p>

<dl>
<dt>SPC</dt>
<dd>
<p><code>SoilProfileCollection</code> containing standards "site" and "horizon" data</p>
</dd>
<dt>competing</dt>
<dd>
<p>competing soil series from the SC database snapshot</p>
</dd>
<dt>geog_assoc_soils</dt>
<dd>
<p>geographically associated soils, extracted from named section in the OSD</p>
</dd>
<dt>geomcomp</dt>
<dd>
<p>empirical probabilities for geomorphic component, derived from the current SSURGO snapshot</p>
</dd>
<dt>hillpos</dt>
<dd>
<p>empirical probabilities for hillslope position, derived from the current SSURGO snapshot</p>
</dd>
<dt>mtnpos</dt>
<dd>
<p>empirical probabilities for mountain slope position, derived from the current SSURGO snapshot</p>
</dd>
<dt>terrace</dt>
<dd>
<p>empirical probabilities for river terrace position, derived from the current SSURGO snapshot</p>
</dd>
<dt>flats</dt>
<dd>
<p>empirical probabilities for flat landscapes, derived from the current SSURGO snapshot</p>
</dd>
<dt>shape_across</dt>
<dd>
<p>empirical probabilities for surface shape (across-slope) from the current SSURGO snapshot</p>
</dd>
<dt>shape_down</dt>
<dd>
<p>empirical probabilities for surface shape (down-slope) from the current SSURGO snapshot</p>
</dd>
<dt>pmkind</dt>
<dd>
<p>empirical probabilities for parent material kind, derived from the current SSURGO snapshot</p>
</dd>
<dt>pmorigin</dt>
<dd>
<p>empirical probabilities for parent material origin, derived from the current SSURGO snapshot</p>
</dd>
<dt>mlra</dt>
<dd>
<p>empirical MLRA membership values, derived from the current SSURGO snapshot</p>
</dd>
<dt>ecoclassid</dt>
<dd>
<p>area cross-tabulation of ecoclassid by soil series name, derived from the current SSURGO snapshot, major components only</p>
</dd>
<dt>climate</dt>
<dd>
<p>climate summaries from PRISM stack (CONUS only)</p>
</dd>
<dt>NCCPI</dt>
<dd>
<p>select quantiles of NCCPI and Irrigated NCCPI, derived from the current SSURGO snapshot</p>
</dd>
<dt>metadata</dt>
<dd>
<p>metadata associated with SoilWeb cached summaries</p>
</dd>
</dl>
<p>When using <code>extended = TRUE</code>, there are a couple of scenarios in which series morphology contained in <code>SPC</code> do not fully match records in the associated series summary tables (e.g. <code>competing</code>).
</p>

<dl>
<dt>1. A query for soil series that exist entirely outside of CONUS (e.g. PALAU).</dt>
<dd>
<p> - Climate summaries are empty <code>data.frames</code> because these summaries are currently generated from PRISM. We are working on a solution that uses DAYMET.</p>
</dd>
<dt>2. A query for data within CONUS, but OSD morphology missing due to parsing error (e.g. formatting, typos).</dt>
<dd>
<p> - Extended summaries are present but morphology missing from <code>SPC</code>. A warning is issued.</p>
</dd>
</dl>
<p>These last two cases are problematic for analysis that makes use of morphology and extended data, such as outlined in this tutorial on <a href="https://ncss-tech.github.io/AQP/soilDB/competing-series.html">competing soil series</a>.
</p>



<h3>Value</h3>

<p>a <code>SoilProfileCollection</code> object containing basic soil morphology and taxonomic information.
</p>


<h3>Note</h3>

<p>Requests to the SoilWeb API are split into batches of 100 series names from <code>soils</code> via <code>makeChunks()</code>.
</p>


<h3>Author(s)</h3>

<p>D.E. Beaudette, A.G. Brown
</p>


<h3>References</h3>

<p>USDA-NRCS OSD search tools: <a href="https://soilseries.sc.egov.usda.gov/">https://soilseries.sc.egov.usda.gov/</a>
</p>


<h3>See Also</h3>

<p><code>OSDquery()</code>, <code>siblings()</code>
</p>


<h3>Examples</h3>

<pre><code class="language-R">


  library(aqp)
  # soils of interest
  s.list &lt;- c('musick', 'cecil', 'drummer', 'amador', 'pentz',
              'reiff', 'san joaquin', 'montpellier', 'grangeville', 'pollasky', 'ramona')

  # fetch and convert data into an SPC
  s.moist &lt;- fetchOSD(s.list, colorState='moist')
  s.dry &lt;- fetchOSD(s.list, colorState='dry')

  # plot profiles
  # moist soil colors
  par(mar=c(0,0,0,0), mfrow=c(2,1))
  plot(s.moist, name='hzname',
       cex.names=0.85, axis.line.offset=-4)
  plot(s.dry, name='hzname',
       cex.names=0.85, axis.line.offset=-4)

  # extended mode: return a list with SPC + summary tables
  x &lt;- fetchOSD(s.list, extended = TRUE, colorState = 'dry')

  par(mar=c(0,0,1,1))
  plot(x$SPC)
  str(x, 1)


</code></pre>


</div>