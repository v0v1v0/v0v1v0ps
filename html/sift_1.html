<div class="container">

<table style="width: 100%;"><tr>
<td>break_join</td>
<td style="text-align: right;">R Documentation</td>
</tr></table>
<h2>Join tables based on overlapping intervals.</h2>

<h3>Description</h3>

<p>User-friendly interface that synthesizes power of <code>dplyr::left_join</code> and <code>findInterval</code>.
</p>


<h3>Usage</h3>

<pre><code class="language-R">break_join(x, y, brk = character(), by = NULL, ...)
</code></pre>


<h3>Arguments</h3>

<table>
<tr style="vertical-align: top;">
<td><code>x</code></td>
<td>
<p>A data frame.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>y</code></td>
<td>
<p>Data frame containing desired reference information.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>brk</code></td>
<td>
<p>Name of column in <code>x</code> and <code>y</code> to join by via interval overlapping. Must be coercible to numeric.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>by</code></td>
<td>
<p>Joining variables, if needed. See mutate-joins.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>...</code></td>
<td>
<p>additional arguments automatically directed to <code>findInterval</code> and <code>dplyr::left_join</code>. No partial matching.</p>
</td>
</tr>
</table>
<h3>Value</h3>

<p>An object of the same type as <code>x</code>.
</p>

<ul>
<li>
<p> All <code>x</code> rows will be returned.
</p>
</li>
<li>
<p> All columns between <code>x</code> and <code>y</code> are returned.
</p>
</li>
<li>
<p> Rows in <code>y</code> are matched with <code>x</code> based on overlapping values of <code>brk</code> (e.g. <code>findInterval(x$brk, y$brk, ...)</code>).
</p>
</li>
</ul>
<h3>Examples</h3>

<pre><code class="language-R"># joining USA + UK leaders with population time-series
break_join(us_uk_pop, us_uk_leaders, brk = c("date" = "start"))

# simple dataset
set.seed(1)
a &lt;- data.frame(p = c(rep("A", 10), rep("B", 10)), q = runif(20, 0, 10))
b &lt;- data.frame(p = c("A", "A", "B", "B"), q = c(3, 5, 6, 9), r = c("a1", "a2", "b1", "b2"))

break_join(a, b, brk = "q") # p identified as common variable automatically
break_join(a, b, brk = "q", by = "p") # same result
break_join(a, b, brk = "q", all.inside = TRUE) # note missing values have been filled

# joining toll prices with vehicle time-series

library(mopac)
library(dplyr, warn.conflicts = FALSE)
library(hms)

express %&gt;%
  mutate(time_hms = as_hms(time)) %&gt;%
  break_join(rates, brk = c("time_hms" = "time"))
</code></pre>


</div>