<div class="container">

<table style="width: 100%;"><tr>
<td>CRPS</td>
<td style="text-align: right;">R Documentation</td>
</tr></table>
<h2>Compute the Continuous Ranked Probability Score</h2>

<h3>Description</h3>

<p>The Continuous Ranked Probability Score (CRPS; Wilks, 2011) is the continuous 
version of the Ranked Probability Score (RPS; Wilks, 2011). It is a skill 
metric to evaluate the full distribution of probabilistic forecasts. It has a 
negative orientation (i.e., the higher-quality forecast the smaller CRPS) and 
it rewards the forecast that has probability concentration around the observed
value. In case of a deterministic forecast, the CRPS is reduced to the mean 
absolute error. It has the same units as the data. The function is based on 
enscrps_cpp from SpecsVerification. If there is more than one dataset, CRPS 
will be computed for each pair of exp and obs data.
</p>


<h3>Usage</h3>

<pre><code class="language-R">CRPS(
  exp,
  obs,
  time_dim = "sdate",
  memb_dim = "member",
  dat_dim = NULL,
  Fair = FALSE,
  return_mean = TRUE,
  ncores = NULL
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr style="vertical-align: top;">
<td><code>exp</code></td>
<td>
<p>A named numerical array of the forecast with at least time 
dimension.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>obs</code></td>
<td>
<p>A named numerical array of the observation with at least time 
dimension. The dimensions must be the same as 'exp' except 'memb_dim' and 
'dat_dim'.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>time_dim</code></td>
<td>
<p>A character string indicating the name of the time dimension.
The default value is 'sdate'.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>memb_dim</code></td>
<td>
<p>A character string indicating the name of the member dimension
to compute the probabilities of the forecast. The default value is 'member'.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>dat_dim</code></td>
<td>
<p>A character string indicating the name of dataset dimension. 
The length of this dimension can be different between 'exp' and 'obs'. The
default value is NULL.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>Fair</code></td>
<td>
<p>A logical indicating whether to compute the FairCRPS (the 
potential CRPS that the forecast would have with an infinite ensemble size).
The default value is FALSE.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>return_mean</code></td>
<td>
<p>A logical indicating whether to return the temporal mean
of the CRPS or not. If TRUE, the temporal mean is calculated along time_dim,
if FALSE the time dimension is not aggregated. The default is TRUE.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>ncores</code></td>
<td>
<p>An integer indicating the number of cores to use for parallel 
computation. The default value is NULL.</p>
</td>
</tr>
</table>
<h3>Value</h3>

<p>A numerical array of CRPS with dimensions c(nexp, nobs, the rest dimensions of
'exp' except 'time_dim' and 'memb_dim' dimensions). nexp is the number of 
experiment (i.e., dat_dim in exp), and nobs is the number of observation
(i.e., dat_dim in obs). If dat_dim is NULL, nexp and nobs are omitted.
</p>


<h3>References</h3>

<p>Wilks, 2011; https://doi.org/10.1016/B978-0-12-385022-5.00008-7
</p>


<h3>Examples</h3>

<pre><code class="language-R">exp &lt;- array(rnorm(1000), dim = c(lat = 3, lon = 2, member = 10, sdate = 50))
obs &lt;- array(rnorm(1000), dim = c(lat = 3, lon = 2, sdate = 50))
res &lt;- CRPS(exp = exp, obs = obs)

</code></pre>


</div>