<div class="container">

<table style="width: 100%;"><tr>
<td>st_as_sftime</td>
<td style="text-align: right;">R Documentation</td>
</tr></table>
<h2>Convert a foreign object to an <code>sftime</code> object</h2>

<h3>Description</h3>

<p>Convert a foreign object to an <code>sftime</code> object
</p>


<h3>Usage</h3>

<pre><code class="language-R">st_as_sftime(x, ...)

## S3 method for class 'ST'
st_as_sftime(x, ...)

## S3 method for class 'Track'
st_as_sftime(x, ...)

## S3 method for class 'Tracks'
st_as_sftime(x, ...)

## S3 method for class 'TracksCollection'
st_as_sftime(x, ...)

## S3 method for class 'sftime'
st_as_sftime(x, ...)

## S3 method for class 'sf'
st_as_sftime(x, ..., time_column_name = NULL)

## S3 method for class 'stars'
st_as_sftime(x, ..., long = TRUE, time_column_name = NULL)

## S3 method for class 'data.frame'
st_as_sftime(
  x,
  ...,
  agr = NA_agr_,
  coords,
  wkt,
  dim = "XYZ",
  remove = TRUE,
  na.fail = TRUE,
  sf_column_name = NULL,
  time_column_name = NULL,
  time_column_last = FALSE
)

## S3 method for class 'ppp'
st_as_sftime(x, ..., time_column_name)

## S3 method for class 'psp'
st_as_sftime(x, ..., time_column_name)

## S3 method for class 'lpp'
st_as_sftime(x, ..., time_column_name)

## S3 method for class 'sftrack'
st_as_sftime(x, ...)

## S3 method for class 'sftraj'
st_as_sftime(x, ...)

## S3 method for class 'cubble_df'
st_as_sftime(x, ..., sfc = NULL, crs, silent = FALSE)
</code></pre>


<h3>Arguments</h3>

<table>
<tr style="vertical-align: top;">
<td><code>x</code></td>
<td>
<p>An object to be converted into an object of class 
<code>sftime</code>.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>...</code></td>
<td>
<p>Further arguments passed to methods.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>time_column_name</code></td>
<td>
<p>A character value; name of the active time column. In 
case there is more than one and <code>time_column_name</code> is <code>NULL</code>, the 
first one is taken.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>long</code></td>
<td>
<p>A logical value; See <code>st_as_sf</code>. 
Typically, <code>long</code> should be set to <code>TRUE</code> since time information
typically is a dimension of a <code>stars</code> object.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>agr</code></td>
<td>
<p>A character vector; see the details section of <code>st_sf</code>.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>coords</code></td>
<td>
<p>In case of point data: names or numbers of the numeric columns 
holding coordinates.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>wkt</code></td>
<td>
<p>The name or number of the character column that holds WKT encoded 
geometries.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>dim</code></td>
<td>
<p>Passed on to <code>st_point</code> (only when argument 
<code>coords</code> is given).</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>remove</code></td>
<td>
<p>A logical value; when <code>coords</code> or <code>wkt</code> is given, 
remove these columns from <code>x</code>?</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>na.fail</code></td>
<td>
<p>A logical value; if <code>TRUE</code>, raise an error if coordinates 
contain missing values.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>sf_column_name</code></td>
<td>
<p>A character value; name of the active list-column with 
simple feature geometries; in case there is more than one and 
<code>sf_column_name</code> is <code>NULL</code>, the first one is taken.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>time_column_last</code></td>
<td>
<p>A logical value; if <code>TRUE</code>, the active time column is 
always put last, otherwise column order is left unmodified. If both <code>sfc_last</code>
and <code>time_column_last</code> are <code>TRUE</code>, the active time column is put last.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>sfc</code></td>
<td>
<p>object of class <code>sfc</code> (see package sf)</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>crs</code></td>
<td>
<p>Coordinate reference system, something suitable as input to 
<code>st_crs</code>.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>silent</code></td>
<td>
<p>logical; suppress message?</p>
</td>
</tr>
</table>
<h3>Value</h3>

<p><code>x</code> converted to an <code>sftime</code> object.
</p>
<p><code>st_as_sftime.Tracks</code> furthermore adds a column 
<code>track_name</code> with the names of the <code>tracks</code> slot of the input
<code>Tracks</code> object.
</p>
<p><code>st_as_sftime.TracksCollection</code> furthermore adds the columns 
<code>tracks_name</code> with the names of the <code>tracksCollection</code> slot and 
<code>track_name</code> with the names of the <code>tracks</code> slot of the input
<code>Tracks</code> object.
</p>


<h3>Examples</h3>

<pre><code class="language-R"># modified from spacetime:
library(sp)
library(spacetime)

sp &lt;- cbind(x = c(0,0,1), y = c(0,1,1))
row.names(sp) &lt;- paste("point", 1:nrow(sp), sep="")
sp &lt;- SpatialPoints(sp)
time &lt;- as.POSIXct("2010-08-05") + 3600 * (10:12)
x &lt;- STI(sp, time)

st_as_sftime(x)

# convert a Track object from package trajectories to an sftime object
library(trajectories)
x1_Track &lt;- trajectories::rTrack(n = 100)
x1_Track@data$speed &lt;- sort(rnorm(length(x1_Track)))
x1_sftime &lt;- st_as_sftime(x1_Track)

# convert a Tracks object from package trajectories to an sftime object
x2_Tracks &lt;- trajectories::rTracks(m = 6)
x2_sftime &lt;- st_as_sftime(x2_Tracks)

# convert a TracksCollection object from package trajectories to an sftime object
x3_TracksCollection &lt;- trajectories::rTracksCollection(p = 2, m = 3, n = 50)
x3_sftime &lt;- st_as_sftime(x3_TracksCollection)

# convert an sftime object to an sftime object
st_as_sftime(x3_sftime)
  
# convert an sf object to an sftime object
g &lt;- st_sfc(st_point(c(1, 2)), st_point(c(1, 3)), st_point(c(2, 3)), 
     st_point(c(2, 1)), st_point(c(3, 1)))
x4_sf &lt;- st_sf(a = 1:5, g, time = Sys.time() + 1:5)
x4_sftime &lt;- st_as_sftime(x4_sf) 

# convert a Tracks object from package trajectories to an sftime object
x5_stars &lt;- stars::read_stars(system.file("nc/bcsd_obs_1999.nc", package = "stars"))
x5_sftime &lt;- st_as_sftime(x5_stars, time_column_name = "time")

# this requires some thought to not accidentally drop time dimensions. For
# example, setting `merge = TRUE` will drop the time dimension and thus throw
# an error:
## Not run: 
x5_sftime &lt;- st_as_sftime(x5_stars, merge = TRUE, time_column_name = "time")

## End(Not run)

# convert a data frame to an sftime object
x5_df &lt;- 
   data.frame(a = 1:5, g, time = Sys.time() + 1:5, stringsAsFactors = FALSE)
x5_sftime &lt;- st_as_sftime(x5_df)

# convert a ppp object to an sftime object (modified from the sf package)
if (require(spatstat.geom)) {
  st_as_sftime(gorillas, time_column_name = "date")
}

# convert a psp object to an sftime object (modified from the spatstat.geom 
# package)
if (require(spatstat.geom)) {
  # modified from spatstat.geom:
  x_psp &lt;- 
    psp(
      runif(10), runif(10), runif(10), runif(10), window=owin(), 
      marks = data.frame(time = Sys.time() + 1:10)
    )
  st_as_sftime(x_psp, time_column_name = "time")
}

# convert an lpp object to an sftime object (modified from the 
# spatstat.linnet package)
if (require(spatstat.geom) &amp;&amp; require(spatstat.linnet)) {
  # modified from spatstat.linnet:
  
  # letter 'A' 
  v &lt;- spatstat.geom::ppp(x=(-2):2, y=3*c(0,1,2,1,0), c(-3,3), c(-1,7))
  edg &lt;- cbind(1:4, 2:5)
  edg &lt;- rbind(edg, c(2,4))
  letterA &lt;- spatstat.linnet::linnet(v, edges=edg)
  
  # points on letter A
  xx &lt;- 
    spatstat.geom::ppp(
      x=c(-1.5,0,0.5,1.5), y=c(1.5,3,4.5,1.5), 
      marks = data.frame(time = Sys.time() + 1:4, a = 1:4), 
      window = spatstat.geom::owin(
         xrange = range(c(-1.5,0,0.5,1.5)), 
         yrange = range(c(1.5,3,4.5,1.5)))
    )
  x_lpp &lt;- spatstat.linnet::lpp(xx, letterA)
  
  # convert to sftime
  st_as_sftime(x_lpp, time_column_name = "time")
}

# convert an sftrack object to an sftime object (modified from sftrack)
if (require(sftrack)) {

  # get an sftrack object
  data("raccoon")
  
  raccoon$timestamp &lt;- as.POSIXct(raccoon$timestamp, "EST")
  
  burstz &lt;- 
    list(id = raccoon$animal_id, month = as.POSIXlt(raccoon$timestamp)$mon)
    
  x_sftrack &lt;- 
    as_sftrack(raccoon,
               group = burstz, time = "timestamp",
               error = NA, coords = c("longitude", "latitude")
  )
  
  # convert to sftime
  st_as_sftime(x_sftrack)
}

# convert an sftraj object to an sftime object (modified from sftrack)
if (require(sftrack)) {

  # get an sftrack object
  data("raccoon")
  
  raccoon$timestamp &lt;- as.POSIXct(raccoon$timestamp, "EST")
  
  burstz &lt;- 
    list(id = raccoon$animal_id, month = as.POSIXlt(raccoon$timestamp)$mon)
  
  x_sftraj &lt;- 
    as_sftraj(raccoon,
      time = "timestamp",
      error = NA, coords = c("longitude", "latitude"),
      group = burstz
    )
  
  # convert to sftime
  st_as_sftime(x_sftraj)
}

# convert a cubble_df object from package cubble to an sftime object
if (requireNamespace("cubble", quietly = TRUE, versionCheck = "0.3.0")) {

  # get a cubble_df object
  data("climate_aus", package = "cubble")
  
  # convert to sftime
  climate_aus_sftime &lt;- 
    st_as_sftime(climate_aus[1:4, ])
    
  climate_aus_sftime &lt;- 
    st_as_sftime(cubble::face_temporal(climate_aus)[1:4, ])
  
}
</code></pre>


</div>