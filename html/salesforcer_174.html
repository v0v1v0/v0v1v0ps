<div class="container">

<table style="width: 100%;"><tr>
<td>sf_download_attachment</td>
<td style="text-align: right;">R Documentation</td>
</tr></table>
<h2>Download an Attachment</h2>

<h3>Description</h3>

<p><a href="https://lifecycle.r-lib.org/articles/stages.html#stable"><img src="../help/figures/lifecycle-stable.svg" alt="[Stable]"></a>
</p>
<p>This function will allow you to download an attachment to disk based on the
attachment body, file name, and path.
</p>


<h3>Usage</h3>

<pre><code class="language-R">sf_download_attachment(
  body,
  name = NULL,
  sf_id = NULL,
  object_name = c("Attachment", "Document"),
  path = "."
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr style="vertical-align: top;">
<td><code>body</code></td>
<td>
<p><code>character</code>; a URL path to the body of the attachment in
Salesforce, typically retrieved by <code>sf_query</code> on the Attachment
object. Alternatively, you can specify the Salesforce Id of the Attachment.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>name</code></td>
<td>
<p><code>character</code>; the name of the file you would like to save the
content to. Note that you should include the file extension in this name
and if this argument is left <code>NULL</code>, then a query will be made to
determine the name and file extension needed. This process may result in a
slower download process, so attempt to provide the body and name arguments
whenever possible for the best performance.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>sf_id</code></td>
<td>
<p><code>character</code>; a Salesforce generated Id that uniquely
identifies a record.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>object_name</code></td>
<td>
<p><code>character</code>; the name of the Salesforce object that the
function is operating against (e.g. "Account", "Contact", "CustomObject__c").</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>path</code></td>
<td>
<p><code>character</code>; a directory path where to create file, defaults
to the current directory.</p>
</td>
</tr>
</table>
<h3>Value</h3>

<p><code>character</code>; invisibly return the file path of the downloaded
content
</p>


<h3>Salesforce Documentation</h3>


<ul><li> <p><a href="https://developer.salesforce.com/docs/atlas.en-us.api_rest.meta/api_rest/dome_sobject_blob_retrieve.htm">Get Attachment Content from a Record</a>
</p>
</li></ul>
<h3>See Also</h3>

<p>Other Attachment functions: 
<code>check_and_encode_files()</code>,
<code>sf_create_attachment()</code>,
<code>sf_delete_attachment()</code>,
<code>sf_update_attachment()</code>
</p>


<h3>Examples</h3>

<pre><code class="language-R">## Not run: 
# downloading all attachments for a Parent record
# if your attachment name doesn't include the extension, then you can use the 
# ContentType column to append it to the Name, if needed
queried_attachments &lt;- sf_query("SELECT Id, Body, Name, ContentType 
                                 FROM Attachment 
                                 WHERE ParentId = '0016A0000035mJ5'")
mapply(sf_download_attachment, queried_attachments$Body, queried_attachments$Name)

# downloading an attachment by its Id
# (the file name will be the same as it exists in Salesforce)
sf_download_attachment(sf_id = queried_attachments$Id[1])

## End(Not run)
</code></pre>


</div>