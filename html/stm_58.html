<div class="container">

<table style="width: 100%;"><tr>
<td>selectModel</td>
<td style="text-align: right;">R Documentation</td>
</tr></table>
<h2>Assists the user in selecting the best STM model.</h2>

<h3>Description</h3>

<p>Discards models with the low likelihood values based on a small number of EM
iterations (cast net stage), then calculates semantic coherence,
exclusivity, and sparsity (based on default STM run using selected
convergence criteria) to allow the user to choose between models with high
likelihood values.
</p>


<h3>Usage</h3>

<pre><code class="language-R">selectModel(
  documents,
  vocab,
  K,
  prevalence = NULL,
  content = NULL,
  data = NULL,
  max.em.its = 100,
  verbose = TRUE,
  init.type = "LDA",
  emtol = 1e-05,
  seed = NULL,
  runs = 50,
  frexw = 0.7,
  net.max.em.its = 2,
  netverbose = FALSE,
  M = 10,
  N = NULL,
  to.disk = F,
  ...
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr style="vertical-align: top;">
<td><code>documents</code></td>
<td>
<p>The documents to be modeled.  Object must be a list of with
each element corresponding to a document.  Each document is represented as
an integer matrix with two rows, and columns equal to the number of unique
vocabulary words in the document.  The first row contains the 1-indexed
vocabulary entry and the second row contains the number of times that term
appears.
</p>
<p>This is similar to the format in the <span class="pkg">lda</span> package except that
(following R convention) the vocabulary is indexed from one. Corpora can be
imported using the reader function and manipulated using the
<code>prepDocuments</code>.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>vocab</code></td>
<td>
<p>Character vector specifying the words in the corpus in the
order of the vocab indices in documents. Each term in the vocabulary index
must appear at least once in the documents.  See
<code>prepDocuments</code> for dropping unused items in the vocabulary.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>K</code></td>
<td>
<p>A positive integer (of size 2 or greater) representing the desired
number of topics. Additional detail on choosing the number of topics in
details.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>prevalence</code></td>
<td>
<p>A formula object with no response variable or a matrix
containing topic prevalence covariates.  Use <code>s()</code>, <code>ns()</code> or
<code>bs()</code> to specify smooth terms. See details for more information.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>content</code></td>
<td>
<p>A formula containing a single variable, a factor variable or
something which can be coerced to a factor indicating the category of the
content variable for each document.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>data</code></td>
<td>
<p>Dataset which contains prevalence and content covariates.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>max.em.its</code></td>
<td>
<p>The maximum number of EM iterations.  If convergence has
not been met at this point, a message will be printed.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>verbose</code></td>
<td>
<p>A logical flag indicating whether information should be
printed to the screen.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>init.type</code></td>
<td>
<p>The method of initialization.  Must be either Latent
Dirichlet Allocation (LDA), Dirichlet Multinomial Regression Topic Model
(DMR), a random initialization or a previous STM object.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>emtol</code></td>
<td>
<p>Convergence tolerance.  EM stops when the relative change in
the approximate bound drops below this level.  Defaults to .001%.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>seed</code></td>
<td>
<p>Seed for the random number generator. <code>stm</code> saves the seed
it uses on every run so that any result can be exactly reproduced.  Setting
the seed here simply ensures that the sequence of models will be exactly the
same when respecified.  Individual seeds can be retrieved from the component
model objects.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>runs</code></td>
<td>
<p>Total number of STM runs used in the cast net stage.
Approximately 15 percent of these runs will be used for running a STM until
convergence.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>frexw</code></td>
<td>
<p>Weight used to calculate exclusivity</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>net.max.em.its</code></td>
<td>
<p>Maximum EM iterations used when casting the net</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>netverbose</code></td>
<td>
<p>Whether verbose should be used when calculating net
models.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>M</code></td>
<td>
<p>Number of words used to calculate semantic coherence and
exclusivity.  Defaults to 10.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>N</code></td>
<td>
<p>Total number of models to retain in the end. Defaults to .2 of
runs.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>to.disk</code></td>
<td>
<p>Boolean. If TRUE, each model is saved to disk at the current
directory in a separate RData file.  This is most useful if one needs to run
<code>multiSTM()</code> on a large number of output models.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>...</code></td>
<td>
<p>Additional options described in details of stm.</p>
</td>
</tr>
</table>
<h3>Value</h3>

<table>
<tr style="vertical-align: top;">
<td><code>runout</code></td>
<td>
<p>List of model outputs the user has to choose from.
Take the same form as the output from a stm model.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>semcoh</code></td>
<td>
<p>Semantic
coherence values for each topic within each model in runout</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>exclusivity</code></td>
<td>
<p>Exclusivity values for each topic within each model in
runout.  Only calculated for models without a content covariate</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>sparsity</code></td>
<td>
<p>Percent sparsity for the covariate and interaction kappas
for models with a content covariate.</p>
</td>
</tr>
</table>
<h3>Examples</h3>

<pre><code class="language-R">
## Not run: 

temp&lt;-textProcessor(documents=gadarian$open.ended.response, metadata=gadarian)
meta&lt;-temp$meta
vocab&lt;-temp$vocab
docs&lt;-temp$documents
out &lt;- prepDocuments(docs, vocab, meta)
docs&lt;-out$documents
vocab&lt;-out$vocab
meta &lt;-out$meta
set.seed(02138)
mod.out &lt;- selectModel(docs, vocab, K=3, prevalence=~treatment + s(pid_rep), 
                       data=meta, runs=5)
plotModels(mod.out)
selected&lt;-mod.out$runout[[1]]

## End(Not run)
</code></pre>


</div>