<div class="container">

<table style="width: 100%;"><tr>
<td>tidyverse</td>
<td style="text-align: right;">R Documentation</td>
</tr></table>
<h2>'tidyverse' methods for <code>sftime</code> objects</h2>

<h3>Description</h3>

<p>'tidyverse' methods for <code>sftime</code> objects. Geometries are sticky, use 
<code>as.data.frame</code> to let <code>dplyr</code>'s own methods drop them. Use 
these methods without the <code>.sftime</code> suffix and after loading the 
'tidyverse' package with the generic (or after loading package 'tidyverse').
</p>


<h3>Usage</h3>

<pre><code class="language-R">inner_join.sftime(x, y, by = NULL, copy = FALSE, suffix = c(".x", ".y"), ...)

left_join.sftime(x, y, by = NULL, copy = FALSE, suffix = c(".x", ".y"), ...)

right_join.sftime(x, y, by = NULL, copy = FALSE, suffix = c(".x", ".y"), ...)

full_join.sftime(x, y, by = NULL, copy = FALSE, suffix = c(".x", ".y"), ...)

semi_join.sftime(x, y, by = NULL, copy = FALSE, suffix = c(".x", ".y"), ...)

anti_join.sftime(x, y, by = NULL, copy = FALSE, suffix = c(".x", ".y"), ...)

filter.sftime(.data, ..., .dots)

arrange.sftime(.data, ..., .dots)

group_by.sftime(.data, ..., add = FALSE)

ungroup.sftime(.data, ...)

rowwise.sftime(.data, ...)

mutate.sftime(.data, ..., .dots)

transmute.sftime(.data, ..., .dots)

select.sftime(.data, ...)

rename.sftime(.data, ...)

slice.sftime(.data, ..., .dots)

summarise.sftime(.data, ..., .dots, do_union = TRUE, is_coverage = FALSE)

summarize.sftime(.data, ..., .dots, do_union = TRUE, is_coverage = FALSE)

distinct.sftime(.data, ..., .keep_all = FALSE)

gather.sftime(
  data,
  key,
  value,
  ...,
  na.rm = FALSE,
  convert = FALSE,
  factor_key = FALSE
)

pivot_longer.sftime(
  data,
  cols,
  names_to = "name",
  names_prefix = NULL,
  names_sep = NULL,
  names_pattern = NULL,
  names_ptypes = NULL,
  names_transform = NULL,
  names_repair = "check_unique",
  values_to = "value",
  values_drop_na = FALSE,
  values_ptypes = NULL,
  values_transform = NULL,
  ...
)

spread.sftime(
  data,
  key,
  value,
  fill = NA,
  convert = FALSE,
  drop = TRUE,
  sep = NULL
)

sample_n.sftime(
  tbl,
  size,
  replace = FALSE,
  weight = NULL,
  .env = parent.frame()
)

sample_frac.sftime(
  tbl,
  size = 1,
  replace = FALSE,
  weight = NULL,
  .env = parent.frame()
)

nest.sftime(.data, ...)

unnest.sftime(data, ..., .preserve = NULL)

separate.sftime(
  data,
  col,
  into,
  sep = "[^[:alnum:]]+",
  remove = TRUE,
  convert = FALSE,
  extra = "warn",
  fill = "warn",
  ...
)

unite.sftime(data, col, ..., sep = "_", remove = TRUE)

separate_rows.sftime(data, ..., sep = "[^[:alnum:]]+", convert = FALSE)

drop_na.sftime(data, ...)
</code></pre>


<h3>Arguments</h3>

<table>
<tr style="vertical-align: top;">
<td><code>x</code></td>
<td>
<p>An object of class <code>sftime</code>.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>y</code></td>
<td>
<p>See <code>dplyr::`mutate-joins`</code>.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>by</code></td>
<td>
<p>A join specification created with <code>join_by()</code>, or a character
vector of variables to join by.
</p>
<p>If <code>NULL</code>, the default, <code style="white-space: pre;">⁠*_join()⁠</code> will perform a natural join, using all
variables in common across <code>x</code> and <code>y</code>. A message lists the variables so
that you can check they're correct; suppress the message by supplying <code>by</code>
explicitly.
</p>
<p>To join on different variables between <code>x</code> and <code>y</code>, use a <code>join_by()</code>
specification. For example, <code>join_by(a == b)</code> will match <code>x$a</code> to <code>y$b</code>.
</p>
<p>To join by multiple variables, use a <code>join_by()</code> specification with
multiple expressions. For example, <code>join_by(a == b, c == d)</code> will match
<code>x$a</code> to <code>y$b</code> and <code>x$c</code> to <code>y$d</code>. If the column names are the same between
<code>x</code> and <code>y</code>, you can shorten this by listing only the variable names, like
<code>join_by(a, c)</code>.
</p>
<p><code>join_by()</code> can also be used to perform inequality, rolling, and overlap
joins. See the documentation at ?join_by for details on
these types of joins.
</p>
<p>For simple equality joins, you can alternatively specify a character vector
of variable names to join by. For example, <code>by = c("a", "b")</code> joins <code>x$a</code>
to <code>y$a</code> and <code>x$b</code> to <code>y$b</code>. If variable names differ between <code>x</code> and <code>y</code>,
use a named character vector like <code>by = c("x_a" = "y_a", "x_b" = "y_b")</code>.
</p>
<p>To perform a cross-join, generating all combinations of <code>x</code> and <code>y</code>, see
<code>cross_join()</code>.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>copy</code></td>
<td>
<p>If <code>x</code> and <code>y</code> are not from the same data source,
and <code>copy</code> is <code>TRUE</code>, then <code>y</code> will be copied into the
same src as <code>x</code>.  This allows you to join tables across srcs, but
it is a potentially expensive operation so you must opt into it.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>suffix</code></td>
<td>
<p>If there are non-joined duplicate variables in <code>x</code> and
<code>y</code>, these suffixes will be added to the output to disambiguate them.
Should be a character vector of length 2.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>...</code></td>
<td>
<p>other arguments</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>.data</code></td>
<td>
<p>An object of class <code>stime</code>.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>.dots</code></td>
<td>
<p>see corresponding function in package <code>dplyr</code></p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>add</code></td>
<td>
<p>see corresponding function in dplyr</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>do_union</code></td>
<td>
<p>logical; in case <code>summary</code> does not create a geometry column, should geometries be created by unioning using st_union, or simply by combining using st_combine? Using st_union resolves internal boundaries, but in case of unioning points, this will likely change the order of the points; see Details.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>is_coverage</code></td>
<td>
<p>logical; if <code>do_union</code> is <code>TRUE</code>, use an optimized algorithm for features that form a polygonal coverage (have no overlaps)</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>.keep_all</code></td>
<td>
<p>see corresponding function in dplyr</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>data</code></td>
<td>
<p>see original function docs</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>key</code></td>
<td>
<p>see original function docs</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>value</code></td>
<td>
<p>see original function docs</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>na.rm</code></td>
<td>
<p>see original function docs</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>convert</code></td>
<td>
<p>see separate_rows</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>factor_key</code></td>
<td>
<p>see original function docs</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>cols</code></td>
<td>
<p>see original function docs</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>names_to</code></td>
<td>
<p>see original function docs</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>names_prefix</code></td>
<td>
<p>see original function docs</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>names_sep</code></td>
<td>
<p>see original function docs</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>names_pattern</code></td>
<td>
<p>see original function docs</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>names_ptypes</code></td>
<td>
<p>see original function docs</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>names_transform</code></td>
<td>
<p>see original function docs</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>names_repair</code></td>
<td>
<p>see original function docs</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>values_to</code></td>
<td>
<p>see original function docs</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>values_drop_na</code></td>
<td>
<p>see original function docs</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>values_ptypes</code></td>
<td>
<p>see original function docs</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>values_transform</code></td>
<td>
<p>see original function docs</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>fill</code></td>
<td>
<p>see original function docs</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>drop</code></td>
<td>
<p>see original function docs</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>sep</code></td>
<td>
<p>see separate_rows</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>tbl</code></td>
<td>
<p>see original function docs</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>size</code></td>
<td>
<p>see original function docs</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>replace</code></td>
<td>
<p>see original function docs</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>weight</code></td>
<td>
<p>see original function docs</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>.env</code></td>
<td>
<p>see original function docs</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>.preserve</code></td>
<td>
<p>see unnest</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>col</code></td>
<td>
<p>see separate</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>into</code></td>
<td>
<p>see separate</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>remove</code></td>
<td>
<p>see separate</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>extra</code></td>
<td>
<p>see separate</p>
</td>
</tr>
</table>
<h3>Value</h3>


<ul>
<li>
<p> For <code>_join</code> methods: An object of class <code>sftime</code> 
representing the joining result of <code>x</code> and <code>y</code>. See 
<code>mutate-joins</code>.
</p>
</li>
<li>
<p> For <code>filter</code>: See <code>filter</code>.
</p>
</li>
<li>
<p> For <code>arrange</code>: See <code>arrange</code>. 
</p>
</li>
<li>
<p> For <code>group_by</code> and <code>ungroup</code>: A grouped <code>sftime</code> 
object. See <code>arrange</code>. 
</p>
</li>
<li>
<p> For <code>rowwise</code>: An <code>sftime</code> object. See 
<code>rowwise</code>. 
</p>
</li>
<li>
<p> For <code>mutate</code> and <code>transmute</code>: See 
<code>mutate</code>.
</p>
</li>
<li>
<p> For <code>select</code>: See <code>select</code>. If the active 
time column is not explicitly selected, a <code>sf</code> object is returned. 
</p>
</li>
<li>
<p> For <code>rename</code>: See <code>rename</code>.    
</p>
</li>
<li>
<p> For <code>slice</code>: See <code>slice</code>.
</p>
</li>
<li>
<p> For <code>summarize</code> and <code>summarise</code>: See 
<code>summarise</code>.  
</p>
</li>
<li>
<p> For <code>distinct</code>: See <code>distinct</code>.
</p>
</li>
<li>
<p> For <code>gather</code>: See <code>gather</code>. 
</p>
</li>
</ul>
<h3>Examples</h3>

<pre><code class="language-R">g1 &lt;- st_sfc(st_point(1:2), st_point(c(5, 8)), st_point(c(2, 9)))
x1 &lt;- st_sftime(a = 1:3, geometry = g1, time = Sys.time())

g2 &lt;- st_sfc(st_point(c(4, 6)), st_point(c(4, 6)), st_point(c(4, 6)))
x2 &lt;- st_sftime(a = 2:4, geometry = g2, time = Sys.time())

library(dplyr)

## inner_join
inner_join(x1, as.data.frame(x2), by = "a") # note: the active time column is
# time.x and the active geometry column geometry.x

inner_join(x2, as.data.frame(x1), by = "a")

## left_join
left_join(x1, as.data.frame(x2), by = "a")

left_join(x2, as.data.frame(x1), by = "a")

## right_join
right_join(x1, as.data.frame(x2), by = "a")

right_join(x2, as.data.frame(x1), by = "a")

## full_join
full_join(x1, as.data.frame(x2), by = "a")

full_join(x2, as.data.frame(x1), by = "a")

## semi_join
semi_join(x1, as.data.frame(x2), by = "a")

semi_join(x2, as.data.frame(x1), by = "a")

## anti_join
anti_join(x1, as.data.frame(x2), by = "a")

anti_join(x2, as.data.frame(x1), by = "a")

## filter
filter(x1, a &lt;= 2)

## arrange
arrange(x1, dplyr::desc(a))

## group_by
group_by(x1, time)

## ungroup
ungroup(group_by(x1, time))

## rowwise
x1 %&gt;%
  mutate(a1 = 5:7) %&gt;%
  rowwise() %&gt;%
  mutate(a2 = mean(a, a1))

## mutate
x1 %&gt;%
  mutate(a1 = 5:7)

## transmute
x1 %&gt;%
  transmute(a1 = 5:7)

## select
x1 %&gt;%
  select(-time) %&gt;%
  select(geometry)

## rename
x1 %&gt;%
  rename(a1 = a)

## slice
x1 %&gt;%
  slice(1:2)

## summarise
x1 %&gt;%
  summarise(time = mean(time))
  
x1 %&gt;%
  summarize(time = mean(time))

## distinct
x1 %&gt;%
  distinct(geometry)

## gather
library(tidyr)
x1 %&gt;%
  mutate(a1 = 5:7) %&gt;%
  gather(key = "variable", value = "value", a, a1)

## pivot_longer
x1 %&gt;%
  mutate(a1 = 5:7) %&gt;%
  pivot_longer(cols = c("a", "a1"), names_to = "variable", values_to = "value")

## spread
x1 %&gt;%
  mutate(a1 = 5:7) %&gt;%
  gather(key = "variable", value = "value", a, a1) %&gt;%
  spread(key = "variable", value = "value")

## sample_n
set.seed(234)
x1 %&gt;%
  sample_n(size = 10, replace = TRUE)

## sample_frac
x1 %&gt;%
  sample_frac(size = 10, replace = TRUE) %&gt;%
  sample_frac(size = 0.1, replace = FALSE)

## nest
x1 %&gt;%
  nest(a1 = -time)

## unnest
x1 %&gt;%
  mutate(a1 = list(1, c(1, 2), 5)) %&gt;%
  unnest(a1)

## separate
x1 %&gt;%
  mutate(x = c(NA, "a.b", "a.d")) %&gt;%
  separate(x, c("A", "B"))

## unite
x1 %&gt;%
  mutate(x = c(NA, "a.b", "a.d")) %&gt;%
  separate(x, c("A", "B")) %&gt;%
  unite(x, c("A", "B"))
  
## separate_rows
x1 %&gt;%
  mutate(z = c("1", "2,3,4", "5,6")) %&gt;%
  separate_rows(z, convert = TRUE)

## drop_na
x1 %&gt;%
  mutate(z = c(1, 2, NA)) %&gt;%
  drop_na(z)
  
x1 %&gt;%
  mutate(z = c(1, NA, NA)) %&gt;%
  drop_na(z)   

x1 %&gt;%
  mutate(time = replace(time, 1, NA)) %&gt;%
  drop_na(time)
</code></pre>


</div>