<div class="container">

<table style="width: 100%;"><tr>
<td>survey_tally</td>
<td style="text-align: right;">R Documentation</td>
</tr></table>
<h2>Count/tally survey weighted observations by group</h2>

<h3>Description</h3>

<p>Analogous to <code>tally</code> and count, calculates the survey weighted
count of observations. <code>survey_tally</code> will call <code>survey_total</code> empty (resulting
in the count of each group) or on <code>wt</code> if it is specified (resulting in the
survey weighted total of <code>wt</code>). <code>survey_count</code> is similar, but calls <code>group_by</code>
before calculating the count and then returns the data to the original groupings.
</p>


<h3>Usage</h3>

<pre><code class="language-R">survey_tally(
  x,
  wt,
  sort = FALSE,
  name = "n",
  vartype = c("se", "ci", "var", "cv")
)

survey_count(
  x,
  ...,
  wt = NULL,
  sort = FALSE,
  name = "n",
  .drop = dplyr::group_by_drop_default(x),
  vartype = c("se", "ci", "var", "cv")
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr style="vertical-align: top;">
<td><code>x</code></td>
<td>
<p>A tbl_svy object, as created by <code>as_survey</code> and related functions.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>wt</code></td>
<td>
<p>(Optional) A variable to weight on (in addition to the survey weights,
which are always used). If left unspecified, <code>tally()</code> will use a variable
named "n" if one exists, but <code>count()</code> will not. Override this behavior by
specifying <code>wt = NULL</code>.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>sort</code></td>
<td>
<p>Whether to sort the results (defaults to <code>FALSE</code>)</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>name</code></td>
<td>
<p>Name of count variable created (defaults to n). If the variable already
exists, will add "n" to the end until it does not.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>vartype</code></td>
<td>
<p>What types variation estimates to calculate, passed to
<code>survey_total</code>.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>...</code></td>
<td>
<p>Variables to group by, passed to <code>group_by()</code>.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>.drop</code></td>
<td>
<p>When .drop = TRUE, empty groups are dropped, see <code>group_by</code>
documentation for more details.</p>
</td>
</tr>
</table>
<h3>Details</h3>

<p>If <code>n</code> already exists, <code>tally</code> will use it as the weight, but <code>count</code>
will not.
</p>


<h3>Examples</h3>

<pre><code class="language-R">library(survey)
data(api)

dstrata &lt;- apistrat %&gt;%
  as_survey_design(strata = stype, weights = pw)

dstrata %&gt;%
  group_by(awards) %&gt;%
  survey_tally()

dstrata %&gt;%
  survey_count(awards)

</code></pre>


</div>