<div class="container">

<table style="width: 100%;"><tr>
<td>step_center_to</td>
<td style="text-align: right;">R Documentation</td>
</tr></table>
<h2>Centering numeric data to a value besides their mean</h2>

<h3>Description</h3>

<p>'step_center_to' generalizes 'step_center' to allow for a different function
than the 'mean' function to calculate centers. It creates a *specification*
of a recipe step that will normalize numeric data to have a 'center' of zero.
</p>


<h3>Usage</h3>

<pre><code class="language-R">step_center_to(
  recipe,
  ...,
  role = NA,
  trained = FALSE,
  centers = NULL,
  center_fn = mean,
  na_rm = TRUE,
  skip = FALSE,
  id = rand_id("center_to")
)

## S3 method for class 'step_center_to'
tidy(x, ...)
</code></pre>


<h3>Arguments</h3>

<table>
<tr style="vertical-align: top;">
<td><code>recipe</code></td>
<td>
<p>A recipe object. The step will be added to the sequence of
operations for this recipe.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>...</code></td>
<td>
<p>One or more selector functions to choose which variables are
affected by the step. See [selections()] for more details. For the 'tidy'
method, these are not currently used.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>role</code></td>
<td>
<p>Not used by this step since no new variables are created.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>trained</code></td>
<td>
<p>A logical to indicate if the quantities for preprocessing have
been estimated.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>centers</code></td>
<td>
<p>A named numeric vector of centers. This is 'NULL' until
computed by [prep.recipe()] (or it can be specified as a named
numeric vector as well?).</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>center_fn</code></td>
<td>
<p>a function to be used to calculate where the center should be</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>na_rm</code></td>
<td>
<p>A logical value indicating whether 'NA' values should be removed
during computations.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>skip</code></td>
<td>
<p>A logical. Should the step be skipped when the recipe is baked by
[bake.recipe()]? While all operations are baked when [prep.recipe()] is
run, some operations may not be able to be conducted on new data (e.g.
processing the outcome variable(s)). Care should be taken when using 'skip
= TRUE' as it may affect the computations for subsequent operations</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>id</code></td>
<td>
<p>A character string that is unique to this step to identify it.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>x</code></td>
<td>
<p>A 'step_center_to' object.</p>
</td>
</tr>
</table>
<h3>Details</h3>

<p>Centering data means that the average of a variable is subtracted
from the data. 'step_center_to' estimates the variable centers from the
data used in the 'training' argument of 'prep.recipe'. 'bake.recipe' then
applies the centering to new data sets using these centers.
</p>


<h3>Value</h3>

<p>An updated version of 'recipe' with the new step added to the
sequence of existing steps (if any). For the 'tidy' method, a tibble with
columns 'terms' (the selectors or variables selected) and 'value' (the
centers).
</p>


<h3>See Also</h3>

<p>[recipe()] [prep.recipe()] [bake.recipe()]
</p>


<h3>Examples</h3>

<pre><code class="language-R">data(biomass, package = "modeldata")

biomass_tr &lt;- biomass[biomass$dataset == "Training",]
biomass_te &lt;- biomass[biomass$dataset == "Testing",]

rec &lt;- recipes::recipe(
 HHV ~ carbon + hydrogen + oxygen + nitrogen + sulfur,
 data = biomass_tr)

center_trans &lt;- rec %&gt;%
  step_center_to(carbon, contains("gen"), -hydrogen)

center_obj &lt;- recipes::prep(center_trans, training = biomass_tr)

transformed_te &lt;- recipes::bake(center_obj, biomass_te)

biomass_te[1:10, names(transformed_te)]
transformed_te

recipes::tidy(center_trans)
recipes::tidy(center_obj)
</code></pre>


</div>