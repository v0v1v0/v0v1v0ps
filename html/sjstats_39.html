<div class="container">

<table style="width: 100%;"><tr>
<td>prop</td>
<td style="text-align: right;">R Documentation</td>
</tr></table>
<h2>Proportions of values in a vector</h2>

<h3>Description</h3>

<p><code>prop()</code> calculates the proportion of a value or category
in a variable. <code>props()</code> does the same, but allows for
multiple logical conditions in one statement. It is similar
to <code>mean()</code> with logical predicates, however, both
<code>prop()</code> and <code>props()</code> work with grouped data frames.
</p>


<h3>Usage</h3>

<pre><code class="language-R">prop(data, ..., weights = NULL, na.rm = TRUE, digits = 4)

props(data, ..., na.rm = TRUE, digits = 4)
</code></pre>


<h3>Arguments</h3>

<table>
<tr style="vertical-align: top;">
<td><code>data</code></td>
<td>
<p>A data frame. May also be a grouped data frame (see 'Examples').</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>...</code></td>
<td>
<p>One or more value pairs of comparisons (logical predicates). Put
variable names the left-hand-side and values to match on the
right hand side. Expressions may be quoted or unquoted. See
'Examples'.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>weights</code></td>
<td>
<p>Vector of weights that will be applied to weight all observations.
Must be a vector of same length as the input vector. Default is
<code>NULL</code>, so no weights are used.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>na.rm</code></td>
<td>
<p>Logical, whether to remove NA values from the vector when the
proportion is calculated. <code>na.rm = FALSE</code> gives you the raw
percentage of a value in a vector, <code>na.rm = TRUE</code> the valid
percentage.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>digits</code></td>
<td>
<p>Amount of digits for returned values.</p>
</td>
</tr>
</table>
<h3>Details</h3>

<p><code>prop()</code> only allows one logical statement per comparison,
while <code>props()</code> allows multiple logical statements per comparison.
However, <code>prop()</code> supports weighting of variables before calculating
proportions, and comparisons may also be quoted. Hence, <code>prop()</code>
also processes comparisons, which are passed as character vector
(see 'Examples').
</p>


<h3>Value</h3>

<p>For one condition, a numeric value with the proportion of the values
inside a vector. For more than one condition, a data frame with one column
of conditions and one column with proportions. For grouped data frames,
returns a data frame with one column per group with grouping categories,
followed by one column with proportions per condition.
</p>


<h3>Examples</h3>

<pre><code class="language-R">
data(efc)

# proportion of value 1 in e42dep
prop(efc, e42dep == 1)

# expression may also be completely quoted
prop(efc, "e42dep == 1")

# use "props()" for multiple logical statements
props(efc, e17age &gt; 70 &amp; e17age &lt; 80)

# proportion of value 1 in e42dep, and all values greater
# than 2 in e42dep, including missing values. will return a data frame
prop(efc, e42dep == 1, e42dep &gt; 2, na.rm = FALSE)

# for factors or character vectors, use quoted or unquoted values
library(datawizard)
# convert numeric to factor, using labels as factor levels
efc$e16sex &lt;- to_factor(efc$e16sex)
efc$n4pstu &lt;- to_factor(efc$n4pstu)

# get proportion of female older persons
prop(efc, e16sex == female)

# get proportion of male older persons
prop(efc, e16sex == "male")

# "props()" needs quotes around non-numeric factor levels
props(efc,
  e17age &gt; 70 &amp; e17age &lt; 80,
  n4pstu == 'Care Level 1' | n4pstu == 'Care Level 3'
)

# also works with pipe-chains
efc |&gt; prop(e17age &gt; 70)
efc |&gt; prop(e17age &gt; 70, e16sex == 1)

</code></pre>


</div>