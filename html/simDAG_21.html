<div class="container">

<table style="width: 100%;"><tr>
<td>node_multinomial</td>
<td style="text-align: right;">R Documentation</td>
</tr></table>
<h2>
Simulate a Node Using Multinomial Regression
</h2>

<h3>Description</h3>

<p>Data from the parents is used to generate the node using multinomial regression by predicting the covariate specific probability of each class and sampling from a multinomial distribution accordingly.
</p>


<h3>Usage</h3>

<pre><code class="language-R">node_multinomial(data, parents, betas, intercepts,
                 labels=NULL, output="factor",
                 return_prob=FALSE)
</code></pre>


<h3>Arguments</h3>

<table>
<tr style="vertical-align: top;">
<td><code>data</code></td>
<td>

<p>A <code>data.table</code> (or something that can be coerced to a <code>data.table</code>) containing all columns specified by <code>parents</code>.
</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>parents</code></td>
<td>

<p>A character vector specifying the names of the parents that this particular child node has.
</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>betas</code></td>
<td>

<p>A numeric matrix with <code>length(parents)</code> columns and one row for each class that should be simulated, specifying the causal beta coefficients used to generate the node.
</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>intercepts</code></td>
<td>

<p>A numeric vector with one entry for each class that should be simulated, specifying the intercepts used to generate the node.
</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>labels</code></td>
<td>

<p>An optional character vector giving the factor levels of the generated classes. If <code>NULL</code> (default), the integers are simply used as factor levels.
</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>output</code></td>
<td>

<p>A single character string specifying the output format. Must be one of <code>"factor"</code> (default), <code>"character"</code> or <code>"numeric"</code>. If the argument <code>labels</code> is supplied, the output will coerced to <code>"character"</code> by default.
</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>return_prob</code></td>
<td>

<p>Either <code>TRUE</code> or <code>FALSE</code> (default). Specifies whether to return the matrix of class probabilities or not. If you are using this function inside of a <code>node</code> call, you cannot set this to <code>TRUE</code> because it will return a matrix. It may, however, be useful when using this function by itself, or as a probability generating function for the <code>node_competing_events</code> function.
</p>
</td>
</tr>
</table>
<h3>Details</h3>

<p>This function works essentially like the <code>node_binomial</code> function. First, the matrix of <code>betas</code> coefficients is used in conjunction with the values defined in the <code>parents</code> nodes and the <code>intercepts</code> to calculate the expected subject-specific probabilities of occurrence for each possible category. This is done using the standard multinomial regression equations. Using those probabilities in conjunction with the <code>rcategorical</code> function, a single one of the possible categories is drawn for each individual.
</p>
<p>Since this function produces categorical output (as it should), it may be difficult to use this node type as a parent for other nodes. Nevertheless, it is of course possible using a user-defined node type (see <code>node_custom</code> for some infos on how to define those).
</p>


<h3>Value</h3>

<p>Returns a vector of length <code>nrow(data)</code>. Depending on the used arguments, this vector may be of type character, numeric of factor. If <code>return_prob</code> was used it instead returns a numeric matrix containing one column per possible event and <code>nrow(data)</code> rows.
</p>


<h3>Author(s)</h3>

<p>Robin Denz
</p>


<h3>See Also</h3>

<p><code>empty_dag</code>, <code>node</code>, <code>node_td</code>, <code>sim_from_dag</code>, <code>sim_discrete_time</code>
</p>


<h3>Examples</h3>

<pre><code class="language-R">library(simDAG)

set.seed(3345235)

dag &lt;- empty_dag() +
  node("age", type="rnorm", mean=50, sd=4) +
  node("sex", type="rbernoulli", p=0.5) +
  node("UICC", type="multinomial", parents=c("sex", "age"),
       betas=matrix(c(0.2, 0.4, 0.1, 0.5, 1.1, 1.2), ncol=2),
       intercepts=1)

sim_dat &lt;- sim_from_dag(dag=dag, n_sim=100)
</code></pre>


</div>