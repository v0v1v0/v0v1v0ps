<div class="container">

<table style="width: 100%;"><tr>
<td>pars_id</td>
<td style="text-align: right;">R Documentation</td>
</tr></table>
<h2>Convert Parameter Syntax to Position
or Row Numbers in the Parameter
Vector or Table</h2>

<h3>Description</h3>

<p>Converts a vector of
lavaan syntax to the ids of parameters
in the vector of free parameters or the row numbers
in the parameter table.
</p>


<h3>Usage</h3>

<pre><code class="language-R">pars_id(pars, fit, where = c("coef", "partable"), free_only = TRUE)
</code></pre>


<h3>Arguments</h3>

<table>
<tr style="vertical-align: top;">
<td><code>pars</code></td>
<td>
<p>A character vector of parameters specified
in lavaan syntax, e.g., <code>"y ~ x"</code> and <code>f1 =~ x3</code>. For
multisample models, if only the parameters in some groups
are needed, use the modifier for labeling parameters and
use <code>NA</code> to denote parameters to be requested. E.g.,
<code>f1 =~ c(NA, 0, NA, NA) * x2</code> denotes the loadings of
<code>x2</code> on <code>f1</code> in the first, third, and fourth groups.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>fit</code></td>
<td>
<p>A <code>lavaan</code>-class object. This object is used
to determine the number of groups and the parameters
in the model. Only parameters in <code>pars</code> that appear in
this model will be considered.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>where</code></td>
<td>
<p>Where the values are to be found. Can be
"partable" (parameter table) or "coef"
(coefficient vector).
Default is "coef".</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>free_only</code></td>
<td>
<p>Whether only free parameters will be
kept. Default is <code>TRUE</code>.</p>
</td>
</tr>
</table>
<h3>Details</h3>

<p>It supports the following ways to specify
the parameters to be included.
</p>

<ul>
<li> <p><code>lavaan</code> syntax
</p>

<ul><li>
<p> For example, <code>"y ~ x"</code> denotes the regression coefficient
regression <code>y</code> on <code>x</code>. It uses <code>lavaan::lavaanify()</code> to
parse the syntax strings.
</p>
</li></ul>
</li>
<li>
<p> Operator
</p>

<ul>
<li>
<p> For example, <code>"~"</code> denotes all regression coefficients.
</p>
</li>
<li>
<p> It also supports <code style="white-space: pre;">⁠:=⁠</code>, which can be used to select
user-defined parameters.
</p>
</li>
</ul>
</li>
<li>
<p> Label
</p>

<ul><li>
<p> For example, <code>"ab"</code> denotes all parameters with this
labels defined in model syntax. It can be used to
select user-defined parameters, such as <code>"ab := a*b"</code>.
</p>
</li></ul>
</li>
</ul>
<p>It is used by functions such as <code>est_change()</code>.
</p>


<h4>Multisample model</h4>

<p>If a model has more than one group, a specification
specified as in a single sample model denotes the same
parameters in all group.
</p>

<ul><li>
<p> For example, <code>"f1 =~ x2"</code> denotes the factor loading of
<code>x2</code> on <code>f1</code> in all groups. <code>"~~"</code> denotes covariances
and error covariances in all groups.
</p>
</li></ul>
<p>There are two ways to select parameters only in selected
groups. First, the syntax to fix parameter values
can be used, with <code>NA</code> denoting parameters to be selected.
</p>

<ul><li>
<p> For example, <code>"f2 =~ c(NA, 1, NA) * x5"</code> selects the
factor loadings of <code>x5</code> on <code>f2</code> in the first and third
groups.
</p>
</li></ul>
<p>Users can also add ".grouplabel" to a specification,
<code>grouplabel</code> being the group label of a group (the one
appears in <code>summary()</code>, not the one of the form <code>".g2"</code>,
<code>"g3"</code>, etc.).
</p>

<ul>
<li>
<p> For example, <code>"f2 =~ x5.Alpha"</code> denotes the factor loading
of <code>x5</code> on <code>f2</code> in the group <code>"Alpha"</code>.
</p>
</li>
<li>
<p> This method can be used for operators. For example,
<code>"=~.Alpha"</code> denotes all factors loadings in the
group <code>"Alpha"</code>.
</p>
</li>
</ul>
<p>Though not recommended, users can use labels such as
<code>".g2"</code> and <code>".g3"</code> to denote the parameter in a specific
group. These are the labels appear in the output of
some functions of <code>lavaan</code>. Although <code>lavaan</code> does not label
the parameters in the first group by <code>".g1"</code>, this can
still be used in <code>pars_id()</code>.
</p>

<ul>
<li>
<p> For example, <code>"f2 =~ x5.g2"</code> denotes the factor loading
of <code>x5</code> on <code>f2</code> in the second group. <code>"y ~ x.g1"</code>
denotes the regression coefficient from <code>x</code> to <code>y</code>
in the first group.
</p>
</li>
<li>
<p> This method can also be used for operators. For example,
<code>"=~.g2"</code> denotes all factors loadings in the
second group.
</p>
</li>
</ul>
<p>However, this method is not
as reliable as using <code>grouplabel</code> because the numbering
of groups depends on the order they appear in the data
set.
</p>



<h3>Value</h3>

<p>A numeric vector of the ids. If <code>where</code> is <code>"partable"</code>,
the ids are row numbers. If <code>where</code> is <code>"coef"</code>,
the ids are the positions in the vector.
</p>


<h3>Author(s)</h3>

<p>Shu Fai Cheung <a href="https://orcid.org/0000-0002-9871-9448">https://orcid.org/0000-0002-9871-9448</a>
</p>


<h3>Examples</h3>

<pre><code class="language-R">
dat &lt;- sem_dat

library(lavaan)
sem_model &lt;-
"
f1 =~  x1 + x2 + x3
f2 =~  x4 + x5 + x6
f3 =~  x7 + x8 + x9
f2 ~   f1
f3 ~   f2
"

fit_ng &lt;- sem(sem_model, dat)

pars &lt;- c("f1 =~ x2", "f2 =~ x5", "f2 ~ f1")
tmp &lt;- pars_id(pars, fit = fit_ng)
coef(fit_ng)[tmp]
tmp &lt;- pars_id(pars, fit = fit_ng, where = "partable")
parameterTable(fit_ng)[tmp, ]

# Multiple-group models

dat &lt;- sem_dat
set.seed(64264)
dat$gp &lt;- sample(c("Alpha", "Beta", "Gamma"),
                 nrow(dat),
                 replace = TRUE)

library(lavaan)
sem_model &lt;-
"
f1 =~  x1 + x2 + x3
f2 =~  x4 + x5 + x6
f3 =~  x7 + x8 + x9
f2 ~   f1
f3 ~   f2
"

fit_ng &lt;- sem(sem_model, dat)
fit_gp &lt;- sem(sem_model, dat, group = "gp")

pars &lt;- c("f1 =~ x2", "f2 =~ x5", "f2 ~ f1")
tmp &lt;- pars_id(pars, fit = fit_ng)
coef(fit_ng)[tmp]
tmp &lt;- pars_id(pars, fit = fit_ng, where = "partable")
parameterTable(fit_ng)[tmp, ]

pars &lt;- c("f1 =~ x2", "f2 =~ c(NA, 1, NA) * x5")
tmp &lt;- pars_id(pars, fit = fit_gp)
coef(fit_gp)[tmp]
tmp &lt;- pars_id(pars, fit = fit_gp, where = "partable")
parameterTable(fit_gp)[tmp, ]

pars2 &lt;- c("f1 =~ x2", "~~.Beta", "f2 =~ x5.Gamma")
tmp &lt;- pars_id(pars2, fit = fit_gp)
coef(fit_gp)[tmp]
tmp &lt;- pars_id(pars2, fit = fit_gp, where = "partable")
parameterTable(fit_gp)[tmp, ]
# Note that group 1 is "Beta", not "Alpha"
lavInspect(fit_gp, "group.label")


</code></pre>


</div>