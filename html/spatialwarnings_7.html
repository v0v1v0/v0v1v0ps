<div class="container">

<table style="width: 100%;"><tr>
<td>create_indicator</td>
<td style="text-align: right;">R Documentation</td>
</tr></table>
<h2>Custom Spatial Early-Warning signals</h2>

<h3>Description</h3>

<p>Computation, significance assessment and display of trends 
of a custom, user-defined indicator.
</p>


<h3>Usage</h3>

<pre><code class="language-R">create_indicator(fun, taskname = as.character(substitute(fun)))

compute_indicator(mat, fun, taskname = as.character(substitute(fun)), ...)
</code></pre>


<h3>Arguments</h3>

<table>
<tr style="vertical-align: top;">
<td><code>fun</code></td>
<td>
<p>A function that takes a matrix as input and returns 
a vector of numerical values. If the function returns a named vector, 
then the names will be used in plots and summaries. The function may also
accept extra arguments.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>taskname</code></td>
<td>
<p>The task name. A character string used used for plots and
textual summaries that describes the indicator (or set of indicators) 
being computed. If a task name cannot be derived from <code>fun</code>, then 
a default name is used.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>mat</code></td>
<td>
<p>A matrix or a list of matrices.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>...</code></td>
<td>
<p>Additional arguments to pass to the function <code>fun</code></p>
</td>
</tr>
</table>
<h3>Details</h3>

<p><code>spatialwarnings</code> provides "workflow functions", named <code>*_sews</code>, 
that assist the user in computing, displaying and assessing the 
significance of indicator values. The functions <code>create_indicator</code> and 
<code>compute_indicator</code> provides such workflow for any arbitrary function. 
</p>
<p><code>create_indicator</code> takes a function 'fun' and returns another function 
that can be used as an indicator similar to the <code>*_sews</code> functions. The 
results of this function can be assessed for significance using 
<code>indictest</code> and trends can be displayed using 
<code>plot</code>, <code>summary</code>, etc. (see Examples). <code>compute_indicator</code> 
does the same but without needing an intermediate indicator function.
</p>


<h3>Value</h3>

<p><code>create_indicator</code> returns a function that can be used in the same way 
than the other <code>*_sews</code> functions (e.g. <code>generic_sews</code>). This 
function as well as <code>compute_indicator</code> will return
<code>simple_sews_*</code> objects.
</p>


<h3>See Also</h3>

<p><code>simple_sews</code>
</p>


<h3>Examples</h3>

<pre><code class="language-R">
# Use the maximum patch size as indicator of degradation
maxpatchsize &lt;- function(mat) { 
  max(patchsizes(mat))
}

# Create the indicator function
maxpatch_sews &lt;- create_indicator(maxpatchsize)

# Then work with this function as if it were a function from the *_sews 
# family. 
mp_indic &lt;- maxpatch_sews(forestgap)
summary(mp_indic)

 
# Assess significance and display trends
mp_test &lt;- indictest(mp_indic, nulln = 49)
plot(mp_test)




# Try spatial coefficient of variation as a spatial EWS. This function can 
# have arguments. 
spatial_cv &lt;- function(mat, subsize) { 
  matc &lt;- coarse_grain(mat, subsize)
  return( sd(matc) / mean(matc) )
}

# Create indicator function
cv_sews &lt;- create_indicator(spatial_cv)

# Compute and display trends
cv_indic &lt;- cv_sews(serengeti, subsize = 3)
plot(cv_indic, along = serengeti.rain)

# We can do the same work in one go using compute_indicator
cv_indic2 &lt;- compute_indicator(serengeti, spatial_cv, subsize = 3)
plot(cv_indic2, along = serengeti.rain)

 
indictest(cv_indic, nulln = 99)

</code></pre>


</div>