<div class="container">

<table style="width: 100%;"><tr>
<td>IdMap</td>
<td style="text-align: right;">R Documentation</td>
</tr></table>
<h2>Ideal Mapping (IdMap)</h2>

<h3>Description</h3>

<p>Create the ideal map, a map based on the ideal profiles provided by the consumers.
</p>


<h3>Usage</h3>

<pre><code class="language-R">IdMap(dataset, col.p, col.j, col.lik, id.recogn, nbsimul=500, nbchoix=NULL,
      alpha=0.05, coord=c(1,2), precision=0.1, levels.contour=NULL, 
	  color=FALSE, cons.eq=FALSE)
</code></pre>


<h3>Arguments</h3>

<table>
<tr style="vertical-align: top;">
<td><code>dataset</code></td>
<td>
<p>A matrix with at least two qualitative variables (<em>consumer</em> and <em>products</em>)
and a set of quantitative variables containing at least 2*A variables (for both <em>perceived</em> and <em>ideal</em> intensities)</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>col.p</code></td>
<td>
<p>The position of the <em>product</em> variable </p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>col.j</code></td>
<td>
<p>The position of the <em>consumer</em> variable </p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>col.lik</code></td>
<td>
<p>The position of the <em>liking</em> variable </p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>id.recogn</code></td>
<td>
<p>The sequence in the variable names which distinguish the ideal
variables from the sensory variables. This sequence should be fixed and unique. <br>
Each ideal variable should be preceded by the corresponding perceived intensity variable. </p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>nbchoix</code></td>
<td>
<p>The number of consumers forming a virtual panel, by default the number of panelists in the original panel</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>nbsimul</code></td>
<td>
<p>The number of simulations (corresponding to the number of virtual panels) used to compute the ellipses</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>alpha</code></td>
<td>
<p>The confidence level of the ellipses</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>coord</code></td>
<td>
<p>A length 2 vector specifying the components to plot</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>precision</code></td>
<td>
<p>The value defining the step when gridding the space</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>levels.contour</code></td>
<td>
<p>The levels (between 0 and 1) to consider for the colors on the surface plot.
By default, they are set automatically based on the results</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>color</code></td>
<td>
<p>Boolean, define whether the map is in color or in black and white</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>cons.eq</code></td>
<td>
<p>Boolean, define whether the IdMap (by default) or the wIdMap is performed</p>
</td>
</tr>
</table>
<h3>Details</h3>

<p>The IdMap, step by step:<br>
Step 1: the sensory and ideal variables are separated into two tables.<br>
Step 2: the product space is created by PCA on the averaged sensory table (averaged by product).<br>
Step 3: the averaged ideal product of each consumer is projected as supplementary entities in this space.<br>
Step 4: confidence ellipses are created around each individual averaged ideal product using truncated total bootstrap.<br>
Step 5: for each consumer, the space is grid and the position where the ideal area
is defined is marked: individual surfaces of response are created.<br>
Step 6: (optional) the ellipses can be balanced by applying individual weight
(all the ellipses have a weigth of 1, however the size of the ellipse). wIdMap is then performed.<br>
Step 7: all the individual surface plots are added together and a surface plot is created.<br></p>


<h3>Value</h3>

<p>A list containing the following components:
</p>
<table>
<tr style="vertical-align: top;">
<td><code>PCA</code></td>
<td>
<p>the results from the PCA used to create the sensory space</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>idmap</code></td>
<td>
<p>a list containing the results of the IdMap (<em>data</em>), the weight for each consumer (<em>j.weight</em>)
and the precision used.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>ideal</code></td>
<td>
<p>a list containing the estimated profile of the ideal of reference (not available for the wIdMap) 
as well as the percentage of consumers concerned</p>
</td>
</tr>
</table>
<h3>Author(s)</h3>

<p>Worch Thierry (thierry@qistatistics.co.uk)</p>


<h3>References</h3>

<p>Worch, T., Le, S., Punter, P., Pages, J. (2012).
Construction of an Ideal Map (IdMap) based on the ideal profiles obtained directly from consumers.
<em>Food Quality and Preference</em>, 26, 93-104.
</p>


<h3>See Also</h3>

 <p><code>plot.IdMap</code>, <code>carto</code>, <code>boot</code></p>


<h3>Examples</h3>

<pre><code class="language-R">## Not run: 
data(perfume_ideal)

#! For the IdMap
res.IdMap &lt;- IdMap(perfume_ideal, col.p=2, col.j=1, 
   col.lik=ncol(perfume_ideal), id.recogn="id_")
plot.IdMap(res.IdMap, xlim=c(-7,10), ylim=c(-5,7), levels.contour=NULL, color=TRUE)

#! For the wIdMap
res.wIdMap &lt;- IdMap(perfume_ideal, col.p=2, col.j=1, col.lik=ncol(perfume_ideal), 
   id.recogn="id_", cons.eq=TRUE)

## End(Not run)
</code></pre>


</div>