<div class="container">

<table style="width: 100%;"><tr>
<td>plot.shapley</td>
<td style="text-align: right;">R Documentation</td>
</tr></table>
<h2>Barplot of Shapley values</h2>

<h3>Description</h3>

<p>Barplot of Shapley values
</p>


<h3>Usage</h3>

<pre><code class="language-R">## S3 method for class 'shapley'
plot(
  x,
  subset = NULL,
  chi2.q = 0.99,
  abbrev.var = 3,
  abbrev.obs = 10,
  sort.var = FALSE,
  sort.obs = FALSE,
  plot_md = TRUE,
  md_squared = TRUE,
  rotate_x = TRUE,
  ...
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr style="vertical-align: top;">
<td><code>x</code></td>
<td>
<p>A list of class <code>shapley</code>.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>subset</code></td>
<td>
<p>Either an integer, <code>"chi2"</code>, or <code>NULL</code> (default) to select which rows of <code>phi</code> should be displayed.
If <code>NULL</code>, all <code class="reqn">n</code> rows are displayed,
for a single integer the <code>subset</code> rows with the highest Mahalanobis distance are displayed,
for an integer vector the <code>subset</code> selected rows are displayed,
and for <code>"chi2"</code> all outlying rows are displayed (Mahalanobis distance greater than <code class="reqn">\sqrt{}</code><code>qchisq(chi2.q,p)</code>).</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>chi2.q</code></td>
<td>
<p>Quantile, only used if <code>subset == "chi2"</code>.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>abbrev.var</code></td>
<td>
<p>Integer. If <code>abbrev.var</code> <code class="reqn">&gt; 0</code>, column names are abbreviated using abbreviate with <code>minlenght = abrev.var</code>.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>abbrev.obs</code></td>
<td>
<p>Integer. If <code>abbrev.obs</code> <code class="reqn">&gt; 0</code>, row names are abbreviated using abbreviate with <code>minlenght = abrev.obs</code>.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>sort.var</code></td>
<td>
<p>Logical. If <code>TRUE</code> (default), variables are sorted according to the  distance</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>sort.obs</code></td>
<td>
<p>Logical. If <code>TRUE</code> (default), observations are sorted according to their Mahalanobis distance.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>plot_md</code></td>
<td>
<p>Logical. If <code>TRUE</code> (default), the Mahalanobis distance will be included in the plot.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>md_squared</code></td>
<td>
<p>Logical. If <code>TRUE</code> (default), the squared Mahalanobis distance is plotted otherwise the (not-squared) Mahalanobis distance.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>rotate_x</code></td>
<td>
<p>Logical. If <code>TRUE</code> (default), the x-axis labels are rotated.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>...</code></td>
<td>
<p>Optional arguments passed to methods.</p>
</td>
</tr>
</table>
<h3>Value</h3>

<p>Returns a barplot that displays the Shapley values (<code>shapley</code>)for each observation and optionally (<code>plot_md = TRUE</code>)
includes the squared Mahalanobis distance (black bar) and the corresponding (non-)central chi-square quantile (dotted line).
</p>


<h3>Examples</h3>

<pre><code class="language-R">library(MASS)
set.seed(1)
n &lt;- 100; p &lt;- 10
mu &lt;- rep(0,p)
Sigma &lt;- matrix(0.9, p, p); diag(Sigma) = 1
X &lt;- mvrnorm(n, mu, Sigma)
X_clean &lt;- X
X[sample(1:(n*p), 100, FALSE)] &lt;- rep(c(-5,5),50)
call_shapley &lt;- shapley(X, mu, Sigma)
plot(call_shapley, subset = 1:20)
plot(call_shapley, subset = 5, rotate_x = FALSE)
plot(call_shapley, subset = 5, md_squared = FALSE, rotate_x = FALSE)
</code></pre>


</div>