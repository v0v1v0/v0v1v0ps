<div class="container">

<table style="width: 100%;"><tr>
<td>sf_get_report_instance_results</td>
<td style="text-align: right;">R Documentation</td>
</tr></table>
<h2>Get report instance results</h2>

<h3>Description</h3>

<p><a href="https://lifecycle.r-lib.org/articles/stages.html#experimental"><img src="../help/figures/lifecycle-experimental.svg" alt="[Experimental]"></a>
</p>
<p>Retrieves results for an instance of a report run asynchronously with or without
filters. Depending on your asynchronous report run request, data can be at the
summary level or include details.
</p>


<h3>Usage</h3>

<pre><code class="language-R">sf_get_report_instance_results(
  report_id,
  report_instance_id,
  labels = TRUE,
  guess_types = TRUE,
  bind_using_character_cols = deprecated(),
  fact_map_key = "T!T",
  verbose = FALSE
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr style="vertical-align: top;">
<td><code>report_id</code></td>
<td>
<p><code>character</code>; the Salesforce Id assigned to a created
analytics report. It will start with <code>"00O"</code>.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>report_instance_id</code></td>
<td>
<p><code>character</code>; the Salesforce Id assigned to a
created analytics report instance (an asynchronous run). It will start with
<code>"0LG"</code>.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>labels</code></td>
<td>
<p><code>logical</code>; an indicator of whether the returned data should
be the label (i.e. formatted value) or the actual value. By default, the labels
are returned because these are what appear in the Salesforce dashboard and
more closely align with the column names. For example, "Account.Name" label
may be <code>"Account B"</code> and the value <code>0016A0000035mJEQAY</code>. The former
(label) more accurately reflects the "Account.Name".</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>guess_types</code></td>
<td>
<p><code>logical</code>; indicating whether or not to use <code>col_guess()</code>
to try and cast the data returned in the recordset. If <code>TRUE</code> then
<code>col_guess()</code> is used, if <code>FALSE</code> then all fields will be returned
as character. This is helpful when <code>col_guess()</code> will mangle field values
in Salesforce that you'd like to preserve during translation into a <code>tbl_df</code>,
like numeric looking values that must be preserved as strings ("48.0").</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>bind_using_character_cols</code></td>
<td>
<p><code>logical</code>; an indicator of whether to
cast the data to all character columns to ensure that <code>bind_rows</code>
does not fail because two paginated recordsets have differing datatypes for the
same column. Set this to <code>TRUE</code> rarely, typically only when having this
set to <code>FALSE</code> returns an error or you want all columns in the data to be
character.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>fact_map_key</code></td>
<td>
<p><code>character</code>; string providing an index into each
section of a fact map, from which you can access summary and detailed data.
The pattern for the fact map keys varies by report format so it is important
to know what the <code>reportFormat</code> property of the target report is. See the
note below for more details.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>verbose</code></td>
<td>
<p><code>logical</code>; an indicator of whether to print additional
detail for each API call, which is useful for debugging. More specifically, when
set to <code>TRUE</code> the URL, header, and body will be printed for each request,
along with additional diagnostic information where available.</p>
</td>
</tr>
</table>
<h3>Value</h3>

<p><code>tbl_df</code>; the detail report data. More specifically, the detailed
data from the "T!T" entry in the fact map.
</p>


<h3>Salesforce Documentation</h3>


<ul>
<li> <p><a href="https://developer.salesforce.com/docs/atlas.en-us.api_analytics.meta/api_analytics/sforce_analytics_rest_api_instance_resource_results.htm">Documentation</a>
</p>
</li>
<li> <p><a href="https://developer.salesforce.com/docs/atlas.en-us.api_analytics.meta/api_analytics/sforce_analytics_rest_api_get_reportdata.htm#example_instance_reportresults">Example</a>
</p>
</li>
<li> <p><a href="https://developer.salesforce.com/docs/atlas.en-us.api_analytics.meta/api_analytics/sforce_analytics_rest_api_factmap_example.htm">Factmap Documentation</a>
</p>
</li>
</ul>
<h3>Note</h3>

<p>Below are the fact map key patterns for three report types:
</p>

<dl>
<dt>TABULAR</dt>
<dd>
<p><code>T!T</code>: The grand total of a report. Both record data
values and the grand total are represented by this key.</p>
</dd>
<dt>SUMMARY</dt>
<dd>
<p><code>&lt;First level row grouping_second level row grouping_third 
  level row grouping&gt;!T</code>: T refers to the row grand total.</p>
</dd>
<dt>MATRIX</dt>
<dd>
<p><code>&lt;First level row grouping_second level row grouping&gt;!&lt;First 
  level column grouping_second level column grouping&gt;.</code></p>
</dd>
</dl>
<p>Each item in a row or column grouping is numbered starting with 0. Here are
some examples of fact map keys:
</p>

<dl>
<dt>0!T</dt>
<dd>
<p>The first item in the first-level grouping.</p>
</dd>
<dt>1!T</dt>
<dd>
<p>The second item in the first-level grouping.</p>
</dd>
<dt>0_0!T</dt>
<dd>
<p>The first item in the first-level grouping and the first item
in the second-level grouping.</p>
</dd>
<dt>0_1!T</dt>
<dd>
<p>The first item in the first-level grouping and the second item
in the second-level grouping.</p>
</dd>
</dl>
<h3>See Also</h3>

<p>Other Report Instance functions: 
<code>sf_delete_report_instance()</code>,
<code>sf_list_report_instances()</code>
</p>


<h3>Examples</h3>

<pre><code class="language-R">## Not run: 
# execute a report asynchronously in your Org
all_reports &lt;- sf_query("SELECT Id, Name FROM Report")
this_report_id &lt;- all_reports$Id[1]
results &lt;- sf_execute_report(this_report_id, async=TRUE)

# check if that report has succeeded, ... 
instance_list &lt;- sf_list_report_instances(this_report_id)
instance_status &lt;- instance_list[[which(instance_list$id == results$id), "status"]]

# ... if so, then grab the results
if(instance_status == "Success"){
  report_data &lt;- sf_get_report_instance_results(report_id = this_report_id, 
                                                report_instance_id = results$id)
}

## End(Not run)
</code></pre>


</div>