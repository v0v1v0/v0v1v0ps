<div class="container">

<table style="width: 100%;"><tr>
<td>validate</td>
<td style="text-align: right;">R Documentation</td>
</tr></table>
<h2>Reject Implausible Statistics</h2>

<h3>Description</h3>

<p>Simulation output may contain rogue values due to idiosyncracies of
model fitting. For example, nonidentifiability due to inadequate data
can result in spurious extreme ‘estimates’ of the sampling
variance. Undue influence of rogue replicates can be reduced by using
the median as a summary field rather than the mean. This function is
another way to deal with the problem, by setting to NA selected
statistics from replicates for which some ‘test’ statistic is
out-of-range.
</p>


<h3>Usage</h3>

<pre><code class="language-R">validate(x, test, validrange = c(0, Inf), targets = test, quietly = FALSE)
</code></pre>


<h3>Arguments</h3>

<table>
<tr style="vertical-align: top;">
<td><code>x</code></td>
<td>
<p>object that inherits from ‘selectedstatistics’</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>test</code></td>
<td>
<p>character; name of statistic to check</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>validrange</code></td>
<td>
<p>numeric vector comprising the minimum and maximum
permitted values of ‘test’, or a matrix (see details)</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>targets</code></td>
<td>
<p>character vector with names of one or more statistics
to set to missing (NA) when test is out-of-range</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>quietly</code></td>
<td>
<p>logical; if TRUE messages are suppressed</p>
</td>
</tr>
</table>
<h3>Details</h3>

<p>Values of ‘test’ and ‘targets’ should be columns in each component
‘replicate x statistic’ matrix (i.e., scenario) of
<code>x$output</code>. You can check for these with
<code>find.stats</code>.
</p>
<p>If <code>validrange</code> is a matrix its first and second columns are
interpreted as scenario-specific bounds (minima and maxima), and the
number of rows must match the number of scenarios.
</p>
<p>If all non-missing values of ‘test’ are in the valid range, the effect
is to force the target statistics to NA wherever ‘test’ is NA.
</p>
<p>The default is to change only the test field itself. If the value of
‘test’ does not appear in ‘targets’ then the test field is unchanged.
</p>
<p>If <code>targets = "all"</code> then all columns are set to NA when the test
fails.
</p>


<h3>Value</h3>

<p>An object of class c(‘selectedstatistics’, secrdesign', ‘list’) with
the same structure and header information as the input, but possibly
with some values in the ‘output’ component converted to NA.
</p>


<h3>See Also</h3>

<p><code>select.stats</code>, <code>find.stats</code>
</p>


<h3>Examples</h3>

<pre><code class="language-R">
## Not run: 

## generate some data
scen1 &lt;- make.scenarios(D = c(5,10), sigma = 25, g0 = 0.2)
traps1 &lt;- make.grid()
tmp1 &lt;- run.scenarios(nrepl = 5, trapset = traps1, scenarios = scen1,
    fit = TRUE, extractfn = trim)
tmp2 &lt;- predict(tmp1)
tmp3 &lt;- select.stats(tmp2, 'D', c('estimate','RB','RSE','COV'))

## just for demonstration --
## apply scenario-specific +/- 20% bounds for estimated density
## set RB, RSE and COV to NA when estimate is outside this range
permitted &lt;- outer(tmp3$scenarios$D, c(0.8,1.2)) 
permitted   ## a 2 x 2 matrix
tmp4 &lt;- validate(tmp3, 'estimate', permitted, c('RB', 'RSE','COV'))

## what have we done?!
tmp4$output
summary(tmp4)


## End(Not run)
</code></pre>


</div>