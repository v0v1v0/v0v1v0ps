<div class="container">

<table style="width: 100%;"><tr>
<td>group_times</td>
<td style="text-align: right;">R Documentation</td>
</tr></table>
<h2>Group Times</h2>

<h3>Description</h3>

<p><code>group_times</code> groups rows into time groups. The function accepts date
time formatted data and a threshold argument. The threshold argument is used
to specify a time window within which rows are grouped.
</p>


<h3>Usage</h3>

<pre><code class="language-R">group_times(DT = NULL, datetime = NULL, threshold = NULL)
</code></pre>


<h3>Arguments</h3>

<table>
<tr style="vertical-align: top;">
<td><code>DT</code></td>
<td>
<p>input data.table</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>datetime</code></td>
<td>
<p>name of date time column(s). either 1 POSIXct or 2 IDate and
ITime. e.g.: 'datetime' or c('idate', 'itime')</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>threshold</code></td>
<td>
<p>threshold for grouping times. e.g.: '2 hours', '10 minutes',
etc. if not provided, times will be matched exactly. Note that provided
threshold must be in the expected format: '## unit'</p>
</td>
</tr>
</table>
<h3>Details</h3>

<p>The <code>DT</code> must be a <code>data.table</code>. If your data is a
<code>data.frame</code>, you can convert it by reference using
<code>data.table::setDT</code>.
</p>
<p>The <code>datetime</code> argument expects the name of a column in <code>DT</code> which
is of type <code>POSIXct</code> or the name of two columns in <code>DT</code> which are
of type <code>IDate</code> and <code>ITime</code>.
</p>
<p><code>threshold</code> must be provided in units of minutes, hours or days. The
character string should start with an integer followed by a unit, separated
by a space. It is interpreted in terms of 24 hours which poses the following
limitations:
</p>
 <ul>
<li>
<p> minutes, hours and days cannot be fractional </p>
</li>
<li>
<p> minutes
must divide evenly into 60 </p>
</li>
<li>
<p> minutes must not exceed 60 </p>
</li>
<li>
<p> minutes,
hours which are nearer to the next day, are grouped as such </p>
</li>
<li>
<p> hours must
divide evenly into 24 </p>
</li>
<li>
<p> multi-day blocks should divide into the range of
days, else the blocks may not be the same length </p>
</li>
</ul>
<p>In addition, the <code>threshold</code> is considered a fixed window throughout the
time series and the rows are grouped to the nearest interval.
</p>
<p>If <code>threshold</code> is NULL, rows are grouped using the <code>datetime</code>
column directly.
</p>


<h3>Value</h3>

<p><code>group_times</code> returns the input <code>DT</code> appended with a
<code>timegroup</code> column and additional temporal grouping columns to help
investigate, troubleshoot and interpret the timegroup.
</p>
<p>The actual value of <code>timegroup</code> is arbitrary and represents the
identity of a given <code>timegroup</code> which 1 or more individuals are
assigned to. If the data was reordered, the group may change, but the
contents of each group would not.
</p>
<p>The temporal grouping columns added depend on the <code>threshold</code>
provided:
</p>
 <ul>
<li> <p><code>threshold</code> with unit minutes: "minutes" column added
identifying the nearest minute group for each row. </p>
</li>
<li> <p><code>threshold</code>
with unit hours: "hours" column added identifying the nearest hour group
for each row. </p>
</li>
<li> <p><code>threshold</code> with unit days: "block" columns added
identifying the multiday block for each row. </p>
</li>
</ul>
<p>A message is returned when any of these columns already exist in the input
<code>DT</code>, because they will be overwritten.
</p>


<h3>See Also</h3>

<p><code>group_pts</code> <code>group_lines</code>
<code>group_polys</code>
</p>


<h3>Examples</h3>

<pre><code class="language-R"># Load data.table
library(data.table)


# Read example data
DT &lt;- fread(system.file("extdata", "DT.csv", package = "spatsoc"))

# Cast the character column to POSIXct
DT[, datetime := as.POSIXct(datetime, tz = 'UTC')]

group_times(DT, datetime = 'datetime', threshold = '5 minutes')

group_times(DT, datetime = 'datetime', threshold = '2 hours')

group_times(DT, datetime = 'datetime', threshold = '10 days')

</code></pre>


</div>