<div class="container">

<table style="width: 100%;"><tr>
<td>strip</td>
<td style="text-align: right;">R Documentation</td>
</tr></table>
<h2>Lighten R model outputs</h2>

<h3>Description</h3>

<p>The <code>strip</code> function deletes components of R model outputs that are 
useless for specific purposes, 
such as <code>predict</code>[ing], <code>print</code>[ing], <code>summary</code>[izing], etc.
</p>
<p>The idea is to prevent the size of the model output to grow 
with the size of the training dataset. 
This is useful if one has to save the output for later use 
while limiting its size on disk. 
</p>
<p>The birth of this package originates with Nina Zumel's post 
<a href="http://www.win-vector.com/blog/2014/05/trimming-the-fat-from-glm-models-in-r/">‘Trimming the Fat from glm() Models in R’</a> 
on Win-Vector Blog.
</p>


<h3>Usage</h3>

<pre><code class="language-R">strip(object, keep, ...)

strip_(object, keep, ...)

## Default S3 method:
strip_(object, keep, ...)

## S3 method for class 'gam'
strip_(object, keep, ...)

## S3 method for class 'glm'
strip_(object, keep, ...)

## S3 method for class 'kmeans'
strip_(object, keep, ...)

## S3 method for class 'lm'
strip_(object, keep, ...)

## S3 method for class 'loess'
strip_(object, keep, ...)

## S3 method for class 'randomForest'
strip_(object, keep, ...)

## S3 method for class 'train'
strip_(object, keep, use_trim = FALSE, ...)
</code></pre>


<h3>Arguments</h3>

<table>
<tr style="vertical-align: top;">
<td><code>object</code></td>
<td>
<p>result of an R model, see 'Details'.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>keep</code></td>
<td>
<p>character. A vector of values among <code>"everything"</code>, 
<code>"predict"</code>, <code>"print"</code>, and <code>"summary"</code>. 
Except for <code>strip.lm</code>, currently only the values 
<code>"everything"</code>, <code>"predict"</code>, and <code>"print"</code>,  
are implemented.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>...</code></td>
<td>
<p>Additional arguments to be passed to other methods.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>use_trim</code></td>
<td>
<p>boolean. For the <code>strip.train</code> method, if <code>use_trim=TRUE</code> 
and if <code>keep="predict"</code>, then 
the function applied is (if it exists) the <code>trim</code> function 
embedded as <code>object$modelInfo$trim</code>.</p>
</td>
</tr>
</table>
<h3>Details</h3>

<p>If <code>keep="predict"</code>, components inside the list <code>object</code> are kept 
if they are needed by the <code>predict</code> method, otherwise they are set to <code>NULL</code>. 
If <code>keep=c("predict", "print")</code>, components are kept as soon as 
they are needed by one of the 
<code>predict</code> or <code>print</code> methods. 
If <code>keep="everything"</code>, <code>object</code> is returned with no modifications. 
</p>
<p>Currently the models supported are limited to the following list: 
</p>

<ul>
<li> <p><code>lm</code> and <code>glm</code>, the linear and generalized linear regression function from package <span class="pkg">stat</span>; 
</p>
</li>
<li> <p><code>loess</code>, the local polynomial regression function from package <span class="pkg">stat</span>;
</p>
</li>
<li> <p><code>randomForest</code>, from package <span class="pkg">randomForest</span>. 
</p>
</li>
</ul>
<p>There is also a <code>strip</code> function for 'train' objects built with the <span class="pkg">caret</span> package. 
</p>
<p>Further developments of the package should include additional models, 
and should enable additional <code>keep</code> values 
(e.g. <code>keep="summary"</code>, <code>keep="anova"</code>, etc.)
</p>


<h3>Value</h3>

<p>A list of the same class as <code>object</code> is returned.
</p>


<h3>Author(s)</h3>

<p>The method for <code>glm</code> objects is adapted 
from <a href="http://www.win-vector.com/blog/2014/05/trimming-the-fat-from-glm-models-in-r/">Nina Zumel's post</a> 
on Win-Vector Blog.
</p>
<p>The method for <code>randomForest</code> objects is adapted 
from <a href="http://stats.stackexchange.com/a/171096/55854">ReKa's answer</a> 
on StackExchange.
</p>


<h3>See Also</h3>

<p>See <a href="http://www.win-vector.com/blog/2014/05/trimming-the-fat-from-glm-models-in-r/">Nina Zumel's post</a> 
on Win-Vector Blog for further insight, examples, and motivations; 
<a href="http://stats.stackexchange.com/a/171096/55854">ReKa's answer</a> on StackExchange for reducing the size of a 
<code>randomForest</code> object; <a href="https://github.com/topepo/caret/issues/90">this discussion</a> for limiting 
the ‘footprint’ of regression and classification objects within the <span class="pkg">caret</span> package.
</p>


<h3>Examples</h3>

<pre><code class="language-R">data("mtcars")
set.seed(110)
i = sample(2, nrow(mtcars), replace = TRUE, prob=c(0.8, 0.2))
r1 = lm(mpg ~ ., data = mtcars[i==1,])
r2 = strip(r1, keep = "predict")

# Estimate the objects' size as the size of their serialization
length(serialize(r1, NULL))
length(serialize(r2, NULL))

# Check that predictions are the same
p1 = predict(r1, newdata = mtcars[i==2,])
p2 = predict(r2, newdata = mtcars[i==2,])
identical(p1, p2) # TRUE

</code></pre>


</div>