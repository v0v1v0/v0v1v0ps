<div class="container">

<table style="width: 100%;"><tr>
<td>powEx</td>
<td style="text-align: right;">R Documentation</td>
</tr></table>
<h2>
Defining the example to be used and the method to be used for sample
size estimation.
</h2>

<h3>Description</h3>

<p>A function for constructing an object of class power
used for drawing an example in a sensitivity plot and for estimating
the sample size.
</p>


<h3>Usage</h3>

<pre><code class="language-R">powEx(x, theta, xi = NA, endpoint = NA, power = 0.9, drop = 0,
             method = c("default", "lm", "step"), lm.range = NA,
             forceDivisor = FALSE)</code></pre>


<h3>Arguments</h3>

<table>
<tr style="vertical-align: top;">
<td><code>x</code></td>
<td>
<p>An object of class powCalc.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>theta</code></td>
<td>
<p>a numeric value indicating for which <code>theta</code> to draw
the example in the sensitivity plot and where to evaluate sample
size. It makes only sense to use a <code>theta</code> in the range
evaluated.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>xi</code></td>
<td>
<p>a numeric value, as <code>theta</code> but for <code>xi</code></p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>endpoint</code></td>
<td>
<p>Object of class <code>character</code>, indidating for which
endpoint sample size should be evaluated</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>power</code></td>
<td>
<p>Object of class <code>numeric</code>, indicating for what power
samle size should be evaluated</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>method</code></td>
<td>
<p>Defining the method how the sample size for the is
calculated. <code>method = "default"</code> uses <code>"lm"</code> if resampling
was used to calculate the powCalc object, otherwise
<code>"step"</code> is used.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>lm.range</code></td>
<td>
<p>The range of evaluations that are used for estimating
the sample size if the <code>method = "lm"</code> or evaluates to
<code>"lm"</code>. For the default <code>lm.range</code> = 0.2 this means from
80 to 120 % of the power in the example, e.g. for the power of 0.9
this is a range from 0.72 to 1.08. Note that the range is cut at 0
and 1.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>drop</code></td>
<td>
<p>Object of class <code>numeric</code> (range: 0 to 1), indicating
how many drop outs are expected.  This information is used to
calculate the number of subject that should be recruited (addressed
e.g. by the function <code>tex</code> using type <code>nRec</code>).</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>forceDivisor</code></td>
<td>
<p>If <code>TRUE</code> the biggest common divisor of all
evaluated sample sizes is used as divisor and the estimated sample
size is increased to be divisible by this divisor. If an integer is
provided it is used as divisor.</p>
</td>
</tr>
</table>
<h3>Details</h3>

<p>For method equal to <code>"lm"</code> a linear model is fit as
lm(sample.size ~ transformed(power)) with all data where theta, and xi
are equal to the theta and xi of the example and within the
power-range as defined by the argument <code>lm.range</code>. This model is
then used for predicting the sample size. Always inspect the result
using <code>inspect</code>!
</p>
<p>The method "step" returns the last element in the sequence of sample
sizes - power pairs, sorted with decreasing power, where the power is
above the power defined for the example.
</p>


<h3>Value</h3>

<p>An object of class power.</p>


<h3>Note</h3>

<p>In older verstions of the package: The function <code>merge</code> was
used together with an object of class powEx to form an
object of class power.
</p>


<h3>Examples</h3>

<pre><code class="language-R">## defining the range of n and theta to be evaluated
psi &lt;- powPar(theta = seq(from = 0.5, to = 1.5, by = 0.1),
              n = seq(from = 20, to = 60, by = 2),
              muA = 0,
              muB = 1)

## defining a power-function     
powFun &lt;- function(psi){
  power.t.test(n = n(psi)/2,
               delta = pp(psi, "muA") - pp(psi, "muB"),
               sd = theta(psi)
               )$power
}

## evaluating the power-function for all combinations of n and theta
calc &lt;- powCalc(psi, powFun)

## adding example at theta of 1 and power of 0.9
pow &lt;- powEx(calc, theta = 1, power = 0.9)

## drawing the power plot with 3 contour lines
plot(pow,
     xlab = "Standard Deviation",
     ylab = "Total Sample Size",
     at = c(0.85, 0.9, 0.95))

## changing the estimation method
pow2 &lt;- powEx(calc, theta = 1, power = 0.9, method = "lm")

## drawing an inspection plot
inspect(pow2)
</code></pre>


</div>