<div class="container">

<table style="width: 100%;"><tr>
<td>steprfAVI2</td>
<td style="text-align: right;">R Documentation</td>
</tr></table>
<h2>Select predictive variables for random forest by AVI and accuracy
in a stepwise algorithm</h2>

<h3>Description</h3>

<p>This function is similar to 'steprfAVI'; the only difference
is that 'set.seed()' is added before each code line that involves
randomness and such additions alter the results considerably.
</p>


<h3>Usage</h3>

<pre><code class="language-R">steprfAVI2(
  trainx,
  trainy,
  cv.fold = 10,
  ntree = 500,
  rpt = 20,
  predacc = "VEcv",
  importance = TRUE,
  maxk = c(4),
  nsim = 100,
  min.n.var = 2,
  corr.threshold = 0.5,
  rseed = 1234,
  ...
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr style="vertical-align: top;">
<td><code>trainx</code></td>
<td>
<p>a dataframe or matrix contains columns of predictor variables.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>trainy</code></td>
<td>
<p>a vector of response, must have length equal to the number of
rows in trainx.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>cv.fold</code></td>
<td>
<p>integer; number of folds in the cross-validation. if &gt; 1,
then apply n-fold cross validation; the default is 10, i.e., 10-fold cross
validation that is recommended.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>ntree</code></td>
<td>
<p>number of trees to grow. This should not be set to too small a
number, to ensure that every input row gets predicted at least a few times.
By default, 500 is used.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>rpt</code></td>
<td>
<p>iteration of cross validation.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>predacc</code></td>
<td>
<p>"VEcv" for vecv for numerical data, or "ccr" (i.e., correct
classification rate) or "kappa" for categorical data.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>importance</code></td>
<td>
<p>imprtance of predictive variables.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>maxk</code></td>
<td>
<p>maxk split value. By default, 4 is used.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>nsim</code></td>
<td>
<p>iteration number. By default, 100 is used.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>min.n.var</code></td>
<td>
<p>minimum number of predictive variables remained in the final
predictive model the default is 2. If 1 is used, then warnings: 'invalid mtry:
reset to within valid range' will be issued, which should be ignored.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>corr.threshold</code></td>
<td>
<p>correlation threshold and the defaults value is 0.5.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>rseed</code></td>
<td>
<p>random seed. By default, 1234 is used.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>...</code></td>
<td>
<p>other arguments passed on to randomForest.</p>
</td>
</tr>
</table>
<h3>Value</h3>

<p>A list with the following components: 1) variable.removed:
variable removed based on AVI, 2) predictive.accuracy: averaged predictive
accuracy of the model after excluding the variable.removed, 3)
delta.accuracy: contribution to accuracy by each variable.removed, and 4)
predictive.accuracy2: predictive accuracy matrix of the model after
excluding the variable.removed for each iteration.
</p>


<h3>Author(s)</h3>

<p>Jin Li
</p>


<h3>References</h3>

<p>Li, J. (2022). Spatial Predictive Modeling with R. Boca Raton,
Chapman and Hall/CRC.
</p>
<p>Li, J. 2013. Predicting the spatial distribution of seabed
gravel content using random forest, spatial interpolation methods and
their hybrid methods. Pages 394-400  The International Congress on
Modelling and Simulation (MODSIM) 2013, Adelaide.
</p>
<p>Li, J., Alvarez, B., Siwabessy, J., Tran, M., Huang, Z., Przeslawski, R.,
Radke, L., Howard, F. and Nichol, S. (2017). "Application of random forest,
generalised linear model and their hybrid methods with geostatistical
techniques to count data: Predicting sponge species richness."
Environmental Modelling &amp; Software 97: 112-129.
</p>
<p>Li, J., Siwabessy, J., Huang, Z., Nichol, S. (2019). "Developing an optimal
spatial predictive model for seabed sand content using machine learning,
geostatistics and their hybrid methods." Geosciences 9 (4):180.
</p>
<p>Li, J., Siwabessy, J., Tran, M., Huang, Z. and Heap, A., 2014. Predicting
Seabed Hardness Using Random Forest in R. Data Mining Applications with R. Y.
Zhao and Y. Cen. Amsterdam, Elsevier: 299-329.
</p>
<p>Liaw, A. and M. Wiener (2002). Classification and Regression by
randomForest. R News 2(3), 18-22.
</p>
<p>Smith, S.J., Ellis, N., Pitcher, C.R., 2011. Conditional variable
importance in R package extendedForest. R vignette
[http://gradientforest.r-forge.r-project.org/Conditional-importance.pdf].
</p>
<p>Chang, W. 2021. Cookbook for R. http://www.cookbook-r.com/.
</p>


<h3>Examples</h3>

<pre><code class="language-R">
library(spm)
data(petrel)
steprf1 &lt;- steprfAVI2(trainx = petrel[, c(1,2, 6:9)], trainy = petrel[, 5],
 rpt = 2, predacc = "VEcv", importance = TRUE, nsim = 3, min.n.var = 2)
steprf1

#plot steprf1 results
library(reshape2)
pa1 &lt;- as.data.frame(steprf1$predictive.accuracy2)
names(pa1) &lt;- steprf1$variable.removed
pa2 &lt;- melt(pa1, id = NULL)
names(pa2) &lt;- c("Variable","VEcv")
library(lattice)
par (font.axis=2, font.lab=2)
with(pa2, boxplot(VEcv~Variable, ylab="VEcv (%)", xlab="Predictive variable removed"))

barplot(steprf1$delta.accuracy, col = (1:length(steprf1$variable.removed)),
names.arg = steprf1$variable.removed, main = "Predictive accuracy vs variable removed",
font.main = 4, cex.names=1, font=2, ylab="Increase in VEcv (%)")


</code></pre>


</div>